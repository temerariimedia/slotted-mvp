var zE=Object.defineProperty;var VE=(t,r,i)=>r in t?zE(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i;var Ec=(t,r,i)=>VE(t,typeof r!="symbol"?r+"":r,i);import{g as KE,b as GE,c as Mw,o as Pr,s as mr,a as sn,e as Hn,n as In,d as to}from"./index-x1NvUnkb.js";import JE from"chromium-bidi/lib/cjs/bidiMapper/BidiMapper";import YE from"chromium-bidi/lib/cjs/cdp/CdpConnection";function XE(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const QE={},ZE=Object.freeze(Object.defineProperty({__proto__:null,default:QE},Symbol.toStringTag,{value:"Module"})),Je=KE(ZE);var ro={exports:{}},Jm;function Vr(){if(Jm)return ro.exports;Jm=1;var t=typeof Reflect=="object"?Reflect:null,r=t&&typeof t.apply=="function"?t.apply:function(o,h,m){return Function.prototype.apply.call(o,h,m)},i;t&&typeof t.ownKeys=="function"?i=t.ownKeys:Object.getOwnPropertySymbols?i=function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:i=function(o){return Object.getOwnPropertyNames(o)};function E(n){console&&console.warn&&console.warn(n)}var R=Number.isNaN||function(o){return o!==o};function V(){V.init.call(this)}ro.exports=V,ro.exports.once=v,V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var te=10;function P(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return te},set:function(n){if(typeof n!="number"||n<0||R(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");te=n}}),V.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(o){if(typeof o!="number"||o<0||R(o))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+o+".");return this._maxListeners=o,this};function e(n){return n._maxListeners===void 0?V.defaultMaxListeners:n._maxListeners}V.prototype.getMaxListeners=function(){return e(this)},V.prototype.emit=function(o){for(var h=[],m=1;m<arguments.length;m++)h.push(arguments[m]);var c=o==="error",l=this._events;if(l!==void 0)c=c&&l.error===void 0;else if(!c)return!1;if(c){var x;if(h.length>0&&(x=h[0]),x instanceof Error)throw x;var T=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw T.context=x,T}var b=l[o];if(b===void 0)return!1;if(typeof b=="function")r(b,this,h);else for(var p=b.length,O=_(b,p),m=0;m<p;++m)r(O[m],this,h);return!0};function U(n,o,h,m){var c,l,x;if(P(h),l=n._events,l===void 0?(l=n._events=Object.create(null),n._eventsCount=0):(l.newListener!==void 0&&(n.emit("newListener",o,h.listener?h.listener:h),l=n._events),x=l[o]),x===void 0)x=l[o]=h,++n._eventsCount;else if(typeof x=="function"?x=l[o]=m?[h,x]:[x,h]:m?x.unshift(h):x.push(h),c=e(n),c>0&&x.length>c&&!x.warned){x.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(o)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=n,T.type=o,T.count=x.length,E(T)}return n}V.prototype.addListener=function(o,h){return U(this,o,h,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(o,h){return U(this,o,h,!0)};function C(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(n,o,h){var m={fired:!1,wrapFn:void 0,target:n,type:o,listener:h},c=C.bind(m);return c.listener=h,m.wrapFn=c,c}V.prototype.once=function(o,h){return P(h),this.on(o,w(this,o,h)),this},V.prototype.prependOnceListener=function(o,h){return P(h),this.prependListener(o,w(this,o,h)),this},V.prototype.removeListener=function(o,h){var m,c,l,x,T;if(P(h),c=this._events,c===void 0)return this;if(m=c[o],m===void 0)return this;if(m===h||m.listener===h)--this._eventsCount===0?this._events=Object.create(null):(delete c[o],c.removeListener&&this.emit("removeListener",o,m.listener||h));else if(typeof m!="function"){for(l=-1,x=m.length-1;x>=0;x--)if(m[x]===h||m[x].listener===h){T=m[x].listener,l=x;break}if(l<0)return this;l===0?m.shift():f(m,l),m.length===1&&(c[o]=m[0]),c.removeListener!==void 0&&this.emit("removeListener",o,T||h)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(o){var h,m,c;if(m=this._events,m===void 0)return this;if(m.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):m[o]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete m[o]),this;if(arguments.length===0){var l=Object.keys(m),x;for(c=0;c<l.length;++c)x=l[c],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(h=m[o],typeof h=="function")this.removeListener(o,h);else if(h!==void 0)for(c=h.length-1;c>=0;c--)this.removeListener(o,h[c]);return this};function g(n,o,h){var m=n._events;if(m===void 0)return[];var c=m[o];return c===void 0?[]:typeof c=="function"?h?[c.listener||c]:[c]:h?d(c):_(c,c.length)}V.prototype.listeners=function(o){return g(this,o,!0)},V.prototype.rawListeners=function(o){return g(this,o,!1)},V.listenerCount=function(n,o){return typeof n.listenerCount=="function"?n.listenerCount(o):u.call(n,o)},V.prototype.listenerCount=u;function u(n){var o=this._events;if(o!==void 0){var h=o[n];if(typeof h=="function")return 1;if(h!==void 0)return h.length}return 0}V.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function _(n,o){for(var h=new Array(o),m=0;m<o;++m)h[m]=n[m];return h}function f(n,o){for(;o+1<n.length;o++)n[o]=n[o+1];n.pop()}function d(n){for(var o=new Array(n.length),h=0;h<o.length;++h)o[h]=n[h].listener||n[h];return o}function v(n,o){return new Promise(function(h,m){function c(x){n.removeListener(o,l),m(x)}function l(){typeof n.removeListener=="function"&&n.removeListener("error",c),h([].slice.call(arguments))}s(n,o,l,{once:!0}),o!=="error"&&a(n,c,{once:!0})})}function a(n,o,h){typeof n.on=="function"&&s(n,"error",o,h)}function s(n,o,h,m){if(typeof n.on=="function")m.once?n.once(o,h):n.on(o,h);else if(typeof n.addEventListener=="function")n.addEventListener(o,function c(l){m.once&&n.removeEventListener(o,c),h(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}return ro.exports}var Oc={},no={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ym;function eO(){return Ym||(Ym=1,no.read=function(t,r,i,E,R){var V,te,P=R*8-E-1,e=(1<<P)-1,U=e>>1,C=-7,w=i?R-1:0,g=i?-1:1,u=t[r+w];for(w+=g,V=u&(1<<-C)-1,u>>=-C,C+=P;C>0;V=V*256+t[r+w],w+=g,C-=8);for(te=V&(1<<-C)-1,V>>=-C,C+=E;C>0;te=te*256+t[r+w],w+=g,C-=8);if(V===0)V=1-U;else{if(V===e)return te?NaN:(u?-1:1)*(1/0);te=te+Math.pow(2,E),V=V-U}return(u?-1:1)*te*Math.pow(2,V-E)},no.write=function(t,r,i,E,R,V){var te,P,e,U=V*8-R-1,C=(1<<U)-1,w=C>>1,g=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=E?0:V-1,_=E?1:-1,f=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(P=isNaN(r)?1:0,te=C):(te=Math.floor(Math.log(r)/Math.LN2),r*(e=Math.pow(2,-te))<1&&(te--,e*=2),te+w>=1?r+=g/e:r+=g*Math.pow(2,1-w),r*e>=2&&(te++,e/=2),te+w>=C?(P=0,te=C):te+w>=1?(P=(r*e-1)*Math.pow(2,R),te=te+w):(P=r*Math.pow(2,w-1)*Math.pow(2,R),te=0));R>=8;t[i+u]=P&255,u+=_,P/=256,R-=8);for(te=te<<R|P,U+=R;U>0;t[i+u]=te&255,u+=_,te/=256,U-=8);t[i+u-_]|=f*128}),no}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Xm;function Ns(){return Xm||(Xm=1,function(t){const r=GE(),i=eO(),E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=P,t.SlowBuffer=a,t.INSPECT_MAX_BYTES=50;const R=2147483647;t.kMaxLength=R,P.TYPED_ARRAY_SUPPORT=V(),!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function V(){try{const xe=new Uint8Array(1),be={foo:function(){return 42}};return Object.setPrototypeOf(be,Uint8Array.prototype),Object.setPrototypeOf(xe,be),xe.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function te(xe){if(xe>R)throw new RangeError('The value "'+xe+'" is invalid for option "size"');const be=new Uint8Array(xe);return Object.setPrototypeOf(be,P.prototype),be}function P(xe,be,ve){if(typeof xe=="number"){if(typeof be=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(xe)}return e(xe,be,ve)}P.poolSize=8192;function e(xe,be,ve){if(typeof xe=="string")return g(xe,be);if(ArrayBuffer.isView(xe))return _(xe);if(xe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe);if(nt(xe,ArrayBuffer)||xe&&nt(xe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nt(xe,SharedArrayBuffer)||xe&&nt(xe.buffer,SharedArrayBuffer)))return f(xe,be,ve);if(typeof xe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ce=xe.valueOf&&xe.valueOf();if(Ce!=null&&Ce!==xe)return P.from(Ce,be,ve);const Ke=d(xe);if(Ke)return Ke;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof xe[Symbol.toPrimitive]=="function")return P.from(xe[Symbol.toPrimitive]("string"),be,ve);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe)}P.from=function(xe,be,ve){return e(xe,be,ve)},Object.setPrototypeOf(P.prototype,Uint8Array.prototype),Object.setPrototypeOf(P,Uint8Array);function U(xe){if(typeof xe!="number")throw new TypeError('"size" argument must be of type number');if(xe<0)throw new RangeError('The value "'+xe+'" is invalid for option "size"')}function C(xe,be,ve){return U(xe),xe<=0?te(xe):be!==void 0?typeof ve=="string"?te(xe).fill(be,ve):te(xe).fill(be):te(xe)}P.alloc=function(xe,be,ve){return C(xe,be,ve)};function w(xe){return U(xe),te(xe<0?0:v(xe)|0)}P.allocUnsafe=function(xe){return w(xe)},P.allocUnsafeSlow=function(xe){return w(xe)};function g(xe,be){if((typeof be!="string"||be==="")&&(be="utf8"),!P.isEncoding(be))throw new TypeError("Unknown encoding: "+be);const ve=s(xe,be)|0;let Ce=te(ve);const Ke=Ce.write(xe,be);return Ke!==ve&&(Ce=Ce.slice(0,Ke)),Ce}function u(xe){const be=xe.length<0?0:v(xe.length)|0,ve=te(be);for(let Ce=0;Ce<be;Ce+=1)ve[Ce]=xe[Ce]&255;return ve}function _(xe){if(nt(xe,Uint8Array)){const be=new Uint8Array(xe);return f(be.buffer,be.byteOffset,be.byteLength)}return u(xe)}function f(xe,be,ve){if(be<0||xe.byteLength<be)throw new RangeError('"offset" is outside of buffer bounds');if(xe.byteLength<be+(ve||0))throw new RangeError('"length" is outside of buffer bounds');let Ce;return be===void 0&&ve===void 0?Ce=new Uint8Array(xe):ve===void 0?Ce=new Uint8Array(xe,be):Ce=new Uint8Array(xe,be,ve),Object.setPrototypeOf(Ce,P.prototype),Ce}function d(xe){if(P.isBuffer(xe)){const be=v(xe.length)|0,ve=te(be);return ve.length===0||xe.copy(ve,0,0,be),ve}if(xe.length!==void 0)return typeof xe.length!="number"||gt(xe.length)?te(0):u(xe);if(xe.type==="Buffer"&&Array.isArray(xe.data))return u(xe.data)}function v(xe){if(xe>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return xe|0}function a(xe){return+xe!=xe&&(xe=0),P.alloc(+xe)}P.isBuffer=function(be){return be!=null&&be._isBuffer===!0&&be!==P.prototype},P.compare=function(be,ve){if(nt(be,Uint8Array)&&(be=P.from(be,be.offset,be.byteLength)),nt(ve,Uint8Array)&&(ve=P.from(ve,ve.offset,ve.byteLength)),!P.isBuffer(be)||!P.isBuffer(ve))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(be===ve)return 0;let Ce=be.length,Ke=ve.length;for(let ze=0,Re=Math.min(Ce,Ke);ze<Re;++ze)if(be[ze]!==ve[ze]){Ce=be[ze],Ke=ve[ze];break}return Ce<Ke?-1:Ke<Ce?1:0},P.isEncoding=function(be){switch(String(be).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(be,ve){if(!Array.isArray(be))throw new TypeError('"list" argument must be an Array of Buffers');if(be.length===0)return P.alloc(0);let Ce;if(ve===void 0)for(ve=0,Ce=0;Ce<be.length;++Ce)ve+=be[Ce].length;const Ke=P.allocUnsafe(ve);let ze=0;for(Ce=0;Ce<be.length;++Ce){let Re=be[Ce];if(nt(Re,Uint8Array))ze+Re.length>Ke.length?(P.isBuffer(Re)||(Re=P.from(Re)),Re.copy(Ke,ze)):Uint8Array.prototype.set.call(Ke,Re,ze);else if(P.isBuffer(Re))Re.copy(Ke,ze);else throw new TypeError('"list" argument must be an Array of Buffers');ze+=Re.length}return Ke};function s(xe,be){if(P.isBuffer(xe))return xe.length;if(ArrayBuffer.isView(xe)||nt(xe,ArrayBuffer))return xe.byteLength;if(typeof xe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof xe);const ve=xe.length,Ce=arguments.length>2&&arguments[2]===!0;if(!Ce&&ve===0)return 0;let Ke=!1;for(;;)switch(be){case"ascii":case"latin1":case"binary":return ve;case"utf8":case"utf-8":return qe(xe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve*2;case"hex":return ve>>>1;case"base64":return dt(xe).length;default:if(Ke)return Ce?-1:qe(xe).length;be=(""+be).toLowerCase(),Ke=!0}}P.byteLength=s;function n(xe,be,ve){let Ce=!1;if((be===void 0||be<0)&&(be=0),be>this.length||((ve===void 0||ve>this.length)&&(ve=this.length),ve<=0)||(ve>>>=0,be>>>=0,ve<=be))return"";for(xe||(xe="utf8");;)switch(xe){case"hex":return le(this,be,ve);case"utf8":case"utf-8":return O(this,be,ve);case"ascii":return q(this,be,ve);case"latin1":case"binary":return J(this,be,ve);case"base64":return p(this,be,ve);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,be,ve);default:if(Ce)throw new TypeError("Unknown encoding: "+xe);xe=(xe+"").toLowerCase(),Ce=!0}}P.prototype._isBuffer=!0;function o(xe,be,ve){const Ce=xe[be];xe[be]=xe[ve],xe[ve]=Ce}P.prototype.swap16=function(){const be=this.length;if(be%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ve=0;ve<be;ve+=2)o(this,ve,ve+1);return this},P.prototype.swap32=function(){const be=this.length;if(be%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ve=0;ve<be;ve+=4)o(this,ve,ve+3),o(this,ve+1,ve+2);return this},P.prototype.swap64=function(){const be=this.length;if(be%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ve=0;ve<be;ve+=8)o(this,ve,ve+7),o(this,ve+1,ve+6),o(this,ve+2,ve+5),o(this,ve+3,ve+4);return this},P.prototype.toString=function(){const be=this.length;return be===0?"":arguments.length===0?O(this,0,be):n.apply(this,arguments)},P.prototype.toLocaleString=P.prototype.toString,P.prototype.equals=function(be){if(!P.isBuffer(be))throw new TypeError("Argument must be a Buffer");return this===be?!0:P.compare(this,be)===0},P.prototype.inspect=function(){let be="";const ve=t.INSPECT_MAX_BYTES;return be=this.toString("hex",0,ve).replace(/(.{2})/g,"$1 ").trim(),this.length>ve&&(be+=" ... "),"<Buffer "+be+">"},E&&(P.prototype[E]=P.prototype.inspect),P.prototype.compare=function(be,ve,Ce,Ke,ze){if(nt(be,Uint8Array)&&(be=P.from(be,be.offset,be.byteLength)),!P.isBuffer(be))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof be);if(ve===void 0&&(ve=0),Ce===void 0&&(Ce=be?be.length:0),Ke===void 0&&(Ke=0),ze===void 0&&(ze=this.length),ve<0||Ce>be.length||Ke<0||ze>this.length)throw new RangeError("out of range index");if(Ke>=ze&&ve>=Ce)return 0;if(Ke>=ze)return-1;if(ve>=Ce)return 1;if(ve>>>=0,Ce>>>=0,Ke>>>=0,ze>>>=0,this===be)return 0;let Re=ze-Ke,Be=Ce-ve;const it=Math.min(Re,Be),Qe=this.slice(Ke,ze),Et=be.slice(ve,Ce);for(let pt=0;pt<it;++pt)if(Qe[pt]!==Et[pt]){Re=Qe[pt],Be=Et[pt];break}return Re<Be?-1:Be<Re?1:0};function h(xe,be,ve,Ce,Ke){if(xe.length===0)return-1;if(typeof ve=="string"?(Ce=ve,ve=0):ve>2147483647?ve=2147483647:ve<-2147483648&&(ve=-2147483648),ve=+ve,gt(ve)&&(ve=Ke?0:xe.length-1),ve<0&&(ve=xe.length+ve),ve>=xe.length){if(Ke)return-1;ve=xe.length-1}else if(ve<0)if(Ke)ve=0;else return-1;if(typeof be=="string"&&(be=P.from(be,Ce)),P.isBuffer(be))return be.length===0?-1:m(xe,be,ve,Ce,Ke);if(typeof be=="number")return be=be&255,typeof Uint8Array.prototype.indexOf=="function"?Ke?Uint8Array.prototype.indexOf.call(xe,be,ve):Uint8Array.prototype.lastIndexOf.call(xe,be,ve):m(xe,[be],ve,Ce,Ke);throw new TypeError("val must be string, number or Buffer")}function m(xe,be,ve,Ce,Ke){let ze=1,Re=xe.length,Be=be.length;if(Ce!==void 0&&(Ce=String(Ce).toLowerCase(),Ce==="ucs2"||Ce==="ucs-2"||Ce==="utf16le"||Ce==="utf-16le")){if(xe.length<2||be.length<2)return-1;ze=2,Re/=2,Be/=2,ve/=2}function it(Et,pt){return ze===1?Et[pt]:Et.readUInt16BE(pt*ze)}let Qe;if(Ke){let Et=-1;for(Qe=ve;Qe<Re;Qe++)if(it(xe,Qe)===it(be,Et===-1?0:Qe-Et)){if(Et===-1&&(Et=Qe),Qe-Et+1===Be)return Et*ze}else Et!==-1&&(Qe-=Qe-Et),Et=-1}else for(ve+Be>Re&&(ve=Re-Be),Qe=ve;Qe>=0;Qe--){let Et=!0;for(let pt=0;pt<Be;pt++)if(it(xe,Qe+pt)!==it(be,pt)){Et=!1;break}if(Et)return Qe}return-1}P.prototype.includes=function(be,ve,Ce){return this.indexOf(be,ve,Ce)!==-1},P.prototype.indexOf=function(be,ve,Ce){return h(this,be,ve,Ce,!0)},P.prototype.lastIndexOf=function(be,ve,Ce){return h(this,be,ve,Ce,!1)};function c(xe,be,ve,Ce){ve=Number(ve)||0;const Ke=xe.length-ve;Ce?(Ce=Number(Ce),Ce>Ke&&(Ce=Ke)):Ce=Ke;const ze=be.length;Ce>ze/2&&(Ce=ze/2);let Re;for(Re=0;Re<Ce;++Re){const Be=parseInt(be.substr(Re*2,2),16);if(gt(Be))return Re;xe[ve+Re]=Be}return Re}function l(xe,be,ve,Ce){return yt(qe(be,xe.length-ve),xe,ve,Ce)}function x(xe,be,ve,Ce){return yt(Ge(be),xe,ve,Ce)}function T(xe,be,ve,Ce){return yt(dt(be),xe,ve,Ce)}function b(xe,be,ve,Ce){return yt(ot(be,xe.length-ve),xe,ve,Ce)}P.prototype.write=function(be,ve,Ce,Ke){if(ve===void 0)Ke="utf8",Ce=this.length,ve=0;else if(Ce===void 0&&typeof ve=="string")Ke=ve,Ce=this.length,ve=0;else if(isFinite(ve))ve=ve>>>0,isFinite(Ce)?(Ce=Ce>>>0,Ke===void 0&&(Ke="utf8")):(Ke=Ce,Ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ze=this.length-ve;if((Ce===void 0||Ce>ze)&&(Ce=ze),be.length>0&&(Ce<0||ve<0)||ve>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ke||(Ke="utf8");let Re=!1;for(;;)switch(Ke){case"hex":return c(this,be,ve,Ce);case"utf8":case"utf-8":return l(this,be,ve,Ce);case"ascii":case"latin1":case"binary":return x(this,be,ve,Ce);case"base64":return T(this,be,ve,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,be,ve,Ce);default:if(Re)throw new TypeError("Unknown encoding: "+Ke);Ke=(""+Ke).toLowerCase(),Re=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function p(xe,be,ve){return be===0&&ve===xe.length?r.fromByteArray(xe):r.fromByteArray(xe.slice(be,ve))}function O(xe,be,ve){ve=Math.min(xe.length,ve);const Ce=[];let Ke=be;for(;Ke<ve;){const ze=xe[Ke];let Re=null,Be=ze>239?4:ze>223?3:ze>191?2:1;if(Ke+Be<=ve){let it,Qe,Et,pt;switch(Be){case 1:ze<128&&(Re=ze);break;case 2:it=xe[Ke+1],(it&192)===128&&(pt=(ze&31)<<6|it&63,pt>127&&(Re=pt));break;case 3:it=xe[Ke+1],Qe=xe[Ke+2],(it&192)===128&&(Qe&192)===128&&(pt=(ze&15)<<12|(it&63)<<6|Qe&63,pt>2047&&(pt<55296||pt>57343)&&(Re=pt));break;case 4:it=xe[Ke+1],Qe=xe[Ke+2],Et=xe[Ke+3],(it&192)===128&&(Qe&192)===128&&(Et&192)===128&&(pt=(ze&15)<<18|(it&63)<<12|(Qe&63)<<6|Et&63,pt>65535&&pt<1114112&&(Re=pt))}}Re===null?(Re=65533,Be=1):Re>65535&&(Re-=65536,Ce.push(Re>>>10&1023|55296),Re=56320|Re&1023),Ce.push(Re),Ke+=Be}return $(Ce)}const z=4096;function $(xe){const be=xe.length;if(be<=z)return String.fromCharCode.apply(String,xe);let ve="",Ce=0;for(;Ce<be;)ve+=String.fromCharCode.apply(String,xe.slice(Ce,Ce+=z));return ve}function q(xe,be,ve){let Ce="";ve=Math.min(xe.length,ve);for(let Ke=be;Ke<ve;++Ke)Ce+=String.fromCharCode(xe[Ke]&127);return Ce}function J(xe,be,ve){let Ce="";ve=Math.min(xe.length,ve);for(let Ke=be;Ke<ve;++Ke)Ce+=String.fromCharCode(xe[Ke]);return Ce}function le(xe,be,ve){const Ce=xe.length;(!be||be<0)&&(be=0),(!ve||ve<0||ve>Ce)&&(ve=Ce);let Ke="";for(let ze=be;ze<ve;++ze)Ke+=Ut[xe[ze]];return Ke}function _e(xe,be,ve){const Ce=xe.slice(be,ve);let Ke="";for(let ze=0;ze<Ce.length-1;ze+=2)Ke+=String.fromCharCode(Ce[ze]+Ce[ze+1]*256);return Ke}P.prototype.slice=function(be,ve){const Ce=this.length;be=~~be,ve=ve===void 0?Ce:~~ve,be<0?(be+=Ce,be<0&&(be=0)):be>Ce&&(be=Ce),ve<0?(ve+=Ce,ve<0&&(ve=0)):ve>Ce&&(ve=Ce),ve<be&&(ve=be);const Ke=this.subarray(be,ve);return Object.setPrototypeOf(Ke,P.prototype),Ke};function ge(xe,be,ve){if(xe%1!==0||xe<0)throw new RangeError("offset is not uint");if(xe+be>ve)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function(be,ve,Ce){be=be>>>0,ve=ve>>>0,Ce||ge(be,ve,this.length);let Ke=this[be],ze=1,Re=0;for(;++Re<ve&&(ze*=256);)Ke+=this[be+Re]*ze;return Ke},P.prototype.readUintBE=P.prototype.readUIntBE=function(be,ve,Ce){be=be>>>0,ve=ve>>>0,Ce||ge(be,ve,this.length);let Ke=this[be+--ve],ze=1;for(;ve>0&&(ze*=256);)Ke+=this[be+--ve]*ze;return Ke},P.prototype.readUint8=P.prototype.readUInt8=function(be,ve){return be=be>>>0,ve||ge(be,1,this.length),this[be]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function(be,ve){return be=be>>>0,ve||ge(be,2,this.length),this[be]|this[be+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function(be,ve){return be=be>>>0,ve||ge(be,2,this.length),this[be]<<8|this[be+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function(be,ve){return be=be>>>0,ve||ge(be,4,this.length),(this[be]|this[be+1]<<8|this[be+2]<<16)+this[be+3]*16777216},P.prototype.readUint32BE=P.prototype.readUInt32BE=function(be,ve){return be=be>>>0,ve||ge(be,4,this.length),this[be]*16777216+(this[be+1]<<16|this[be+2]<<8|this[be+3])},P.prototype.readBigUInt64LE=Xt(function(be){be=be>>>0,Oe(be,"offset");const ve=this[be],Ce=this[be+7];(ve===void 0||Ce===void 0)&&Pe(be,this.length-8);const Ke=ve+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24,ze=this[++be]+this[++be]*2**8+this[++be]*2**16+Ce*2**24;return BigInt(Ke)+(BigInt(ze)<<BigInt(32))}),P.prototype.readBigUInt64BE=Xt(function(be){be=be>>>0,Oe(be,"offset");const ve=this[be],Ce=this[be+7];(ve===void 0||Ce===void 0)&&Pe(be,this.length-8);const Ke=ve*2**24+this[++be]*2**16+this[++be]*2**8+this[++be],ze=this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+Ce;return(BigInt(Ke)<<BigInt(32))+BigInt(ze)}),P.prototype.readIntLE=function(be,ve,Ce){be=be>>>0,ve=ve>>>0,Ce||ge(be,ve,this.length);let Ke=this[be],ze=1,Re=0;for(;++Re<ve&&(ze*=256);)Ke+=this[be+Re]*ze;return ze*=128,Ke>=ze&&(Ke-=Math.pow(2,8*ve)),Ke},P.prototype.readIntBE=function(be,ve,Ce){be=be>>>0,ve=ve>>>0,Ce||ge(be,ve,this.length);let Ke=ve,ze=1,Re=this[be+--Ke];for(;Ke>0&&(ze*=256);)Re+=this[be+--Ke]*ze;return ze*=128,Re>=ze&&(Re-=Math.pow(2,8*ve)),Re},P.prototype.readInt8=function(be,ve){return be=be>>>0,ve||ge(be,1,this.length),this[be]&128?(255-this[be]+1)*-1:this[be]},P.prototype.readInt16LE=function(be,ve){be=be>>>0,ve||ge(be,2,this.length);const Ce=this[be]|this[be+1]<<8;return Ce&32768?Ce|4294901760:Ce},P.prototype.readInt16BE=function(be,ve){be=be>>>0,ve||ge(be,2,this.length);const Ce=this[be+1]|this[be]<<8;return Ce&32768?Ce|4294901760:Ce},P.prototype.readInt32LE=function(be,ve){return be=be>>>0,ve||ge(be,4,this.length),this[be]|this[be+1]<<8|this[be+2]<<16|this[be+3]<<24},P.prototype.readInt32BE=function(be,ve){return be=be>>>0,ve||ge(be,4,this.length),this[be]<<24|this[be+1]<<16|this[be+2]<<8|this[be+3]},P.prototype.readBigInt64LE=Xt(function(be){be=be>>>0,Oe(be,"offset");const ve=this[be],Ce=this[be+7];(ve===void 0||Ce===void 0)&&Pe(be,this.length-8);const Ke=this[be+4]+this[be+5]*2**8+this[be+6]*2**16+(Ce<<24);return(BigInt(Ke)<<BigInt(32))+BigInt(ve+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24)}),P.prototype.readBigInt64BE=Xt(function(be){be=be>>>0,Oe(be,"offset");const ve=this[be],Ce=this[be+7];(ve===void 0||Ce===void 0)&&Pe(be,this.length-8);const Ke=(ve<<24)+this[++be]*2**16+this[++be]*2**8+this[++be];return(BigInt(Ke)<<BigInt(32))+BigInt(this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+Ce)}),P.prototype.readFloatLE=function(be,ve){return be=be>>>0,ve||ge(be,4,this.length),i.read(this,be,!0,23,4)},P.prototype.readFloatBE=function(be,ve){return be=be>>>0,ve||ge(be,4,this.length),i.read(this,be,!1,23,4)},P.prototype.readDoubleLE=function(be,ve){return be=be>>>0,ve||ge(be,8,this.length),i.read(this,be,!0,52,8)},P.prototype.readDoubleBE=function(be,ve){return be=be>>>0,ve||ge(be,8,this.length),i.read(this,be,!1,52,8)};function ne(xe,be,ve,Ce,Ke,ze){if(!P.isBuffer(xe))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>Ke||be<ze)throw new RangeError('"value" argument is out of bounds');if(ve+Ce>xe.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function(be,ve,Ce,Ke){if(be=+be,ve=ve>>>0,Ce=Ce>>>0,!Ke){const Be=Math.pow(2,8*Ce)-1;ne(this,be,ve,Ce,Be,0)}let ze=1,Re=0;for(this[ve]=be&255;++Re<Ce&&(ze*=256);)this[ve+Re]=be/ze&255;return ve+Ce},P.prototype.writeUintBE=P.prototype.writeUIntBE=function(be,ve,Ce,Ke){if(be=+be,ve=ve>>>0,Ce=Ce>>>0,!Ke){const Be=Math.pow(2,8*Ce)-1;ne(this,be,ve,Ce,Be,0)}let ze=Ce-1,Re=1;for(this[ve+ze]=be&255;--ze>=0&&(Re*=256);)this[ve+ze]=be/Re&255;return ve+Ce},P.prototype.writeUint8=P.prototype.writeUInt8=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,1,255,0),this[ve]=be&255,ve+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,2,65535,0),this[ve]=be&255,this[ve+1]=be>>>8,ve+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,2,65535,0),this[ve]=be>>>8,this[ve+1]=be&255,ve+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,4,4294967295,0),this[ve+3]=be>>>24,this[ve+2]=be>>>16,this[ve+1]=be>>>8,this[ve]=be&255,ve+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,4,4294967295,0),this[ve]=be>>>24,this[ve+1]=be>>>16,this[ve+2]=be>>>8,this[ve+3]=be&255,ve+4};function S(xe,be,ve,Ce,Ke){Se(be,Ce,Ke,xe,ve,7);let ze=Number(be&BigInt(4294967295));xe[ve++]=ze,ze=ze>>8,xe[ve++]=ze,ze=ze>>8,xe[ve++]=ze,ze=ze>>8,xe[ve++]=ze;let Re=Number(be>>BigInt(32)&BigInt(4294967295));return xe[ve++]=Re,Re=Re>>8,xe[ve++]=Re,Re=Re>>8,xe[ve++]=Re,Re=Re>>8,xe[ve++]=Re,ve}function j(xe,be,ve,Ce,Ke){Se(be,Ce,Ke,xe,ve,7);let ze=Number(be&BigInt(4294967295));xe[ve+7]=ze,ze=ze>>8,xe[ve+6]=ze,ze=ze>>8,xe[ve+5]=ze,ze=ze>>8,xe[ve+4]=ze;let Re=Number(be>>BigInt(32)&BigInt(4294967295));return xe[ve+3]=Re,Re=Re>>8,xe[ve+2]=Re,Re=Re>>8,xe[ve+1]=Re,Re=Re>>8,xe[ve]=Re,ve+8}P.prototype.writeBigUInt64LE=Xt(function(be,ve=0){return S(this,be,ve,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=Xt(function(be,ve=0){return j(this,be,ve,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function(be,ve,Ce,Ke){if(be=+be,ve=ve>>>0,!Ke){const it=Math.pow(2,8*Ce-1);ne(this,be,ve,Ce,it-1,-it)}let ze=0,Re=1,Be=0;for(this[ve]=be&255;++ze<Ce&&(Re*=256);)be<0&&Be===0&&this[ve+ze-1]!==0&&(Be=1),this[ve+ze]=(be/Re>>0)-Be&255;return ve+Ce},P.prototype.writeIntBE=function(be,ve,Ce,Ke){if(be=+be,ve=ve>>>0,!Ke){const it=Math.pow(2,8*Ce-1);ne(this,be,ve,Ce,it-1,-it)}let ze=Ce-1,Re=1,Be=0;for(this[ve+ze]=be&255;--ze>=0&&(Re*=256);)be<0&&Be===0&&this[ve+ze+1]!==0&&(Be=1),this[ve+ze]=(be/Re>>0)-Be&255;return ve+Ce},P.prototype.writeInt8=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,1,127,-128),be<0&&(be=255+be+1),this[ve]=be&255,ve+1},P.prototype.writeInt16LE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,2,32767,-32768),this[ve]=be&255,this[ve+1]=be>>>8,ve+2},P.prototype.writeInt16BE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,2,32767,-32768),this[ve]=be>>>8,this[ve+1]=be&255,ve+2},P.prototype.writeInt32LE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,4,2147483647,-2147483648),this[ve]=be&255,this[ve+1]=be>>>8,this[ve+2]=be>>>16,this[ve+3]=be>>>24,ve+4},P.prototype.writeInt32BE=function(be,ve,Ce){return be=+be,ve=ve>>>0,Ce||ne(this,be,ve,4,2147483647,-2147483648),be<0&&(be=4294967295+be+1),this[ve]=be>>>24,this[ve+1]=be>>>16,this[ve+2]=be>>>8,this[ve+3]=be&255,ve+4},P.prototype.writeBigInt64LE=Xt(function(be,ve=0){return S(this,be,ve,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=Xt(function(be,ve=0){return j(this,be,ve,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function y(xe,be,ve,Ce,Ke,ze){if(ve+Ce>xe.length)throw new RangeError("Index out of range");if(ve<0)throw new RangeError("Index out of range")}function I(xe,be,ve,Ce,Ke){return be=+be,ve=ve>>>0,Ke||y(xe,be,ve,4),i.write(xe,be,ve,Ce,23,4),ve+4}P.prototype.writeFloatLE=function(be,ve,Ce){return I(this,be,ve,!0,Ce)},P.prototype.writeFloatBE=function(be,ve,Ce){return I(this,be,ve,!1,Ce)};function D(xe,be,ve,Ce,Ke){return be=+be,ve=ve>>>0,Ke||y(xe,be,ve,8),i.write(xe,be,ve,Ce,52,8),ve+8}P.prototype.writeDoubleLE=function(be,ve,Ce){return D(this,be,ve,!0,Ce)},P.prototype.writeDoubleBE=function(be,ve,Ce){return D(this,be,ve,!1,Ce)},P.prototype.copy=function(be,ve,Ce,Ke){if(!P.isBuffer(be))throw new TypeError("argument should be a Buffer");if(Ce||(Ce=0),!Ke&&Ke!==0&&(Ke=this.length),ve>=be.length&&(ve=be.length),ve||(ve=0),Ke>0&&Ke<Ce&&(Ke=Ce),Ke===Ce||be.length===0||this.length===0)return 0;if(ve<0)throw new RangeError("targetStart out of bounds");if(Ce<0||Ce>=this.length)throw new RangeError("Index out of range");if(Ke<0)throw new RangeError("sourceEnd out of bounds");Ke>this.length&&(Ke=this.length),be.length-ve<Ke-Ce&&(Ke=be.length-ve+Ce);const ze=Ke-Ce;return this===be&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ve,Ce,Ke):Uint8Array.prototype.set.call(be,this.subarray(Ce,Ke),ve),ze},P.prototype.fill=function(be,ve,Ce,Ke){if(typeof be=="string"){if(typeof ve=="string"?(Ke=ve,ve=0,Ce=this.length):typeof Ce=="string"&&(Ke=Ce,Ce=this.length),Ke!==void 0&&typeof Ke!="string")throw new TypeError("encoding must be a string");if(typeof Ke=="string"&&!P.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);if(be.length===1){const Re=be.charCodeAt(0);(Ke==="utf8"&&Re<128||Ke==="latin1")&&(be=Re)}}else typeof be=="number"?be=be&255:typeof be=="boolean"&&(be=Number(be));if(ve<0||this.length<ve||this.length<Ce)throw new RangeError("Out of range index");if(Ce<=ve)return this;ve=ve>>>0,Ce=Ce===void 0?this.length:Ce>>>0,be||(be=0);let ze;if(typeof be=="number")for(ze=ve;ze<Ce;++ze)this[ze]=be;else{const Re=P.isBuffer(be)?be:P.from(be,Ke),Be=Re.length;if(Be===0)throw new TypeError('The value "'+be+'" is invalid for argument "value"');for(ze=0;ze<Ce-ve;++ze)this[ze+ve]=Re[ze%Be]}return this};const ie={};function he(xe,be,ve){ie[xe]=class extends ve{constructor(){super(),Object.defineProperty(this,"message",{value:be.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${xe}]`,this.stack,delete this.name}get code(){return xe}set code(Ke){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ke,writable:!0})}toString(){return`${this.name} [${xe}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(xe){return xe?`${xe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(xe,be){return`The "${xe}" argument must be of type number. Received type ${typeof be}`},TypeError),he("ERR_OUT_OF_RANGE",function(xe,be,ve){let Ce=`The value of "${xe}" is out of range.`,Ke=ve;return Number.isInteger(ve)&&Math.abs(ve)>2**32?Ke=me(String(ve)):typeof ve=="bigint"&&(Ke=String(ve),(ve>BigInt(2)**BigInt(32)||ve<-(BigInt(2)**BigInt(32)))&&(Ke=me(Ke)),Ke+="n"),Ce+=` It must be ${be}. Received ${Ke}`,Ce},RangeError);function me(xe){let be="",ve=xe.length;const Ce=xe[0]==="-"?1:0;for(;ve>=Ce+4;ve-=3)be=`_${xe.slice(ve-3,ve)}${be}`;return`${xe.slice(0,ve)}${be}`}function ye(xe,be,ve){Oe(be,"offset"),(xe[be]===void 0||xe[be+ve]===void 0)&&Pe(be,xe.length-(ve+1))}function Se(xe,be,ve,Ce,Ke,ze){if(xe>ve||xe<be){const Re=typeof be=="bigint"?"n":"";let Be;throw be===0||be===BigInt(0)?Be=`>= 0${Re} and < 2${Re} ** ${(ze+1)*8}${Re}`:Be=`>= -(2${Re} ** ${(ze+1)*8-1}${Re}) and < 2 ** ${(ze+1)*8-1}${Re}`,new ie.ERR_OUT_OF_RANGE("value",Be,xe)}ye(Ce,Ke,ze)}function Oe(xe,be){if(typeof xe!="number")throw new ie.ERR_INVALID_ARG_TYPE(be,"number",xe)}function Pe(xe,be,ve){throw Math.floor(xe)!==xe?(Oe(xe,ve),new ie.ERR_OUT_OF_RANGE("offset","an integer",xe)):be<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${be}`,xe)}const Ne=/[^+/0-9A-Za-z-_]/g;function Le(xe){if(xe=xe.split("=")[0],xe=xe.trim().replace(Ne,""),xe.length<2)return"";for(;xe.length%4!==0;)xe=xe+"=";return xe}function qe(xe,be){be=be||1/0;let ve;const Ce=xe.length;let Ke=null;const ze=[];for(let Re=0;Re<Ce;++Re){if(ve=xe.charCodeAt(Re),ve>55295&&ve<57344){if(!Ke){if(ve>56319){(be-=3)>-1&&ze.push(239,191,189);continue}else if(Re+1===Ce){(be-=3)>-1&&ze.push(239,191,189);continue}Ke=ve;continue}if(ve<56320){(be-=3)>-1&&ze.push(239,191,189),Ke=ve;continue}ve=(Ke-55296<<10|ve-56320)+65536}else Ke&&(be-=3)>-1&&ze.push(239,191,189);if(Ke=null,ve<128){if((be-=1)<0)break;ze.push(ve)}else if(ve<2048){if((be-=2)<0)break;ze.push(ve>>6|192,ve&63|128)}else if(ve<65536){if((be-=3)<0)break;ze.push(ve>>12|224,ve>>6&63|128,ve&63|128)}else if(ve<1114112){if((be-=4)<0)break;ze.push(ve>>18|240,ve>>12&63|128,ve>>6&63|128,ve&63|128)}else throw new Error("Invalid code point")}return ze}function Ge(xe){const be=[];for(let ve=0;ve<xe.length;++ve)be.push(xe.charCodeAt(ve)&255);return be}function ot(xe,be){let ve,Ce,Ke;const ze=[];for(let Re=0;Re<xe.length&&!((be-=2)<0);++Re)ve=xe.charCodeAt(Re),Ce=ve>>8,Ke=ve%256,ze.push(Ke),ze.push(Ce);return ze}function dt(xe){return r.toByteArray(Le(xe))}function yt(xe,be,ve,Ce){let Ke;for(Ke=0;Ke<Ce&&!(Ke+ve>=be.length||Ke>=xe.length);++Ke)be[Ke+ve]=xe[Ke];return Ke}function nt(xe,be){return xe instanceof be||xe!=null&&xe.constructor!=null&&xe.constructor.name!=null&&xe.constructor.name===be.name}function gt(xe){return xe!==xe}const Ut=function(){const xe="0123456789abcdef",be=new Array(256);for(let ve=0;ve<16;++ve){const Ce=ve*16;for(let Ke=0;Ke<16;++Ke)be[Ce+Ke]=xe[ve]+xe[Ke]}return be}();function Xt(xe){return typeof BigInt>"u"?st:xe}function st(){throw new Error("BigInt not supported")}}(Oc)),Oc}var Tc,Qm;function Yr(){if(Qm)return Tc;Qm=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(G,Q)=>()=>(Q||G((Q={exports:{}}).exports,Q),Q.exports),e=(G,Q)=>{for(var Y in Q)i(G,Y,{get:Q[Y],enumerable:!0})},U=(G,Q,Y,Z)=>{if(Q&&typeof Q=="object"||typeof Q=="function")for(let X of R(Q))!te.call(G,X)&&X!==Y&&i(G,X,{get:()=>Q[X],enumerable:!(Z=E(Q,X))||Z.enumerable});return G},C=(G,Q,Y)=>(Y=G!=null?r(V(G)):{},U(Q||!G||!G.__esModule?i(Y,"default",{value:G,enumerable:!0}):Y,G)),w=G=>U(i({},"__esModule",{value:!0}),G),g=P((G,Q)=>{var Y={};Q.exports=Y;var Z={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(Z).forEach(function(X){var k=Z[X],A=Y[X]=[];A.open="\x1B["+k[0]+"m",A.close="\x1B["+k[1]+"m"})}),u=P((G,Q)=>{Q.exports=function(Y,Z){Z=Z||process.argv;var X=Z.indexOf("--"),k=/^-{1,2}/.test(Y)?"":"--",A=Z.indexOf(k+Y);return A!==-1&&(X===-1?!0:A<X)}}),_=P((G,Q)=>{var Y=Je,Z=u(),X=t,k=void 0;Z("no-color")||Z("no-colors")||Z("color=false")?k=!1:(Z("color")||Z("colors")||Z("color=true")||Z("color=always"))&&(k=!0),"FORCE_COLOR"in X&&(k=X.FORCE_COLOR.length===0||parseInt(X.FORCE_COLOR,10)!==0);function A(B){return B===0?!1:{level:B,hasBasic:!0,has256:B>=2,has16m:B>=3}}function M(B){if(k===!1)return 0;if(Z("color=16m")||Z("color=full")||Z("color=truecolor"))return 3;if(Z("color=256"))return 2;if(B&&!B.isTTY&&k!==!0)return 0;var L=k?1:0;if(process.platform==="win32"){var N=Y.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(N[0])>=10&&Number(N[2])>=10586?Number(N[2])>=14931?3:2:1}if("CI"in X)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(W){return W in X})||X.CI_NAME==="codeship"?1:L;if("TEAMCITY_VERSION"in X)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(X.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in X){var F=parseInt((X.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(X.TERM_PROGRAM){case"iTerm.app":return F>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(X.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(X.TERM)||"COLORTERM"in X?1:(X.TERM,L)}function H(B){var L=M(B);return A(L)}Q.exports={supportsColor:H,stdout:H(process.stdout),stderr:H(process.stderr)}}),f=P((G,Q)=>{Q.exports=function(Y,Z){var X="";Y=Y||"Run the trap, drop the bass",Y=Y.split("");var k={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return Y.forEach(function(A){A=A.toLowerCase();var M=k[A]||[" "],H=Math.floor(Math.random()*M.length);typeof k[A]<"u"?X+=k[A][H]:X+=A}),X}}),d=P((G,Q)=>{Q.exports=function(Y,Z){Y=Y||"   he is here   ";var X={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},k=[].concat(X.up,X.down,X.mid);function A(B){var L=Math.floor(Math.random()*B);return L}function M(B){var L=!1;return k.filter(function(N){L=N===B}),L}function H(B,L){var N="",F,W;L=L||{},L.up=typeof L.up<"u"?L.up:!0,L.mid=typeof L.mid<"u"?L.mid:!0,L.down=typeof L.down<"u"?L.down:!0,L.size=typeof L.size<"u"?L.size:"maxi",B=B.split("");for(W in B)if(!M(W)){switch(N=N+B[W],F={up:0,down:0,mid:0},L.size){case"mini":F.up=A(8),F.mid=A(2),F.down=A(8);break;case"maxi":F.up=A(16)+3,F.mid=A(4)+1,F.down=A(64)+3;break;default:F.up=A(8)+1,F.mid=A(6)/2,F.down=A(8)+1;break}var re=["up","mid","down"];for(var ee in re)for(var ce=re[ee],pe=0;pe<=F[ce];pe++)L[ce]&&(N=N+X[ce][A(X[ce].length)])}return N}return H(Y,Z)}}),v=P((G,Q)=>{Q.exports=function(Y){return function(Z,X,k){if(Z===" ")return Z;switch(X%3){case 0:return Y.red(Z);case 1:return Y.white(Z);case 2:return Y.blue(Z)}}}}),a=P((G,Q)=>{Q.exports=function(Y){return function(Z,X,k){return X%2===0?Z:Y.inverse(Z)}}}),s=P((G,Q)=>{Q.exports=function(Y){var Z=["red","yellow","green","blue","magenta"];return function(X,k,A){return X===" "?X:Y[Z[k++%Z.length]](X)}}}),n=P((G,Q)=>{Q.exports=function(Y){var Z=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(X,k,A){return X===" "?X:Y[Z[Math.round(Math.random()*(Z.length-2))]](X)}}}),o=P((G,Q)=>{var Y={};Q.exports=Y,Y.themes={};var Z=Je,X=Y.styles=g(),k=Object.defineProperties,A=new RegExp(/[\r\n]+/g);Y.supportsColor=_().supportsColor,typeof Y.enabled>"u"&&(Y.enabled=Y.supportsColor()!==!1),Y.enable=function(){Y.enabled=!0},Y.disable=function(){Y.enabled=!1},Y.stripColors=Y.strip=function(ce){return(""+ce).replace(/\x1B\[\d+m/g,"")},Y.stylize=function(ce,pe){if(!Y.enabled)return ce+"";var K=X[pe];return!K&&pe in Y?Y[pe](ce):K.open+ce+K.close};var M=/[|\\{}()[\]^$+*?.]/g,H=function(ce){if(typeof ce!="string")throw new TypeError("Expected a string");return ce.replace(M,"\\$&")};function B(ce){var pe=function K(){return F.apply(K,arguments)};return pe._styles=ce,pe.__proto__=N,pe}var L=function(){var ce={};return X.grey=X.gray,Object.keys(X).forEach(function(pe){X[pe].closeRe=new RegExp(H(X[pe].close),"g"),ce[pe]={get:function(){return B(this._styles.concat(pe))}}}),ce}(),N=k(function(){},L);function F(){var ce=Array.prototype.slice.call(arguments),pe=ce.map(function(oe){return oe!=null&&oe.constructor===String?oe:Z.inspect(oe)}).join(" ");if(!Y.enabled||!pe)return pe;for(var K=pe.indexOf(`
`)!=-1,se=this._styles,ue=se.length;ue--;){var ae=X[se[ue]];pe=ae.open+pe.replace(ae.closeRe,ae.open)+ae.close,K&&(pe=pe.replace(A,function(oe){return ae.close+oe+ae.open}))}return pe}Y.setTheme=function(ce){if(typeof ce=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var pe in ce)(function(K){Y[K]=function(se){if(typeof ce[K]=="object"){var ue=se;for(var ae in ce[K])ue=Y[ce[K][ae]](ue);return ue}return Y[ce[K]](se)}})(pe)};function W(){var ce={};return Object.keys(L).forEach(function(pe){ce[pe]={get:function(){return B([pe])}}}),ce}var re=function(ce,pe){var K=pe.split("");return K=K.map(ce),K.join("")};Y.trap=f(),Y.zalgo=d(),Y.maps={},Y.maps.america=v()(Y),Y.maps.zebra=a()(Y),Y.maps.rainbow=s()(Y),Y.maps.random=n()(Y);for(ee in Y.maps)(function(ce){Y[ce]=function(pe){return re(Y.maps[ce],pe)}})(ee);var ee;k(Y,W())}),h=P((G,Q)=>{var Y=o();Q.exports=Y}),m=P((G,Q)=>{var Y=1e3,Z=Y*60,X=Z*60,k=X*24,A=k*7,M=k*365.25;Q.exports=function(F,W){W=W||{};var re=typeof F;if(re==="string"&&F.length>0)return H(F);if(re==="number"&&isFinite(F))return W.long?L(F):B(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))};function H(F){if(F=String(F),!(F.length>100)){var W=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(W){var re=parseFloat(W[1]),ee=(W[2]||"ms").toLowerCase();switch(ee){case"years":case"year":case"yrs":case"yr":case"y":return re*M;case"weeks":case"week":case"w":return re*A;case"days":case"day":case"d":return re*k;case"hours":case"hour":case"hrs":case"hr":case"h":return re*X;case"minutes":case"minute":case"mins":case"min":case"m":return re*Z;case"seconds":case"second":case"secs":case"sec":case"s":return re*Y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return re;default:return}}}}function B(F){var W=Math.abs(F);return W>=k?Math.round(F/k)+"d":W>=X?Math.round(F/X)+"h":W>=Z?Math.round(F/Z)+"m":W>=Y?Math.round(F/Y)+"s":F+"ms"}function L(F){var W=Math.abs(F);return W>=k?N(F,W,k,"day"):W>=X?N(F,W,X,"hour"):W>=Z?N(F,W,Z,"minute"):W>=Y?N(F,W,Y,"second"):F+" ms"}function N(F,W,re,ee){var ce=W>=re*1.5;return Math.round(F/re)+" "+ee+(ce?"s":"")}}),c=P((G,Q)=>{function Y(Z){k.debug=k,k.default=k,k.coerce=N,k.disable=H,k.enable=M,k.enabled=B,k.humanize=m(),k.destroy=F,Object.keys(Z).forEach(W=>{k[W]=Z[W]}),k.names=[],k.skips=[],k.formatters={};function X(W){let re=0;for(let ee=0;ee<W.length;ee++)re=(re<<5)-re+W.charCodeAt(ee),re|=0;return k.colors[Math.abs(re)%k.colors.length]}k.selectColor=X;function k(W){let re,ee=null,ce,pe;function K(...se){if(!K.enabled)return;let ue=K,ae=Number(new Date),oe=ae-(re||ae);ue.diff=oe,ue.prev=re,ue.curr=ae,re=ae,se[0]=k.coerce(se[0]),typeof se[0]!="string"&&se.unshift("%O");let fe=0;se[0]=se[0].replace(/%([a-zA-Z%])/g,(we,Ee)=>{if(we==="%%")return"%";fe++;let Ie=k.formatters[Ee];if(typeof Ie=="function"){let Ae=se[fe];we=Ie.call(ue,Ae),se.splice(fe,1),fe--}return we}),k.formatArgs.call(ue,se),(ue.log||k.log).apply(ue,se)}return K.namespace=W,K.useColors=k.useColors(),K.color=k.selectColor(W),K.extend=A,K.destroy=k.destroy,Object.defineProperty(K,"enabled",{enumerable:!0,configurable:!1,get:()=>ee!==null?ee:(ce!==k.namespaces&&(ce=k.namespaces,pe=k.enabled(W)),pe),set:se=>{ee=se}}),typeof k.init=="function"&&k.init(K),K}function A(W,re){let ee=k(this.namespace+(typeof re>"u"?":":re)+W);return ee.log=this.log,ee}function M(W){k.save(W),k.namespaces=W,k.names=[],k.skips=[];let re,ee=(typeof W=="string"?W:"").split(/[\s,]+/),ce=ee.length;for(re=0;re<ce;re++)ee[re]&&(W=ee[re].replace(/\*/g,".*?"),W[0]==="-"?k.skips.push(new RegExp("^"+W.slice(1)+"$")):k.names.push(new RegExp("^"+W+"$")))}function H(){let W=[...k.names.map(L),...k.skips.map(L).map(re=>"-"+re)].join(",");return k.enable(""),W}function B(W){if(W[W.length-1]==="*")return!0;let re,ee;for(re=0,ee=k.skips.length;re<ee;re++)if(k.skips[re].test(W))return!1;for(re=0,ee=k.names.length;re<ee;re++)if(k.names[re].test(W))return!0;return!1}function L(W){return W.toString().substring(2,W.toString().length-2).replace(/\.\*\?$/,"*")}function N(W){return W instanceof Error?W.stack||W.message:W}function F(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return k.enable(k.load()),k}Q.exports=Y}),l=P((G,Q)=>{G.formatArgs=Z,G.save=X,G.load=k,G.useColors=Y,G.storage=A(),G.destroy=(()=>{let H=!1;return()=>{H||(H=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),G.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Y(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Z(H){if(H[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+H[0]+(this.useColors?"%c ":" ")+"+"+Q.exports.humanize(this.diff),!this.useColors)return;let B="color: "+this.color;H.splice(1,0,B,"color: inherit");let L=0,N=0;H[0].replace(/%[a-zA-Z%]/g,F=>{F!=="%%"&&(L++,F==="%c"&&(N=L))}),H.splice(N,0,B)}G.log=console.debug||console.log||(()=>{});function X(H){try{H?G.storage.setItem("debug",H):G.storage.removeItem("debug")}catch{}}function k(){let H;try{H=G.storage.getItem("debug")}catch{}return!H&&typeof process<"u"&&"env"in process&&(H=t.DEBUG),H}function A(){try{return localStorage}catch{}}Q.exports=c()(G);var{formatters:M}=Q.exports;M.j=function(H){try{return JSON.stringify(H)}catch(B){return"[UnexpectedJSONParseError]: "+B.message}}}),x=P((G,Q)=>{Q.exports=(Y,Z=process.argv)=>{let X=Y.startsWith("-")?"":Y.length===1?"-":"--",k=Z.indexOf(X+Y),A=Z.indexOf("--");return k!==-1&&(A===-1||k<A)}}),T=P((G,Q)=>{var Y=Je,Z=Je,X=x(),{env:k}=process,A;X("no-color")||X("no-colors")||X("color=false")||X("color=never")?A=0:(X("color")||X("colors")||X("color=true")||X("color=always"))&&(A=1);function M(){if("FORCE_COLOR"in k)return k.FORCE_COLOR==="true"?1:k.FORCE_COLOR==="false"?0:k.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(k.FORCE_COLOR,10),3)}function H(N){return N===0?!1:{level:N,hasBasic:!0,has256:N>=2,has16m:N>=3}}function B(N,{streamIsTTY:F,sniffFlags:W=!0}={}){let re=M();re!==void 0&&(A=re);let ee=W?A:re;if(ee===0)return 0;if(W){if(X("color=16m")||X("color=full")||X("color=truecolor"))return 3;if(X("color=256"))return 2}if(N&&!F&&ee===void 0)return 0;let ce=ee||0;if(k.TERM==="dumb")return ce;if(process.platform==="win32"){let pe=Y.release().split(".");return Number(pe[0])>=10&&Number(pe[2])>=10586?Number(pe[2])>=14931?3:2:1}if("CI"in k)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(pe=>pe in k)||k.CI_NAME==="codeship"?1:ce;if("TEAMCITY_VERSION"in k)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(k.TEAMCITY_VERSION)?1:0;if(k.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in k){let pe=Number.parseInt((k.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(k.TERM_PROGRAM){case"iTerm.app":return pe>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(k.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(k.TERM)||"COLORTERM"in k?1:ce}function L(N,F={}){let W=B(N,{streamIsTTY:N&&N.isTTY,...F});return H(W)}Q.exports={supportsColor:L,stdout:L({isTTY:Z.isatty(1)}),stderr:L({isTTY:Z.isatty(2)})}}),b=P((G,Q)=>{var Y=Je,Z=Je;G.init=L,G.log=M,G.formatArgs=k,G.save=H,G.load=B,G.useColors=X,G.destroy=Z.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),G.colors=[6,2,3,4,5,1];try{let F=T();F&&(F.stderr||F).level>=2&&(G.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}G.inspectOpts=Object.keys(t).filter(F=>/^debug_/i.test(F)).reduce((F,W)=>{let re=W.substring(6).toLowerCase().replace(/_([a-z])/g,(ce,pe)=>pe.toUpperCase()),ee=t[W];return/^(yes|on|true|enabled)$/i.test(ee)?ee=!0:/^(no|off|false|disabled)$/i.test(ee)?ee=!1:ee==="null"?ee=null:ee=Number(ee),F[re]=ee,F},{});function X(){return"colors"in G.inspectOpts?!!G.inspectOpts.colors:Y.isatty(process.stderr.fd)}function k(F){let{namespace:W,useColors:re}=this;if(re){let ee=this.color,ce="\x1B[3"+(ee<8?ee:"8;5;"+ee),pe=`  ${ce};1m${W} \x1B[0m`;F[0]=pe+F[0].split(`
`).join(`
`+pe),F.push(ce+"m+"+Q.exports.humanize(this.diff)+"\x1B[0m")}else F[0]=A()+W+" "+F[0]}function A(){return G.inspectOpts.hideDate?"":new Date().toISOString()+" "}function M(...F){return process.stderr.write(Z.format(...F)+`
`)}function H(F){F?t.DEBUG=F:delete t.DEBUG}function B(){return t.DEBUG}function L(F){F.inspectOpts={};let W=Object.keys(G.inspectOpts);for(let re=0;re<W.length;re++)F.inspectOpts[W[re]]=G.inspectOpts[W[re]]}Q.exports=c()(G);var{formatters:N}=Q.exports;N.o=function(F){return this.inspectOpts.colors=this.useColors,Z.inspect(F,this.inspectOpts).split(`
`).map(W=>W.trim()).join(" ")},N.O=function(F){return this.inspectOpts.colors=this.useColors,Z.inspect(F,this.inspectOpts)}}),p=P((G,Q)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Q.exports=l():Q.exports=b()}),O=P((G,Q)=>{Q.exports={name:"dotenv",version:"16.4.5",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),z=P((G,Q)=>{var Y=Je,Z=Je,X=Je,k=Je,A=O(),M=A.version,H=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function B(we){let Ee={},Ie=we.toString();Ie=Ie.replace(/\r\n?/mg,`
`);let Ae;for(;(Ae=H.exec(Ie))!=null;){let He=Ae[1],Fe=Ae[2]||"";Fe=Fe.trim();let Ue=Fe[0];Fe=Fe.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),Ue==='"'&&(Fe=Fe.replace(/\\n/g,`
`),Fe=Fe.replace(/\\r/g,"\r")),Ee[He]=Fe}return Ee}function L(we){let Ee=ce(we),Ie=fe.configDotenv({path:Ee});if(!Ie.parsed){let Ue=new Error(`MISSING_DATA: Cannot parse ${Ee} for an unknown reason`);throw Ue.code="MISSING_DATA",Ue}let Ae=re(we).split(","),He=Ae.length,Fe;for(let Ue=0;Ue<He;Ue++)try{let et=Ae[Ue].trim(),ft=ee(Ie,et);Fe=fe.decrypt(ft.ciphertext,ft.key);break}catch(et){if(Ue+1>=He)throw et}return fe.parse(Fe)}function N(we){console.log(`[dotenv@${M}][INFO] ${we}`)}function F(we){console.log(`[dotenv@${M}][WARN] ${we}`)}function W(we){console.log(`[dotenv@${M}][DEBUG] ${we}`)}function re(we){return we&&we.DOTENV_KEY&&we.DOTENV_KEY.length>0?we.DOTENV_KEY:t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:""}function ee(we,Ee){let Ie;try{Ie=new URL(Ee)}catch(et){if(et.code==="ERR_INVALID_URL"){let ft=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw ft.code="INVALID_DOTENV_KEY",ft}throw et}let Ae=Ie.password;if(!Ae){let et=new Error("INVALID_DOTENV_KEY: Missing key part");throw et.code="INVALID_DOTENV_KEY",et}let He=Ie.searchParams.get("environment");if(!He){let et=new Error("INVALID_DOTENV_KEY: Missing environment part");throw et.code="INVALID_DOTENV_KEY",et}let Fe=`DOTENV_VAULT_${He.toUpperCase()}`,Ue=we.parsed[Fe];if(!Ue){let et=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${Fe} in your .env.vault file.`);throw et.code="NOT_FOUND_DOTENV_ENVIRONMENT",et}return{ciphertext:Ue,key:Ae}}function ce(we){let Ee=null;if(we&&we.path&&we.path.length>0)if(Array.isArray(we.path))for(let Ie of we.path)Y.existsSync(Ie)&&(Ee=Ie.endsWith(".vault")?Ie:`${Ie}.vault`);else Ee=we.path.endsWith(".vault")?we.path:`${we.path}.vault`;else Ee=Z.resolve(process.cwd(),".env.vault");return Y.existsSync(Ee)?Ee:null}function pe(we){return we[0]==="~"?Z.join(X.homedir(),we.slice(1)):we}function K(we){N("Loading env from encrypted .env.vault");let Ee=fe._parseVault(we),Ie=t;return we&&we.processEnv!=null&&(Ie=we.processEnv),fe.populate(Ie,Ee,we),{parsed:Ee}}function se(we){let Ee=Z.resolve(process.cwd(),".env"),Ie="utf8",Ae=!!(we&&we.debug);we&&we.encoding?Ie=we.encoding:Ae&&W("No encoding is specified. UTF-8 is used by default");let He=[Ee];if(we&&we.path)if(!Array.isArray(we.path))He=[pe(we.path)];else{He=[];for(let ft of we.path)He.push(pe(ft))}let Fe,Ue={};for(let ft of He)try{let ht=fe.parse(Y.readFileSync(ft,{encoding:Ie}));fe.populate(Ue,ht,we)}catch(ht){Ae&&W(`Failed to load ${ft} ${ht.message}`),Fe=ht}let et=t;return we&&we.processEnv!=null&&(et=we.processEnv),fe.populate(et,Ue,we),Fe?{parsed:Ue,error:Fe}:{parsed:Ue}}function ue(we){if(re(we).length===0)return fe.configDotenv(we);let Ee=ce(we);return Ee?fe._configVault(we):(F(`You set DOTENV_KEY but you are missing a .env.vault file at ${Ee}. Did you forget to build it?`),fe.configDotenv(we))}function ae(we,Ee){let Ie=Buffer.from(Ee.slice(-64),"hex"),Ae=Buffer.from(we,"base64"),He=Ae.subarray(0,12),Fe=Ae.subarray(-16);Ae=Ae.subarray(12,-16);try{let Ue=k.createDecipheriv("aes-256-gcm",Ie,He);return Ue.setAuthTag(Fe),`${Ue.update(Ae)}${Ue.final()}`}catch(Ue){let et=Ue instanceof RangeError,ft=Ue.message==="Invalid key length",ht=Ue.message==="Unsupported state or unable to authenticate data";if(et||ft){let Tt=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Tt.code="INVALID_DOTENV_KEY",Tt}else if(ht){let Tt=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Tt.code="DECRYPTION_FAILED",Tt}else throw Ue}}function oe(we,Ee,Ie={}){let Ae=!!(Ie&&Ie.debug),He=!!(Ie&&Ie.override);if(typeof Ee!="object"){let Fe=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw Fe.code="OBJECT_REQUIRED",Fe}for(let Fe of Object.keys(Ee))Object.prototype.hasOwnProperty.call(we,Fe)?(He===!0&&(we[Fe]=Ee[Fe]),Ae&&W(He===!0?`"${Fe}" is already defined and WAS overwritten`:`"${Fe}" is already defined and was NOT overwritten`)):we[Fe]=Ee[Fe]}var fe={configDotenv:se,_configVault:K,_parseVault:L,config:ue,decrypt:ae,parse:B,populate:oe};Q.exports.configDotenv=fe.configDotenv,Q.exports._configVault=fe._configVault,Q.exports._parseVault=fe._parseVault,Q.exports.config=fe.config,Q.exports.decrypt=fe.decrypt,Q.exports.parse=fe.parse,Q.exports.populate=fe.populate,Q.exports=fe}),$=P(G=>{var Q=Je.parse,Y={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},Z=String.prototype.endsWith||function(M){return M.length<=this.length&&this.indexOf(M,this.length-M.length)!==-1};function X(M){var H=typeof M=="string"?Q(M):M||{},B=H.protocol,L=H.host,N=H.port;if(typeof L!="string"||!L||typeof B!="string"||(B=B.split(":",1)[0],L=L.replace(/:\d*$/,""),N=parseInt(N)||Y[B]||0,!k(L,N)))return"";var F=A("npm_config_"+B+"_proxy")||A(B+"_proxy")||A("npm_config_proxy")||A("all_proxy");return F&&F.indexOf("://")===-1&&(F=B+"://"+F),F}function k(M,H){var B=(A("npm_config_no_proxy")||A("no_proxy")).toLowerCase();return B?B==="*"?!1:B.split(/[,\s]/).every(function(L){if(!L)return!0;var N=L.match(/^(.+):(\d+)$/),F=N?N[1]:L,W=N?parseInt(N[2]):0;return W&&W!==H?!0:/^[.*]/.test(F)?(F.charAt(0)==="*"&&(F=F.slice(1)),!Z.call(M,F)):M!==F}):!0}function A(M){return t[M.toLowerCase()]||t[M.toUpperCase()]||""}G.getProxyForUrl=X}),q=P(G=>{Object.defineProperty(G,"__esModule",{value:!0});function Q(Y){return function(Z,X){return new Promise((k,A)=>{Y.call(this,Z,X,(M,H)=>{M?A(M):k(H)})})}}G.default=Q}),J=P((G,Q)=>{var Y=G&&G.__importDefault||function(L){return L&&L.__esModule?L:{default:L}},Z=Vr(),X=Y(p()),k=Y(q()),A=X.default("agent-base");function M(L){return!!L&&typeof L.addRequest=="function"}function H(){let{stack:L}=new Error;return typeof L!="string"?!1:L.split(`
`).some(N=>N.indexOf("(https.js:")!==-1||N.indexOf("node:https:")!==-1)}function B(L,N){return new B.Agent(L,N)}(function(L){class N extends Z.EventEmitter{constructor(W,re){super();let ee=re;typeof W=="function"?this.callback=W:W&&(ee=W),this.timeout=null,ee&&typeof ee.timeout=="number"&&(this.timeout=ee.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:H()?443:80}set defaultPort(W){this.explicitDefaultPort=W}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:H()?"https:":"http:"}set protocol(W){this.explicitProtocol=W}callback(W,re,ee){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(W,re){let ee=Object.assign({},re);typeof ee.secureEndpoint!="boolean"&&(ee.secureEndpoint=H()),ee.host==null&&(ee.host="localhost"),ee.port==null&&(ee.port=ee.secureEndpoint?443:80),ee.protocol==null&&(ee.protocol=ee.secureEndpoint?"https:":"http:"),ee.host&&ee.path&&delete ee.path,delete ee.agent,delete ee.hostname,delete ee._defaultAgent,delete ee.defaultPort,delete ee.createConnection,W._last=!0,W.shouldKeepAlive=!1;let ce=!1,pe=null,K=ee.timeout||this.timeout,se=fe=>{W._hadError||(W.emit("error",fe),W._hadError=!0)},ue=()=>{pe=null,ce=!0;let fe=new Error(`A "socket" was not created for HTTP request before ${K}ms`);fe.code="ETIMEOUT",se(fe)},ae=fe=>{ce||(pe!==null&&(clearTimeout(pe),pe=null),se(fe))},oe=fe=>{if(ce)return;if(pe!=null&&(clearTimeout(pe),pe=null),M(fe)){A("Callback returned another Agent instance %o",fe.constructor.name),fe.addRequest(W,ee);return}if(fe){fe.once("free",()=>{this.freeSocket(fe,ee)}),W.onSocket(fe);return}let we=new Error(`no Duplex stream was returned to agent-base for \`${W.method} ${W.path}\``);se(we)};if(typeof this.callback!="function"){se(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(A("Converting legacy callback function to promise"),this.promisifiedCallback=k.default(this.callback)):this.promisifiedCallback=this.callback),typeof K=="number"&&K>0&&(pe=setTimeout(ue,K)),"port"in ee&&typeof ee.port!="number"&&(ee.port=Number(ee.port));try{A("Resolving socket for %o request: %o",ee.protocol,`${W.method} ${W.path}`),Promise.resolve(this.promisifiedCallback(W,ee)).then(oe,ae)}catch(fe){Promise.reject(fe).catch(ae)}}freeSocket(W,re){A("Freeing socket %o %o",W.constructor.name,re),W.destroy()}destroy(){A("Destroying agent %o",this.constructor.name)}}L.Agent=N,L.prototype=L.Agent.prototype})(B||(B={})),Q.exports=B}),le=P(G=>{var Q=G&&G.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(G,"__esModule",{value:!0});var Y=Q(p()),Z=Y.default("https-proxy-agent:parse-proxy-response");function X(k){return new Promise((A,M)=>{let H=0,B=[];function L(){let ce=k.read();ce?ee(ce):k.once("readable",L)}function N(){k.removeListener("end",W),k.removeListener("error",re),k.removeListener("close",F),k.removeListener("readable",L)}function F(ce){Z("onclose had error %o",ce)}function W(){Z("onend")}function re(ce){N(),Z("onerror %o",ce),M(ce)}function ee(ce){B.push(ce),H+=ce.length;let pe=Buffer.concat(B,H);if(pe.indexOf(`\r
\r
`)===-1){Z("have not received end of HTTP headers yet..."),L();return}let K=pe.toString("ascii",0,pe.indexOf(`\r
`)),se=+K.split(" ")[1];Z("got proxy server response: %o",K),A({statusCode:se,buffered:pe})}k.on("error",re),k.on("close",F),k.on("end",W),L()})}G.default=X}),_e=P(G=>{var Q=G&&G.__awaiter||function(ce,pe,K,se){function ue(ae){return ae instanceof K?ae:new K(function(oe){oe(ae)})}return new(K||(K=Promise))(function(ae,oe){function fe(Ie){try{Ee(se.next(Ie))}catch(Ae){oe(Ae)}}function we(Ie){try{Ee(se.throw(Ie))}catch(Ae){oe(Ae)}}function Ee(Ie){Ie.done?ae(Ie.value):ue(Ie.value).then(fe,we)}Ee((se=se.apply(ce,pe||[])).next())})},Y=G&&G.__importDefault||function(ce){return ce&&ce.__esModule?ce:{default:ce}};Object.defineProperty(G,"__esModule",{value:!0});var Z=Y(Je),X=Y(Je),k=Y(Je),A=Y(Je),M=Y(p()),H=J(),B=Y(le()),L=M.default("https-proxy-agent:agent"),N=class extends H.Agent{constructor(ce){let pe;if(typeof ce=="string"?pe=k.default.parse(ce):pe=ce,!pe)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");L("creating new HttpsProxyAgent instance: %o",pe),super(pe);let K=Object.assign({},pe);this.secureProxy=pe.secureProxy||re(K.protocol),K.host=K.hostname||K.host,typeof K.port=="string"&&(K.port=parseInt(K.port,10)),!K.port&&K.host&&(K.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in K)&&(K.ALPNProtocols=["http 1.1"]),K.host&&K.path&&(delete K.path,delete K.pathname),this.proxy=K}callback(ce,pe){return Q(this,void 0,void 0,function*(){let{proxy:K,secureProxy:se}=this,ue;se?(L("Creating `tls.Socket`: %o",K),ue=X.default.connect(K)):(L("Creating `net.Socket`: %o",K),ue=Z.default.connect(K));let ae=Object.assign({},K.headers),oe=`CONNECT ${`${pe.host}:${pe.port}`} HTTP/1.1\r
`;K.auth&&(ae["Proxy-Authorization"]=`Basic ${Buffer.from(K.auth).toString("base64")}`);let{host:fe,port:we,secureEndpoint:Ee}=pe;W(we,Ee)||(fe+=`:${we}`),ae.Host=fe,ae.Connection="close";for(let Ue of Object.keys(ae))oe+=`${Ue}: ${ae[Ue]}\r
`;let Ie=B.default(ue);ue.write(`${oe}\r
`);let{statusCode:Ae,buffered:He}=yield Ie;if(Ae===200){if(ce.once("socket",F),pe.secureEndpoint){L("Upgrading socket connection to TLS");let Ue=pe.servername||pe.host;return X.default.connect(Object.assign(Object.assign({},ee(pe,"host","hostname","path","port")),{socket:ue,servername:Ue}))}return ue}ue.destroy();let Fe=new Z.default.Socket({writable:!1});return Fe.readable=!0,ce.once("socket",Ue=>{L("replaying proxy buffer for failed request"),A.default(Ue.listenerCount("data")>0),Ue.push(He),Ue.push(null)}),Fe})}};G.default=N;function F(ce){ce.resume()}function W(ce,pe){return!!(!pe&&ce===80||pe&&ce===443)}function re(ce){return typeof ce=="string"?/^https:?$/i.test(ce):!1}function ee(ce,...pe){let K={},se;for(se in ce)pe.includes(se)||(K[se]=ce[se]);return K}}),ge=P((G,Q)=>{var Y=G&&G.__importDefault||function(k){return k&&k.__esModule?k:{default:k}},Z=Y(_e());function X(k){return new Z.default(k)}(function(k){k.HttpsProxyAgent=Z.default,k.prototype=Z.default.prototype})(X||(X={})),Q.exports=X}),ne=P((G,Q)=>{function Y(X){var k=Math.floor,A=new Array(64),M=new Array(64),H=new Array(64),B=new Array(64),L,N,F,W,re=new Array(65535),ee=new Array(65535),ce=new Array(64),pe=new Array(64),K=[],se=0,ue=7,ae=new Array(64),oe=new Array(64),fe=new Array(64),we=new Array(256),Ee=new Array(2048),Ie,Ae=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],He=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Fe=[0,1,2,3,4,5,6,7,8,9,10,11],Ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],et=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ft=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ht=[0,1,2,3,4,5,6,7,8,9,10,11],Tt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],vt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ot(Ye){for(var $t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],rr=0;rr<64;rr++){var tr=k(($t[rr]*Ye+50)/100);tr<1?tr=1:tr>255&&(tr=255),A[Ae[rr]]=tr}for(var ar=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],br=0;br<64;br++){var Vt=k((ar[br]*Ye+50)/100);Vt<1?Vt=1:Vt>255&&(Vt=255),M[Ae[br]]=Vt}for(var Jt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],er=0,_r=0;_r<8;_r++)for(var Nt=0;Nt<8;Nt++)H[er]=1/(A[Ae[er]]*Jt[_r]*Jt[Nt]*8),B[er]=1/(M[Ae[er]]*Jt[_r]*Jt[Nt]*8),er++}function Mt(Ye,$t){for(var rr=0,tr=0,ar=new Array,br=1;br<=16;br++){for(var Vt=1;Vt<=Ye[br];Vt++)ar[$t[tr]]=[],ar[$t[tr]][0]=rr,ar[$t[tr]][1]=br,tr++,rr++;rr*=2}return ar}function Ct(){L=Mt(He,Fe),N=Mt(ft,ht),F=Mt(Ue,et),W=Mt(Tt,vt)}function Ft(){for(var Ye=1,$t=2,rr=1;rr<=15;rr++){for(var tr=Ye;tr<$t;tr++)ee[32767+tr]=rr,re[32767+tr]=[],re[32767+tr][1]=rr,re[32767+tr][0]=tr;for(var ar=-($t-1);ar<=-Ye;ar++)ee[32767+ar]=rr,re[32767+ar]=[],re[32767+ar][1]=rr,re[32767+ar][0]=$t-1+ar;Ye<<=1,$t<<=1}}function vr(){for(var Ye=0;Ye<256;Ye++)Ee[Ye]=19595*Ye,Ee[Ye+256>>0]=38470*Ye,Ee[Ye+512>>0]=7471*Ye+32768,Ee[Ye+768>>0]=-11059*Ye,Ee[Ye+1024>>0]=-21709*Ye,Ee[Ye+1280>>0]=32768*Ye+8421375,Ee[Ye+1536>>0]=-27439*Ye,Ee[Ye+1792>>0]=-5329*Ye}function gr(Ye){for(var $t=Ye[0],rr=Ye[1]-1;rr>=0;)$t&1<<rr&&(se|=1<<ue),rr--,ue--,ue<0&&(se==255?(mt(255),mt(0)):mt(se),ue=7,se=0)}function mt(Ye){K.push(Ye)}function bt(Ye){mt(Ye>>8&255),mt(Ye&255)}function Wt(Ye,$t){var rr,tr,ar,br,Vt,Jt,er,_r,Nt=0,jt,or=8,yr=64;for(jt=0;jt<or;++jt){rr=Ye[Nt],tr=Ye[Nt+1],ar=Ye[Nt+2],br=Ye[Nt+3],Vt=Ye[Nt+4],Jt=Ye[Nt+5],er=Ye[Nt+6],_r=Ye[Nt+7];var fr=rr+_r,Cr=rr-_r,Lr=tr+er,zr=tr-er,jr=ar+Jt,Hr=ar-Jt,wn=br+Vt,ns=br-Vt,ei=fr+wn,mi=fr-wn,ti=Lr+jr,ri=Lr-jr;Ye[Nt]=ei+ti,Ye[Nt+4]=ei-ti;var Mi=(ri+mi)*.707106781;Ye[Nt+2]=mi+Mi,Ye[Nt+6]=mi-Mi,ei=ns+Hr,ti=Hr+zr,ri=zr+Cr;var La=(ei-ri)*.382683433,Da=.5411961*ei+La,Ma=1.306562965*ri+La,Fa=ti*.707106781,Ba=Cr+Fa,ja=Cr-Fa;Ye[Nt+5]=ja+Da,Ye[Nt+3]=ja-Da,Ye[Nt+1]=Ba+Ma,Ye[Nt+7]=Ba-Ma,Nt+=8}for(Nt=0,jt=0;jt<or;++jt){rr=Ye[Nt],tr=Ye[Nt+8],ar=Ye[Nt+16],br=Ye[Nt+24],Vt=Ye[Nt+32],Jt=Ye[Nt+40],er=Ye[Nt+48],_r=Ye[Nt+56];var Ha=rr+_r,Cs=rr-_r,Ua=tr+er,qa=tr-er,$a=ar+Jt,Wa=ar-Jt,za=br+Vt,vc=br-Vt,Fi=Ha+za,ni=Ha-za,Bi=Ua+$a,is=Ua-$a;Ye[Nt]=Fi+Bi,Ye[Nt+32]=Fi-Bi;var Va=(is+ni)*.707106781;Ye[Nt+16]=ni+Va,Ye[Nt+48]=ni-Va,Fi=vc+Wa,Bi=Wa+qa,is=qa+Cs;var Ka=(Fi-is)*.382683433,Ga=.5411961*Fi+Ka,Ja=1.306562965*is+Ka,Vn=Bi*.707106781,Ya=Cs+Vn,Xa=Cs-Vn;Ye[Nt+40]=Xa+Ga,Ye[Nt+24]=Xa-Ga,Ye[Nt+8]=Ya+Ja,Ye[Nt+56]=Ya-Ja,Nt++}var ss;for(jt=0;jt<yr;++jt)ss=Ye[jt]*$t[jt],ce[jt]=ss>0?ss+.5|0:ss-.5|0;return ce}function Pt(){bt(65504),bt(16),mt(74),mt(70),mt(73),mt(70),mt(0),mt(1),mt(1),mt(0),bt(1),bt(1),mt(0),mt(0)}function Qt(Ye){if(Ye){bt(65505),Ye[0]===69&&Ye[1]===120&&Ye[2]===105&&Ye[3]===102?bt(Ye.length+2):(bt(Ye.length+5+2),mt(69),mt(120),mt(105),mt(102),mt(0));for(var $t=0;$t<Ye.length;$t++)mt(Ye[$t])}}function sr(Ye,$t){bt(65472),bt(17),mt(8),bt($t),bt(Ye),mt(3),mt(1),mt(17),mt(0),mt(2),mt(17),mt(1),mt(3),mt(17),mt(1)}function Gt(){bt(65499),bt(132),mt(0);for(var Ye=0;Ye<64;Ye++)mt(A[Ye]);mt(1);for(var $t=0;$t<64;$t++)mt(M[$t])}function ir(){bt(65476),bt(418),mt(0);for(var Ye=0;Ye<16;Ye++)mt(He[Ye+1]);for(var $t=0;$t<=11;$t++)mt(Fe[$t]);mt(16);for(var rr=0;rr<16;rr++)mt(Ue[rr+1]);for(var tr=0;tr<=161;tr++)mt(et[tr]);mt(1);for(var ar=0;ar<16;ar++)mt(ft[ar+1]);for(var br=0;br<=11;br++)mt(ht[br]);mt(17);for(var Vt=0;Vt<16;Vt++)mt(Tt[Vt+1]);for(var Jt=0;Jt<=161;Jt++)mt(vt[Jt])}function Ht(Ye){typeof Ye>"u"||Ye.constructor!==Array||Ye.forEach($t=>{if(typeof $t=="string"){bt(65534);var rr=$t.length;bt(rr+2);var tr;for(tr=0;tr<rr;tr++)mt($t.charCodeAt(tr))}})}function _t(){bt(65498),bt(12),mt(3),mt(1),mt(0),mt(2),mt(17),mt(3),mt(17),mt(0),mt(63),mt(0)}function Ze(Ye,$t,rr,tr,ar){for(var br=ar[0],Vt=ar[240],Jt,er=16,_r=63,Nt=64,jt=Wt(Ye,$t),or=0;or<Nt;++or)pe[Ae[or]]=jt[or];var yr=pe[0]-rr;rr=pe[0],yr==0?gr(tr[0]):(Jt=32767+yr,gr(tr[ee[Jt]]),gr(re[Jt]));for(var fr=63;fr>0&&pe[fr]==0;fr--);if(fr==0)return gr(br),rr;for(var Cr=1,Lr;Cr<=fr;){for(var zr=Cr;pe[Cr]==0&&Cr<=fr;++Cr);var jr=Cr-zr;if(jr>=er){Lr=jr>>4;for(var Hr=1;Hr<=Lr;++Hr)gr(Vt);jr=jr&15}Jt=32767+pe[Cr],gr(ar[(jr<<4)+ee[Jt]]),gr(re[Jt]),Cr++}return fr!=_r&&gr(br),rr}function tt(){for(var Ye=String.fromCharCode,$t=0;$t<256;$t++)we[$t]=Ye($t)}this.encode=function(Ye,$t){new Date().getTime(),$t&&St($t),K=new Array,se=0,ue=7,bt(65496),Pt(),Ht(Ye.comments),Qt(Ye.exifBuffer),Gt(),sr(Ye.width,Ye.height),ir(),_t();var rr=0,tr=0,ar=0;se=0,ue=7,this.encode.displayName="_encode_";for(var br=Ye.data,Vt=Ye.width,Jt=Ye.height,er=Vt*4,_r=Vt*3,Nt,jt=0,or,yr,fr,Cr,Lr,zr,jr,Hr;jt<Jt;){for(Nt=0;Nt<er;){for(Cr=er*jt+Nt,Lr=Cr,zr=-1,jr=0,Hr=0;Hr<64;Hr++)jr=Hr>>3,zr=(Hr&7)*4,Lr=Cr+jr*er+zr,jt+jr>=Jt&&(Lr-=er*(jt+1+jr-Jt)),Nt+zr>=er&&(Lr-=Nt+zr-er+4),or=br[Lr++],yr=br[Lr++],fr=br[Lr++],ae[Hr]=(Ee[or]+Ee[yr+256>>0]+Ee[fr+512>>0]>>16)-128,oe[Hr]=(Ee[or+768>>0]+Ee[yr+1024>>0]+Ee[fr+1280>>0]>>16)-128,fe[Hr]=(Ee[or+1280>>0]+Ee[yr+1536>>0]+Ee[fr+1792>>0]>>16)-128;rr=Ze(ae,H,rr,L,F),tr=Ze(oe,B,tr,N,W),ar=Ze(fe,B,ar,N,W),Nt+=32}jt+=8}if(ue>=0){var wn=[];wn[1]=ue+1,wn[0]=(1<<ue+1)-1,gr(wn)}return bt(65497),typeof Q>"u"?new Uint8Array(K):Buffer.from(K)};function St(Ye){if(Ye<=0&&(Ye=1),Ye>100&&(Ye=100),Ie!=Ye){var $t=0;Ye<50?$t=Math.floor(5e3/Ye):$t=Math.floor(200-Ye*2),Ot($t),Ie=Ye}}function Zt(){var Ye=new Date().getTime();X||(X=50),tt(),Ct(),Ft(),vr(),St(X),new Date().getTime()-Ye}Zt()}typeof Q<"u"?Q.exports=Z:typeof window<"u"&&(window["jpeg-js"]=window["jpeg-js"]||{},window["jpeg-js"].encode=Z);function Z(X,k){typeof k>"u"&&(k=50);var A=new Y(k),M=A.encode(X,k);return{data:M,width:X.width,height:X.height}}}),S=P((G,Q)=>{var Y=function(){var X=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),k=4017,A=799,M=3406,H=2276,B=1567,L=3784,N=5793,F=2896;function W(){}function re(ae,oe){for(var fe=0,we=[],Ee,Ie,Ae=16;Ae>0&&!ae[Ae-1];)Ae--;we.push({children:[],index:0});var He=we[0],Fe;for(Ee=0;Ee<Ae;Ee++){for(Ie=0;Ie<ae[Ee];Ie++){for(He=we.pop(),He.children[He.index]=oe[fe];He.index>0;){if(we.length===0)throw new Error("Could not recreate Huffman Table");He=we.pop()}for(He.index++,we.push(He);we.length<=Ee;)we.push(Fe={children:[],index:0}),He.children[He.index]=Fe.children,He=Fe;fe++}Ee+1<Ae&&(we.push(Fe={children:[],index:0}),He.children[He.index]=Fe.children,He=Fe)}return we[0].children}function ee(ae,oe,fe,we,Ee,Ie,Ae,He,Fe,Ue){fe.precision,fe.samplesPerLine,fe.scanLines;var et=fe.mcusPerLine,ft=fe.progressive;fe.maxH,fe.maxV;var ht=oe,Tt=0,vt=0;function Ot(){if(vt>0)return vt--,Tt>>vt&1;if(Tt=ae[oe++],Tt==255){var Vt=ae[oe++];if(Vt)throw new Error("unexpected marker: "+(Tt<<8|Vt).toString(16))}return vt=7,Tt>>>7}function Mt(Vt){for(var Jt=Vt,er;(er=Ot())!==null;){if(Jt=Jt[er],typeof Jt=="number")return Jt;if(typeof Jt!="object")throw new Error("invalid huffman sequence")}return null}function Ct(Vt){for(var Jt=0;Vt>0;){var er=Ot();if(er===null)return;Jt=Jt<<1|er,Vt--}return Jt}function Ft(Vt){var Jt=Ct(Vt);return Jt>=1<<Vt-1?Jt:Jt+(-1<<Vt)+1}function vr(Vt,Jt){var er=Mt(Vt.huffmanTableDC),_r=er===0?0:Ft(er);Jt[0]=Vt.pred+=_r;for(var Nt=1;Nt<64;){var jt=Mt(Vt.huffmanTableAC),or=jt&15,yr=jt>>4;if(or===0){if(yr<15)break;Nt+=16;continue}Nt+=yr;var fr=X[Nt];Jt[fr]=Ft(or),Nt++}}function gr(Vt,Jt){var er=Mt(Vt.huffmanTableDC),_r=er===0?0:Ft(er)<<Fe;Jt[0]=Vt.pred+=_r}function mt(Vt,Jt){Jt[0]|=Ot()<<Fe}var bt=0;function Wt(Vt,Jt){if(bt>0){bt--;return}for(var er=Ie,_r=Ae;er<=_r;){var Nt=Mt(Vt.huffmanTableAC),jt=Nt&15,or=Nt>>4;if(jt===0){if(or<15){bt=Ct(or)+(1<<or)-1;break}er+=16;continue}er+=or;var yr=X[er];Jt[yr]=Ft(jt)*(1<<Fe),er++}}var Pt=0,Qt;function sr(Vt,Jt){for(var er=Ie,_r=Ae,Nt=0;er<=_r;){var jt=X[er],or=Jt[jt]<0?-1:1;switch(Pt){case 0:var yr=Mt(Vt.huffmanTableAC),fr=yr&15,Nt=yr>>4;if(fr===0)Nt<15?(bt=Ct(Nt)+(1<<Nt),Pt=4):(Nt=16,Pt=1);else{if(fr!==1)throw new Error("invalid ACn encoding");Qt=Ft(fr),Pt=Nt?2:3}continue;case 1:case 2:Jt[jt]?Jt[jt]+=(Ot()<<Fe)*or:(Nt--,Nt===0&&(Pt=Pt==2?3:0));break;case 3:Jt[jt]?Jt[jt]+=(Ot()<<Fe)*or:(Jt[jt]=Qt<<Fe,Pt=0);break;case 4:Jt[jt]&&(Jt[jt]+=(Ot()<<Fe)*or);break}er++}Pt===4&&(bt--,bt===0&&(Pt=0))}function Gt(Vt,Jt,er,_r,Nt){var jt=er/et|0,or=er%et,yr=jt*Vt.v+_r,fr=or*Vt.h+Nt;Vt.blocks[yr]===void 0&&Ue.tolerantDecoding||Jt(Vt,Vt.blocks[yr][fr])}function ir(Vt,Jt,er){var _r=er/Vt.blocksPerLine|0,Nt=er%Vt.blocksPerLine;Vt.blocks[_r]===void 0&&Ue.tolerantDecoding||Jt(Vt,Vt.blocks[_r][Nt])}var Ht=we.length,_t,Ze,tt,St,Zt,Ye;ft?Ie===0?Ye=He===0?gr:mt:Ye=He===0?Wt:sr:Ye=vr;var $t=0,rr,tr;Ht==1?tr=we[0].blocksPerLine*we[0].blocksPerColumn:tr=et*fe.mcusPerColumn,Ee||(Ee=tr);for(var ar,br;$t<tr;){for(Ze=0;Ze<Ht;Ze++)we[Ze].pred=0;if(bt=0,Ht==1)for(_t=we[0],Zt=0;Zt<Ee;Zt++)ir(_t,Ye,$t),$t++;else for(Zt=0;Zt<Ee;Zt++){for(Ze=0;Ze<Ht;Ze++)for(_t=we[Ze],ar=_t.h,br=_t.v,tt=0;tt<br;tt++)for(St=0;St<ar;St++)Gt(_t,Ye,$t,tt,St);if($t++,$t===tr)break}if($t===tr)do{if(ae[oe]===255&&ae[oe+1]!==0)break;oe+=1}while(oe<ae.length-2);if(vt=0,rr=ae[oe]<<8|ae[oe+1],rr<65280)throw new Error("marker was not found");if(rr>=65488&&rr<=65495)oe+=2;else break}return oe-ht}function ce(ae,oe){var fe=[],we=oe.blocksPerLine,Ee=oe.blocksPerColumn,Ie=we<<3,Ae=new Int32Array(64),He=new Uint8Array(64);function Fe(Ct,Ft,vr){var gr=oe.quantizationTable,mt,bt,Wt,Pt,Qt,sr,Gt,ir,Ht,_t=vr,Ze;for(Ze=0;Ze<64;Ze++)_t[Ze]=Ct[Ze]*gr[Ze];for(Ze=0;Ze<8;++Ze){var tt=8*Ze;if(_t[1+tt]==0&&_t[2+tt]==0&&_t[3+tt]==0&&_t[4+tt]==0&&_t[5+tt]==0&&_t[6+tt]==0&&_t[7+tt]==0){Ht=N*_t[0+tt]+512>>10,_t[0+tt]=Ht,_t[1+tt]=Ht,_t[2+tt]=Ht,_t[3+tt]=Ht,_t[4+tt]=Ht,_t[5+tt]=Ht,_t[6+tt]=Ht,_t[7+tt]=Ht;continue}mt=N*_t[0+tt]+128>>8,bt=N*_t[4+tt]+128>>8,Wt=_t[2+tt],Pt=_t[6+tt],Qt=F*(_t[1+tt]-_t[7+tt])+128>>8,ir=F*(_t[1+tt]+_t[7+tt])+128>>8,sr=_t[3+tt]<<4,Gt=_t[5+tt]<<4,Ht=mt-bt+1>>1,mt=mt+bt+1>>1,bt=Ht,Ht=Wt*L+Pt*B+128>>8,Wt=Wt*B-Pt*L+128>>8,Pt=Ht,Ht=Qt-Gt+1>>1,Qt=Qt+Gt+1>>1,Gt=Ht,Ht=ir+sr+1>>1,sr=ir-sr+1>>1,ir=Ht,Ht=mt-Pt+1>>1,mt=mt+Pt+1>>1,Pt=Ht,Ht=bt-Wt+1>>1,bt=bt+Wt+1>>1,Wt=Ht,Ht=Qt*H+ir*M+2048>>12,Qt=Qt*M-ir*H+2048>>12,ir=Ht,Ht=sr*A+Gt*k+2048>>12,sr=sr*k-Gt*A+2048>>12,Gt=Ht,_t[0+tt]=mt+ir,_t[7+tt]=mt-ir,_t[1+tt]=bt+Gt,_t[6+tt]=bt-Gt,_t[2+tt]=Wt+sr,_t[5+tt]=Wt-sr,_t[3+tt]=Pt+Qt,_t[4+tt]=Pt-Qt}for(Ze=0;Ze<8;++Ze){var St=Ze;if(_t[8+St]==0&&_t[16+St]==0&&_t[24+St]==0&&_t[32+St]==0&&_t[40+St]==0&&_t[48+St]==0&&_t[56+St]==0){Ht=N*vr[Ze+0]+8192>>14,_t[0+St]=Ht,_t[8+St]=Ht,_t[16+St]=Ht,_t[24+St]=Ht,_t[32+St]=Ht,_t[40+St]=Ht,_t[48+St]=Ht,_t[56+St]=Ht;continue}mt=N*_t[0+St]+2048>>12,bt=N*_t[32+St]+2048>>12,Wt=_t[16+St],Pt=_t[48+St],Qt=F*(_t[8+St]-_t[56+St])+2048>>12,ir=F*(_t[8+St]+_t[56+St])+2048>>12,sr=_t[24+St],Gt=_t[40+St],Ht=mt-bt+1>>1,mt=mt+bt+1>>1,bt=Ht,Ht=Wt*L+Pt*B+2048>>12,Wt=Wt*B-Pt*L+2048>>12,Pt=Ht,Ht=Qt-Gt+1>>1,Qt=Qt+Gt+1>>1,Gt=Ht,Ht=ir+sr+1>>1,sr=ir-sr+1>>1,ir=Ht,Ht=mt-Pt+1>>1,mt=mt+Pt+1>>1,Pt=Ht,Ht=bt-Wt+1>>1,bt=bt+Wt+1>>1,Wt=Ht,Ht=Qt*H+ir*M+2048>>12,Qt=Qt*M-ir*H+2048>>12,ir=Ht,Ht=sr*A+Gt*k+2048>>12,sr=sr*k-Gt*A+2048>>12,Gt=Ht,_t[0+St]=mt+ir,_t[56+St]=mt-ir,_t[8+St]=bt+Gt,_t[48+St]=bt-Gt,_t[16+St]=Wt+sr,_t[40+St]=Wt-sr,_t[24+St]=Pt+Qt,_t[32+St]=Pt-Qt}for(Ze=0;Ze<64;++Ze){var Zt=128+(_t[Ze]+8>>4);Ft[Ze]=Zt<0?0:Zt>255?255:Zt}}ue(Ie*Ee*8);for(var Ue,et,ft=0;ft<Ee;ft++){var ht=ft<<3;for(Ue=0;Ue<8;Ue++)fe.push(new Uint8Array(Ie));for(var Tt=0;Tt<we;Tt++){Fe(oe.blocks[ft][Tt],He,Ae);var vt=0,Ot=Tt<<3;for(et=0;et<8;et++){var Mt=fe[ht+et];for(Ue=0;Ue<8;Ue++)Mt[Ot+Ue]=He[vt++]}}}return fe}function pe(ae){return ae<0?0:ae>255?255:ae}W.prototype={load:function(ae){var oe=new XMLHttpRequest;oe.open("GET",ae,!0),oe.responseType="arraybuffer",oe.onload=(function(){var fe=new Uint8Array(oe.response||oe.mozResponseArrayBuffer);this.parse(fe),this.onload&&this.onload()}).bind(this),oe.send(null)},parse:function(ae){var oe=this.opts.maxResolutionInMP*1e3*1e3,fe=0;ae.length;function we(){var jt=ae[fe]<<8|ae[fe+1];return fe+=2,jt}function Ee(){var jt=we(),or=ae.subarray(fe,fe+jt-2);return fe+=or.length,or}function Ie(jt){var or=1,yr=1,fr,Cr;for(Cr in jt.components)jt.components.hasOwnProperty(Cr)&&(fr=jt.components[Cr],or<fr.h&&(or=fr.h),yr<fr.v&&(yr=fr.v));var Lr=Math.ceil(jt.samplesPerLine/8/or),zr=Math.ceil(jt.scanLines/8/yr);for(Cr in jt.components)if(jt.components.hasOwnProperty(Cr)){fr=jt.components[Cr];var jr=Math.ceil(Math.ceil(jt.samplesPerLine/8)*fr.h/or),Hr=Math.ceil(Math.ceil(jt.scanLines/8)*fr.v/yr),wn=Lr*fr.h,ns=zr*fr.v,ei=ns*wn,mi=[];ue(ei*256);for(var ti=0;ti<ns;ti++){for(var ri=[],Mi=0;Mi<wn;Mi++)ri.push(new Int32Array(64));mi.push(ri)}fr.blocksPerLine=jr,fr.blocksPerColumn=Hr,fr.blocks=mi}jt.maxH=or,jt.maxV=yr,jt.mcusPerLine=Lr,jt.mcusPerColumn=zr}var Ae=null,He=null,Fe,Ue,et=[],ft=[],ht=[],Tt=[],vt=we(),Ot=-1;if(this.comments=[],vt!=65496)throw new Error("SOI not found");for(vt=we();vt!=65497;){var Mt,Ct;switch(vt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Ft=Ee();if(vt===65534){var vr=String.fromCharCode.apply(null,Ft);this.comments.push(vr)}vt===65504&&Ft[0]===74&&Ft[1]===70&&Ft[2]===73&&Ft[3]===70&&Ft[4]===0&&(Ae={version:{major:Ft[5],minor:Ft[6]},densityUnits:Ft[7],xDensity:Ft[8]<<8|Ft[9],yDensity:Ft[10]<<8|Ft[11],thumbWidth:Ft[12],thumbHeight:Ft[13],thumbData:Ft.subarray(14,14+3*Ft[12]*Ft[13])}),vt===65505&&Ft[0]===69&&Ft[1]===120&&Ft[2]===105&&Ft[3]===102&&Ft[4]===0&&(this.exifBuffer=Ft.subarray(5,Ft.length)),vt===65518&&Ft[0]===65&&Ft[1]===100&&Ft[2]===111&&Ft[3]===98&&Ft[4]===101&&Ft[5]===0&&(He={version:Ft[6],flags0:Ft[7]<<8|Ft[8],flags1:Ft[9]<<8|Ft[10],transformCode:Ft[11]});break;case 65499:for(var gr=we(),mt=gr+fe-2;fe<mt;){var bt=ae[fe++];ue(256);var Wt=new Int32Array(64);if(bt>>4===0)for(Ct=0;Ct<64;Ct++){var Pt=X[Ct];Wt[Pt]=ae[fe++]}else if(bt>>4===1)for(Ct=0;Ct<64;Ct++){var Pt=X[Ct];Wt[Pt]=we()}else throw new Error("DQT: invalid table spec");et[bt&15]=Wt}break;case 65472:case 65473:case 65474:we(),Fe={},Fe.extended=vt===65473,Fe.progressive=vt===65474,Fe.precision=ae[fe++],Fe.scanLines=we(),Fe.samplesPerLine=we(),Fe.components={},Fe.componentsOrder=[];var Qt=Fe.scanLines*Fe.samplesPerLine;if(Qt>oe){var sr=Math.ceil((Qt-oe)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${sr}MP`)}var Gt=ae[fe++],ir;for(Mt=0;Mt<Gt;Mt++){ir=ae[fe];var Ht=ae[fe+1]>>4,_t=ae[fe+1]&15,Ze=ae[fe+2];if(Ht<=0||_t<=0)throw new Error("Invalid sampling factor, expected values above 0");Fe.componentsOrder.push(ir),Fe.components[ir]={h:Ht,v:_t,quantizationIdx:Ze},fe+=3}Ie(Fe),ft.push(Fe);break;case 65476:var tt=we();for(Mt=2;Mt<tt;){var St=ae[fe++],Zt=new Uint8Array(16),Ye=0;for(Ct=0;Ct<16;Ct++,fe++)Ye+=Zt[Ct]=ae[fe];ue(16+Ye);var $t=new Uint8Array(Ye);for(Ct=0;Ct<Ye;Ct++,fe++)$t[Ct]=ae[fe];Mt+=17+Ye,(St>>4===0?Tt:ht)[St&15]=re(Zt,$t)}break;case 65501:we(),Ue=we();break;case 65500:we(),we();break;case 65498:we();var rr=ae[fe++],tr=[],ar;for(Mt=0;Mt<rr;Mt++){ar=Fe.components[ae[fe++]];var br=ae[fe++];ar.huffmanTableDC=Tt[br>>4],ar.huffmanTableAC=ht[br&15],tr.push(ar)}var Vt=ae[fe++],Jt=ae[fe++],er=ae[fe++],_r=ee(ae,fe,Fe,tr,Ue,Vt,Jt,er>>4,er&15,this.opts);fe+=_r;break;case 65535:ae[fe]!==255&&fe--;break;default:if(ae[fe-3]==255&&ae[fe-2]>=192&&ae[fe-2]<=254){fe-=3;break}else if(vt===224||vt==225){if(Ot!==-1)throw new Error(`first unknown JPEG marker at offset ${Ot.toString(16)}, second unknown JPEG marker ${vt.toString(16)} at offset ${(fe-1).toString(16)}`);Ot=fe-1;let jt=we();if(ae[fe+jt-2]===255){fe+=jt-2;break}}throw new Error("unknown JPEG marker "+vt.toString(16))}vt=we()}if(ft.length!=1)throw new Error("only single frame JPEGs supported");for(var Mt=0;Mt<ft.length;Mt++){var Nt=ft[Mt].components;for(var Ct in Nt)Nt[Ct].quantizationTable=et[Nt[Ct].quantizationIdx],delete Nt[Ct].quantizationIdx}this.width=Fe.samplesPerLine,this.height=Fe.scanLines,this.jfif=Ae,this.adobe=He,this.components=[];for(var Mt=0;Mt<Fe.componentsOrder.length;Mt++){var ar=Fe.components[Fe.componentsOrder[Mt]];this.components.push({lines:ce(Fe,ar),scaleX:ar.h/Fe.maxH,scaleY:ar.v/Fe.maxV})}},getData:function(ae,oe){var fe=this.width/ae,we=this.height/oe,Ee,Ie,Ae,He,Fe,Ue,et,ft,ht,Tt,vt=0,Ot,Mt,Ct,Ft,vr,gr,mt,bt,Wt,Pt,Qt,sr=ae*oe*this.components.length;ue(sr);var Gt=new Uint8Array(sr);switch(this.components.length){case 1:for(Ee=this.components[0],Tt=0;Tt<oe;Tt++)for(Fe=Ee.lines[0|Tt*Ee.scaleY*we],ht=0;ht<ae;ht++)Ot=Fe[0|ht*Ee.scaleX*fe],Gt[vt++]=Ot;break;case 2:for(Ee=this.components[0],Ie=this.components[1],Tt=0;Tt<oe;Tt++)for(Fe=Ee.lines[0|Tt*Ee.scaleY*we],Ue=Ie.lines[0|Tt*Ie.scaleY*we],ht=0;ht<ae;ht++)Ot=Fe[0|ht*Ee.scaleX*fe],Gt[vt++]=Ot,Ot=Ue[0|ht*Ie.scaleX*fe],Gt[vt++]=Ot;break;case 3:for(Qt=!0,this.adobe&&this.adobe.transformCode?Qt=!0:typeof this.opts.colorTransform<"u"&&(Qt=!!this.opts.colorTransform),Ee=this.components[0],Ie=this.components[1],Ae=this.components[2],Tt=0;Tt<oe;Tt++)for(Fe=Ee.lines[0|Tt*Ee.scaleY*we],Ue=Ie.lines[0|Tt*Ie.scaleY*we],et=Ae.lines[0|Tt*Ae.scaleY*we],ht=0;ht<ae;ht++)Qt?(Ot=Fe[0|ht*Ee.scaleX*fe],Mt=Ue[0|ht*Ie.scaleX*fe],Ct=et[0|ht*Ae.scaleX*fe],bt=pe(Ot+1.402*(Ct-128)),Wt=pe(Ot-.3441363*(Mt-128)-.71413636*(Ct-128)),Pt=pe(Ot+1.772*(Mt-128))):(bt=Fe[0|ht*Ee.scaleX*fe],Wt=Ue[0|ht*Ie.scaleX*fe],Pt=et[0|ht*Ae.scaleX*fe]),Gt[vt++]=bt,Gt[vt++]=Wt,Gt[vt++]=Pt;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Qt=!1,this.adobe&&this.adobe.transformCode?Qt=!0:typeof this.opts.colorTransform<"u"&&(Qt=!!this.opts.colorTransform),Ee=this.components[0],Ie=this.components[1],Ae=this.components[2],He=this.components[3],Tt=0;Tt<oe;Tt++)for(Fe=Ee.lines[0|Tt*Ee.scaleY*we],Ue=Ie.lines[0|Tt*Ie.scaleY*we],et=Ae.lines[0|Tt*Ae.scaleY*we],ft=He.lines[0|Tt*He.scaleY*we],ht=0;ht<ae;ht++)Qt?(Ot=Fe[0|ht*Ee.scaleX*fe],Mt=Ue[0|ht*Ie.scaleX*fe],Ct=et[0|ht*Ae.scaleX*fe],Ft=ft[0|ht*He.scaleX*fe],vr=255-pe(Ot+1.402*(Ct-128)),gr=255-pe(Ot-.3441363*(Mt-128)-.71413636*(Ct-128)),mt=255-pe(Ot+1.772*(Mt-128))):(vr=Fe[0|ht*Ee.scaleX*fe],gr=Ue[0|ht*Ie.scaleX*fe],mt=et[0|ht*Ae.scaleX*fe],Ft=ft[0|ht*He.scaleX*fe]),Gt[vt++]=255-vr,Gt[vt++]=255-gr,Gt[vt++]=255-mt,Gt[vt++]=255-Ft;break;default:throw new Error("Unsupported color mode")}return Gt},copyToImageData:function(ae,oe){var fe=ae.width,we=ae.height,Ee=ae.data,Ie=this.getData(fe,we),Ae=0,He=0,Fe,Ue,et,ft,ht,Tt,vt,Ot,Mt;switch(this.components.length){case 1:for(Ue=0;Ue<we;Ue++)for(Fe=0;Fe<fe;Fe++)et=Ie[Ae++],Ee[He++]=et,Ee[He++]=et,Ee[He++]=et,oe&&(Ee[He++]=255);break;case 3:for(Ue=0;Ue<we;Ue++)for(Fe=0;Fe<fe;Fe++)vt=Ie[Ae++],Ot=Ie[Ae++],Mt=Ie[Ae++],Ee[He++]=vt,Ee[He++]=Ot,Ee[He++]=Mt,oe&&(Ee[He++]=255);break;case 4:for(Ue=0;Ue<we;Ue++)for(Fe=0;Fe<fe;Fe++)ht=Ie[Ae++],Tt=Ie[Ae++],et=Ie[Ae++],ft=Ie[Ae++],vt=255-pe(ht*(1-ft/255)+ft),Ot=255-pe(Tt*(1-ft/255)+ft),Mt=255-pe(et*(1-ft/255)+ft),Ee[He++]=vt,Ee[He++]=Ot,Ee[He++]=Mt,oe&&(Ee[He++]=255);break;default:throw new Error("Unsupported color mode")}}};var K=0,se=0;function ue(ae=0){var oe=K+ae;if(oe>se){var fe=Math.ceil((oe-se)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${fe}MB`)}K=oe}return W.resetMaxMemoryUsage=function(ae){K=0,se=ae},W.getBytesAllocated=function(){return K},W.requestMemoryAllocation=ue,W}();typeof Q<"u"?Q.exports=Z:typeof window<"u"&&(window["jpeg-js"]=window["jpeg-js"]||{},window["jpeg-js"].decode=Z);function Z(X,k={}){var A={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},M={...A,...k},H=new Uint8Array(X),B=new Y;B.opts=M,Y.resetMaxMemoryUsage(M.maxMemoryUsageInMB*1024*1024),B.parse(H);var L=M.formatAsRGBA?4:3,N=B.width*B.height*L;try{Y.requestMemoryAllocation(N);var F={width:B.width,height:B.height,exifBuffer:B.exifBuffer,data:M.useTArray?new Uint8Array(N):Buffer.alloc(N)};B.comments.length>0&&(F.comments=B.comments)}catch(W){throw W instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+N):W instanceof ReferenceError&&W.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):W}return B.copyToImageData(F,M.formatAsRGBA),F}}),j=P((G,Q)=>{var Y=ne(),Z=S();Q.exports={encode:Y,decode:Z}}),y=P((G,Q)=>{function Y(){this._types=Object.create(null),this._extensions=Object.create(null);for(let Z=0;Z<arguments.length;Z++)this.define(arguments[Z]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Y.prototype.define=function(Z,X){for(let k in Z){let A=Z[k].map(function(M){return M.toLowerCase()});k=k.toLowerCase();for(let M=0;M<A.length;M++){let H=A[M];if(H[0]!=="*"){if(!X&&H in this._types)throw new Error('Attempt to change mapping for "'+H+'" extension from "'+this._types[H]+'" to "'+k+'". Pass `force=true` to allow this, otherwise remove "'+H+'" from the list of extensions for "'+k+'".');this._types[H]=k}}if(X||!this._extensions[k]){let M=A[0];this._extensions[k]=M[0]!=="*"?M:M.substr(1)}}},Y.prototype.getType=function(Z){Z=String(Z);let X=Z.replace(/^.*[/\\]/,"").toLowerCase(),k=X.replace(/^.*\./,"").toLowerCase(),A=X.length<Z.length;return(k.length<X.length-1||!A)&&this._types[k]||null},Y.prototype.getExtension=function(Z){return Z=/^\s*([^;\s]*)/.test(Z)&&RegExp.$1,Z&&this._extensions[Z.toLowerCase()]||null},Q.exports=Y}),I=P((G,Q)=>{Q.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}}),D=P((G,Q)=>{Q.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}}),ie=P((G,Q)=>{var Y=y();Q.exports=new Y(I(),D())}),he=P((G,Q)=>{Q.exports=function(Z,X){for(var k=[],A=0;A<Z.length;A++){var M=X(Z[A],A);Y(M)?k.push.apply(k,M):k.push(M)}return k};var Y=Array.isArray||function(Z){return Object.prototype.toString.call(Z)==="[object Array]"}}),me=P((G,Q)=>{Q.exports=Y;function Y(k,A,M){k instanceof RegExp&&(k=Z(k,M)),A instanceof RegExp&&(A=Z(A,M));var H=X(k,A,M);return H&&{start:H[0],end:H[1],pre:M.slice(0,H[0]),body:M.slice(H[0]+k.length,H[1]),post:M.slice(H[1]+A.length)}}function Z(k,A){var M=A.match(k);return M?M[0]:null}Y.range=X;function X(k,A,M){var H,B,L,N,F,W=M.indexOf(k),re=M.indexOf(A,W+1),ee=W;if(W>=0&&re>0){if(k===A)return[W,re];for(H=[],L=M.length;ee>=0&&!F;)ee==W?(H.push(ee),W=M.indexOf(k,ee+1)):H.length==1?F=[H.pop(),re]:(B=H.pop(),B<L&&(L=B,N=re),re=M.indexOf(A,ee+1)),ee=W<re&&W>=0?W:re;H.length&&(F=[L,N])}return F}}),ye=P((G,Q)=>{var Y=he(),Z=me();Q.exports=W;var X="\0SLASH"+Math.random()+"\0",k="\0OPEN"+Math.random()+"\0",A="\0CLOSE"+Math.random()+"\0",M="\0COMMA"+Math.random()+"\0",H="\0PERIOD"+Math.random()+"\0";function B(se){return parseInt(se,10)==se?parseInt(se,10):se.charCodeAt(0)}function L(se){return se.split("\\\\").join(X).split("\\{").join(k).split("\\}").join(A).split("\\,").join(M).split("\\.").join(H)}function N(se){return se.split(X).join("\\").split(k).join("{").split(A).join("}").split(M).join(",").split(H).join(".")}function F(se){if(!se)return[""];var ue=[],ae=Z("{","}",se);if(!ae)return se.split(",");var oe=ae.pre,fe=ae.body,we=ae.post,Ee=oe.split(",");Ee[Ee.length-1]+="{"+fe+"}";var Ie=F(we);return we.length&&(Ee[Ee.length-1]+=Ie.shift(),Ee.push.apply(Ee,Ie)),ue.push.apply(ue,Ee),ue}function W(se){return se?(se.substr(0,2)==="{}"&&(se="\\{\\}"+se.substr(2)),K(L(se),!0).map(N)):[]}function re(se){return"{"+se+"}"}function ee(se){return/^-?0\d/.test(se)}function ce(se,ue){return se<=ue}function pe(se,ue){return se>=ue}function K(se,ue){var ae=[],oe=Z("{","}",se);if(!oe||/\$$/.test(oe.pre))return[se];var fe=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(oe.body),we=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(oe.body),Ee=fe||we,Ie=oe.body.indexOf(",")>=0;if(!Ee&&!Ie)return oe.post.match(/,(?!,).*\}/)?(se=oe.pre+"{"+oe.body+A+oe.post,K(se)):[se];var Ae;if(Ee)Ae=oe.body.split(/\.\./);else if(Ae=F(oe.body),Ae.length===1&&(Ae=K(Ae[0],!1).map(re),Ae.length===1)){var Fe=oe.post.length?K(oe.post,!1):[""];return Fe.map(function(Qt){return oe.pre+Ae[0]+Qt})}var He=oe.pre,Fe=oe.post.length?K(oe.post,!1):[""],Ue;if(Ee){var et=B(Ae[0]),ft=B(Ae[1]),ht=Math.max(Ae[0].length,Ae[1].length),Tt=Ae.length==3?Math.abs(B(Ae[2])):1,vt=ce,Ot=ft<et;Ot&&(Tt*=-1,vt=pe);var Mt=Ae.some(ee);Ue=[];for(var Ct=et;vt(Ct,ft);Ct+=Tt){var Ft;if(we)Ft=String.fromCharCode(Ct),Ft==="\\"&&(Ft="");else if(Ft=String(Ct),Mt){var vr=ht-Ft.length;if(vr>0){var gr=new Array(vr+1).join("0");Ct<0?Ft="-"+gr+Ft.slice(1):Ft=gr+Ft}}Ue.push(Ft)}}else Ue=Y(Ae,function(Pt){return K(Pt,!1)});for(var mt=0;mt<Ue.length;mt++)for(var bt=0;bt<Fe.length;bt++){var Wt=He+Ue[mt]+Fe[bt];(!ue||Ee||Wt)&&ae.push(Wt)}return ae}}),Se=P((G,Q)=>{Q.exports=ee,ee.Minimatch=ce;var Y=function(){try{return Je}catch{}}()||{sep:"/"};ee.sep=Y.sep;var Z=ee.GLOBSTAR=ce.GLOBSTAR={},X=ye(),k={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},A="[^/]",M=A+"*?",H="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",B="(?:(?!(?:\\/|^)\\.).)*?",L=N("().*{}+?[]^$\\!");function N(Ae){return Ae.split("").reduce(function(He,Fe){return He[Fe]=!0,He},{})}var F=/\/+/;ee.filter=W;function W(Ae,He){return He=He||{},function(Fe,Ue,et){return ee(Fe,Ae,He)}}function re(Ae,He){He=He||{};var Fe={};return Object.keys(Ae).forEach(function(Ue){Fe[Ue]=Ae[Ue]}),Object.keys(He).forEach(function(Ue){Fe[Ue]=He[Ue]}),Fe}ee.defaults=function(Ae){if(!Ae||typeof Ae!="object"||!Object.keys(Ae).length)return ee;var He=ee,Fe=function(Ue,et,ft){return He(Ue,et,re(Ae,ft))};return Fe.Minimatch=function(Ue,et){return new He.Minimatch(Ue,re(Ae,et))},Fe.Minimatch.defaults=function(Ue){return He.defaults(re(Ae,Ue)).Minimatch},Fe.filter=function(Ue,et){return He.filter(Ue,re(Ae,et))},Fe.defaults=function(Ue){return He.defaults(re(Ae,Ue))},Fe.makeRe=function(Ue,et){return He.makeRe(Ue,re(Ae,et))},Fe.braceExpand=function(Ue,et){return He.braceExpand(Ue,re(Ae,et))},Fe.match=function(Ue,et,ft){return He.match(Ue,et,re(Ae,ft))},Fe},ce.defaults=function(Ae){return ee.defaults(Ae).Minimatch};function ee(Ae,He,Fe){return ae(He),Fe||(Fe={}),!Fe.nocomment&&He.charAt(0)==="#"?!1:new ce(He,Fe).match(Ae)}function ce(Ae,He){if(!(this instanceof ce))return new ce(Ae,He);ae(Ae),He||(He={}),Ae=Ae.trim(),!He.allowWindowsEscape&&Y.sep!=="/"&&(Ae=Ae.split(Y.sep).join("/")),this.options=He,this.set=[],this.pattern=Ae,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!He.partial,this.make()}ce.prototype.debug=function(){},ce.prototype.make=pe;function pe(){var Ae=this.pattern,He=this.options;if(!He.nocomment&&Ae.charAt(0)==="#"){this.comment=!0;return}if(!Ae){this.empty=!0;return}this.parseNegate();var Fe=this.globSet=this.braceExpand();He.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,Fe),Fe=this.globParts=Fe.map(function(Ue){return Ue.split(F)}),this.debug(this.pattern,Fe),Fe=Fe.map(function(Ue,et,ft){return Ue.map(this.parse,this)},this),this.debug(this.pattern,Fe),Fe=Fe.filter(function(Ue){return Ue.indexOf(!1)===-1}),this.debug(this.pattern,Fe),this.set=Fe}ce.prototype.parseNegate=K;function K(){var Ae=this.pattern,He=!1,Fe=this.options,Ue=0;if(!Fe.nonegate){for(var et=0,ft=Ae.length;et<ft&&Ae.charAt(et)==="!";et++)He=!He,Ue++;Ue&&(this.pattern=Ae.substr(Ue)),this.negate=He}}ee.braceExpand=function(Ae,He){return se(Ae,He)},ce.prototype.braceExpand=se;function se(Ae,He){return He||(this instanceof ce?He=this.options:He={}),Ae=typeof Ae>"u"?this.pattern:Ae,ae(Ae),He.nobrace||!/\{(?:(?!\{).)*\}/.test(Ae)?[Ae]:X(Ae)}var ue=1024*64,ae=function(Ae){if(typeof Ae!="string")throw new TypeError("invalid pattern");if(Ae.length>ue)throw new TypeError("pattern is too long")};ce.prototype.parse=fe;var oe={};function fe(Ae,He){ae(Ae);var Fe=this.options;if(Ae==="**")if(Fe.noglobstar)Ae="*";else return Z;if(Ae==="")return"";var Ue="",et=!!Fe.nocase,ft=!1,ht=[],Tt=[],vt,Ot=!1,Mt=-1,Ct=-1,Ft=Ae.charAt(0)==="."?"":Fe.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",vr=this;function gr(){if(vt){switch(vt){case"*":Ue+=M,et=!0;break;case"?":Ue+=A,et=!0;break;default:Ue+="\\"+vt;break}vr.debug("clearStateChar %j %j",vt,Ue),vt=!1}}for(var mt=0,bt=Ae.length,Wt;mt<bt&&(Wt=Ae.charAt(mt));mt++){if(this.debug("%s	%s %s %j",Ae,mt,Ue,Wt),ft&&L[Wt]){Ue+="\\"+Wt,ft=!1;continue}switch(Wt){case"/":return!1;case"\\":gr(),ft=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",Ae,mt,Ue,Wt),Ot){this.debug("  in class"),Wt==="!"&&mt===Ct+1&&(Wt="^"),Ue+=Wt;continue}vr.debug("call clearStateChar %j",vt),gr(),vt=Wt,Fe.noext&&gr();continue;case"(":if(Ot){Ue+="(";continue}if(!vt){Ue+="\\(";continue}ht.push({type:vt,start:mt-1,reStart:Ue.length,open:k[vt].open,close:k[vt].close}),Ue+=vt==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",vt,Ue),vt=!1;continue;case")":if(Ot||!ht.length){Ue+="\\)";continue}gr(),et=!0;var Pt=ht.pop();Ue+=Pt.close,Pt.type==="!"&&Tt.push(Pt),Pt.reEnd=Ue.length;continue;case"|":if(Ot||!ht.length||ft){Ue+="\\|",ft=!1;continue}gr(),Ue+="|";continue;case"[":if(gr(),Ot){Ue+="\\"+Wt;continue}Ot=!0,Ct=mt,Mt=Ue.length,Ue+=Wt;continue;case"]":if(mt===Ct+1||!Ot){Ue+="\\"+Wt,ft=!1;continue}var Qt=Ae.substring(Ct+1,mt);try{RegExp("["+Qt+"]")}catch{var sr=this.parse(Qt,oe);Ue=Ue.substr(0,Mt)+"\\["+sr[0]+"\\]",et=et||sr[1],Ot=!1;continue}et=!0,Ot=!1,Ue+=Wt;continue;default:gr(),ft?ft=!1:L[Wt]&&!(Wt==="^"&&Ot)&&(Ue+="\\"),Ue+=Wt}}for(Ot&&(Qt=Ae.substr(Ct+1),sr=this.parse(Qt,oe),Ue=Ue.substr(0,Mt)+"\\["+sr[0],et=et||sr[1]),Pt=ht.pop();Pt;Pt=ht.pop()){var Gt=Ue.slice(Pt.reStart+Pt.open.length);this.debug("setting tail",Ue,Pt),Gt=Gt.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Jt,er,_r){return _r||(_r="\\"),er+er+_r+"|"}),this.debug(`tail=%j
   %s`,Gt,Gt,Pt,Ue);var ir=Pt.type==="*"?M:Pt.type==="?"?A:"\\"+Pt.type;et=!0,Ue=Ue.slice(0,Pt.reStart)+ir+"\\("+Gt}gr(),ft&&(Ue+="\\\\");var Ht=!1;switch(Ue.charAt(0)){case"[":case".":case"(":Ht=!0}for(var _t=Tt.length-1;_t>-1;_t--){var Ze=Tt[_t],tt=Ue.slice(0,Ze.reStart),St=Ue.slice(Ze.reStart,Ze.reEnd-8),Zt=Ue.slice(Ze.reEnd-8,Ze.reEnd),Ye=Ue.slice(Ze.reEnd);Zt+=Ye;var $t=tt.split("(").length-1,rr=Ye;for(mt=0;mt<$t;mt++)rr=rr.replace(/\)[+*?]?/,"");Ye=rr;var tr="";Ye===""&&He!==oe&&(tr="$");var ar=tt+St+Ye+tr+Zt;Ue=ar}if(Ue!==""&&et&&(Ue="(?=.)"+Ue),Ht&&(Ue=Ft+Ue),He===oe)return[Ue,et];if(!et)return Ee(Ae);var br=Fe.nocase?"i":"";try{var Vt=new RegExp("^"+Ue+"$",br)}catch{return new RegExp("$.")}return Vt._glob=Ae,Vt._src=Ue,Vt}ee.makeRe=function(Ae,He){return new ce(Ae,He||{}).makeRe()},ce.prototype.makeRe=we;function we(){if(this.regexp||this.regexp===!1)return this.regexp;var Ae=this.set;if(!Ae.length)return this.regexp=!1,this.regexp;var He=this.options,Fe=He.noglobstar?M:He.dot?H:B,Ue=He.nocase?"i":"",et=Ae.map(function(ft){return ft.map(function(ht){return ht===Z?Fe:typeof ht=="string"?Ie(ht):ht._src}).join("\\/")}).join("|");et="^(?:"+et+")$",this.negate&&(et="^(?!"+et+").*$");try{this.regexp=new RegExp(et,Ue)}catch{this.regexp=!1}return this.regexp}ee.match=function(Ae,He,Fe){Fe=Fe||{};var Ue=new ce(He,Fe);return Ae=Ae.filter(function(et){return Ue.match(et)}),Ue.options.nonull&&!Ae.length&&Ae.push(He),Ae},ce.prototype.match=function(Ae,He){if(typeof He>"u"&&(He=this.partial),this.debug("match",Ae,this.pattern),this.comment)return!1;if(this.empty)return Ae==="";if(Ae==="/"&&He)return!0;var Fe=this.options;Y.sep!=="/"&&(Ae=Ae.split(Y.sep).join("/")),Ae=Ae.split(F),this.debug(this.pattern,"split",Ae);var Ue=this.set;this.debug(this.pattern,"set",Ue);var et,ft;for(ft=Ae.length-1;ft>=0&&(et=Ae[ft],!et);ft--);for(ft=0;ft<Ue.length;ft++){var ht=Ue[ft],Tt=Ae;Fe.matchBase&&ht.length===1&&(Tt=[et]);var vt=this.matchOne(Tt,ht,He);if(vt)return Fe.flipNegate?!0:!this.negate}return Fe.flipNegate?!1:this.negate},ce.prototype.matchOne=function(Ae,He,Fe){var Ue=this.options;this.debug("matchOne",{this:this,file:Ae,pattern:He}),this.debug("matchOne",Ae.length,He.length);for(var et=0,ft=0,ht=Ae.length,Tt=He.length;et<ht&&ft<Tt;et++,ft++){this.debug("matchOne loop");var vt=He[ft],Ot=Ae[et];if(this.debug(He,vt,Ot),vt===!1)return!1;if(vt===Z){this.debug("GLOBSTAR",[He,vt,Ot]);var Mt=et,Ct=ft+1;if(Ct===Tt){for(this.debug("** at the end");et<ht;et++)if(Ae[et]==="."||Ae[et]===".."||!Ue.dot&&Ae[et].charAt(0)===".")return!1;return!0}for(;Mt<ht;){var Ft=Ae[Mt];if(this.debug(`
globstar while`,Ae,Mt,He,Ct,Ft),this.matchOne(Ae.slice(Mt),He.slice(Ct),Fe))return this.debug("globstar found match!",Mt,ht,Ft),!0;if(Ft==="."||Ft===".."||!Ue.dot&&Ft.charAt(0)==="."){this.debug("dot detected!",Ae,Mt,He,Ct);break}this.debug("globstar swallow a segment, and continue"),Mt++}return!!(Fe&&(this.debug(`
>>> no match, partial?`,Ae,Mt,He,Ct),Mt===ht))}var vr;if(typeof vt=="string"?(vr=Ot===vt,this.debug("string match",vt,Ot,vr)):(vr=Ot.match(vt),this.debug("pattern match",vt,Ot,vr)),!vr)return!1}if(et===ht&&ft===Tt)return!0;if(et===ht)return Fe;if(ft===Tt)return et===ht-1&&Ae[et]==="";throw new Error("wtf?")};function Ee(Ae){return Ae.replace(/\\(.)/g,"$1")}function Ie(Ae){return Ae.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}),Oe=P((G,Q)=>{var Y=Je,Z;function X(){try{return Y.statSync("/.dockerenv"),!0}catch{return!1}}function k(){try{return Y.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Q.exports=()=>(Z===void 0&&(Z=X()||k()),Z)}),Pe=P((G,Q)=>{var Y=Je,Z=Je,X=Oe(),k=()=>{if(process.platform!=="linux")return!1;if(Y.release().toLowerCase().includes("microsoft"))return!X();try{return Z.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!X():!1}catch{return!1}};t.__IS_WSL_TEST__?Q.exports=k:Q.exports=k()}),Ne=P((G,Q)=>{Q.exports=(Y,Z,X)=>{let k=A=>Object.defineProperty(Y,Z,{value:A,enumerable:!0,writable:!0});return Object.defineProperty(Y,Z,{configurable:!0,enumerable:!0,get(){let A=X();return k(A),A},set(A){k(A)}}),Y}}),Le=P((G,Q)=>{var Y=Je,Z=Je,{promises:X,constants:k}=Je,A=Pe(),M=Oe(),H=Ne(),B=Y.join(__dirname,"xdg-open"),{platform:L,arch:N}=process,F=(()=>{let ue="/mnt/",ae;return async function(){if(ae)return ae;let oe="/etc/wsl.conf",fe=!1;try{await X.access(oe,k.F_OK),fe=!0}catch{}if(!fe)return ue;let we=await X.readFile(oe,{encoding:"utf8"}),Ee=new RegExp("(?<!#.*)root\\s*=\\s*(?<mountPoint>.*)","g").exec(we);return Ee?(ae=Ee.groups.mountPoint.trim(),ae=ae.endsWith("/")?ae:`${ae}/`,ae):ue}})(),W=async(ue,ae)=>{let oe;for(let fe of ue)try{return await ae(fe)}catch(we){oe=we}throw oe},re=async ue=>{if(ue={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...ue},Array.isArray(ue.app))return W(ue.app,Ae=>re({...ue,app:Ae}));let{name:ae,arguments:oe=[]}=ue.app||{};if(oe=[...oe],Array.isArray(ae))return W(ae,Ae=>re({...ue,app:{name:Ae,arguments:oe}}));let fe,we=[],Ee={};if(L==="darwin")fe="open",ue.wait&&we.push("--wait-apps"),ue.background&&we.push("--background"),ue.newInstance&&we.push("--new"),ae&&we.push("-a",ae);else if(L==="win32"||A&&!M()){let Ae=await F();fe=A?`${Ae}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${t.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,we.push("-NoProfile","-NonInteractive","–ExecutionPolicy","Bypass","-EncodedCommand"),A||(Ee.windowsVerbatimArguments=!0);let He=["Start"];ue.wait&&He.push("-Wait"),ae?(He.push(`"\`"${ae}\`""`,"-ArgumentList"),ue.target&&oe.unshift(ue.target)):ue.target&&He.push(`"${ue.target}"`),oe.length>0&&(oe=oe.map(Fe=>`"\`"${Fe}\`""`),He.push(oe.join(","))),ue.target=Buffer.from(He.join(" "),"utf16le").toString("base64")}else{if(ae)fe=ae;else{let Ae=!__dirname||__dirname==="/",He=!1;try{await X.access(B,k.X_OK),He=!0}catch{}fe=process.versions.electron||L==="android"||Ae||!He?"xdg-open":B}oe.length>0&&we.push(...oe),ue.wait||(Ee.stdio="ignore",Ee.detached=!0)}ue.target&&we.push(ue.target),L==="darwin"&&oe.length>0&&we.push("--args",...oe);let Ie=Z.spawn(fe,we,Ee);return ue.wait?new Promise((Ae,He)=>{Ie.once("error",He),Ie.once("close",Fe=>{if(ue.allowNonzeroExitCode&&Fe>0){He(new Error(`Exited with code ${Fe}`));return}Ae(Ie)})}):(Ie.unref(),Ie)},ee=(ue,ae)=>{if(typeof ue!="string")throw new TypeError("Expected a `target`");return re({...ae,target:ue})},ce=(ue,ae)=>{if(typeof ue!="string")throw new TypeError("Expected a `name`");let{arguments:oe=[]}=ae||{};if(oe!=null&&!Array.isArray(oe))throw new TypeError("Expected `appArguments` as Array type");return re({...ae,app:{name:ue,arguments:oe}})};function pe(ue){if(typeof ue=="string"||Array.isArray(ue))return ue;let{[N]:ae}=ue;if(!ae)throw new Error(`${N} is not supported`);return ae}function K({[L]:ue},{wsl:ae}){if(ae&&A)return pe(ae);if(!ue)throw new Error(`${L} is not supported`);return pe(ue)}var se={};H(se,"chrome",()=>K({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}})),H(se,"firefox",()=>K({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"})),H(se,"edge",()=>K({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"})),ee.apps=se,ee.openApp=ce,Q.exports=ee}),qe=P((G,Q)=>{var Y=Je,Z=Je,X=Q.exports=function(){Z.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};Y.inherits(X,Z),X.prototype.read=function(k,A){this._reads.push({length:Math.abs(k),allowLess:k<0,func:A}),process.nextTick((function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},X.prototype.write=function(k,A){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let M;return Buffer.isBuffer(k)?M=k:M=Buffer.from(k,A||this._encoding),this._buffers.push(M),this._buffered+=M.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused},X.prototype.end=function(k,A){k&&this.write(k,A),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))},X.prototype.destroySoon=X.prototype.end,X.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},X.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},X.prototype._processReadAllowingLess=function(k){this._reads.shift();let A=this._buffers[0];A.length>k.length?(this._buffered-=k.length,this._buffers[0]=A.slice(k.length),k.func.call(this,A.slice(0,k.length))):(this._buffered-=A.length,this._buffers.shift(),k.func.call(this,A))},X.prototype._processRead=function(k){this._reads.shift();let A=0,M=0,H=Buffer.alloc(k.length);for(;A<k.length;){let B=this._buffers[M++],L=Math.min(B.length,k.length-A);B.copy(H,A,0,L),A+=L,L!==B.length&&(this._buffers[--M]=B.slice(L))}M>0&&this._buffers.splice(0,M),this._buffered-=k.length,k.func.call(this,H)},X.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let k=this._reads[0];if(k.allowLess)this._processReadAllowingLess(k);else if(this._buffered>=k.length)this._processRead(k);else break}this._buffers&&!this.writable&&this._end()}catch(k){this.emit("error",k)}}}),Ge=P(G=>{var Q=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];G.getImagePasses=function(Y,Z){let X=[],k=Y%8,A=Z%8,M=(Y-k)/8,H=(Z-A)/8;for(let B=0;B<Q.length;B++){let L=Q[B],N=M*L.x.length,F=H*L.y.length;for(let W=0;W<L.x.length&&L.x[W]<k;W++)N++;for(let W=0;W<L.y.length&&L.y[W]<A;W++)F++;N>0&&F>0&&X.push({width:N,height:F,index:B})}return X},G.getInterlaceIterator=function(Y){return function(Z,X,k){let A=Z%Q[k].x.length,M=(Z-A)/Q[k].x.length*8+Q[k].x[A],H=X%Q[k].y.length,B=(X-H)/Q[k].y.length*8+Q[k].y[H];return M*4+B*Y*4}}}),ot=P((G,Q)=>{Q.exports=function(Y,Z,X){let k=Y+Z-X,A=Math.abs(k-Y),M=Math.abs(k-Z),H=Math.abs(k-X);return A<=M&&A<=H?Y:M<=H?Z:X}}),dt=P((G,Q)=>{var Y=Ge(),Z=ot();function X(A,M,H){let B=A*M;return H!==8&&(B=Math.ceil(B/(8/H))),B}var k=Q.exports=function(A,M){let H=A.width,B=A.height,L=A.interlace,N=A.bpp,F=A.depth;if(this.read=M.read,this.write=M.write,this.complete=M.complete,this._imageIndex=0,this._images=[],L){let W=Y.getImagePasses(H,B);for(let re=0;re<W.length;re++)this._images.push({byteWidth:X(W[re].width,N,F),height:W[re].height,lineIndex:0})}else this._images.push({byteWidth:X(H,N,F),height:B,lineIndex:0});F===8?this._xComparison=N:F===16?this._xComparison=N*2:this._xComparison=1};k.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},k.prototype._unFilterType1=function(A,M,H){let B=this._xComparison,L=B-1;for(let N=0;N<H;N++){let F=A[1+N],W=N>L?M[N-B]:0;M[N]=F+W}},k.prototype._unFilterType2=function(A,M,H){let B=this._lastLine;for(let L=0;L<H;L++){let N=A[1+L],F=B?B[L]:0;M[L]=N+F}},k.prototype._unFilterType3=function(A,M,H){let B=this._xComparison,L=B-1,N=this._lastLine;for(let F=0;F<H;F++){let W=A[1+F],re=N?N[F]:0,ee=F>L?M[F-B]:0,ce=Math.floor((ee+re)/2);M[F]=W+ce}},k.prototype._unFilterType4=function(A,M,H){let B=this._xComparison,L=B-1,N=this._lastLine;for(let F=0;F<H;F++){let W=A[1+F],re=N?N[F]:0,ee=F>L?M[F-B]:0,ce=F>L&&N?N[F-B]:0,pe=Z(ee,re,ce);M[F]=W+pe}},k.prototype._reverseFilterLine=function(A){let M=A[0],H,B=this._images[this._imageIndex],L=B.byteWidth;if(M===0)H=A.slice(1,L+1);else switch(H=Buffer.alloc(L),M){case 1:this._unFilterType1(A,H,L);break;case 2:this._unFilterType2(A,H,L);break;case 3:this._unFilterType3(A,H,L);break;case 4:this._unFilterType4(A,H,L);break;default:throw new Error("Unrecognised filter type - "+M)}this.write(H),B.lineIndex++,B.lineIndex>=B.height?(this._lastLine=null,this._imageIndex++,B=this._images[this._imageIndex]):this._lastLine=H,B?this.read(B.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}),yt=P((G,Q)=>{var Y=Je,Z=qe(),X=dt(),k=Q.exports=function(A){Z.call(this);let M=[],H=this;this._filter=new X(A,{read:this.read.bind(this),write:function(B){M.push(B)},complete:function(){H.emit("complete",Buffer.concat(M))}}),this._filter.start()};Y.inherits(k,Z)}),nt=P((G,Q)=>{Q.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}}),gt=P((G,Q)=>{var Y=[];(function(){for(let X=0;X<256;X++){let k=X;for(let A=0;A<8;A++)k&1?k=3988292384^k>>>1:k=k>>>1;Y[X]=k}})();var Z=Q.exports=function(){this._crc=-1};Z.prototype.write=function(X){for(let k=0;k<X.length;k++)this._crc=Y[(this._crc^X[k])&255]^this._crc>>>8;return!0},Z.prototype.crc32=function(){return this._crc^-1},Z.crc32=function(X){let k=-1;for(let A=0;A<X.length;A++)k=Y[(k^X[A])&255]^k>>>8;return k^-1}}),Ut=P((G,Q)=>{var Y=nt(),Z=gt(),X=Q.exports=function(k,A){this._options=k,k.checkCRC=k.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[Y.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[Y.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[Y.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[Y.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[Y.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[Y.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=A.read,this.error=A.error,this.metadata=A.metadata,this.gamma=A.gamma,this.transColor=A.transColor,this.palette=A.palette,this.parsed=A.parsed,this.inflateData=A.inflateData,this.finished=A.finished,this.simpleTransparency=A.simpleTransparency,this.headersFinished=A.headersFinished||function(){}};X.prototype.start=function(){this.read(Y.PNG_SIGNATURE.length,this._parseSignature.bind(this))},X.prototype._parseSignature=function(k){let A=Y.PNG_SIGNATURE;for(let M=0;M<A.length;M++)if(k[M]!==A[M]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))},X.prototype._parseChunkBegin=function(k){let A=k.readUInt32BE(0),M=k.readUInt32BE(4),H="";for(let L=4;L<8;L++)H+=String.fromCharCode(k[L]);let B=!!(k[4]&32);if(!this._hasIHDR&&M!==Y.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new Z,this._crc.write(Buffer.from(H)),this._chunks[M])return this._chunks[M](A);if(!B){this.error(new Error("Unsupported critical chunk type "+H));return}this.read(A+4,this._skipChunk.bind(this))},X.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},X.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},X.prototype._parseChunkEnd=function(k){let A=k.readInt32BE(0),M=this._crc.crc32();if(this._options.checkCRC&&M!==A){this.error(new Error("Crc error - "+A+" - "+M));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},X.prototype._handleIHDR=function(k){this.read(k,this._parseIHDR.bind(this))},X.prototype._parseIHDR=function(k){this._crc.write(k);let A=k.readUInt32BE(0),M=k.readUInt32BE(4),H=k[8],B=k[9],L=k[10],N=k[11],F=k[12];if(H!==8&&H!==4&&H!==2&&H!==1&&H!==16){this.error(new Error("Unsupported bit depth "+H));return}if(!(B in Y.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(L!==0){this.error(new Error("Unsupported compression method"));return}if(N!==0){this.error(new Error("Unsupported filter method"));return}if(F!==0&&F!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=B;let W=Y.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:A,height:M,depth:H,interlace:!!F,palette:!!(B&Y.COLORTYPE_PALETTE),color:!!(B&Y.COLORTYPE_COLOR),alpha:!!(B&Y.COLORTYPE_ALPHA),bpp:W,colorType:B}),this._handleChunkEnd()},X.prototype._handlePLTE=function(k){this.read(k,this._parsePLTE.bind(this))},X.prototype._parsePLTE=function(k){this._crc.write(k);let A=Math.floor(k.length/3);for(let M=0;M<A;M++)this._palette.push([k[M*3],k[M*3+1],k[M*3+2],255]);this.palette(this._palette),this._handleChunkEnd()},X.prototype._handleTRNS=function(k){this.simpleTransparency(),this.read(k,this._parseTRNS.bind(this))},X.prototype._parseTRNS=function(k){if(this._crc.write(k),this._colorType===Y.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(k.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let A=0;A<k.length;A++)this._palette[A][3]=k[A];this.palette(this._palette)}this._colorType===Y.COLORTYPE_GRAYSCALE&&this.transColor([k.readUInt16BE(0)]),this._colorType===Y.COLORTYPE_COLOR&&this.transColor([k.readUInt16BE(0),k.readUInt16BE(2),k.readUInt16BE(4)]),this._handleChunkEnd()},X.prototype._handleGAMA=function(k){this.read(k,this._parseGAMA.bind(this))},X.prototype._parseGAMA=function(k){this._crc.write(k),this.gamma(k.readUInt32BE(0)/Y.GAMMA_DIVISION),this._handleChunkEnd()},X.prototype._handleIDAT=function(k){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-k,this._parseIDAT.bind(this,k))},X.prototype._parseIDAT=function(k,A){if(this._crc.write(A),this._colorType===Y.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(A);let M=k-A.length;M>0?this._handleIDAT(M):this._handleChunkEnd()},X.prototype._handleIEND=function(k){this.read(k,this._parseIEND.bind(this))},X.prototype._parseIEND=function(k){this._crc.write(k),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}),Xt=P(G=>{var Q=Ge(),Y=[function(){},function(M,H,B,L){if(L===H.length)throw new Error("Ran out of data");let N=H[L];M[B]=N,M[B+1]=N,M[B+2]=N,M[B+3]=255},function(M,H,B,L){if(L+1>=H.length)throw new Error("Ran out of data");let N=H[L];M[B]=N,M[B+1]=N,M[B+2]=N,M[B+3]=H[L+1]},function(M,H,B,L){if(L+2>=H.length)throw new Error("Ran out of data");M[B]=H[L],M[B+1]=H[L+1],M[B+2]=H[L+2],M[B+3]=255},function(M,H,B,L){if(L+3>=H.length)throw new Error("Ran out of data");M[B]=H[L],M[B+1]=H[L+1],M[B+2]=H[L+2],M[B+3]=H[L+3]}],Z=[function(){},function(M,H,B,L){let N=H[0];M[B]=N,M[B+1]=N,M[B+2]=N,M[B+3]=L},function(M,H,B){let L=H[0];M[B]=L,M[B+1]=L,M[B+2]=L,M[B+3]=H[1]},function(M,H,B,L){M[B]=H[0],M[B+1]=H[1],M[B+2]=H[2],M[B+3]=L},function(M,H,B){M[B]=H[0],M[B+1]=H[1],M[B+2]=H[2],M[B+3]=H[3]}];function X(M,H){let B=[],L=0;function N(){if(L===M.length)throw new Error("Ran out of data");let F=M[L];L++;let W,re,ee,ce,pe,K,se,ue;switch(H){default:throw new Error("unrecognised depth");case 16:se=M[L],L++,B.push((F<<8)+se);break;case 4:se=F&15,ue=F>>4,B.push(ue,se);break;case 2:pe=F&3,K=F>>2&3,se=F>>4&3,ue=F>>6&3,B.push(ue,se,K,pe);break;case 1:W=F&1,re=F>>1&1,ee=F>>2&1,ce=F>>3&1,pe=F>>4&1,K=F>>5&1,se=F>>6&1,ue=F>>7&1,B.push(ue,se,K,pe,ce,ee,re,W);break}}return{get:function(F){for(;B.length<F;)N();let W=B.slice(0,F);return B=B.slice(F),W},resetAfterLine:function(){B.length=0},end:function(){if(L!==M.length)throw new Error("extra data found")}}}function k(M,H,B,L,N,F){let W=M.width,re=M.height,ee=M.index;for(let ce=0;ce<re;ce++)for(let pe=0;pe<W;pe++){let K=B(pe,ce,ee);Y[L](H,N,K,F),F+=L}return F}function A(M,H,B,L,N,F){let W=M.width,re=M.height,ee=M.index;for(let ce=0;ce<re;ce++){for(let pe=0;pe<W;pe++){let K=N.get(L),se=B(pe,ce,ee);Z[L](H,K,se,F)}N.resetAfterLine()}}G.dataToBitMap=function(M,H){let B=H.width,L=H.height,N=H.depth,F=H.bpp,W=H.interlace,re;N!==8&&(re=X(M,N));let ee;N<=8?ee=Buffer.alloc(B*L*4):ee=new Uint16Array(B*L*4);let ce=Math.pow(2,N)-1,pe=0,K,se;if(W)K=Q.getImagePasses(B,L),se=Q.getInterlaceIterator(B,L);else{let ue=0;se=function(){let ae=ue;return ue+=4,ae},K=[{width:B,height:L}]}for(let ue=0;ue<K.length;ue++)N===8?pe=k(K[ue],ee,se,F,M,pe):A(K[ue],ee,se,F,re,ce);if(N===8){if(pe!==M.length)throw new Error("extra data found")}else re.end();return ee}}),st=P((G,Q)=>{function Y(k,A,M,H,B){let L=0;for(let N=0;N<H;N++)for(let F=0;F<M;F++){let W=B[k[L]];if(!W)throw new Error("index "+k[L]+" not in palette");for(let re=0;re<4;re++)A[L+re]=W[re];L+=4}}function Z(k,A,M,H,B){let L=0;for(let N=0;N<H;N++)for(let F=0;F<M;F++){let W=!1;if(B.length===1?B[0]===k[L]&&(W=!0):B[0]===k[L]&&B[1]===k[L+1]&&B[2]===k[L+2]&&(W=!0),W)for(let re=0;re<4;re++)A[L+re]=0;L+=4}}function X(k,A,M,H,B){let L=255,N=Math.pow(2,B)-1,F=0;for(let W=0;W<H;W++)for(let re=0;re<M;re++){for(let ee=0;ee<4;ee++)A[F+ee]=Math.floor(k[F+ee]*L/N+.5);F+=4}}Q.exports=function(k,A,M=!1){let H=A.depth,B=A.width,L=A.height,N=A.colorType,F=A.transColor,W=A.palette,re=k;return N===3?Y(k,re,B,L,W):(F&&Z(k,re,B,L,F),H!==8&&!M&&(H===16&&(re=Buffer.alloc(B*L*4)),X(k,re,B,L,H))),re}}),xe=P((G,Q)=>{var Y=Je,Z=Je,X=qe(),k=yt(),A=Ut(),M=Xt(),H=st(),B=Q.exports=function(L){X.call(this),this._parser=new A(L,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=L,this.writable=!0,this._parser.start()};Y.inherits(B,X),B.prototype._handleError=function(L){this.emit("error",L),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0},B.prototype._inflateData=function(L){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=Z.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let N=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,F=Math.max(N,Z.Z_MIN_CHUNK);this._inflate=Z.createInflate({chunkSize:F});let W=N,re=this.emit.bind(this,"error");this._inflate.on("error",function(ce){W&&re(ce)}),this._filter.on("complete",this._complete.bind(this));let ee=this._filter.write.bind(this._filter);this._inflate.on("data",function(ce){W&&(ce.length>W&&(ce=ce.slice(0,W)),W-=ce.length,ee(ce))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(L)},B.prototype._handleMetaData=function(L){this._metaData=L,this._bitmapInfo=Object.create(L),this._filter=new k(this._bitmapInfo)},B.prototype._handleTransColor=function(L){this._bitmapInfo.transColor=L},B.prototype._handlePalette=function(L){this._bitmapInfo.palette=L},B.prototype._simpleTransparency=function(){this._metaData.alpha=!0},B.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},B.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},B.prototype._complete=function(L){if(this.errord)return;let N;try{let F=M.dataToBitMap(L,this._bitmapInfo);N=H(F,this._bitmapInfo,this._options.skipRescale),F=null}catch(F){this._handleError(F);return}this.emit("parsed",N)}}),be=P((G,Q)=>{var Y=nt();Q.exports=function(Z,X,k,A){let M=[Y.COLORTYPE_COLOR_ALPHA,Y.COLORTYPE_ALPHA].indexOf(A.colorType)!==-1;if(A.colorType===A.inputColorType){let pe=function(){let K=new ArrayBuffer(2);return new DataView(K).setInt16(0,256,!0),new Int16Array(K)[0]!==256}();if(A.bitDepth===8||A.bitDepth===16&&pe)return Z}let H=A.bitDepth!==16?Z:new Uint16Array(Z.buffer),B=255,L=Y.COLORTYPE_TO_BPP_MAP[A.inputColorType];L===4&&!A.inputHasAlpha&&(L=3);let N=Y.COLORTYPE_TO_BPP_MAP[A.colorType];A.bitDepth===16&&(B=65535,N*=2);let F=Buffer.alloc(X*k*N),W=0,re=0,ee=A.bgColor||{};ee.red===void 0&&(ee.red=B),ee.green===void 0&&(ee.green=B),ee.blue===void 0&&(ee.blue=B);function ce(){let pe,K,se,ue=B;switch(A.inputColorType){case Y.COLORTYPE_COLOR_ALPHA:ue=H[W+3],pe=H[W],K=H[W+1],se=H[W+2];break;case Y.COLORTYPE_COLOR:pe=H[W],K=H[W+1],se=H[W+2];break;case Y.COLORTYPE_ALPHA:ue=H[W+1],pe=H[W],K=pe,se=pe;break;case Y.COLORTYPE_GRAYSCALE:pe=H[W],K=pe,se=pe;break;default:throw new Error("input color type:"+A.inputColorType+" is not supported at present")}return A.inputHasAlpha&&(M||(ue/=B,pe=Math.min(Math.max(Math.round((1-ue)*ee.red+ue*pe),0),B),K=Math.min(Math.max(Math.round((1-ue)*ee.green+ue*K),0),B),se=Math.min(Math.max(Math.round((1-ue)*ee.blue+ue*se),0),B))),{red:pe,green:K,blue:se,alpha:ue}}for(let pe=0;pe<k;pe++)for(let K=0;K<X;K++){let se=ce();switch(A.colorType){case Y.COLORTYPE_COLOR_ALPHA:case Y.COLORTYPE_COLOR:A.bitDepth===8?(F[re]=se.red,F[re+1]=se.green,F[re+2]=se.blue,M&&(F[re+3]=se.alpha)):(F.writeUInt16BE(se.red,re),F.writeUInt16BE(se.green,re+2),F.writeUInt16BE(se.blue,re+4),M&&F.writeUInt16BE(se.alpha,re+6));break;case Y.COLORTYPE_ALPHA:case Y.COLORTYPE_GRAYSCALE:{let ue=(se.red+se.green+se.blue)/3;A.bitDepth===8?(F[re]=ue,M&&(F[re+1]=se.alpha)):(F.writeUInt16BE(ue,re),M&&F.writeUInt16BE(se.alpha,re+2));break}default:throw new Error("unrecognised color Type "+A.colorType)}W+=L,re+=N}return F}}),ve=P((G,Q)=>{var Y=ot();function Z(ee,ce,pe,K,se){for(let ue=0;ue<pe;ue++)K[se+ue]=ee[ce+ue]}function X(ee,ce,pe){let K=0,se=ce+pe;for(let ue=ce;ue<se;ue++)K+=Math.abs(ee[ue]);return K}function k(ee,ce,pe,K,se,ue){for(let ae=0;ae<pe;ae++){let oe=ae>=ue?ee[ce+ae-ue]:0,fe=ee[ce+ae]-oe;K[se+ae]=fe}}function A(ee,ce,pe,K){let se=0;for(let ue=0;ue<pe;ue++){let ae=ue>=K?ee[ce+ue-K]:0,oe=ee[ce+ue]-ae;se+=Math.abs(oe)}return se}function M(ee,ce,pe,K,se){for(let ue=0;ue<pe;ue++){let ae=ce>0?ee[ce+ue-pe]:0,oe=ee[ce+ue]-ae;K[se+ue]=oe}}function H(ee,ce,pe){let K=0,se=ce+pe;for(let ue=ce;ue<se;ue++){let ae=ce>0?ee[ue-pe]:0,oe=ee[ue]-ae;K+=Math.abs(oe)}return K}function B(ee,ce,pe,K,se,ue){for(let ae=0;ae<pe;ae++){let oe=ae>=ue?ee[ce+ae-ue]:0,fe=ce>0?ee[ce+ae-pe]:0,we=ee[ce+ae]-(oe+fe>>1);K[se+ae]=we}}function L(ee,ce,pe,K){let se=0;for(let ue=0;ue<pe;ue++){let ae=ue>=K?ee[ce+ue-K]:0,oe=ce>0?ee[ce+ue-pe]:0,fe=ee[ce+ue]-(ae+oe>>1);se+=Math.abs(fe)}return se}function N(ee,ce,pe,K,se,ue){for(let ae=0;ae<pe;ae++){let oe=ae>=ue?ee[ce+ae-ue]:0,fe=ce>0?ee[ce+ae-pe]:0,we=ce>0&&ae>=ue?ee[ce+ae-(pe+ue)]:0,Ee=ee[ce+ae]-Y(oe,fe,we);K[se+ae]=Ee}}function F(ee,ce,pe,K){let se=0;for(let ue=0;ue<pe;ue++){let ae=ue>=K?ee[ce+ue-K]:0,oe=ce>0?ee[ce+ue-pe]:0,fe=ce>0&&ue>=K?ee[ce+ue-(pe+K)]:0,we=ee[ce+ue]-Y(ae,oe,fe);se+=Math.abs(we)}return se}var W={0:Z,1:k,2:M,3:B,4:N},re={0:X,1:A,2:H,3:L,4:F};Q.exports=function(ee,ce,pe,K,se){let ue;if(!("filterType"in K)||K.filterType===-1)ue=[0,1,2,3,4];else if(typeof K.filterType=="number")ue=[K.filterType];else throw new Error("unrecognised filter types");K.bitDepth===16&&(se*=2);let ae=ce*se,oe=0,fe=0,we=Buffer.alloc((ae+1)*pe),Ee=ue[0];for(let Ie=0;Ie<pe;Ie++){if(ue.length>1){let Ae=1/0;for(let He=0;He<ue.length;He++){let Fe=re[ue[He]](ee,fe,ae,se);Fe<Ae&&(Ee=ue[He],Ae=Fe)}}we[oe]=Ee,oe++,W[Ee](ee,fe,ae,we,oe,se),oe+=ae,fe+=ae}return we}}),Ce=P((G,Q)=>{var Y=nt(),Z=gt(),X=be(),k=ve(),A=Je,M=Q.exports=function(H){if(this._options=H,H.deflateChunkSize=H.deflateChunkSize||32*1024,H.deflateLevel=H.deflateLevel!=null?H.deflateLevel:9,H.deflateStrategy=H.deflateStrategy!=null?H.deflateStrategy:3,H.inputHasAlpha=H.inputHasAlpha!=null?H.inputHasAlpha:!0,H.deflateFactory=H.deflateFactory||A.createDeflate,H.bitDepth=H.bitDepth||8,H.colorType=typeof H.colorType=="number"?H.colorType:Y.COLORTYPE_COLOR_ALPHA,H.inputColorType=typeof H.inputColorType=="number"?H.inputColorType:Y.COLORTYPE_COLOR_ALPHA,[Y.COLORTYPE_GRAYSCALE,Y.COLORTYPE_COLOR,Y.COLORTYPE_COLOR_ALPHA,Y.COLORTYPE_ALPHA].indexOf(H.colorType)===-1)throw new Error("option color type:"+H.colorType+" is not supported at present");if([Y.COLORTYPE_GRAYSCALE,Y.COLORTYPE_COLOR,Y.COLORTYPE_COLOR_ALPHA,Y.COLORTYPE_ALPHA].indexOf(H.inputColorType)===-1)throw new Error("option input color type:"+H.inputColorType+" is not supported at present");if(H.bitDepth!==8&&H.bitDepth!==16)throw new Error("option bit depth:"+H.bitDepth+" is not supported at present")};M.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},M.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},M.prototype.filterData=function(H,B,L){let N=X(H,B,L,this._options),F=Y.COLORTYPE_TO_BPP_MAP[this._options.colorType];return k(N,B,L,this._options,F)},M.prototype._packChunk=function(H,B){let L=B?B.length:0,N=Buffer.alloc(L+12);return N.writeUInt32BE(L,0),N.writeUInt32BE(H,4),B&&B.copy(N,8),N.writeInt32BE(Z.crc32(N.slice(4,N.length-4)),N.length-4),N},M.prototype.packGAMA=function(H){let B=Buffer.alloc(4);return B.writeUInt32BE(Math.floor(H*Y.GAMMA_DIVISION),0),this._packChunk(Y.TYPE_gAMA,B)},M.prototype.packIHDR=function(H,B){let L=Buffer.alloc(13);return L.writeUInt32BE(H,0),L.writeUInt32BE(B,4),L[8]=this._options.bitDepth,L[9]=this._options.colorType,L[10]=0,L[11]=0,L[12]=0,this._packChunk(Y.TYPE_IHDR,L)},M.prototype.packIDAT=function(H){return this._packChunk(Y.TYPE_IDAT,H)},M.prototype.packIEND=function(){return this._packChunk(Y.TYPE_IEND,null)}}),Ke=P((G,Q)=>{var Y=Je,Z=Je,X=nt(),k=Ce(),A=Q.exports=function(M){Z.call(this);let H=M||{};this._packer=new k(H),this._deflate=this._packer.createDeflate(),this.readable=!0};Y.inherits(A,Z),A.prototype.pack=function(M,H,B,L){this.emit("data",Buffer.from(X.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(H,B)),L&&this.emit("data",this._packer.packGAMA(L));let N=this._packer.filterData(M,H,B);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(F){this.emit("data",this._packer.packIDAT(F))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(N)}}),ze=P((G,Q)=>{var Y=Je.ok,Z=Je,X=Je,k=Ns().kMaxLength;function A(N){if(!(this instanceof A))return new A(N);N&&N.chunkSize<Z.Z_MIN_CHUNK&&(N.chunkSize=Z.Z_MIN_CHUNK),Z.Inflate.call(this,N),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,N&&N.maxLength!=null&&(this._maxLength=N.maxLength)}function M(N){return new A(N)}function H(N,F){N._handle&&(N._handle.close(),N._handle=null)}A.prototype._processChunk=function(N,F,W){if(typeof W=="function")return Z.Inflate._processChunk.call(this,N,F,W);let re=this,ee=N&&N.length,ce=this._chunkSize-this._offset,pe=this._maxLength,K=0,se=[],ue=0,ae;this.on("error",function(Ee){ae=Ee});function oe(Ee,Ie){if(re._hadError)return;let Ae=ce-Ie;if(Y(Ae>=0,"have should not go down"),Ae>0){let He=re._buffer.slice(re._offset,re._offset+Ae);if(re._offset+=Ae,He.length>pe&&(He=He.slice(0,pe)),se.push(He),ue+=He.length,pe-=He.length,pe===0)return!1}return(Ie===0||re._offset>=re._chunkSize)&&(ce=re._chunkSize,re._offset=0,re._buffer=Buffer.allocUnsafe(re._chunkSize)),Ie===0?(K+=ee-Ee,ee=Ee,!0):!1}Y(this._handle,"zlib binding closed");let fe;do fe=this._handle.writeSync(F,N,K,ee,this._buffer,this._offset,ce),fe=fe||this._writeState;while(!this._hadError&&oe(fe[0],fe[1]));if(this._hadError)throw ae;if(ue>=k)throw H(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+k.toString(16)+" bytes");let we=Buffer.concat(se,ue);return H(this),we},X.inherits(A,Z.Inflate);function B(N,F){if(typeof F=="string"&&(F=Buffer.from(F)),!(F instanceof Buffer))throw new TypeError("Not a string or buffer");let W=N._finishFlushFlag;return W==null&&(W=Z.Z_FINISH),N._processChunk(F,W)}function L(N,F){return B(new A(F),N)}Q.exports=G=L,G.Inflate=A,G.createInflate=M,G.inflateSync=L}),Re=P((G,Q)=>{var Y=Q.exports=function(Z){this._buffer=Z,this._reads=[]};Y.prototype.read=function(Z,X){this._reads.push({length:Math.abs(Z),allowLess:Z<0,func:X})},Y.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let Z=this._reads[0];if(this._buffer.length&&(this._buffer.length>=Z.length||Z.allowLess)){this._reads.shift();let X=this._buffer;this._buffer=X.slice(Z.length),Z.func.call(this,X.slice(0,Z.length))}else break}if(this._reads.length>0)throw new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw new Error("unrecognised content at end of stream")}}),Be=P(G=>{var Q=Re(),Y=dt();G.process=function(Z,X){let k=[],A=new Q(Z);return new Y(X,{read:A.read.bind(A),write:function(M){k.push(M)},complete:function(){}}).start(),A.process(),Buffer.concat(k)}}),it=P((G,Q)=>{var Y=!0,Z=Je,X=ze();Z.deflateSync||(Y=!1);var k=Re(),A=Be(),M=Ut(),H=Xt(),B=st();Q.exports=function(L,N){if(!Y)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let F;function W(Fe){F=Fe}let re;function ee(Fe){re=Fe}function ce(Fe){re.transColor=Fe}function pe(Fe){re.palette=Fe}function K(){re.alpha=!0}let se;function ue(Fe){se=Fe}let ae=[];function oe(Fe){ae.push(Fe)}let fe=new k(L);if(new M(N,{read:fe.read.bind(fe),error:W,metadata:ee,gamma:ue,palette:pe,transColor:ce,inflateData:oe,simpleTransparency:K}).start(),fe.process(),F)throw F;let we=Buffer.concat(ae);ae.length=0;let Ee;if(re.interlace)Ee=Z.inflateSync(we);else{let Fe=((re.width*re.bpp*re.depth+7>>3)+1)*re.height;Ee=X(we,{chunkSize:Fe,maxLength:Fe})}if(we=null,!Ee||!Ee.length)throw new Error("bad png - invalid inflate data response");let Ie=A.process(Ee,re);we=null;let Ae=H.dataToBitMap(Ie,re);Ie=null;let He=B(Ae,re,N.skipRescale);return re.data=He,re.gamma=se||0,re}}),Qe=P((G,Q)=>{var Y=!0,Z=Je;Z.deflateSync||(Y=!1);var X=nt(),k=Ce();Q.exports=function(A,M){if(!Y)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let H=M||{},B=new k(H),L=[];L.push(Buffer.from(X.PNG_SIGNATURE)),L.push(B.packIHDR(A.width,A.height)),A.gamma&&L.push(B.packGAMA(A.gamma));let N=B.filterData(A.data,A.width,A.height),F=Z.deflateSync(N,B.getDeflateOptions());if(N=null,!F||!F.length)throw new Error("bad png - invalid compressed data response");return L.push(B.packIDAT(F)),L.push(B.packIEND()),Buffer.concat(L)}}),Et=P(G=>{var Q=it(),Y=Qe();G.read=function(Z,X){return Q(Z,X||{})},G.write=function(Z,X){return Y(Z,X)}}),pt=P(G=>{var Q=Je,Y=Je,Z=xe(),X=Ke(),k=Et(),A=G.PNG=function(M){Y.call(this),M=M||{},this.width=M.width|0,this.height=M.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,M.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Z(M),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(H){this.data=H,this.emit("parsed",H)}).bind(this)),this._packer=new X(M),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};Q.inherits(A,Y),A.sync=k,A.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)),this)},A.prototype.parse=function(M,H){if(H){let B,L;B=(function(N){this.removeListener("error",L),this.data=N,H(null,this)}).bind(this),L=(function(N){this.removeListener("parsed",B),H(N,null)}).bind(this),this.once("parsed",B),this.once("error",L)}return this.end(M),this},A.prototype.write=function(M){return this._parser.write(M),!0},A.prototype.end=function(M){this._parser.end(M)},A.prototype._metadata=function(M){this.width=M.width,this.height=M.height,this.emit("metadata",M)},A.prototype._gamma=function(M){this.gamma=M},A.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")},A.bitblt=function(M,H,B,L,N,F,W,re){if(B|=0,L|=0,N|=0,F|=0,W|=0,re|=0,B>M.width||L>M.height||B+N>M.width||L+F>M.height)throw new Error("bitblt reading outside image");if(W>H.width||re>H.height||W+N>H.width||re+F>H.height)throw new Error("bitblt writing outside image");for(let ee=0;ee<F;ee++)M.data.copy(H.data,(re+ee)*H.width+W<<2,(L+ee)*M.width+B<<2,(L+ee)*M.width+B+N<<2)},A.prototype.bitblt=function(M,H,B,L,N,F,W){return A.bitblt(this,M,H,B,L,N,F,W),this},A.adjustGamma=function(M){if(M.gamma){for(let H=0;H<M.height;H++)for(let B=0;B<M.width;B++){let L=M.width*H+B<<2;for(let N=0;N<3;N++){let F=M.data[L+N]/255;F=Math.pow(F,1/2.2/M.gamma),M.data[L+N]=Math.round(F*255)}}M.gamma=0}},A.prototype.adjustGamma=function(){A.adjustGamma(this)}}),Rt=P(G=>{var Q=class extends Error{constructor(Z,X,k){super(k),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=X,this.exitCode=Z,this.nestedError=void 0}},Y=class extends Q{constructor(Z){super(1,"commander.invalidArgument",Z),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};G.CommanderError=Q,G.InvalidArgumentError=Y}),Kt=P(G=>{var{InvalidArgumentError:Q}=Rt(),Y=class{constructor(X,k){switch(this.description=k||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,X[0]){case"<":this.required=!0,this._name=X.slice(1,-1);break;case"[":this.required=!1,this._name=X.slice(1,-1);break;default:this.required=!0,this._name=X;break}this._name.length>3&&this._name.slice(-3)==="..."&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(X,k){return k===this.defaultValue||!Array.isArray(k)?[X]:k.concat(X)}default(X,k){return this.defaultValue=X,this.defaultValueDescription=k,this}argParser(X){return this.parseArg=X,this}choices(X){return this.argChoices=X.slice(),this.parseArg=(k,A)=>{if(!this.argChoices.includes(k))throw new Q(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(k,A):k},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function Z(X){let k=X.name()+(X.variadic===!0?"...":"");return X.required?"<"+k+">":"["+k+"]"}G.Argument=Y,G.humanReadableArgName=Z}),Ve=P(G=>{var{humanReadableArgName:Q}=Kt(),Y=class{constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(X){var k,A;this.helpWidth=(A=(k=this.helpWidth)!=null?k:X.helpWidth)!=null?A:80}visibleCommands(X){let k=X.commands.filter(M=>!M._hidden),A=X._getHelpCommand();return A&&!A._hidden&&k.push(A),this.sortSubcommands&&k.sort((M,H)=>M.name().localeCompare(H.name())),k}compareOptions(X,k){let A=M=>M.short?M.short.replace(/^-/,""):M.long.replace(/^--/,"");return A(X).localeCompare(A(k))}visibleOptions(X){let k=X.options.filter(M=>!M.hidden),A=X._getHelpOption();if(A&&!A.hidden){let M=A.short&&X._findOption(A.short),H=A.long&&X._findOption(A.long);!M&&!H?k.push(A):A.long&&!H?k.push(X.createOption(A.long,A.description)):A.short&&!M&&k.push(X.createOption(A.short,A.description))}return this.sortOptions&&k.sort(this.compareOptions),k}visibleGlobalOptions(X){if(!this.showGlobalOptions)return[];let k=[];for(let A=X.parent;A;A=A.parent){let M=A.options.filter(H=>!H.hidden);k.push(...M)}return this.sortOptions&&k.sort(this.compareOptions),k}visibleArguments(X){return X._argsDescription&&X.registeredArguments.forEach(k=>{k.description=k.description||X._argsDescription[k.name()]||""}),X.registeredArguments.find(k=>k.description)?X.registeredArguments:[]}subcommandTerm(X){let k=X.registeredArguments.map(A=>Q(A)).join(" ");return X._name+(X._aliases[0]?"|"+X._aliases[0]:"")+(X.options.length?" [options]":"")+(k?" "+k:"")}optionTerm(X){return X.flags}argumentTerm(X){return X.name()}longestSubcommandTermLength(X,k){return k.visibleCommands(X).reduce((A,M)=>Math.max(A,this.displayWidth(k.styleSubcommandTerm(k.subcommandTerm(M)))),0)}longestOptionTermLength(X,k){return k.visibleOptions(X).reduce((A,M)=>Math.max(A,this.displayWidth(k.styleOptionTerm(k.optionTerm(M)))),0)}longestGlobalOptionTermLength(X,k){return k.visibleGlobalOptions(X).reduce((A,M)=>Math.max(A,this.displayWidth(k.styleOptionTerm(k.optionTerm(M)))),0)}longestArgumentTermLength(X,k){return k.visibleArguments(X).reduce((A,M)=>Math.max(A,this.displayWidth(k.styleArgumentTerm(k.argumentTerm(M)))),0)}commandUsage(X){let k=X._name;X._aliases[0]&&(k=k+"|"+X._aliases[0]);let A="";for(let M=X.parent;M;M=M.parent)A=M.name()+" "+A;return A+k+" "+X.usage()}commandDescription(X){return X.description()}subcommandDescription(X){return X.summary()||X.description()}optionDescription(X){let k=[];return X.argChoices&&k.push(`choices: ${X.argChoices.map(A=>JSON.stringify(A)).join(", ")}`),X.defaultValue!==void 0&&(X.required||X.optional||X.isBoolean()&&typeof X.defaultValue=="boolean")&&k.push(`default: ${X.defaultValueDescription||JSON.stringify(X.defaultValue)}`),X.presetArg!==void 0&&X.optional&&k.push(`preset: ${JSON.stringify(X.presetArg)}`),X.envVar!==void 0&&k.push(`env: ${X.envVar}`),k.length>0?`${X.description} (${k.join(", ")})`:X.description}argumentDescription(X){let k=[];if(X.argChoices&&k.push(`choices: ${X.argChoices.map(A=>JSON.stringify(A)).join(", ")}`),X.defaultValue!==void 0&&k.push(`default: ${X.defaultValueDescription||JSON.stringify(X.defaultValue)}`),k.length>0){let A=`(${k.join(", ")})`;return X.description?`${X.description} ${A}`:A}return X.description}formatHelp(X,k){var A;let M=k.padWidth(X,k),H=(A=k.helpWidth)!=null?A:80;function B(ee,ce){return k.formatItem(ee,M,ce,k)}let L=[`${k.styleTitle("Usage:")} ${k.styleUsage(k.commandUsage(X))}`,""],N=k.commandDescription(X);N.length>0&&(L=L.concat([k.boxWrap(k.styleCommandDescription(N),H),""]));let F=k.visibleArguments(X).map(ee=>B(k.styleArgumentTerm(k.argumentTerm(ee)),k.styleArgumentDescription(k.argumentDescription(ee))));F.length>0&&(L=L.concat([k.styleTitle("Arguments:"),...F,""]));let W=k.visibleOptions(X).map(ee=>B(k.styleOptionTerm(k.optionTerm(ee)),k.styleOptionDescription(k.optionDescription(ee))));if(W.length>0&&(L=L.concat([k.styleTitle("Options:"),...W,""])),k.showGlobalOptions){let ee=k.visibleGlobalOptions(X).map(ce=>B(k.styleOptionTerm(k.optionTerm(ce)),k.styleOptionDescription(k.optionDescription(ce))));ee.length>0&&(L=L.concat([k.styleTitle("Global Options:"),...ee,""]))}let re=k.visibleCommands(X).map(ee=>B(k.styleSubcommandTerm(k.subcommandTerm(ee)),k.styleSubcommandDescription(k.subcommandDescription(ee))));return re.length>0&&(L=L.concat([k.styleTitle("Commands:"),...re,""])),L.join(`
`)}displayWidth(X){return Z(X).length}styleTitle(X){return X}styleUsage(X){return X.split(" ").map(k=>k==="[options]"?this.styleOptionText(k):k==="[command]"?this.styleSubcommandText(k):k[0]==="["||k[0]==="<"?this.styleArgumentText(k):this.styleCommandText(k)).join(" ")}styleCommandDescription(X){return this.styleDescriptionText(X)}styleOptionDescription(X){return this.styleDescriptionText(X)}styleSubcommandDescription(X){return this.styleDescriptionText(X)}styleArgumentDescription(X){return this.styleDescriptionText(X)}styleDescriptionText(X){return X}styleOptionTerm(X){return this.styleOptionText(X)}styleSubcommandTerm(X){return X.split(" ").map(k=>k==="[options]"?this.styleOptionText(k):k[0]==="["||k[0]==="<"?this.styleArgumentText(k):this.styleSubcommandText(k)).join(" ")}styleArgumentTerm(X){return this.styleArgumentText(X)}styleOptionText(X){return X}styleArgumentText(X){return X}styleSubcommandText(X){return X}styleCommandText(X){return X}padWidth(X,k){return Math.max(k.longestOptionTermLength(X,k),k.longestGlobalOptionTermLength(X,k),k.longestSubcommandTermLength(X,k),k.longestArgumentTermLength(X,k))}preformatted(X){return/\n[^\S\r\n]/.test(X)}formatItem(X,k,A,M){var H;let B=" ".repeat(2);if(!A)return B+X;let L=X.padEnd(k+X.length-M.displayWidth(X)),N=2,F=((H=this.helpWidth)!=null?H:80)-k-N-2,W;return F<this.minWidthToWrap||M.preformatted(A)?W=A:W=M.boxWrap(A,F).replace(/\n/g,`
`+" ".repeat(k+N)),B+L+" ".repeat(N)+W.replace(/\n/g,`
${B}`)}boxWrap(X,k){if(k<this.minWidthToWrap)return X;let A=X.split(/\r\n|\n/),M=/[\s]*[^\s]+/g,H=[];return A.forEach(B=>{let L=B.match(M);if(L===null){H.push("");return}let N=[L.shift()],F=this.displayWidth(N[0]);L.forEach(W=>{let re=this.displayWidth(W);if(F+re<=k){N.push(W),F+=re;return}H.push(N.join(""));let ee=W.trimStart();N=[ee],F=this.displayWidth(ee)}),H.push(N.join(""))}),H.join(`
`)}};function Z(X){let k=/\x1b\[\d*(;\d*)*m/g;return X.replace(k,"")}G.Help=Y,G.stripColor=Z}),ct=P(G=>{var{InvalidArgumentError:Q}=Rt(),Y=class{constructor(A,M){this.flags=A,this.description=M||"",this.required=A.includes("<"),this.optional=A.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(A),this.mandatory=!1;let H=k(A);this.short=H.shortFlag,this.long=H.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(A,M){return this.defaultValue=A,this.defaultValueDescription=M,this}preset(A){return this.presetArg=A,this}conflicts(A){return this.conflictsWith=this.conflictsWith.concat(A),this}implies(A){let M=A;return typeof A=="string"&&(M={[A]:!0}),this.implied=Object.assign(this.implied||{},M),this}env(A){return this.envVar=A,this}argParser(A){return this.parseArg=A,this}makeOptionMandatory(A=!0){return this.mandatory=!!A,this}hideHelp(A=!0){return this.hidden=!!A,this}_concatValue(A,M){return M===this.defaultValue||!Array.isArray(M)?[A]:M.concat(A)}choices(A){return this.argChoices=A.slice(),this.parseArg=(M,H)=>{if(!this.argChoices.includes(M))throw new Q(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(M,H):M},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?X(this.name().replace(/^no-/,"")):X(this.name())}is(A){return this.short===A||this.long===A}isBoolean(){return!this.required&&!this.optional&&!this.negate}},Z=class{constructor(A){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,A.forEach(M=>{M.negate?this.negativeOptions.set(M.attributeName(),M):this.positiveOptions.set(M.attributeName(),M)}),this.negativeOptions.forEach((M,H)=>{this.positiveOptions.has(H)&&this.dualOptions.add(H)})}valueFromOption(A,M){let H=M.attributeName();if(!this.dualOptions.has(H))return!0;let B=this.negativeOptions.get(H).presetArg,L=B!==void 0?B:!1;return M.negate===(L===A)}};function X(A){return A.split("-").reduce((M,H)=>M+H[0].toUpperCase()+H.slice(1))}function k(A){let M,H,B=/^-[^-]$/,L=/^--[^-]/,N=A.split(/[ |,]+/).concat("guard");if(B.test(N[0])&&(M=N.shift()),L.test(N[0])&&(H=N.shift()),!M&&B.test(N[0])&&(M=N.shift()),!M&&L.test(N[0])&&(M=H,H=N.shift()),N[0].startsWith("-")){let F=N[0],W=`option creation failed due to '${F}' in option flags '${A}'`;throw/^-[^-][^-]/.test(F)?new Error(`${W}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`):B.test(F)?new Error(`${W}
- too many short flags`):L.test(F)?new Error(`${W}
- too many long flags`):new Error(`${W}
- unrecognised flag format`)}if(M===void 0&&H===void 0)throw new Error(`option creation failed due to no flags found in '${A}'.`);return{shortFlag:M,longFlag:H}}G.Option=Y,G.DualOptions=Z}),lt=P(G=>{function Q(Z,X){if(Math.abs(Z.length-X.length)>3)return Math.max(Z.length,X.length);let k=[];for(let A=0;A<=Z.length;A++)k[A]=[A];for(let A=0;A<=X.length;A++)k[0][A]=A;for(let A=1;A<=X.length;A++)for(let M=1;M<=Z.length;M++){let H=1;Z[M-1]===X[A-1]?H=0:H=1,k[M][A]=Math.min(k[M-1][A]+1,k[M][A-1]+1,k[M-1][A-1]+H),M>1&&A>1&&Z[M-1]===X[A-2]&&Z[M-2]===X[A-1]&&(k[M][A]=Math.min(k[M][A],k[M-2][A-2]+1))}return k[Z.length][X.length]}function Y(Z,X){if(!X||X.length===0)return"";X=Array.from(new Set(X));let k=Z.startsWith("--");k&&(Z=Z.slice(2),X=X.map(B=>B.slice(2)));let A=[],M=3,H=.4;return X.forEach(B=>{if(B.length<=1)return;let L=Q(Z,B),N=Math.max(Z.length,B.length);(N-L)/N>H&&(L<M?(M=L,A=[B]):L===M&&A.push(B))}),A.sort((B,L)=>B.localeCompare(L)),k&&(A=A.map(B=>`--${B}`)),A.length>1?`
(Did you mean one of ${A.join(", ")}?)`:A.length===1?`
(Did you mean ${A[0]}?)`:""}G.suggestSimilar=Y}),It=P(G=>{var Q=Je.EventEmitter,Y=Je,Z=Je,X=Je,k=Je,{Argument:A,humanReadableArgName:M}=Kt(),{CommanderError:H}=Rt(),{Help:B,stripColor:L}=Ve(),{Option:N,DualOptions:F}=ct(),{suggestSimilar:W}=lt(),re=class Fw extends Q{constructor(K){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=K||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:se=>k.stdout.write(se),writeErr:se=>k.stderr.write(se),outputError:(se,ue)=>ue(se),getOutHelpWidth:()=>k.stdout.isTTY?k.stdout.columns:void 0,getErrHelpWidth:()=>k.stderr.isTTY?k.stderr.columns:void 0,getOutHasColors:()=>{var se,ue,ae;return(ae=ce())!=null?ae:k.stdout.isTTY&&((ue=(se=k.stdout).hasColors)==null?void 0:ue.call(se))},getErrHasColors:()=>{var se,ue,ae;return(ae=ce())!=null?ae:k.stderr.isTTY&&((ue=(se=k.stderr).hasColors)==null?void 0:ue.call(se))},stripColor:se=>L(se)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={}}copyInheritedSettings(K){return this._outputConfiguration=K._outputConfiguration,this._helpOption=K._helpOption,this._helpCommand=K._helpCommand,this._helpConfiguration=K._helpConfiguration,this._exitCallback=K._exitCallback,this._storeOptionsAsProperties=K._storeOptionsAsProperties,this._combineFlagAndOptionalValue=K._combineFlagAndOptionalValue,this._allowExcessArguments=K._allowExcessArguments,this._enablePositionalOptions=K._enablePositionalOptions,this._showHelpAfterError=K._showHelpAfterError,this._showSuggestionAfterError=K._showSuggestionAfterError,this}_getCommandAndAncestors(){let K=[];for(let se=this;se;se=se.parent)K.push(se);return K}command(K,se,ue){let ae=se,oe=ue;typeof ae=="object"&&ae!==null&&(oe=ae,ae=null),oe=oe||{};let[,fe,we]=K.match(/([^ ]+) *(.*)/),Ee=this.createCommand(fe);return ae&&(Ee.description(ae),Ee._executableHandler=!0),oe.isDefault&&(this._defaultCommandName=Ee._name),Ee._hidden=!!(oe.noHelp||oe.hidden),Ee._executableFile=oe.executableFile||null,we&&Ee.arguments(we),this._registerCommand(Ee),Ee.parent=this,Ee.copyInheritedSettings(this),ae?this:Ee}createCommand(K){return new Fw(K)}createHelp(){return Object.assign(new B,this.configureHelp())}configureHelp(K){return K===void 0?this._helpConfiguration:(this._helpConfiguration=K,this)}configureOutput(K){return K===void 0?this._outputConfiguration:(Object.assign(this._outputConfiguration,K),this)}showHelpAfterError(K=!0){return typeof K!="string"&&(K=!!K),this._showHelpAfterError=K,this}showSuggestionAfterError(K=!0){return this._showSuggestionAfterError=!!K,this}addCommand(K,se){if(!K._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return se=se||{},se.isDefault&&(this._defaultCommandName=K._name),(se.noHelp||se.hidden)&&(K._hidden=!0),this._registerCommand(K),K.parent=this,K._checkForBrokenPassThrough(),this}createArgument(K,se){return new A(K,se)}argument(K,se,ue,ae){let oe=this.createArgument(K,se);return typeof ue=="function"?oe.default(ae).argParser(ue):oe.default(ue),this.addArgument(oe),this}arguments(K){return K.trim().split(/ +/).forEach(se=>{this.argument(se)}),this}addArgument(K){let se=this.registeredArguments.slice(-1)[0];if(se&&se.variadic)throw new Error(`only the last argument can be variadic '${se.name()}'`);if(K.required&&K.defaultValue!==void 0&&K.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${K.name()}'`);return this.registeredArguments.push(K),this}helpCommand(K,se){if(typeof K=="boolean")return this._addImplicitHelpCommand=K,this;K=K??"help [command]";let[,ue,ae]=K.match(/([^ ]+) *(.*)/),oe=se??"display help for command",fe=this.createCommand(ue);return fe.helpOption(!1),ae&&fe.arguments(ae),oe&&fe.description(oe),this._addImplicitHelpCommand=!0,this._helpCommand=fe,this}addHelpCommand(K,se){return typeof K!="object"?(this.helpCommand(K,se),this):(this._addImplicitHelpCommand=!0,this._helpCommand=K,this)}_getHelpCommand(){var K;return((K=this._addImplicitHelpCommand)!=null?K:this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(K,se){let ue=["preSubcommand","preAction","postAction"];if(!ue.includes(K))throw new Error(`Unexpected value for event passed to hook : '${K}'.
Expecting one of '${ue.join("', '")}'`);return this._lifeCycleHooks[K]?this._lifeCycleHooks[K].push(se):this._lifeCycleHooks[K]=[se],this}exitOverride(K){return K?this._exitCallback=K:this._exitCallback=se=>{if(se.code!=="commander.executeSubCommandAsync")throw se},this}_exit(K,se,ue){this._exitCallback&&this._exitCallback(new H(K,se,ue)),k.exit(K)}action(K){let se=ue=>{let ae=this.registeredArguments.length,oe=ue.slice(0,ae);return this._storeOptionsAsProperties?oe[ae]=this:oe[ae]=this.opts(),oe.push(this),K.apply(this,oe)};return this._actionHandler=se,this}createOption(K,se){return new N(K,se)}_callParseArg(K,se,ue,ae){try{return K.parseArg(se,ue)}catch(oe){if(oe.code==="commander.invalidArgument"){let fe=`${ae} ${oe.message}`;this.error(fe,{exitCode:oe.exitCode,code:oe.code})}throw oe}}_registerOption(K){let se=K.short&&this._findOption(K.short)||K.long&&this._findOption(K.long);if(se){let ue=K.long&&this._findOption(K.long)?K.long:K.short;throw new Error(`Cannot add option '${K.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${ue}'
-  already used by option '${se.flags}'`)}this.options.push(K)}_registerCommand(K){let se=ae=>[ae.name()].concat(ae.aliases()),ue=se(K).find(ae=>this._findCommand(ae));if(ue){let ae=se(this._findCommand(ue)).join("|"),oe=se(K).join("|");throw new Error(`cannot add command '${oe}' as already have command '${ae}'`)}this.commands.push(K)}addOption(K){this._registerOption(K);let se=K.name(),ue=K.attributeName();if(K.negate){let oe=K.long.replace(/^--no-/,"--");this._findOption(oe)||this.setOptionValueWithSource(ue,K.defaultValue===void 0?!0:K.defaultValue,"default")}else K.defaultValue!==void 0&&this.setOptionValueWithSource(ue,K.defaultValue,"default");let ae=(oe,fe,we)=>{oe==null&&K.presetArg!==void 0&&(oe=K.presetArg);let Ee=this.getOptionValue(ue);oe!==null&&K.parseArg?oe=this._callParseArg(K,oe,Ee,fe):oe!==null&&K.variadic&&(oe=K._concatValue(oe,Ee)),oe==null&&(K.negate?oe=!1:K.isBoolean()||K.optional?oe=!0:oe=""),this.setOptionValueWithSource(ue,oe,we)};return this.on("option:"+se,oe=>{let fe=`error: option '${K.flags}' argument '${oe}' is invalid.`;ae(oe,fe,"cli")}),K.envVar&&this.on("optionEnv:"+se,oe=>{let fe=`error: option '${K.flags}' value '${oe}' from env '${K.envVar}' is invalid.`;ae(oe,fe,"env")}),this}_optionEx(K,se,ue,ae,oe){if(typeof se=="object"&&se instanceof N)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let fe=this.createOption(se,ue);if(fe.makeOptionMandatory(!!K.mandatory),typeof ae=="function")fe.default(oe).argParser(ae);else if(ae instanceof RegExp){let we=ae;ae=(Ee,Ie)=>{let Ae=we.exec(Ee);return Ae?Ae[0]:Ie},fe.default(oe).argParser(ae)}else fe.default(ae);return this.addOption(fe)}option(K,se,ue,ae){return this._optionEx({},K,se,ue,ae)}requiredOption(K,se,ue,ae){return this._optionEx({mandatory:!0},K,se,ue,ae)}combineFlagAndOptionalValue(K=!0){return this._combineFlagAndOptionalValue=!!K,this}allowUnknownOption(K=!0){return this._allowUnknownOption=!!K,this}allowExcessArguments(K=!0){return this._allowExcessArguments=!!K,this}enablePositionalOptions(K=!0){return this._enablePositionalOptions=!!K,this}passThroughOptions(K=!0){return this._passThroughOptions=!!K,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(K=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!K,this}getOptionValue(K){return this._storeOptionsAsProperties?this[K]:this._optionValues[K]}setOptionValue(K,se){return this.setOptionValueWithSource(K,se,void 0)}setOptionValueWithSource(K,se,ue){return this._storeOptionsAsProperties?this[K]=se:this._optionValues[K]=se,this._optionValueSources[K]=ue,this}getOptionValueSource(K){return this._optionValueSources[K]}getOptionValueSourceWithGlobals(K){let se;return this._getCommandAndAncestors().forEach(ue=>{ue.getOptionValueSource(K)!==void 0&&(se=ue.getOptionValueSource(K))}),se}_prepareUserArgs(K,se){var ue,ae;if(K!==void 0&&!Array.isArray(K))throw new Error("first parameter to parse must be array or undefined");if(se=se||{},K===void 0&&se.from===void 0){(ue=k.versions)!=null&&ue.electron&&(se.from="electron");let fe=(ae=k.execArgv)!=null?ae:[];(fe.includes("-e")||fe.includes("--eval")||fe.includes("-p")||fe.includes("--print"))&&(se.from="eval")}K===void 0&&(K=k.argv),this.rawArgs=K.slice();let oe;switch(se.from){case void 0:case"node":this._scriptPath=K[1],oe=K.slice(2);break;case"electron":k.defaultApp?(this._scriptPath=K[1],oe=K.slice(2)):oe=K.slice(1);break;case"user":oe=K.slice(0);break;case"eval":oe=K.slice(1);break;default:throw new Error(`unexpected parse option { from: '${se.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",oe}parse(K,se){this._prepareForParse();let ue=this._prepareUserArgs(K,se);return this._parseCommand([],ue),this}async parseAsync(K,se){this._prepareForParse();let ue=this._prepareUserArgs(K,se);return await this._parseCommand([],ue),this}_prepareForParse(){this._savedState===null?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(K,se,ue){if(X.existsSync(K))return;let ae=se?`searched for local subcommand relative to directory '${se}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",oe=`'${K}' does not exist
 - if '${ue}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${ae}`;throw new Error(oe)}_executeSubCommand(K,se){se=se.slice();let ue=!1,ae=[".js",".ts",".tsx",".mjs",".cjs"];function oe(Ae,He){let Fe=Z.resolve(Ae,He);if(X.existsSync(Fe))return Fe;if(ae.includes(Z.extname(He)))return;let Ue=ae.find(et=>X.existsSync(`${Fe}${et}`));if(Ue)return`${Fe}${Ue}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let fe=K._executableFile||`${this._name}-${K._name}`,we=this._executableDir||"";if(this._scriptPath){let Ae;try{Ae=X.realpathSync(this._scriptPath)}catch{Ae=this._scriptPath}we=Z.resolve(Z.dirname(Ae),we)}if(we){let Ae=oe(we,fe);if(!Ae&&!K._executableFile&&this._scriptPath){let He=Z.basename(this._scriptPath,Z.extname(this._scriptPath));He!==this._name&&(Ae=oe(we,`${He}-${K._name}`))}fe=Ae||fe}ue=ae.includes(Z.extname(fe));let Ee;k.platform!=="win32"?ue?(se.unshift(fe),se=ee(k.execArgv).concat(se),Ee=Y.spawn(k.argv[0],se,{stdio:"inherit"})):Ee=Y.spawn(fe,se,{stdio:"inherit"}):(this._checkForMissingExecutable(fe,we,K._name),se.unshift(fe),se=ee(k.execArgv).concat(se),Ee=Y.spawn(k.execPath,se,{stdio:"inherit"})),Ee.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(Ae=>{k.on(Ae,()=>{Ee.killed===!1&&Ee.exitCode===null&&Ee.kill(Ae)})});let Ie=this._exitCallback;Ee.on("close",Ae=>{Ae=Ae??1,Ie?Ie(new H(Ae,"commander.executeSubCommandAsync","(close)")):k.exit(Ae)}),Ee.on("error",Ae=>{if(Ae.code==="ENOENT")this._checkForMissingExecutable(fe,we,K._name);else if(Ae.code==="EACCES")throw new Error(`'${fe}' not executable`);if(!Ie)k.exit(1);else{let He=new H(1,"commander.executeSubCommandAsync","(error)");He.nestedError=Ae,Ie(He)}}),this.runningCommand=Ee}_dispatchSubcommand(K,se,ue){let ae=this._findCommand(K);ae||this.help({error:!0}),ae._prepareForParse();let oe;return oe=this._chainOrCallSubCommandHook(oe,ae,"preSubcommand"),oe=this._chainOrCall(oe,()=>{if(ae._executableHandler)this._executeSubCommand(ae,se.concat(ue));else return ae._parseCommand(se,ue)}),oe}_dispatchHelpCommand(K){var se,ue,ae,oe;K||this.help();let fe=this._findCommand(K);return fe&&!fe._executableHandler&&fe.help(),this._dispatchSubcommand(K,[],[(oe=(ae=(se=this._getHelpOption())==null?void 0:se.long)!=null?ae:(ue=this._getHelpOption())==null?void 0:ue.short)!=null?oe:"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((K,se)=>{K.required&&this.args[se]==null&&this.missingArgument(K.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let K=(ue,ae,oe)=>{let fe=ae;if(ae!==null&&ue.parseArg){let we=`error: command-argument value '${ae}' is invalid for argument '${ue.name()}'.`;fe=this._callParseArg(ue,ae,oe,we)}return fe};this._checkNumberOfArguments();let se=[];this.registeredArguments.forEach((ue,ae)=>{let oe=ue.defaultValue;ue.variadic?ae<this.args.length?(oe=this.args.slice(ae),ue.parseArg&&(oe=oe.reduce((fe,we)=>K(ue,we,fe),ue.defaultValue))):oe===void 0&&(oe=[]):ae<this.args.length&&(oe=this.args[ae],ue.parseArg&&(oe=K(ue,oe,ue.defaultValue))),se[ae]=oe}),this.processedArgs=se}_chainOrCall(K,se){return K&&K.then&&typeof K.then=="function"?K.then(()=>se()):se()}_chainOrCallHooks(K,se){let ue=K,ae=[];return this._getCommandAndAncestors().reverse().filter(oe=>oe._lifeCycleHooks[se]!==void 0).forEach(oe=>{oe._lifeCycleHooks[se].forEach(fe=>{ae.push({hookedCommand:oe,callback:fe})})}),se==="postAction"&&ae.reverse(),ae.forEach(oe=>{ue=this._chainOrCall(ue,()=>oe.callback(oe.hookedCommand,this))}),ue}_chainOrCallSubCommandHook(K,se,ue){let ae=K;return this._lifeCycleHooks[ue]!==void 0&&this._lifeCycleHooks[ue].forEach(oe=>{ae=this._chainOrCall(ae,()=>oe(this,se))}),ae}_parseCommand(K,se){let ue=this.parseOptions(se);if(this._parseOptionsEnv(),this._parseOptionsImplied(),K=K.concat(ue.operands),se=ue.unknown,this.args=K.concat(se),K&&this._findCommand(K[0]))return this._dispatchSubcommand(K[0],K.slice(1),se);if(this._getHelpCommand()&&K[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(K[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(se),this._dispatchSubcommand(this._defaultCommandName,K,se);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(ue.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let ae=()=>{ue.unknown.length>0&&this.unknownOption(ue.unknown[0])},oe=`command:${this.name()}`;if(this._actionHandler){ae(),this._processArguments();let fe;return fe=this._chainOrCallHooks(fe,"preAction"),fe=this._chainOrCall(fe,()=>this._actionHandler(this.processedArgs)),this.parent&&(fe=this._chainOrCall(fe,()=>{this.parent.emit(oe,K,se)})),fe=this._chainOrCallHooks(fe,"postAction"),fe}if(this.parent&&this.parent.listenerCount(oe))ae(),this._processArguments(),this.parent.emit(oe,K,se);else if(K.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",K,se);this.listenerCount("command:*")?this.emit("command:*",K,se):this.commands.length?this.unknownCommand():(ae(),this._processArguments())}else this.commands.length?(ae(),this.help({error:!0})):(ae(),this._processArguments())}_findCommand(K){if(K)return this.commands.find(se=>se._name===K||se._aliases.includes(K))}_findOption(K){return this.options.find(se=>se.is(K))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(K=>{K.options.forEach(se=>{se.mandatory&&K.getOptionValue(se.attributeName())===void 0&&K.missingMandatoryOptionValue(se)})})}_checkForConflictingLocalOptions(){let K=this.options.filter(se=>{let ue=se.attributeName();return this.getOptionValue(ue)===void 0?!1:this.getOptionValueSource(ue)!=="default"});K.filter(se=>se.conflictsWith.length>0).forEach(se=>{let ue=K.find(ae=>se.conflictsWith.includes(ae.attributeName()));ue&&this._conflictingOption(se,ue)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(K=>{K._checkForConflictingLocalOptions()})}parseOptions(K){let se=[],ue=[],ae=se,oe=K.slice();function fe(Ee){return Ee.length>1&&Ee[0]==="-"}let we=null;for(;oe.length;){let Ee=oe.shift();if(Ee==="--"){ae===ue&&ae.push(Ee),ae.push(...oe);break}if(we&&!fe(Ee)){this.emit(`option:${we.name()}`,Ee);continue}if(we=null,fe(Ee)){let Ie=this._findOption(Ee);if(Ie){if(Ie.required){let Ae=oe.shift();Ae===void 0&&this.optionMissingArgument(Ie),this.emit(`option:${Ie.name()}`,Ae)}else if(Ie.optional){let Ae=null;oe.length>0&&!fe(oe[0])&&(Ae=oe.shift()),this.emit(`option:${Ie.name()}`,Ae)}else this.emit(`option:${Ie.name()}`);we=Ie.variadic?Ie:null;continue}}if(Ee.length>2&&Ee[0]==="-"&&Ee[1]!=="-"){let Ie=this._findOption(`-${Ee[1]}`);if(Ie){Ie.required||Ie.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${Ie.name()}`,Ee.slice(2)):(this.emit(`option:${Ie.name()}`),oe.unshift(`-${Ee.slice(2)}`));continue}}if(/^--[^=]+=/.test(Ee)){let Ie=Ee.indexOf("="),Ae=this._findOption(Ee.slice(0,Ie));if(Ae&&(Ae.required||Ae.optional)){this.emit(`option:${Ae.name()}`,Ee.slice(Ie+1));continue}}if(fe(Ee)&&(ae=ue),(this._enablePositionalOptions||this._passThroughOptions)&&se.length===0&&ue.length===0){if(this._findCommand(Ee)){se.push(Ee),oe.length>0&&ue.push(...oe);break}else if(this._getHelpCommand()&&Ee===this._getHelpCommand().name()){se.push(Ee),oe.length>0&&se.push(...oe);break}else if(this._defaultCommandName){ue.push(Ee),oe.length>0&&ue.push(...oe);break}}if(this._passThroughOptions){ae.push(Ee),oe.length>0&&ae.push(...oe);break}ae.push(Ee)}return{operands:se,unknown:ue}}opts(){if(this._storeOptionsAsProperties){let K={},se=this.options.length;for(let ue=0;ue<se;ue++){let ae=this.options[ue].attributeName();K[ae]=ae===this._versionOptionName?this._version:this[ae]}return K}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((K,se)=>Object.assign(K,se.opts()),{})}error(K,se){this._outputConfiguration.outputError(`${K}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let ue=se||{},ae=ue.exitCode||1,oe=ue.code||"commander.error";this._exit(ae,oe,K)}_parseOptionsEnv(){this.options.forEach(K=>{if(K.envVar&&K.envVar in k.env){let se=K.attributeName();(this.getOptionValue(se)===void 0||["default","config","env"].includes(this.getOptionValueSource(se)))&&(K.required||K.optional?this.emit(`optionEnv:${K.name()}`,k.env[K.envVar]):this.emit(`optionEnv:${K.name()}`))}})}_parseOptionsImplied(){let K=new F(this.options),se=ue=>this.getOptionValue(ue)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(ue));this.options.filter(ue=>ue.implied!==void 0&&se(ue.attributeName())&&K.valueFromOption(this.getOptionValue(ue.attributeName()),ue)).forEach(ue=>{Object.keys(ue.implied).filter(ae=>!se(ae)).forEach(ae=>{this.setOptionValueWithSource(ae,ue.implied[ae],"implied")})})}missingArgument(K){let se=`error: missing required argument '${K}'`;this.error(se,{code:"commander.missingArgument"})}optionMissingArgument(K){let se=`error: option '${K.flags}' argument missing`;this.error(se,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(K){let se=`error: required option '${K.flags}' not specified`;this.error(se,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(K,se){let ue=fe=>{let we=fe.attributeName(),Ee=this.getOptionValue(we),Ie=this.options.find(He=>He.negate&&we===He.attributeName()),Ae=this.options.find(He=>!He.negate&&we===He.attributeName());return Ie&&(Ie.presetArg===void 0&&Ee===!1||Ie.presetArg!==void 0&&Ee===Ie.presetArg)?Ie:Ae||fe},ae=fe=>{let we=ue(fe),Ee=we.attributeName();return this.getOptionValueSource(Ee)==="env"?`environment variable '${we.envVar}'`:`option '${we.flags}'`},oe=`error: ${ae(K)} cannot be used with ${ae(se)}`;this.error(oe,{code:"commander.conflictingOption"})}unknownOption(K){if(this._allowUnknownOption)return;let se="";if(K.startsWith("--")&&this._showSuggestionAfterError){let ae=[],oe=this;do{let fe=oe.createHelp().visibleOptions(oe).filter(we=>we.long).map(we=>we.long);ae=ae.concat(fe),oe=oe.parent}while(oe&&!oe._enablePositionalOptions);se=W(K,ae)}let ue=`error: unknown option '${K}'${se}`;this.error(ue,{code:"commander.unknownOption"})}_excessArguments(K){if(this._allowExcessArguments)return;let se=this.registeredArguments.length,ue=se===1?"":"s",ae=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${se} argument${ue} but got ${K.length}.`;this.error(ae,{code:"commander.excessArguments"})}unknownCommand(){let K=this.args[0],se="";if(this._showSuggestionAfterError){let ae=[];this.createHelp().visibleCommands(this).forEach(oe=>{ae.push(oe.name()),oe.alias()&&ae.push(oe.alias())}),se=W(K,ae)}let ue=`error: unknown command '${K}'${se}`;this.error(ue,{code:"commander.unknownCommand"})}version(K,se,ue){if(K===void 0)return this._version;this._version=K,se=se||"-V, --version",ue=ue||"output the version number";let ae=this.createOption(se,ue);return this._versionOptionName=ae.attributeName(),this._registerOption(ae),this.on("option:"+ae.name(),()=>{this._outputConfiguration.writeOut(`${K}
`),this._exit(0,"commander.version",K)}),this}description(K,se){return K===void 0&&se===void 0?this._description:(this._description=K,se&&(this._argsDescription=se),this)}summary(K){return K===void 0?this._summary:(this._summary=K,this)}alias(K){var se;if(K===void 0)return this._aliases[0];let ue=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(ue=this.commands[this.commands.length-1]),K===ue._name)throw new Error("Command alias can't be the same as its name");let ae=(se=this.parent)==null?void 0:se._findCommand(K);if(ae){let oe=[ae.name()].concat(ae.aliases()).join("|");throw new Error(`cannot add alias '${K}' to command '${this.name()}' as already have command '${oe}'`)}return ue._aliases.push(K),this}aliases(K){return K===void 0?this._aliases:(K.forEach(se=>this.alias(se)),this)}usage(K){if(K===void 0){if(this._usage)return this._usage;let se=this.registeredArguments.map(ue=>M(ue));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?se:[]).join(" ")}return this._usage=K,this}name(K){return K===void 0?this._name:(this._name=K,this)}nameFromFilename(K){return this._name=Z.basename(K,Z.extname(K)),this}executableDir(K){return K===void 0?this._executableDir:(this._executableDir=K,this)}helpInformation(K){let se=this.createHelp(),ue=this._getOutputContext(K);se.prepareContext({error:ue.error,helpWidth:ue.helpWidth,outputHasColors:ue.hasColors});let ae=se.formatHelp(this,se);return ue.hasColors?ae:this._outputConfiguration.stripColor(ae)}_getOutputContext(K){K=K||{};let se=!!K.error,ue,ae,oe;return se?(ue=fe=>this._outputConfiguration.writeErr(fe),ae=this._outputConfiguration.getErrHasColors(),oe=this._outputConfiguration.getErrHelpWidth()):(ue=fe=>this._outputConfiguration.writeOut(fe),ae=this._outputConfiguration.getOutHasColors(),oe=this._outputConfiguration.getOutHelpWidth()),{error:se,write:fe=>(ae||(fe=this._outputConfiguration.stripColor(fe)),ue(fe)),hasColors:ae,helpWidth:oe}}outputHelp(K){var se;let ue;typeof K=="function"&&(ue=K,K=void 0);let ae=this._getOutputContext(K),oe={error:ae.error,write:ae.write,command:this};this._getCommandAndAncestors().reverse().forEach(we=>we.emit("beforeAllHelp",oe)),this.emit("beforeHelp",oe);let fe=this.helpInformation({error:ae.error});if(ue&&(fe=ue(fe),typeof fe!="string"&&!Buffer.isBuffer(fe)))throw new Error("outputHelp callback must return a string or a Buffer");ae.write(fe),(se=this._getHelpOption())!=null&&se.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",oe),this._getCommandAndAncestors().forEach(we=>we.emit("afterAllHelp",oe))}helpOption(K,se){var ue;return typeof K=="boolean"?(K?this._helpOption=(ue=this._helpOption)!=null?ue:void 0:this._helpOption=null,this):(K=K??"-h, --help",se=se??"display help for command",this._helpOption=this.createOption(K,se),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(K){return this._helpOption=K,this}help(K){var se;this.outputHelp(K);let ue=Number((se=k.exitCode)!=null?se:0);ue===0&&K&&typeof K!="function"&&K.error&&(ue=1),this._exit(ue,"commander.help","(outputHelp)")}addHelpText(K,se){let ue=["beforeAll","before","after","afterAll"];if(!ue.includes(K))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${ue.join("', '")}'`);let ae=`${K}Help`;return this.on(ae,oe=>{let fe;typeof se=="function"?fe=se({error:oe.error,command:oe.command}):fe=se,fe&&oe.write(`${fe}
`)}),this}_outputHelpIfRequested(K){let se=this._getHelpOption();se&&K.find(ue=>se.is(ue))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function ee(pe){return pe.map(K=>{if(!K.startsWith("--inspect"))return K;let se,ue="127.0.0.1",ae="9229",oe;return(oe=K.match(/^(--inspect(-brk)?)$/))!==null?se=oe[1]:(oe=K.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(se=oe[1],/^\d+$/.test(oe[3])?ae=oe[3]:ue=oe[3]):(oe=K.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(se=oe[1],ue=oe[3],ae=oe[4]),se&&ae!=="0"?`${se}=${ue}:${parseInt(ae)+1}`:K})}function ce(){if(k.env.NO_COLOR||k.env.FORCE_COLOR==="0"||k.env.FORCE_COLOR==="false")return!1;if(k.env.FORCE_COLOR||k.env.CLICOLOR_FORCE!==void 0)return!0}G.Command=re,G.useColor=ce}),Bt=P(G=>{var{Argument:Q}=Kt(),{Command:Y}=It(),{CommanderError:Z,InvalidArgumentError:X}=Rt(),{Help:k}=Ve(),{Option:A}=ct();G.program=new Y,G.createCommand=M=>new Y(M),G.createOption=(M,H)=>new A(M,H),G.createArgument=(M,H)=>new Q(M,H),G.Command=Y,G.Option=A,G.Argument=Q,G.Help=k,G.CommanderError=Z,G.InvalidArgumentError=X,G.InvalidOptionArgumentError=X}),hr=P((G,Q)=>{Q.exports=Y;function Y(Z,X){if(this.stream=X.stream||process.stderr,typeof X=="number"){var k=X;X={},X.total=k}else{if(X=X||{},typeof Z!="string")throw new Error("format required");if(typeof X.total!="number")throw new Error("total required")}this.fmt=Z,this.curr=X.curr||0,this.total=X.total,this.width=X.width||this.total,this.clear=X.clear,this.chars={complete:X.complete||"=",incomplete:X.incomplete||"-",head:X.head||X.complete||"="},this.renderThrottle=X.renderThrottle!==0?X.renderThrottle||16:0,this.lastRender=-1/0,this.callback=X.callback||function(){},this.tokens={},this.lastDraw=""}Y.prototype.tick=function(Z,X){if(Z!==0&&(Z=Z||1),typeof Z=="object"&&(X=Z,Z=1),X&&(this.tokens=X),this.curr==0&&(this.start=new Date),this.curr+=Z,this.render(),this.curr>=this.total){this.render(void 0,!0),this.complete=!0,this.terminate(),this.callback(this);return}},Y.prototype.render=function(Z,X){if(X=X!==void 0?X:!1,Z&&(this.tokens=Z),!!this.stream.isTTY){var k=Date.now(),A=k-this.lastRender;if(!(!X&&A<this.renderThrottle)){this.lastRender=k;var M=this.curr/this.total;M=Math.min(Math.max(M,0),1);var H=Math.floor(M*100),B,L,N,F=new Date-this.start,W=H==100?0:F*(this.total/this.curr-1),re=this.curr/(F/1e3),ee=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(F)?"0.0":(F/1e3).toFixed(1)).replace(":eta",isNaN(W)||!isFinite(W)?"0.0":(W/1e3).toFixed(1)).replace(":percent",H.toFixed(0)+"%").replace(":rate",Math.round(re)),ce=Math.max(0,this.stream.columns-ee.replace(":bar","").length);ce&&process.platform==="win32"&&(ce=ce-1);var pe=Math.min(this.width,ce);if(N=Math.round(pe*M),L=Array(Math.max(0,N+1)).join(this.chars.complete),B=Array(Math.max(0,pe-N+1)).join(this.chars.incomplete),N>0&&(L=L.slice(0,-1)+this.chars.head),ee=ee.replace(":bar",L+B),this.tokens)for(var K in this.tokens)ee=ee.replace(":"+K,this.tokens[K]);this.lastDraw!==ee&&(this.stream.cursorTo(0),this.stream.write(ee),this.stream.clearLine(1),this.lastDraw=ee)}}},Y.prototype.update=function(Z,X){var k=Math.floor(Z*this.total),A=k-this.curr;this.tick(A,X)},Y.prototype.interrupt=function(Z){this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(Z),this.stream.write(`
`),this.stream.write(this.lastDraw)},Y.prototype.terminate=function(){this.clear?this.stream.clearLine&&(this.stream.clearLine(),this.stream.cursorTo(0)):this.stream.write(`
`)}}),ur=P((G,Q)=>{Q.exports=hr()}),Sr=P(G=>{Object.defineProperty(G,"__esModule",{value:!0});var Q=Ns(),Y={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};G.ERRORS=Y;function Z(N){if(!Q.Buffer.isEncoding(N))throw new Error(Y.INVALID_ENCODING)}G.checkEncoding=Z;function X(N){return typeof N=="number"&&isFinite(N)&&B(N)}G.isFiniteInteger=X;function k(N,F){if(typeof N=="number"){if(!X(N)||N<0)throw new Error(F?Y.INVALID_OFFSET:Y.INVALID_LENGTH)}else throw new Error(F?Y.INVALID_OFFSET_NON_NUMBER:Y.INVALID_LENGTH_NON_NUMBER)}function A(N){k(N,!1)}G.checkLengthValue=A;function M(N){k(N,!0)}G.checkOffsetValue=M;function H(N,F){if(N<0||N>F.length)throw new Error(Y.INVALID_TARGET_OFFSET)}G.checkTargetOffset=H;function B(N){return typeof N=="number"&&isFinite(N)&&Math.floor(N)===N}function L(N){if(typeof BigInt>"u")throw new Error("Platform does not support JS BigInt type.");if(typeof Q.Buffer.prototype[N]>"u")throw new Error(`Platform does not support Buffer.prototype.${N}.`)}G.bigIntAndBufferInt64Check=L}),Rr=P(G=>{Object.defineProperty(G,"__esModule",{value:!0});var Q=Sr(),Y=4096,Z="utf8",X=class Bw{constructor(A){if(this.length=0,this._encoding=Z,this._writeOffset=0,this._readOffset=0,Bw.isSmartBufferOptions(A))if(A.encoding&&(Q.checkEncoding(A.encoding),this._encoding=A.encoding),A.size)if(Q.isFiniteInteger(A.size)&&A.size>0)this._buff=Buffer.allocUnsafe(A.size);else throw new Error(Q.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(A.buff)if(Buffer.isBuffer(A.buff))this._buff=A.buff,this.length=A.buff.length;else throw new Error(Q.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(Y);else{if(typeof A<"u")throw new Error(Q.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(Y)}}static fromSize(A,M){return new this({size:A,encoding:M})}static fromBuffer(A,M){return new this({buff:A,encoding:M})}static fromOptions(A){return new this(A)}static isSmartBufferOptions(A){let M=A;return M&&(M.encoding!==void 0||M.size!==void 0||M.buff!==void 0)}readInt8(A){return this._readNumberValue(Buffer.prototype.readInt8,1,A)}readInt16BE(A){return this._readNumberValue(Buffer.prototype.readInt16BE,2,A)}readInt16LE(A){return this._readNumberValue(Buffer.prototype.readInt16LE,2,A)}readInt32BE(A){return this._readNumberValue(Buffer.prototype.readInt32BE,4,A)}readInt32LE(A){return this._readNumberValue(Buffer.prototype.readInt32LE,4,A)}readBigInt64BE(A){return Q.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,A)}readBigInt64LE(A){return Q.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,A)}writeInt8(A,M){return this._writeNumberValue(Buffer.prototype.writeInt8,1,A,M),this}insertInt8(A,M){return this._insertNumberValue(Buffer.prototype.writeInt8,1,A,M)}writeInt16BE(A,M){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,A,M)}insertInt16BE(A,M){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,A,M)}writeInt16LE(A,M){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,A,M)}insertInt16LE(A,M){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,A,M)}writeInt32BE(A,M){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,A,M)}insertInt32BE(A,M){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,A,M)}writeInt32LE(A,M){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,A,M)}insertInt32LE(A,M){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,A,M)}writeBigInt64BE(A,M){return Q.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,A,M)}insertBigInt64BE(A,M){return Q.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,A,M)}writeBigInt64LE(A,M){return Q.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,A,M)}insertBigInt64LE(A,M){return Q.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,A,M)}readUInt8(A){return this._readNumberValue(Buffer.prototype.readUInt8,1,A)}readUInt16BE(A){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,A)}readUInt16LE(A){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,A)}readUInt32BE(A){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,A)}readUInt32LE(A){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,A)}readBigUInt64BE(A){return Q.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,A)}readBigUInt64LE(A){return Q.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,A)}writeUInt8(A,M){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,A,M)}insertUInt8(A,M){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,A,M)}writeUInt16BE(A,M){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,A,M)}insertUInt16BE(A,M){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,A,M)}writeUInt16LE(A,M){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,A,M)}insertUInt16LE(A,M){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,A,M)}writeUInt32BE(A,M){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,A,M)}insertUInt32BE(A,M){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,A,M)}writeUInt32LE(A,M){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,A,M)}insertUInt32LE(A,M){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,A,M)}writeBigUInt64BE(A,M){return Q.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,A,M)}insertBigUInt64BE(A,M){return Q.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,A,M)}writeBigUInt64LE(A,M){return Q.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,A,M)}insertBigUInt64LE(A,M){return Q.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,A,M)}readFloatBE(A){return this._readNumberValue(Buffer.prototype.readFloatBE,4,A)}readFloatLE(A){return this._readNumberValue(Buffer.prototype.readFloatLE,4,A)}writeFloatBE(A,M){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,A,M)}insertFloatBE(A,M){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,A,M)}writeFloatLE(A,M){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,A,M)}insertFloatLE(A,M){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,A,M)}readDoubleBE(A){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,A)}readDoubleLE(A){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,A)}writeDoubleBE(A,M){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,A,M)}insertDoubleBE(A,M){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,A,M)}writeDoubleLE(A,M){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,A,M)}insertDoubleLE(A,M){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,A,M)}readString(A,M){let H;typeof A=="number"?(Q.checkLengthValue(A),H=Math.min(A,this.length-this._readOffset)):(M=A,H=this.length-this._readOffset),typeof M<"u"&&Q.checkEncoding(M);let B=this._buff.slice(this._readOffset,this._readOffset+H).toString(M||this._encoding);return this._readOffset+=H,B}insertString(A,M,H){return Q.checkOffsetValue(M),this._handleString(A,!0,M,H)}writeString(A,M,H){return this._handleString(A,!1,M,H)}readStringNT(A){typeof A<"u"&&Q.checkEncoding(A);let M=this.length;for(let B=this._readOffset;B<this.length;B++)if(this._buff[B]===0){M=B;break}let H=this._buff.slice(this._readOffset,M);return this._readOffset=M+1,H.toString(A||this._encoding)}insertStringNT(A,M,H){return Q.checkOffsetValue(M),this.insertString(A,M,H),this.insertUInt8(0,M+A.length),this}writeStringNT(A,M,H){return this.writeString(A,M,H),this.writeUInt8(0,typeof M=="number"?M+A.length:this.writeOffset),this}readBuffer(A){typeof A<"u"&&Q.checkLengthValue(A);let M=typeof A=="number"?A:this.length,H=Math.min(this.length,this._readOffset+M),B=this._buff.slice(this._readOffset,H);return this._readOffset=H,B}insertBuffer(A,M){return Q.checkOffsetValue(M),this._handleBuffer(A,!0,M)}writeBuffer(A,M){return this._handleBuffer(A,!1,M)}readBufferNT(){let A=this.length;for(let H=this._readOffset;H<this.length;H++)if(this._buff[H]===0){A=H;break}let M=this._buff.slice(this._readOffset,A);return this._readOffset=A+1,M}insertBufferNT(A,M){return Q.checkOffsetValue(M),this.insertBuffer(A,M),this.insertUInt8(0,M+A.length),this}writeBufferNT(A,M){return typeof M<"u"&&Q.checkOffsetValue(M),this.writeBuffer(A,M),this.writeUInt8(0,typeof M=="number"?M+A.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(A){Q.checkOffsetValue(A),Q.checkTargetOffset(A,this),this._readOffset=A}get writeOffset(){return this._writeOffset}set writeOffset(A){Q.checkOffsetValue(A),Q.checkTargetOffset(A,this),this._writeOffset=A}get encoding(){return this._encoding}set encoding(A){Q.checkEncoding(A),this._encoding=A}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(A){let M=typeof A=="string"?A:this._encoding;return Q.checkEncoding(M),this._buff.toString(M,0,this.length)}destroy(){return this.clear(),this}_handleString(A,M,H,B){let L=this._writeOffset,N=this._encoding;typeof H=="number"?L=H:typeof H=="string"&&(Q.checkEncoding(H),N=H),typeof B=="string"&&(Q.checkEncoding(B),N=B);let F=Buffer.byteLength(A,N);return M?this.ensureInsertable(F,L):this._ensureWriteable(F,L),this._buff.write(A,L,F,N),M?this._writeOffset+=F:typeof H=="number"?this._writeOffset=Math.max(this._writeOffset,L+F):this._writeOffset+=F,this}_handleBuffer(A,M,H){let B=typeof H=="number"?H:this._writeOffset;return M?this.ensureInsertable(A.length,B):this._ensureWriteable(A.length,B),A.copy(this._buff,B),M?this._writeOffset+=A.length:typeof H=="number"?this._writeOffset=Math.max(this._writeOffset,B+A.length):this._writeOffset+=A.length,this}ensureReadable(A,M){let H=this._readOffset;if(typeof M<"u"&&(Q.checkOffsetValue(M),H=M),H<0||H+A>this.length)throw new Error(Q.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(A,M){Q.checkOffsetValue(M),this._ensureCapacity(this.length+A),M<this.length&&this._buff.copy(this._buff,M+A,M,this._buff.length),M+A>this.length?this.length=M+A:this.length+=A}_ensureWriteable(A,M){let H=typeof M=="number"?M:this._writeOffset;this._ensureCapacity(H+A),H+A>this.length&&(this.length=H+A)}_ensureCapacity(A){let M=this._buff.length;if(A>M){let H=this._buff,B=M*3/2+1;B<A&&(B=A),this._buff=Buffer.allocUnsafe(B),H.copy(this._buff,0,0,M)}}_readNumberValue(A,M,H){this.ensureReadable(M,H);let B=A.call(this._buff,typeof H=="number"?H:this._readOffset);return typeof H>"u"&&(this._readOffset+=M),B}_insertNumberValue(A,M,H,B){return Q.checkOffsetValue(B),this.ensureInsertable(M,B),A.call(this._buff,H,B),this._writeOffset+=M,this}_writeNumberValue(A,M,H,B){if(typeof B=="number"){if(B<0)throw new Error(Q.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);Q.checkOffsetValue(B)}let L=typeof B=="number"?B:this._writeOffset;return this._ensureWriteable(M,L),A.call(this._buff,H,L),typeof B=="number"?this._writeOffset=Math.max(this._writeOffset,L+M):this._writeOffset+=M,this}};G.SmartBuffer=X}),On=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.SOCKS5_NO_ACCEPTABLE_AUTH=G.SOCKS5_CUSTOM_AUTH_END=G.SOCKS5_CUSTOM_AUTH_START=G.SOCKS_INCOMING_PACKET_SIZES=G.SocksClientState=G.Socks5Response=G.Socks5HostType=G.Socks5Auth=G.Socks4Response=G.SocksCommand=G.ERRORS=G.DEFAULT_TIMEOUT=void 0;var Q=3e4;G.DEFAULT_TIMEOUT=Q;var Y={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};G.ERRORS=Y;var Z={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:W=>W+7,Socks4Response:8};G.SOCKS_INCOMING_PACKET_SIZES=Z;var X;(function(W){W[W.connect=1]="connect",W[W.bind=2]="bind",W[W.associate=3]="associate"})(X||(G.SocksCommand=X={}));var k;(function(W){W[W.Granted=90]="Granted",W[W.Failed=91]="Failed",W[W.Rejected=92]="Rejected",W[W.RejectedIdent=93]="RejectedIdent"})(k||(G.Socks4Response=k={}));var A;(function(W){W[W.NoAuth=0]="NoAuth",W[W.GSSApi=1]="GSSApi",W[W.UserPass=2]="UserPass"})(A||(G.Socks5Auth=A={}));var M=128;G.SOCKS5_CUSTOM_AUTH_START=M;var H=254;G.SOCKS5_CUSTOM_AUTH_END=H;var B=255;G.SOCKS5_NO_ACCEPTABLE_AUTH=B;var L;(function(W){W[W.Granted=0]="Granted",W[W.Failure=1]="Failure",W[W.NotAllowed=2]="NotAllowed",W[W.NetworkUnreachable=3]="NetworkUnreachable",W[W.HostUnreachable=4]="HostUnreachable",W[W.ConnectionRefused=5]="ConnectionRefused",W[W.TTLExpired=6]="TTLExpired",W[W.CommandNotSupported=7]="CommandNotSupported",W[W.AddressNotSupported=8]="AddressNotSupported"})(L||(G.Socks5Response=L={}));var N;(function(W){W[W.IPv4=1]="IPv4",W[W.Hostname=3]="Hostname",W[W.IPv6=4]="IPv6"})(N||(G.Socks5HostType=N={}));var F;(function(W){W[W.Created=0]="Created",W[W.Connecting=1]="Connecting",W[W.Connected=2]="Connected",W[W.SentInitialHandshake=3]="SentInitialHandshake",W[W.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",W[W.SentAuthentication=5]="SentAuthentication",W[W.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",W[W.SentFinalHandshake=7]="SentFinalHandshake",W[W.ReceivedFinalResponse=8]="ReceivedFinalResponse",W[W.BoundWaitingForConnection=9]="BoundWaitingForConnection",W[W.Established=10]="Established",W[W.Disconnected=11]="Disconnected",W[W.Error=99]="Error"})(F||(G.SocksClientState=F={}))}),Pi=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.shuffleArray=G.SocksClientError=void 0;var Q=class extends Error{constructor(Z,X){super(Z),this.options=X}};G.SocksClientError=Q;function Y(Z){for(let X=Z.length-1;X>0;X--){let k=Math.floor(Math.random()*(X+1));[Z[X],Z[k]]=[Z[k],Z[X]]}}G.shuffleArray=Y}),Qn=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.isCorrect=G.isInSubnet=void 0;function Q(Z){return this.subnetMask<Z.subnetMask?!1:this.mask(Z.subnetMask)===Z.mask()}G.isInSubnet=Q;function Y(Z){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===Z&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}G.isCorrect=Y}),ki=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.RE_SUBNET_STRING=G.RE_ADDRESS=G.GROUPS=G.BITS=void 0,G.BITS=32,G.GROUPS=4,G.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,G.RE_SUBNET_STRING=/\/\d{1,2}$/}),qt=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.AddressError=void 0;var Q=class extends Error{constructor(Y,Z){super(Y),this.name="AddressError",Z!==null&&(this.parseMessage=Z)}};G.AddressError=Q}),pr=P((G,Q)=>{(function(){var Y,Z=0xdeadbeefcafe,X=(Z&16777215)==15715070;function k(Te,ke,De){Te!=null&&(typeof Te=="number"?this.fromNumber(Te,ke,De):ke==null&&typeof Te!="string"?this.fromString(Te,256):this.fromString(Te,ke))}function A(){return new k(null)}function M(Te,ke,De,Xe,wt,kt){for(;--kt>=0;){var zt=ke*this[Te++]+De[Xe]+wt;wt=Math.floor(zt/67108864),De[Xe++]=zt&67108863}return wt}function H(Te,ke,De,Xe,wt,kt){for(var zt=ke&32767,Yt=ke>>15;--kt>=0;){var Nr=this[Te]&32767,nn=this[Te++]>>15,An=Yt*Nr+nn*zt;Nr=zt*Nr+((An&32767)<<15)+De[Xe]+(wt&1073741823),wt=(Nr>>>30)+(An>>>15)+Yt*nn+(wt>>>30),De[Xe++]=Nr&1073741823}return wt}function B(Te,ke,De,Xe,wt,kt){for(var zt=ke&16383,Yt=ke>>14;--kt>=0;){var Nr=this[Te]&16383,nn=this[Te++]>>14,An=Yt*Nr+nn*zt;Nr=zt*Nr+((An&16383)<<14)+De[Xe]+wt,wt=(Nr>>28)+(An>>14)+Yt*nn,De[Xe++]=Nr&268435455}return wt}var L=typeof navigator<"u";L&&X&&navigator.appName=="Microsoft Internet Explorer"?(k.prototype.am=H,Y=30):L&&X&&navigator.appName!="Netscape"?(k.prototype.am=M,Y=26):(k.prototype.am=B,Y=28),k.prototype.DB=Y,k.prototype.DM=(1<<Y)-1,k.prototype.DV=1<<Y;var N=52;k.prototype.FV=Math.pow(2,N),k.prototype.F1=N-Y,k.prototype.F2=2*Y-N;var F="0123456789abcdefghijklmnopqrstuvwxyz",W=new Array,re,ee;for(re=48,ee=0;ee<=9;++ee)W[re++]=ee;for(re=97,ee=10;ee<36;++ee)W[re++]=ee;for(re=65,ee=10;ee<36;++ee)W[re++]=ee;function ce(Te){return F.charAt(Te)}function pe(Te,ke){var De=W[Te.charCodeAt(ke)];return De??-1}function K(Te){for(var ke=this.t-1;ke>=0;--ke)Te[ke]=this[ke];Te.t=this.t,Te.s=this.s}function se(Te){this.t=1,this.s=Te<0?-1:0,Te>0?this[0]=Te:Te<-1?this[0]=Te+this.DV:this.t=0}function ue(Te){var ke=A();return ke.fromInt(Te),ke}function ae(Te,ke){var De;if(ke==16)De=4;else if(ke==8)De=3;else if(ke==256)De=8;else if(ke==2)De=1;else if(ke==32)De=5;else if(ke==4)De=2;else{this.fromRadix(Te,ke);return}this.t=0,this.s=0;for(var Xe=Te.length,wt=!1,kt=0;--Xe>=0;){var zt=De==8?Te[Xe]&255:pe(Te,Xe);if(zt<0){Te.charAt(Xe)=="-"&&(wt=!0);continue}wt=!1,kt==0?this[this.t++]=zt:kt+De>this.DB?(this[this.t-1]|=(zt&(1<<this.DB-kt)-1)<<kt,this[this.t++]=zt>>this.DB-kt):this[this.t-1]|=zt<<kt,kt+=De,kt>=this.DB&&(kt-=this.DB)}De==8&&(Te[0]&128)!=0&&(this.s=-1,kt>0&&(this[this.t-1]|=(1<<this.DB-kt)-1<<kt)),this.clamp(),wt&&k.ZERO.subTo(this,this)}function oe(){for(var Te=this.s&this.DM;this.t>0&&this[this.t-1]==Te;)--this.t}function fe(Te){if(this.s<0)return"-"+this.negate().toString(Te);var ke;if(Te==16)ke=4;else if(Te==8)ke=3;else if(Te==2)ke=1;else if(Te==32)ke=5;else if(Te==4)ke=2;else return this.toRadix(Te);var De=(1<<ke)-1,Xe,wt=!1,kt="",zt=this.t,Yt=this.DB-zt*this.DB%ke;if(zt-- >0)for(Yt<this.DB&&(Xe=this[zt]>>Yt)>0&&(wt=!0,kt=ce(Xe));zt>=0;)Yt<ke?(Xe=(this[zt]&(1<<Yt)-1)<<ke-Yt,Xe|=this[--zt]>>(Yt+=this.DB-ke)):(Xe=this[zt]>>(Yt-=ke)&De,Yt<=0&&(Yt+=this.DB,--zt)),Xe>0&&(wt=!0),wt&&(kt+=ce(Xe));return wt?kt:"0"}function we(){var Te=A();return k.ZERO.subTo(this,Te),Te}function Ee(){return this.s<0?this.negate():this}function Ie(Te){var ke=this.s-Te.s;if(ke!=0)return ke;var De=this.t;if(ke=De-Te.t,ke!=0)return this.s<0?-ke:ke;for(;--De>=0;)if((ke=this[De]-Te[De])!=0)return ke;return 0}function Ae(Te){var ke=1,De;return(De=Te>>>16)!=0&&(Te=De,ke+=16),(De=Te>>8)!=0&&(Te=De,ke+=8),(De=Te>>4)!=0&&(Te=De,ke+=4),(De=Te>>2)!=0&&(Te=De,ke+=2),(De=Te>>1)!=0&&(Te=De,ke+=1),ke}function He(){return this.t<=0?0:this.DB*(this.t-1)+Ae(this[this.t-1]^this.s&this.DM)}function Fe(Te,ke){var De;for(De=this.t-1;De>=0;--De)ke[De+Te]=this[De];for(De=Te-1;De>=0;--De)ke[De]=0;ke.t=this.t+Te,ke.s=this.s}function Ue(Te,ke){for(var De=Te;De<this.t;++De)ke[De-Te]=this[De];ke.t=Math.max(this.t-Te,0),ke.s=this.s}function et(Te,ke){var De=Te%this.DB,Xe=this.DB-De,wt=(1<<Xe)-1,kt=Math.floor(Te/this.DB),zt=this.s<<De&this.DM,Yt;for(Yt=this.t-1;Yt>=0;--Yt)ke[Yt+kt+1]=this[Yt]>>Xe|zt,zt=(this[Yt]&wt)<<De;for(Yt=kt-1;Yt>=0;--Yt)ke[Yt]=0;ke[kt]=zt,ke.t=this.t+kt+1,ke.s=this.s,ke.clamp()}function ft(Te,ke){ke.s=this.s;var De=Math.floor(Te/this.DB);if(De>=this.t){ke.t=0;return}var Xe=Te%this.DB,wt=this.DB-Xe,kt=(1<<Xe)-1;ke[0]=this[De]>>Xe;for(var zt=De+1;zt<this.t;++zt)ke[zt-De-1]|=(this[zt]&kt)<<wt,ke[zt-De]=this[zt]>>Xe;Xe>0&&(ke[this.t-De-1]|=(this.s&kt)<<wt),ke.t=this.t-De,ke.clamp()}function ht(Te,ke){for(var De=0,Xe=0,wt=Math.min(Te.t,this.t);De<wt;)Xe+=this[De]-Te[De],ke[De++]=Xe&this.DM,Xe>>=this.DB;if(Te.t<this.t){for(Xe-=Te.s;De<this.t;)Xe+=this[De],ke[De++]=Xe&this.DM,Xe>>=this.DB;Xe+=this.s}else{for(Xe+=this.s;De<Te.t;)Xe-=Te[De],ke[De++]=Xe&this.DM,Xe>>=this.DB;Xe-=Te.s}ke.s=Xe<0?-1:0,Xe<-1?ke[De++]=this.DV+Xe:Xe>0&&(ke[De++]=Xe),ke.t=De,ke.clamp()}function Tt(Te,ke){var De=this.abs(),Xe=Te.abs(),wt=De.t;for(ke.t=wt+Xe.t;--wt>=0;)ke[wt]=0;for(wt=0;wt<Xe.t;++wt)ke[wt+De.t]=De.am(0,Xe[wt],ke,wt,0,De.t);ke.s=0,ke.clamp(),this.s!=Te.s&&k.ZERO.subTo(ke,ke)}function vt(Te){for(var ke=this.abs(),De=Te.t=2*ke.t;--De>=0;)Te[De]=0;for(De=0;De<ke.t-1;++De){var Xe=ke.am(De,ke[De],Te,2*De,0,1);(Te[De+ke.t]+=ke.am(De+1,2*ke[De],Te,2*De+1,Xe,ke.t-De-1))>=ke.DV&&(Te[De+ke.t]-=ke.DV,Te[De+ke.t+1]=1)}Te.t>0&&(Te[Te.t-1]+=ke.am(De,ke[De],Te,2*De,0,1)),Te.s=0,Te.clamp()}function Ot(Te,ke,De){var Xe=Te.abs();if(!(Xe.t<=0)){var wt=this.abs();if(wt.t<Xe.t){ke!=null&&ke.fromInt(0),De!=null&&this.copyTo(De);return}De==null&&(De=A());var kt=A(),zt=this.s,Yt=Te.s,Nr=this.DB-Ae(Xe[Xe.t-1]);Nr>0?(Xe.lShiftTo(Nr,kt),wt.lShiftTo(Nr,De)):(Xe.copyTo(kt),wt.copyTo(De));var nn=kt.t,An=kt[nn-1];if(An!=0){var Cn=An*(1<<this.F1)+(nn>1?kt[nn-2]>>this.F2:0),ii=this.FV/Cn,Za=(1<<this.F1)/Cn,Bn=1<<this.F2,jn=De.t,eo=jn-nn,gi=ke??A();for(kt.dlShiftTo(eo,gi),De.compareTo(gi)>=0&&(De[De.t++]=1,De.subTo(gi,De)),k.ONE.dlShiftTo(nn,gi),gi.subTo(kt,kt);kt.t<nn;)kt[kt.t++]=0;for(;--eo>=0;){var xc=De[--jn]==An?this.DM:Math.floor(De[jn]*ii+(De[jn-1]+Bn)*Za);if((De[jn]+=kt.am(0,xc,De,eo,0,nn))<xc)for(kt.dlShiftTo(eo,gi),De.subTo(gi,De);De[jn]<--xc;)De.subTo(gi,De)}ke!=null&&(De.drShiftTo(nn,ke),zt!=Yt&&k.ZERO.subTo(ke,ke)),De.t=nn,De.clamp(),Nr>0&&De.rShiftTo(Nr,De),zt<0&&k.ZERO.subTo(De,De)}}}function Mt(Te){var ke=A();return this.abs().divRemTo(Te,null,ke),this.s<0&&ke.compareTo(k.ZERO)>0&&Te.subTo(ke,ke),ke}function Ct(Te){this.m=Te}function Ft(Te){return Te.s<0||Te.compareTo(this.m)>=0?Te.mod(this.m):Te}function vr(Te){return Te}function gr(Te){Te.divRemTo(this.m,null,Te)}function mt(Te,ke,De){Te.multiplyTo(ke,De),this.reduce(De)}function bt(Te,ke){Te.squareTo(ke),this.reduce(ke)}Ct.prototype.convert=Ft,Ct.prototype.revert=vr,Ct.prototype.reduce=gr,Ct.prototype.mulTo=mt,Ct.prototype.sqrTo=bt;function Wt(){if(this.t<1)return 0;var Te=this[0];if((Te&1)==0)return 0;var ke=Te&3;return ke=ke*(2-(Te&15)*ke)&15,ke=ke*(2-(Te&255)*ke)&255,ke=ke*(2-((Te&65535)*ke&65535))&65535,ke=ke*(2-Te*ke%this.DV)%this.DV,ke>0?this.DV-ke:-ke}function Pt(Te){this.m=Te,this.mp=Te.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<Te.DB-15)-1,this.mt2=2*Te.t}function Qt(Te){var ke=A();return Te.abs().dlShiftTo(this.m.t,ke),ke.divRemTo(this.m,null,ke),Te.s<0&&ke.compareTo(k.ZERO)>0&&this.m.subTo(ke,ke),ke}function sr(Te){var ke=A();return Te.copyTo(ke),this.reduce(ke),ke}function Gt(Te){for(;Te.t<=this.mt2;)Te[Te.t++]=0;for(var ke=0;ke<this.m.t;++ke){var De=Te[ke]&32767,Xe=De*this.mpl+((De*this.mph+(Te[ke]>>15)*this.mpl&this.um)<<15)&Te.DM;for(De=ke+this.m.t,Te[De]+=this.m.am(0,Xe,Te,ke,0,this.m.t);Te[De]>=Te.DV;)Te[De]-=Te.DV,Te[++De]++}Te.clamp(),Te.drShiftTo(this.m.t,Te),Te.compareTo(this.m)>=0&&Te.subTo(this.m,Te)}function ir(Te,ke){Te.squareTo(ke),this.reduce(ke)}function Ht(Te,ke,De){Te.multiplyTo(ke,De),this.reduce(De)}Pt.prototype.convert=Qt,Pt.prototype.revert=sr,Pt.prototype.reduce=Gt,Pt.prototype.mulTo=Ht,Pt.prototype.sqrTo=ir;function _t(){return(this.t>0?this[0]&1:this.s)==0}function Ze(Te,ke){if(Te>4294967295||Te<1)return k.ONE;var De=A(),Xe=A(),wt=ke.convert(this),kt=Ae(Te)-1;for(wt.copyTo(De);--kt>=0;)if(ke.sqrTo(De,Xe),(Te&1<<kt)>0)ke.mulTo(Xe,wt,De);else{var zt=De;De=Xe,Xe=zt}return ke.revert(De)}function tt(Te,ke){var De;return Te<256||ke.isEven()?De=new Ct(ke):De=new Pt(ke),this.exp(Te,De)}k.prototype.copyTo=K,k.prototype.fromInt=se,k.prototype.fromString=ae,k.prototype.clamp=oe,k.prototype.dlShiftTo=Fe,k.prototype.drShiftTo=Ue,k.prototype.lShiftTo=et,k.prototype.rShiftTo=ft,k.prototype.subTo=ht,k.prototype.multiplyTo=Tt,k.prototype.squareTo=vt,k.prototype.divRemTo=Ot,k.prototype.invDigit=Wt,k.prototype.isEven=_t,k.prototype.exp=Ze,k.prototype.toString=fe,k.prototype.negate=we,k.prototype.abs=Ee,k.prototype.compareTo=Ie,k.prototype.bitLength=He,k.prototype.mod=Mt,k.prototype.modPowInt=tt,k.ZERO=ue(0),k.ONE=ue(1);function St(){var Te=A();return this.copyTo(Te),Te}function Zt(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ye(){return this.t==0?this.s:this[0]<<24>>24}function $t(){return this.t==0?this.s:this[0]<<16>>16}function rr(Te){return Math.floor(Math.LN2*this.DB/Math.log(Te))}function tr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function ar(Te){if(Te==null&&(Te=10),this.signum()==0||Te<2||Te>36)return"0";var ke=this.chunkSize(Te),De=Math.pow(Te,ke),Xe=ue(De),wt=A(),kt=A(),zt="";for(this.divRemTo(Xe,wt,kt);wt.signum()>0;)zt=(De+kt.intValue()).toString(Te).substr(1)+zt,wt.divRemTo(Xe,wt,kt);return kt.intValue().toString(Te)+zt}function br(Te,ke){this.fromInt(0),ke==null&&(ke=10);for(var De=this.chunkSize(ke),Xe=Math.pow(ke,De),wt=!1,kt=0,zt=0,Yt=0;Yt<Te.length;++Yt){var Nr=pe(Te,Yt);if(Nr<0){Te.charAt(Yt)=="-"&&this.signum()==0&&(wt=!0);continue}zt=ke*zt+Nr,++kt>=De&&(this.dMultiply(Xe),this.dAddOffset(zt,0),kt=0,zt=0)}kt>0&&(this.dMultiply(Math.pow(ke,kt)),this.dAddOffset(zt,0)),wt&&k.ZERO.subTo(this,this)}function Vt(Te,ke,De){if(typeof ke=="number")if(Te<2)this.fromInt(1);else for(this.fromNumber(Te,De),this.testBit(Te-1)||this.bitwiseTo(k.ONE.shiftLeft(Te-1),fr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(ke);)this.dAddOffset(2,0),this.bitLength()>Te&&this.subTo(k.ONE.shiftLeft(Te-1),this);else{var Xe=new Array,wt=Te&7;Xe.length=(Te>>3)+1,ke.nextBytes(Xe),wt>0?Xe[0]&=(1<<wt)-1:Xe[0]=0,this.fromString(Xe,256)}}function Jt(){var Te=this.t,ke=new Array;ke[0]=this.s;var De=this.DB-Te*this.DB%8,Xe,wt=0;if(Te-- >0)for(De<this.DB&&(Xe=this[Te]>>De)!=(this.s&this.DM)>>De&&(ke[wt++]=Xe|this.s<<this.DB-De);Te>=0;)De<8?(Xe=(this[Te]&(1<<De)-1)<<8-De,Xe|=this[--Te]>>(De+=this.DB-8)):(Xe=this[Te]>>(De-=8)&255,De<=0&&(De+=this.DB,--Te)),(Xe&128)!=0&&(Xe|=-256),wt==0&&(this.s&128)!=(Xe&128)&&++wt,(wt>0||Xe!=this.s)&&(ke[wt++]=Xe);return ke}function er(Te){return this.compareTo(Te)==0}function _r(Te){return this.compareTo(Te)<0?this:Te}function Nt(Te){return this.compareTo(Te)>0?this:Te}function jt(Te,ke,De){var Xe,wt,kt=Math.min(Te.t,this.t);for(Xe=0;Xe<kt;++Xe)De[Xe]=ke(this[Xe],Te[Xe]);if(Te.t<this.t){for(wt=Te.s&this.DM,Xe=kt;Xe<this.t;++Xe)De[Xe]=ke(this[Xe],wt);De.t=this.t}else{for(wt=this.s&this.DM,Xe=kt;Xe<Te.t;++Xe)De[Xe]=ke(wt,Te[Xe]);De.t=Te.t}De.s=ke(this.s,Te.s),De.clamp()}function or(Te,ke){return Te&ke}function yr(Te){var ke=A();return this.bitwiseTo(Te,or,ke),ke}function fr(Te,ke){return Te|ke}function Cr(Te){var ke=A();return this.bitwiseTo(Te,fr,ke),ke}function Lr(Te,ke){return Te^ke}function zr(Te){var ke=A();return this.bitwiseTo(Te,Lr,ke),ke}function jr(Te,ke){return Te&~ke}function Hr(Te){var ke=A();return this.bitwiseTo(Te,jr,ke),ke}function wn(){for(var Te=A(),ke=0;ke<this.t;++ke)Te[ke]=this.DM&~this[ke];return Te.t=this.t,Te.s=~this.s,Te}function ns(Te){var ke=A();return Te<0?this.rShiftTo(-Te,ke):this.lShiftTo(Te,ke),ke}function ei(Te){var ke=A();return Te<0?this.lShiftTo(-Te,ke):this.rShiftTo(Te,ke),ke}function mi(Te){if(Te==0)return-1;var ke=0;return(Te&65535)==0&&(Te>>=16,ke+=16),(Te&255)==0&&(Te>>=8,ke+=8),(Te&15)==0&&(Te>>=4,ke+=4),(Te&3)==0&&(Te>>=2,ke+=2),(Te&1)==0&&++ke,ke}function ti(){for(var Te=0;Te<this.t;++Te)if(this[Te]!=0)return Te*this.DB+mi(this[Te]);return this.s<0?this.t*this.DB:-1}function ri(Te){for(var ke=0;Te!=0;)Te&=Te-1,++ke;return ke}function Mi(){for(var Te=0,ke=this.s&this.DM,De=0;De<this.t;++De)Te+=ri(this[De]^ke);return Te}function La(Te){var ke=Math.floor(Te/this.DB);return ke>=this.t?this.s!=0:(this[ke]&1<<Te%this.DB)!=0}function Da(Te,ke){var De=k.ONE.shiftLeft(Te);return this.bitwiseTo(De,ke,De),De}function Ma(Te){return this.changeBit(Te,fr)}function Fa(Te){return this.changeBit(Te,jr)}function Ba(Te){return this.changeBit(Te,Lr)}function ja(Te,ke){for(var De=0,Xe=0,wt=Math.min(Te.t,this.t);De<wt;)Xe+=this[De]+Te[De],ke[De++]=Xe&this.DM,Xe>>=this.DB;if(Te.t<this.t){for(Xe+=Te.s;De<this.t;)Xe+=this[De],ke[De++]=Xe&this.DM,Xe>>=this.DB;Xe+=this.s}else{for(Xe+=this.s;De<Te.t;)Xe+=Te[De],ke[De++]=Xe&this.DM,Xe>>=this.DB;Xe+=Te.s}ke.s=Xe<0?-1:0,Xe>0?ke[De++]=Xe:Xe<-1&&(ke[De++]=this.DV+Xe),ke.t=De,ke.clamp()}function Ha(Te){var ke=A();return this.addTo(Te,ke),ke}function Cs(Te){var ke=A();return this.subTo(Te,ke),ke}function Ua(Te){var ke=A();return this.multiplyTo(Te,ke),ke}function qa(){var Te=A();return this.squareTo(Te),Te}function $a(Te){var ke=A();return this.divRemTo(Te,ke,null),ke}function Wa(Te){var ke=A();return this.divRemTo(Te,null,ke),ke}function za(Te){var ke=A(),De=A();return this.divRemTo(Te,ke,De),new Array(ke,De)}function vc(Te){this[this.t]=this.am(0,Te-1,this,0,0,this.t),++this.t,this.clamp()}function Fi(Te,ke){if(Te!=0){for(;this.t<=ke;)this[this.t++]=0;for(this[ke]+=Te;this[ke]>=this.DV;)this[ke]-=this.DV,++ke>=this.t&&(this[this.t++]=0),++this[ke]}}function ni(){}function Bi(Te){return Te}function is(Te,ke,De){Te.multiplyTo(ke,De)}function Va(Te,ke){Te.squareTo(ke)}ni.prototype.convert=Bi,ni.prototype.revert=Bi,ni.prototype.mulTo=is,ni.prototype.sqrTo=Va;function Ka(Te){return this.exp(Te,new ni)}function Ga(Te,ke,De){var Xe=Math.min(this.t+Te.t,ke);for(De.s=0,De.t=Xe;Xe>0;)De[--Xe]=0;var wt;for(wt=De.t-this.t;Xe<wt;++Xe)De[Xe+this.t]=this.am(0,Te[Xe],De,Xe,0,this.t);for(wt=Math.min(Te.t,ke);Xe<wt;++Xe)this.am(0,Te[Xe],De,Xe,0,ke-Xe);De.clamp()}function Ja(Te,ke,De){--ke;var Xe=De.t=this.t+Te.t-ke;for(De.s=0;--Xe>=0;)De[Xe]=0;for(Xe=Math.max(ke-this.t,0);Xe<Te.t;++Xe)De[this.t+Xe-ke]=this.am(ke-Xe,Te[Xe],De,0,0,this.t+Xe-ke);De.clamp(),De.drShiftTo(1,De)}function Vn(Te){this.r2=A(),this.q3=A(),k.ONE.dlShiftTo(2*Te.t,this.r2),this.mu=this.r2.divide(Te),this.m=Te}function Ya(Te){if(Te.s<0||Te.t>2*this.m.t)return Te.mod(this.m);if(Te.compareTo(this.m)<0)return Te;var ke=A();return Te.copyTo(ke),this.reduce(ke),ke}function Xa(Te){return Te}function ss(Te){for(Te.drShiftTo(this.m.t-1,this.r2),Te.t>this.m.t+1&&(Te.t=this.m.t+1,Te.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Te.compareTo(this.r2)<0;)Te.dAddOffset(1,this.m.t+1);for(Te.subTo(this.r2,Te);Te.compareTo(this.m)>=0;)Te.subTo(this.m,Te)}function AE(Te,ke){Te.squareTo(ke),this.reduce(ke)}function IE(Te,ke,De){Te.multiplyTo(ke,De),this.reduce(De)}Vn.prototype.convert=Ya,Vn.prototype.revert=Xa,Vn.prototype.reduce=ss,Vn.prototype.mulTo=IE,Vn.prototype.sqrTo=AE;function NE(Te,ke){var De=Te.bitLength(),Xe,wt=ue(1),kt;if(De<=0)return wt;De<18?Xe=1:De<48?Xe=3:De<144?Xe=4:De<768?Xe=5:Xe=6,De<8?kt=new Ct(ke):ke.isEven()?kt=new Vn(ke):kt=new Pt(ke);var zt=new Array,Yt=3,Nr=Xe-1,nn=(1<<Xe)-1;if(zt[1]=kt.convert(this),Xe>1){var An=A();for(kt.sqrTo(zt[1],An);Yt<=nn;)zt[Yt]=A(),kt.mulTo(An,zt[Yt-2],zt[Yt]),Yt+=2}var Cn=Te.t-1,ii,Za=!0,Bn=A(),jn;for(De=Ae(Te[Cn])-1;Cn>=0;){for(De>=Nr?ii=Te[Cn]>>De-Nr&nn:(ii=(Te[Cn]&(1<<De+1)-1)<<Nr-De,Cn>0&&(ii|=Te[Cn-1]>>this.DB+De-Nr)),Yt=Xe;(ii&1)==0;)ii>>=1,--Yt;if((De-=Yt)<0&&(De+=this.DB,--Cn),Za)zt[ii].copyTo(wt),Za=!1;else{for(;Yt>1;)kt.sqrTo(wt,Bn),kt.sqrTo(Bn,wt),Yt-=2;Yt>0?kt.sqrTo(wt,Bn):(jn=wt,wt=Bn,Bn=jn),kt.mulTo(Bn,zt[ii],wt)}for(;Cn>=0&&(Te[Cn]&1<<De)==0;)kt.sqrTo(wt,Bn),jn=wt,wt=Bn,Bn=jn,--De<0&&(De=this.DB-1,--Cn)}return kt.revert(wt)}function RE(Te){var ke=this.s<0?this.negate():this.clone(),De=Te.s<0?Te.negate():Te.clone();if(ke.compareTo(De)<0){var Xe=ke;ke=De,De=Xe}var wt=ke.getLowestSetBit(),kt=De.getLowestSetBit();if(kt<0)return ke;for(wt<kt&&(kt=wt),kt>0&&(ke.rShiftTo(kt,ke),De.rShiftTo(kt,De));ke.signum()>0;)(wt=ke.getLowestSetBit())>0&&ke.rShiftTo(wt,ke),(wt=De.getLowestSetBit())>0&&De.rShiftTo(wt,De),ke.compareTo(De)>=0?(ke.subTo(De,ke),ke.rShiftTo(1,ke)):(De.subTo(ke,De),De.rShiftTo(1,De));return kt>0&&De.lShiftTo(kt,De),De}function LE(Te){if(Te<=0)return 0;var ke=this.DV%Te,De=this.s<0?Te-1:0;if(this.t>0)if(ke==0)De=this[0]%Te;else for(var Xe=this.t-1;Xe>=0;--Xe)De=(ke*De+this[Xe])%Te;return De}function DE(Te){var ke=Te.isEven();if(this.isEven()&&ke||Te.signum()==0)return k.ZERO;for(var De=Te.clone(),Xe=this.clone(),wt=ue(1),kt=ue(0),zt=ue(0),Yt=ue(1);De.signum()!=0;){for(;De.isEven();)De.rShiftTo(1,De),ke?((!wt.isEven()||!kt.isEven())&&(wt.addTo(this,wt),kt.subTo(Te,kt)),wt.rShiftTo(1,wt)):kt.isEven()||kt.subTo(Te,kt),kt.rShiftTo(1,kt);for(;Xe.isEven();)Xe.rShiftTo(1,Xe),ke?((!zt.isEven()||!Yt.isEven())&&(zt.addTo(this,zt),Yt.subTo(Te,Yt)),zt.rShiftTo(1,zt)):Yt.isEven()||Yt.subTo(Te,Yt),Yt.rShiftTo(1,Yt);De.compareTo(Xe)>=0?(De.subTo(Xe,De),ke&&wt.subTo(zt,wt),kt.subTo(Yt,kt)):(Xe.subTo(De,Xe),ke&&zt.subTo(wt,zt),Yt.subTo(kt,Yt))}if(Xe.compareTo(k.ONE)!=0)return k.ZERO;if(Yt.compareTo(Te)>=0)return Yt.subtract(Te);if(Yt.signum()<0)Yt.addTo(Te,Yt);else return Yt;return Yt.signum()<0?Yt.add(Te):Yt}var gn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ME=(1<<26)/gn[gn.length-1];function FE(Te){var ke,De=this.abs();if(De.t==1&&De[0]<=gn[gn.length-1]){for(ke=0;ke<gn.length;++ke)if(De[0]==gn[ke])return!0;return!1}if(De.isEven())return!1;for(ke=1;ke<gn.length;){for(var Xe=gn[ke],wt=ke+1;wt<gn.length&&Xe<ME;)Xe*=gn[wt++];for(Xe=De.modInt(Xe);ke<wt;)if(Xe%gn[ke++]==0)return!1}return De.millerRabin(Te)}function BE(Te){var ke=this.subtract(k.ONE),De=ke.getLowestSetBit();if(De<=0)return!1;var Xe=ke.shiftRight(De);Te=Te+1>>1,Te>gn.length&&(Te=gn.length);for(var wt=A(),kt=0;kt<Te;++kt){wt.fromInt(gn[Math.floor(Math.random()*gn.length)]);var zt=wt.modPow(Xe,this);if(zt.compareTo(k.ONE)!=0&&zt.compareTo(ke)!=0){for(var Yt=1;Yt++<De&&zt.compareTo(ke)!=0;)if(zt=zt.modPowInt(2,this),zt.compareTo(k.ONE)==0)return!1;if(zt.compareTo(ke)!=0)return!1}}return!0}k.prototype.chunkSize=rr,k.prototype.toRadix=ar,k.prototype.fromRadix=br,k.prototype.fromNumber=Vt,k.prototype.bitwiseTo=jt,k.prototype.changeBit=Da,k.prototype.addTo=ja,k.prototype.dMultiply=vc,k.prototype.dAddOffset=Fi,k.prototype.multiplyLowerTo=Ga,k.prototype.multiplyUpperTo=Ja,k.prototype.modInt=LE,k.prototype.millerRabin=BE,k.prototype.clone=St,k.prototype.intValue=Zt,k.prototype.byteValue=Ye,k.prototype.shortValue=$t,k.prototype.signum=tr,k.prototype.toByteArray=Jt,k.prototype.equals=er,k.prototype.min=_r,k.prototype.max=Nt,k.prototype.and=yr,k.prototype.or=Cr,k.prototype.xor=zr,k.prototype.andNot=Hr,k.prototype.not=wn,k.prototype.shiftLeft=ns,k.prototype.shiftRight=ei,k.prototype.getLowestSetBit=ti,k.prototype.bitCount=Mi,k.prototype.testBit=La,k.prototype.setBit=Ma,k.prototype.clearBit=Fa,k.prototype.flipBit=Ba,k.prototype.add=Ha,k.prototype.subtract=Cs,k.prototype.multiply=Ua,k.prototype.divide=$a,k.prototype.remainder=Wa,k.prototype.divideAndRemainder=za,k.prototype.modPow=NE,k.prototype.modInverse=DE,k.prototype.pow=Ka,k.prototype.gcd=RE,k.prototype.isProbablePrime=FE,k.prototype.square=qa,k.prototype.Barrett=Vn;var Qa,Tn,rn;function jE(Te){Tn[rn++]^=Te&255,Tn[rn++]^=Te>>8&255,Tn[rn++]^=Te>>16&255,Tn[rn++]^=Te>>24&255,rn>=Sc&&(rn-=Sc)}function Vm(){jE(new Date().getTime())}if(Tn==null){Tn=new Array,rn=0;var Fn;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Km=new Uint8Array(32);for(window.crypto.getRandomValues(Km),Fn=0;Fn<32;++Fn)Tn[rn++]=Km[Fn]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var Gm=window.crypto.random(32);for(Fn=0;Fn<Gm.length;++Fn)Tn[rn++]=Gm.charCodeAt(Fn)&255}}for(;rn<Sc;)Fn=Math.floor(65536*Math.random()),Tn[rn++]=Fn>>>8,Tn[rn++]=Fn&255;rn=0,Vm()}function HE(){if(Qa==null){for(Vm(),Qa=WE(),Qa.init(Tn),rn=0;rn<Tn.length;++rn)Tn[rn]=0;rn=0}return Qa.next()}function UE(Te){var ke;for(ke=0;ke<Te.length;++ke)Te[ke]=HE()}function wc(){}wc.prototype.nextBytes=UE;function yc(){this.i=0,this.j=0,this.S=new Array}function qE(Te){var ke,De,Xe;for(ke=0;ke<256;++ke)this.S[ke]=ke;for(De=0,ke=0;ke<256;++ke)De=De+this.S[ke]+Te[ke%Te.length]&255,Xe=this.S[ke],this.S[ke]=this.S[De],this.S[De]=Xe;this.i=0,this.j=0}function $E(){var Te;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,Te=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=Te,this.S[Te+this.S[this.i]&255]}yc.prototype.init=qE,yc.prototype.next=$E;function WE(){return new yc}var Sc=256;typeof G<"u"?G=Q.exports={default:k,BigInteger:k,SecureRandom:wc}:this.jsbn={BigInteger:k,SecureRandom:wc}}).call(G)}),Wr=P(G=>{(function(){var Q={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function Y(M){return X(A(M),arguments)}function Z(M,H){return Y.apply(null,[M].concat(H||[]))}function X(M,H){var B=1,L=M.length,N,F="",W,re,ee,ce,pe,K,se,ue;for(W=0;W<L;W++)if(typeof M[W]=="string")F+=M[W];else if(typeof M[W]=="object"){if(ee=M[W],ee.keys)for(N=H[B],re=0;re<ee.keys.length;re++){if(N==null)throw new Error(Y('[sprintf] Cannot access property "%s" of undefined value "%s"',ee.keys[re],ee.keys[re-1]));N=N[ee.keys[re]]}else ee.param_no?N=H[ee.param_no]:N=H[B++];if(Q.not_type.test(ee.type)&&Q.not_primitive.test(ee.type)&&N instanceof Function&&(N=N()),Q.numeric_arg.test(ee.type)&&typeof N!="number"&&isNaN(N))throw new TypeError(Y("[sprintf] expecting number but found %T",N));switch(Q.number.test(ee.type)&&(se=N>=0),ee.type){case"b":N=parseInt(N,10).toString(2);break;case"c":N=String.fromCharCode(parseInt(N,10));break;case"d":case"i":N=parseInt(N,10);break;case"j":N=JSON.stringify(N,null,ee.width?parseInt(ee.width):0);break;case"e":N=ee.precision?parseFloat(N).toExponential(ee.precision):parseFloat(N).toExponential();break;case"f":N=ee.precision?parseFloat(N).toFixed(ee.precision):parseFloat(N);break;case"g":N=ee.precision?String(Number(N.toPrecision(ee.precision))):parseFloat(N);break;case"o":N=(parseInt(N,10)>>>0).toString(8);break;case"s":N=String(N),N=ee.precision?N.substring(0,ee.precision):N;break;case"t":N=String(!!N),N=ee.precision?N.substring(0,ee.precision):N;break;case"T":N=Object.prototype.toString.call(N).slice(8,-1).toLowerCase(),N=ee.precision?N.substring(0,ee.precision):N;break;case"u":N=parseInt(N,10)>>>0;break;case"v":N=N.valueOf(),N=ee.precision?N.substring(0,ee.precision):N;break;case"x":N=(parseInt(N,10)>>>0).toString(16);break;case"X":N=(parseInt(N,10)>>>0).toString(16).toUpperCase();break}Q.json.test(ee.type)?F+=N:(Q.number.test(ee.type)&&(!se||ee.sign)?(ue=se?"+":"-",N=N.toString().replace(Q.sign,"")):ue="",pe=ee.pad_char?ee.pad_char==="0"?"0":ee.pad_char.charAt(1):" ",K=ee.width-(ue+N).length,ce=ee.width&&K>0?pe.repeat(K):"",F+=ee.align?ue+N+ce:pe==="0"?ue+ce+N:ce+ue+N)}return F}var k=Object.create(null);function A(M){if(k[M])return k[M];for(var H=M,B,L=[],N=0;H;){if((B=Q.text.exec(H))!==null)L.push(B[0]);else if((B=Q.modulo.exec(H))!==null)L.push("%");else if((B=Q.placeholder.exec(H))!==null){if(B[2]){N|=1;var F=[],W=B[2],re=[];if((re=Q.key.exec(W))!==null)for(F.push(re[1]);(W=W.substring(re[0].length))!=="";)if((re=Q.key_access.exec(W))!==null)F.push(re[1]);else if((re=Q.index_access.exec(W))!==null)F.push(re[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");B[2]=F}else N|=2;if(N===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");L.push({placeholder:B[0],param_no:B[1],keys:B[2],sign:B[3],pad_char:B[4],align:B[5],width:B[6],precision:B[7],type:B[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");H=H.substring(B[0].length)}return k[M]=L}typeof G<"u"&&(G.sprintf=Y,G.vsprintf=Z),typeof window<"u"&&(window.sprintf=Y,window.vsprintf=Z)})()}),ts=P(G=>{var Q=G&&G.__createBinding||(Object.create?function(L,N,F,W){W===void 0&&(W=F);var re=Object.getOwnPropertyDescriptor(N,F);(!re||("get"in re?!N.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return N[F]}}),Object.defineProperty(L,W,re)}:function(L,N,F,W){W===void 0&&(W=F),L[W]=N[F]}),Y=G&&G.__setModuleDefault||(Object.create?function(L,N){Object.defineProperty(L,"default",{enumerable:!0,value:N})}:function(L,N){L.default=N}),Z=G&&G.__importStar||function(L){if(L&&L.__esModule)return L;var N={};if(L!=null)for(var F in L)F!=="default"&&Object.prototype.hasOwnProperty.call(L,F)&&Q(N,L,F);return Y(N,L),N};Object.defineProperty(G,"__esModule",{value:!0}),G.Address4=void 0;var X=Z(Qn()),k=Z(ki()),A=qt(),M=pr(),H=Wr(),B=class Un{constructor(N){this.groups=k.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=X.isCorrect(k.BITS),this.isInSubnet=X.isInSubnet,this.address=N;let F=k.RE_SUBNET_STRING.exec(N);if(F){if(this.parsedSubnet=F[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>k.BITS)throw new A.AddressError("Invalid subnet mask.");N=N.replace(k.RE_SUBNET_STRING,"")}this.addressMinusSuffix=N,this.parsedAddress=this.parse(N)}static isValid(N){try{return new Un(N),!0}catch{return!1}}parse(N){let F=N.split(".");if(!N.match(k.RE_ADDRESS))throw new A.AddressError("Invalid IPv4 address.");return F}correctForm(){return this.parsedAddress.map(N=>parseInt(N,10)).join(".")}static fromHex(N){let F=N.replace(/:/g,"").padStart(8,"0"),W=[],re;for(re=0;re<8;re+=2){let ee=F.slice(re,re+2);W.push(parseInt(ee,16))}return new Un(W.join("."))}static fromInteger(N){return Un.fromHex(N.toString(16))}static fromArpa(N){let F=N.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new Un(F)}toHex(){return this.parsedAddress.map(N=>(0,H.sprintf)("%02x",parseInt(N,10))).join(":")}toArray(){return this.parsedAddress.map(N=>parseInt(N,10))}toGroup6(){let N=[],F;for(F=0;F<k.GROUPS;F+=2){let W=(0,H.sprintf)("%02x%02x",parseInt(this.parsedAddress[F],10),parseInt(this.parsedAddress[F+1],10));N.push((0,H.sprintf)("%x",parseInt(W,16)))}return N.join(":")}bigInteger(){return new M.BigInteger(this.parsedAddress.map(N=>(0,H.sprintf)("%02x",parseInt(N,10))).join(""),16)}_startAddress(){return new M.BigInteger(this.mask()+"0".repeat(k.BITS-this.subnetMask),2)}startAddress(){return Un.fromBigInteger(this._startAddress())}startAddressExclusive(){let N=new M.BigInteger("1");return Un.fromBigInteger(this._startAddress().add(N))}_endAddress(){return new M.BigInteger(this.mask()+"1".repeat(k.BITS-this.subnetMask),2)}endAddress(){return Un.fromBigInteger(this._endAddress())}endAddressExclusive(){let N=new M.BigInteger("1");return Un.fromBigInteger(this._endAddress().subtract(N))}static fromBigInteger(N){return Un.fromInteger(parseInt(N.toString(),10))}mask(N){return N===void 0&&(N=this.subnetMask),this.getBitsBase2(0,N)}getBitsBase2(N,F){return this.binaryZeroPad().slice(N,F)}reverseForm(N){N||(N={});let F=this.correctForm().split(".").reverse().join(".");return N.omitSuffix?F:(0,H.sprintf)("%s.in-addr.arpa.",F)}isMulticast(){return this.isInSubnet(new Un("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(k.BITS,"0")}groupForV6(){let N=this.parsedAddress;return this.address.replace(k.RE_ADDRESS,(0,H.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',N.slice(0,2).join("."),N.slice(2,4).join(".")))}};G.Address4=B}),da=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.RE_URL_WITH_PORT=G.RE_URL=G.RE_ZONE_STRING=G.RE_SUBNET_STRING=G.RE_BAD_ADDRESS=G.RE_BAD_CHARACTERS=G.TYPES=G.SCOPES=G.GROUPS=G.BITS=void 0,G.BITS=128,G.GROUPS=8,G.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},G.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},G.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,G.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,G.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,G.RE_ZONE_STRING=/%.*$/,G.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),G.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)}),ha=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.simpleGroup=G.spanLeadingZeroes=G.spanAll=G.spanAllZeroes=void 0;var Q=Wr();function Y(M){return M.replace(/(0+)/g,'<span class="zero">$1</span>')}G.spanAllZeroes=Y;function Z(M,H=0){return M.split("").map((B,L)=>(0,Q.sprintf)('<span class="digit value-%s position-%d">%s</span>',B,L+H,Y(B))).join("")}G.spanAll=Z;function X(M){return M.replace(/^(0+)/,'<span class="zero">$1</span>')}function k(M){return M.split(":").map(H=>X(H)).join(":")}G.spanLeadingZeroes=k;function A(M,H=0){return M.split(":").map((B,L)=>/group-v4/.test(B)?B:(0,Q.sprintf)('<span class="hover-group group-%d">%s</span>',L+H,X(B)))}G.simpleGroup=A}),yS=P(G=>{var Q=G&&G.__createBinding||(Object.create?function(L,N,F,W){W===void 0&&(W=F);var re=Object.getOwnPropertyDescriptor(N,F);(!re||("get"in re?!N.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return N[F]}}),Object.defineProperty(L,W,re)}:function(L,N,F,W){W===void 0&&(W=F),L[W]=N[F]}),Y=G&&G.__setModuleDefault||(Object.create?function(L,N){Object.defineProperty(L,"default",{enumerable:!0,value:N})}:function(L,N){L.default=N}),Z=G&&G.__importStar||function(L){if(L&&L.__esModule)return L;var N={};if(L!=null)for(var F in L)F!=="default"&&Object.prototype.hasOwnProperty.call(L,F)&&Q(N,L,F);return Y(N,L),N};Object.defineProperty(G,"__esModule",{value:!0}),G.possibleElisions=G.simpleRegularExpression=G.ADDRESS_BOUNDARY=G.padGroup=G.groupPossibilities=void 0;var X=Z(da()),k=Wr();function A(L){return(0,k.sprintf)("(%s)",L.join("|"))}G.groupPossibilities=A;function M(L){return L.length<4?(0,k.sprintf)("0{0,%d}%s",4-L.length,L):L}G.padGroup=M,G.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function H(L){let N=[];L.forEach((W,re)=>{parseInt(W,16)===0&&N.push(re)});let F=N.map(W=>L.map((re,ee)=>{if(ee===W){let ce=ee===0||ee===X.GROUPS-1?":":"";return A([M(re),ce])}return M(re)}).join(":"));return F.push(L.map(M).join(":")),A(F)}G.simpleRegularExpression=H;function B(L,N,F){let W=N?"":":",re=F?"":":",ee=[];!N&&!F&&ee.push("::"),N&&F&&ee.push(""),(F&&!N||!F&&N)&&ee.push(":"),ee.push((0,k.sprintf)("%s(:0{1,4}){1,%d}",W,L-1)),ee.push((0,k.sprintf)("(0{1,4}:){1,%d}%s",L-1,re)),ee.push((0,k.sprintf)("(0{1,4}:){%d}0{1,4}",L-1));for(let ce=1;ce<L-1;ce++)for(let pe=1;pe<L-ce;pe++)ee.push((0,k.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",pe,L-pe-ce-1));return A(ee)}G.possibleElisions=B}),SS=P(G=>{var Q=G&&G.__createBinding||(Object.create?function(ue,ae,oe,fe){fe===void 0&&(fe=oe);var we=Object.getOwnPropertyDescriptor(ae,oe);(!we||("get"in we?!ae.__esModule:we.writable||we.configurable))&&(we={enumerable:!0,get:function(){return ae[oe]}}),Object.defineProperty(ue,fe,we)}:function(ue,ae,oe,fe){fe===void 0&&(fe=oe),ue[fe]=ae[oe]}),Y=G&&G.__setModuleDefault||(Object.create?function(ue,ae){Object.defineProperty(ue,"default",{enumerable:!0,value:ae})}:function(ue,ae){ue.default=ae}),Z=G&&G.__importStar||function(ue){if(ue&&ue.__esModule)return ue;var ae={};if(ue!=null)for(var oe in ue)oe!=="default"&&Object.prototype.hasOwnProperty.call(ue,oe)&&Q(ae,ue,oe);return Y(ae,ue),ae};Object.defineProperty(G,"__esModule",{value:!0}),G.Address6=void 0;var X=Z(Qn()),k=Z(ki()),A=Z(da()),M=Z(ha()),H=ts(),B=yS(),L=qt(),N=pr(),F=Wr();function W(ue){if(!ue)throw new Error("Assertion failed.")}function re(ue){let ae=/(\d+)(\d{3})/;for(;ae.test(ue);)ue=ue.replace(ae,"$1,$2");return ue}function ee(ue){return ue=ue.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),ue=ue.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),ue}function ce(ue,ae){let oe=[],fe=[],we;for(we=0;we<ue.length;we++)we<ae[0]?oe.push(ue[we]):we>ae[1]&&fe.push(ue[we]);return oe.concat(["compact"]).concat(fe)}function pe(ue){return(0,F.sprintf)("%04x",parseInt(ue,16))}function K(ue){return ue&255}var se=class un{constructor(ae,oe){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=X.isInSubnet,this.isCorrect=X.isCorrect(A.BITS),oe===void 0?this.groups=A.GROUPS:this.groups=oe,this.address=ae;let fe=A.RE_SUBNET_STRING.exec(ae);if(fe){if(this.parsedSubnet=fe[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>A.BITS)throw new L.AddressError("Invalid subnet mask.");ae=ae.replace(A.RE_SUBNET_STRING,"")}else if(/\//.test(ae))throw new L.AddressError("Invalid subnet mask.");let we=A.RE_ZONE_STRING.exec(ae);we&&(this.zone=we[0],ae=ae.replace(A.RE_ZONE_STRING,"")),this.addressMinusSuffix=ae,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(ae){try{return new un(ae),!0}catch{return!1}}static fromBigInteger(ae){let oe=ae.toString(16).padStart(32,"0"),fe=[],we;for(we=0;we<A.GROUPS;we++)fe.push(oe.slice(we*4,(we+1)*4));return new un(fe.join(":"))}static fromURL(ae){let oe,fe=null,we;if(ae.indexOf("[")!==-1&&ae.indexOf("]:")!==-1){if(we=A.RE_URL_WITH_PORT.exec(ae),we===null)return{error:"failed to parse address with port",address:null,port:null};oe=we[1],fe=we[2]}else if(ae.indexOf("/")!==-1){if(ae=ae.replace(/^[a-z0-9]+:\/\//,""),we=A.RE_URL.exec(ae),we===null)return{error:"failed to parse address from URL",address:null,port:null};oe=we[1]}else oe=ae;return fe?(fe=parseInt(fe,10),(fe<0||fe>65536)&&(fe=null)):fe=null,{address:new un(oe),port:fe}}static fromAddress4(ae){let oe=new H.Address4(ae),fe=A.BITS-(k.BITS-oe.subnetMask);return new un(`::ffff:${oe.correctForm()}/${fe}`)}static fromArpa(ae){let oe=ae.replace(/(\.ip6\.arpa)?\.$/,""),fe=7;if(oe.length!==63)throw new L.AddressError("Invalid 'ip6.arpa' form.");let we=oe.split(".").reverse();for(let Ee=fe;Ee>0;Ee--){let Ie=Ee*4;we.splice(Ie,0,":")}return oe=we.join(""),new un(oe)}microsoftTranscription(){return(0,F.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(ae=this.subnetMask){return this.getBitsBase2(0,ae)}possibleSubnets(ae=128){let oe=A.BITS-this.subnetMask,fe=Math.abs(ae-A.BITS),we=oe-fe;return we<0?"0":re(new N.BigInteger("2",10).pow(we).toString(10))}_startAddress(){return new N.BigInteger(this.mask()+"0".repeat(A.BITS-this.subnetMask),2)}startAddress(){return un.fromBigInteger(this._startAddress())}startAddressExclusive(){let ae=new N.BigInteger("1");return un.fromBigInteger(this._startAddress().add(ae))}_endAddress(){return new N.BigInteger(this.mask()+"1".repeat(A.BITS-this.subnetMask),2)}endAddress(){return un.fromBigInteger(this._endAddress())}endAddressExclusive(){let ae=new N.BigInteger("1");return un.fromBigInteger(this._endAddress().subtract(ae))}getScope(){let ae=A.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&ae!=="Link local"&&(ae="Global"),ae||"Unknown"}getType(){for(let ae of Object.keys(A.TYPES))if(this.isInSubnet(new un(ae)))return A.TYPES[ae];return"Global unicast"}getBits(ae,oe){return new N.BigInteger(this.getBitsBase2(ae,oe),2)}getBitsBase2(ae,oe){return this.binaryZeroPad().slice(ae,oe)}getBitsBase16(ae,oe){let fe=oe-ae;if(fe%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(ae,oe).toString(16).padStart(fe/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,A.BITS)}reverseForm(ae){ae||(ae={});let oe=Math.floor(this.subnetMask/4),fe=this.canonicalForm().replace(/:/g,"").split("").slice(0,oe).reverse().join(".");return oe>0?ae.omitSuffix?fe:(0,F.sprintf)("%s.ip6.arpa.",fe):ae.omitSuffix?"":"ip6.arpa."}correctForm(){let ae,oe=[],fe=0,we=[];for(ae=0;ae<this.parsedAddress.length;ae++){let Ae=parseInt(this.parsedAddress[ae],16);Ae===0&&fe++,Ae!==0&&fe>0&&(fe>1&&we.push([ae-fe,ae-1]),fe=0)}fe>1&&we.push([this.parsedAddress.length-fe,this.parsedAddress.length-1]);let Ee=we.map(Ae=>Ae[1]-Ae[0]+1);if(we.length>0){let Ae=Ee.indexOf(Math.max(...Ee));oe=ce(this.parsedAddress,we[Ae])}else oe=this.parsedAddress;for(ae=0;ae<oe.length;ae++)oe[ae]!=="compact"&&(oe[ae]=parseInt(oe[ae],16).toString(16));let Ie=oe.join(":");return Ie=Ie.replace(/^compact$/,"::"),Ie=Ie.replace(/^compact|compact$/,":"),Ie=Ie.replace(/compact/,""),Ie}binaryZeroPad(){return this.bigInteger().toString(2).padStart(A.BITS,"0")}parse4in6(ae){let oe=ae.split(":"),fe=oe.slice(-1)[0].match(k.RE_ADDRESS);if(fe){this.parsedAddress4=fe[0],this.address4=new H.Address4(this.parsedAddress4);for(let we=0;we<this.address4.groups;we++)if(/^0[0-9]+/.test(this.address4.parsedAddress[we]))throw new L.AddressError("IPv4 addresses can't have leading zeroes.",ae.replace(k.RE_ADDRESS,this.address4.parsedAddress.map(ee).join(".")));this.v4=!0,oe[oe.length-1]=this.address4.toGroup6(),ae=oe.join(":")}return ae}parse(ae){ae=this.parse4in6(ae);let oe=ae.match(A.RE_BAD_CHARACTERS);if(oe)throw new L.AddressError((0,F.sprintf)("Bad character%s detected in address: %s",oe.length>1?"s":"",oe.join("")),ae.replace(A.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let fe=ae.match(A.RE_BAD_ADDRESS);if(fe)throw new L.AddressError((0,F.sprintf)("Address failed regex: %s",fe.join("")),ae.replace(A.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let we=[],Ee=ae.split("::");if(Ee.length===2){let Ie=Ee[0].split(":"),Ae=Ee[1].split(":");Ie.length===1&&Ie[0]===""&&(Ie=[]),Ae.length===1&&Ae[0]===""&&(Ae=[]);let He=this.groups-(Ie.length+Ae.length);if(!He)throw new L.AddressError("Error parsing groups");this.elidedGroups=He,this.elisionBegin=Ie.length,this.elisionEnd=Ie.length+this.elidedGroups,we=we.concat(Ie);for(let Fe=0;Fe<He;Fe++)we.push("0");we=we.concat(Ae)}else if(Ee.length===1)we=ae.split(":"),this.elidedGroups=0;else throw new L.AddressError("Too many :: groups found");if(we=we.map(Ie=>(0,F.sprintf)("%x",parseInt(Ie,16))),we.length!==this.groups)throw new L.AddressError("Incorrect number of groups found");return we}canonicalForm(){return this.parsedAddress.map(pe).join(":")}decimal(){return this.parsedAddress.map(ae=>(0,F.sprintf)("%05d",parseInt(ae,16))).join(":")}bigInteger(){return new N.BigInteger(this.parsedAddress.map(pe).join(""),16)}to4(){let ae=this.binaryZeroPad().split("");return H.Address4.fromHex(new N.BigInteger(ae.slice(96,128).join(""),2).toString(16))}to4in6(){let ae=this.to4(),oe=new un(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),fe="";return/:$/.test(oe)||(fe=":"),oe+fe+ae.address}inspectTeredo(){let ae=this.getBitsBase16(0,32),oe=this.getBits(80,96).xor(new N.BigInteger("ffff",16)).toString(),fe=H.Address4.fromHex(this.getBitsBase16(32,64)),we=H.Address4.fromHex(this.getBits(96,128).xor(new N.BigInteger("ffffffff",16)).toString(16)),Ee=this.getBits(64,80),Ie=this.getBitsBase2(64,80),Ae=Ee.testBit(15),He=Ee.testBit(14),Fe=Ee.testBit(8),Ue=Ee.testBit(9),et=new N.BigInteger(Ie.slice(2,6)+Ie.slice(8,16),2).toString(10);return{prefix:(0,F.sprintf)("%s:%s",ae.slice(0,4),ae.slice(4,8)),server4:fe.address,client4:we.address,flags:Ie,coneNat:Ae,microsoft:{reserved:He,universalLocal:Ue,groupIndividual:Fe,nonce:et},udpPort:oe}}inspect6to4(){let ae=this.getBitsBase16(0,16),oe=H.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,F.sprintf)("%s",ae.slice(0,4)),gateway:oe.address}}to6to4(){if(!this.is4())return null;let ae=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new un(ae)}toByteArray(){let ae=this.bigInteger().toByteArray();return ae.length===17&&ae[0]===0?ae.slice(1):ae}toUnsignedByteArray(){return this.toByteArray().map(K)}static fromByteArray(ae){return this.fromUnsignedByteArray(ae.map(K))}static fromUnsignedByteArray(ae){let oe=new N.BigInteger("256",10),fe=new N.BigInteger("0",10),we=new N.BigInteger("1",10);for(let Ee=ae.length-1;Ee>=0;Ee--)fe=fe.add(we.multiply(new N.BigInteger(ae[Ee].toString(10),10))),we=we.multiply(oe);return un.fromBigInteger(fe)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new un("2001::/32"))}is6to4(){return this.isInSubnet(new un("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(ae){return ae===void 0?ae="":ae=(0,F.sprintf)(":%s",ae),(0,F.sprintf)("http://[%s]%s/",this.correctForm(),ae)}link(ae){ae||(ae={}),ae.className===void 0&&(ae.className=""),ae.prefix===void 0&&(ae.prefix="/#address="),ae.v4===void 0&&(ae.v4=!1);let oe=this.correctForm;return ae.v4&&(oe=this.to4in6),ae.className?(0,F.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',ae.prefix,oe.call(this),ae.className):(0,F.sprintf)('<a href="%1$s%2$s">%2$s</a>',ae.prefix,oe.call(this))}group(){if(this.elidedGroups===0)return M.simpleGroup(this.address).join(":");W(typeof this.elidedGroups=="number"),W(typeof this.elisionBegin=="number");let ae=[],[oe,fe]=this.address.split("::");oe.length?ae.push(...M.simpleGroup(oe)):ae.push("");let we=["hover-group"];for(let Ee=this.elisionBegin;Ee<this.elisionBegin+this.elidedGroups;Ee++)we.push((0,F.sprintf)("group-%d",Ee));return ae.push((0,F.sprintf)('<span class="%s"></span>',we.join(" "))),fe.length?ae.push(...M.simpleGroup(fe,this.elisionEnd)):ae.push(""),this.is4()&&(W(this.address4 instanceof H.Address4),ae.pop(),ae.push(this.address4.groupForV6())),ae.join(":")}regularExpressionString(ae=!1){let oe=[],fe=new un(this.correctForm());if(fe.elidedGroups===0)oe.push((0,B.simpleRegularExpression)(fe.parsedAddress));else if(fe.elidedGroups===A.GROUPS)oe.push((0,B.possibleElisions)(A.GROUPS));else{let we=fe.address.split("::");we[0].length&&oe.push((0,B.simpleRegularExpression)(we[0].split(":"))),W(typeof fe.elidedGroups=="number"),oe.push((0,B.possibleElisions)(fe.elidedGroups,we[0].length!==0,we[1].length!==0)),we[1].length&&oe.push((0,B.simpleRegularExpression)(we[1].split(":"))),oe=[oe.join(":")]}return ae||(oe=["(?=^|",B.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...oe,")(?=[^\\w\\:]|",B.ADDRESS_BOUNDARY,"|$)"]),oe.join("")}regularExpression(ae=!1){return new RegExp(this.regularExpressionString(ae),"i")}};G.Address6=se}),Gf=P(G=>{var Q=G&&G.__createBinding||(Object.create?function(H,B,L,N){N===void 0&&(N=L);var F=Object.getOwnPropertyDescriptor(B,L);(!F||("get"in F?!B.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return B[L]}}),Object.defineProperty(H,N,F)}:function(H,B,L,N){N===void 0&&(N=L),H[N]=B[L]}),Y=G&&G.__setModuleDefault||(Object.create?function(H,B){Object.defineProperty(H,"default",{enumerable:!0,value:B})}:function(H,B){H.default=B}),Z=G&&G.__importStar||function(H){if(H&&H.__esModule)return H;var B={};if(H!=null)for(var L in H)L!=="default"&&Object.prototype.hasOwnProperty.call(H,L)&&Q(B,H,L);return Y(B,H),B};Object.defineProperty(G,"__esModule",{value:!0}),G.v6=G.AddressError=G.Address6=G.Address4=void 0;var X=ts();Object.defineProperty(G,"Address4",{enumerable:!0,get:function(){return X.Address4}});var k=SS();Object.defineProperty(G,"Address6",{enumerable:!0,get:function(){return k.Address6}});var A=qt();Object.defineProperty(G,"AddressError",{enumerable:!0,get:function(){return A.AddressError}});var M=Z(ha());G.v6={helpers:M}}),xS=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.ipToBuffer=G.int32ToIpv4=G.ipv4ToInt32=G.validateSocksClientChainOptions=G.validateSocksClientOptions=void 0;var Q=Pi(),Y=On(),Z=Je,X=Gf(),k=Je;function A(ee,ce=["connect","bind","associate"]){if(!Y.SocksCommand[ee.command])throw new Q.SocksClientError(Y.ERRORS.InvalidSocksCommand,ee);if(ce.indexOf(ee.command)===-1)throw new Q.SocksClientError(Y.ERRORS.InvalidSocksCommandForOperation,ee);if(!B(ee.destination))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsDestination,ee);if(!L(ee.proxy))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsProxy,ee);if(H(ee.proxy,ee),ee.timeout&&!N(ee.timeout))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsTimeout,ee);if(ee.existing_socket&&!(ee.existing_socket instanceof Z.Duplex))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsExistingSocket,ee)}G.validateSocksClientOptions=A;function M(ee){if(ee.command!=="connect")throw new Q.SocksClientError(Y.ERRORS.InvalidSocksCommandChain,ee);if(!B(ee.destination))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsDestination,ee);if(!(ee.proxies&&Array.isArray(ee.proxies)&&ee.proxies.length>=2))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsProxiesLength,ee);if(ee.proxies.forEach(ce=>{if(!L(ce))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsProxy,ee);H(ce,ee)}),ee.timeout&&!N(ee.timeout))throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsTimeout,ee)}G.validateSocksClientChainOptions=M;function H(ee,ce){if(ee.custom_auth_method!==void 0){if(ee.custom_auth_method<Y.SOCKS5_CUSTOM_AUTH_START||ee.custom_auth_method>Y.SOCKS5_CUSTOM_AUTH_END)throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsCustomAuthRange,ce);if(ee.custom_auth_request_handler===void 0||typeof ee.custom_auth_request_handler!="function")throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,ce);if(ee.custom_auth_response_size===void 0)throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,ce);if(ee.custom_auth_response_handler===void 0||typeof ee.custom_auth_response_handler!="function")throw new Q.SocksClientError(Y.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,ce)}}function B(ee){return ee&&typeof ee.host=="string"&&typeof ee.port=="number"&&ee.port>=0&&ee.port<=65535}function L(ee){return ee&&(typeof ee.host=="string"||typeof ee.ipaddress=="string")&&typeof ee.port=="number"&&ee.port>=0&&ee.port<=65535&&(ee.type===4||ee.type===5)}function N(ee){return typeof ee=="number"&&ee>0}function F(ee){return new X.Address4(ee).toArray().reduce((ce,pe)=>(ce<<8)+pe,0)}G.ipv4ToInt32=F;function W(ee){let ce=ee>>>24&255,pe=ee>>>16&255,K=ee>>>8&255,se=ee&255;return[ce,pe,K,se].join(".")}G.int32ToIpv4=W;function re(ee){if(k.isIPv4(ee)){let ce=new X.Address4(ee);return Buffer.from(ce.toArray())}else if(k.isIPv6(ee)){let ce=new X.Address6(ee);return Buffer.from(ce.canonicalForm().split(":").map(pe=>pe.padStart(4,"0")).join(""),"hex")}else throw new Error("Invalid IP address format")}G.ipToBuffer=re}),ES=P(G=>{Object.defineProperty(G,"__esModule",{value:!0}),G.ReceiveBuffer=void 0;var Q=class{constructor(Y=4096){this.buffer=Buffer.allocUnsafe(Y),this.offset=0,this.originalSize=Y}get length(){return this.offset}append(Y){if(!Buffer.isBuffer(Y))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+Y.length>=this.buffer.length){let Z=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+Y.length)),Z.copy(this.buffer)}return Y.copy(this.buffer,this.offset),this.offset+=Y.length}peek(Y){if(Y>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,Y)}get(Y){if(Y>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let Z=Buffer.allocUnsafe(Y);return this.buffer.slice(0,Y).copy(Z),this.buffer.copyWithin(0,Y,Y+this.offset-Y),this.offset-=Y,Z}};G.ReceiveBuffer=Q}),OS=P(G=>{var Q=G&&G.__awaiter||function(N,F,W,re){function ee(ce){return ce instanceof W?ce:new W(function(pe){pe(ce)})}return new(W||(W=Promise))(function(ce,pe){function K(ae){try{ue(re.next(ae))}catch(oe){pe(oe)}}function se(ae){try{ue(re.throw(ae))}catch(oe){pe(oe)}}function ue(ae){ae.done?ce(ae.value):ee(ae.value).then(K,se)}ue((re=re.apply(N,F||[])).next())})};Object.defineProperty(G,"__esModule",{value:!0}),G.SocksClientError=G.SocksClient=void 0;var Y=Vr(),Z=Je,X=Rr(),k=On(),A=xS(),M=ES(),H=Pi();Object.defineProperty(G,"SocksClientError",{enumerable:!0,get:function(){return H.SocksClientError}});var B=Gf(),L=class Mp extends Y.EventEmitter{constructor(F){super(),this.options=Object.assign({},F),(0,A.validateSocksClientOptions)(F),this.setState(k.SocksClientState.Created)}static createConnection(F,W){return new Promise((re,ee)=>{try{(0,A.validateSocksClientOptions)(F,["connect"])}catch(pe){return typeof W=="function"?(W(pe),re(pe)):ee(pe)}let ce=new Mp(F);ce.connect(F.existing_socket),ce.once("established",pe=>{ce.removeAllListeners(),typeof W=="function"&&W(null,pe),re(pe)}),ce.once("error",pe=>{ce.removeAllListeners(),typeof W=="function"?(W(pe),re(pe)):ee(pe)})})}static createConnectionChain(F,W){return new Promise((re,ee)=>Q(this,void 0,void 0,function*(){try{(0,A.validateSocksClientChainOptions)(F)}catch(ce){return typeof W=="function"?(W(ce),re(ce)):ee(ce)}F.randomizeChain&&(0,H.shuffleArray)(F.proxies);try{let ce;for(let pe=0;pe<F.proxies.length;pe++){let K=F.proxies[pe],se=pe===F.proxies.length-1?F.destination:{host:F.proxies[pe+1].host||F.proxies[pe+1].ipaddress,port:F.proxies[pe+1].port},ue=yield Mp.createConnection({command:"connect",proxy:K,destination:se,existing_socket:ce});ce=ce||ue.socket}typeof W=="function"?(W(null,{socket:ce}),re({socket:ce})):re({socket:ce})}catch(ce){typeof W=="function"?(W(ce),re(ce)):ee(ce)}}))}static createUDPFrame(F){let W=new X.SmartBuffer;return W.writeUInt16BE(0),W.writeUInt8(F.frameNumber||0),Z.isIPv4(F.remoteHost.host)?(W.writeUInt8(k.Socks5HostType.IPv4),W.writeUInt32BE((0,A.ipv4ToInt32)(F.remoteHost.host))):Z.isIPv6(F.remoteHost.host)?(W.writeUInt8(k.Socks5HostType.IPv6),W.writeBuffer((0,A.ipToBuffer)(F.remoteHost.host))):(W.writeUInt8(k.Socks5HostType.Hostname),W.writeUInt8(Buffer.byteLength(F.remoteHost.host)),W.writeString(F.remoteHost.host)),W.writeUInt16BE(F.remoteHost.port),W.writeBuffer(F.data),W.toBuffer()}static parseUDPFrame(F){let W=X.SmartBuffer.fromBuffer(F);W.readOffset=2;let re=W.readUInt8(),ee=W.readUInt8(),ce;ee===k.Socks5HostType.IPv4?ce=(0,A.int32ToIpv4)(W.readUInt32BE()):ee===k.Socks5HostType.IPv6?ce=B.Address6.fromByteArray(Array.from(W.readBuffer(16))).canonicalForm():ce=W.readString(W.readUInt8());let pe=W.readUInt16BE();return{frameNumber:re,remoteHost:{host:ce,port:pe},data:W.readBuffer()}}setState(F){this.state!==k.SocksClientState.Error&&(this.state=F)}connect(F){this.onDataReceived=re=>this.onDataReceivedHandler(re),this.onClose=()=>this.onCloseHandler(),this.onError=re=>this.onErrorHandler(re),this.onConnect=()=>this.onConnectHandler();let W=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||k.DEFAULT_TIMEOUT);W.unref&&typeof W.unref=="function"&&W.unref(),F?this.socket=F:this.socket=new Z.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(k.SocksClientState.Connecting),this.receiveBuffer=new M.ReceiveBuffer,F?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),this.options.set_tcp_nodelay!==void 0&&this.options.set_tcp_nodelay!==null&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",re=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let ee=this.receiveBuffer.get(this.receiveBuffer.length);re.socket.emit("data",ee)}re.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==k.SocksClientState.Established&&this.state!==k.SocksClientState.BoundWaitingForConnection&&this.closeSocket(k.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(k.SocksClientState.Connected),this.options.proxy.type===4?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(k.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(F){this.receiveBuffer.append(F),this.processData()}processData(){for(;this.state!==k.SocksClientState.Established&&this.state!==k.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===k.SocksClientState.SentInitialHandshake)this.options.proxy.type===4?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===k.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===k.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===k.SocksClientState.BoundWaitingForConnection)this.options.proxy.type===4?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(k.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(k.ERRORS.SocketClosed)}onErrorHandler(F){this.closeSocket(F.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(F){this.state!==k.SocksClientState.Error&&(this.setState(k.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new H.SocksClientError(F,this.options)))}sendSocks4InitialHandshake(){let F=this.options.proxy.userId||"",W=new X.SmartBuffer;W.writeUInt8(4),W.writeUInt8(k.SocksCommand[this.options.command]),W.writeUInt16BE(this.options.destination.port),Z.isIPv4(this.options.destination.host)?(W.writeBuffer((0,A.ipToBuffer)(this.options.destination.host)),W.writeStringNT(F)):(W.writeUInt8(0),W.writeUInt8(0),W.writeUInt8(0),W.writeUInt8(1),W.writeStringNT(F),W.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=k.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(W.toBuffer())}handleSocks4FinalHandshakeResponse(){let F=this.receiveBuffer.get(8);if(F[1]!==k.Socks4Response.Granted)this.closeSocket(`${k.ERRORS.Socks4ProxyRejectedConnection} - (${k.Socks4Response[F[1]]})`);else if(k.SocksCommand[this.options.command]===k.SocksCommand.bind){let W=X.SmartBuffer.fromBuffer(F);W.readOffset=2;let re={port:W.readUInt16BE(),host:(0,A.int32ToIpv4)(W.readUInt32BE())};re.host==="0.0.0.0"&&(re.host=this.options.proxy.ipaddress),this.setState(k.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:re,socket:this.socket})}else this.setState(k.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let F=this.receiveBuffer.get(8);if(F[1]!==k.Socks4Response.Granted)this.closeSocket(`${k.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${k.Socks4Response[F[1]]})`);else{let W=X.SmartBuffer.fromBuffer(F);W.readOffset=2;let re={port:W.readUInt16BE(),host:(0,A.int32ToIpv4)(W.readUInt32BE())};this.setState(k.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:re,socket:this.socket})}}sendSocks5InitialHandshake(){let F=new X.SmartBuffer,W=[k.Socks5Auth.NoAuth];(this.options.proxy.userId||this.options.proxy.password)&&W.push(k.Socks5Auth.UserPass),this.options.proxy.custom_auth_method!==void 0&&W.push(this.options.proxy.custom_auth_method),F.writeUInt8(5),F.writeUInt8(W.length);for(let re of W)F.writeUInt8(re);this.nextRequiredPacketBufferSize=k.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(F.toBuffer()),this.setState(k.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let F=this.receiveBuffer.get(2);F[0]!==5?this.closeSocket(k.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):F[1]===k.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(k.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):F[1]===k.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=k.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):F[1]===k.Socks5Auth.UserPass?(this.socks5ChosenAuthType=k.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):F[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(k.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let F=this.options.proxy.userId||"",W=this.options.proxy.password||"",re=new X.SmartBuffer;re.writeUInt8(1),re.writeUInt8(Buffer.byteLength(F)),re.writeString(F),re.writeUInt8(Buffer.byteLength(W)),re.writeString(W),this.nextRequiredPacketBufferSize=k.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(re.toBuffer()),this.setState(k.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return Q(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(k.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(F){return Q(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(F)})}handleSocks5AuthenticationNoAuthHandshakeResponse(F){return Q(this,void 0,void 0,function*(){return F[1]===0})}handleSocks5AuthenticationUserPassHandshakeResponse(F){return Q(this,void 0,void 0,function*(){return F[1]===0})}handleInitialSocks5AuthenticationHandshakeResponse(){return Q(this,void 0,void 0,function*(){this.setState(k.SocksClientState.ReceivedAuthenticationResponse);let F=!1;this.socks5ChosenAuthType===k.Socks5Auth.NoAuth?F=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===k.Socks5Auth.UserPass?F=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(F=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),F?this.sendSocks5CommandRequest():this.closeSocket(k.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){let F=new X.SmartBuffer;F.writeUInt8(5),F.writeUInt8(k.SocksCommand[this.options.command]),F.writeUInt8(0),Z.isIPv4(this.options.destination.host)?(F.writeUInt8(k.Socks5HostType.IPv4),F.writeBuffer((0,A.ipToBuffer)(this.options.destination.host))):Z.isIPv6(this.options.destination.host)?(F.writeUInt8(k.Socks5HostType.IPv6),F.writeBuffer((0,A.ipToBuffer)(this.options.destination.host))):(F.writeUInt8(k.Socks5HostType.Hostname),F.writeUInt8(this.options.destination.host.length),F.writeString(this.options.destination.host)),F.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(F.toBuffer()),this.setState(k.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let F=this.receiveBuffer.peek(5);if(F[0]!==5||F[1]!==k.Socks5Response.Granted)this.closeSocket(`${k.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${k.Socks5Response[F[1]]}`);else{let W=F[3],re,ee;if(W===k.Socks5HostType.IPv4){let ce=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<ce){this.nextRequiredPacketBufferSize=ce;return}ee=X.SmartBuffer.fromBuffer(this.receiveBuffer.get(ce).slice(4)),re={host:(0,A.int32ToIpv4)(ee.readUInt32BE()),port:ee.readUInt16BE()},re.host==="0.0.0.0"&&(re.host=this.options.proxy.ipaddress)}else if(W===k.Socks5HostType.Hostname){let ce=F[4],pe=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(ce);if(this.receiveBuffer.length<pe){this.nextRequiredPacketBufferSize=pe;return}ee=X.SmartBuffer.fromBuffer(this.receiveBuffer.get(pe).slice(5)),re={host:ee.readString(ce),port:ee.readUInt16BE()}}else if(W===k.Socks5HostType.IPv6){let ce=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<ce){this.nextRequiredPacketBufferSize=ce;return}ee=X.SmartBuffer.fromBuffer(this.receiveBuffer.get(ce).slice(4)),re={host:B.Address6.fromByteArray(Array.from(ee.readBuffer(16))).canonicalForm(),port:ee.readUInt16BE()}}this.setState(k.SocksClientState.ReceivedFinalResponse),k.SocksCommand[this.options.command]===k.SocksCommand.connect?(this.setState(k.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:re,socket:this.socket})):k.SocksCommand[this.options.command]===k.SocksCommand.bind?(this.setState(k.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:re,socket:this.socket})):k.SocksCommand[this.options.command]===k.SocksCommand.associate&&(this.setState(k.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:re,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){let F=this.receiveBuffer.peek(5);if(F[0]!==5||F[1]!==k.Socks5Response.Granted)this.closeSocket(`${k.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${k.Socks5Response[F[1]]}`);else{let W=F[3],re,ee;if(W===k.Socks5HostType.IPv4){let ce=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<ce){this.nextRequiredPacketBufferSize=ce;return}ee=X.SmartBuffer.fromBuffer(this.receiveBuffer.get(ce).slice(4)),re={host:(0,A.int32ToIpv4)(ee.readUInt32BE()),port:ee.readUInt16BE()},re.host==="0.0.0.0"&&(re.host=this.options.proxy.ipaddress)}else if(W===k.Socks5HostType.Hostname){let ce=F[4],pe=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(ce);if(this.receiveBuffer.length<pe){this.nextRequiredPacketBufferSize=pe;return}ee=X.SmartBuffer.fromBuffer(this.receiveBuffer.get(pe).slice(5)),re={host:ee.readString(ce),port:ee.readUInt16BE()}}else if(W===k.Socks5HostType.IPv6){let ce=k.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<ce){this.nextRequiredPacketBufferSize=ce;return}ee=X.SmartBuffer.fromBuffer(this.receiveBuffer.get(ce).slice(4)),re={host:B.Address6.fromByteArray(Array.from(ee.readBuffer(16))).canonicalForm(),port:ee.readUInt16BE()}}this.setState(k.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:re,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}};G.SocksClient=L}),TS=P(G=>{var Q=G&&G.__createBinding||(Object.create?function(Z,X,k,A){A===void 0&&(A=k);var M=Object.getOwnPropertyDescriptor(X,k);(!M||("get"in M?!X.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return X[k]}}),Object.defineProperty(Z,A,M)}:function(Z,X,k,A){A===void 0&&(A=k),Z[A]=X[k]}),Y=G&&G.__exportStar||function(Z,X){for(var k in Z)k!=="default"&&!Object.prototype.hasOwnProperty.call(X,k)&&Q(X,Z,k)};Object.defineProperty(G,"__esModule",{value:!0}),Y(OS(),G)}),CS=P(G=>{var Q=G&&G.__awaiter||function(re,ee,ce,pe){function K(se){return se instanceof ce?se:new ce(function(ue){ue(se)})}return new(ce||(ce=Promise))(function(se,ue){function ae(we){try{fe(pe.next(we))}catch(Ee){ue(Ee)}}function oe(we){try{fe(pe.throw(we))}catch(Ee){ue(Ee)}}function fe(we){we.done?se(we.value):K(we.value).then(ae,oe)}fe((pe=pe.apply(re,ee||[])).next())})},Y=G&&G.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(G,"__esModule",{value:!0});var Z=Y(Je),X=Y(Je),k=Y(Je),A=Y(p()),M=J(),H=TS(),B=A.default("socks-proxy-agent");function L(re){return new Promise((ee,ce)=>{Z.default.lookup(re,(pe,K)=>{pe?ce(pe):ee(K)})})}function N(re){let ee=0,ce=!1,pe=5,K=re.hostname||re.host;if(!K)throw new TypeError('No "host"');if(typeof re.port=="number"?ee=re.port:typeof re.port=="string"&&(ee=parseInt(re.port,10)),ee||(ee=1080),re.protocol)switch(re.protocol.replace(":","")){case"socks4":ce=!0;case"socks4a":pe=4;break;case"socks5":ce=!0;case"socks":case"socks5h":pe=5;break;default:throw new TypeError(`A "socks" protocol must be specified! Got: ${re.protocol}`)}if(typeof re.type<"u")if(re.type===4||re.type===5)pe=re.type;else throw new TypeError(`"type" must be 4 or 5, got: ${re.type}`);let se={host:K,port:ee,type:pe},ue=re.userId||re.username,ae=re.password;if(re.auth){let oe=re.auth.split(":");ue=oe[0],ae=oe[1]}return ue&&Object.defineProperty(se,"userId",{value:ue,enumerable:!1}),ae&&Object.defineProperty(se,"password",{value:ae,enumerable:!1}),{lookup:ce,proxy:se}}var F=class extends M.Agent{constructor(re){let ee;if(typeof re=="string"?ee=k.default.parse(re):ee=re,!ee)throw new TypeError("a SOCKS proxy server `host` and `port` must be specified!");super(ee);let ce=N(ee);this.lookup=ce.lookup,this.proxy=ce.proxy,this.tlsConnectionOptions=ee.tls||{}}callback(re,ee){return Q(this,void 0,void 0,function*(){let{lookup:ce,proxy:pe}=this,{host:K,port:se,timeout:ue}=ee;if(!K)throw new Error("No `host` defined!");ce&&(K=yield L(K));let ae={proxy:pe,destination:{host:K,port:se},command:"connect",timeout:ue};B("Creating socks proxy connection: %o",ae);let{socket:oe}=yield H.SocksClient.createConnection(ae);if(B("Successfully created socks proxy connection"),ee.secureEndpoint){B("Upgrading socket connection to TLS");let fe=ee.servername||ee.host;return X.default.connect(Object.assign(Object.assign(Object.assign({},W(ee,"host","hostname","path","port")),{socket:oe,servername:fe}),this.tlsConnectionOptions))}return oe})}};G.default=F;function W(re,...ee){let ce={},pe;for(pe in re)ee.includes(pe)||(ce[pe]=re[pe]);return ce}}),PS=P((G,Q)=>{var Y=G&&G.__importDefault||function(k){return k&&k.__esModule?k:{default:k}},Z=Y(CS());function X(k){return new Z.default(k)}(function(k){k.SocksProxyAgent=Z.default,k.prototype=Z.default.prototype})(X||(X={})),Q.exports=X}),xr=P(G=>{var Q=Symbol.for("yaml.alias"),Y=Symbol.for("yaml.document"),Z=Symbol.for("yaml.map"),X=Symbol.for("yaml.pair"),k=Symbol.for("yaml.scalar"),A=Symbol.for("yaml.seq"),M=Symbol.for("yaml.node.type"),H=pe=>!!pe&&typeof pe=="object"&&pe[M]===Q,B=pe=>!!pe&&typeof pe=="object"&&pe[M]===Y,L=pe=>!!pe&&typeof pe=="object"&&pe[M]===Z,N=pe=>!!pe&&typeof pe=="object"&&pe[M]===X,F=pe=>!!pe&&typeof pe=="object"&&pe[M]===k,W=pe=>!!pe&&typeof pe=="object"&&pe[M]===A;function re(pe){if(pe&&typeof pe=="object")switch(pe[M]){case Z:case A:return!0}return!1}function ee(pe){if(pe&&typeof pe=="object")switch(pe[M]){case Q:case Z:case k:case A:return!0}return!1}var ce=pe=>(F(pe)||re(pe))&&!!pe.anchor;G.ALIAS=Q,G.DOC=Y,G.MAP=Z,G.NODE_TYPE=M,G.PAIR=X,G.SCALAR=k,G.SEQ=A,G.hasAnchor=ce,G.isAlias=H,G.isCollection=re,G.isDocument=B,G.isMap=L,G.isNode=ee,G.isPair=N,G.isScalar=F,G.isSeq=W}),pa=P(G=>{var Q=xr(),Y=Symbol("break visit"),Z=Symbol("skip children"),X=Symbol("remove node");function k(F,W){let re=B(W);Q.isDocument(F)?A(null,F.contents,re,Object.freeze([F]))===X&&(F.contents=null):A(null,F,re,Object.freeze([]))}k.BREAK=Y,k.SKIP=Z,k.REMOVE=X;function A(F,W,re,ee){let ce=L(F,W,re,ee);if(Q.isNode(ce)||Q.isPair(ce))return N(F,ee,ce),A(F,ce,re,ee);if(typeof ce!="symbol"){if(Q.isCollection(W)){ee=Object.freeze(ee.concat(W));for(let pe=0;pe<W.items.length;++pe){let K=A(pe,W.items[pe],re,ee);if(typeof K=="number")pe=K-1;else{if(K===Y)return Y;K===X&&(W.items.splice(pe,1),pe-=1)}}}else if(Q.isPair(W)){ee=Object.freeze(ee.concat(W));let pe=A("key",W.key,re,ee);if(pe===Y)return Y;pe===X&&(W.key=null);let K=A("value",W.value,re,ee);if(K===Y)return Y;K===X&&(W.value=null)}}return ce}async function M(F,W){let re=B(W);Q.isDocument(F)?await H(null,F.contents,re,Object.freeze([F]))===X&&(F.contents=null):await H(null,F,re,Object.freeze([]))}M.BREAK=Y,M.SKIP=Z,M.REMOVE=X;async function H(F,W,re,ee){let ce=await L(F,W,re,ee);if(Q.isNode(ce)||Q.isPair(ce))return N(F,ee,ce),H(F,ce,re,ee);if(typeof ce!="symbol"){if(Q.isCollection(W)){ee=Object.freeze(ee.concat(W));for(let pe=0;pe<W.items.length;++pe){let K=await H(pe,W.items[pe],re,ee);if(typeof K=="number")pe=K-1;else{if(K===Y)return Y;K===X&&(W.items.splice(pe,1),pe-=1)}}}else if(Q.isPair(W)){ee=Object.freeze(ee.concat(W));let pe=await H("key",W.key,re,ee);if(pe===Y)return Y;pe===X&&(W.key=null);let K=await H("value",W.value,re,ee);if(K===Y)return Y;K===X&&(W.value=null)}}return ce}function B(F){return typeof F=="object"&&(F.Collection||F.Node||F.Value)?Object.assign({Alias:F.Node,Map:F.Node,Scalar:F.Node,Seq:F.Node},F.Value&&{Map:F.Value,Scalar:F.Value,Seq:F.Value},F.Collection&&{Map:F.Collection,Seq:F.Collection},F):F}function L(F,W,re,ee){var ce,pe,K,se,ue;if(typeof re=="function")return re(F,W,ee);if(Q.isMap(W))return(ce=re.Map)==null?void 0:ce.call(re,F,W,ee);if(Q.isSeq(W))return(pe=re.Seq)==null?void 0:pe.call(re,F,W,ee);if(Q.isPair(W))return(K=re.Pair)==null?void 0:K.call(re,F,W,ee);if(Q.isScalar(W))return(se=re.Scalar)==null?void 0:se.call(re,F,W,ee);if(Q.isAlias(W))return(ue=re.Alias)==null?void 0:ue.call(re,F,W,ee)}function N(F,W,re){let ee=W[W.length-1];if(Q.isCollection(ee))ee.items[F]=re;else if(Q.isPair(ee))F==="key"?ee.key=re:ee.value=re;else if(Q.isDocument(ee))ee.contents=re;else{let ce=Q.isAlias(ee)?"alias":"scalar";throw new Error(`Cannot replace node with ${ce} parent`)}}G.visit=k,G.visitAsync=M}),Jf=P(G=>{var Q=xr(),Y=pa(),Z={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},X=A=>A.replace(/[!,[\]{}]/g,M=>Z[M]),k=class si{constructor(M,H){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},si.defaultYaml,M),this.tags=Object.assign({},si.defaultTags,H)}clone(){let M=new si(this.yaml,this.tags);return M.docStart=this.docStart,M}atDocument(){let M=new si(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:si.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},si.defaultTags);break}return M}add(M,H){this.atNextDocument&&(this.yaml={explicit:si.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},si.defaultTags),this.atNextDocument=!1);let B=M.trim().split(/[ \t]+/),L=B.shift();switch(L){case"%TAG":{if(B.length!==2&&(H(0,"%TAG directive should contain exactly two parts"),B.length<2))return!1;let[N,F]=B;return this.tags[N]=F,!0}case"%YAML":{if(this.yaml.explicit=!0,B.length!==1)return H(0,"%YAML directive should contain exactly one part"),!1;let[N]=B;if(N==="1.1"||N==="1.2")return this.yaml.version=N,!0;{let F=/^\d+\.\d+$/.test(N);return H(6,`Unsupported YAML version ${N}`,F),!1}}default:return H(0,`Unknown directive ${L}`,!0),!1}}tagName(M,H){if(M==="!")return"!";if(M[0]!=="!")return H(`Not a valid tag: ${M}`),null;if(M[1]==="<"){let F=M.slice(2,-1);return F==="!"||F==="!!"?(H(`Verbatim tags aren't resolved, so ${M} is invalid.`),null):(M[M.length-1]!==">"&&H("Verbatim tags must end with a >"),F)}let[,B,L]=M.match(/^(.*!)([^!]*)$/s);L||H(`The ${M} tag has no suffix`);let N=this.tags[B];if(N)try{return N+decodeURIComponent(L)}catch(F){return H(String(F)),null}return B==="!"?M:(H(`Could not resolve tag: ${M}`),null)}tagString(M){for(let[H,B]of Object.entries(this.tags))if(M.startsWith(B))return H+X(M.substring(B.length));return M[0]==="!"?M:`!<${M}>`}toString(M){let H=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],B=Object.entries(this.tags),L;if(M&&B.length>0&&Q.isNode(M.contents)){let N={};Y.visit(M.contents,(F,W)=>{Q.isNode(W)&&W.tag&&(N[W.tag]=!0)}),L=Object.keys(N)}else L=[];for(let[N,F]of B)N==="!!"&&F==="tag:yaml.org,2002:"||(!M||L.some(W=>W.startsWith(F)))&&H.push(`%TAG ${N} ${F}`);return H.join(`
`)}};k.defaultYaml={explicit:!1,version:"1.2"},k.defaultTags={"!!":"tag:yaml.org,2002:"},G.Directives=k}),nc=P(G=>{var Q=xr(),Y=pa();function Z(M){if(/[\x00-\x19\s,[\]{}]/.test(M)){let H=`Anchor must not contain whitespace or control characters: ${JSON.stringify(M)}`;throw new Error(H)}return!0}function X(M){let H=new Set;return Y.visit(M,{Value(B,L){L.anchor&&H.add(L.anchor)}}),H}function k(M,H){for(let B=1;;++B){let L=`${M}${B}`;if(!H.has(L))return L}}function A(M,H){let B=[],L=new Map,N=null;return{onAnchor:F=>{B.push(F),N||(N=X(M));let W=k(H,N);return N.add(W),W},setAnchors:()=>{for(let F of B){let W=L.get(F);if(typeof W=="object"&&W.anchor&&(Q.isScalar(W.node)||Q.isCollection(W.node)))W.node.anchor=W.anchor;else{let re=new Error("Failed to resolve repeated object (this should not happen)");throw re.source=F,re}}},sourceObjects:L}}G.anchorIsValid=Z,G.anchorNames=X,G.createNodeAnchors=A,G.findNewAnchor=k}),Yf=P(G=>{function Q(Y,Z,X,k){if(k&&typeof k=="object")if(Array.isArray(k))for(let A=0,M=k.length;A<M;++A){let H=k[A],B=Q(Y,k,String(A),H);B===void 0?delete k[A]:B!==H&&(k[A]=B)}else if(k instanceof Map)for(let A of Array.from(k.keys())){let M=k.get(A),H=Q(Y,k,A,M);H===void 0?k.delete(A):H!==M&&k.set(A,H)}else if(k instanceof Set)for(let A of Array.from(k)){let M=Q(Y,k,A,A);M===void 0?k.delete(A):M!==A&&(k.delete(A),k.add(M))}else for(let[A,M]of Object.entries(k)){let H=Q(Y,k,A,M);H===void 0?delete k[A]:H!==M&&(k[A]=H)}return Y.call(Z,X,k)}G.applyReviver=Q}),Ai=P(G=>{var Q=xr();function Y(Z,X,k){if(Array.isArray(Z))return Z.map((A,M)=>Y(A,String(M),k));if(Z&&typeof Z.toJSON=="function"){if(!k||!Q.hasAnchor(Z))return Z.toJSON(X,k);let A={aliasCount:0,count:1,res:void 0};k.anchors.set(Z,A),k.onCreate=H=>{A.res=H,delete k.onCreate};let M=Z.toJSON(X,k);return k.onCreate&&k.onCreate(M),M}return typeof Z=="bigint"&&!(k!=null&&k.keep)?Number(Z):Z}G.toJS=Y}),ic=P(G=>{var Q=Yf(),Y=xr(),Z=Ai(),X=class{constructor(k){Object.defineProperty(this,Y.NODE_TYPE,{value:k})}clone(){let k=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(k.range=this.range.slice()),k}toJS(k,{mapAsMap:A,maxAliasCount:M,onAnchor:H,reviver:B}={}){if(!Y.isDocument(k))throw new TypeError("A document argument is required");let L={anchors:new Map,doc:k,keep:!0,mapAsMap:A===!0,mapKeyWarned:!1,maxAliasCount:typeof M=="number"?M:100},N=Z.toJS(this,"",L);if(typeof H=="function")for(let{count:F,res:W}of L.anchors.values())H(W,F);return typeof B=="function"?Q.applyReviver(B,{"":N},"",N):N}};G.NodeBase=X}),fa=P(G=>{var Q=nc(),Y=pa(),Z=xr(),X=ic(),k=Ai(),A=class extends X.NodeBase{constructor(H){super(Z.ALIAS),this.source=H,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(H){let B;return Y.visit(H,{Node:(L,N)=>{if(N===this)return Y.visit.BREAK;N.anchor===this.source&&(B=N)}}),B}toJSON(H,B){if(!B)return{source:this.source};let{anchors:L,doc:N,maxAliasCount:F}=B,W=this.resolve(N);if(!W){let ee=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(ee)}let re=L.get(W);if(re||(k.toJS(W,null,B),re=L.get(W)),!re||re.res===void 0){let ee="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(ee)}if(F>=0&&(re.count+=1,re.aliasCount===0&&(re.aliasCount=M(N,W,L)),re.count*re.aliasCount>F)){let ee="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(ee)}return re.res}toString(H,B,L){let N=`*${this.source}`;if(H){if(Q.anchorIsValid(this.source),H.options.verifyAliasOrder&&!H.anchors.has(this.source)){let F=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(F)}if(H.implicitKey)return`${N} `}return N}};function M(H,B,L){if(Z.isAlias(B)){let N=B.resolve(H),F=L&&N&&L.get(N);return F?F.count*F.aliasCount:0}else if(Z.isCollection(B)){let N=0;for(let F of B.items){let W=M(H,F,L);W>N&&(N=W)}return N}else if(Z.isPair(B)){let N=M(H,B.key,L),F=M(H,B.value,L);return Math.max(N,F)}return 1}G.Alias=A}),Qr=P(G=>{var Q=xr(),Y=ic(),Z=Ai(),X=A=>!A||typeof A!="function"&&typeof A!="object",k=class extends Y.NodeBase{constructor(A){super(Q.SCALAR),this.value=A}toJSON(A,M){return M!=null&&M.keep?this.value:Z.toJS(this.value,A,M)}toString(){return String(this.value)}};k.BLOCK_FOLDED="BLOCK_FOLDED",k.BLOCK_LITERAL="BLOCK_LITERAL",k.PLAIN="PLAIN",k.QUOTE_DOUBLE="QUOTE_DOUBLE",k.QUOTE_SINGLE="QUOTE_SINGLE",G.Scalar=k,G.isScalarValue=X}),ma=P(G=>{var Q=fa(),Y=xr(),Z=Qr(),X="tag:yaml.org,2002:";function k(M,H,B){var L;if(H){let N=B.filter(W=>W.tag===H),F=(L=N.find(W=>!W.format))!=null?L:N[0];if(!F)throw new Error(`Tag ${H} not found`);return F}return B.find(N=>{var F;return((F=N.identify)==null?void 0:F.call(N,M))&&!N.format})}function A(M,H,B){var L,N,F;if(Y.isDocument(M)&&(M=M.contents),Y.isNode(M))return M;if(Y.isPair(M)){let ae=(N=(L=B.schema[Y.MAP]).createNode)==null?void 0:N.call(L,B.schema,null,B);return ae.items.push(M),ae}(M instanceof String||M instanceof Number||M instanceof Boolean||typeof BigInt<"u"&&M instanceof BigInt)&&(M=M.valueOf());let{aliasDuplicateObjects:W,onAnchor:re,onTagObj:ee,schema:ce,sourceObjects:pe}=B,K;if(W&&M&&typeof M=="object"){if(K=pe.get(M),K)return K.anchor||(K.anchor=re(M)),new Q.Alias(K.anchor);K={anchor:null,node:null},pe.set(M,K)}H!=null&&H.startsWith("!!")&&(H=X+H.slice(2));let se=k(M,H,ce.tags);if(!se){if(M&&typeof M.toJSON=="function"&&(M=M.toJSON()),!M||typeof M!="object"){let ae=new Z.Scalar(M);return K&&(K.node=ae),ae}se=M instanceof Map?ce[Y.MAP]:Symbol.iterator in Object(M)?ce[Y.SEQ]:ce[Y.MAP]}ee&&(ee(se),delete B.onTagObj);let ue=se!=null&&se.createNode?se.createNode(B.schema,M,B):typeof((F=se==null?void 0:se.nodeClass)==null?void 0:F.from)=="function"?se.nodeClass.from(B.schema,M,B):new Z.Scalar(M);return H?ue.tag=H:se.default||(ue.tag=se.tag),K&&(K.node=ue),ue}G.createNode=A}),sc=P(G=>{var Q=ma(),Y=xr(),Z=ic();function X(M,H,B){let L=B;for(let N=H.length-1;N>=0;--N){let F=H[N];if(typeof F=="number"&&Number.isInteger(F)&&F>=0){let W=[];W[F]=L,L=W}else L=new Map([[F,L]])}return Q.createNode(L,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:M,sourceObjects:new Map})}var k=M=>M==null||typeof M=="object"&&!!M[Symbol.iterator]().next().done,A=class extends Z.NodeBase{constructor(M,H){super(M),Object.defineProperty(this,"schema",{value:H,configurable:!0,enumerable:!1,writable:!0})}clone(M){let H=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return M&&(H.schema=M),H.items=H.items.map(B=>Y.isNode(B)||Y.isPair(B)?B.clone(M):B),this.range&&(H.range=this.range.slice()),H}addIn(M,H){if(k(M))this.add(H);else{let[B,...L]=M,N=this.get(B,!0);if(Y.isCollection(N))N.addIn(L,H);else if(N===void 0&&this.schema)this.set(B,X(this.schema,L,H));else throw new Error(`Expected YAML collection at ${B}. Remaining path: ${L}`)}}deleteIn(M){let[H,...B]=M;if(B.length===0)return this.delete(H);let L=this.get(H,!0);if(Y.isCollection(L))return L.deleteIn(B);throw new Error(`Expected YAML collection at ${H}. Remaining path: ${B}`)}getIn(M,H){let[B,...L]=M,N=this.get(B,!0);return L.length===0?!H&&Y.isScalar(N)?N.value:N:Y.isCollection(N)?N.getIn(L,H):void 0}hasAllNullValues(M){return this.items.every(H=>{if(!Y.isPair(H))return!1;let B=H.value;return B==null||M&&Y.isScalar(B)&&B.value==null&&!B.commentBefore&&!B.comment&&!B.tag})}hasIn(M){let[H,...B]=M;if(B.length===0)return this.has(H);let L=this.get(H,!0);return Y.isCollection(L)?L.hasIn(B):!1}setIn(M,H){let[B,...L]=M;if(L.length===0)this.set(B,H);else{let N=this.get(B,!0);if(Y.isCollection(N))N.setIn(L,H);else if(N===void 0&&this.schema)this.set(B,X(this.schema,L,H));else throw new Error(`Expected YAML collection at ${B}. Remaining path: ${L}`)}}};G.Collection=A,G.collectionFromPath=X,G.isEmptyPath=k}),ga=P(G=>{var Q=X=>X.replace(/^(?!$)(?: $)?/gm,"#");function Y(X,k){return/^\n+$/.test(X)?X.substring(1):k?X.replace(/^(?! *$)/gm,k):X}var Z=(X,k,A)=>X.endsWith(`
`)?Y(A,k):A.includes(`
`)?`
`+Y(A,k):(X.endsWith(" ")?"":" ")+A;G.indentComment=Y,G.lineComment=Z,G.stringifyComment=Q}),kS=P(G=>{var Q="flow",Y="block",Z="quoted";function X(A,M,H="flow",{indentAtStart:B,lineWidth:L=80,minContentWidth:N=20,onFold:F,onOverflow:W}={}){if(!L||L<0)return A;L<N&&(N=0);let re=Math.max(1+N,1+L-M.length);if(A.length<=re)return A;let ee=[],ce={},pe=L-M.length;typeof B=="number"&&(B>L-Math.max(2,N)?ee.push(0):pe=L-B);let K,se,ue=!1,ae=-1,oe=-1,fe=-1;H===Y&&(ae=k(A,ae,M.length),ae!==-1&&(pe=ae+re));for(let Ee;Ee=A[ae+=1];){if(H===Z&&Ee==="\\"){switch(oe=ae,A[ae+1]){case"x":ae+=3;break;case"u":ae+=5;break;case"U":ae+=9;break;default:ae+=1}fe=ae}if(Ee===`
`)H===Y&&(ae=k(A,ae,M.length)),pe=ae+M.length+re,K=void 0;else{if(Ee===" "&&se&&se!==" "&&se!==`
`&&se!=="	"){let Ie=A[ae+1];Ie&&Ie!==" "&&Ie!==`
`&&Ie!=="	"&&(K=ae)}if(ae>=pe)if(K)ee.push(K),pe=K+re,K=void 0;else if(H===Z){for(;se===" "||se==="	";)se=Ee,Ee=A[ae+=1],ue=!0;let Ie=ae>fe+1?ae-2:oe-1;if(ce[Ie])return A;ee.push(Ie),ce[Ie]=!0,pe=Ie+re,K=void 0}else ue=!0}se=Ee}if(ue&&W&&W(),ee.length===0)return A;F&&F();let we=A.slice(0,ee[0]);for(let Ee=0;Ee<ee.length;++Ee){let Ie=ee[Ee],Ae=ee[Ee+1]||A.length;Ie===0?we=`
${M}${A.slice(0,Ae)}`:(H===Z&&ce[Ie]&&(we+=`${A[Ie]}\\`),we+=`
${M}${A.slice(Ie+1,Ae)}`)}return we}function k(A,M,H){let B=M,L=M+1,N=A[L];for(;N===" "||N==="	";)if(M<L+H)N=A[++M];else{do N=A[++M];while(N&&N!==`
`);B=M,L=M+1,N=A[L]}return B}G.FOLD_BLOCK=Y,G.FOLD_FLOW=Q,G.FOLD_QUOTED=Z,G.foldFlowLines=X}),_a=P(G=>{var Q=Qr(),Y=kS(),Z=(W,re)=>({indentAtStart:re?W.indent.length:W.indentAtStart,lineWidth:W.options.lineWidth,minContentWidth:W.options.minContentWidth}),X=W=>/^(%|---|\.\.\.)/m.test(W);function k(W,re,ee){if(!re||re<0)return!1;let ce=re-ee,pe=W.length;if(pe<=ce)return!1;for(let K=0,se=0;K<pe;++K)if(W[K]===`
`){if(K-se>ce)return!0;if(se=K+1,pe-se<=ce)return!1}return!0}function A(W,re){let ee=JSON.stringify(W);if(re.options.doubleQuotedAsJSON)return ee;let{implicitKey:ce}=re,pe=re.options.doubleQuotedMinMultiLineLength,K=re.indent||(X(W)?"  ":""),se="",ue=0;for(let ae=0,oe=ee[ae];oe;oe=ee[++ae])if(oe===" "&&ee[ae+1]==="\\"&&ee[ae+2]==="n"&&(se+=ee.slice(ue,ae)+"\\ ",ae+=1,ue=ae,oe="\\"),oe==="\\")switch(ee[ae+1]){case"u":{se+=ee.slice(ue,ae);let fe=ee.substr(ae+2,4);switch(fe){case"0000":se+="\\0";break;case"0007":se+="\\a";break;case"000b":se+="\\v";break;case"001b":se+="\\e";break;case"0085":se+="\\N";break;case"00a0":se+="\\_";break;case"2028":se+="\\L";break;case"2029":se+="\\P";break;default:fe.substr(0,2)==="00"?se+="\\x"+fe.substr(2):se+=ee.substr(ae,6)}ae+=5,ue=ae+1}break;case"n":if(ce||ee[ae+2]==='"'||ee.length<pe)ae+=1;else{for(se+=ee.slice(ue,ae)+`

`;ee[ae+2]==="\\"&&ee[ae+3]==="n"&&ee[ae+4]!=='"';)se+=`
`,ae+=2;se+=K,ee[ae+2]===" "&&(se+="\\"),ae+=1,ue=ae+1}break;default:ae+=1}return se=ue?se+ee.slice(ue):ee,ce?se:Y.foldFlowLines(se,K,Y.FOLD_QUOTED,Z(re,!1))}function M(W,re){if(re.options.singleQuote===!1||re.implicitKey&&W.includes(`
`)||/[ \t]\n|\n[ \t]/.test(W))return A(W,re);let ee=re.indent||(X(W)?"  ":""),ce="'"+W.replace(/'/g,"''").replace(/\n+/g,`$&
${ee}`)+"'";return re.implicitKey?ce:Y.foldFlowLines(ce,ee,Y.FOLD_FLOW,Z(re,!1))}function H(W,re){let{singleQuote:ee}=re.options,ce;if(ee===!1)ce=A;else{let pe=W.includes('"'),K=W.includes("'");pe&&!K?ce=M:K&&!pe?ce=A:ce=ee?M:A}return ce(W,re)}var B;try{B=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{B=/\n+(?!\n|$)/g}function L({comment:W,type:re,value:ee},ce,pe,K){let{blockQuote:se,commentString:ue,lineWidth:ae}=ce.options;if(!se||/\n[\t ]+$/.test(ee)||/^\s*$/.test(ee))return H(ee,ce);let oe=ce.indent||(ce.forceBlockIndent||X(ee)?"  ":""),fe=se==="literal"?!0:se==="folded"||re===Q.Scalar.BLOCK_FOLDED?!1:re===Q.Scalar.BLOCK_LITERAL?!0:!k(ee,ae,oe.length);if(!ee)return fe?`|
`:`>
`;let we,Ee;for(Ee=ee.length;Ee>0;--Ee){let Tt=ee[Ee-1];if(Tt!==`
`&&Tt!=="	"&&Tt!==" ")break}let Ie=ee.substring(Ee),Ae=Ie.indexOf(`
`);Ae===-1?we="-":ee===Ie||Ae!==Ie.length-1?(we="+",K&&K()):we="",Ie&&(ee=ee.slice(0,-Ie.length),Ie[Ie.length-1]===`
`&&(Ie=Ie.slice(0,-1)),Ie=Ie.replace(B,`$&${oe}`));let He=!1,Fe,Ue=-1;for(Fe=0;Fe<ee.length;++Fe){let Tt=ee[Fe];if(Tt===" ")He=!0;else if(Tt===`
`)Ue=Fe;else break}let et=ee.substring(0,Ue<Fe?Ue+1:Fe);et&&(ee=ee.substring(et.length),et=et.replace(/\n+/g,`$&${oe}`));let ft=(fe?"|":">")+(He?oe?"2":"1":"")+we;if(W&&(ft+=" "+ue(W.replace(/ ?[\r\n]+/g," ")),pe&&pe()),fe)return ee=ee.replace(/\n+/g,`$&${oe}`),`${ft}
${oe}${et}${ee}${Ie}`;ee=ee.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${oe}`);let ht=Y.foldFlowLines(`${et}${ee}${Ie}`,oe,Y.FOLD_BLOCK,Z(ce,!0));return`${ft}
${oe}${ht}`}function N(W,re,ee,ce){let{type:pe,value:K}=W,{actualString:se,implicitKey:ue,indent:ae,indentStep:oe,inFlow:fe}=re;if(ue&&K.includes(`
`)||fe&&/[[\]{},]/.test(K))return H(K,re);if(!K||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(K))return ue||fe||!K.includes(`
`)?H(K,re):L(W,re,ee,ce);if(!ue&&!fe&&pe!==Q.Scalar.PLAIN&&K.includes(`
`))return L(W,re,ee,ce);if(X(K)){if(ae==="")return re.forceBlockIndent=!0,L(W,re,ee,ce);if(ue&&ae===oe)return H(K,re)}let we=K.replace(/\n+/g,`$&
${ae}`);if(se){let Ee=He=>{var Fe;return He.default&&He.tag!=="tag:yaml.org,2002:str"&&((Fe=He.test)==null?void 0:Fe.test(we))},{compat:Ie,tags:Ae}=re.doc.schema;if(Ae.some(Ee)||Ie!=null&&Ie.some(Ee))return H(K,re)}return ue?we:Y.foldFlowLines(we,ae,Y.FOLD_FLOW,Z(re,!1))}function F(W,re,ee,ce){let{implicitKey:pe,inFlow:K}=re,se=typeof W.value=="string"?W:Object.assign({},W,{value:String(W.value)}),{type:ue}=W;ue!==Q.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(se.value)&&(ue=Q.Scalar.QUOTE_DOUBLE);let ae=fe=>{switch(fe){case Q.Scalar.BLOCK_FOLDED:case Q.Scalar.BLOCK_LITERAL:return pe||K?H(se.value,re):L(se,re,ee,ce);case Q.Scalar.QUOTE_DOUBLE:return A(se.value,re);case Q.Scalar.QUOTE_SINGLE:return M(se.value,re);case Q.Scalar.PLAIN:return N(se,re,ee,ce);default:return null}},oe=ae(ue);if(oe===null){let{defaultKeyType:fe,defaultStringType:we}=re.options,Ee=pe&&fe||we;if(oe=ae(Ee),oe===null)throw new Error(`Unsupported default string type ${Ee}`)}return oe}G.stringifyString=F}),ba=P(G=>{var Q=nc(),Y=xr(),Z=ga(),X=_a();function k(B,L){let N=Object.assign({blockQuote:!0,commentString:Z.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},B.schema.toStringOptions,L),F;switch(N.collectionStyle){case"block":F=!1;break;case"flow":F=!0;break;default:F=null}return{anchors:new Set,doc:B,flowCollectionPadding:N.flowCollectionPadding?" ":"",indent:"",indentStep:typeof N.indent=="number"?" ".repeat(N.indent):"  ",inFlow:F,options:N}}function A(B,L){var N,F,W,re;if(L.tag){let pe=B.filter(K=>K.tag===L.tag);if(pe.length>0)return(N=pe.find(K=>K.format===L.format))!=null?N:pe[0]}let ee,ce;if(Y.isScalar(L)){ce=L.value;let pe=B.filter(K=>{var se;return(se=K.identify)==null?void 0:se.call(K,ce)});if(pe.length>1){let K=pe.filter(se=>se.test);K.length>0&&(pe=K)}ee=(F=pe.find(K=>K.format===L.format))!=null?F:pe.find(K=>!K.format)}else ce=L,ee=B.find(pe=>pe.nodeClass&&ce instanceof pe.nodeClass);if(!ee){let pe=(re=(W=ce==null?void 0:ce.constructor)==null?void 0:W.name)!=null?re:typeof ce;throw new Error(`Tag not resolved for ${pe} value`)}return ee}function M(B,L,{anchors:N,doc:F}){if(!F.directives)return"";let W=[],re=(Y.isScalar(B)||Y.isCollection(B))&&B.anchor;re&&Q.anchorIsValid(re)&&(N.add(re),W.push(`&${re}`));let ee=B.tag?B.tag:L.default?null:L.tag;return ee&&W.push(F.directives.tagString(ee)),W.join(" ")}function H(B,L,N,F){var W,re;if(Y.isPair(B))return B.toString(L,N,F);if(Y.isAlias(B)){if(L.doc.directives)return B.toString(L);if((W=L.resolvedAliases)!=null&&W.has(B))throw new TypeError("Cannot stringify circular structure without alias nodes");L.resolvedAliases?L.resolvedAliases.add(B):L.resolvedAliases=new Set([B]),B=B.resolve(L.doc)}let ee,ce=Y.isNode(B)?B:L.doc.createNode(B,{onTagObj:se=>ee=se});ee||(ee=A(L.doc.schema.tags,ce));let pe=M(ce,ee,L);pe.length>0&&(L.indentAtStart=((re=L.indentAtStart)!=null?re:0)+pe.length+1);let K=typeof ee.stringify=="function"?ee.stringify(ce,L,N,F):Y.isScalar(ce)?X.stringifyString(ce,L,N,F):ce.toString(L,N,F);return pe?Y.isScalar(ce)||K[0]==="{"||K[0]==="["?`${pe} ${K}`:`${pe}
${L.indent}${K}`:K}G.createStringifyContext=k,G.stringify=H}),AS=P(G=>{var Q=xr(),Y=Qr(),Z=ba(),X=ga();function k({key:A,value:M},H,B,L){var N,F;let{allNullValues:W,doc:re,indent:ee,indentStep:ce,options:{commentString:pe,indentSeq:K,simpleKeys:se}}=H,ue=Q.isNode(A)&&A.comment||null;if(se){if(ue)throw new Error("With simple keys, key nodes cannot have comments");if(Q.isCollection(A)||!Q.isNode(A)&&typeof A=="object"){let et="With simple keys, collection cannot be used as a key value";throw new Error(et)}}let ae=!se&&(!A||ue&&M==null&&!H.inFlow||Q.isCollection(A)||(Q.isScalar(A)?A.type===Y.Scalar.BLOCK_FOLDED||A.type===Y.Scalar.BLOCK_LITERAL:typeof A=="object"));H=Object.assign({},H,{allNullValues:!1,implicitKey:!ae&&(se||!W),indent:ee+ce});let oe=!1,fe=!1,we=Z.stringify(A,H,()=>oe=!0,()=>fe=!0);if(!ae&&!H.inFlow&&we.length>1024){if(se)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");ae=!0}if(H.inFlow){if(W||M==null)return oe&&B&&B(),we===""?"?":ae?`? ${we}`:we}else if(W&&!se||M==null&&ae)return we=`? ${we}`,ue&&!oe?we+=X.lineComment(we,H.indent,pe(ue)):fe&&L&&L(),we;oe&&(ue=null),ae?(ue&&(we+=X.lineComment(we,H.indent,pe(ue))),we=`? ${we}
${ee}:`):(we=`${we}:`,ue&&(we+=X.lineComment(we,H.indent,pe(ue))));let Ee,Ie,Ae;Q.isNode(M)?(Ee=!!M.spaceBefore,Ie=M.commentBefore,Ae=M.comment):(Ee=!1,Ie=null,Ae=null,M&&typeof M=="object"&&(M=re.createNode(M))),H.implicitKey=!1,!ae&&!ue&&Q.isScalar(M)&&(H.indentAtStart=we.length+1),fe=!1,!K&&ce.length>=2&&!H.inFlow&&!ae&&Q.isSeq(M)&&!M.flow&&!M.tag&&!M.anchor&&(H.indent=H.indent.substring(2));let He=!1,Fe=Z.stringify(M,H,()=>He=!0,()=>fe=!0),Ue=" ";if(ue||Ee||Ie){if(Ue=Ee?`
`:"",Ie){let et=pe(Ie);Ue+=`
${X.indentComment(et,H.indent)}`}Fe===""&&!H.inFlow?Ue===`
`&&(Ue=`

`):Ue+=`
${H.indent}`}else if(!ae&&Q.isCollection(M)){let et=Fe[0],ft=Fe.indexOf(`
`),ht=ft!==-1,Tt=(F=(N=H.inFlow)!=null?N:M.flow)!=null?F:M.items.length===0;if(ht||!Tt){let vt=!1;if(ht&&(et==="&"||et==="!")){let Ot=Fe.indexOf(" ");et==="&"&&Ot!==-1&&Ot<ft&&Fe[Ot+1]==="!"&&(Ot=Fe.indexOf(" ",Ot+1)),(Ot===-1||ft<Ot)&&(vt=!0)}vt||(Ue=`
${H.indent}`)}}else(Fe===""||Fe[0]===`
`)&&(Ue="");return we+=Ue+Fe,H.inFlow?He&&B&&B():Ae&&!He?we+=X.lineComment(we,H.indent,pe(Ae)):fe&&L&&L(),we}G.stringifyPair=k}),Xf=P(G=>{function Q(Z,...X){Z==="debug"&&console.log(...X)}function Y(Z,X){(Z==="debug"||Z==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(X):console.warn(X))}G.debug=Q,G.warn=Y}),ac=P(G=>{var Q=xr(),Y=Qr(),Z="<<",X={identify:H=>H===Z||typeof H=="symbol"&&H.description===Z,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Y.Scalar(Symbol(Z)),{addToJSMap:A}),stringify:()=>Z},k=(H,B)=>(X.identify(B)||Q.isScalar(B)&&(!B.type||B.type===Y.Scalar.PLAIN)&&X.identify(B.value))&&(H==null?void 0:H.doc.schema.tags.some(L=>L.tag===X.tag&&L.default));function A(H,B,L){if(L=H&&Q.isAlias(L)?L.resolve(H.doc):L,Q.isSeq(L))for(let N of L.items)M(H,B,N);else if(Array.isArray(L))for(let N of L)M(H,B,N);else M(H,B,L)}function M(H,B,L){let N=H&&Q.isAlias(L)?L.resolve(H.doc):L;if(!Q.isMap(N))throw new Error("Merge sources must be maps or map aliases");let F=N.toJSON(null,H,Map);for(let[W,re]of F)B instanceof Map?B.has(W)||B.set(W,re):B instanceof Set?B.add(W):Object.prototype.hasOwnProperty.call(B,W)||Object.defineProperty(B,W,{value:re,writable:!0,enumerable:!0,configurable:!0});return B}G.addMergeToJSMap=A,G.isMergeKey=k,G.merge=X}),Qf=P(G=>{var Q=Xf(),Y=ac(),Z=ba(),X=xr(),k=Ai();function A(H,B,{key:L,value:N}){if(X.isNode(L)&&L.addToJSMap)L.addToJSMap(H,B,N);else if(Y.isMergeKey(H,L))Y.addMergeToJSMap(H,B,N);else{let F=k.toJS(L,"",H);if(B instanceof Map)B.set(F,k.toJS(N,F,H));else if(B instanceof Set)B.add(F);else{let W=M(L,F,H),re=k.toJS(N,W,H);W in B?Object.defineProperty(B,W,{value:re,writable:!0,enumerable:!0,configurable:!0}):B[W]=re}}return B}function M(H,B,L){if(B===null)return"";if(typeof B!="object")return String(B);if(X.isNode(H)&&L!=null&&L.doc){let N=Z.createStringifyContext(L.doc,{});N.anchors=new Set;for(let W of L.anchors.keys())N.anchors.add(W.anchor);N.inFlow=!0,N.inStringifyKey=!0;let F=H.toString(N);if(!L.mapKeyWarned){let W=JSON.stringify(F);W.length>40&&(W=W.substring(0,36)+'..."'),Q.warn(L.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${W}. Set mapAsMap: true to use object keys.`),L.mapKeyWarned=!0}return F}return JSON.stringify(B)}G.addPairToJSMap=A}),Ii=P(G=>{var Q=ma(),Y=AS(),Z=Qf(),X=xr();function k(M,H,B){let L=Q.createNode(M,void 0,B),N=Q.createNode(H,void 0,B);return new A(L,N)}var A=class jw{constructor(H,B=null){Object.defineProperty(this,X.NODE_TYPE,{value:X.PAIR}),this.key=H,this.value=B}clone(H){let{key:B,value:L}=this;return X.isNode(B)&&(B=B.clone(H)),X.isNode(L)&&(L=L.clone(H)),new jw(B,L)}toJSON(H,B){let L=B!=null&&B.mapAsMap?new Map:{};return Z.addPairToJSMap(B,L,this)}toString(H,B,L){return H!=null&&H.doc?Y.stringifyPair(this,H,B,L):JSON.stringify(this)}};G.Pair=A,G.createPair=k}),Zf=P(G=>{var Q=xr(),Y=ba(),Z=ga();function X(H,B,L){var N;return(((N=B.inFlow)!=null?N:H.flow)?A:k)(H,B,L)}function k({comment:H,items:B},L,{blockItemPrefix:N,flowChars:F,itemIndent:W,onChompKeep:re,onComment:ee}){let{indent:ce,options:{commentString:pe}}=L,K=Object.assign({},L,{indent:W,type:null}),se=!1,ue=[];for(let oe=0;oe<B.length;++oe){let fe=B[oe],we=null;if(Q.isNode(fe))!se&&fe.spaceBefore&&ue.push(""),M(L,ue,fe.commentBefore,se),fe.comment&&(we=fe.comment);else if(Q.isPair(fe)){let Ie=Q.isNode(fe.key)?fe.key:null;Ie&&(!se&&Ie.spaceBefore&&ue.push(""),M(L,ue,Ie.commentBefore,se))}se=!1;let Ee=Y.stringify(fe,K,()=>we=null,()=>se=!0);we&&(Ee+=Z.lineComment(Ee,W,pe(we))),se&&we&&(se=!1),ue.push(N+Ee)}let ae;if(ue.length===0)ae=F.start+F.end;else{ae=ue[0];for(let oe=1;oe<ue.length;++oe){let fe=ue[oe];ae+=fe?`
${ce}${fe}`:`
`}}return H?(ae+=`
`+Z.indentComment(pe(H),ce),ee&&ee()):se&&re&&re(),ae}function A({items:H},B,{flowChars:L,itemIndent:N}){let{indent:F,indentStep:W,flowCollectionPadding:re,options:{commentString:ee}}=B;N+=W;let ce=Object.assign({},B,{indent:N,inFlow:!0,type:null}),pe=!1,K=0,se=[];for(let oe=0;oe<H.length;++oe){let fe=H[oe],we=null;if(Q.isNode(fe))fe.spaceBefore&&se.push(""),M(B,se,fe.commentBefore,!1),fe.comment&&(we=fe.comment);else if(Q.isPair(fe)){let Ie=Q.isNode(fe.key)?fe.key:null;Ie&&(Ie.spaceBefore&&se.push(""),M(B,se,Ie.commentBefore,!1),Ie.comment&&(pe=!0));let Ae=Q.isNode(fe.value)?fe.value:null;Ae?(Ae.comment&&(we=Ae.comment),Ae.commentBefore&&(pe=!0)):fe.value==null&&Ie!=null&&Ie.comment&&(we=Ie.comment)}we&&(pe=!0);let Ee=Y.stringify(fe,ce,()=>we=null);oe<H.length-1&&(Ee+=","),we&&(Ee+=Z.lineComment(Ee,N,ee(we))),!pe&&(se.length>K||Ee.includes(`
`))&&(pe=!0),se.push(Ee),K=se.length}let{start:ue,end:ae}=L;if(se.length===0)return ue+ae;if(!pe){let oe=se.reduce((fe,we)=>fe+we.length+2,2);pe=B.options.lineWidth>0&&oe>B.options.lineWidth}if(pe){let oe=ue;for(let fe of se)oe+=fe?`
${W}${F}${fe}`:`
`;return`${oe}
${F}${ae}`}else return`${ue}${re}${se.join(" ")}${re}${ae}`}function M({indent:H,options:{commentString:B}},L,N,F){if(N&&F&&(N=N.replace(/^\n+/,"")),N){let W=Z.indentComment(B(N),H);L.push(W.trimStart())}}G.stringifyCollection=X}),Ni=P(G=>{var Q=Zf(),Y=Qf(),Z=sc(),X=xr(),k=Ii(),A=Qr();function M(B,L){let N=X.isScalar(L)?L.value:L;for(let F of B)if(X.isPair(F)&&(F.key===L||F.key===N||X.isScalar(F.key)&&F.key.value===N))return F}var H=class extends Z.Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(B){super(X.MAP,B),this.items=[]}static from(B,L,N){let{keepUndefined:F,replacer:W}=N,re=new this(B),ee=(ce,pe)=>{if(typeof W=="function")pe=W.call(L,ce,pe);else if(Array.isArray(W)&&!W.includes(ce))return;(pe!==void 0||F)&&re.items.push(k.createPair(ce,pe,N))};if(L instanceof Map)for(let[ce,pe]of L)ee(ce,pe);else if(L&&typeof L=="object")for(let ce of Object.keys(L))ee(ce,L[ce]);return typeof B.sortMapEntries=="function"&&re.items.sort(B.sortMapEntries),re}add(B,L){var N;let F;X.isPair(B)?F=B:!B||typeof B!="object"||!("key"in B)?F=new k.Pair(B,B==null?void 0:B.value):F=new k.Pair(B.key,B.value);let W=M(this.items,F.key),re=(N=this.schema)==null?void 0:N.sortMapEntries;if(W){if(!L)throw new Error(`Key ${F.key} already set`);X.isScalar(W.value)&&A.isScalarValue(F.value)?W.value.value=F.value:W.value=F.value}else if(re){let ee=this.items.findIndex(ce=>re(F,ce)<0);ee===-1?this.items.push(F):this.items.splice(ee,0,F)}else this.items.push(F)}delete(B){let L=M(this.items,B);return L?this.items.splice(this.items.indexOf(L),1).length>0:!1}get(B,L){var N;let F=M(this.items,B),W=F==null?void 0:F.value;return(N=!L&&X.isScalar(W)?W.value:W)!=null?N:void 0}has(B){return!!M(this.items,B)}set(B,L){this.add(new k.Pair(B,L),!0)}toJSON(B,L,N){let F=N?new N:L!=null&&L.mapAsMap?new Map:{};L!=null&&L.onCreate&&L.onCreate(F);for(let W of this.items)Y.addPairToJSMap(L,F,W);return F}toString(B,L,N){if(!B)return JSON.stringify(this);for(let F of this.items)if(!X.isPair(F))throw new Error(`Map items must all be pairs; found ${JSON.stringify(F)} instead`);return!B.allNullValues&&this.hasAllNullValues(!1)&&(B=Object.assign({},B,{allNullValues:!0})),Q.stringifyCollection(this,B,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:B.indent||"",onChompKeep:N,onComment:L})}};G.YAMLMap=H,G.findPair=M}),ws=P(G=>{var Q=xr(),Y=Ni(),Z={collection:"map",default:!0,nodeClass:Y.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(X,k){return Q.isMap(X)||k("Expected a mapping for this tag"),X},createNode:(X,k,A)=>Y.YAMLMap.from(X,k,A)};G.map=Z}),Ri=P(G=>{var Q=ma(),Y=Zf(),Z=sc(),X=xr(),k=Qr(),A=Ai(),M=class extends Z.Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(B){super(X.SEQ,B),this.items=[]}add(B){this.items.push(B)}delete(B){let L=H(B);return typeof L!="number"?!1:this.items.splice(L,1).length>0}get(B,L){let N=H(B);if(typeof N!="number")return;let F=this.items[N];return!L&&X.isScalar(F)?F.value:F}has(B){let L=H(B);return typeof L=="number"&&L<this.items.length}set(B,L){let N=H(B);if(typeof N!="number")throw new Error(`Expected a valid index, not ${B}.`);let F=this.items[N];X.isScalar(F)&&k.isScalarValue(L)?F.value=L:this.items[N]=L}toJSON(B,L){let N=[];L!=null&&L.onCreate&&L.onCreate(N);let F=0;for(let W of this.items)N.push(A.toJS(W,String(F++),L));return N}toString(B,L,N){return B?Y.stringifyCollection(this,B,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(B.indent||"")+"  ",onChompKeep:N,onComment:L}):JSON.stringify(this)}static from(B,L,N){let{replacer:F}=N,W=new this(B);if(L&&Symbol.iterator in Object(L)){let re=0;for(let ee of L){if(typeof F=="function"){let ce=L instanceof Set?ee:String(re++);ee=F.call(L,ce,ee)}W.items.push(Q.createNode(ee,void 0,N))}}return W}};function H(B){let L=X.isScalar(B)?B.value:B;return L&&typeof L=="string"&&(L=Number(L)),typeof L=="number"&&Number.isInteger(L)&&L>=0?L:null}G.YAMLSeq=M}),ys=P(G=>{var Q=xr(),Y=Ri(),Z={collection:"seq",default:!0,nodeClass:Y.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(X,k){return Q.isSeq(X)||k("Expected a sequence for this tag"),X},createNode:(X,k,A)=>Y.YAMLSeq.from(X,k,A)};G.seq=Z}),va=P(G=>{var Q=_a(),Y={identify:Z=>typeof Z=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:Z=>Z,stringify(Z,X,k,A){return X=Object.assign({actualString:!0},X),Q.stringifyString(Z,X,k,A)}};G.string=Y}),oc=P(G=>{var Q=Qr(),Y={identify:Z=>Z==null,createNode:()=>new Q.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Q.Scalar(null),stringify:({source:Z},X)=>typeof Z=="string"&&Y.test.test(Z)?Z:X.options.nullStr};G.nullTag=Y}),em=P(G=>{var Q=Qr(),Y={identify:Z=>typeof Z=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:Z=>new Q.Scalar(Z[0]==="t"||Z[0]==="T"),stringify({source:Z,value:X},k){if(Z&&Y.test.test(Z)){let A=Z[0]==="t"||Z[0]==="T";if(X===A)return Z}return X?k.options.trueStr:k.options.falseStr}};G.boolTag=Y}),Ss=P(G=>{function Q({format:Y,minFractionDigits:Z,tag:X,value:k}){if(typeof k=="bigint")return String(k);let A=typeof k=="number"?k:Number(k);if(!isFinite(A))return isNaN(A)?".nan":A<0?"-.inf":".inf";let M=JSON.stringify(k);if(!Y&&Z&&(!X||X==="tag:yaml.org,2002:float")&&/^\d/.test(M)){let H=M.indexOf(".");H<0&&(H=M.length,M+=".");let B=Z-(M.length-H-1);for(;B-- >0;)M+="0"}return M}G.stringifyNumber=Q}),tm=P(G=>{var Q=Qr(),Y=Ss(),Z={identify:A=>typeof A=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:A=>A.slice(-3).toLowerCase()==="nan"?NaN:A[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Y.stringifyNumber},X={identify:A=>typeof A=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:A=>parseFloat(A),stringify(A){let M=Number(A.value);return isFinite(M)?M.toExponential():Y.stringifyNumber(A)}},k={identify:A=>typeof A=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(A){let M=new Q.Scalar(parseFloat(A)),H=A.indexOf(".");return H!==-1&&A[A.length-1]==="0"&&(M.minFractionDigits=A.length-H-1),M},stringify:Y.stringifyNumber};G.float=k,G.floatExp=X,G.floatNaN=Z}),rm=P(G=>{var Q=Ss(),Y=H=>typeof H=="bigint"||Number.isInteger(H),Z=(H,B,L,{intAsBigInt:N})=>N?BigInt(H):parseInt(H.substring(B),L);function X(H,B,L){let{value:N}=H;return Y(N)&&N>=0?L+N.toString(B):Q.stringifyNumber(H)}var k={identify:H=>Y(H)&&H>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(H,B,L)=>Z(H,2,8,L),stringify:H=>X(H,8,"0o")},A={identify:Y,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(H,B,L)=>Z(H,0,10,L),stringify:Q.stringifyNumber},M={identify:H=>Y(H)&&H>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(H,B,L)=>Z(H,2,16,L),stringify:H=>X(H,16,"0x")};G.int=A,G.intHex=M,G.intOct=k}),IS=P(G=>{var Q=ws(),Y=oc(),Z=ys(),X=va(),k=em(),A=tm(),M=rm(),H=[Q.map,Z.seq,X.string,Y.nullTag,k.boolTag,M.intOct,M.int,M.intHex,A.floatNaN,A.floatExp,A.float];G.schema=H}),NS=P(G=>{var Q=Qr(),Y=ws(),Z=ys();function X(B){return typeof B=="bigint"||Number.isInteger(B)}var k=({value:B})=>JSON.stringify(B),A=[{identify:B=>typeof B=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:B=>B,stringify:k},{identify:B=>B==null,createNode:()=>new Q.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:k},{identify:B=>typeof B=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:B=>B==="true",stringify:k},{identify:X,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(B,L,{intAsBigInt:N})=>N?BigInt(B):parseInt(B,10),stringify:({value:B})=>X(B)?B.toString():JSON.stringify(B)},{identify:B=>typeof B=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:B=>parseFloat(B),stringify:k}],M={default:!0,tag:"",test:/^/,resolve(B,L){return L(`Unresolved plain scalar ${JSON.stringify(B)}`),B}},H=[Y.map,Z.seq].concat(A,M);G.schema=H}),nm=P(G=>{var Q=Qr(),Y=_a(),Z={identify:X=>X instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(X,k){if(typeof Buffer=="function")return Buffer.from(X,"base64");if(typeof atob=="function"){let A=atob(X.replace(/[\n\r]/g,"")),M=new Uint8Array(A.length);for(let H=0;H<A.length;++H)M[H]=A.charCodeAt(H);return M}else return k("This environment does not support reading binary tags; either Buffer or atob is required"),X},stringify({comment:X,type:k,value:A},M,H,B){let L=A,N;if(typeof Buffer=="function")N=L instanceof Buffer?L.toString("base64"):Buffer.from(L.buffer).toString("base64");else if(typeof btoa=="function"){let F="";for(let W=0;W<L.length;++W)F+=String.fromCharCode(L[W]);N=btoa(F)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(k||(k=Q.Scalar.BLOCK_LITERAL),k!==Q.Scalar.QUOTE_DOUBLE){let F=Math.max(M.options.lineWidth-M.indent.length,M.options.minContentWidth),W=Math.ceil(N.length/F),re=new Array(W);for(let ee=0,ce=0;ee<W;++ee,ce+=F)re[ee]=N.substr(ce,F);N=re.join(k===Q.Scalar.BLOCK_LITERAL?`
`:" ")}return Y.stringifyString({comment:X,type:k,value:N},M,H,B)}};G.binary=Z}),cc=P(G=>{var Q=xr(),Y=Ii(),Z=Qr(),X=Ri();function k(H,B){var L;if(Q.isSeq(H))for(let N=0;N<H.items.length;++N){let F=H.items[N];if(!Q.isPair(F)){if(Q.isMap(F)){F.items.length>1&&B("Each pair must have its own sequence indicator");let W=F.items[0]||new Y.Pair(new Z.Scalar(null));if(F.commentBefore&&(W.key.commentBefore=W.key.commentBefore?`${F.commentBefore}
${W.key.commentBefore}`:F.commentBefore),F.comment){let re=(L=W.value)!=null?L:W.key;re.comment=re.comment?`${F.comment}
${re.comment}`:F.comment}F=W}H.items[N]=Q.isPair(F)?F:new Y.Pair(F)}}else B("Expected a sequence for this tag");return H}function A(H,B,L){let{replacer:N}=L,F=new X.YAMLSeq(H);F.tag="tag:yaml.org,2002:pairs";let W=0;if(B&&Symbol.iterator in Object(B))for(let re of B){typeof N=="function"&&(re=N.call(B,String(W++),re));let ee,ce;if(Array.isArray(re))if(re.length===2)ee=re[0],ce=re[1];else throw new TypeError(`Expected [key, value] tuple: ${re}`);else if(re&&re instanceof Object){let pe=Object.keys(re);if(pe.length===1)ee=pe[0],ce=re[ee];else throw new TypeError(`Expected tuple with one key, not ${pe.length} keys`)}else ee=re;F.items.push(Y.createPair(ee,ce,L))}return F}var M={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:k,createNode:A};G.createPairs=A,G.pairs=M,G.resolvePairs=k}),im=P(G=>{var Q=xr(),Y=Ai(),Z=Ni(),X=Ri(),k=cc(),A=class Hw extends X.YAMLSeq{constructor(){super(),this.add=Z.YAMLMap.prototype.add.bind(this),this.delete=Z.YAMLMap.prototype.delete.bind(this),this.get=Z.YAMLMap.prototype.get.bind(this),this.has=Z.YAMLMap.prototype.has.bind(this),this.set=Z.YAMLMap.prototype.set.bind(this),this.tag=Hw.tag}toJSON(B,L){if(!L)return super.toJSON(B);let N=new Map;L!=null&&L.onCreate&&L.onCreate(N);for(let F of this.items){let W,re;if(Q.isPair(F)?(W=Y.toJS(F.key,"",L),re=Y.toJS(F.value,W,L)):W=Y.toJS(F,"",L),N.has(W))throw new Error("Ordered maps must not include duplicate keys");N.set(W,re)}return N}static from(B,L,N){let F=k.createPairs(B,L,N),W=new this;return W.items=F.items,W}};A.tag="tag:yaml.org,2002:omap";var M={collection:"seq",identify:H=>H instanceof Map,nodeClass:A,default:!1,tag:"tag:yaml.org,2002:omap",resolve(H,B){let L=k.resolvePairs(H,B),N=[];for(let{key:F}of L.items)Q.isScalar(F)&&(N.includes(F.value)?B(`Ordered maps must not include duplicate keys: ${F.value}`):N.push(F.value));return Object.assign(new A,L)},createNode:(H,B,L)=>A.from(H,B,L)};G.YAMLOMap=A,G.omap=M}),RS=P(G=>{var Q=Qr();function Y({value:k,source:A},M){return A&&(k?Z:X).test.test(A)?A:k?M.options.trueStr:M.options.falseStr}var Z={identify:k=>k===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Q.Scalar(!0),stringify:Y},X={identify:k=>k===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Q.Scalar(!1),stringify:Y};G.falseTag=X,G.trueTag=Z}),LS=P(G=>{var Q=Qr(),Y=Ss(),Z={identify:A=>typeof A=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:A=>A.slice(-3).toLowerCase()==="nan"?NaN:A[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Y.stringifyNumber},X={identify:A=>typeof A=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:A=>parseFloat(A.replace(/_/g,"")),stringify(A){let M=Number(A.value);return isFinite(M)?M.toExponential():Y.stringifyNumber(A)}},k={identify:A=>typeof A=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(A){let M=new Q.Scalar(parseFloat(A.replace(/_/g,""))),H=A.indexOf(".");if(H!==-1){let B=A.substring(H+1).replace(/_/g,"");B[B.length-1]==="0"&&(M.minFractionDigits=B.length)}return M},stringify:Y.stringifyNumber};G.float=k,G.floatExp=X,G.floatNaN=Z}),DS=P(G=>{var Q=Ss(),Y=B=>typeof B=="bigint"||Number.isInteger(B);function Z(B,L,N,{intAsBigInt:F}){let W=B[0];if((W==="-"||W==="+")&&(L+=1),B=B.substring(L).replace(/_/g,""),F){switch(N){case 2:B=`0b${B}`;break;case 8:B=`0o${B}`;break;case 16:B=`0x${B}`;break}let ee=BigInt(B);return W==="-"?BigInt(-1)*ee:ee}let re=parseInt(B,N);return W==="-"?-1*re:re}function X(B,L,N){let{value:F}=B;if(Y(F)){let W=F.toString(L);return F<0?"-"+N+W.substr(1):N+W}return Q.stringifyNumber(B)}var k={identify:Y,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(B,L,N)=>Z(B,2,2,N),stringify:B=>X(B,2,"0b")},A={identify:Y,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(B,L,N)=>Z(B,1,8,N),stringify:B=>X(B,8,"0")},M={identify:Y,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(B,L,N)=>Z(B,0,10,N),stringify:Q.stringifyNumber},H={identify:Y,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(B,L,N)=>Z(B,2,16,N),stringify:B=>X(B,16,"0x")};G.int=M,G.intBin=k,G.intHex=H,G.intOct=A}),sm=P(G=>{var Q=xr(),Y=Ii(),Z=Ni(),X=class Uw extends Z.YAMLMap{constructor(M){super(M),this.tag=Uw.tag}add(M){let H;Q.isPair(M)?H=M:M&&typeof M=="object"&&"key"in M&&"value"in M&&M.value===null?H=new Y.Pair(M.key,null):H=new Y.Pair(M,null),Z.findPair(this.items,H.key)||this.items.push(H)}get(M,H){let B=Z.findPair(this.items,M);return!H&&Q.isPair(B)?Q.isScalar(B.key)?B.key.value:B.key:B}set(M,H){if(typeof H!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof H}`);let B=Z.findPair(this.items,M);B&&!H?this.items.splice(this.items.indexOf(B),1):!B&&H&&this.items.push(new Y.Pair(M))}toJSON(M,H){return super.toJSON(M,H,Set)}toString(M,H,B){if(!M)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},M,{allNullValues:!0}),H,B);throw new Error("Set items must all have null values")}static from(M,H,B){let{replacer:L}=B,N=new this(M);if(H&&Symbol.iterator in Object(H))for(let F of H)typeof L=="function"&&(F=L.call(H,F,F)),N.items.push(Y.createPair(F,null,B));return N}};X.tag="tag:yaml.org,2002:set";var k={collection:"map",identify:A=>A instanceof Set,nodeClass:X,default:!1,tag:"tag:yaml.org,2002:set",createNode:(A,M,H)=>X.from(A,M,H),resolve(A,M){if(Q.isMap(A)){if(A.hasAllNullValues(!0))return Object.assign(new X,A);M("Set items must all have null values")}else M("Expected a mapping for this tag");return A}};G.YAMLSet=X,G.set=k}),am=P(G=>{var Q=Ss();function Y(M,H){let B=M[0],L=B==="-"||B==="+"?M.substring(1):M,N=W=>H?BigInt(W):Number(W),F=L.replace(/_/g,"").split(":").reduce((W,re)=>W*N(60)+N(re),N(0));return B==="-"?N(-1)*F:F}function Z(M){let{value:H}=M,B=W=>W;if(typeof H=="bigint")B=W=>BigInt(W);else if(isNaN(H)||!isFinite(H))return Q.stringifyNumber(M);let L="";H<0&&(L="-",H*=B(-1));let N=B(60),F=[H%N];return H<60?F.unshift(0):(H=(H-F[0])/N,F.unshift(H%N),H>=60&&(H=(H-F[0])/N,F.unshift(H))),L+F.map(W=>String(W).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var X={identify:M=>typeof M=="bigint"||Number.isInteger(M),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(M,H,{intAsBigInt:B})=>Y(M,B),stringify:Z},k={identify:M=>typeof M=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:M=>Y(M,!1),stringify:Z},A={identify:M=>M instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(M){let H=M.match(A.test);if(!H)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,B,L,N,F,W,re]=H.map(Number),ee=H[7]?Number((H[7]+"00").substr(1,3)):0,ce=Date.UTC(B,L-1,N,F||0,W||0,re||0,ee),pe=H[8];if(pe&&pe!=="Z"){let K=Y(pe,!1);Math.abs(K)<30&&(K*=60),ce-=6e4*K}return new Date(ce)},stringify:({value:M})=>M.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};G.floatTime=k,G.intTime=X,G.timestamp=A}),MS=P(G=>{var Q=ws(),Y=oc(),Z=ys(),X=va(),k=nm(),A=RS(),M=LS(),H=DS(),B=ac(),L=im(),N=cc(),F=sm(),W=am(),re=[Q.map,Z.seq,X.string,Y.nullTag,A.trueTag,A.falseTag,H.intBin,H.intOct,H.int,H.intHex,M.floatNaN,M.floatExp,M.float,k.binary,B.merge,L.omap,N.pairs,F.set,W.intTime,W.floatTime,W.timestamp];G.schema=re}),FS=P(G=>{var Q=ws(),Y=oc(),Z=ys(),X=va(),k=em(),A=tm(),M=rm(),H=IS(),B=NS(),L=nm(),N=ac(),F=im(),W=cc(),re=MS(),ee=sm(),ce=am(),pe=new Map([["core",H.schema],["failsafe",[Q.map,Z.seq,X.string]],["json",B.schema],["yaml11",re.schema],["yaml-1.1",re.schema]]),K={binary:L.binary,bool:k.boolTag,float:A.float,floatExp:A.floatExp,floatNaN:A.floatNaN,floatTime:ce.floatTime,int:M.int,intHex:M.intHex,intOct:M.intOct,intTime:ce.intTime,map:Q.map,merge:N.merge,null:Y.nullTag,omap:F.omap,pairs:W.pairs,seq:Z.seq,set:ee.set,timestamp:ce.timestamp},se={"tag:yaml.org,2002:binary":L.binary,"tag:yaml.org,2002:merge":N.merge,"tag:yaml.org,2002:omap":F.omap,"tag:yaml.org,2002:pairs":W.pairs,"tag:yaml.org,2002:set":ee.set,"tag:yaml.org,2002:timestamp":ce.timestamp};function ue(ae,oe,fe){let we=pe.get(oe);if(we&&!ae)return fe&&!we.includes(N.merge)?we.concat(N.merge):we.slice();let Ee=we;if(!Ee)if(Array.isArray(ae))Ee=[];else{let Ie=Array.from(pe.keys()).filter(Ae=>Ae!=="yaml11").map(Ae=>JSON.stringify(Ae)).join(", ");throw new Error(`Unknown schema "${oe}"; use one of ${Ie} or define customTags array`)}if(Array.isArray(ae))for(let Ie of ae)Ee=Ee.concat(Ie);else typeof ae=="function"&&(Ee=ae(Ee.slice()));return fe&&(Ee=Ee.concat(N.merge)),Ee.reduce((Ie,Ae)=>{let He=typeof Ae=="string"?K[Ae]:Ae;if(!He){let Fe=JSON.stringify(Ae),Ue=Object.keys(K).map(et=>JSON.stringify(et)).join(", ");throw new Error(`Unknown custom tag ${Fe}; use one of ${Ue}`)}return Ie.includes(He)||Ie.push(He),Ie},[])}G.coreKnownTags=se,G.getTags=ue}),om=P(G=>{var Q=xr(),Y=ws(),Z=ys(),X=va(),k=FS(),A=(H,B)=>H.key<B.key?-1:H.key>B.key?1:0,M=class qw{constructor({compat:B,customTags:L,merge:N,resolveKnownTags:F,schema:W,sortMapEntries:re,toStringDefaults:ee}){this.compat=Array.isArray(B)?k.getTags(B,"compat"):B?k.getTags(null,B):null,this.name=typeof W=="string"&&W||"core",this.knownTags=F?k.coreKnownTags:{},this.tags=k.getTags(L,this.name,N),this.toStringOptions=ee??null,Object.defineProperty(this,Q.MAP,{value:Y.map}),Object.defineProperty(this,Q.SCALAR,{value:X.string}),Object.defineProperty(this,Q.SEQ,{value:Z.seq}),this.sortMapEntries=typeof re=="function"?re:re===!0?A:null}clone(){let B=Object.create(qw.prototype,Object.getOwnPropertyDescriptors(this));return B.tags=this.tags.slice(),B}};G.Schema=M}),BS=P(G=>{var Q=xr(),Y=ba(),Z=ga();function X(k,A){var M;let H=[],B=A.directives===!0;if(A.directives!==!1&&k.directives){let re=k.directives.toString(k);re?(H.push(re),B=!0):k.directives.docStart&&(B=!0)}B&&H.push("---");let L=Y.createStringifyContext(k,A),{commentString:N}=L.options;if(k.commentBefore){H.length!==1&&H.unshift("");let re=N(k.commentBefore);H.unshift(Z.indentComment(re,""))}let F=!1,W=null;if(k.contents){if(Q.isNode(k.contents)){if(k.contents.spaceBefore&&B&&H.push(""),k.contents.commentBefore){let ce=N(k.contents.commentBefore);H.push(Z.indentComment(ce,""))}L.forceBlockIndent=!!k.comment,W=k.contents.comment}let re=W?void 0:()=>F=!0,ee=Y.stringify(k.contents,L,()=>W=null,re);W&&(ee+=Z.lineComment(ee,"",N(W))),(ee[0]==="|"||ee[0]===">")&&H[H.length-1]==="---"?H[H.length-1]=`--- ${ee}`:H.push(ee)}else H.push(Y.stringify(k.contents,L));if((M=k.directives)!=null&&M.docEnd)if(k.comment){let re=N(k.comment);re.includes(`
`)?(H.push("..."),H.push(Z.indentComment(re,""))):H.push(`... ${re}`)}else H.push("...");else{let re=k.comment;re&&F&&(re=re.replace(/^\n+/,"")),re&&((!F||W)&&H[H.length-1]!==""&&H.push(""),H.push(Z.indentComment(N(re),"")))}return H.join(`
`)+`
`}G.stringifyDocument=X}),wa=P(G=>{var Q=fa(),Y=sc(),Z=xr(),X=Ii(),k=Ai(),A=om(),M=BS(),H=nc(),B=Yf(),L=ma(),N=Jf(),F=class $w{constructor(ee,ce,pe){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Z.NODE_TYPE,{value:Z.DOC});let K=null;typeof ce=="function"||Array.isArray(ce)?K=ce:pe===void 0&&ce&&(pe=ce,ce=void 0);let se=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},pe);this.options=se;let{version:ue}=se;pe!=null&&pe._directives?(this.directives=pe._directives.atDocument(),this.directives.yaml.explicit&&(ue=this.directives.yaml.version)):this.directives=new N.Directives({version:ue}),this.setSchema(ue,pe),this.contents=ee===void 0?null:this.createNode(ee,K,pe)}clone(){let ee=Object.create($w.prototype,{[Z.NODE_TYPE]:{value:Z.DOC}});return ee.commentBefore=this.commentBefore,ee.comment=this.comment,ee.errors=this.errors.slice(),ee.warnings=this.warnings.slice(),ee.options=Object.assign({},this.options),this.directives&&(ee.directives=this.directives.clone()),ee.schema=this.schema.clone(),ee.contents=Z.isNode(this.contents)?this.contents.clone(ee.schema):this.contents,this.range&&(ee.range=this.range.slice()),ee}add(ee){W(this.contents)&&this.contents.add(ee)}addIn(ee,ce){W(this.contents)&&this.contents.addIn(ee,ce)}createAlias(ee,ce){if(!ee.anchor){let pe=H.anchorNames(this);ee.anchor=!ce||pe.has(ce)?H.findNewAnchor(ce||"a",pe):ce}return new Q.Alias(ee.anchor)}createNode(ee,ce,pe){let K;if(typeof ce=="function")ee=ce.call({"":ee},"",ee),K=ce;else if(Array.isArray(ce)){let Ue=ft=>typeof ft=="number"||ft instanceof String||ft instanceof Number,et=ce.filter(Ue).map(String);et.length>0&&(ce=ce.concat(et)),K=ce}else pe===void 0&&ce&&(pe=ce,ce=void 0);let{aliasDuplicateObjects:se,anchorPrefix:ue,flow:ae,keepUndefined:oe,onTagObj:fe,tag:we}=pe??{},{onAnchor:Ee,setAnchors:Ie,sourceObjects:Ae}=H.createNodeAnchors(this,ue||"a"),He={aliasDuplicateObjects:se??!0,keepUndefined:oe??!1,onAnchor:Ee,onTagObj:fe,replacer:K,schema:this.schema,sourceObjects:Ae},Fe=L.createNode(ee,we,He);return ae&&Z.isCollection(Fe)&&(Fe.flow=!0),Ie(),Fe}createPair(ee,ce,pe={}){let K=this.createNode(ee,null,pe),se=this.createNode(ce,null,pe);return new X.Pair(K,se)}delete(ee){return W(this.contents)?this.contents.delete(ee):!1}deleteIn(ee){return Y.isEmptyPath(ee)?this.contents==null?!1:(this.contents=null,!0):W(this.contents)?this.contents.deleteIn(ee):!1}get(ee,ce){return Z.isCollection(this.contents)?this.contents.get(ee,ce):void 0}getIn(ee,ce){return Y.isEmptyPath(ee)?!ce&&Z.isScalar(this.contents)?this.contents.value:this.contents:Z.isCollection(this.contents)?this.contents.getIn(ee,ce):void 0}has(ee){return Z.isCollection(this.contents)?this.contents.has(ee):!1}hasIn(ee){return Y.isEmptyPath(ee)?this.contents!==void 0:Z.isCollection(this.contents)?this.contents.hasIn(ee):!1}set(ee,ce){this.contents==null?this.contents=Y.collectionFromPath(this.schema,[ee],ce):W(this.contents)&&this.contents.set(ee,ce)}setIn(ee,ce){Y.isEmptyPath(ee)?this.contents=ce:this.contents==null?this.contents=Y.collectionFromPath(this.schema,Array.from(ee),ce):W(this.contents)&&this.contents.setIn(ee,ce)}setSchema(ee,ce={}){typeof ee=="number"&&(ee=String(ee));let pe;switch(ee){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new N.Directives({version:"1.1"}),pe={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=ee:this.directives=new N.Directives({version:ee}),pe={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,pe=null;break;default:{let K=JSON.stringify(ee);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${K}`)}}if(ce.schema instanceof Object)this.schema=ce.schema;else if(pe)this.schema=new A.Schema(Object.assign(pe,ce));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:ee,jsonArg:ce,mapAsMap:pe,maxAliasCount:K,onAnchor:se,reviver:ue}={}){let ae={anchors:new Map,doc:this,keep:!ee,mapAsMap:pe===!0,mapKeyWarned:!1,maxAliasCount:typeof K=="number"?K:100},oe=k.toJS(this.contents,ce??"",ae);if(typeof se=="function")for(let{count:fe,res:we}of ae.anchors.values())se(we,fe);return typeof ue=="function"?B.applyReviver(ue,{"":oe},"",oe):oe}toJSON(ee,ce){return this.toJS({json:!0,jsonArg:ee,mapAsMap:!1,onAnchor:ce})}toString(ee={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in ee&&(!Number.isInteger(ee.indent)||Number(ee.indent)<=0)){let ce=JSON.stringify(ee.indent);throw new Error(`"indent" option must be a positive integer, not ${ce}`)}return M.stringifyDocument(this,ee)}};function W(re){if(Z.isCollection(re))return!0;throw new Error("Expected a YAML collection as document contents")}G.Document=F}),ya=P(G=>{var Q=class extends Error{constructor(k,A,M,H){super(),this.name=k,this.code=M,this.message=H,this.pos=A}},Y=class extends Q{constructor(k,A,M){super("YAMLParseError",k,A,M)}},Z=class extends Q{constructor(k,A,M){super("YAMLWarning",k,A,M)}},X=(k,A)=>M=>{if(M.pos[0]===-1)return;M.linePos=M.pos.map(F=>A.linePos(F));let{line:H,col:B}=M.linePos[0];M.message+=` at line ${H}, column ${B}`;let L=B-1,N=k.substring(A.lineStarts[H-1],A.lineStarts[H]).replace(/[\n\r]+$/,"");if(L>=60&&N.length>80){let F=Math.min(L-39,N.length-79);N="…"+N.substring(F),L-=F-1}if(N.length>80&&(N=N.substring(0,79)+"…"),H>1&&/^ *$/.test(N.substring(0,L))){let F=k.substring(A.lineStarts[H-2],A.lineStarts[H-1]);F.length>80&&(F=F.substring(0,79)+`…
`),N=F+N}if(/[^ ]/.test(N)){let F=1,W=M.linePos[1];W&&W.line===H&&W.col>B&&(F=Math.max(1,Math.min(W.col-B,80-L)));let re=" ".repeat(L)+"^".repeat(F);M.message+=`:

${N}
${re}
`}};G.YAMLError=Q,G.YAMLParseError=Y,G.YAMLWarning=Z,G.prettifyError=X}),Sa=P(G=>{function Q(Y,{flow:Z,indicator:X,next:k,offset:A,onError:M,parentIndent:H,startOnNewline:B}){let L=!1,N=B,F=B,W="",re="",ee=!1,ce=!1,pe=null,K=null,se=null,ue=null,ae=null,oe=null,fe=null;for(let Ie of Y)switch(ce&&(Ie.type!=="space"&&Ie.type!=="newline"&&Ie.type!=="comma"&&M(Ie.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),ce=!1),pe&&(N&&Ie.type!=="comment"&&Ie.type!=="newline"&&M(pe,"TAB_AS_INDENT","Tabs are not allowed as indentation"),pe=null),Ie.type){case"space":!Z&&(X!=="doc-start"||(k==null?void 0:k.type)!=="flow-collection")&&Ie.source.includes("	")&&(pe=Ie),F=!0;break;case"comment":{F||M(Ie,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let Ae=Ie.source.substring(1)||" ";W?W+=re+Ae:W=Ae,re="",N=!1;break}case"newline":N?W?W+=Ie.source:L=!0:re+=Ie.source,N=!0,ee=!0,(K||se)&&(ue=Ie),F=!0;break;case"anchor":K&&M(Ie,"MULTIPLE_ANCHORS","A node can have at most one anchor"),Ie.source.endsWith(":")&&M(Ie.offset+Ie.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),K=Ie,fe===null&&(fe=Ie.offset),N=!1,F=!1,ce=!0;break;case"tag":{se&&M(Ie,"MULTIPLE_TAGS","A node can have at most one tag"),se=Ie,fe===null&&(fe=Ie.offset),N=!1,F=!1,ce=!0;break}case X:(K||se)&&M(Ie,"BAD_PROP_ORDER",`Anchors and tags must be after the ${Ie.source} indicator`),oe&&M(Ie,"UNEXPECTED_TOKEN",`Unexpected ${Ie.source} in ${Z??"collection"}`),oe=Ie,N=X==="seq-item-ind"||X==="explicit-key-ind",F=!1;break;case"comma":if(Z){ae&&M(Ie,"UNEXPECTED_TOKEN",`Unexpected , in ${Z}`),ae=Ie,N=!1,F=!1;break}default:M(Ie,"UNEXPECTED_TOKEN",`Unexpected ${Ie.type} token`),N=!1,F=!1}let we=Y[Y.length-1],Ee=we?we.offset+we.source.length:A;return ce&&k&&k.type!=="space"&&k.type!=="newline"&&k.type!=="comma"&&(k.type!=="scalar"||k.source!=="")&&M(k.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),pe&&(N&&pe.indent<=H||(k==null?void 0:k.type)==="block-map"||(k==null?void 0:k.type)==="block-seq")&&M(pe,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:ae,found:oe,spaceBefore:L,comment:W,hasNewline:ee,anchor:K,tag:se,newlineAfterProp:ue,end:Ee,start:fe??Ee}}G.resolveProps=Q}),lc=P(G=>{function Q(Y){if(!Y)return null;switch(Y.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(Y.source.includes(`
`))return!0;if(Y.end){for(let Z of Y.end)if(Z.type==="newline")return!0}return!1;case"flow-collection":for(let Z of Y.items){for(let X of Z.start)if(X.type==="newline")return!0;if(Z.sep){for(let X of Z.sep)if(X.type==="newline")return!0}if(Q(Z.key)||Q(Z.value))return!0}return!1;default:return!0}}G.containsNewline=Q}),cm=P(G=>{var Q=lc();function Y(Z,X,k){if((X==null?void 0:X.type)==="flow-collection"){let A=X.end[0];A.indent===Z&&(A.source==="]"||A.source==="}")&&Q.containsNewline(X)&&k(A,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}G.flowIndentCheck=Y}),lm=P(G=>{var Q=xr();function Y(Z,X,k){let{uniqueKeys:A}=Z.options;if(A===!1)return!1;let M=typeof A=="function"?A:(H,B)=>H===B||Q.isScalar(H)&&Q.isScalar(B)&&H.value===B.value;return X.some(H=>M(H.key,k))}G.mapIncludes=Y}),jS=P(G=>{var Q=Ii(),Y=Ni(),Z=Sa(),X=lc(),k=cm(),A=lm(),M="All mapping items must start at the same column";function H({composeNode:B,composeEmptyNode:L},N,F,W,re){var ee,ce;let pe=(ee=re==null?void 0:re.nodeClass)!=null?ee:Y.YAMLMap,K=new pe(N.schema);N.atRoot&&(N.atRoot=!1);let se=F.offset,ue=null;for(let ae of F.items){let{start:oe,key:fe,sep:we,value:Ee}=ae,Ie=Z.resolveProps(oe,{indicator:"explicit-key-ind",next:fe??(we==null?void 0:we[0]),offset:se,onError:W,parentIndent:F.indent,startOnNewline:!0}),Ae=!Ie.found;if(Ae){if(fe&&(fe.type==="block-seq"?W(se,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in fe&&fe.indent!==F.indent&&W(se,"BAD_INDENT",M)),!Ie.anchor&&!Ie.tag&&!we){ue=Ie.end,Ie.comment&&(K.comment?K.comment+=`
`+Ie.comment:K.comment=Ie.comment);continue}(Ie.newlineAfterProp||X.containsNewline(fe))&&W(fe??oe[oe.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((ce=Ie.found)==null?void 0:ce.indent)!==F.indent&&W(se,"BAD_INDENT",M);N.atKey=!0;let He=Ie.end,Fe=fe?B(N,fe,Ie,W):L(N,He,oe,null,Ie,W);N.schema.compat&&k.flowIndentCheck(F.indent,fe,W),N.atKey=!1,A.mapIncludes(N,K.items,Fe)&&W(He,"DUPLICATE_KEY","Map keys must be unique");let Ue=Z.resolveProps(we??[],{indicator:"map-value-ind",next:Ee,offset:Fe.range[2],onError:W,parentIndent:F.indent,startOnNewline:!fe||fe.type==="block-scalar"});if(se=Ue.end,Ue.found){Ae&&((Ee==null?void 0:Ee.type)==="block-map"&&!Ue.hasNewline&&W(se,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),N.options.strict&&Ie.start<Ue.found.offset-1024&&W(Fe.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let et=Ee?B(N,Ee,Ue,W):L(N,se,we,null,Ue,W);N.schema.compat&&k.flowIndentCheck(F.indent,Ee,W),se=et.range[2];let ft=new Q.Pair(Fe,et);N.options.keepSourceTokens&&(ft.srcToken=ae),K.items.push(ft)}else{Ae&&W(Fe.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),Ue.comment&&(Fe.comment?Fe.comment+=`
`+Ue.comment:Fe.comment=Ue.comment);let et=new Q.Pair(Fe);N.options.keepSourceTokens&&(et.srcToken=ae),K.items.push(et)}}return ue&&ue<se&&W(ue,"IMPOSSIBLE","Map comment with trailing content"),K.range=[F.offset,se,ue??se],K}G.resolveBlockMap=H}),HS=P(G=>{var Q=Ri(),Y=Sa(),Z=cm();function X({composeNode:k,composeEmptyNode:A},M,H,B,L){var N;let F=(N=L==null?void 0:L.nodeClass)!=null?N:Q.YAMLSeq,W=new F(M.schema);M.atRoot&&(M.atRoot=!1),M.atKey&&(M.atKey=!1);let re=H.offset,ee=null;for(let{start:ce,value:pe}of H.items){let K=Y.resolveProps(ce,{indicator:"seq-item-ind",next:pe,offset:re,onError:B,parentIndent:H.indent,startOnNewline:!0});if(!K.found)if(K.anchor||K.tag||pe)pe&&pe.type==="block-seq"?B(K.end,"BAD_INDENT","All sequence items must start at the same column"):B(re,"MISSING_CHAR","Sequence item without - indicator");else{ee=K.end,K.comment&&(W.comment=K.comment);continue}let se=pe?k(M,pe,K,B):A(M,K.end,ce,null,K,B);M.schema.compat&&Z.flowIndentCheck(H.indent,pe,B),re=se.range[2],W.items.push(se)}return W.range=[H.offset,re,ee??re],W}G.resolveBlockSeq=X}),xs=P(G=>{function Q(Y,Z,X,k){let A="";if(Y){let M=!1,H="";for(let B of Y){let{source:L,type:N}=B;switch(N){case"space":M=!0;break;case"comment":{X&&!M&&k(B,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let F=L.substring(1)||" ";A?A+=H+F:A=F,H="";break}case"newline":A&&(H+=L),M=!0;break;default:k(B,"UNEXPECTED_TOKEN",`Unexpected ${N} at node end`)}Z+=L.length}}return{comment:A,offset:Z}}G.resolveEnd=Q}),US=P(G=>{var Q=xr(),Y=Ii(),Z=Ni(),X=Ri(),k=xs(),A=Sa(),M=lc(),H=lm(),B="Block collections are not allowed within flow collections",L=F=>F&&(F.type==="block-map"||F.type==="block-seq");function N({composeNode:F,composeEmptyNode:W},re,ee,ce,pe){var K,se;let ue=ee.start.source==="{",ae=ue?"flow map":"flow sequence",oe=(K=pe==null?void 0:pe.nodeClass)!=null?K:ue?Z.YAMLMap:X.YAMLSeq,fe=new oe(re.schema);fe.flow=!0;let we=re.atRoot;we&&(re.atRoot=!1),re.atKey&&(re.atKey=!1);let Ee=ee.offset+ee.start.source.length;for(let Ue=0;Ue<ee.items.length;++Ue){let et=ee.items[Ue],{start:ft,key:ht,sep:Tt,value:vt}=et,Ot=A.resolveProps(ft,{flow:ae,indicator:"explicit-key-ind",next:ht??(Tt==null?void 0:Tt[0]),offset:Ee,onError:ce,parentIndent:ee.indent,startOnNewline:!1});if(!Ot.found){if(!Ot.anchor&&!Ot.tag&&!Tt&&!vt){Ue===0&&Ot.comma?ce(Ot.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${ae}`):Ue<ee.items.length-1&&ce(Ot.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${ae}`),Ot.comment&&(fe.comment?fe.comment+=`
`+Ot.comment:fe.comment=Ot.comment),Ee=Ot.end;continue}!ue&&re.options.strict&&M.containsNewline(ht)&&ce(ht,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(Ue===0)Ot.comma&&ce(Ot.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${ae}`);else if(Ot.comma||ce(Ot.start,"MISSING_CHAR",`Missing , between ${ae} items`),Ot.comment){let Mt="";e:for(let Ct of ft)switch(Ct.type){case"comma":case"space":break;case"comment":Mt=Ct.source.substring(1);break e;default:break e}if(Mt){let Ct=fe.items[fe.items.length-1];Q.isPair(Ct)&&(Ct=(se=Ct.value)!=null?se:Ct.key),Ct.comment?Ct.comment+=`
`+Mt:Ct.comment=Mt,Ot.comment=Ot.comment.substring(Mt.length+1)}}if(!ue&&!Tt&&!Ot.found){let Mt=vt?F(re,vt,Ot,ce):W(re,Ot.end,Tt,null,Ot,ce);fe.items.push(Mt),Ee=Mt.range[2],L(vt)&&ce(Mt.range,"BLOCK_IN_FLOW",B)}else{re.atKey=!0;let Mt=Ot.end,Ct=ht?F(re,ht,Ot,ce):W(re,Mt,ft,null,Ot,ce);L(ht)&&ce(Ct.range,"BLOCK_IN_FLOW",B),re.atKey=!1;let Ft=A.resolveProps(Tt??[],{flow:ae,indicator:"map-value-ind",next:vt,offset:Ct.range[2],onError:ce,parentIndent:ee.indent,startOnNewline:!1});if(Ft.found){if(!ue&&!Ot.found&&re.options.strict){if(Tt)for(let mt of Tt){if(mt===Ft.found)break;if(mt.type==="newline"){ce(mt,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}Ot.start<Ft.found.offset-1024&&ce(Ft.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else vt&&("source"in vt&&vt.source&&vt.source[0]===":"?ce(vt,"MISSING_CHAR",`Missing space after : in ${ae}`):ce(Ft.start,"MISSING_CHAR",`Missing , or : between ${ae} items`));let vr=vt?F(re,vt,Ft,ce):Ft.found?W(re,Ft.end,Tt,null,Ft,ce):null;vr?L(vt)&&ce(vr.range,"BLOCK_IN_FLOW",B):Ft.comment&&(Ct.comment?Ct.comment+=`
`+Ft.comment:Ct.comment=Ft.comment);let gr=new Y.Pair(Ct,vr);if(re.options.keepSourceTokens&&(gr.srcToken=et),ue){let mt=fe;H.mapIncludes(re,mt.items,Ct)&&ce(Mt,"DUPLICATE_KEY","Map keys must be unique"),mt.items.push(gr)}else{let mt=new Z.YAMLMap(re.schema);mt.flow=!0,mt.items.push(gr);let bt=(vr??Ct).range;mt.range=[Ct.range[0],bt[1],bt[2]],fe.items.push(mt)}Ee=vr?vr.range[2]:Ft.end}}let Ie=ue?"}":"]",[Ae,...He]=ee.end,Fe=Ee;if(Ae&&Ae.source===Ie)Fe=Ae.offset+Ae.source.length;else{let Ue=ae[0].toUpperCase()+ae.substring(1),et=we?`${Ue} must end with a ${Ie}`:`${Ue} in block collection must be sufficiently indented and end with a ${Ie}`;ce(Ee,we?"MISSING_CHAR":"BAD_INDENT",et),Ae&&Ae.source.length!==1&&He.unshift(Ae)}if(He.length>0){let Ue=k.resolveEnd(He,Fe,re.options.strict,ce);Ue.comment&&(fe.comment?fe.comment+=`
`+Ue.comment:fe.comment=Ue.comment),fe.range=[ee.offset,Fe,Ue.offset]}else fe.range=[ee.offset,Fe,Fe];return fe}G.resolveFlowCollection=N}),qS=P(G=>{var Q=xr(),Y=Qr(),Z=Ni(),X=Ri(),k=jS(),A=HS(),M=US();function H(L,N,F,W,re,ee){let ce=F.type==="block-map"?k.resolveBlockMap(L,N,F,W,ee):F.type==="block-seq"?A.resolveBlockSeq(L,N,F,W,ee):M.resolveFlowCollection(L,N,F,W,ee),pe=ce.constructor;return re==="!"||re===pe.tagName?(ce.tag=pe.tagName,ce):(re&&(ce.tag=re),ce)}function B(L,N,F,W,re){var ee,ce;let pe=W.tag,K=pe?N.directives.tagName(pe.source,we=>re(pe,"TAG_RESOLVE_FAILED",we)):null;if(F.type==="block-seq"){let{anchor:we,newlineAfterProp:Ee}=W,Ie=we&&pe?we.offset>pe.offset?we:pe:we??pe;Ie&&(!Ee||Ee.offset<Ie.offset)&&re(Ie,"MISSING_CHAR","Missing newline after block sequence props")}let se=F.type==="block-map"?"map":F.type==="block-seq"?"seq":F.start.source==="{"?"map":"seq";if(!pe||!K||K==="!"||K===Z.YAMLMap.tagName&&se==="map"||K===X.YAMLSeq.tagName&&se==="seq")return H(L,N,F,re,K);let ue=N.schema.tags.find(we=>we.tag===K&&we.collection===se);if(!ue){let we=N.schema.knownTags[K];if(we&&we.collection===se)N.schema.tags.push(Object.assign({},we,{default:!1})),ue=we;else return we!=null&&we.collection?re(pe,"BAD_COLLECTION_TYPE",`${we.tag} used for ${se} collection, but expects ${we.collection}`,!0):re(pe,"TAG_RESOLVE_FAILED",`Unresolved tag: ${K}`,!0),H(L,N,F,re,K)}let ae=H(L,N,F,re,K,ue),oe=(ce=(ee=ue.resolve)==null?void 0:ee.call(ue,ae,we=>re(pe,"TAG_RESOLVE_FAILED",we),N.options))!=null?ce:ae,fe=Q.isNode(oe)?oe:new Y.Scalar(oe);return fe.range=ae.range,fe.tag=K,ue!=null&&ue.format&&(fe.format=ue.format),fe}G.composeCollection=B}),um=P(G=>{var Q=Qr();function Y(k,A,M){let H=A.offset,B=Z(A,k.options.strict,M);if(!B)return{value:"",type:null,comment:"",range:[H,H,H]};let L=B.mode===">"?Q.Scalar.BLOCK_FOLDED:Q.Scalar.BLOCK_LITERAL,N=A.source?X(A.source):[],F=N.length;for(let ue=N.length-1;ue>=0;--ue){let ae=N[ue][1];if(ae===""||ae==="\r")F=ue;else break}if(F===0){let ue=B.chomp==="+"&&N.length>0?`
`.repeat(Math.max(1,N.length-1)):"",ae=H+B.length;return A.source&&(ae+=A.source.length),{value:ue,type:L,comment:B.comment,range:[H,ae,ae]}}let W=A.indent+B.indent,re=A.offset+B.length,ee=0;for(let ue=0;ue<F;++ue){let[ae,oe]=N[ue];if(oe===""||oe==="\r")B.indent===0&&ae.length>W&&(W=ae.length);else{ae.length<W&&M(re+ae.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),B.indent===0&&(W=ae.length),ee=ue,W===0&&!k.atRoot&&M(re,"BAD_INDENT","Block scalar values in collections must be indented");break}re+=ae.length+oe.length+1}for(let ue=N.length-1;ue>=F;--ue)N[ue][0].length>W&&(F=ue+1);let ce="",pe="",K=!1;for(let ue=0;ue<ee;++ue)ce+=N[ue][0].slice(W)+`
`;for(let ue=ee;ue<F;++ue){let[ae,oe]=N[ue];re+=ae.length+oe.length+1;let fe=oe[oe.length-1]==="\r";if(fe&&(oe=oe.slice(0,-1)),oe&&ae.length<W){let we=`Block scalar lines must not be less indented than their ${B.indent?"explicit indentation indicator":"first line"}`;M(re-oe.length-(fe?2:1),"BAD_INDENT",we),ae=""}L===Q.Scalar.BLOCK_LITERAL?(ce+=pe+ae.slice(W)+oe,pe=`
`):ae.length>W||oe[0]==="	"?(pe===" "?pe=`
`:!K&&pe===`
`&&(pe=`

`),ce+=pe+ae.slice(W)+oe,pe=`
`,K=!0):oe===""?pe===`
`?ce+=`
`:pe=`
`:(ce+=pe+oe,pe=" ",K=!1)}switch(B.chomp){case"-":break;case"+":for(let ue=F;ue<N.length;++ue)ce+=`
`+N[ue][0].slice(W);ce[ce.length-1]!==`
`&&(ce+=`
`);break;default:ce+=`
`}let se=H+B.length+A.source.length;return{value:ce,type:L,comment:B.comment,range:[H,se,se]}}function Z({offset:k,props:A},M,H){if(A[0].type!=="block-scalar-header")return H(A[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:B}=A[0],L=B[0],N=0,F="",W=-1;for(let pe=1;pe<B.length;++pe){let K=B[pe];if(!F&&(K==="-"||K==="+"))F=K;else{let se=Number(K);!N&&se?N=se:W===-1&&(W=k+pe)}}W!==-1&&H(W,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${B}`);let re=!1,ee="",ce=B.length;for(let pe=1;pe<A.length;++pe){let K=A[pe];switch(K.type){case"space":re=!0;case"newline":ce+=K.source.length;break;case"comment":M&&!re&&H(K,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),ce+=K.source.length,ee=K.source.substring(1);break;case"error":H(K,"UNEXPECTED_TOKEN",K.message),ce+=K.source.length;break;default:{let se=`Unexpected token in block scalar header: ${K.type}`;H(K,"UNEXPECTED_TOKEN",se);let ue=K.source;ue&&typeof ue=="string"&&(ce+=ue.length)}}}return{mode:L,indent:N,chomp:F,comment:ee,length:ce}}function X(k){let A=k.split(/\n( *)/),M=A[0],H=M.match(/^( *)/),B=[H!=null&&H[1]?[H[1],M.slice(H[1].length)]:["",M]];for(let L=1;L<A.length;L+=2)B.push([A[L],A[L+1]]);return B}G.resolveBlockScalar=Y}),dm=P(G=>{var Q=Qr(),Y=xs();function Z(N,F,W){let{offset:re,type:ee,source:ce,end:pe}=N,K,se,ue=(fe,we,Ee)=>W(re+fe,we,Ee);switch(ee){case"scalar":K=Q.Scalar.PLAIN,se=X(ce,ue);break;case"single-quoted-scalar":K=Q.Scalar.QUOTE_SINGLE,se=k(ce,ue);break;case"double-quoted-scalar":K=Q.Scalar.QUOTE_DOUBLE,se=M(ce,ue);break;default:return W(N,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${ee}`),{value:"",type:null,comment:"",range:[re,re+ce.length,re+ce.length]}}let ae=re+ce.length,oe=Y.resolveEnd(pe,ae,F,W);return{value:se,type:K,comment:oe.comment,range:[re,ae,oe.offset]}}function X(N,F){let W="";switch(N[0]){case"	":W="a tab character";break;case",":W="flow indicator character ,";break;case"%":W="directive indicator character %";break;case"|":case">":{W=`block scalar indicator ${N[0]}`;break}case"@":case"`":{W=`reserved character ${N[0]}`;break}}return W&&F(0,"BAD_SCALAR_START",`Plain value cannot start with ${W}`),A(N)}function k(N,F){return(N[N.length-1]!=="'"||N.length===1)&&F(N.length,"MISSING_CHAR","Missing closing 'quote"),A(N.slice(1,-1)).replace(/''/g,"'")}function A(N){var F;let W,re;try{W=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),re=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{W=/(.*?)[ \t]*\r?\n/sy,re=/[ \t]*(.*?)[ \t]*\r?\n/sy}let ee=W.exec(N);if(!ee)return N;let ce=ee[1],pe=" ",K=W.lastIndex;for(re.lastIndex=K;ee=re.exec(N);)ee[1]===""?pe===`
`?ce+=pe:pe=`
`:(ce+=pe+ee[1],pe=" "),K=re.lastIndex;let se=/[ \t]*(.*)/sy;return se.lastIndex=K,ee=se.exec(N),ce+pe+((F=ee==null?void 0:ee[1])!=null?F:"")}function M(N,F){let W="";for(let re=1;re<N.length-1;++re){let ee=N[re];if(!(ee==="\r"&&N[re+1]===`
`))if(ee===`
`){let{fold:ce,offset:pe}=H(N,re);W+=ce,re=pe}else if(ee==="\\"){let ce=N[++re],pe=B[ce];if(pe)W+=pe;else if(ce===`
`)for(ce=N[re+1];ce===" "||ce==="	";)ce=N[++re+1];else if(ce==="\r"&&N[re+1]===`
`)for(ce=N[++re+1];ce===" "||ce==="	";)ce=N[++re+1];else if(ce==="x"||ce==="u"||ce==="U"){let K={x:2,u:4,U:8}[ce];W+=L(N,re+1,K,F),re+=K}else{let K=N.substr(re-1,2);F(re-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${K}`),W+=K}}else if(ee===" "||ee==="	"){let ce=re,pe=N[re+1];for(;pe===" "||pe==="	";)pe=N[++re+1];pe!==`
`&&!(pe==="\r"&&N[re+2]===`
`)&&(W+=re>ce?N.slice(ce,re+1):ee)}else W+=ee}return(N[N.length-1]!=='"'||N.length===1)&&F(N.length,"MISSING_CHAR",'Missing closing "quote'),W}function H(N,F){let W="",re=N[F+1];for(;(re===" "||re==="	"||re===`
`||re==="\r")&&!(re==="\r"&&N[F+2]!==`
`);)re===`
`&&(W+=`
`),F+=1,re=N[F+1];return W||(W=" "),{fold:W,offset:F}}var B={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function L(N,F,W,re){let ee=N.substr(F,W),ce=ee.length===W&&/^[0-9a-fA-F]+$/.test(ee)?parseInt(ee,16):NaN;if(isNaN(ce)){let pe=N.substr(F-2,W+2);return re(F-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${pe}`),pe}return String.fromCodePoint(ce)}G.resolveFlowScalar=Z}),$S=P(G=>{var Q=xr(),Y=Qr(),Z=um(),X=dm();function k(H,B,L,N){let{value:F,type:W,comment:re,range:ee}=B.type==="block-scalar"?Z.resolveBlockScalar(H,B,N):X.resolveFlowScalar(B,H.options.strict,N),ce=L?H.directives.tagName(L.source,se=>N(L,"TAG_RESOLVE_FAILED",se)):null,pe;H.options.stringKeys&&H.atKey?pe=H.schema[Q.SCALAR]:ce?pe=A(H.schema,F,ce,L,N):B.type==="scalar"?pe=M(H,F,B,N):pe=H.schema[Q.SCALAR];let K;try{let se=pe.resolve(F,ue=>N(L??B,"TAG_RESOLVE_FAILED",ue),H.options);K=Q.isScalar(se)?se:new Y.Scalar(se)}catch(se){let ue=se instanceof Error?se.message:String(se);N(L??B,"TAG_RESOLVE_FAILED",ue),K=new Y.Scalar(F)}return K.range=ee,K.source=F,W&&(K.type=W),ce&&(K.tag=ce),pe.format&&(K.format=pe.format),re&&(K.comment=re),K}function A(H,B,L,N,F){var W;if(L==="!")return H[Q.SCALAR];let re=[];for(let ce of H.tags)if(!ce.collection&&ce.tag===L)if(ce.default&&ce.test)re.push(ce);else return ce;for(let ce of re)if((W=ce.test)!=null&&W.test(B))return ce;let ee=H.knownTags[L];return ee&&!ee.collection?(H.tags.push(Object.assign({},ee,{default:!1,test:void 0})),ee):(F(N,"TAG_RESOLVE_FAILED",`Unresolved tag: ${L}`,L!=="tag:yaml.org,2002:str"),H[Q.SCALAR])}function M({atKey:H,directives:B,schema:L},N,F,W){var re;let ee=L.tags.find(ce=>{var pe;return(ce.default===!0||H&&ce.default==="key")&&((pe=ce.test)==null?void 0:pe.test(N))})||L[Q.SCALAR];if(L.compat){let ce=(re=L.compat.find(pe=>{var K;return pe.default&&((K=pe.test)==null?void 0:K.test(N))}))!=null?re:L[Q.SCALAR];if(ee.tag!==ce.tag){let pe=B.tagString(ee.tag),K=B.tagString(ce.tag),se=`Value may be parsed as either ${pe} or ${K}`;W(F,"TAG_RESOLVE_FAILED",se,!0)}}return ee}G.composeScalar=k}),WS=P(G=>{function Q(Y,Z,X){if(Z){X===null&&(X=Z.length);for(let k=X-1;k>=0;--k){let A=Z[k];switch(A.type){case"space":case"comment":case"newline":Y-=A.source.length;continue}for(A=Z[++k];(A==null?void 0:A.type)==="space";)Y+=A.source.length,A=Z[++k];break}}return Y}G.emptyScalarPosition=Q}),zS=P(G=>{var Q=fa(),Y=xr(),Z=qS(),X=$S(),k=xs(),A=WS(),M={composeNode:H,composeEmptyNode:B};function H(N,F,W,re){let ee=N.atKey,{spaceBefore:ce,comment:pe,anchor:K,tag:se}=W,ue,ae=!0;switch(F.type){case"alias":ue=L(N,F,re),(K||se)&&re(F,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":ue=X.composeScalar(N,F,se,re),K&&(ue.anchor=K.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":ue=Z.composeCollection(M,N,F,W,re),K&&(ue.anchor=K.source.substring(1));break;default:{let oe=F.type==="error"?F.message:`Unsupported token (type: ${F.type})`;re(F,"UNEXPECTED_TOKEN",oe),ue=B(N,F.offset,void 0,null,W,re),ae=!1}}return K&&ue.anchor===""&&re(K,"BAD_ALIAS","Anchor cannot be an empty string"),ee&&N.options.stringKeys&&(!Y.isScalar(ue)||typeof ue.value!="string"||ue.tag&&ue.tag!=="tag:yaml.org,2002:str")&&re(se??F,"NON_STRING_KEY","With stringKeys, all keys must be strings"),ce&&(ue.spaceBefore=!0),pe&&(F.type==="scalar"&&F.source===""?ue.comment=pe:ue.commentBefore=pe),N.options.keepSourceTokens&&ae&&(ue.srcToken=F),ue}function B(N,F,W,re,{spaceBefore:ee,comment:ce,anchor:pe,tag:K,end:se},ue){let ae={type:"scalar",offset:A.emptyScalarPosition(F,W,re),indent:-1,source:""},oe=X.composeScalar(N,ae,K,ue);return pe&&(oe.anchor=pe.source.substring(1),oe.anchor===""&&ue(pe,"BAD_ALIAS","Anchor cannot be an empty string")),ee&&(oe.spaceBefore=!0),ce&&(oe.comment=ce,oe.range[2]=se),oe}function L({options:N},{offset:F,source:W,end:re},ee){let ce=new Q.Alias(W.substring(1));ce.source===""&&ee(F,"BAD_ALIAS","Alias cannot be an empty string"),ce.source.endsWith(":")&&ee(F+W.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let pe=F+W.length,K=k.resolveEnd(re,pe,N.strict,ee);return ce.range=[F,pe,K.offset],K.comment&&(ce.comment=K.comment),ce}G.composeEmptyNode=B,G.composeNode=H}),VS=P(G=>{var Q=wa(),Y=zS(),Z=xs(),X=Sa();function k(A,M,{offset:H,start:B,value:L,end:N},F){let W=Object.assign({_directives:M},A),re=new Q.Document(void 0,W),ee={atKey:!1,atRoot:!0,directives:re.directives,options:re.options,schema:re.schema},ce=X.resolveProps(B,{indicator:"doc-start",next:L??(N==null?void 0:N[0]),offset:H,onError:F,parentIndent:0,startOnNewline:!0});ce.found&&(re.directives.docStart=!0,L&&(L.type==="block-map"||L.type==="block-seq")&&!ce.hasNewline&&F(ce.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),re.contents=L?Y.composeNode(ee,L,ce,F):Y.composeEmptyNode(ee,ce.end,B,null,ce,F);let pe=re.contents.range[2],K=Z.resolveEnd(N,pe,!1,F);return K.comment&&(re.comment=K.comment),re.range=[H,pe,K.offset],re}G.composeDoc=k}),hm=P(G=>{var Q=Jf(),Y=wa(),Z=ya(),X=xr(),k=VS(),A=xs();function M(L){if(typeof L=="number")return[L,L+1];if(Array.isArray(L))return L.length===2?L:[L[0],L[1]];let{offset:N,source:F}=L;return[N,N+(typeof F=="string"?F.length:1)]}function H(L){var N;let F="",W=!1,re=!1;for(let ee=0;ee<L.length;++ee){let ce=L[ee];switch(ce[0]){case"#":F+=(F===""?"":re?`

`:`
`)+(ce.substring(1)||" "),W=!0,re=!1;break;case"%":((N=L[ee+1])==null?void 0:N[0])!=="#"&&(ee+=1),W=!1;break;default:W||(re=!0),W=!1}}return{comment:F,afterEmptyLine:re}}var B=class{constructor(L={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(N,F,W,re)=>{let ee=M(N);re?this.warnings.push(new Z.YAMLWarning(ee,F,W)):this.errors.push(new Z.YAMLParseError(ee,F,W))},this.directives=new Q.Directives({version:L.version||"1.2"}),this.options=L}decorate(L,N){let{comment:F,afterEmptyLine:W}=H(this.prelude);if(F){let re=L.contents;if(N)L.comment=L.comment?`${L.comment}
${F}`:F;else if(W||L.directives.docStart||!re)L.commentBefore=F;else if(X.isCollection(re)&&!re.flow&&re.items.length>0){let ee=re.items[0];X.isPair(ee)&&(ee=ee.key);let ce=ee.commentBefore;ee.commentBefore=ce?`${F}
${ce}`:F}else{let ee=re.commentBefore;re.commentBefore=ee?`${F}
${ee}`:F}}N?(Array.prototype.push.apply(L.errors,this.errors),Array.prototype.push.apply(L.warnings,this.warnings)):(L.errors=this.errors,L.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:H(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(L,N=!1,F=-1){for(let W of L)yield*this.next(W);yield*this.end(N,F)}*next(L){switch(t.LOG_STREAM&&console.dir(L,{depth:null}),L.type){case"directive":this.directives.add(L.source,(N,F,W)=>{let re=M(L);re[0]+=N,this.onError(re,"BAD_DIRECTIVE",F,W)}),this.prelude.push(L.source),this.atDirectives=!0;break;case"document":{let N=k.composeDoc(this.options,this.directives,L,this.onError);this.atDirectives&&!N.directives.docStart&&this.onError(L,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(N,!1),this.doc&&(yield this.doc),this.doc=N,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(L.source);break;case"error":{let N=L.source?`${L.message}: ${JSON.stringify(L.source)}`:L.message,F=new Z.YAMLParseError(M(L),"UNEXPECTED_TOKEN",N);this.atDirectives||!this.doc?this.errors.push(F):this.doc.errors.push(F);break}case"doc-end":{if(!this.doc){let F="Unexpected doc-end without preceding document";this.errors.push(new Z.YAMLParseError(M(L),"UNEXPECTED_TOKEN",F));break}this.doc.directives.docEnd=!0;let N=A.resolveEnd(L.end,L.offset+L.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),N.comment){let F=this.doc.comment;this.doc.comment=F?`${F}
${N.comment}`:N.comment}this.doc.range[2]=N.offset;break}default:this.errors.push(new Z.YAMLParseError(M(L),"UNEXPECTED_TOKEN",`Unsupported token ${L.type}`))}}*end(L=!1,N=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(L){let F=Object.assign({_directives:this.directives},this.options),W=new Y.Document(void 0,F);this.atDirectives&&this.onError(N,"MISSING_CHAR","Missing directives-end indicator line"),W.range=[0,N,N],this.decorate(W,!1),yield W}}};G.Composer=B}),KS=P(G=>{var Q=um(),Y=dm(),Z=ya(),X=_a();function k(N,F=!0,W){if(N){let re=(ee,ce,pe)=>{let K=typeof ee=="number"?ee:Array.isArray(ee)?ee[0]:ee.offset;if(W)W(K,ce,pe);else throw new Z.YAMLParseError([K,K+1],ce,pe)};switch(N.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Y.resolveFlowScalar(N,F,re);case"block-scalar":return Q.resolveBlockScalar({options:{strict:F}},N,re)}}return null}function A(N,F){var W;let{implicitKey:re=!1,indent:ee,inFlow:ce=!1,offset:pe=-1,type:K="PLAIN"}=F,se=X.stringifyString({type:K,value:N},{implicitKey:re,indent:ee>0?" ".repeat(ee):"",inFlow:ce,options:{blockQuote:!0,lineWidth:-1}}),ue=(W=F.end)!=null?W:[{type:"newline",offset:-1,indent:ee,source:`
`}];switch(se[0]){case"|":case">":{let ae=se.indexOf(`
`),oe=se.substring(0,ae),fe=se.substring(ae+1)+`
`,we=[{type:"block-scalar-header",offset:pe,indent:ee,source:oe}];return B(we,ue)||we.push({type:"newline",offset:-1,indent:ee,source:`
`}),{type:"block-scalar",offset:pe,indent:ee,props:we,source:fe}}case'"':return{type:"double-quoted-scalar",offset:pe,indent:ee,source:se,end:ue};case"'":return{type:"single-quoted-scalar",offset:pe,indent:ee,source:se,end:ue};default:return{type:"scalar",offset:pe,indent:ee,source:se,end:ue}}}function M(N,F,W={}){let{afterKey:re=!1,implicitKey:ee=!1,inFlow:ce=!1,type:pe}=W,K="indent"in N?N.indent:null;if(re&&typeof K=="number"&&(K+=2),!pe)switch(N.type){case"single-quoted-scalar":pe="QUOTE_SINGLE";break;case"double-quoted-scalar":pe="QUOTE_DOUBLE";break;case"block-scalar":{let ue=N.props[0];if(ue.type!=="block-scalar-header")throw new Error("Invalid block scalar header");pe=ue.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:pe="PLAIN"}let se=X.stringifyString({type:pe,value:F},{implicitKey:ee||K===null,indent:K!==null&&K>0?" ".repeat(K):"",inFlow:ce,options:{blockQuote:!0,lineWidth:-1}});switch(se[0]){case"|":case">":H(N,se);break;case'"':L(N,se,"double-quoted-scalar");break;case"'":L(N,se,"single-quoted-scalar");break;default:L(N,se,"scalar")}}function H(N,F){let W=F.indexOf(`
`),re=F.substring(0,W),ee=F.substring(W+1)+`
`;if(N.type==="block-scalar"){let ce=N.props[0];if(ce.type!=="block-scalar-header")throw new Error("Invalid block scalar header");ce.source=re,N.source=ee}else{let{offset:ce}=N,pe="indent"in N?N.indent:-1,K=[{type:"block-scalar-header",offset:ce,indent:pe,source:re}];B(K,"end"in N?N.end:void 0)||K.push({type:"newline",offset:-1,indent:pe,source:`
`});for(let se of Object.keys(N))se!=="type"&&se!=="offset"&&delete N[se];Object.assign(N,{type:"block-scalar",indent:pe,props:K,source:ee})}}function B(N,F){if(F)for(let W of F)switch(W.type){case"space":case"comment":N.push(W);break;case"newline":return N.push(W),!0}return!1}function L(N,F,W){switch(N.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":N.type=W,N.source=F;break;case"block-scalar":{let re=N.props.slice(1),ee=F.length;N.props[0].type==="block-scalar-header"&&(ee-=N.props[0].source.length);for(let ce of re)ce.offset+=ee;delete N.props,Object.assign(N,{type:W,source:F,end:re});break}case"block-map":case"block-seq":{let re={type:"newline",offset:N.offset+F.length,indent:N.indent,source:`
`};delete N.items,Object.assign(N,{type:W,source:F,end:[re]});break}default:{let re="indent"in N?N.indent:-1,ee="end"in N&&Array.isArray(N.end)?N.end.filter(ce=>ce.type==="space"||ce.type==="comment"||ce.type==="newline"):[];for(let ce of Object.keys(N))ce!=="type"&&ce!=="offset"&&delete N[ce];Object.assign(N,{type:W,indent:re,source:F,end:ee})}}}G.createScalarToken=A,G.resolveAsScalar=k,G.setScalarValue=M}),GS=P(G=>{var Q=X=>"type"in X?Y(X):Z(X);function Y(X){switch(X.type){case"block-scalar":{let k="";for(let A of X.props)k+=Y(A);return k+X.source}case"block-map":case"block-seq":{let k="";for(let A of X.items)k+=Z(A);return k}case"flow-collection":{let k=X.start.source;for(let A of X.items)k+=Z(A);for(let A of X.end)k+=A.source;return k}case"document":{let k=Z(X);if(X.end)for(let A of X.end)k+=A.source;return k}default:{let k=X.source;if("end"in X&&X.end)for(let A of X.end)k+=A.source;return k}}}function Z({start:X,key:k,sep:A,value:M}){let H="";for(let B of X)H+=B.source;if(k&&(H+=Y(k)),A)for(let B of A)H+=B.source;return M&&(H+=Y(M)),H}G.stringify=Q}),JS=P(G=>{var Q=Symbol("break visit"),Y=Symbol("skip children"),Z=Symbol("remove item");function X(A,M){"type"in A&&A.type==="document"&&(A={start:A.start,value:A.value}),k(Object.freeze([]),A,M)}X.BREAK=Q,X.SKIP=Y,X.REMOVE=Z,X.itemAtPath=(A,M)=>{let H=A;for(let[B,L]of M){let N=H==null?void 0:H[B];if(N&&"items"in N)H=N.items[L];else return}return H},X.parentCollection=(A,M)=>{let H=X.itemAtPath(A,M.slice(0,-1)),B=M[M.length-1][0],L=H==null?void 0:H[B];if(L&&"items"in L)return L;throw new Error("Parent collection not found")};function k(A,M,H){let B=H(M,A);if(typeof B=="symbol")return B;for(let L of["key","value"]){let N=M[L];if(N&&"items"in N){for(let F=0;F<N.items.length;++F){let W=k(Object.freeze(A.concat([[L,F]])),N.items[F],H);if(typeof W=="number")F=W-1;else{if(W===Q)return Q;W===Z&&(N.items.splice(F,1),F-=1)}}typeof B=="function"&&L==="key"&&(B=B(M,A))}}return typeof B=="function"?B(M,A):B}G.visit=X}),uc=P(G=>{var Q=KS(),Y=GS(),Z=JS(),X="\uFEFF",k="",A="",M="",H=F=>!!F&&"items"in F,B=F=>!!F&&(F.type==="scalar"||F.type==="single-quoted-scalar"||F.type==="double-quoted-scalar"||F.type==="block-scalar");function L(F){switch(F){case X:return"<BOM>";case k:return"<DOC>";case A:return"<FLOW_END>";case M:return"<SCALAR>";default:return JSON.stringify(F)}}function N(F){switch(F){case X:return"byte-order-mark";case k:return"doc-mode";case A:return"flow-error-end";case M:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(F[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}G.createScalarToken=Q.createScalarToken,G.resolveAsScalar=Q.resolveAsScalar,G.setScalarValue=Q.setScalarValue,G.stringify=Y.stringify,G.visit=Z.visit,G.BOM=X,G.DOCUMENT=k,G.FLOW_END=A,G.SCALAR=M,G.isCollection=H,G.isScalar=B,G.prettyToken=L,G.tokenType=N}),pm=P(G=>{var Q=uc();function Y(B){switch(B){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var Z=new Set("0123456789ABCDEFabcdef"),X=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),k=new Set(",[]{}"),A=new Set(` ,[]{}
\r	`),M=B=>!B||A.has(B),H=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(B,L=!1){var N;if(B){if(typeof B!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+B:B,this.lineEndPos=null}this.atEnd=!L;let F=(N=this.next)!=null?N:"stream";for(;F&&(L||this.hasChars(1));)F=yield*this.parseNext(F)}atLineEnd(){let B=this.pos,L=this.buffer[B];for(;L===" "||L==="	";)L=this.buffer[++B];return!L||L==="#"||L===`
`?!0:L==="\r"?this.buffer[B+1]===`
`:!1}charAt(B){return this.buffer[this.pos+B]}continueScalar(B){let L=this.buffer[B];if(this.indentNext>0){let N=0;for(;L===" ";)L=this.buffer[++N+B];if(L==="\r"){let F=this.buffer[N+B+1];if(F===`
`||!F&&!this.atEnd)return B+N+1}return L===`
`||N>=this.indentNext||!L&&!this.atEnd?B+N:-1}if(L==="-"||L==="."){let N=this.buffer.substr(B,3);if((N==="---"||N==="...")&&Y(this.buffer[B+3]))return-1}return B}getLine(){let B=this.lineEndPos;return(typeof B!="number"||B!==-1&&B<this.pos)&&(B=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=B),B===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[B-1]==="\r"&&(B-=1),this.buffer.substring(this.pos,B))}hasChars(B){return this.pos+B<=this.buffer.length}setNext(B){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=B,null}peek(B){return this.buffer.substr(this.pos,B)}*parseNext(B){switch(B){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let B=this.getLine();if(B===null)return this.setNext("stream");if(B[0]===Q.BOM&&(yield*this.pushCount(1),B=B.substring(1)),B[0]==="%"){let L=B.length,N=B.indexOf("#");for(;N!==-1;){let W=B[N-1];if(W===" "||W==="	"){L=N-1;break}else N=B.indexOf("#",N+1)}for(;;){let W=B[L-1];if(W===" "||W==="	")L-=1;else break}let F=(yield*this.pushCount(L))+(yield*this.pushSpaces(!0));return yield*this.pushCount(B.length-F),this.pushNewline(),"stream"}if(this.atLineEnd()){let L=yield*this.pushSpaces(!0);return yield*this.pushCount(B.length-L),yield*this.pushNewline(),"stream"}return yield Q.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let B=this.charAt(0);if(!B&&!this.atEnd)return this.setNext("line-start");if(B==="-"||B==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let L=this.peek(3);if((L==="---"||L==="...")&&Y(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,L==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Y(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[B,L]=this.peek(2);if(!L&&!this.atEnd)return this.setNext("block-start");if((B==="-"||B==="?"||B===":")&&Y(L)){let N=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=N,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let B=this.getLine();if(B===null)return this.setNext("doc");let L=yield*this.pushIndicators();switch(B[L]){case"#":yield*this.pushCount(B.length-L);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(M),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return L+=yield*this.parseBlockScalarHeader(),L+=yield*this.pushSpaces(!0),yield*this.pushCount(B.length-L),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let B,L,N=-1;do B=yield*this.pushNewline(),B>0?(L=yield*this.pushSpaces(!1),this.indentValue=N=L):L=0,L+=yield*this.pushSpaces(!0);while(B+L>0);let F=this.getLine();if(F===null)return this.setNext("flow");if((N!==-1&&N<this.indentNext&&F[0]!=="#"||N===0&&(F.startsWith("---")||F.startsWith("..."))&&Y(F[3]))&&!(N===this.indentNext-1&&this.flowLevel===1&&(F[0]==="]"||F[0]==="}")))return this.flowLevel=0,yield Q.FLOW_END,yield*this.parseLineStart();let W=0;for(;F[W]===",";)W+=yield*this.pushCount(1),W+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(W+=yield*this.pushIndicators(),F[W]){case void 0:return"flow";case"#":return yield*this.pushCount(F.length-W),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(M),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let re=this.charAt(1);if(this.flowKey||Y(re)||re===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let B=this.charAt(0),L=this.buffer.indexOf(B,this.pos+1);if(B==="'")for(;L!==-1&&this.buffer[L+1]==="'";)L=this.buffer.indexOf("'",L+2);else for(;L!==-1;){let W=0;for(;this.buffer[L-1-W]==="\\";)W+=1;if(W%2===0)break;L=this.buffer.indexOf('"',L+1)}let N=this.buffer.substring(0,L),F=N.indexOf(`
`,this.pos);if(F!==-1){for(;F!==-1;){let W=this.continueScalar(F+1);if(W===-1)break;F=N.indexOf(`
`,W)}F!==-1&&(L=F-(N[F-1]==="\r"?2:1))}if(L===-1){if(!this.atEnd)return this.setNext("quoted-scalar");L=this.buffer.length}return yield*this.pushToIndex(L+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let B=this.pos;for(;;){let L=this.buffer[++B];if(L==="+")this.blockScalarKeep=!0;else if(L>"0"&&L<="9")this.blockScalarIndent=Number(L)-1;else if(L!=="-")break}return yield*this.pushUntil(L=>Y(L)||L==="#")}*parseBlockScalar(){let B=this.pos-1,L=0,N;e:for(let W=this.pos;N=this.buffer[W];++W)switch(N){case" ":L+=1;break;case`
`:B=W,L=0;break;case"\r":{let re=this.buffer[W+1];if(!re&&!this.atEnd)return this.setNext("block-scalar");if(re===`
`)break}default:break e}if(!N&&!this.atEnd)return this.setNext("block-scalar");if(L>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=L:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let W=this.continueScalar(B+1);if(W===-1)break;B=this.buffer.indexOf(`
`,W)}while(B!==-1);if(B===-1){if(!this.atEnd)return this.setNext("block-scalar");B=this.buffer.length}}let F=B+1;for(N=this.buffer[F];N===" ";)N=this.buffer[++F];if(N==="	"){for(;N==="	"||N===" "||N==="\r"||N===`
`;)N=this.buffer[++F];B=F-1}else if(!this.blockScalarKeep)do{let W=B-1,re=this.buffer[W];re==="\r"&&(re=this.buffer[--W]);let ee=W;for(;re===" ";)re=this.buffer[--W];if(re===`
`&&W>=this.pos&&W+1+L>ee)B=W;else break}while(!0);return yield Q.SCALAR,yield*this.pushToIndex(B+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let B=this.flowLevel>0,L=this.pos-1,N=this.pos-1,F;for(;F=this.buffer[++N];)if(F===":"){let W=this.buffer[N+1];if(Y(W)||B&&k.has(W))break;L=N}else if(Y(F)){let W=this.buffer[N+1];if(F==="\r"&&(W===`
`?(N+=1,F=`
`,W=this.buffer[N+1]):L=N),W==="#"||B&&k.has(W))break;if(F===`
`){let re=this.continueScalar(N+1);if(re===-1)break;N=Math.max(N,re-2)}}else{if(B&&k.has(F))break;L=N}return!F&&!this.atEnd?this.setNext("plain-scalar"):(yield Q.SCALAR,yield*this.pushToIndex(L+1,!0),B?"flow":"doc")}*pushCount(B){return B>0?(yield this.buffer.substr(this.pos,B),this.pos+=B,B):0}*pushToIndex(B,L){let N=this.buffer.slice(this.pos,B);return N?(yield N,this.pos+=N.length,N.length):(L&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(M))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let B=this.flowLevel>0,L=this.charAt(1);if(Y(L)||B&&k.has(L))return B?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let B=this.pos+2,L=this.buffer[B];for(;!Y(L)&&L!==">";)L=this.buffer[++B];return yield*this.pushToIndex(L===">"?B+1:B,!1)}else{let B=this.pos+1,L=this.buffer[B];for(;L;)if(X.has(L))L=this.buffer[++B];else if(L==="%"&&Z.has(this.buffer[B+1])&&Z.has(this.buffer[B+2]))L=this.buffer[B+=3];else break;return yield*this.pushToIndex(B,!1)}}*pushNewline(){let B=this.buffer[this.pos];return B===`
`?yield*this.pushCount(1):B==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(B){let L=this.pos-1,N;do N=this.buffer[++L];while(N===" "||B&&N==="	");let F=L-this.pos;return F>0&&(yield this.buffer.substr(this.pos,F),this.pos=L),F}*pushUntil(B){let L=this.pos,N=this.buffer[L];for(;!B(N);)N=this.buffer[++L];return yield*this.pushToIndex(L,!1)}};G.Lexer=H}),fm=P(G=>{var Q=class{constructor(){this.lineStarts=[],this.addNewLine=Y=>this.lineStarts.push(Y),this.linePos=Y=>{let Z=0,X=this.lineStarts.length;for(;Z<X;){let A=Z+X>>1;this.lineStarts[A]<Y?Z=A+1:X=A}if(this.lineStarts[Z]===Y)return{line:Z+1,col:1};if(Z===0)return{line:0,col:Y};let k=this.lineStarts[Z-1];return{line:Z,col:Y-k+1}}}};G.LineCounter=Q}),mm=P(G=>{var Q=uc(),Y=pm();function Z(L,N){for(let F=0;F<L.length;++F)if(L[F].type===N)return!0;return!1}function X(L){for(let N=0;N<L.length;++N)switch(L[N].type){case"space":case"comment":case"newline":break;default:return N}return-1}function k(L){switch(L==null?void 0:L.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function A(L){var N;switch(L.type){case"document":return L.start;case"block-map":{let F=L.items[L.items.length-1];return(N=F.sep)!=null?N:F.start}case"block-seq":return L.items[L.items.length-1].start;default:return[]}}function M(L){var N;if(L.length===0)return[];let F=L.length;e:for(;--F>=0;)switch(L[F].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((N=L[++F])==null?void 0:N.type)==="space";);return L.splice(F,L.length)}function H(L){if(L.start.type==="flow-seq-start")for(let N of L.items)N.sep&&!N.value&&!Z(N.start,"explicit-key-ind")&&!Z(N.sep,"map-value-ind")&&(N.key&&(N.value=N.key),delete N.key,k(N.value)?N.value.end?Array.prototype.push.apply(N.value.end,N.sep):N.value.end=N.sep:Array.prototype.push.apply(N.start,N.sep),delete N.sep)}var B=class{constructor(L){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Y.Lexer,this.onNewLine=L}*parse(L,N=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let F of this.lexer.lex(L,N))yield*this.next(F);N||(yield*this.end())}*next(L){if(this.source=L,t.LOG_TOKENS&&console.log("|",Q.prettyToken(L)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=L.length;return}let N=Q.tokenType(L);if(N)if(N==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=N,yield*this.step(),N){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+L.length);break;case"space":this.atNewLine&&L[0]===" "&&(this.indent+=L.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=L.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=L.length}else{let F=`Not a YAML token: ${L}`;yield*this.pop({type:"error",offset:this.offset,message:F,source:L}),this.offset+=L.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let L=this.peek(1);if(this.type==="doc-end"&&(!L||L.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!L)return yield*this.stream();switch(L.type){case"document":return yield*this.document(L);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(L);case"block-scalar":return yield*this.blockScalar(L);case"block-map":return yield*this.blockMap(L);case"block-seq":return yield*this.blockSequence(L);case"flow-collection":return yield*this.flowCollection(L);case"doc-end":return yield*this.documentEnd(L)}yield*this.pop()}peek(L){return this.stack[this.stack.length-L]}*pop(L){let N=L??this.stack.pop();if(!N)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield N;else{let F=this.peek(1);switch(N.type==="block-scalar"?N.indent="indent"in F?F.indent:0:N.type==="flow-collection"&&F.type==="document"&&(N.indent=0),N.type==="flow-collection"&&H(N),F.type){case"document":F.value=N;break;case"block-scalar":F.props.push(N);break;case"block-map":{let W=F.items[F.items.length-1];if(W.value){F.items.push({start:[],key:N,sep:[]}),this.onKeyLine=!0;return}else if(W.sep)W.value=N;else{Object.assign(W,{key:N,sep:[]}),this.onKeyLine=!W.explicitKey;return}break}case"block-seq":{let W=F.items[F.items.length-1];W.value?F.items.push({start:[],value:N}):W.value=N;break}case"flow-collection":{let W=F.items[F.items.length-1];!W||W.value?F.items.push({start:[],key:N,sep:[]}):W.sep?W.value=N:Object.assign(W,{key:N,sep:[]});return}default:yield*this.pop(),yield*this.pop(N)}if((F.type==="document"||F.type==="block-map"||F.type==="block-seq")&&(N.type==="block-map"||N.type==="block-seq")){let W=N.items[N.items.length-1];W&&!W.sep&&!W.value&&W.start.length>0&&X(W.start)===-1&&(N.indent===0||W.start.every(re=>re.type!=="comment"||re.indent<N.indent))&&(F.type==="document"?F.end=W.start:F.items.push({start:W.start}),N.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let L={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&L.start.push(this.sourceToken),this.stack.push(L);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(L){if(L.value)return yield*this.lineEnd(L);switch(this.type){case"doc-start":{X(L.start)!==-1?(yield*this.pop(),yield*this.step()):L.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":L.start.push(this.sourceToken);return}let N=this.startBlockValue(L);N?this.stack.push(N):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(L){if(this.type==="map-value-ind"){let N=A(this.peek(2)),F=M(N),W;L.end?(W=L.end,W.push(this.sourceToken),delete L.end):W=[this.sourceToken];let re={type:"block-map",offset:L.offset,indent:L.indent,items:[{start:F,key:L,sep:W}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=re}else yield*this.lineEnd(L)}*blockScalar(L){switch(this.type){case"space":case"comment":case"newline":L.props.push(this.sourceToken);return;case"scalar":if(L.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let N=this.source.indexOf(`
`)+1;for(;N!==0;)this.onNewLine(this.offset+N),N=this.source.indexOf(`
`,N)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(L){var N;let F=L.items[L.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,F.value){let W="end"in F.value?F.value.end:void 0,re=Array.isArray(W)?W[W.length-1]:void 0;(re==null?void 0:re.type)==="comment"?W==null||W.push(this.sourceToken):L.items.push({start:[this.sourceToken]})}else F.sep?F.sep.push(this.sourceToken):F.start.push(this.sourceToken);return;case"space":case"comment":if(F.value)L.items.push({start:[this.sourceToken]});else if(F.sep)F.sep.push(this.sourceToken);else{if(this.atIndentedComment(F.start,L.indent)){let W=L.items[L.items.length-2],re=(N=W==null?void 0:W.value)==null?void 0:N.end;if(Array.isArray(re)){Array.prototype.push.apply(re,F.start),re.push(this.sourceToken),L.items.pop();return}}F.start.push(this.sourceToken)}return}if(this.indent>=L.indent){let W=!this.onKeyLine&&this.indent===L.indent,re=W&&(F.sep||F.explicitKey)&&this.type!=="seq-item-ind",ee=[];if(re&&F.sep&&!F.value){let ce=[];for(let pe=0;pe<F.sep.length;++pe){let K=F.sep[pe];switch(K.type){case"newline":ce.push(pe);break;case"space":break;case"comment":K.indent>L.indent&&(ce.length=0);break;default:ce.length=0}}ce.length>=2&&(ee=F.sep.splice(ce[1]))}switch(this.type){case"anchor":case"tag":re||F.value?(ee.push(this.sourceToken),L.items.push({start:ee}),this.onKeyLine=!0):F.sep?F.sep.push(this.sourceToken):F.start.push(this.sourceToken);return;case"explicit-key-ind":!F.sep&&!F.explicitKey?(F.start.push(this.sourceToken),F.explicitKey=!0):re||F.value?(ee.push(this.sourceToken),L.items.push({start:ee,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(F.explicitKey)if(F.sep)if(F.value)L.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Z(F.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:ee,key:null,sep:[this.sourceToken]}]});else if(k(F.key)&&!Z(F.sep,"newline")){let ce=M(F.start),pe=F.key,K=F.sep;K.push(this.sourceToken),delete F.key,delete F.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:ce,key:pe,sep:K}]})}else ee.length>0?F.sep=F.sep.concat(ee,this.sourceToken):F.sep.push(this.sourceToken);else if(Z(F.start,"newline"))Object.assign(F,{key:null,sep:[this.sourceToken]});else{let ce=M(F.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:ce,key:null,sep:[this.sourceToken]}]})}else F.sep?F.value||re?L.items.push({start:ee,key:null,sep:[this.sourceToken]}):Z(F.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):F.sep.push(this.sourceToken):Object.assign(F,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let ce=this.flowScalar(this.type);re||F.value?(L.items.push({start:ee,key:ce,sep:[]}),this.onKeyLine=!0):F.sep?this.stack.push(ce):(Object.assign(F,{key:ce,sep:[]}),this.onKeyLine=!0);return}default:{let ce=this.startBlockValue(L);if(ce){W&&ce.type!=="block-seq"&&L.items.push({start:ee}),this.stack.push(ce);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(L){var N;let F=L.items[L.items.length-1];switch(this.type){case"newline":if(F.value){let W="end"in F.value?F.value.end:void 0,re=Array.isArray(W)?W[W.length-1]:void 0;(re==null?void 0:re.type)==="comment"?W==null||W.push(this.sourceToken):L.items.push({start:[this.sourceToken]})}else F.start.push(this.sourceToken);return;case"space":case"comment":if(F.value)L.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(F.start,L.indent)){let W=L.items[L.items.length-2],re=(N=W==null?void 0:W.value)==null?void 0:N.end;if(Array.isArray(re)){Array.prototype.push.apply(re,F.start),re.push(this.sourceToken),L.items.pop();return}}F.start.push(this.sourceToken)}return;case"anchor":case"tag":if(F.value||this.indent<=L.indent)break;F.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==L.indent)break;F.value||Z(F.start,"seq-item-ind")?L.items.push({start:[this.sourceToken]}):F.start.push(this.sourceToken);return}if(this.indent>L.indent){let W=this.startBlockValue(L);if(W){this.stack.push(W);return}}yield*this.pop(),yield*this.step()}*flowCollection(L){let N=L.items[L.items.length-1];if(this.type==="flow-error-end"){let F;do yield*this.pop(),F=this.peek(1);while(F&&F.type==="flow-collection")}else if(L.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!N||N.sep?L.items.push({start:[this.sourceToken]}):N.start.push(this.sourceToken);return;case"map-value-ind":!N||N.value?L.items.push({start:[],key:null,sep:[this.sourceToken]}):N.sep?N.sep.push(this.sourceToken):Object.assign(N,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!N||N.value?L.items.push({start:[this.sourceToken]}):N.sep?N.sep.push(this.sourceToken):N.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let W=this.flowScalar(this.type);!N||N.value?L.items.push({start:[],key:W,sep:[]}):N.sep?this.stack.push(W):Object.assign(N,{key:W,sep:[]});return}case"flow-map-end":case"flow-seq-end":L.end.push(this.sourceToken);return}let F=this.startBlockValue(L);F?this.stack.push(F):(yield*this.pop(),yield*this.step())}else{let F=this.peek(2);if(F.type==="block-map"&&(this.type==="map-value-ind"&&F.indent===L.indent||this.type==="newline"&&!F.items[F.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&F.type!=="flow-collection"){let W=A(F),re=M(W);H(L);let ee=L.end.splice(1,L.end.length);ee.push(this.sourceToken);let ce={type:"block-map",offset:L.offset,indent:L.indent,items:[{start:re,key:L,sep:ee}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=ce}else yield*this.lineEnd(L)}}flowScalar(L){if(this.onNewLine){let N=this.source.indexOf(`
`)+1;for(;N!==0;)this.onNewLine(this.offset+N),N=this.source.indexOf(`
`,N)+1}return{type:L,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(L){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let N=A(L),F=M(N);return F.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:F,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let N=A(L),F=M(N);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:F,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(L,N){return this.type!=="comment"||this.indent<=N?!1:L.every(F=>F.type==="newline"||F.type==="space")}*documentEnd(L){this.type!=="doc-mode"&&(L.end?L.end.push(this.sourceToken):L.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(L){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:L.end?L.end.push(this.sourceToken):L.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};G.Parser=B}),YS=P(G=>{var Q=hm(),Y=wa(),Z=ya(),X=Xf(),k=xr(),A=fm(),M=mm();function H(W){let re=W.prettyErrors!==!1;return{lineCounter:W.lineCounter||re&&new A.LineCounter||null,prettyErrors:re}}function B(W,re={}){let{lineCounter:ee,prettyErrors:ce}=H(re),pe=new M.Parser(ee==null?void 0:ee.addNewLine),K=new Q.Composer(re),se=Array.from(K.compose(pe.parse(W)));if(ce&&ee)for(let ue of se)ue.errors.forEach(Z.prettifyError(W,ee)),ue.warnings.forEach(Z.prettifyError(W,ee));return se.length>0?se:Object.assign([],{empty:!0},K.streamInfo())}function L(W,re={}){let{lineCounter:ee,prettyErrors:ce}=H(re),pe=new M.Parser(ee==null?void 0:ee.addNewLine),K=new Q.Composer(re),se=null;for(let ue of K.compose(pe.parse(W),!0,W.length))if(!se)se=ue;else if(se.options.logLevel!=="silent"){se.errors.push(new Z.YAMLParseError(ue.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return ce&&ee&&(se.errors.forEach(Z.prettifyError(W,ee)),se.warnings.forEach(Z.prettifyError(W,ee))),se}function N(W,re,ee){let ce;typeof re=="function"?ce=re:ee===void 0&&re&&typeof re=="object"&&(ee=re);let pe=L(W,ee);if(!pe)return null;if(pe.warnings.forEach(K=>X.warn(pe.options.logLevel,K)),pe.errors.length>0){if(pe.options.logLevel!=="silent")throw pe.errors[0];pe.errors=[]}return pe.toJS(Object.assign({reviver:ce},ee))}function F(W,re,ee){var ce;let pe=null;if(typeof re=="function"||Array.isArray(re)?pe=re:ee===void 0&&re&&(ee=re),typeof ee=="string"&&(ee=ee.length),typeof ee=="number"){let K=Math.round(ee);ee=K<1?void 0:K>8?{indent:8}:{indent:K}}if(W===void 0){let{keepUndefined:K}=(ce=ee??re)!=null?ce:{};if(!K)return}return k.isDocument(W)&&!pe?W.toString(ee):new Y.Document(W,pe,ee).toString(ee)}G.parse=N,G.parseAllDocuments=B,G.parseDocument=L,G.stringify=F}),XS=P(G=>{var Q=hm(),Y=wa(),Z=om(),X=ya(),k=fa(),A=xr(),M=Ii(),H=Qr(),B=Ni(),L=Ri(),N=uc(),F=pm(),W=fm(),re=mm(),ee=YS(),ce=pa();G.Composer=Q.Composer,G.Document=Y.Document,G.Schema=Z.Schema,G.YAMLError=X.YAMLError,G.YAMLParseError=X.YAMLParseError,G.YAMLWarning=X.YAMLWarning,G.Alias=k.Alias,G.isAlias=A.isAlias,G.isCollection=A.isCollection,G.isDocument=A.isDocument,G.isMap=A.isMap,G.isNode=A.isNode,G.isPair=A.isPair,G.isScalar=A.isScalar,G.isSeq=A.isSeq,G.Pair=M.Pair,G.Scalar=H.Scalar,G.YAMLMap=B.YAMLMap,G.YAMLSeq=L.YAMLSeq,G.CST=N,G.Lexer=F.Lexer,G.LineCounter=W.LineCounter,G.Parser=re.Parser,G.parse=ee.parse,G.parseAllDocuments=ee.parseAllDocuments,G.parseDocument=ee.parseDocument,G.stringify=ee.stringify,G.visit=ce.visit,G.visitAsync=ce.visitAsync}),QS=P((G,Q)=>{var{Duplex:Y}=Je;function Z(M){M.emit("close")}function X(){!this.destroyed&&this._writableState.finished&&this.destroy()}function k(M){this.removeListener("error",k),this.destroy(),this.listenerCount("error")===0&&this.emit("error",M)}function A(M,H){let B=!0,L=new Y({...H,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return M.on("message",function(N,F){let W=!F&&L._readableState.objectMode?N.toString():N;L.push(W)||M.pause()}),M.once("error",function(N){L.destroyed||(B=!1,L.destroy(N))}),M.once("close",function(){L.destroyed||L.push(null)}),L._destroy=function(N,F){if(M.readyState===M.CLOSED){F(N),process.nextTick(Z,L);return}let W=!1;M.once("error",function(re){W=!0,F(re)}),M.once("close",function(){W||F(N),process.nextTick(Z,L)}),B&&M.terminate()},L._final=function(N){if(M.readyState===M.CONNECTING){M.once("open",function(){L._final(N)});return}M._socket!==null&&(M._socket._writableState.finished?(N(),L._readableState.endEmitted&&L.destroy()):(M._socket.once("finish",function(){N()}),M.close()))},L._read=function(){M.isPaused&&M.resume()},L._write=function(N,F,W){if(M.readyState===M.CONNECTING){M.once("open",function(){L._write(N,F,W)});return}M.send(N,W)},L.on("end",X),L.on("error",k),L}Q.exports=A}),Li=P((G,Q)=>{Q.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}}),xa=P((G,Q)=>{var{EMPTY_BUFFER:Y}=Li(),Z=Buffer[Symbol.species];function X(B,L){if(B.length===0)return Y;if(B.length===1)return B[0];let N=Buffer.allocUnsafe(L),F=0;for(let W=0;W<B.length;W++){let re=B[W];N.set(re,F),F+=re.length}return F<L?new Z(N.buffer,N.byteOffset,F):N}function k(B,L,N,F,W){for(let re=0;re<W;re++)N[F+re]=B[re]^L[re&3]}function A(B,L){for(let N=0;N<B.length;N++)B[N]^=L[N&3]}function M(B){return B.length===B.buffer.byteLength?B.buffer:B.buffer.slice(B.byteOffset,B.byteOffset+B.length)}function H(B){if(H.readOnly=!0,Buffer.isBuffer(B))return B;let L;return B instanceof ArrayBuffer?L=new Z(B):ArrayBuffer.isView(B)?L=new Z(B.buffer,B.byteOffset,B.byteLength):(L=Buffer.from(B),H.readOnly=!1),L}if(Q.exports={concat:X,mask:k,toArrayBuffer:M,toBuffer:H,unmask:A},!t.WS_NO_BUFFER_UTIL)try{let B=require("bufferutil");Q.exports.mask=function(L,N,F,W,re){re<48?k(L,N,F,W,re):B.mask(L,N,F,W,re)},Q.exports.unmask=function(L,N){L.length<32?A(L,N):B.unmask(L,N)}}catch{}}),ZS=P((G,Q)=>{var Y=Symbol("kDone"),Z=Symbol("kRun"),X=class{constructor(k){this[Y]=()=>{this.pending--,this[Z]()},this.concurrency=k||1/0,this.jobs=[],this.pending=0}add(k){this.jobs.push(k),this[Z]()}[Z](){if(this.pending!==this.concurrency&&this.jobs.length){let k=this.jobs.shift();this.pending++,k(this[Y])}}};Q.exports=X}),Ea=P((G,Q)=>{var Y=Je,Z=xa(),X=ZS(),{kStatusCode:k}=Li(),A=Buffer[Symbol.species],M=Buffer.from([0,0,255,255]),H=Symbol("permessage-deflate"),B=Symbol("total-length"),L=Symbol("callback"),N=Symbol("buffers"),F=Symbol("error"),W,re=class{constructor(K,se,ue){if(this._maxPayload=ue|0,this._options=K||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!se,this._deflate=null,this._inflate=null,this.params=null,!W){let ae=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;W=new X(ae)}}static get extensionName(){return"permessage-deflate"}offer(){let K={};return this._options.serverNoContextTakeover&&(K.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(K.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(K.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?K.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(K.client_max_window_bits=!0),K}accept(K){return K=this.normalizeParams(K),this.params=this._isServer?this.acceptAsServer(K):this.acceptAsClient(K),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let K=this._deflate[L];this._deflate.close(),this._deflate=null,K&&K(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(K){let se=this._options,ue=K.find(ae=>!(se.serverNoContextTakeover===!1&&ae.server_no_context_takeover||ae.server_max_window_bits&&(se.serverMaxWindowBits===!1||typeof se.serverMaxWindowBits=="number"&&se.serverMaxWindowBits>ae.server_max_window_bits)||typeof se.clientMaxWindowBits=="number"&&!ae.client_max_window_bits));if(!ue)throw new Error("None of the extension offers can be accepted");return se.serverNoContextTakeover&&(ue.server_no_context_takeover=!0),se.clientNoContextTakeover&&(ue.client_no_context_takeover=!0),typeof se.serverMaxWindowBits=="number"&&(ue.server_max_window_bits=se.serverMaxWindowBits),typeof se.clientMaxWindowBits=="number"?ue.client_max_window_bits=se.clientMaxWindowBits:(ue.client_max_window_bits===!0||se.clientMaxWindowBits===!1)&&delete ue.client_max_window_bits,ue}acceptAsClient(K){let se=K[0];if(this._options.clientNoContextTakeover===!1&&se.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!se.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(se.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&se.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return se}normalizeParams(K){return K.forEach(se=>{Object.keys(se).forEach(ue=>{let ae=se[ue];if(ae.length>1)throw new Error(`Parameter "${ue}" must have only a single value`);if(ae=ae[0],ue==="client_max_window_bits"){if(ae!==!0){let oe=+ae;if(!Number.isInteger(oe)||oe<8||oe>15)throw new TypeError(`Invalid value for parameter "${ue}": ${ae}`);ae=oe}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${ue}": ${ae}`)}else if(ue==="server_max_window_bits"){let oe=+ae;if(!Number.isInteger(oe)||oe<8||oe>15)throw new TypeError(`Invalid value for parameter "${ue}": ${ae}`);ae=oe}else if(ue==="client_no_context_takeover"||ue==="server_no_context_takeover"){if(ae!==!0)throw new TypeError(`Invalid value for parameter "${ue}": ${ae}`)}else throw new Error(`Unknown parameter "${ue}"`);se[ue]=ae})}),K}decompress(K,se,ue){W.add(ae=>{this._decompress(K,se,(oe,fe)=>{ae(),ue(oe,fe)})})}compress(K,se,ue){W.add(ae=>{this._compress(K,se,(oe,fe)=>{ae(),ue(oe,fe)})})}_decompress(K,se,ue){let ae=this._isServer?"client":"server";if(!this._inflate){let oe=`${ae}_max_window_bits`,fe=typeof this.params[oe]!="number"?Y.Z_DEFAULT_WINDOWBITS:this.params[oe];this._inflate=Y.createInflateRaw({...this._options.zlibInflateOptions,windowBits:fe}),this._inflate[H]=this,this._inflate[B]=0,this._inflate[N]=[],this._inflate.on("error",pe),this._inflate.on("data",ce)}this._inflate[L]=ue,this._inflate.write(K),se&&this._inflate.write(M),this._inflate.flush(()=>{let oe=this._inflate[F];if(oe){this._inflate.close(),this._inflate=null,ue(oe);return}let fe=Z.concat(this._inflate[N],this._inflate[B]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[B]=0,this._inflate[N]=[],se&&this.params[`${ae}_no_context_takeover`]&&this._inflate.reset()),ue(null,fe)})}_compress(K,se,ue){let ae=this._isServer?"server":"client";if(!this._deflate){let oe=`${ae}_max_window_bits`,fe=typeof this.params[oe]!="number"?Y.Z_DEFAULT_WINDOWBITS:this.params[oe];this._deflate=Y.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:fe}),this._deflate[B]=0,this._deflate[N]=[],this._deflate.on("data",ee)}this._deflate[L]=ue,this._deflate.write(K),this._deflate.flush(Y.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let oe=Z.concat(this._deflate[N],this._deflate[B]);se&&(oe=new A(oe.buffer,oe.byteOffset,oe.length-4)),this._deflate[L]=null,this._deflate[B]=0,this._deflate[N]=[],se&&this.params[`${ae}_no_context_takeover`]&&this._deflate.reset(),ue(null,oe)})}};Q.exports=re;function ee(K){this[N].push(K),this[B]+=K.length}function ce(K){if(this[B]+=K.length,this[H]._maxPayload<1||this[B]<=this[H]._maxPayload){this[N].push(K);return}this[F]=new RangeError("Max payload size exceeded"),this[F].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[F][k]=1009,this.removeListener("data",ce),this.reset()}function pe(K){this[H]._inflate=null,K[k]=1007,this[L](K)}}),Oa=P((G,Q)=>{var{isUtf8:Y}=Ns(),Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function X(A){return A>=1e3&&A<=1014&&A!==1004&&A!==1005&&A!==1006||A>=3e3&&A<=4999}function k(A){let M=A.length,H=0;for(;H<M;)if((A[H]&128)===0)H++;else if((A[H]&224)===192){if(H+1===M||(A[H+1]&192)!==128||(A[H]&254)===192)return!1;H+=2}else if((A[H]&240)===224){if(H+2>=M||(A[H+1]&192)!==128||(A[H+2]&192)!==128||A[H]===224&&(A[H+1]&224)===128||A[H]===237&&(A[H+1]&224)===160)return!1;H+=3}else if((A[H]&248)===240){if(H+3>=M||(A[H+1]&192)!==128||(A[H+2]&192)!==128||(A[H+3]&192)!==128||A[H]===240&&(A[H+1]&240)===128||A[H]===244&&A[H+1]>143||A[H]>244)return!1;H+=4}else return!1;return!0}if(Q.exports={isValidStatusCode:X,isValidUTF8:k,tokenChars:Z},Y)Q.exports.isValidUTF8=function(A){return A.length<24?k(A):Y(A)};else if(!t.WS_NO_UTF_8_VALIDATE)try{let A=require("utf-8-validate");Q.exports.isValidUTF8=function(M){return M.length<32?k(M):A(M)}}catch{}}),gm=P((G,Q)=>{var{Writable:Y}=Je,Z=Ea(),{BINARY_TYPES:X,EMPTY_BUFFER:k,kStatusCode:A,kWebSocket:M}=Li(),{concat:H,toArrayBuffer:B,unmask:L}=xa(),{isValidStatusCode:N,isValidUTF8:F}=Oa(),W=Buffer[Symbol.species],re=0,ee=1,ce=2,pe=3,K=4,se=5,ue=6,ae=class extends Y{constructor(oe={}){super(),this._allowSynchronousEvents=oe.allowSynchronousEvents!==void 0?oe.allowSynchronousEvents:!0,this._binaryType=oe.binaryType||X[0],this._extensions=oe.extensions||{},this._isServer=!!oe.isServer,this._maxPayload=oe.maxPayload|0,this._skipUTF8Validation=!!oe.skipUTF8Validation,this[M]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=re}_write(oe,fe,we){if(this._opcode===8&&this._state==re)return we();this._bufferedBytes+=oe.length,this._buffers.push(oe),this.startLoop(we)}consume(oe){if(this._bufferedBytes-=oe,oe===this._buffers[0].length)return this._buffers.shift();if(oe<this._buffers[0].length){let we=this._buffers[0];return this._buffers[0]=new W(we.buffer,we.byteOffset+oe,we.length-oe),new W(we.buffer,we.byteOffset,oe)}let fe=Buffer.allocUnsafe(oe);do{let we=this._buffers[0],Ee=fe.length-oe;oe>=we.length?fe.set(this._buffers.shift(),Ee):(fe.set(new Uint8Array(we.buffer,we.byteOffset,oe),Ee),this._buffers[0]=new W(we.buffer,we.byteOffset+oe,we.length-oe)),oe-=we.length}while(oe>0);return fe}startLoop(oe){this._loop=!0;do switch(this._state){case re:this.getInfo(oe);break;case ee:this.getPayloadLength16(oe);break;case ce:this.getPayloadLength64(oe);break;case pe:this.getMask();break;case K:this.getData(oe);break;case se:case ue:this._loop=!1;return}while(this._loop);this._errored||oe()}getInfo(oe){if(this._bufferedBytes<2){this._loop=!1;return}let fe=this.consume(2);if((fe[0]&48)!==0){let Ee=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");oe(Ee);return}let we=(fe[0]&64)===64;if(we&&!this._extensions[Z.extensionName]){let Ee=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");oe(Ee);return}if(this._fin=(fe[0]&128)===128,this._opcode=fe[0]&15,this._payloadLength=fe[1]&127,this._opcode===0){if(we){let Ee=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");oe(Ee);return}if(!this._fragmented){let Ee=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");oe(Ee);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let Ee=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");oe(Ee);return}this._compressed=we}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let Ee=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");oe(Ee);return}if(we){let Ee=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");oe(Ee);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let Ee=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");oe(Ee);return}}else{let Ee=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");oe(Ee);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(fe[1]&128)===128,this._isServer){if(!this._masked){let Ee=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");oe(Ee);return}}else if(this._masked){let Ee=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");oe(Ee);return}this._payloadLength===126?this._state=ee:this._payloadLength===127?this._state=ce:this.haveLength(oe)}getPayloadLength16(oe){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(oe)}getPayloadLength64(oe){if(this._bufferedBytes<8){this._loop=!1;return}let fe=this.consume(8),we=fe.readUInt32BE(0);if(we>Math.pow(2,21)-1){let Ee=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");oe(Ee);return}this._payloadLength=we*Math.pow(2,32)+fe.readUInt32BE(4),this.haveLength(oe)}haveLength(oe){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let fe=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");oe(fe);return}this._masked?this._state=pe:this._state=K}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=K}getData(oe){let fe=k;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}fe=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&L(fe,this._mask)}if(this._opcode>7){this.controlMessage(fe,oe);return}if(this._compressed){this._state=se,this.decompress(fe,oe);return}fe.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(fe)),this.dataMessage(oe)}decompress(oe,fe){this._extensions[Z.extensionName].decompress(oe,this._fin,(we,Ee)=>{if(we)return fe(we);if(Ee.length){if(this._messageLength+=Ee.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let Ie=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");fe(Ie);return}this._fragments.push(Ee)}this.dataMessage(fe),this._state===re&&this.startLoop(fe)})}dataMessage(oe){if(!this._fin){this._state=re;return}let fe=this._messageLength,we=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let Ee;this._binaryType==="nodebuffer"?Ee=H(we,fe):this._binaryType==="arraybuffer"?Ee=B(H(we,fe)):Ee=we,this._allowSynchronousEvents?(this.emit("message",Ee,!0),this._state=re):(this._state=ue,setImmediate(()=>{this.emit("message",Ee,!0),this._state=re,this.startLoop(oe)}))}else{let Ee=H(we,fe);if(!this._skipUTF8Validation&&!F(Ee)){let Ie=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");oe(Ie);return}this._state===se||this._allowSynchronousEvents?(this.emit("message",Ee,!1),this._state=re):(this._state=ue,setImmediate(()=>{this.emit("message",Ee,!1),this._state=re,this.startLoop(oe)}))}}controlMessage(oe,fe){if(this._opcode===8){if(oe.length===0)this._loop=!1,this.emit("conclude",1005,k),this.end();else{let we=oe.readUInt16BE(0);if(!N(we)){let Ie=this.createError(RangeError,`invalid status code ${we}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");fe(Ie);return}let Ee=new W(oe.buffer,oe.byteOffset+2,oe.length-2);if(!this._skipUTF8Validation&&!F(Ee)){let Ie=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");fe(Ie);return}this._loop=!1,this.emit("conclude",we,Ee),this.end()}this._state=re;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",oe),this._state=re):(this._state=ue,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",oe),this._state=re,this.startLoop(fe)}))}createError(oe,fe,we,Ee,Ie){this._loop=!1,this._errored=!0;let Ae=new oe(we?`Invalid WebSocket frame: ${fe}`:fe);return Error.captureStackTrace(Ae,this.createError),Ae.code=Ie,Ae[A]=Ee,Ae}};Q.exports=ae}),_m=P((G,Q)=>{var{Duplex:Y}=Je,{randomFillSync:Z}=Je,X=Ea(),{EMPTY_BUFFER:k}=Li(),{isValidStatusCode:A}=Oa(),{mask:M,toBuffer:H}=xa(),B=Symbol("kByteLength"),L=Buffer.alloc(4),N=8*1024,F,W=N,re=class Hi{constructor(ce,pe,K){this._extensions=pe||{},K&&(this._generateMask=K,this._maskBuffer=Buffer.alloc(4)),this._socket=ce,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(ce,pe){let K,se=!1,ue=2,ae=!1;pe.mask&&(K=pe.maskBuffer||L,pe.generateMask?pe.generateMask(K):(W===N&&(F===void 0&&(F=Buffer.alloc(N)),Z(F,0,N),W=0),K[0]=F[W++],K[1]=F[W++],K[2]=F[W++],K[3]=F[W++]),ae=(K[0]|K[1]|K[2]|K[3])===0,ue=6);let oe;typeof ce=="string"?(!pe.mask||ae)&&pe[B]!==void 0?oe=pe[B]:(ce=Buffer.from(ce),oe=ce.length):(oe=ce.length,se=pe.mask&&pe.readOnly&&!ae);let fe=oe;oe>=65536?(ue+=8,fe=127):oe>125&&(ue+=2,fe=126);let we=Buffer.allocUnsafe(se?oe+ue:ue);return we[0]=pe.fin?pe.opcode|128:pe.opcode,pe.rsv1&&(we[0]|=64),we[1]=fe,fe===126?we.writeUInt16BE(oe,2):fe===127&&(we[2]=we[3]=0,we.writeUIntBE(oe,4,6)),pe.mask?(we[1]|=128,we[ue-4]=K[0],we[ue-3]=K[1],we[ue-2]=K[2],we[ue-1]=K[3],ae?[we,ce]:se?(M(ce,K,we,ue,oe),[we]):(M(ce,K,ce,0,oe),[we,ce])):[we,ce]}close(ce,pe,K,se){let ue;if(ce===void 0)ue=k;else{if(typeof ce!="number"||!A(ce))throw new TypeError("First argument must be a valid error code number");if(pe===void 0||!pe.length)ue=Buffer.allocUnsafe(2),ue.writeUInt16BE(ce,0);else{let oe=Buffer.byteLength(pe);if(oe>123)throw new RangeError("The message must not be greater than 123 bytes");ue=Buffer.allocUnsafe(2+oe),ue.writeUInt16BE(ce,0),typeof pe=="string"?ue.write(pe,2):ue.set(pe,2)}}let ae={[B]:ue.length,fin:!0,generateMask:this._generateMask,mask:K,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,ue,!1,ae,se]):this.sendFrame(Hi.frame(ue,ae),se)}ping(ce,pe,K){let se,ue;if(typeof ce=="string"?(se=Buffer.byteLength(ce),ue=!1):(ce=H(ce),se=ce.length,ue=H.readOnly),se>125)throw new RangeError("The data size must not be greater than 125 bytes");let ae={[B]:se,fin:!0,generateMask:this._generateMask,mask:pe,maskBuffer:this._maskBuffer,opcode:9,readOnly:ue,rsv1:!1};this._deflating?this.enqueue([this.dispatch,ce,!1,ae,K]):this.sendFrame(Hi.frame(ce,ae),K)}pong(ce,pe,K){let se,ue;if(typeof ce=="string"?(se=Buffer.byteLength(ce),ue=!1):(ce=H(ce),se=ce.length,ue=H.readOnly),se>125)throw new RangeError("The data size must not be greater than 125 bytes");let ae={[B]:se,fin:!0,generateMask:this._generateMask,mask:pe,maskBuffer:this._maskBuffer,opcode:10,readOnly:ue,rsv1:!1};this._deflating?this.enqueue([this.dispatch,ce,!1,ae,K]):this.sendFrame(Hi.frame(ce,ae),K)}send(ce,pe,K){let se=this._extensions[X.extensionName],ue=pe.binary?2:1,ae=pe.compress,oe,fe;if(typeof ce=="string"?(oe=Buffer.byteLength(ce),fe=!1):(ce=H(ce),oe=ce.length,fe=H.readOnly),this._firstFragment?(this._firstFragment=!1,ae&&se&&se.params[se._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(ae=oe>=se._threshold),this._compress=ae):(ae=!1,ue=0),pe.fin&&(this._firstFragment=!0),se){let we={[B]:oe,fin:pe.fin,generateMask:this._generateMask,mask:pe.mask,maskBuffer:this._maskBuffer,opcode:ue,readOnly:fe,rsv1:ae};this._deflating?this.enqueue([this.dispatch,ce,this._compress,we,K]):this.dispatch(ce,this._compress,we,K)}else this.sendFrame(Hi.frame(ce,{[B]:oe,fin:pe.fin,generateMask:this._generateMask,mask:pe.mask,maskBuffer:this._maskBuffer,opcode:ue,readOnly:fe,rsv1:!1}),K)}dispatch(ce,pe,K,se){if(!pe){this.sendFrame(Hi.frame(ce,K),se);return}let ue=this._extensions[X.extensionName];this._bufferedBytes+=K[B],this._deflating=!0,ue.compress(ce,K.fin,(ae,oe)=>{if(this._socket.destroyed){let fe=new Error("The socket was closed while data was being compressed");typeof se=="function"&&se(fe);for(let we=0;we<this._queue.length;we++){let Ee=this._queue[we],Ie=Ee[Ee.length-1];typeof Ie=="function"&&Ie(fe)}return}this._bufferedBytes-=K[B],this._deflating=!1,K.readOnly=!1,this.sendFrame(Hi.frame(oe,K),se),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let ce=this._queue.shift();this._bufferedBytes-=ce[3][B],Reflect.apply(ce[0],this,ce.slice(1))}}enqueue(ce){this._bufferedBytes+=ce[3][B],this._queue.push(ce)}sendFrame(ce,pe){ce.length===2?(this._socket.cork(),this._socket.write(ce[0]),this._socket.write(ce[1],pe),this._socket.uncork()):this._socket.write(ce[0],pe)}};Q.exports=re}),ex=P((G,Q)=>{var{kForOnEventAttribute:Y,kListener:Z}=Li(),X=Symbol("kCode"),k=Symbol("kData"),A=Symbol("kError"),M=Symbol("kMessage"),H=Symbol("kReason"),B=Symbol("kTarget"),L=Symbol("kType"),N=Symbol("kWasClean"),F=class{constructor(K){this[B]=null,this[L]=K}get target(){return this[B]}get type(){return this[L]}};Object.defineProperty(F.prototype,"target",{enumerable:!0}),Object.defineProperty(F.prototype,"type",{enumerable:!0});var W=class extends F{constructor(K,se={}){super(K),this[X]=se.code===void 0?0:se.code,this[H]=se.reason===void 0?"":se.reason,this[N]=se.wasClean===void 0?!1:se.wasClean}get code(){return this[X]}get reason(){return this[H]}get wasClean(){return this[N]}};Object.defineProperty(W.prototype,"code",{enumerable:!0}),Object.defineProperty(W.prototype,"reason",{enumerable:!0}),Object.defineProperty(W.prototype,"wasClean",{enumerable:!0});var re=class extends F{constructor(K,se={}){super(K),this[A]=se.error===void 0?null:se.error,this[M]=se.message===void 0?"":se.message}get error(){return this[A]}get message(){return this[M]}};Object.defineProperty(re.prototype,"error",{enumerable:!0}),Object.defineProperty(re.prototype,"message",{enumerable:!0});var ee=class extends F{constructor(K,se={}){super(K),this[k]=se.data===void 0?null:se.data}get data(){return this[k]}};Object.defineProperty(ee.prototype,"data",{enumerable:!0});var ce={addEventListener(K,se,ue={}){for(let oe of this.listeners(K))if(!ue[Y]&&oe[Z]===se&&!oe[Y])return;let ae;if(K==="message")ae=function(oe,fe){let we=new ee("message",{data:fe?oe:oe.toString()});we[B]=this,pe(se,this,we)};else if(K==="close")ae=function(oe,fe){let we=new W("close",{code:oe,reason:fe.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});we[B]=this,pe(se,this,we)};else if(K==="error")ae=function(oe){let fe=new re("error",{error:oe,message:oe.message});fe[B]=this,pe(se,this,fe)};else if(K==="open")ae=function(){let oe=new F("open");oe[B]=this,pe(se,this,oe)};else return;ae[Y]=!!ue[Y],ae[Z]=se,ue.once?this.once(K,ae):this.on(K,ae)},removeEventListener(K,se){for(let ue of this.listeners(K))if(ue[Z]===se&&!ue[Y]){this.removeListener(K,ue);break}}};Q.exports={CloseEvent:W,ErrorEvent:re,Event:F,EventTarget:ce,MessageEvent:ee};function pe(K,se,ue){typeof K=="object"&&K.handleEvent?K.handleEvent.call(K,ue):K.call(se,ue)}}),bm=P((G,Q)=>{var{tokenChars:Y}=Oa();function Z(A,M,H){A[M]===void 0?A[M]=[H]:A[M].push(H)}function X(A){let M=Object.create(null),H=Object.create(null),B=!1,L=!1,N=!1,F,W,re=-1,ee=-1,ce=-1,pe=0;for(;pe<A.length;pe++)if(ee=A.charCodeAt(pe),F===void 0)if(ce===-1&&Y[ee]===1)re===-1&&(re=pe);else if(pe!==0&&(ee===32||ee===9))ce===-1&&re!==-1&&(ce=pe);else if(ee===59||ee===44){if(re===-1)throw new SyntaxError(`Unexpected character at index ${pe}`);ce===-1&&(ce=pe);let se=A.slice(re,ce);ee===44?(Z(M,se,H),H=Object.create(null)):F=se,re=ce=-1}else throw new SyntaxError(`Unexpected character at index ${pe}`);else if(W===void 0)if(ce===-1&&Y[ee]===1)re===-1&&(re=pe);else if(ee===32||ee===9)ce===-1&&re!==-1&&(ce=pe);else if(ee===59||ee===44){if(re===-1)throw new SyntaxError(`Unexpected character at index ${pe}`);ce===-1&&(ce=pe),Z(H,A.slice(re,ce),!0),ee===44&&(Z(M,F,H),H=Object.create(null),F=void 0),re=ce=-1}else if(ee===61&&re!==-1&&ce===-1)W=A.slice(re,pe),re=ce=-1;else throw new SyntaxError(`Unexpected character at index ${pe}`);else if(L){if(Y[ee]!==1)throw new SyntaxError(`Unexpected character at index ${pe}`);re===-1?re=pe:B||(B=!0),L=!1}else if(N)if(Y[ee]===1)re===-1&&(re=pe);else if(ee===34&&re!==-1)N=!1,ce=pe;else if(ee===92)L=!0;else throw new SyntaxError(`Unexpected character at index ${pe}`);else if(ee===34&&A.charCodeAt(pe-1)===61)N=!0;else if(ce===-1&&Y[ee]===1)re===-1&&(re=pe);else if(re!==-1&&(ee===32||ee===9))ce===-1&&(ce=pe);else if(ee===59||ee===44){if(re===-1)throw new SyntaxError(`Unexpected character at index ${pe}`);ce===-1&&(ce=pe);let se=A.slice(re,ce);B&&(se=se.replace(/\\/g,""),B=!1),Z(H,W,se),ee===44&&(Z(M,F,H),H=Object.create(null),F=void 0),W=void 0,re=ce=-1}else throw new SyntaxError(`Unexpected character at index ${pe}`);if(re===-1||N||ee===32||ee===9)throw new SyntaxError("Unexpected end of input");ce===-1&&(ce=pe);let K=A.slice(re,ce);return F===void 0?Z(M,K,H):(W===void 0?Z(H,K,!0):B?Z(H,W,K.replace(/\\/g,"")):Z(H,W,K),Z(M,F,H)),M}function k(A){return Object.keys(A).map(M=>{let H=A[M];return Array.isArray(H)||(H=[H]),H.map(B=>[M].concat(Object.keys(B).map(L=>{let N=B[L];return Array.isArray(N)||(N=[N]),N.map(F=>F===!0?L:`${L}=${F}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Q.exports={format:k,parse:X}}),vm=P((G,Q)=>{var Y=Vr(),Z=Je,X=Je,k=Je,A=Je,{randomBytes:M,createHash:H}=Je,{Duplex:B,Readable:L}=Je,{URL:N}=Je,F=Ea(),W=gm(),re=_m(),{BINARY_TYPES:ee,EMPTY_BUFFER:ce,GUID:pe,kForOnEventAttribute:K,kListener:se,kStatusCode:ue,kWebSocket:ae,NOOP:oe}=Li(),{EventTarget:{addEventListener:fe,removeEventListener:we}}=ex(),{format:Ee,parse:Ie}=bm(),{toBuffer:Ae}=xa(),He=30*1e3,Fe=Symbol("kAborted"),Ue=[8,13],et=["CONNECTING","OPEN","CLOSING","CLOSED"],ft=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,ht=class Ur extends Y{constructor(tt,St,Zt){super(),this._binaryType=ee[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=ce,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=Ur.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,tt!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,St===void 0?St=[]:Array.isArray(St)||(typeof St=="object"&&St!==null?(Zt=St,St=[]):St=[St]),Tt(this,tt,St,Zt)):(this._autoPong=Zt.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(tt){ee.includes(tt)&&(this._binaryType=tt,this._receiver&&(this._receiver._binaryType=tt))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(tt,St,Zt){let Ye=new W({allowSynchronousEvents:Zt.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:Zt.maxPayload,skipUTF8Validation:Zt.skipUTF8Validation});this._sender=new re(tt,this._extensions,Zt.generateMask),this._receiver=Ye,this._socket=tt,Ye[ae]=this,tt[ae]=this,Ye.on("conclude",vr),Ye.on("drain",gr),Ye.on("error",mt),Ye.on("message",Wt),Ye.on("ping",Pt),Ye.on("pong",Qt),tt.setTimeout&&tt.setTimeout(0),tt.setNoDelay&&tt.setNoDelay(),St.length>0&&tt.unshift(St),tt.on("close",Gt),tt.on("data",ir),tt.on("end",Ht),tt.on("error",_t),this._readyState=Ur.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=Ur.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[F.extensionName]&&this._extensions[F.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=Ur.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(tt,St){if(this.readyState!==Ur.CLOSED){if(this.readyState===Ur.CONNECTING){Ct(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===Ur.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=Ur.CLOSING,this._sender.close(tt,St,!this._isServer,Zt=>{Zt||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),He)}}pause(){this.readyState===Ur.CONNECTING||this.readyState===Ur.CLOSED||(this._paused=!0,this._socket.pause())}ping(tt,St,Zt){if(this.readyState===Ur.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof tt=="function"?(Zt=tt,tt=St=void 0):typeof St=="function"&&(Zt=St,St=void 0),typeof tt=="number"&&(tt=tt.toString()),this.readyState!==Ur.OPEN){Ft(this,tt,Zt);return}St===void 0&&(St=!this._isServer),this._sender.ping(tt||ce,St,Zt)}pong(tt,St,Zt){if(this.readyState===Ur.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof tt=="function"?(Zt=tt,tt=St=void 0):typeof St=="function"&&(Zt=St,St=void 0),typeof tt=="number"&&(tt=tt.toString()),this.readyState!==Ur.OPEN){Ft(this,tt,Zt);return}St===void 0&&(St=!this._isServer),this._sender.pong(tt||ce,St,Zt)}resume(){this.readyState===Ur.CONNECTING||this.readyState===Ur.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(tt,St,Zt){if(this.readyState===Ur.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof St=="function"&&(Zt=St,St={}),typeof tt=="number"&&(tt=tt.toString()),this.readyState!==Ur.OPEN){Ft(this,tt,Zt);return}let Ye={binary:typeof tt!="string",mask:!this._isServer,compress:!0,fin:!0,...St};this._extensions[F.extensionName]||(Ye.compress=!1),this._sender.send(tt||ce,Ye,Zt)}terminate(){if(this.readyState!==Ur.CLOSED){if(this.readyState===Ur.CONNECTING){Ct(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=Ur.CLOSING,this._socket.destroy())}}};Object.defineProperty(ht,"CONNECTING",{enumerable:!0,value:et.indexOf("CONNECTING")}),Object.defineProperty(ht.prototype,"CONNECTING",{enumerable:!0,value:et.indexOf("CONNECTING")}),Object.defineProperty(ht,"OPEN",{enumerable:!0,value:et.indexOf("OPEN")}),Object.defineProperty(ht.prototype,"OPEN",{enumerable:!0,value:et.indexOf("OPEN")}),Object.defineProperty(ht,"CLOSING",{enumerable:!0,value:et.indexOf("CLOSING")}),Object.defineProperty(ht.prototype,"CLOSING",{enumerable:!0,value:et.indexOf("CLOSING")}),Object.defineProperty(ht,"CLOSED",{enumerable:!0,value:et.indexOf("CLOSED")}),Object.defineProperty(ht.prototype,"CLOSED",{enumerable:!0,value:et.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(Ze=>{Object.defineProperty(ht.prototype,Ze,{enumerable:!0})}),["open","error","close","message"].forEach(Ze=>{Object.defineProperty(ht.prototype,`on${Ze}`,{enumerable:!0,get(){for(let tt of this.listeners(Ze))if(tt[K])return tt[se];return null},set(tt){for(let St of this.listeners(Ze))if(St[K]){this.removeListener(Ze,St);break}typeof tt=="function"&&this.addEventListener(Ze,tt,{[K]:!0})}})}),ht.prototype.addEventListener=fe,ht.prototype.removeEventListener=we,Q.exports=ht;function Tt(Ze,tt,St,Zt){let Ye={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Ue[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...Zt,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(Ze._autoPong=Ye.autoPong,!Ue.includes(Ye.protocolVersion))throw new RangeError(`Unsupported protocol version: ${Ye.protocolVersion} (supported versions: ${Ue.join(", ")})`);let $t;if(tt instanceof N)$t=tt;else try{$t=new N(tt)}catch{throw new SyntaxError(`Invalid URL: ${tt}`)}$t.protocol==="http:"?$t.protocol="ws:":$t.protocol==="https:"&&($t.protocol="wss:"),Ze._url=$t.href;let rr=$t.protocol==="wss:",tr=$t.protocol==="ws+unix:",ar;if($t.protocol!=="ws:"&&!rr&&!tr?ar=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:tr&&!$t.pathname?ar="The URL's pathname is empty":$t.hash&&(ar="The URL contains a fragment identifier"),ar){let jt=new SyntaxError(ar);if(Ze._redirects===0)throw jt;vt(Ze,jt);return}let br=rr?443:80,Vt=M(16).toString("base64"),Jt=rr?Z.request:X.request,er=new Set,_r;if(Ye.createConnection=Ye.createConnection||(rr?Mt:Ot),Ye.defaultPort=Ye.defaultPort||br,Ye.port=$t.port||br,Ye.host=$t.hostname.startsWith("[")?$t.hostname.slice(1,-1):$t.hostname,Ye.headers={...Ye.headers,"Sec-WebSocket-Version":Ye.protocolVersion,"Sec-WebSocket-Key":Vt,Connection:"Upgrade",Upgrade:"websocket"},Ye.path=$t.pathname+$t.search,Ye.timeout=Ye.handshakeTimeout,Ye.perMessageDeflate&&(_r=new F(Ye.perMessageDeflate!==!0?Ye.perMessageDeflate:{},!1,Ye.maxPayload),Ye.headers["Sec-WebSocket-Extensions"]=Ee({[F.extensionName]:_r.offer()})),St.length){for(let jt of St){if(typeof jt!="string"||!ft.test(jt)||er.has(jt))throw new SyntaxError("An invalid or duplicated subprotocol was specified");er.add(jt)}Ye.headers["Sec-WebSocket-Protocol"]=St.join(",")}if(Ye.origin&&(Ye.protocolVersion<13?Ye.headers["Sec-WebSocket-Origin"]=Ye.origin:Ye.headers.Origin=Ye.origin),($t.username||$t.password)&&(Ye.auth=`${$t.username}:${$t.password}`),tr){let jt=Ye.path.split(":");Ye.socketPath=jt[0],Ye.path=jt[1]}let Nt;if(Ye.followRedirects){if(Ze._redirects===0){Ze._originalIpc=tr,Ze._originalSecure=rr,Ze._originalHostOrSocketPath=tr?Ye.socketPath:$t.host;let jt=Zt&&Zt.headers;if(Zt={...Zt,headers:{}},jt)for(let[or,yr]of Object.entries(jt))Zt.headers[or.toLowerCase()]=yr}else if(Ze.listenerCount("redirect")===0){let jt=tr?Ze._originalIpc?Ye.socketPath===Ze._originalHostOrSocketPath:!1:Ze._originalIpc?!1:$t.host===Ze._originalHostOrSocketPath;(!jt||Ze._originalSecure&&!rr)&&(delete Ye.headers.authorization,delete Ye.headers.cookie,jt||delete Ye.headers.host,Ye.auth=void 0)}Ye.auth&&!Zt.headers.authorization&&(Zt.headers.authorization="Basic "+Buffer.from(Ye.auth).toString("base64")),Nt=Ze._req=Jt(Ye),Ze._redirects&&Ze.emit("redirect",Ze.url,Nt)}else Nt=Ze._req=Jt(Ye);Ye.timeout&&Nt.on("timeout",()=>{Ct(Ze,Nt,"Opening handshake has timed out")}),Nt.on("error",jt=>{Nt===null||Nt[Fe]||(Nt=Ze._req=null,vt(Ze,jt))}),Nt.on("response",jt=>{let or=jt.headers.location,yr=jt.statusCode;if(or&&Ye.followRedirects&&yr>=300&&yr<400){if(++Ze._redirects>Ye.maxRedirects){Ct(Ze,Nt,"Maximum redirects exceeded");return}Nt.abort();let fr;try{fr=new N(or,tt)}catch{let Cr=new SyntaxError(`Invalid URL: ${or}`);vt(Ze,Cr);return}Tt(Ze,fr,St,Zt)}else Ze.emit("unexpected-response",Nt,jt)||Ct(Ze,Nt,`Unexpected server response: ${jt.statusCode}`)}),Nt.on("upgrade",(jt,or,yr)=>{if(Ze.emit("upgrade",jt),Ze.readyState!==ht.CONNECTING)return;Nt=Ze._req=null;let fr=jt.headers.upgrade;if(fr===void 0||fr.toLowerCase()!=="websocket"){Ct(Ze,or,"Invalid Upgrade header");return}let Cr=H("sha1").update(Vt+pe).digest("base64");if(jt.headers["sec-websocket-accept"]!==Cr){Ct(Ze,or,"Invalid Sec-WebSocket-Accept header");return}let Lr=jt.headers["sec-websocket-protocol"],zr;if(Lr!==void 0?er.size?er.has(Lr)||(zr="Server sent an invalid subprotocol"):zr="Server sent a subprotocol but none was requested":er.size&&(zr="Server sent no subprotocol"),zr){Ct(Ze,or,zr);return}Lr&&(Ze._protocol=Lr);let jr=jt.headers["sec-websocket-extensions"];if(jr!==void 0){if(!_r){Ct(Ze,or,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let Hr;try{Hr=Ie(jr)}catch{Ct(Ze,or,"Invalid Sec-WebSocket-Extensions header");return}let wn=Object.keys(Hr);if(wn.length!==1||wn[0]!==F.extensionName){Ct(Ze,or,"Server indicated an extension that was not requested");return}try{_r.accept(Hr[F.extensionName])}catch{Ct(Ze,or,"Invalid Sec-WebSocket-Extensions header");return}Ze._extensions[F.extensionName]=_r}Ze.setSocket(or,yr,{allowSynchronousEvents:Ye.allowSynchronousEvents,generateMask:Ye.generateMask,maxPayload:Ye.maxPayload,skipUTF8Validation:Ye.skipUTF8Validation})}),Ye.finishRequest?Ye.finishRequest(Nt,Ze):Nt.end()}function vt(Ze,tt){Ze._readyState=ht.CLOSING,Ze.emit("error",tt),Ze.emitClose()}function Ot(Ze){return Ze.path=Ze.socketPath,k.connect(Ze)}function Mt(Ze){return Ze.path=void 0,!Ze.servername&&Ze.servername!==""&&(Ze.servername=k.isIP(Ze.host)?"":Ze.host),A.connect(Ze)}function Ct(Ze,tt,St){Ze._readyState=ht.CLOSING;let Zt=new Error(St);Error.captureStackTrace(Zt,Ct),tt.setHeader?(tt[Fe]=!0,tt.abort(),tt.socket&&!tt.socket.destroyed&&tt.socket.destroy(),process.nextTick(vt,Ze,Zt)):(tt.destroy(Zt),tt.once("error",Ze.emit.bind(Ze,"error")),tt.once("close",Ze.emitClose.bind(Ze)))}function Ft(Ze,tt,St){if(tt){let Zt=Ae(tt).length;Ze._socket?Ze._sender._bufferedBytes+=Zt:Ze._bufferedAmount+=Zt}if(St){let Zt=new Error(`WebSocket is not open: readyState ${Ze.readyState} (${et[Ze.readyState]})`);process.nextTick(St,Zt)}}function vr(Ze,tt){let St=this[ae];St._closeFrameReceived=!0,St._closeMessage=tt,St._closeCode=Ze,St._socket[ae]!==void 0&&(St._socket.removeListener("data",ir),process.nextTick(sr,St._socket),Ze===1005?St.close():St.close(Ze,tt))}function gr(){let Ze=this[ae];Ze.isPaused||Ze._socket.resume()}function mt(Ze){let tt=this[ae];tt._socket[ae]!==void 0&&(tt._socket.removeListener("data",ir),process.nextTick(sr,tt._socket),tt.close(Ze[ue])),tt.emit("error",Ze)}function bt(){this[ae].emitClose()}function Wt(Ze,tt){this[ae].emit("message",Ze,tt)}function Pt(Ze){let tt=this[ae];tt._autoPong&&tt.pong(Ze,!this._isServer,oe),tt.emit("ping",Ze)}function Qt(Ze){this[ae].emit("pong",Ze)}function sr(Ze){Ze.resume()}function Gt(){let Ze=this[ae];this.removeListener("close",Gt),this.removeListener("data",ir),this.removeListener("end",Ht),Ze._readyState=ht.CLOSING;let tt;!this._readableState.endEmitted&&!Ze._closeFrameReceived&&!Ze._receiver._writableState.errorEmitted&&(tt=Ze._socket.read())!==null&&Ze._receiver.write(tt),Ze._receiver.end(),this[ae]=void 0,clearTimeout(Ze._closeTimer),Ze._receiver._writableState.finished||Ze._receiver._writableState.errorEmitted?Ze.emitClose():(Ze._receiver.on("error",bt),Ze._receiver.on("finish",bt))}function ir(Ze){this[ae]._receiver.write(Ze)||this.pause()}function Ht(){let Ze=this[ae];Ze._readyState=ht.CLOSING,Ze._receiver.end(),this.end()}function _t(){let Ze=this[ae];this.removeListener("error",_t),this.on("error",oe),Ze&&(Ze._readyState=ht.CLOSING,this.destroy())}}),tx=P((G,Q)=>{var{tokenChars:Y}=Oa();function Z(X){let k=new Set,A=-1,M=-1,H=0;for(H;H<X.length;H++){let L=X.charCodeAt(H);if(M===-1&&Y[L]===1)A===-1&&(A=H);else if(H!==0&&(L===32||L===9))M===-1&&A!==-1&&(M=H);else if(L===44){if(A===-1)throw new SyntaxError(`Unexpected character at index ${H}`);M===-1&&(M=H);let N=X.slice(A,M);if(k.has(N))throw new SyntaxError(`The "${N}" subprotocol is duplicated`);k.add(N),A=M=-1}else throw new SyntaxError(`Unexpected character at index ${H}`)}if(A===-1||M!==-1)throw new SyntaxError("Unexpected end of input");let B=X.slice(A,H);if(k.has(B))throw new SyntaxError(`The "${B}" subprotocol is duplicated`);return k.add(B),k}Q.exports={parse:Z}}),rx=P((G,Q)=>{var Y=Vr(),Z=Je,{Duplex:X}=Je,{createHash:k}=Je,A=bm(),M=Ea(),H=tx(),B=vm(),{GUID:L,kWebSocket:N}=Li(),F=/^[+/0-9A-Za-z]{22}==$/,W=0,re=1,ee=2,ce=class extends Y{constructor(oe,fe){if(super(),oe={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:B,...oe},oe.port==null&&!oe.server&&!oe.noServer||oe.port!=null&&(oe.server||oe.noServer)||oe.server&&oe.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(oe.port!=null?(this._server=Z.createServer((we,Ee)=>{let Ie=Z.STATUS_CODES[426];Ee.writeHead(426,{"Content-Length":Ie.length,"Content-Type":"text/plain"}),Ee.end(Ie)}),this._server.listen(oe.port,oe.host,oe.backlog,fe)):oe.server&&(this._server=oe.server),this._server){let we=this.emit.bind(this,"connection");this._removeListeners=pe(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(Ee,Ie,Ae)=>{this.handleUpgrade(Ee,Ie,Ae,we)}})}oe.perMessageDeflate===!0&&(oe.perMessageDeflate={}),oe.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=oe,this._state=W}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(oe){if(this._state===ee){oe&&this.once("close",()=>{oe(new Error("The server is not running"))}),process.nextTick(K,this);return}if(oe&&this.once("close",oe),this._state!==re)if(this._state=re,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(K,this):process.nextTick(K,this);else{let fe=this._server;this._removeListeners(),this._removeListeners=this._server=null,fe.close(()=>{K(this)})}}shouldHandle(oe){if(this.options.path){let fe=oe.url.indexOf("?");if((fe!==-1?oe.url.slice(0,fe):oe.url)!==this.options.path)return!1}return!0}handleUpgrade(oe,fe,we,Ee){fe.on("error",se);let Ie=oe.headers["sec-websocket-key"],Ae=oe.headers.upgrade,He=+oe.headers["sec-websocket-version"];if(oe.method!=="GET"){ae(this,oe,fe,405,"Invalid HTTP method");return}if(Ae===void 0||Ae.toLowerCase()!=="websocket"){ae(this,oe,fe,400,"Invalid Upgrade header");return}if(Ie===void 0||!F.test(Ie)){ae(this,oe,fe,400,"Missing or invalid Sec-WebSocket-Key header");return}if(He!==8&&He!==13){ae(this,oe,fe,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(oe)){ue(fe,400);return}let Fe=oe.headers["sec-websocket-protocol"],Ue=new Set;if(Fe!==void 0)try{Ue=H.parse(Fe)}catch{ae(this,oe,fe,400,"Invalid Sec-WebSocket-Protocol header");return}let et=oe.headers["sec-websocket-extensions"],ft={};if(this.options.perMessageDeflate&&et!==void 0){let ht=new M(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let Tt=A.parse(et);Tt[M.extensionName]&&(ht.accept(Tt[M.extensionName]),ft[M.extensionName]=ht)}catch{ae(this,oe,fe,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let ht={origin:oe.headers[`${He===8?"sec-websocket-origin":"origin"}`],secure:!!(oe.socket.authorized||oe.socket.encrypted),req:oe};if(this.options.verifyClient.length===2){this.options.verifyClient(ht,(Tt,vt,Ot,Mt)=>{if(!Tt)return ue(fe,vt||401,Ot,Mt);this.completeUpgrade(ft,Ie,Ue,oe,fe,we,Ee)});return}if(!this.options.verifyClient(ht))return ue(fe,401)}this.completeUpgrade(ft,Ie,Ue,oe,fe,we,Ee)}completeUpgrade(oe,fe,we,Ee,Ie,Ae,He){if(!Ie.readable||!Ie.writable)return Ie.destroy();if(Ie[N])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>W)return ue(Ie,503);let Fe=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k("sha1").update(fe+L).digest("base64")}`],Ue=new this.options.WebSocket(null,void 0,this.options);if(we.size){let et=this.options.handleProtocols?this.options.handleProtocols(we,Ee):we.values().next().value;et&&(Fe.push(`Sec-WebSocket-Protocol: ${et}`),Ue._protocol=et)}if(oe[M.extensionName]){let et=oe[M.extensionName].params,ft=A.format({[M.extensionName]:[et]});Fe.push(`Sec-WebSocket-Extensions: ${ft}`),Ue._extensions=oe}this.emit("headers",Fe,Ee),Ie.write(Fe.concat(`\r
`).join(`\r
`)),Ie.removeListener("error",se),Ue.setSocket(Ie,Ae,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(Ue),Ue.on("close",()=>{this.clients.delete(Ue),this._shouldEmitClose&&!this.clients.size&&process.nextTick(K,this)})),He(Ue,Ee)}};Q.exports=ce;function pe(oe,fe){for(let we of Object.keys(fe))oe.on(we,fe[we]);return function(){for(let we of Object.keys(fe))oe.removeListener(we,fe[we])}}function K(oe){oe._state=ee,oe.emit("close")}function se(){this.destroy()}function ue(oe,fe,we,Ee){we=we||Z.STATUS_CODES[fe],Ee={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(we),...Ee},oe.once("finish",oe.destroy),oe.end(`HTTP/1.1 ${fe} ${Z.STATUS_CODES[fe]}\r
`+Object.keys(Ee).map(Ie=>`${Ie}: ${Ee[Ie]}`).join(`\r
`)+`\r
\r
`+we)}function ae(oe,fe,we,Ee,Ie){if(oe.listenerCount("wsClientError")){let Ae=new Error(Ie);Error.captureStackTrace(Ae,ae),oe.emit("wsClientError",Ae,we,fe)}else ue(we,Ee,Ie)}}),nx=P((G,Q)=>{var Y=Je,Z=process.cwd,X=null,k=t.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return X||(X=Z.call(process)),X};try{process.cwd()}catch{}typeof process.chdir=="function"&&(A=process.chdir,process.chdir=function(H){X=null,A.call(process,H)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,A));var A;Q.exports=M;function M(H){Y.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&B(H),H.lutimes||L(H),H.chown=W(H.chown),H.fchown=W(H.fchown),H.lchown=W(H.lchown),H.chmod=N(H.chmod),H.fchmod=N(H.fchmod),H.lchmod=N(H.lchmod),H.chownSync=re(H.chownSync),H.fchownSync=re(H.fchownSync),H.lchownSync=re(H.lchownSync),H.chmodSync=F(H.chmodSync),H.fchmodSync=F(H.fchmodSync),H.lchmodSync=F(H.lchmodSync),H.stat=ee(H.stat),H.fstat=ee(H.fstat),H.lstat=ee(H.lstat),H.statSync=ce(H.statSync),H.fstatSync=ce(H.fstatSync),H.lstatSync=ce(H.lstatSync),H.chmod&&!H.lchmod&&(H.lchmod=function(K,se,ue){ue&&process.nextTick(ue)},H.lchmodSync=function(){}),H.chown&&!H.lchown&&(H.lchown=function(K,se,ue,ae){ae&&process.nextTick(ae)},H.lchownSync=function(){}),k==="win32"&&(H.rename=typeof H.rename!="function"?H.rename:function(K){function se(ue,ae,oe){var fe=Date.now(),we=0;K(ue,ae,function Ee(Ie){if(Ie&&(Ie.code==="EACCES"||Ie.code==="EPERM")&&Date.now()-fe<6e4){setTimeout(function(){H.stat(ae,function(Ae,He){Ae&&Ae.code==="ENOENT"?K(ue,ae,Ee):oe(Ie)})},we),we<100&&(we+=10);return}oe&&oe(Ie)})}return Object.setPrototypeOf&&Object.setPrototypeOf(se,K),se}(H.rename)),H.read=typeof H.read!="function"?H.read:function(K){function se(ue,ae,oe,fe,we,Ee){var Ie;if(Ee&&typeof Ee=="function"){var Ae=0;Ie=function(He,Fe,Ue){if(He&&He.code==="EAGAIN"&&Ae<10)return Ae++,K.call(H,ue,ae,oe,fe,we,Ie);Ee.apply(this,arguments)}}return K.call(H,ue,ae,oe,fe,we,Ie)}return Object.setPrototypeOf&&Object.setPrototypeOf(se,K),se}(H.read),H.readSync=typeof H.readSync!="function"?H.readSync:function(K){return function(se,ue,ae,oe,fe){for(var we=0;;)try{return K.call(H,se,ue,ae,oe,fe)}catch(Ee){if(Ee.code==="EAGAIN"&&we<10){we++;continue}throw Ee}}}(H.readSync);function B(K){K.lchmod=function(se,ue,ae){K.open(se,Y.O_WRONLY|Y.O_SYMLINK,ue,function(oe,fe){if(oe){ae&&ae(oe);return}K.fchmod(fe,ue,function(we){K.close(fe,function(Ee){ae&&ae(we||Ee)})})})},K.lchmodSync=function(se,ue){var ae=K.openSync(se,Y.O_WRONLY|Y.O_SYMLINK,ue),oe=!0,fe;try{fe=K.fchmodSync(ae,ue),oe=!1}finally{if(oe)try{K.closeSync(ae)}catch{}else K.closeSync(ae)}return fe}}function L(K){Y.hasOwnProperty("O_SYMLINK")&&K.futimes?(K.lutimes=function(se,ue,ae,oe){K.open(se,Y.O_SYMLINK,function(fe,we){if(fe){oe&&oe(fe);return}K.futimes(we,ue,ae,function(Ee){K.close(we,function(Ie){oe&&oe(Ee||Ie)})})})},K.lutimesSync=function(se,ue,ae){var oe=K.openSync(se,Y.O_SYMLINK),fe,we=!0;try{fe=K.futimesSync(oe,ue,ae),we=!1}finally{if(we)try{K.closeSync(oe)}catch{}else K.closeSync(oe)}return fe}):K.futimes&&(K.lutimes=function(se,ue,ae,oe){oe&&process.nextTick(oe)},K.lutimesSync=function(){})}function N(K){return K&&function(se,ue,ae){return K.call(H,se,ue,function(oe){pe(oe)&&(oe=null),ae&&ae.apply(this,arguments)})}}function F(K){return K&&function(se,ue){try{return K.call(H,se,ue)}catch(ae){if(!pe(ae))throw ae}}}function W(K){return K&&function(se,ue,ae,oe){return K.call(H,se,ue,ae,function(fe){pe(fe)&&(fe=null),oe&&oe.apply(this,arguments)})}}function re(K){return K&&function(se,ue,ae){try{return K.call(H,se,ue,ae)}catch(oe){if(!pe(oe))throw oe}}}function ee(K){return K&&function(se,ue,ae){typeof ue=="function"&&(ae=ue,ue=null);function oe(fe,we){we&&(we.uid<0&&(we.uid+=4294967296),we.gid<0&&(we.gid+=4294967296)),ae&&ae.apply(this,arguments)}return ue?K.call(H,se,ue,oe):K.call(H,se,oe)}}function ce(K){return K&&function(se,ue){var ae=ue?K.call(H,se,ue):K.call(H,se);return ae&&(ae.uid<0&&(ae.uid+=4294967296),ae.gid<0&&(ae.gid+=4294967296)),ae}}function pe(K){if(!K||K.code==="ENOSYS")return!0;var se=!process.getuid||process.getuid()!==0;return!!(se&&(K.code==="EINVAL"||K.code==="EPERM"))}}}),ix=P((G,Q)=>{var Y=Je.Stream;Q.exports=Z;function Z(X){return{ReadStream:k,WriteStream:A};function k(M,H){if(!(this instanceof k))return new k(M,H);Y.call(this);var B=this;this.path=M,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,H=H||{};for(var L=Object.keys(H),N=0,F=L.length;N<F;N++){var W=L[N];this[W]=H[W]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){B._read()});return}X.open(this.path,this.flags,this.mode,function(re,ee){if(re){B.emit("error",re),B.readable=!1;return}B.fd=ee,B.emit("open",ee),B._read()})}function A(M,H){if(!(this instanceof A))return new A(M,H);Y.call(this),this.path=M,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,H=H||{};for(var B=Object.keys(H),L=0,N=B.length;L<N;L++){var F=B[L];this[F]=H[F]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=X.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}),sx=P((G,Q)=>{Q.exports=Z;var Y=Object.getPrototypeOf||function(X){return X.__proto__};function Z(X){if(X===null||typeof X!="object")return X;if(X instanceof Object)var k={__proto__:Y(X)};else var k=Object.create(null);return Object.getOwnPropertyNames(X).forEach(function(A){Object.defineProperty(k,A,Object.getOwnPropertyDescriptor(X,A))}),k}}),ax=P((G,Q)=>{var Y=Je,Z=nx(),X=ix(),k=sx(),A=Je,M,H;typeof Symbol=="function"&&typeof Symbol.for=="function"?(M=Symbol.for("graceful-fs.queue"),H=Symbol.for("graceful-fs.previous")):(M="___graceful-fs.queue",H="___graceful-fs.previous");function B(){}function L(K,se){Object.defineProperty(K,M,{get:function(){return se}})}var N=B;A.debuglog?N=A.debuglog("gfs4"):/\bgfs4\b/i.test(t.NODE_DEBUG||"")&&(N=function(){var K=A.format.apply(A,arguments);K="GFS4: "+K.split(/\n/).join(`
GFS4: `),console.error(K)}),Y[M]||(F=globalThis[M]||[],L(Y,F),Y.close=function(K){function se(ue,ae){return K.call(Y,ue,function(oe){oe||ce(),typeof ae=="function"&&ae.apply(this,arguments)})}return Object.defineProperty(se,H,{value:K}),se}(Y.close),Y.closeSync=function(K){function se(ue){K.apply(Y,arguments),ce()}return Object.defineProperty(se,H,{value:K}),se}(Y.closeSync),/\bgfs4\b/i.test(t.NODE_DEBUG||"")&&process.on("exit",function(){N(Y[M]),Je.equal(Y[M].length,0)}));var F;globalThis[M]||L(globalThis,Y[M]),Q.exports=W(k(Y)),t.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Y.__patched&&(Q.exports=W(Y),Y.__patched=!0);function W(K){Z(K),K.gracefulify=W,K.createReadStream=Ft,K.createWriteStream=vr;var se=K.readFile;K.readFile=ue;function ue(bt,Wt,Pt){return typeof Wt=="function"&&(Pt=Wt,Wt=null),Qt(bt,Wt,Pt);function Qt(sr,Gt,ir,Ht){return se(sr,Gt,function(_t){_t&&(_t.code==="EMFILE"||_t.code==="ENFILE")?re([Qt,[sr,Gt,ir],_t,Ht||Date.now(),Date.now()]):typeof ir=="function"&&ir.apply(this,arguments)})}}var ae=K.writeFile;K.writeFile=oe;function oe(bt,Wt,Pt,Qt){return typeof Pt=="function"&&(Qt=Pt,Pt=null),sr(bt,Wt,Pt,Qt);function sr(Gt,ir,Ht,_t,Ze){return ae(Gt,ir,Ht,function(tt){tt&&(tt.code==="EMFILE"||tt.code==="ENFILE")?re([sr,[Gt,ir,Ht,_t],tt,Ze||Date.now(),Date.now()]):typeof _t=="function"&&_t.apply(this,arguments)})}}var fe=K.appendFile;fe&&(K.appendFile=we);function we(bt,Wt,Pt,Qt){return typeof Pt=="function"&&(Qt=Pt,Pt=null),sr(bt,Wt,Pt,Qt);function sr(Gt,ir,Ht,_t,Ze){return fe(Gt,ir,Ht,function(tt){tt&&(tt.code==="EMFILE"||tt.code==="ENFILE")?re([sr,[Gt,ir,Ht,_t],tt,Ze||Date.now(),Date.now()]):typeof _t=="function"&&_t.apply(this,arguments)})}}var Ee=K.copyFile;Ee&&(K.copyFile=Ie);function Ie(bt,Wt,Pt,Qt){return typeof Pt=="function"&&(Qt=Pt,Pt=0),sr(bt,Wt,Pt,Qt);function sr(Gt,ir,Ht,_t,Ze){return Ee(Gt,ir,Ht,function(tt){tt&&(tt.code==="EMFILE"||tt.code==="ENFILE")?re([sr,[Gt,ir,Ht,_t],tt,Ze||Date.now(),Date.now()]):typeof _t=="function"&&_t.apply(this,arguments)})}}var Ae=K.readdir;K.readdir=Fe;var He=/^v[0-5]\./;function Fe(bt,Wt,Pt){typeof Wt=="function"&&(Pt=Wt,Wt=null);var Qt=He.test(process.version)?function(Gt,ir,Ht,_t){return Ae(Gt,sr(Gt,ir,Ht,_t))}:function(Gt,ir,Ht,_t){return Ae(Gt,ir,sr(Gt,ir,Ht,_t))};return Qt(bt,Wt,Pt);function sr(Gt,ir,Ht,_t){return function(Ze,tt){Ze&&(Ze.code==="EMFILE"||Ze.code==="ENFILE")?re([Qt,[Gt,ir,Ht],Ze,_t||Date.now(),Date.now()]):(tt&&tt.sort&&tt.sort(),typeof Ht=="function"&&Ht.call(this,Ze,tt))}}}if(process.version.substr(0,4)==="v0.8"){var Ue=X(K);vt=Ue.ReadStream,Mt=Ue.WriteStream}var et=K.ReadStream;et&&(vt.prototype=Object.create(et.prototype),vt.prototype.open=Ot);var ft=K.WriteStream;ft&&(Mt.prototype=Object.create(ft.prototype),Mt.prototype.open=Ct),Object.defineProperty(K,"ReadStream",{get:function(){return vt},set:function(bt){vt=bt},enumerable:!0,configurable:!0}),Object.defineProperty(K,"WriteStream",{get:function(){return Mt},set:function(bt){Mt=bt},enumerable:!0,configurable:!0});var ht=vt;Object.defineProperty(K,"FileReadStream",{get:function(){return ht},set:function(bt){ht=bt},enumerable:!0,configurable:!0});var Tt=Mt;Object.defineProperty(K,"FileWriteStream",{get:function(){return Tt},set:function(bt){Tt=bt},enumerable:!0,configurable:!0});function vt(bt,Wt){return this instanceof vt?(et.apply(this,arguments),this):vt.apply(Object.create(vt.prototype),arguments)}function Ot(){var bt=this;mt(bt.path,bt.flags,bt.mode,function(Wt,Pt){Wt?(bt.autoClose&&bt.destroy(),bt.emit("error",Wt)):(bt.fd=Pt,bt.emit("open",Pt),bt.read())})}function Mt(bt,Wt){return this instanceof Mt?(ft.apply(this,arguments),this):Mt.apply(Object.create(Mt.prototype),arguments)}function Ct(){var bt=this;mt(bt.path,bt.flags,bt.mode,function(Wt,Pt){Wt?(bt.destroy(),bt.emit("error",Wt)):(bt.fd=Pt,bt.emit("open",Pt))})}function Ft(bt,Wt){return new K.ReadStream(bt,Wt)}function vr(bt,Wt){return new K.WriteStream(bt,Wt)}var gr=K.open;K.open=mt;function mt(bt,Wt,Pt,Qt){return typeof Pt=="function"&&(Qt=Pt,Pt=null),sr(bt,Wt,Pt,Qt);function sr(Gt,ir,Ht,_t,Ze){return gr(Gt,ir,Ht,function(tt,St){tt&&(tt.code==="EMFILE"||tt.code==="ENFILE")?re([sr,[Gt,ir,Ht,_t],tt,Ze||Date.now(),Date.now()]):typeof _t=="function"&&_t.apply(this,arguments)})}}return K}function re(K){N("ENQUEUE",K[0].name,K[1]),Y[M].push(K),pe()}var ee;function ce(){for(var K=Date.now(),se=0;se<Y[M].length;++se)Y[M][se].length>2&&(Y[M][se][3]=K,Y[M][se][4]=K);pe()}function pe(){if(clearTimeout(ee),ee=void 0,Y[M].length!==0){var K=Y[M].shift(),se=K[0],ue=K[1],ae=K[2],oe=K[3],fe=K[4];if(oe===void 0)N("RETRY",se.name,ue),se.apply(null,ue);else if(Date.now()-oe>=6e4){N("TIMEOUT",se.name,ue);var we=ue.pop();typeof we=="function"&&we.call(null,ae)}else{var Ee=Date.now()-fe,Ie=Math.max(fe-oe,1),Ae=Math.min(Ie*1.2,100);Ee>=Ae?(N("RETRY",se.name,ue),se.apply(null,ue.concat([oe]))):Y[M].push(K)}ee===void 0&&(ee=setTimeout(pe,0))}}}),ox=P((G,Q)=>{function Y(Z,X){typeof X=="boolean"&&(X={forever:X}),this._originalTimeouts=JSON.parse(JSON.stringify(Z)),this._timeouts=Z,this._options=X||{},this._maxRetryTime=X&&X.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Q.exports=Y,Y.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},Y.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},Y.prototype.retry=function(Z){if(this._timeout&&clearTimeout(this._timeout),!Z)return!1;var X=new Date().getTime();if(Z&&X-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(Z);var k=this._timeouts.shift();if(k===void 0)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),k=this._timeouts.shift();else return!1;var A=this,M=setTimeout(function(){A._attempts++,A._operationTimeoutCb&&(A._timeout=setTimeout(function(){A._operationTimeoutCb(A._attempts)},A._operationTimeout),A._options.unref&&A._timeout.unref()),A._fn(A._attempts)},k);return this._options.unref&&M.unref(),!0},Y.prototype.attempt=function(Z,X){this._fn=Z,X&&(X.timeout&&(this._operationTimeout=X.timeout),X.cb&&(this._operationTimeoutCb=X.cb));var k=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){k._operationTimeoutCb()},k._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},Y.prototype.try=function(Z){console.log("Using RetryOperation.try() is deprecated"),this.attempt(Z)},Y.prototype.start=function(Z){console.log("Using RetryOperation.start() is deprecated"),this.attempt(Z)},Y.prototype.start=Y.prototype.try,Y.prototype.errors=function(){return this._errors},Y.prototype.attempts=function(){return this._attempts},Y.prototype.mainError=function(){if(this._errors.length===0)return null;for(var Z={},X=null,k=0,A=0;A<this._errors.length;A++){var M=this._errors[A],H=M.message,B=(Z[H]||0)+1;Z[H]=B,B>=k&&(X=M,k=B)}return X}}),cx=P(G=>{var Q=ox();G.operation=function(Y){var Z=G.timeouts(Y);return new Q(Z,{forever:Y&&Y.forever,unref:Y&&Y.unref,maxRetryTime:Y&&Y.maxRetryTime})},G.timeouts=function(Y){if(Y instanceof Array)return[].concat(Y);var Z={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var X in Y)Z[X]=Y[X];if(Z.minTimeout>Z.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var k=[],A=0;A<Z.retries;A++)k.push(this.createTimeout(A,Z));return Y&&Y.forever&&!k.length&&k.push(this.createTimeout(A,Z)),k.sort(function(M,H){return M-H}),k},G.createTimeout=function(Y,Z){var X=Z.randomize?Math.random()+1:1,k=Math.round(X*Z.minTimeout*Math.pow(Z.factor,Y));return k=Math.min(k,Z.maxTimeout),k},G.wrap=function(Y,Z,X){if(Z instanceof Array&&(X=Z,Z=null),!X){X=[];for(var k in Y)typeof Y[k]=="function"&&X.push(k)}for(var A=0;A<X.length;A++){var M=X[A],H=Y[M];Y[M]=(function(B){var L=G.operation(Z),N=Array.prototype.slice.call(arguments,1),F=N.pop();N.push(function(W){L.retry(W)||(W&&(arguments[0]=L.mainError()),F.apply(this,arguments))}),L.attempt(function(){B.apply(Y,N)})}).bind(Y,H),Y[M].options=Z}}}),lx=P((G,Q)=>{Q.exports=cx()}),ux=P((G,Q)=>{Q.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],process.platform!=="win32"&&Q.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),process.platform==="linux"&&Q.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}),dx=P((G,Q)=>{var Y=globalThis.process,Z=function(K){return K&&typeof K=="object"&&typeof K.removeListener=="function"&&typeof K.emit=="function"&&typeof K.reallyExit=="function"&&typeof K.listeners=="function"&&typeof K.kill=="function"&&typeof K.pid=="number"&&typeof K.on=="function"};Z(Y)?(X=Je,k=ux(),A=/^win/i.test(Y.platform),M=Vr(),typeof M!="function"&&(M=M.EventEmitter),Y.__signal_exit_emitter__?H=Y.__signal_exit_emitter__:(H=Y.__signal_exit_emitter__=new M,H.count=0,H.emitted={}),H.infinite||(H.setMaxListeners(1/0),H.infinite=!0),Q.exports=function(K,se){if(!Z(globalThis.process))return function(){};X.equal(typeof K,"function","a callback must be provided for exit handler"),F===!1&&W();var ue="exit";se&&se.alwaysLast&&(ue="afterexit");var ae=function(){H.removeListener(ue,K),H.listeners("exit").length===0&&H.listeners("afterexit").length===0&&B()};return H.on(ue,K),ae},B=function(){!F||!Z(globalThis.process)||(F=!1,k.forEach(function(K){try{Y.removeListener(K,N[K])}catch{}}),Y.emit=ce,Y.reallyExit=re,H.count-=1)},Q.exports.unload=B,L=function(K,se,ue){H.emitted[K]||(H.emitted[K]=!0,H.emit(K,se,ue))},N={},k.forEach(function(K){N[K]=function(){if(Z(globalThis.process)){var se=Y.listeners(K);se.length===H.count&&(B(),L("exit",null,K),L("afterexit",null,K),A&&K==="SIGHUP"&&(K="SIGINT"),Y.kill(Y.pid,K))}}}),Q.exports.signals=function(){return k},F=!1,W=function(){F||!Z(globalThis.process)||(F=!0,H.count+=1,k=k.filter(function(K){try{return Y.on(K,N[K]),!0}catch{return!1}}),Y.emit=pe,Y.reallyExit=ee)},Q.exports.load=W,re=Y.reallyExit,ee=function(K){Z(globalThis.process)&&(Y.exitCode=K||0,L("exit",Y.exitCode,null),L("afterexit",Y.exitCode,null),re.call(Y,Y.exitCode))},ce=Y.emit,pe=function(K,se){if(K==="exit"&&Z(globalThis.process)){se!==void 0&&(Y.exitCode=se);var ue=ce.apply(this,arguments);return L("exit",Y.exitCode,null),L("afterexit",Y.exitCode,null),ue}else return ce.apply(this,arguments)}):Q.exports=function(){return function(){}};var X,k,A,M,H,B,L,N,F,W,re,ee,ce,pe}),hx=P((G,Q)=>{var Y=Je,Z=ax(),X=lx(),k=dx(),A={},M=Symbol();function H(oe,fe,we){let Ee=fe[M];if(Ee)return fe.stat(oe,(Ae,He)=>{if(Ae)return we(Ae);we(null,He.mtime,Ee)});let Ie=new Date(Math.ceil(Date.now()/1e3)*1e3+5);fe.utimes(oe,Ie,Ie,Ae=>{if(Ae)return we(Ae);fe.stat(oe,(He,Fe)=>{if(He)return we(He);let Ue=Fe.mtime.getTime()%1e3===0?"s":"ms";Object.defineProperty(fe,M,{value:Ue}),we(null,Fe.mtime,Ue)})})}function B(oe){let fe=Date.now();return oe==="s"&&(fe=Math.ceil(fe/1e3)*1e3),new Date(fe)}function L(oe,fe){return fe.lockfilePath||`${oe}.lock`}function N(oe,fe,we){if(!fe.realpath)return we(null,Y.resolve(oe));fe.fs.realpath(oe,we)}function F(oe,fe,we){let Ee=L(oe,fe);fe.fs.mkdir(Ee,Ie=>{if(!Ie)return H(Ee,fe.fs,(Ae,He,Fe)=>{if(Ae)return fe.fs.rmdir(Ee,()=>{}),we(Ae);we(null,He,Fe)});if(Ie.code!=="EEXIST")return we(Ie);if(fe.stale<=0)return we(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:oe}));fe.fs.stat(Ee,(Ae,He)=>{if(Ae)return Ae.code==="ENOENT"?F(oe,{...fe,stale:0},we):we(Ae);if(!W(He,fe))return we(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:oe}));re(oe,fe,Fe=>{if(Fe)return we(Fe);F(oe,{...fe,stale:0},we)})})})}function W(oe,fe){return oe.mtime.getTime()<Date.now()-fe.stale}function re(oe,fe,we){fe.fs.rmdir(L(oe,fe),Ee=>{if(Ee&&Ee.code!=="ENOENT")return we(Ee);we()})}function ee(oe,fe){let we=A[oe];we.updateTimeout||(we.updateDelay=we.updateDelay||fe.update,we.updateTimeout=setTimeout(()=>{we.updateTimeout=null,fe.fs.stat(we.lockfilePath,(Ee,Ie)=>{let Ae=we.lastUpdate+fe.stale<Date.now();if(Ee)return Ee.code==="ENOENT"||Ae?ce(oe,we,Object.assign(Ee,{code:"ECOMPROMISED"})):(we.updateDelay=1e3,ee(oe,fe));if(we.mtime.getTime()!==Ie.mtime.getTime())return ce(oe,we,Object.assign(new Error("Unable to update lock within the stale threshold"),{code:"ECOMPROMISED"}));let He=B(we.mtimePrecision);fe.fs.utimes(we.lockfilePath,He,He,Fe=>{let Ue=we.lastUpdate+fe.stale<Date.now();if(!we.released){if(Fe)return Fe.code==="ENOENT"||Ue?ce(oe,we,Object.assign(Fe,{code:"ECOMPROMISED"})):(we.updateDelay=1e3,ee(oe,fe));we.mtime=He,we.lastUpdate=Date.now(),we.updateDelay=null,ee(oe,fe)}})})},we.updateDelay),we.updateTimeout.unref&&we.updateTimeout.unref())}function ce(oe,fe,we){fe.released=!0,fe.updateTimeout&&clearTimeout(fe.updateTimeout),A[oe]===fe&&delete A[oe],fe.options.onCompromised(we)}function pe(oe,fe,we){fe={stale:1e4,update:null,realpath:!0,retries:0,fs:Z,onCompromised:Ee=>{throw Ee},...fe},fe.retries=fe.retries||0,fe.retries=typeof fe.retries=="number"?{retries:fe.retries}:fe.retries,fe.stale=Math.max(fe.stale||0,2e3),fe.update=fe.update==null?fe.stale/2:fe.update||0,fe.update=Math.max(Math.min(fe.update,fe.stale/2),1e3),N(oe,fe,(Ee,Ie)=>{if(Ee)return we(Ee);let Ae=X.operation(fe.retries);Ae.attempt(()=>{F(Ie,fe,(He,Fe,Ue)=>{if(Ae.retry(He))return;if(He)return we(Ae.mainError());let et=A[Ie]={lockfilePath:L(Ie,fe),mtime:Fe,mtimePrecision:Ue,options:fe,lastUpdate:Date.now()};ee(Ie,fe),we(null,ft=>{if(et.released)return ft&&ft(Object.assign(new Error("Lock is already released"),{code:"ERELEASED"}));K(Ie,{...fe,realpath:!1},ft)})})})})}function K(oe,fe,we){fe={fs:Z,realpath:!0,...fe},N(oe,fe,(Ee,Ie)=>{if(Ee)return we(Ee);let Ae=A[Ie];if(!Ae)return we(Object.assign(new Error("Lock is not acquired/owned by you"),{code:"ENOTACQUIRED"}));Ae.updateTimeout&&clearTimeout(Ae.updateTimeout),Ae.released=!0,delete A[Ie],re(Ie,fe,we)})}function se(oe){return(...fe)=>new Promise((we,Ee)=>{fe.push((Ie,Ae)=>{Ie?Ee(Ie):we(Ae)}),oe(...fe)})}var ue=!1;function ae(){ue||(ue=!0,k(()=>{for(let oe in A){let fe=A[oe].options;try{fe.fs.rmdirSync(L(oe,fe))}catch{}}}))}Q.exports.lock=async(oe,fe)=>{ae();let we=await se(pe)(oe,fe);return se(we)}}),wm={};e(wm,{HttpsProxyAgent:()=>Qx.HttpsProxyAgent,PNG:()=>nE.PNG,SocksProxyAgent:()=>oE.SocksProxyAgent,colors:()=>fE,debug:()=>mE,diff:()=>gE,dotenv:()=>_E,getProxyForUrl:()=>Xx.getProxyForUrl,jpegjs:()=>bE,lockfile:()=>wE,mime:()=>yE,minimatch:()=>SE,open:()=>xE,program:()=>sE,progress:()=>EE,ws:()=>TE,wsReceiver:()=>PE,wsSender:()=>kE,wsServer:()=>CE,yaml:()=>OE}),Tc=w(wm);var px=C(h()),fx=C(p()),ym={};e(ym,{Diff:()=>kn,applyPatch:()=>Lm,applyPatches:()=>Bx,canonicalize:()=>Pa,convertChangesToDMP:()=>Kx,convertChangesToXML:()=>Gx,createPatch:()=>jx,createTwoFilesPatch:()=>Dm,diffArrays:()=>Lx,diffChars:()=>gx,diffCss:()=>Ox,diffJson:()=>Rx,diffLines:()=>pc,diffSentences:()=>Ex,diffTrimmedLines:()=>xx,diffWords:()=>yx,diffWordsWithSpace:()=>Pm,formatPatch:()=>Na,merge:()=>$x,parsePatch:()=>Aa,reversePatch:()=>zm,structuredPatch:()=>Ia});function kn(){}kn.prototype={diff:function(G,Q){var Y,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},X=Z.callback;typeof Z=="function"&&(X=Z,Z={});var k=this;function A(se){return se=k.postProcess(se,Z),X?(setTimeout(function(){X(se)},0),!0):se}G=this.castInput(G,Z),Q=this.castInput(Q,Z),G=this.removeEmpty(this.tokenize(G,Z)),Q=this.removeEmpty(this.tokenize(Q,Z));var M=Q.length,H=G.length,B=1,L=M+H;Z.maxEditLength!=null&&(L=Math.min(L,Z.maxEditLength));var N=(Y=Z.timeout)!==null&&Y!==void 0?Y:1/0,F=Date.now()+N,W=[{oldPos:-1,lastComponent:void 0}],re=this.extractCommon(W[0],Q,G,0,Z);if(W[0].oldPos+1>=H&&re+1>=M)return A(Sm(k,W[0].lastComponent,Q,G,k.useLongestToken));var ee=-1/0,ce=1/0;function pe(){for(var se=Math.max(ee,-B);se<=Math.min(ce,B);se+=2){var ue=void 0,ae=W[se-1],oe=W[se+1];ae&&(W[se-1]=void 0);var fe=!1;if(oe){var we=oe.oldPos-se;fe=oe&&0<=we&&we<M}var Ee=ae&&ae.oldPos+1<H;if(!fe&&!Ee){W[se]=void 0;continue}if(!Ee||fe&&ae.oldPos<oe.oldPos?ue=k.addToPath(oe,!0,!1,0,Z):ue=k.addToPath(ae,!1,!0,1,Z),re=k.extractCommon(ue,Q,G,se,Z),ue.oldPos+1>=H&&re+1>=M)return A(Sm(k,ue.lastComponent,Q,G,k.useLongestToken));W[se]=ue,ue.oldPos+1>=H&&(ce=Math.min(ce,se-1)),re+1>=M&&(ee=Math.max(ee,se+1))}B++}if(X)(function se(){setTimeout(function(){if(B>L||Date.now()>F)return X();pe()||se()},0)})();else for(;B<=L&&Date.now()<=F;){var K=pe();if(K)return K}},addToPath:function(G,Q,Y,Z,X){var k=G.lastComponent;return k&&!X.oneChangePerToken&&k.added===Q&&k.removed===Y?{oldPos:G.oldPos+Z,lastComponent:{count:k.count+1,added:Q,removed:Y,previousComponent:k.previousComponent}}:{oldPos:G.oldPos+Z,lastComponent:{count:1,added:Q,removed:Y,previousComponent:k}}},extractCommon:function(G,Q,Y,Z,X){for(var k=Q.length,A=Y.length,M=G.oldPos,H=M-Z,B=0;H+1<k&&M+1<A&&this.equals(Y[M+1],Q[H+1],X);)H++,M++,B++,X.oneChangePerToken&&(G.lastComponent={count:1,previousComponent:G.lastComponent,added:!1,removed:!1});return B&&!X.oneChangePerToken&&(G.lastComponent={count:B,previousComponent:G.lastComponent,added:!1,removed:!1}),G.oldPos=M,H},equals:function(G,Q,Y){return Y.comparator?Y.comparator(G,Q):G===Q||Y.ignoreCase&&G.toLowerCase()===Q.toLowerCase()},removeEmpty:function(G){for(var Q=[],Y=0;Y<G.length;Y++)G[Y]&&Q.push(G[Y]);return Q},castInput:function(G){return G},tokenize:function(G){return Array.from(G)},join:function(G){return G.join("")},postProcess:function(G){return G}};function Sm(G,Q,Y,Z,X){for(var k=[],A;Q;)k.push(Q),A=Q.previousComponent,delete Q.previousComponent,Q=A;k.reverse();for(var M=0,H=k.length,B=0,L=0;M<H;M++){var N=k[M];if(N.removed)N.value=G.join(Z.slice(L,L+N.count)),L+=N.count;else{if(!N.added&&X){var F=Y.slice(B,B+N.count);F=F.map(function(W,re){var ee=Z[L+re];return ee.length>W.length?ee:W}),N.value=G.join(F)}else N.value=G.join(Y.slice(B,B+N.count));B+=N.count,N.added||(L+=N.count)}}return k}var mx=new kn;function gx(G,Q,Y){return mx.diff(G,Q,Y)}function xm(G,Q){var Y;for(Y=0;Y<G.length&&Y<Q.length;Y++)if(G[Y]!=Q[Y])return G.slice(0,Y);return G.slice(0,Y)}function Em(G,Q){var Y;if(!G||!Q||G[G.length-1]!=Q[Q.length-1])return"";for(Y=0;Y<G.length&&Y<Q.length;Y++)if(G[G.length-(Y+1)]!=Q[Q.length-(Y+1)])return G.slice(-Y);return G.slice(-Y)}function dc(G,Q,Y){if(G.slice(0,Q.length)!=Q)throw Error("string ".concat(JSON.stringify(G)," doesn't start with prefix ").concat(JSON.stringify(Q),"; this is a bug"));return Y+G.slice(Q.length)}function hc(G,Q,Y){if(!Q)return G+Y;if(G.slice(-Q.length)!=Q)throw Error("string ".concat(JSON.stringify(G)," doesn't end with suffix ").concat(JSON.stringify(Q),"; this is a bug"));return G.slice(0,-Q.length)+Y}function Es(G,Q){return dc(G,Q,"")}function Ta(G,Q){return hc(G,Q,"")}function Om(G,Q){return Q.slice(0,_x(G,Q))}function _x(G,Q){var Y=0;G.length>Q.length&&(Y=G.length-Q.length);var Z=Q.length;G.length<Q.length&&(Z=G.length);var X=Array(Z),k=0;X[0]=0;for(var A=1;A<Z;A++){for(Q[A]==Q[k]?X[A]=X[k]:X[A]=k;k>0&&Q[A]!=Q[k];)k=X[k];Q[A]==Q[k]&&k++}k=0;for(var M=Y;M<G.length;M++){for(;k>0&&G[M]!=Q[k];)k=X[k];G[M]==Q[k]&&k++}return k}function bx(G){return G.includes(`\r
`)&&!G.startsWith(`
`)&&!G.match(/[^\r]\n/)}function vx(G){return!G.includes(`\r
`)&&G.includes(`
`)}var Ca="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",wx=new RegExp("[".concat(Ca,"]+|\\s+|[^").concat(Ca,"]"),"ug"),Os=new kn;Os.equals=function(G,Q,Y){return Y.ignoreCase&&(G=G.toLowerCase(),Q=Q.toLowerCase()),G.trim()===Q.trim()},Os.tokenize=function(G){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y;if(Q.intlSegmenter){if(Q.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');Y=Array.from(Q.intlSegmenter.segment(G),function(k){return k.segment})}else Y=G.match(wx)||[];var Z=[],X=null;return Y.forEach(function(k){/\s/.test(k)?X==null?Z.push(k):Z.push(Z.pop()+k):/\s/.test(X)?Z[Z.length-1]==X?Z.push(Z.pop()+k):Z.push(X+k):Z.push(k),X=k}),Z},Os.join=function(G){return G.map(function(Q,Y){return Y==0?Q:Q.replace(/^\s+/,"")}).join("")},Os.postProcess=function(G,Q){if(!G||Q.oneChangePerToken)return G;var Y=null,Z=null,X=null;return G.forEach(function(k){k.added?Z=k:k.removed?X=k:((Z||X)&&Tm(Y,X,Z,k),Y=k,Z=null,X=null)}),(Z||X)&&Tm(Y,X,Z,null),G};function yx(G,Q,Y){return(Y==null?void 0:Y.ignoreWhitespace)!=null&&!Y.ignoreWhitespace?Pm(G,Q,Y):Os.diff(G,Q,Y)}function Tm(G,Q,Y,Z){if(Q&&Y){var X=Q.value.match(/^\s*/)[0],k=Q.value.match(/\s*$/)[0],A=Y.value.match(/^\s*/)[0],M=Y.value.match(/\s*$/)[0];if(G){var H=xm(X,A);G.value=hc(G.value,A,H),Q.value=Es(Q.value,H),Y.value=Es(Y.value,H)}if(Z){var B=Em(k,M);Z.value=dc(Z.value,M,B),Q.value=Ta(Q.value,B),Y.value=Ta(Y.value,B)}}else if(Y)G&&(Y.value=Y.value.replace(/^\s*/,"")),Z&&(Z.value=Z.value.replace(/^\s*/,""));else if(G&&Z){var L=Z.value.match(/^\s*/)[0],N=Q.value.match(/^\s*/)[0],F=Q.value.match(/\s*$/)[0],W=xm(L,N);Q.value=Es(Q.value,W);var re=Em(Es(L,W),F);Q.value=Ta(Q.value,re),Z.value=dc(Z.value,L,re),G.value=hc(G.value,L,L.slice(0,L.length-re.length))}else if(Z){var ee=Z.value.match(/^\s*/)[0],ce=Q.value.match(/\s*$/)[0],pe=Om(ce,ee);Q.value=Ta(Q.value,pe)}else if(G){var K=G.value.match(/\s*$/)[0],se=Q.value.match(/^\s*/)[0],ue=Om(K,se);Q.value=Es(Q.value,ue)}}var Cm=new kn;Cm.tokenize=function(G){var Q=new RegExp("(\\r?\\n)|[".concat(Ca,"]+|[^\\S\\n\\r]+|[^").concat(Ca,"]"),"ug");return G.match(Q)||[]};function Pm(G,Q,Y){return Cm.diff(G,Q,Y)}function Sx(G,Q){if(typeof G=="function")Q.callback=G;else if(G)for(var Y in G)G.hasOwnProperty(Y)&&(Q[Y]=G[Y]);return Q}var Ts=new kn;Ts.tokenize=function(G,Q){Q.stripTrailingCr&&(G=G.replace(/\r\n/g,`
`));var Y=[],Z=G.split(/(\n|\r\n)/);Z[Z.length-1]||Z.pop();for(var X=0;X<Z.length;X++){var k=Z[X];X%2&&!Q.newlineIsToken?Y[Y.length-1]+=k:Y.push(k)}return Y},Ts.equals=function(G,Q,Y){return Y.ignoreWhitespace?((!Y.newlineIsToken||!G.includes(`
`))&&(G=G.trim()),(!Y.newlineIsToken||!Q.includes(`
`))&&(Q=Q.trim())):Y.ignoreNewlineAtEof&&!Y.newlineIsToken&&(G.endsWith(`
`)&&(G=G.slice(0,-1)),Q.endsWith(`
`)&&(Q=Q.slice(0,-1))),kn.prototype.equals.call(this,G,Q,Y)};function pc(G,Q,Y){return Ts.diff(G,Q,Y)}function xx(G,Q,Y){var Z=Sx(Y,{ignoreWhitespace:!0});return Ts.diff(G,Q,Z)}var km=new kn;km.tokenize=function(G){return G.split(/(\S.+?[.!?])(?=\s+|$)/)};function Ex(G,Q,Y){return km.diff(G,Q,Y)}var Am=new kn;Am.tokenize=function(G){return G.split(/([{}:;,]|\s+)/)};function Ox(G,Q,Y){return Am.diff(G,Q,Y)}function Im(G,Q){var Y=Object.keys(G);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(G);Q&&(Z=Z.filter(function(X){return Object.getOwnPropertyDescriptor(G,X).enumerable})),Y.push.apply(Y,Z)}return Y}function vn(G){for(var Q=1;Q<arguments.length;Q++){var Y=arguments[Q]!=null?arguments[Q]:{};Q%2?Im(Object(Y),!0).forEach(function(Z){Px(G,Z,Y[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(Y)):Im(Object(Y)).forEach(function(Z){Object.defineProperty(G,Z,Object.getOwnPropertyDescriptor(Y,Z))})}return G}function Tx(G,Q){if(typeof G!="object"||!G)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var Z=Y.call(G,Q);if(typeof Z!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(G)}function Cx(G){var Q=Tx(G,"string");return typeof Q=="symbol"?Q:Q+""}function fc(G){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},fc(G)}function Px(G,Q,Y){return Q=Cx(Q),Q in G?Object.defineProperty(G,Q,{value:Y,enumerable:!0,configurable:!0,writable:!0}):G[Q]=Y,G}function Zn(G){return kx(G)||Ax(G)||Ix(G)||Nx()}function kx(G){if(Array.isArray(G))return mc(G)}function Ax(G){if(typeof Symbol<"u"&&G[Symbol.iterator]!=null||G["@@iterator"]!=null)return Array.from(G)}function Ix(G,Q){if(G){if(typeof G=="string")return mc(G,Q);var Y=Object.prototype.toString.call(G).slice(8,-1);if(Y==="Object"&&G.constructor&&(Y=G.constructor.name),Y==="Map"||Y==="Set")return Array.from(G);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return mc(G,Q)}}function mc(G,Q){(Q==null||Q>G.length)&&(Q=G.length);for(var Y=0,Z=new Array(Q);Y<Q;Y++)Z[Y]=G[Y];return Z}function Nx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rs=new kn;rs.useLongestToken=!0,rs.tokenize=Ts.tokenize,rs.castInput=function(G,Q){var Y=Q.undefinedReplacement,Z=Q.stringifyReplacer,X=Z===void 0?function(k,A){return typeof A>"u"?Y:A}:Z;return typeof G=="string"?G:JSON.stringify(Pa(G,null,null,X),X,"  ")},rs.equals=function(G,Q,Y){return kn.prototype.equals.call(rs,G.replace(/,([\r\n])/g,"$1"),Q.replace(/,([\r\n])/g,"$1"),Y)};function Rx(G,Q,Y){return rs.diff(G,Q,Y)}function Pa(G,Q,Y,Z,X){Q=Q||[],Y=Y||[],Z&&(G=Z(X,G));var k;for(k=0;k<Q.length;k+=1)if(Q[k]===G)return Y[k];var A;if(Object.prototype.toString.call(G)==="[object Array]"){for(Q.push(G),A=new Array(G.length),Y.push(A),k=0;k<G.length;k+=1)A[k]=Pa(G[k],Q,Y,Z,X);return Q.pop(),Y.pop(),A}if(G&&G.toJSON&&(G=G.toJSON()),fc(G)==="object"&&G!==null){Q.push(G),A={},Y.push(A);var M=[],H;for(H in G)Object.prototype.hasOwnProperty.call(G,H)&&M.push(H);for(M.sort(),k=0;k<M.length;k+=1)H=M[k],A[H]=Pa(G[H],Q,Y,Z,H);Q.pop(),Y.pop()}else A=G;return A}var ka=new kn;ka.tokenize=function(G){return G.slice()},ka.join=ka.removeEmpty=function(G){return G};function Lx(G,Q,Y){return ka.diff(G,Q,Y)}function Nm(G){return Array.isArray(G)?G.map(Nm):vn(vn({},G),{},{hunks:G.hunks.map(function(Q){return vn(vn({},Q),{},{lines:Q.lines.map(function(Y,Z){var X;return Y.startsWith("\\")||Y.endsWith("\r")||(X=Q.lines[Z+1])!==null&&X!==void 0&&X.startsWith("\\")?Y:Y+"\r"})})})})}function Rm(G){return Array.isArray(G)?G.map(Rm):vn(vn({},G),{},{hunks:G.hunks.map(function(Q){return vn(vn({},Q),{},{lines:Q.lines.map(function(Y){return Y.endsWith("\r")?Y.substring(0,Y.length-1):Y})})})})}function Dx(G){return Array.isArray(G)||(G=[G]),!G.some(function(Q){return Q.hunks.some(function(Y){return Y.lines.some(function(Z){return!Z.startsWith("\\")&&Z.endsWith("\r")})})})}function Mx(G){return Array.isArray(G)||(G=[G]),G.some(function(Q){return Q.hunks.some(function(Y){return Y.lines.some(function(Z){return Z.endsWith("\r")})})})&&G.every(function(Q){return Q.hunks.every(function(Y){return Y.lines.every(function(Z,X){var k;return Z.startsWith("\\")||Z.endsWith("\r")||((k=Y.lines[X+1])===null||k===void 0?void 0:k.startsWith("\\"))})})})}function Aa(G){var Q=G.split(/\n/),Y=[],Z=0;function X(){var M={};for(Y.push(M);Z<Q.length;){var H=Q[Z];if(/^(\-\-\-|\+\+\+|@@)\s/.test(H))break;var B=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(H);B&&(M.index=B[1]),Z++}for(k(M),k(M),M.hunks=[];Z<Q.length;){var L=Q[Z];if(/^(Index:\s|diff\s|\-\-\-\s|\+\+\+\s|===================================================================)/.test(L))break;if(/^@@/.test(L))M.hunks.push(A());else{if(L)throw new Error("Unknown line "+(Z+1)+" "+JSON.stringify(L));Z++}}}function k(M){var H=/^(---|\+\+\+)\s+(.*)\r?$/.exec(Q[Z]);if(H){var B=H[1]==="---"?"old":"new",L=H[2].split("	",2),N=L[0].replace(/\\\\/g,"\\");/^".*"$/.test(N)&&(N=N.substr(1,N.length-2)),M[B+"FileName"]=N,M[B+"Header"]=(L[1]||"").trim(),Z++}}function A(){var M=Z,H=Q[Z++],B=H.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),L={oldStart:+B[1],oldLines:typeof B[2]>"u"?1:+B[2],newStart:+B[3],newLines:typeof B[4]>"u"?1:+B[4],lines:[]};L.oldLines===0&&(L.oldStart+=1),L.newLines===0&&(L.newStart+=1);for(var N=0,F=0;Z<Q.length&&(F<L.oldLines||N<L.newLines||(W=Q[Z])!==null&&W!==void 0&&W.startsWith("\\"));Z++){var W,re=Q[Z].length==0&&Z!=Q.length-1?" ":Q[Z][0];if(re==="+"||re==="-"||re===" "||re==="\\")L.lines.push(Q[Z]),re==="+"?N++:re==="-"?F++:re===" "&&(N++,F++);else throw new Error("Hunk at line ".concat(M+1," contained invalid line ").concat(Q[Z]))}if(!N&&L.newLines===1&&(L.newLines=0),!F&&L.oldLines===1&&(L.oldLines=0),N!==L.newLines)throw new Error("Added line count did not match for hunk at line "+(M+1));if(F!==L.oldLines)throw new Error("Removed line count did not match for hunk at line "+(M+1));return L}for(;Z<Q.length;)X();return Y}function Fx(G,Q,Y){var Z=!0,X=!1,k=!1,A=1;return function M(){if(Z&&!k){if(X?A++:Z=!1,G+A<=Y)return G+A;k=!0}if(!X)return k||(Z=!0),Q<=G-A?G-A++:(X=!0,M())}}function Lm(G,Q){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof Q=="string"&&(Q=Aa(Q)),Array.isArray(Q)){if(Q.length>1)throw new Error("applyPatch only works with a single input.");Q=Q[0]}(Y.autoConvertLineEndings||Y.autoConvertLineEndings==null)&&(bx(G)&&Dx(Q)?Q=Nm(Q):vx(G)&&Mx(Q)&&(Q=Rm(Q)));var Z=G.split(`
`),X=Q.hunks,k=Y.compareLine||function(Ae,He,Fe,Ue){return He===Ue},A=Y.fuzzFactor||0,M=0;if(A<0||!Number.isInteger(A))throw new Error("fuzzFactor must be a non-negative integer");if(!X.length)return G;for(var H="",B=!1,L=!1,N=0;N<X[X.length-1].lines.length;N++){var F=X[X.length-1].lines[N];F[0]=="\\"&&(H[0]=="+"?B=!0:H[0]=="-"&&(L=!0)),H=F}if(B){if(L){if(!A&&Z[Z.length-1]=="")return!1}else if(Z[Z.length-1]=="")Z.pop();else if(!A)return!1}else if(L){if(Z[Z.length-1]!="")Z.push("");else if(!A)return!1}function W(Ae,He,Fe){for(var Ue=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ft=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],ht=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,Tt=0,vt=!1;Ue<Ae.length;Ue++){var Ot=Ae[Ue],Mt=Ot.length>0?Ot[0]:" ",Ct=Ot.length>0?Ot.substr(1):Ot;if(Mt==="-")if(k(He+1,Z[He],Mt,Ct))He++,Tt=0;else return!Fe||Z[He]==null?null:(ft[ht]=Z[He],W(Ae,He+1,Fe-1,Ue,!1,ft,ht+1));if(Mt==="+"){if(!et)return null;ft[ht]=Ct,ht++,Tt=0,vt=!0}if(Mt===" ")if(Tt++,ft[ht]=Z[He],k(He+1,Z[He],Mt,Ct))ht++,et=!0,vt=!1,He++;else return vt||!Fe?null:Z[He]&&(W(Ae,He+1,Fe-1,Ue+1,!1,ft,ht+1)||W(Ae,He+1,Fe-1,Ue,!1,ft,ht+1))||W(Ae,He,Fe-1,Ue+1,!1,ft,ht)}return ht-=Tt,He-=Tt,ft.length=ht,{patchedLines:ft,oldLineLastI:He-1}}for(var re=[],ee=0,ce=0;ce<X.length;ce++){for(var pe=X[ce],K=void 0,se=Z.length-pe.oldLines+A,ue=void 0,ae=0;ae<=A;ae++){ue=pe.oldStart+ee-1;for(var oe=Fx(ue,M,se);ue!==void 0&&(K=W(pe.lines,ue,ae),!K);ue=oe());if(K)break}if(!K)return!1;for(var fe=M;fe<ue;fe++)re.push(Z[fe]);for(var we=0;we<K.patchedLines.length;we++){var Ee=K.patchedLines[we];re.push(Ee)}M=K.oldLineLastI+1,ee=ue+1-pe.oldStart}for(var Ie=M;Ie<Z.length;Ie++)re.push(Z[Ie]);return re.join(`
`)}function Bx(G,Q){typeof G=="string"&&(G=Aa(G));var Y=0;function Z(){var X=G[Y++];if(!X)return Q.complete();Q.loadFile(X,function(k,A){if(k)return Q.complete(k);var M=Lm(A,X,Q);Q.patched(X,M,function(H){if(H)return Q.complete(H);Z()})})}Z()}function Ia(G,Q,Y,Z,X,k,A){if(A||(A={}),typeof A=="function"&&(A={callback:A}),typeof A.context>"u"&&(A.context=4),A.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(A.callback){var M=A,H=M.callback;pc(Y,Z,vn(vn({},A),{},{callback:function(L){var N=B(L);H(N)}}))}else return B(pc(Y,Z,A));function B(L){if(!L)return;L.push({value:"",lines:[]});function N(we){return we.map(function(Ee){return" "+Ee})}for(var F=[],W=0,re=0,ee=[],ce=1,pe=1,K=function(){var we=L[se],Ee=we.lines||Hx(we.value);if(we.lines=Ee,we.added||we.removed){var Ie;if(!W){var Ae=L[se-1];W=ce,re=pe,Ae&&(ee=A.context>0?N(Ae.lines.slice(-A.context)):[],W-=ee.length,re-=ee.length)}(Ie=ee).push.apply(Ie,Zn(Ee.map(function(ft){return(we.added?"+":"-")+ft}))),we.added?pe+=Ee.length:ce+=Ee.length}else{if(W)if(Ee.length<=A.context*2&&se<L.length-2){var He;(He=ee).push.apply(He,Zn(N(Ee)))}else{var Fe,Ue=Math.min(Ee.length,A.context);(Fe=ee).push.apply(Fe,Zn(N(Ee.slice(0,Ue))));var et={oldStart:W,oldLines:ce-W+Ue,newStart:re,newLines:pe-re+Ue,lines:ee};F.push(et),W=0,re=0,ee=[]}ce+=Ee.length,pe+=Ee.length}},se=0;se<L.length;se++)K();for(var ue=0,ae=F;ue<ae.length;ue++)for(var oe=ae[ue],fe=0;fe<oe.lines.length;fe++)oe.lines[fe].endsWith(`
`)?oe.lines[fe]=oe.lines[fe].slice(0,-1):(oe.lines.splice(fe+1,0,"\\ No newline at end of file"),fe++);return{oldFileName:G,newFileName:Q,oldHeader:X,newHeader:k,hunks:F}}}function Na(G){if(Array.isArray(G))return G.map(Na).join(`
`);var Q=[];G.oldFileName==G.newFileName&&Q.push("Index: "+G.oldFileName),Q.push("==================================================================="),Q.push("--- "+G.oldFileName+(typeof G.oldHeader>"u"?"":"	"+G.oldHeader)),Q.push("+++ "+G.newFileName+(typeof G.newHeader>"u"?"":"	"+G.newHeader));for(var Y=0;Y<G.hunks.length;Y++){var Z=G.hunks[Y];Z.oldLines===0&&(Z.oldStart-=1),Z.newLines===0&&(Z.newStart-=1),Q.push("@@ -"+Z.oldStart+","+Z.oldLines+" +"+Z.newStart+","+Z.newLines+" @@"),Q.push.apply(Q,Z.lines)}return Q.join(`
`)+`
`}function Dm(G,Q,Y,Z,X,k,A){var M;if(typeof A=="function"&&(A={callback:A}),(M=A)!==null&&M!==void 0&&M.callback){var H=A,B=H.callback;Ia(G,Q,Y,Z,X,k,vn(vn({},A),{},{callback:function(N){N?B(Na(N)):B()}}))}else{var L=Ia(G,Q,Y,Z,X,k,A);return L?Na(L):void 0}}function jx(G,Q,Y,Z,X,k){return Dm(G,G,Q,Y,Z,X,k)}function Hx(G){var Q=G.endsWith(`
`),Y=G.split(`
`).map(function(Z){return Z+`
`});return Q?Y.pop():Y.push(Y.pop().slice(0,-1)),Y}function Ux(G,Q){return G.length!==Q.length?!1:gc(G,Q)}function gc(G,Q){if(Q.length>G.length)return!1;for(var Y=0;Y<Q.length;Y++)if(Q[Y]!==G[Y])return!1;return!0}function qx(G){var Q=bc(G.lines),Y=Q.oldLines,Z=Q.newLines;Y!==void 0?G.oldLines=Y:delete G.oldLines,Z!==void 0?G.newLines=Z:delete G.newLines}function $x(G,Q,Y){G=Mm(G,Y),Q=Mm(Q,Y);var Z={};(G.index||Q.index)&&(Z.index=G.index||Q.index),(G.newFileName||Q.newFileName)&&(Fm(G)?Fm(Q)?(Z.oldFileName=Ra(Z,G.oldFileName,Q.oldFileName),Z.newFileName=Ra(Z,G.newFileName,Q.newFileName),Z.oldHeader=Ra(Z,G.oldHeader,Q.oldHeader),Z.newHeader=Ra(Z,G.newHeader,Q.newHeader)):(Z.oldFileName=G.oldFileName,Z.newFileName=G.newFileName,Z.oldHeader=G.oldHeader,Z.newHeader=G.newHeader):(Z.oldFileName=Q.oldFileName||G.oldFileName,Z.newFileName=Q.newFileName||G.newFileName,Z.oldHeader=Q.oldHeader||G.oldHeader,Z.newHeader=Q.newHeader||G.newHeader)),Z.hunks=[];for(var X=0,k=0,A=0,M=0;X<G.hunks.length||k<Q.hunks.length;){var H=G.hunks[X]||{oldStart:1/0},B=Q.hunks[k]||{oldStart:1/0};if(Bm(H,B))Z.hunks.push(jm(H,A)),X++,M+=H.newLines-H.oldLines;else if(Bm(B,H))Z.hunks.push(jm(B,M)),k++,A+=B.newLines-B.oldLines;else{var L={oldStart:Math.min(H.oldStart,B.oldStart),oldLines:0,newStart:Math.min(H.newStart+A,B.oldStart+M),newLines:0,lines:[]};Wx(L,H.oldStart,H.lines,B.oldStart,B.lines),k++,X++,Z.hunks.push(L)}}return Z}function Mm(G,Q){if(typeof G=="string"){if(/^@@/m.test(G)||/^Index:/m.test(G))return Aa(G)[0];if(!Q)throw new Error("Must provide a base reference or pass in a patch");return Ia(void 0,void 0,Q,G)}return G}function Fm(G){return G.newFileName&&G.newFileName!==G.oldFileName}function Ra(G,Q,Y){return Q===Y?Q:(G.conflict=!0,{mine:Q,theirs:Y})}function Bm(G,Q){return G.oldStart<Q.oldStart&&G.oldStart+G.oldLines<Q.oldStart}function jm(G,Q){return{oldStart:G.oldStart,oldLines:G.oldLines,newStart:G.newStart+Q,newLines:G.newLines,lines:G.lines}}function Wx(G,Q,Y,Z,X){var k={offset:Q,lines:Y,index:0},A={offset:Z,lines:X,index:0};for(Um(G,k,A),Um(G,A,k);k.index<k.lines.length&&A.index<A.lines.length;){var M=k.lines[k.index],H=A.lines[A.index];if((M[0]==="-"||M[0]==="+")&&(H[0]==="-"||H[0]==="+"))zx(G,k,A);else if(M[0]==="+"&&H[0]===" "){var B;(B=G.lines).push.apply(B,Zn(Di(k)))}else if(H[0]==="+"&&M[0]===" "){var L;(L=G.lines).push.apply(L,Zn(Di(A)))}else M[0]==="-"&&H[0]===" "?Hm(G,k,A):H[0]==="-"&&M[0]===" "?Hm(G,A,k,!0):M===H?(G.lines.push(M),k.index++,A.index++):_c(G,Di(k),Di(A))}qm(G,k),qm(G,A),qx(G)}function zx(G,Q,Y){var Z=Di(Q),X=Di(Y);if($m(Z)&&$m(X)){if(gc(Z,X)&&Wm(Y,Z,Z.length-X.length)){var k;(k=G.lines).push.apply(k,Zn(Z));return}else if(gc(X,Z)&&Wm(Q,X,X.length-Z.length)){var A;(A=G.lines).push.apply(A,Zn(X));return}}else if(Ux(Z,X)){var M;(M=G.lines).push.apply(M,Zn(Z));return}_c(G,Z,X)}function Hm(G,Q,Y,Z){var X=Di(Q),k=Vx(Y,X);if(k.merged){var A;(A=G.lines).push.apply(A,Zn(k.merged))}else _c(G,Z?k:X,Z?X:k)}function _c(G,Q,Y){G.conflict=!0,G.lines.push({conflict:!0,mine:Q,theirs:Y})}function Um(G,Q,Y){for(;Q.offset<Y.offset&&Q.index<Q.lines.length;){var Z=Q.lines[Q.index++];G.lines.push(Z),Q.offset++}}function qm(G,Q){for(;Q.index<Q.lines.length;){var Y=Q.lines[Q.index++];G.lines.push(Y)}}function Di(G){for(var Q=[],Y=G.lines[G.index][0];G.index<G.lines.length;){var Z=G.lines[G.index];if(Y==="-"&&Z[0]==="+"&&(Y="+"),Y===Z[0])Q.push(Z),G.index++;else break}return Q}function Vx(G,Q){for(var Y=[],Z=[],X=0,k=!1,A=!1;X<Q.length&&G.index<G.lines.length;){var M=G.lines[G.index],H=Q[X];if(H[0]==="+")break;if(k=k||M[0]!==" ",Z.push(H),X++,M[0]==="+")for(A=!0;M[0]==="+";)Y.push(M),M=G.lines[++G.index];H.substr(1)===M.substr(1)?(Y.push(M),G.index++):A=!0}if((Q[X]||"")[0]==="+"&&k&&(A=!0),A)return Y;for(;X<Q.length;)Z.push(Q[X++]);return{merged:Z,changes:Y}}function $m(G){return G.reduce(function(Q,Y){return Q&&Y[0]==="-"},!0)}function Wm(G,Q,Y){for(var Z=0;Z<Y;Z++){var X=Q[Q.length-Y+Z].substr(1);if(G.lines[G.index+Z]!==" "+X)return!1}return G.index+=Y,!0}function bc(G){var Q=0,Y=0;return G.forEach(function(Z){if(typeof Z!="string"){var X=bc(Z.mine),k=bc(Z.theirs);Q!==void 0&&(X.oldLines===k.oldLines?Q+=X.oldLines:Q=void 0),Y!==void 0&&(X.newLines===k.newLines?Y+=X.newLines:Y=void 0)}else Y!==void 0&&(Z[0]==="+"||Z[0]===" ")&&Y++,Q!==void 0&&(Z[0]==="-"||Z[0]===" ")&&Q++}),{oldLines:Q,newLines:Y}}function zm(G){return Array.isArray(G)?G.map(zm).reverse():vn(vn({},G),{},{oldFileName:G.newFileName,oldHeader:G.newHeader,newFileName:G.oldFileName,newHeader:G.oldHeader,hunks:G.hunks.map(function(Q){return{oldLines:Q.newLines,oldStart:Q.newStart,newLines:Q.oldLines,newStart:Q.oldStart,lines:Q.lines.map(function(Y){return Y.startsWith("-")?"+".concat(Y.slice(1)):Y.startsWith("+")?"-".concat(Y.slice(1)):Y})}})})}function Kx(G){for(var Q=[],Y,Z,X=0;X<G.length;X++)Y=G[X],Y.added?Z=1:Y.removed?Z=-1:Z=0,Q.push([Z,Y.value]);return Q}function Gx(G){for(var Q=[],Y=0;Y<G.length;Y++){var Z=G[Y];Z.added?Q.push("<ins>"):Z.removed&&Q.push("<del>"),Q.push(Jx(Z.value)),Z.added?Q.push("</ins>"):Z.removed&&Q.push("</del>")}return Q.join("")}function Jx(G){var Q=G;return Q=Q.replace(/&/g,"&amp;"),Q=Q.replace(/</g,"&lt;"),Q=Q.replace(/>/g,"&gt;"),Q=Q.replace(/"/g,"&quot;"),Q}var Yx=C(z()),Xx=C($()),Qx=C(ge()),Zx=C(j()),eE=C(ie()),tE=C(Se()),rE=C(Le()),nE=C(pt()),iE=C(Bt(),1),{program:sE,createCommand:c3,createArgument:l3,createOption:u3,CommanderError:d3,InvalidArgumentError:h3,InvalidOptionArgumentError:p3,Command:f3,Argument:m3,Option:g3,Help:_3}=iE.default,aE=C(ur()),oE=C(PS()),cE=C(XS());C(QS(),1);var lE=C(gm(),1),uE=C(_m(),1),dE=C(vm(),1),hE=C(rx(),1),pE=dE.default,fE=px.default,mE=fx.default,gE=ym,_E=Yx.default,bE=Zx.default,vE=hx(),wE=vE,yE=eE.default,SE=tE.default,xE=rE.default,EE=aE.default,OE=cE.default,TE=pE,CE=hE.default,PE=lE.default,kE=uE.default;/*! Bundled license information:

	progress/lib/node-progress.js:
	  (*!
	   * node-progress
	   * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
	   * MIT Licensed
	   *)
	*/return Tc}var Cc,Zm;function Ar(){if(Zm)return Cc;Zm=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(p,O)=>{for(var z in O)t(p,z,{get:O[z],enumerable:!0})},V=(p,O,z,$)=>{if(O&&typeof O=="object"||typeof O=="function")for(let q of i(O))!E.call(p,q)&&q!==z&&t(p,q,{get:()=>O[q],enumerable:!($=r(O,q))||$.enumerable});return p},te=p=>V(t({},"__esModule",{value:!0}),p),P={};R(P,{HttpsProxyAgent:()=>u,PNG:()=>s,SocksProxyAgent:()=>h,colors:()=>e,debug:()=>U,diff:()=>C,dotenv:()=>w,getProxyForUrl:()=>g,jpegjs:()=>_,lockfile:()=>f,mime:()=>d,minimatch:()=>v,ms:()=>b,open:()=>a,program:()=>n,progress:()=>o,ws:()=>c,wsReceiver:()=>x,wsSender:()=>T,wsServer:()=>l,yaml:()=>m}),Cc=te(P);const e=Yr().colors,U=Yr().debug,C=Yr().diff,w=Yr().dotenv,g=Yr().getProxyForUrl,u=Yr().HttpsProxyAgent,_=Yr().jpegjs,f=Yr().lockfile,d=Yr().mime,v=Yr().minimatch,a=Yr().open,s=Yr().PNG,n=Yr().program,o=Yr().progress,h=Yr().SocksProxyAgent,m=Yr().yaml,c=Yr().ws,l=Yr().wsServer,x=Yr().wsReceiver,T=Yr().wsSender;function b(p){if(!isFinite(p))return"-";if(p===0)return"0ms";if(p<1e3)return p.toFixed(0)+"ms";const O=p/1e3;if(O<60)return O.toFixed(1)+"s";const z=O/60;if(z<60)return z.toFixed(1)+"m";const $=z/60;return $<24?$.toFixed(1)+"h":($/24).toFixed(1)+"d"}return Cc}var Pc,eg;function Mr(){if(eg)return Pc;eg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(s,n)=>{for(var o in n)i(s,o,{get:n[o],enumerable:!0})},e=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of R(n))!te.call(s,m)&&m!==o&&i(s,m,{get:()=>n[m],enumerable:!(h=E(n,m))||h.enumerable});return s},U=(s,n,o)=>(o=s!=null?r(V(s)):{},e(!s||!s.__esModule?i(o,"default",{value:s,enumerable:!0}):o,s)),C=s=>e(i({},"__esModule",{value:!0}),s),w={};P(w,{RecentLogsCollector:()=>a,debugLogger:()=>d}),Pc=C(w);var g=U(Je),u=Ar();const _={api:45,protocol:34,install:34,download:34,browser:0,socks:92,"client-certificates":92,error:160,channel:33,server:45,"server:channel":34,"server:metadata":33,recorder:45};class f{constructor(){if(this._debuggers=new Map,t.DEBUG_FILE){const n=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g"),o=g.default.createWriteStream(t.DEBUG_FILE);u.debug.log=h=>{o.write(h.replace(n,"")),o.write(`
`)}}}log(n,o){let h=this._debuggers.get(n);h||(h=(0,u.debug)(`pw:${n}`),this._debuggers.set(n,h),h.color=_[n]||0),h(o)}isEnabled(n){return u.debug.enabled(`pw:${n}`)}}const d=new f,v=150;class a{constructor(){this._logs=[],this._listeners=[]}log(n){this._logs.push(n),this._logs.length===v*2&&this._logs.splice(0,v);for(const o of this._listeners)o(n)}recentLogs(){return this._logs.length>v?this._logs.slice(-v):this._logs}onMessage(n){for(const o of this._logs)n(o);this._listeners.push(n)}}return Pc}var kc,tg;function pn(){if(tg)return kc;tg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(a,s)=>{for(var n in s)t(a,n,{get:s[n],enumerable:!0})},V=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of i(s))!E.call(a,h)&&h!==n&&t(a,h,{get:()=>s[h],enumerable:!(o=r(s,h))||o.enumerable});return a},te=a=>V(t({},"__esModule",{value:!0}),a),P={};R(P,{captureRawStack:()=>e,parseErrorStack:()=>u,parseStackFrame:()=>U,rewriteErrorMessage:()=>C,splitErrorMessage:()=>g,stringifyStackFrames:()=>w}),kc=te(P);function e(){const a=Error.stackTraceLimit;Error.stackTraceLimit=50;const n=new Error().stack||"";return Error.stackTraceLimit=a,n.split(`
`)}function U(a,s,n){const o=a&&a.match(f);if(!o)return null;let h=o[2],m=o[7];if(!m||!n&&(m.startsWith("internal")||m.startsWith("node:")))return null;const c=o[8],l=o[9],x=o[11]===")",T={file:"",line:0,column:0};if(c&&(T.line=Number(c)),l&&(T.column=Number(l)),x&&m){let b=0;for(let p=m.length-1;p>0;p--)if(m.charAt(p)===")")b++;else if(m.charAt(p)==="("&&m.charAt(p-1)===" "&&(b--,b===-1&&m.charAt(p-1)===" ")){const O=m.slice(0,p-1);m=m.slice(p+1),h+=` (${O}`;break}}if(h){const b=h.match(d);b&&(h=b[1])}return m&&(m.startsWith("file://")&&(m=v(m,s)),T.file=m),h&&(T.function=h),T}function C(a,s){var h;const n=(((h=a.stack)==null?void 0:h.split(`
`))||[]).filter(m=>m.startsWith("    at "));a.message=s;const o=`${a.name}: ${a.message}`;return n.length&&(a.stack=`${o}
${n.join(`
`)}`),a}function w(a){const s=[];for(const n of a)n.function?s.push(`    at ${n.function} (${n.file}:${n.line}:${n.column})`):s.push(`    at ${n.file}:${n.line}:${n.column}`);return s}function g(a){const s=a.indexOf(":");return{name:s!==-1?a.slice(0,s):"",message:s!==-1&&s+2<=a.length?a.substring(s+2):a}}function u(a,s,n=!1){const o=a.split(`
`);let h=o.findIndex(x=>x.startsWith("    at "));h===-1&&(h=o.length);const m=o.slice(0,h).join(`
`),c=o.slice(h);let l;for(const x of c){const T=U(x,s,n);if(!(!T||!T.file)&&!_(T.file,s)){l={file:T.file,column:T.column||0,line:T.line||0};break}}return{message:m,stackLines:c,location:l}}function _(a,s){return a.includes(`${s}node_modules${s}`)}const f=new RegExp("^(?:\\s*at )?(?:(new) )?(?:(.*?) \\()?(?:eval at ([^ ]+) \\((.+?):(\\d+):(\\d+)\\), )?(?:(.+?):(\\d+):(\\d+)|(native))(\\)?)$"),d=/^(.*?) \[as (.*?)\]$/;function v(a,s){if(!a.startsWith("file://"))return a;let n=decodeURIComponent(a.slice(7));return n.startsWith("/")&&/^[a-zA-Z]:/.test(n.slice(1))&&(n=n.slice(1)),n.replace(/\//g,s)}return kc}var Ac,rg;function Fr(){if(rg)return Ac;rg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{LongStandingScope:()=>C,ManualPromise:()=>U}),Ac=te(P);var e=pn();class U extends Promise{constructor(){let u,_;super((f,d)=>{u=f,_=d}),this._isDone=!1,this._resolve=u,this._reject=_}isDone(){return this._isDone}resolve(u){this._isDone=!0,this._resolve(u)}reject(u){this._isDone=!0,this._reject(u)}static get[Symbol.species](){return Promise}get[Symbol.toStringTag](){return"ManualPromise"}}class C{constructor(){this._terminatePromises=new Map,this._isClosed=!1}reject(u){this._isClosed=!0,this._terminateError=u;for(const _ of this._terminatePromises.keys())_.resolve(u)}close(u){this._isClosed=!0,this._closeError=u;for(const[_,f]of this._terminatePromises)_.resolve(w(u,f))}isClosed(){return this._isClosed}static async raceMultiple(u,_){return Promise.race(u.map(f=>f.race(_)))}async race(u){return this._race(Array.isArray(u)?u:[u],!1)}async safeRace(u,_){return this._race([u],!0,_)}async _race(u,_,f){const d=new U,v=(0,e.captureRawStack)();this._terminateError&&d.resolve(this._terminateError),this._closeError&&d.resolve(w(this._closeError,v)),this._terminatePromises.set(d,v);try{return await Promise.race([d.then(a=>_?f:Promise.reject(a)),...u])}finally{this._terminatePromises.delete(d)}}}function w(g,u){const _=new Error;return _.name=g.name,_.message=g.message,_.stack=[g.name+":"+g.message,...u].join(`
`),_}return Ac}var Ic,ng;function Ww(){if(ng)return Ic;ng=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},P=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!V.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},e=(d,v,a)=>(a=d!=null?t(R(d)):{},P(!d||!d.__esModule?r(a,"default",{value:d,enumerable:!0}):a,d)),U=d=>P(r({},"__esModule",{value:!0}),d),C={};te(C,{getLinuxDistributionInfoSync:()=>_}),Ic=U(C);var w=e(Je);let g=!1,u;function _(){if(process.platform==="linux"){if(!u&&!g)try{const d=w.default.readFileSync("/etc/os-release","utf8"),v=f(d);u={id:v.get("id")??"",version:v.get("version_id")??""}}catch{g=!0}return u}}function f(d){const v=new Map;for(const a of d.split(`
`)){const s=a.split("="),n=s.shift();let o=s.join("=").trim();o.startsWith('"')&&o.endsWith('"')&&(o=o.substring(1,o.length-1)),n&&v.set(n.toLowerCase(),o)}return v}return Ic}const tO="1.54.1",zw={version:tO};var Nc,ig;function xi(){if(ig)return Nc;ig=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(n,o)=>{for(var h in o)i(n,h,{get:o[h],enumerable:!0})},e=(n,o,h,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of R(o))!te.call(n,c)&&c!==h&&i(n,c,{get:()=>o[c],enumerable:!(m=E(o,c))||m.enumerable});return n},U=(n,o,h)=>(h=n!=null?r(V(n)):{},e(!n||!n.__esModule?i(h,"default",{value:n,enumerable:!0}):h,n)),C=n=>e(i({},"__esModule",{value:!0}),n),w={};P(w,{getEmbedderName:()=>a,getPlaywrightVersion:()=>s,getUserAgent:()=>d}),Nc=C(w);var g=Je,u=U(Je),_=Ww();let f;function d(){if(f)return f;try{f=v()}catch{f="Playwright/unknown"}return f}function v(){let n="unknown",o="unknown";if(process.platform==="win32"){const x=u.default.release().split(".");n="windows",o=`${x[0]}.${x[1]}`}else if(process.platform==="darwin"){const x=(0,g.execSync)("sw_vers -productVersion",{stdio:["ignore","pipe","ignore"]}).toString().trim().split(".");n="macOS",o=`${x[0]}.${x[1]}`}else if(process.platform==="linux"){const x=(0,_.getLinuxDistributionInfoSync)();x?(n=x.id||"linux",o=x.version||"unknown"):n="linux"}const h=[];t.CI&&h.push("CI/1");const m=h.length?" "+h.join(" "):"",{embedderName:c,embedderVersion:l}=a();return`Playwright/${s()} (${u.default.arch()}; ${n} ${o}) ${c}/${l}${m}`}function a(){let n="unknown",o="unknown";return t.PW_LANG_NAME?["node","python","java","csharp"].includes(t.PW_LANG_NAME)&&(n=t.PW_LANG_NAME,o=t.PW_LANG_NAME_VERSION??"unknown"):(n="node",o=process.version.substring(1).split(".").slice(0,2).join(".")),{embedderName:n,embedderVersion:o}}function s(n=!1){const o=t.PW_VERSION_OVERRIDE||zw.version;return n?o.split(".").slice(0,2).join("."):o}return Nc}var Rc,sg;function Lc(){if(sg)return Rc;sg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(_e,ge)=>()=>(ge||_e((ge={exports:{}}).exports,ge),ge.exports),e=(_e,ge)=>{for(var ne in ge)i(_e,ne,{get:ge[ne],enumerable:!0})},U=(_e,ge,ne,S)=>{if(ge&&typeof ge=="object"||typeof ge=="function")for(let j of R(ge))!te.call(_e,j)&&j!==ne&&i(_e,j,{get:()=>ge[j],enumerable:!(S=E(ge,j))||S.enumerable});return _e},C=(_e,ge,ne)=>(ne=_e!=null?r(V(_e)):{},U(!_e||!_e.__esModule?i(ne,"default",{value:_e,enumerable:!0}):ne,_e)),w=_e=>U(i({},"__esModule",{value:!0}),_e),g=P((_e,ge)=>{var ne=Ns().Buffer,S=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(S=new Int32Array(S));function j(ie){if(ne.isBuffer(ie))return ie;var he=typeof ne.alloc=="function"&&typeof ne.from=="function";if(typeof ie=="number")return he?ne.alloc(ie):new ne(ie);if(typeof ie=="string")return he?ne.from(ie):new ne(ie);throw new Error("input must be buffer, number, or string, received "+typeof ie)}function y(ie){var he=j(4);return he.writeInt32BE(ie,0),he}function I(ie,he){ie=j(ie),ne.isBuffer(he)&&(he=he.readUInt32BE(0));for(var me=~~he^-1,ye=0;ye<ie.length;ye++)me=S[(me^ie[ye])&255]^me>>>8;return me^-1}function D(){return y(I.apply(null,arguments))}D.signed=function(){return I.apply(null,arguments)},D.unsigned=function(){return I.apply(null,arguments)>>>0},ge.exports=D}),u=P(_e=>{var ge=Je,ne=Je.Transform,S=Je.PassThrough,j=Je,y=Je,I=Vr().EventEmitter,D=g();_e.ZipFile=ie,_e.dateToDosDateTime=Ke,y.inherits(ie,I);function ie(){this.outputStream=new S,this.entries=[],this.outputStreamCursor=0,this.ended=!1,this.allDone=!1,this.forceZip64Eocd=!1}ie.prototype.addFile=function(Ve,ct,lt){var It=this;ct=Ge(ct,!1),lt==null&&(lt={});var Bt=new dt(ct,!1,lt);It.entries.push(Bt),ge.stat(Ve,function(hr,ur){if(hr)return It.emit("error",hr);if(!ur.isFile())return It.emit("error",new Error("not a file: "+Ve));Bt.uncompressedSize=ur.size,lt.mtime==null&&Bt.setLastModDate(ur.mtime),lt.mode==null&&Bt.setFileAttributesMode(ur.mode),Bt.setFileDataPumpFunction(function(){var Sr=ge.createReadStream(Ve);Bt.state=dt.FILE_DATA_IN_PROGRESS,Sr.on("error",function(Rr){It.emit("error",Rr)}),ye(It,Bt,Sr)}),Se(It)})},ie.prototype.addReadStream=function(Ve,ct,lt){var It=this;ct=Ge(ct,!1),lt==null&&(lt={});var Bt=new dt(ct,!1,lt);It.entries.push(Bt),Bt.setFileDataPumpFunction(function(){Bt.state=dt.FILE_DATA_IN_PROGRESS,ye(It,Bt,Ve)}),Se(It)},ie.prototype.addBuffer=function(Ve,ct,lt){var It=this;if(ct=Ge(ct,!1),Ve.length>1073741823)throw new Error("buffer too large: "+Ve.length+" > 1073741823");if(lt==null&&(lt={}),lt.size!=null)throw new Error("options.size not allowed");var Bt=new dt(ct,!1,lt);Bt.uncompressedSize=Ve.length,Bt.crc32=D.unsigned(Ve),Bt.crcAndFileSizeKnown=!0,It.entries.push(Bt),Bt.compress?j.deflateRaw(Ve,function(ur,Sr){hr(Sr)}):hr(Ve);function hr(ur){Bt.compressedSize=ur.length,Bt.setFileDataPumpFunction(function(){me(It,ur),me(It,Bt.getDataDescriptor()),Bt.state=dt.FILE_DATA_DONE,setImmediate(function(){Se(It)})}),Se(It)}},ie.prototype.addEmptyDirectory=function(Ve,ct){var lt=this;if(Ve=Ge(Ve,!0),ct==null&&(ct={}),ct.size!=null)throw new Error("options.size not allowed");if(ct.compress!=null)throw new Error("options.compress not allowed");var It=new dt(Ve,!0,ct);lt.entries.push(It),It.setFileDataPumpFunction(function(){me(lt,It.getDataDescriptor()),It.state=dt.FILE_DATA_DONE,Se(lt)}),Se(lt)};var he=Rt([80,75,5,6]);ie.prototype.end=function(Ve,ct){if(typeof Ve=="function"&&(ct=Ve,Ve=null),Ve==null&&(Ve={}),!this.ended){if(this.ended=!0,this.finalSizeCallback=ct,this.forceZip64Eocd=!!Ve.forceZip64Format,Ve.comment){if(typeof Ve.comment=="string"?this.comment=Et(Ve.comment):this.comment=Ve.comment,this.comment.length>65535)throw new Error("comment is too large");if(Kt(this.comment,he))throw new Error("comment contains end of central directory record signature")}else this.comment=ot;Se(this)}};function me(Ve,ct){Ve.outputStream.write(ct),Ve.outputStreamCursor+=ct.length}function ye(Ve,ct,lt){var It=new Be,Bt=new Re,hr=ct.compress?new j.DeflateRaw:new S,ur=new Re;lt.pipe(It).pipe(Bt).pipe(hr).pipe(ur).pipe(Ve.outputStream,{end:!1}),ur.on("end",function(){if(ct.crc32=It.crc32,ct.uncompressedSize==null)ct.uncompressedSize=Bt.byteCount;else if(ct.uncompressedSize!==Bt.byteCount)return Ve.emit("error",new Error("file data stream has unexpected number of bytes"));ct.compressedSize=ur.byteCount,Ve.outputStreamCursor+=ct.compressedSize,me(Ve,ct.getDataDescriptor()),ct.state=dt.FILE_DATA_DONE,Se(Ve)})}function Se(Ve){if(Ve.allDone)return;if(Ve.ended&&Ve.finalSizeCallback!=null){var ct=Oe(Ve);ct!=null&&(Ve.finalSizeCallback(ct),Ve.finalSizeCallback=null)}var lt=It();function It(){for(var hr=0;hr<Ve.entries.length;hr++){var ur=Ve.entries[hr];if(ur.state<dt.FILE_DATA_DONE)return ur}return null}if(lt!=null){if(lt.state<dt.READY_TO_PUMP_FILE_DATA||lt.state===dt.FILE_DATA_IN_PROGRESS)return;lt.relativeOffsetOfLocalHeader=Ve.outputStreamCursor;var Bt=lt.getLocalFileHeader();me(Ve,Bt),lt.doFileDataPump()}else Ve.ended&&(Ve.offsetOfStartOfCentralDirectory=Ve.outputStreamCursor,Ve.entries.forEach(function(hr){var ur=hr.getCentralDirectoryRecord();me(Ve,ur)}),me(Ve,qe(Ve)),Ve.outputStream.end(),Ve.allDone=!0)}function Oe(Ve){for(var ct=0,lt=0,It=0;It<Ve.entries.length;It++){var Bt=Ve.entries[It];if(Bt.compress)return-1;if(Bt.state>=dt.READY_TO_PUMP_FILE_DATA){if(Bt.uncompressedSize==null)return-1}else if(Bt.uncompressedSize==null)return null;Bt.relativeOffsetOfLocalHeader=ct;var hr=Bt.useZip64Format();ct+=yt+Bt.utf8FileName.length,ct+=Bt.uncompressedSize,Bt.crcAndFileSizeKnown||(hr?ct+=be:ct+=xe),lt+=ve+Bt.utf8FileName.length+Bt.fileComment.length,hr&&(lt+=Ce)}var ur=0;return(Ve.forceZip64Eocd||Ve.entries.length>=65535||lt>=65535||ct>=4294967295)&&(ur+=Pe+Ne),ur+=Le+Ve.comment.length,ct+lt+ur}var Pe=56,Ne=20,Le=22;function qe(Ve,ct){var lt=!1,It=Ve.entries.length;(Ve.forceZip64Eocd||Ve.entries.length>=65535)&&(It=65535,lt=!0);var Bt=Ve.outputStreamCursor-Ve.offsetOfStartOfCentralDirectory,hr=Bt;(Ve.forceZip64Eocd||Bt>=4294967295)&&(hr=4294967295,lt=!0);var ur=Ve.offsetOfStartOfCentralDirectory;(Ve.forceZip64Eocd||Ve.offsetOfStartOfCentralDirectory>=4294967295)&&(ur=4294967295,lt=!0);var Sr=pt(Le+Ve.comment.length);if(Sr.writeUInt32LE(101010256,0),Sr.writeUInt16LE(0,4),Sr.writeUInt16LE(0,6),Sr.writeUInt16LE(It,8),Sr.writeUInt16LE(It,10),Sr.writeUInt32LE(hr,12),Sr.writeUInt32LE(ur,16),Sr.writeUInt16LE(Ve.comment.length,20),Ve.comment.copy(Sr,22),!lt)return Sr;var Rr=pt(Pe);Rr.writeUInt32LE(101075792,0),ze(Rr,Pe-12,4),Rr.writeUInt16LE(Ut,12),Rr.writeUInt16LE(gt,14),Rr.writeUInt32LE(0,16),Rr.writeUInt32LE(0,20),ze(Rr,Ve.entries.length,24),ze(Rr,Ve.entries.length,32),ze(Rr,Bt,40),ze(Rr,Ve.offsetOfStartOfCentralDirectory,48);var On=pt(Ne);return On.writeUInt32LE(117853008,0),On.writeUInt32LE(0,4),ze(On,Ve.outputStreamCursor,8),On.writeUInt32LE(1,16),Buffer.concat([Rr,On,Sr])}function Ge(Ve,ct){if(Ve==="")throw new Error("empty metadataPath");if(Ve=Ve.replace(/\\/g,"/"),/^[a-zA-Z]:/.test(Ve)||/^\//.test(Ve))throw new Error("absolute path: "+Ve);if(Ve.split("/").indexOf("..")!==-1)throw new Error("invalid relative path: "+Ve);var lt=/\/$/.test(Ve);if(ct)lt||(Ve+="/");else if(lt)throw new Error("file path cannot end with '/': "+Ve);return Ve}var ot=pt(0);function dt(Ve,ct,lt){if(this.utf8FileName=Rt(Ve),this.utf8FileName.length>65535)throw new Error("utf8 file name too long. "+utf8FileName.length+" > 65535");if(this.isDirectory=ct,this.state=dt.WAITING_FOR_METADATA,this.setLastModDate(lt.mtime!=null?lt.mtime:new Date),lt.mode!=null?this.setFileAttributesMode(lt.mode):this.setFileAttributesMode(ct?16893:33204),ct?(this.crcAndFileSizeKnown=!0,this.crc32=0,this.uncompressedSize=0,this.compressedSize=0):(this.crcAndFileSizeKnown=!1,this.crc32=null,this.uncompressedSize=null,this.compressedSize=null,lt.size!=null&&(this.uncompressedSize=lt.size)),ct?this.compress=!1:(this.compress=!0,lt.compress!=null&&(this.compress=!!lt.compress)),this.forceZip64Format=!!lt.forceZip64Format,lt.fileComment){if(typeof lt.fileComment=="string"?this.fileComment=Rt(lt.fileComment,"utf-8"):this.fileComment=lt.fileComment,this.fileComment.length>65535)throw new Error("fileComment is too large")}else this.fileComment=ot}dt.WAITING_FOR_METADATA=0,dt.READY_TO_PUMP_FILE_DATA=1,dt.FILE_DATA_IN_PROGRESS=2,dt.FILE_DATA_DONE=3,dt.prototype.setLastModDate=function(Ve){var ct=Ke(Ve);this.lastModFileTime=ct.time,this.lastModFileDate=ct.date},dt.prototype.setFileAttributesMode=function(Ve){if((Ve&65535)!==Ve)throw new Error("invalid mode. expected: 0 <= "+Ve+" <= 65535");this.externalFileAttributes=Ve<<16>>>0},dt.prototype.setFileDataPumpFunction=function(Ve){this.doFileDataPump=Ve,this.state=dt.READY_TO_PUMP_FILE_DATA},dt.prototype.useZip64Format=function(){return this.forceZip64Format||this.uncompressedSize!=null&&this.uncompressedSize>4294967294||this.compressedSize!=null&&this.compressedSize>4294967294||this.relativeOffsetOfLocalHeader!=null&&this.relativeOffsetOfLocalHeader>4294967294};var yt=30,nt=20,gt=45,Ut=831,Xt=2048,st=8;dt.prototype.getLocalFileHeader=function(){var Ve=0,ct=0,lt=0;this.crcAndFileSizeKnown&&(Ve=this.crc32,ct=this.compressedSize,lt=this.uncompressedSize);var It=pt(yt),Bt=Xt;return this.crcAndFileSizeKnown||(Bt|=st),It.writeUInt32LE(67324752,0),It.writeUInt16LE(nt,4),It.writeUInt16LE(Bt,6),It.writeUInt16LE(this.getCompressionMethod(),8),It.writeUInt16LE(this.lastModFileTime,10),It.writeUInt16LE(this.lastModFileDate,12),It.writeUInt32LE(Ve,14),It.writeUInt32LE(ct,18),It.writeUInt32LE(lt,22),It.writeUInt16LE(this.utf8FileName.length,26),It.writeUInt16LE(0,28),Buffer.concat([It,this.utf8FileName])};var xe=16,be=24;dt.prototype.getDataDescriptor=function(){if(this.crcAndFileSizeKnown)return ot;if(this.useZip64Format()){var Ve=pt(be);return Ve.writeUInt32LE(134695760,0),Ve.writeUInt32LE(this.crc32,4),ze(Ve,this.compressedSize,8),ze(Ve,this.uncompressedSize,16),Ve}else{var Ve=pt(xe);return Ve.writeUInt32LE(134695760,0),Ve.writeUInt32LE(this.crc32,4),Ve.writeUInt32LE(this.compressedSize,8),Ve.writeUInt32LE(this.uncompressedSize,12),Ve}};var ve=46,Ce=28;dt.prototype.getCentralDirectoryRecord=function(){var Ve=pt(ve),ct=Xt;this.crcAndFileSizeKnown||(ct|=st);var lt=this.compressedSize,It=this.uncompressedSize,Bt=this.relativeOffsetOfLocalHeader,hr,ur;return this.useZip64Format()?(lt=4294967295,It=4294967295,Bt=4294967295,hr=gt,ur=pt(Ce),ur.writeUInt16LE(1,0),ur.writeUInt16LE(Ce-4,2),ze(ur,this.uncompressedSize,4),ze(ur,this.compressedSize,12),ze(ur,this.relativeOffsetOfLocalHeader,20)):(hr=nt,ur=ot),Ve.writeUInt32LE(33639248,0),Ve.writeUInt16LE(Ut,4),Ve.writeUInt16LE(hr,6),Ve.writeUInt16LE(ct,8),Ve.writeUInt16LE(this.getCompressionMethod(),10),Ve.writeUInt16LE(this.lastModFileTime,12),Ve.writeUInt16LE(this.lastModFileDate,14),Ve.writeUInt32LE(this.crc32,16),Ve.writeUInt32LE(lt,20),Ve.writeUInt32LE(It,24),Ve.writeUInt16LE(this.utf8FileName.length,28),Ve.writeUInt16LE(ur.length,30),Ve.writeUInt16LE(this.fileComment.length,32),Ve.writeUInt16LE(0,34),Ve.writeUInt16LE(0,36),Ve.writeUInt32LE(this.externalFileAttributes,38),Ve.writeUInt32LE(Bt,42),Buffer.concat([Ve,this.utf8FileName,ur,this.fileComment])},dt.prototype.getCompressionMethod=function(){var Ve=0,ct=8;return this.compress?ct:Ve};function Ke(Ve){var ct=0;ct|=Ve.getDate()&31,ct|=(Ve.getMonth()+1&15)<<5,ct|=(Ve.getFullYear()-1980&127)<<9;var lt=0;return lt|=Math.floor(Ve.getSeconds()/2),lt|=(Ve.getMinutes()&63)<<5,lt|=(Ve.getHours()&31)<<11,{date:ct,time:lt}}function ze(Ve,ct,lt){var It=Math.floor(ct/4294967296),Bt=ct%4294967296;Ve.writeUInt32LE(Bt,lt),Ve.writeUInt32LE(It,lt+4)}y.inherits(Re,ne);function Re(Ve){ne.call(this,Ve),this.byteCount=0}Re.prototype._transform=function(Ve,ct,lt){this.byteCount+=Ve.length,lt(null,Ve)},y.inherits(Be,ne);function Be(Ve){ne.call(this,Ve),this.crc32=0}Be.prototype._transform=function(Ve,ct,lt){this.crc32=D.unsigned(Ve,this.crc32),lt(null,Ve)};var it="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";if(it.length!==256)throw new Error("assertion failure");var Qe=null;function Et(Ve){if(/^[\x20-\x7e]*$/.test(Ve))return Rt(Ve,"utf-8");if(Qe==null){Qe={};for(var ct=0;ct<it.length;ct++)Qe[it[ct]]=ct}for(var lt=pt(Ve.length),ct=0;ct<Ve.length;ct++){var It=Qe[Ve[ct]];if(It==null)throw new Error("character not encodable in CP437: "+JSON.stringify(Ve[ct]));lt[ct]=It}return lt}function pt(Ve){pt=ct;try{return pt(Ve)}catch{return pt=lt,pt(Ve)}function ct(It){return Buffer.allocUnsafe(It)}function lt(It){return new Buffer(It)}}function Rt(Ve,ct){Rt=lt;try{return Rt(Ve,ct)}catch{return Rt=It,Rt(Ve,ct)}function lt(Bt,hr){return Buffer.from(Bt,hr)}function It(Bt,hr){return new Buffer(Bt,hr)}}function Kt(Ve,ct){Kt=lt;try{return Kt(Ve,ct)}catch{return Kt=It,Kt(Ve,ct)}function lt(Bt,hr){return Bt.includes(hr)}function It(Bt,hr){for(var ur=0;ur<=Bt.length-hr.length;ur++)for(var Sr=0;;Sr++){if(Sr===hr.length)return!0;if(Bt[ur+Sr]!==hr[Sr])break}return!1}}}),_=P((_e,ge)=>{ge.exports=ne;function ne(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}ne.prototype.go=function(y){this.pending<this.max?j(this,y):this.waiting.push(y)},ne.prototype.wait=function(y){this.pending===0?y(this.error):this.listeners.push(y)},ne.prototype.hold=function(){return S(this)};function S(y){y.pending+=1;var I=!1;return D;function D(he){if(I)throw new Error("callback called twice");if(I=!0,y.error=y.error||he,y.pending-=1,y.waiting.length>0&&y.pending<y.max)j(y,y.waiting.shift());else if(y.pending===0){var me=y.listeners;y.listeners=[],me.forEach(ie)}}function ie(he){he(y.error)}}function j(y,I){I(S(y))}}),f=P(_e=>{var ge=Je,ne=Je,S=Je,j=S.Readable,y=S.Writable,I=S.PassThrough,D=_(),ie=Vr().EventEmitter;_e.createFromBuffer=Oe,_e.createFromFd=Pe,_e.BufferSlicer=Se,_e.FdSlicer=he,ne.inherits(he,ie);function he(Ne,Le){Le=Le||{},ie.call(this),this.fd=Ne,this.pend=new D,this.pend.max=1,this.refCount=0,this.autoClose=!!Le.autoClose}he.prototype.read=function(Ne,Le,qe,Ge,ot){var dt=this;dt.pend.go(function(yt){ge.read(dt.fd,Ne,Le,qe,Ge,function(nt,gt,Ut){yt(),ot(nt,gt,Ut)})})},he.prototype.write=function(Ne,Le,qe,Ge,ot){var dt=this;dt.pend.go(function(yt){ge.write(dt.fd,Ne,Le,qe,Ge,function(nt,gt,Ut){yt(),ot(nt,gt,Ut)})})},he.prototype.createReadStream=function(Ne){return new me(this,Ne)},he.prototype.createWriteStream=function(Ne){return new ye(this,Ne)},he.prototype.ref=function(){this.refCount+=1},he.prototype.unref=function(){var Ne=this;if(Ne.refCount-=1,Ne.refCount>0)return;if(Ne.refCount<0)throw new Error("invalid unref");Ne.autoClose&&ge.close(Ne.fd,Le);function Le(qe){qe?Ne.emit("error",qe):Ne.emit("close")}},ne.inherits(me,j);function me(Ne,Le){Le=Le||{},j.call(this,Le),this.context=Ne,this.context.ref(),this.start=Le.start||0,this.endOffset=Le.end,this.pos=this.start,this.destroyed=!1}me.prototype._read=function(Ne){var Le=this;if(!Le.destroyed){var qe=Math.min(Le._readableState.highWaterMark,Ne);if(Le.endOffset!=null&&(qe=Math.min(qe,Le.endOffset-Le.pos)),qe<=0){Le.destroyed=!0,Le.push(null),Le.context.unref();return}Le.context.pend.go(function(Ge){if(Le.destroyed)return Ge();var ot=Buffer.allocUnsafe(qe);ge.read(Le.context.fd,ot,0,qe,Le.pos,function(dt,yt){dt?Le.destroy(dt):yt===0?(Le.destroyed=!0,Le.push(null),Le.context.unref()):(Le.pos+=yt,Le.push(ot.slice(0,yt))),Ge()})})}},me.prototype.destroy=function(Ne){this.destroyed||(Ne=Ne||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",Ne),this.context.unref())},ne.inherits(ye,y);function ye(Ne,Le){Le=Le||{},y.call(this,Le),this.context=Ne,this.context.ref(),this.start=Le.start||0,this.endOffset=Le.end==null?1/0:+Le.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}ye.prototype._write=function(Ne,Le,qe){var Ge=this;if(!Ge.destroyed){if(Ge.pos+Ne.length>Ge.endOffset){var ot=new Error("maximum file length exceeded");ot.code="ETOOBIG",Ge.destroy(),qe(ot);return}Ge.context.pend.go(function(dt){if(Ge.destroyed)return dt();ge.write(Ge.context.fd,Ne,0,Ne.length,Ge.pos,function(yt,nt){yt?(Ge.destroy(),dt(),qe(yt)):(Ge.bytesWritten+=nt,Ge.pos+=nt,Ge.emit("progress"),dt(),qe())})})}},ye.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},ne.inherits(Se,ie);function Se(Ne,Le){ie.call(this),Le=Le||{},this.refCount=0,this.buffer=Ne,this.maxChunkSize=Le.maxChunkSize||Number.MAX_SAFE_INTEGER}Se.prototype.read=function(Ne,Le,qe,Ge,ot){if(!(0<=Le&&Le<=Ne.length))throw new RangeError("offset outside buffer: 0 <= "+Le+" <= "+Ne.length);if(Ge<0)throw new RangeError("position is negative: "+Ge);if(Le+qe>Ne.length&&(qe=Ne.length-Le),Ge+qe>this.buffer.length&&(qe=this.buffer.length-Ge),qe<=0){setImmediate(function(){ot(null,0)});return}this.buffer.copy(Ne,Le,Ge,Ge+qe),setImmediate(function(){ot(null,qe)})},Se.prototype.write=function(Ne,Le,qe,Ge,ot){Ne.copy(this.buffer,Ge,Le,Le+qe),setImmediate(function(){ot(null,qe,Ne)})},Se.prototype.createReadStream=function(Ne){Ne=Ne||{};var Le=new I(Ne);Le.destroyed=!1,Le.start=Ne.start||0,Le.endOffset=Ne.end,Le.pos=Le.endOffset||this.buffer.length;for(var qe=this.buffer.slice(Le.start,Le.pos),Ge=0;;){var ot=Ge+this.maxChunkSize;if(ot>=qe.length){Ge<qe.length&&Le.write(qe.slice(Ge,qe.length));break}Le.write(qe.slice(Ge,ot)),Ge=ot}return Le.end(),Le.destroy=function(){Le.destroyed=!0},Le},Se.prototype.createWriteStream=function(Ne){var Le=this;Ne=Ne||{};var qe=new y(Ne);return qe.start=Ne.start||0,qe.endOffset=Ne.end==null?this.buffer.length:+Ne.end,qe.bytesWritten=0,qe.pos=qe.start,qe.destroyed=!1,qe._write=function(Ge,ot,dt){if(!qe.destroyed){var yt=qe.pos+Ge.length;if(yt>qe.endOffset){var nt=new Error("maximum file length exceeded");nt.code="ETOOBIG",qe.destroyed=!0,dt(nt);return}Ge.copy(Le.buffer,qe.pos,0,Ge.length),qe.bytesWritten+=Ge.length,qe.pos=yt,qe.emit("progress"),dt()}},qe.destroy=function(){qe.destroyed=!0},qe},Se.prototype.ref=function(){this.refCount+=1},Se.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function Oe(Ne,Le){return new Se(Ne,Le)}function Pe(Ne,Le){return new he(Ne,Le)}}),d=P(_e=>{var ge=Je,ne=Je,S=f(),j=g(),y=Je,I=Vr().EventEmitter,D=Je.Transform,ie=Je.PassThrough,he=Je.Writable;_e.open=me,_e.fromFd=ye,_e.fromBuffer=Se,_e.fromRandomAccessReader=Oe,_e.dosDateTimeToDate=ot,_e.getFileNameLowLevel=dt,_e.validateFileName=yt,_e.parseExtraFields=nt,_e.ZipFile=Pe,_e.Entry=qe,_e.LocalFileHeader=Ge,_e.RandomAccessReader=Xt;function me(Re,Be,it){typeof Be=="function"&&(it=Be,Be=null),Be==null&&(Be={}),Be.autoClose==null&&(Be.autoClose=!0),Be.lazyEntries==null&&(Be.lazyEntries=!1),Be.decodeStrings==null&&(Be.decodeStrings=!0),Be.validateEntrySizes==null&&(Be.validateEntrySizes=!0),Be.strictFileNames==null&&(Be.strictFileNames=!1),it==null&&(it=ze),ge.open(Re,"r",function(Qe,Et){if(Qe)return it(Qe);ye(Et,Be,function(pt,Rt){pt&&ge.close(Et,ze),it(pt,Rt)})})}function ye(Re,Be,it){typeof Be=="function"&&(it=Be,Be=null),Be==null&&(Be={}),Be.autoClose==null&&(Be.autoClose=!1),Be.lazyEntries==null&&(Be.lazyEntries=!1),Be.decodeStrings==null&&(Be.decodeStrings=!0),Be.validateEntrySizes==null&&(Be.validateEntrySizes=!0),Be.strictFileNames==null&&(Be.strictFileNames=!1),it==null&&(it=ze),ge.fstat(Re,function(Qe,Et){if(Qe)return it(Qe);var pt=S.createFromFd(Re,{autoClose:!0});Oe(pt,Et.size,Be,it)})}function Se(Re,Be,it){typeof Be=="function"&&(it=Be,Be=null),Be==null&&(Be={}),Be.autoClose=!1,Be.lazyEntries==null&&(Be.lazyEntries=!1),Be.decodeStrings==null&&(Be.decodeStrings=!0),Be.validateEntrySizes==null&&(Be.validateEntrySizes=!0),Be.strictFileNames==null&&(Be.strictFileNames=!1);var Qe=S.createFromBuffer(Re,{maxChunkSize:65536});Oe(Qe,Re.length,Be,it)}function Oe(Re,Be,it,Qe){typeof it=="function"&&(Qe=it,it=null),it==null&&(it={}),it.autoClose==null&&(it.autoClose=!0),it.lazyEntries==null&&(it.lazyEntries=!1),it.decodeStrings==null&&(it.decodeStrings=!0);var Et=!!it.decodeStrings;if(it.validateEntrySizes==null&&(it.validateEntrySizes=!0),it.strictFileNames==null&&(it.strictFileNames=!1),Qe==null&&(Qe=ze),typeof Be!="number")throw new Error("expected totalSize parameter to be a number");if(Be>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");Re.ref();var pt=22,Rt=20,Kt=65535,Ve=Math.min(Rt+pt+Kt,Be),ct=Ce(Ve),lt=Be-ct.length;gt(Re,ct,0,Ve,lt,function(It){if(It)return Qe(It);for(var Bt=Ve-pt;Bt>=0;Bt-=1)if(ct.readUInt32LE(Bt)===101010256){var hr=ct.subarray(Bt),ur=hr.readUInt16LE(4),Sr=hr.readUInt16LE(10),Rr=hr.readUInt32LE(16),On=hr.readUInt16LE(20),Pi=hr.length-pt;if(On!==Pi)return Qe(new Error("Invalid comment length. Expected: "+Pi+". Found: "+On+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK☺☻` in the comment?"));var Qn=Et?be(hr.subarray(22),!1):hr.subarray(22);if(Bt-Rt>=0&&ct.readUInt32LE(Bt-Rt)===117853008){var ki=ct.subarray(Bt-Rt,Bt-Rt+Rt),qt=ve(ki,8),pr=Ce(56);return gt(Re,pr,0,pr.length,qt,function(Wr){return Wr?Qe(Wr):pr.readUInt32LE(0)!==101075792?Qe(new Error("invalid zip64 end of central directory record signature")):(ur=pr.readUInt32LE(16),ur!==0?Qe(new Error("multi-disk zip files are not supported: found disk number: "+ur)):(Sr=ve(pr,32),Rr=ve(pr,48),Qe(null,new Pe(Re,Rr,Be,Sr,Qn,it.autoClose,it.lazyEntries,Et,it.validateEntrySizes,it.strictFileNames))))})}return ur!==0?Qe(new Error("multi-disk zip files are not supported: found disk number: "+ur)):Qe(null,new Pe(Re,Rr,Be,Sr,Qn,it.autoClose,it.lazyEntries,Et,it.validateEntrySizes,it.strictFileNames))}Qe(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}y.inherits(Pe,I);function Pe(Re,Be,it,Qe,Et,pt,Rt,Kt,Ve,ct){var lt=this;I.call(lt),lt.reader=Re,lt.reader.on("error",function(It){Le(lt,It)}),lt.reader.once("close",function(){lt.emit("close")}),lt.readEntryCursor=Be,lt.fileSize=it,lt.entryCount=Qe,lt.comment=Et,lt.entriesRead=0,lt.autoClose=!!pt,lt.lazyEntries=!!Rt,lt.decodeStrings=!!Kt,lt.validateEntrySizes=!!Ve,lt.strictFileNames=!!ct,lt.isOpen=!0,lt.emittedError=!1,lt.lazyEntries||lt._readEntry()}Pe.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function Ne(Re,Be){Re.autoClose&&Re.close(),Le(Re,Be)}function Le(Re,Be){Re.emittedError||(Re.emittedError=!0,Re.emit("error",Be))}Pe.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},Pe.prototype._readEntry=function(){var Re=this;if(Re.entryCount===Re.entriesRead){setImmediate(function(){Re.autoClose&&Re.close(),!Re.emittedError&&Re.emit("end")});return}if(!Re.emittedError){var Be=Ce(46);gt(Re.reader,Be,0,Be.length,Re.readEntryCursor,function(it){if(it)return Ne(Re,it);if(!Re.emittedError){var Qe=new qe,Et=Be.readUInt32LE(0);if(Et!==33639248)return Ne(Re,new Error("invalid central directory file header signature: 0x"+Et.toString(16)));if(Qe.versionMadeBy=Be.readUInt16LE(4),Qe.versionNeededToExtract=Be.readUInt16LE(6),Qe.generalPurposeBitFlag=Be.readUInt16LE(8),Qe.compressionMethod=Be.readUInt16LE(10),Qe.lastModFileTime=Be.readUInt16LE(12),Qe.lastModFileDate=Be.readUInt16LE(14),Qe.crc32=Be.readUInt32LE(16),Qe.compressedSize=Be.readUInt32LE(20),Qe.uncompressedSize=Be.readUInt32LE(24),Qe.fileNameLength=Be.readUInt16LE(28),Qe.extraFieldLength=Be.readUInt16LE(30),Qe.fileCommentLength=Be.readUInt16LE(32),Qe.internalFileAttributes=Be.readUInt16LE(36),Qe.externalFileAttributes=Be.readUInt32LE(38),Qe.relativeOffsetOfLocalHeader=Be.readUInt32LE(42),Qe.generalPurposeBitFlag&64)return Ne(Re,new Error("strong encryption is not supported"));Re.readEntryCursor+=46,Be=Ce(Qe.fileNameLength+Qe.extraFieldLength+Qe.fileCommentLength),gt(Re.reader,Be,0,Be.length,Re.readEntryCursor,function(pt){if(pt)return Ne(Re,pt);if(!Re.emittedError){Qe.fileNameRaw=Be.subarray(0,Qe.fileNameLength);var Rt=Qe.fileNameLength+Qe.extraFieldLength;Qe.extraFieldRaw=Be.subarray(Qe.fileNameLength,Rt),Qe.fileCommentRaw=Be.subarray(Rt,Rt+Qe.fileCommentLength);try{Qe.extraFields=nt(Qe.extraFieldRaw)}catch(Sr){return Ne(Re,Sr)}if(Re.decodeStrings){var Kt=(Qe.generalPurposeBitFlag&2048)!==0;Qe.fileComment=be(Qe.fileCommentRaw,Kt),Qe.fileName=dt(Qe.generalPurposeBitFlag,Qe.fileNameRaw,Qe.extraFields,Re.strictFileNames);var Ve=yt(Qe.fileName);if(Ve!=null)return Ne(Re,new Error(Ve))}else Qe.fileComment=Qe.fileCommentRaw,Qe.fileName=Qe.fileNameRaw;Qe.comment=Qe.fileComment,Re.readEntryCursor+=Be.length,Re.entriesRead+=1;for(var ct=0;ct<Qe.extraFields.length;ct++){var lt=Qe.extraFields[ct];if(lt.id===1){var It=lt.data,Bt=0;if(Qe.uncompressedSize===4294967295){if(Bt+8>It.length)return Ne(Re,new Error("zip64 extended information extra field does not include uncompressed size"));Qe.uncompressedSize=ve(It,Bt),Bt+=8}if(Qe.compressedSize===4294967295){if(Bt+8>It.length)return Ne(Re,new Error("zip64 extended information extra field does not include compressed size"));Qe.compressedSize=ve(It,Bt),Bt+=8}if(Qe.relativeOffsetOfLocalHeader===4294967295){if(Bt+8>It.length)return Ne(Re,new Error("zip64 extended information extra field does not include relative header offset"));Qe.relativeOffsetOfLocalHeader=ve(It,Bt),Bt+=8}break}}if(Re.validateEntrySizes&&Qe.compressionMethod===0){var hr=Qe.uncompressedSize;if(Qe.isEncrypted()&&(hr+=12),Qe.compressedSize!==hr){var ur="compressed/uncompressed size mismatch for stored file: "+Qe.compressedSize+" != "+Qe.uncompressedSize;return Ne(Re,new Error(ur))}}Re.emit("entry",Qe),Re.lazyEntries||Re._readEntry()}})}})}},Pe.prototype.openReadStream=function(Re,Be,it){var Qe=this,Et=0,pt=Re.compressedSize;if(it==null&&(it=Be,Be=null),Be==null)Be={};else{if(Be.decrypt!=null){if(!Re.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(Be.decrypt!==!1)throw new Error("invalid options.decrypt value: "+Be.decrypt);if(Re.isCompressed()&&Be.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(Be.decompress!=null){if(!Re.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(Be.decompress===!1||Be.decompress===!0))throw new Error("invalid options.decompress value: "+Be.decompress)}if(Be.start!=null||Be.end!=null){if(Re.isCompressed()&&Be.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(Re.isEncrypted()&&Be.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(Be.start!=null){if(Et=Be.start,Et<0)throw new Error("options.start < 0");if(Et>Re.compressedSize)throw new Error("options.start > entry.compressedSize")}if(Be.end!=null){if(pt=Be.end,pt<0)throw new Error("options.end < 0");if(pt>Re.compressedSize)throw new Error("options.end > entry.compressedSize");if(pt<Et)throw new Error("options.end < options.start")}}if(!Qe.isOpen)return it(new Error("closed"));if(Re.isEncrypted()&&Be.decrypt!==!1)return it(new Error("entry is encrypted, and options.decrypt !== false"));var Rt;if(Re.compressionMethod===0)Rt=!1;else if(Re.compressionMethod===8)Rt=Be.decompress!=null?Be.decompress:!0;else return it(new Error("unsupported compression method: "+Re.compressionMethod));Qe.readLocalFileHeader(Re,{minimal:!0},function(Kt,Ve){if(Kt)return it(Kt);Qe.openReadStreamLowLevel(Ve.fileDataStart,Re.compressedSize,Et,pt,Rt,Re.uncompressedSize,it)})},Pe.prototype.openReadStreamLowLevel=function(Re,Be,it,Qe,Et,pt,Rt){var Kt=this,Ve=Kt.reader.createReadStream({start:Re+it,end:Re+Qe}),ct=Ve;if(Et){var lt=!1,It=ne.createInflateRaw();Ve.on("error",function(Bt){setImmediate(function(){lt||It.emit("error",Bt)})}),Ve.pipe(It),Kt.validateEntrySizes?(ct=new Ut(pt),It.on("error",function(Bt){setImmediate(function(){lt||ct.emit("error",Bt)})}),It.pipe(ct)):ct=It,Ke(ct,function(){lt=!0,It!==ct&&It.unpipe(ct),Ve.unpipe(It),Ve.destroy()})}Rt(null,ct)},Pe.prototype.readLocalFileHeader=function(Re,Be,it){var Qe=this;it==null&&(it=Be,Be=null),Be==null&&(Be={}),Qe.reader.ref();var Et=Ce(30);gt(Qe.reader,Et,0,Et.length,Re.relativeOffsetOfLocalHeader,function(pt){try{if(pt)return it(pt);var Rt=Et.readUInt32LE(0);if(Rt!==67324752)return it(new Error("invalid local file header signature: 0x"+Rt.toString(16)));var Kt=Et.readUInt16LE(26),Ve=Et.readUInt16LE(28),ct=Re.relativeOffsetOfLocalHeader+30+Kt+Ve;if(ct+Re.compressedSize>Qe.fileSize)return it(new Error("file data overflows file bounds: "+ct+" + "+Re.compressedSize+" > "+Qe.fileSize));if(Be.minimal)return it(null,{fileDataStart:ct});var lt=new Ge;lt.fileDataStart=ct,lt.versionNeededToExtract=Et.readUInt16LE(4),lt.generalPurposeBitFlag=Et.readUInt16LE(6),lt.compressionMethod=Et.readUInt16LE(8),lt.lastModFileTime=Et.readUInt16LE(10),lt.lastModFileDate=Et.readUInt16LE(12),lt.crc32=Et.readUInt32LE(14),lt.compressedSize=Et.readUInt32LE(18),lt.uncompressedSize=Et.readUInt32LE(22),lt.fileNameLength=Kt,lt.extraFieldLength=Ve,Et=Ce(Kt+Ve),Qe.reader.ref(),gt(Qe.reader,Et,0,Et.length,Re.relativeOffsetOfLocalHeader+30,function(It){try{return It?it(It):(lt.fileName=Et.subarray(0,Kt),lt.extraField=Et.subarray(Kt),it(null,lt))}finally{Qe.reader.unref()}})}finally{Qe.reader.unref()}})};function qe(){}qe.prototype.getLastModDate=function(Re){if(Re==null&&(Re={}),!Re.forceDosFormat)for(var Be=0;Be<this.extraFields.length;Be++){var it=this.extraFields[Be];if(it.id===21589){var Qe=it.data;if(Qe.length<5)continue;var Et=Qe[0],pt=1;if(!(Et&pt))continue;var Rt=Qe.readInt32LE(1);return new Date(Rt*1e3)}else if(it.id===10)for(var Qe=it.data,Kt=4;Kt<Qe.length+4;){var Ve=Qe.readUInt16LE(Kt);Kt+=2;var ct=Qe.readUInt16LE(Kt);if(Kt+=2,Ve!==1){Kt+=ct;continue}if(ct<8||Kt+ct>Qe.length)break;var lt=4294967296*Qe.readInt32LE(Kt+4)+Qe.readUInt32LE(Kt),It=lt/1e4-116444736e5;return new Date(It)}}return ot(this.lastModFileDate,this.lastModFileTime,Re.timezone)},qe.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0},qe.prototype.isCompressed=function(){return this.compressionMethod===8};function Ge(){}function ot(Re,Be,it){var Qe=Re&31,Et=(Re>>5&15)-1,pt=(Re>>9&127)+1980,Rt=0,Kt=(Be&31)*2,Ve=Be>>5&63,ct=Be>>11&31;if(it==null||it==="local")return new Date(pt,Et,Qe,ct,Ve,Kt,Rt);if(it==="UTC")return new Date(Date.UTC(pt,Et,Qe,ct,Ve,Kt,Rt));throw new Error("unrecognized options.timezone: "+options.timezone)}function dt(Re,Be,it,Qe){for(var Et=null,pt=0;pt<it.length;pt++){var Rt=it[pt];if(Rt.id===28789){if(Rt.data.length<6||Rt.data.readUInt8(0)!==1)continue;var Kt=Rt.data.readUInt32LE(1);if(j.unsigned(Be)!==Kt)continue;Et=be(Rt.data.subarray(5),!0);break}}if(Et==null){var Ve=(Re&2048)!==0;Et=be(Be,Ve)}return Qe||(Et=Et.replace(/\\/g,"/")),Et}function yt(Re){return Re.indexOf("\\")!==-1?"invalid characters in fileName: "+Re:/^[a-zA-Z]:/.test(Re)||/^\//.test(Re)?"absolute path: "+Re:Re.split("/").indexOf("..")!==-1?"invalid relative path: "+Re:null}function nt(Re){for(var Be=[],it=0;it<Re.length-3;){var Qe=Re.readUInt16LE(it+0),Et=Re.readUInt16LE(it+2),pt=it+4,Rt=pt+Et;if(Rt>Re.length)throw new Error("extra field length exceeds extra field buffer size");var Kt=Re.subarray(pt,Rt);Be.push({id:Qe,data:Kt}),it=Rt}return Be}function gt(Re,Be,it,Qe,Et,pt){if(Qe===0)return setImmediate(function(){pt(null,Ce(0))});Re.read(Be,it,Qe,Et,function(Rt,Kt){if(Rt)return pt(Rt);if(Kt<Qe)return pt(new Error("unexpected EOF"));pt()})}y.inherits(Ut,D);function Ut(Re){D.call(this),this.actualByteCount=0,this.expectedByteCount=Re}Ut.prototype._transform=function(Re,Be,it){if(this.actualByteCount+=Re.length,this.actualByteCount>this.expectedByteCount){var Qe="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return it(new Error(Qe))}it(null,Re)},Ut.prototype._flush=function(Re){if(this.actualByteCount<this.expectedByteCount){var Be="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return Re(new Error(Be))}Re()},y.inherits(Xt,I);function Xt(){I.call(this),this.refCount=0}Xt.prototype.ref=function(){this.refCount+=1},Xt.prototype.unref=function(){var Re=this;if(Re.refCount-=1,Re.refCount>0)return;if(Re.refCount<0)throw new Error("invalid unref");Re.close(Be);function Be(it){if(it)return Re.emit("error",it);Re.emit("close")}},Xt.prototype.createReadStream=function(Re){Re==null&&(Re={});var Be=Re.start,it=Re.end;if(Be===it){var Qe=new ie;return setImmediate(function(){Qe.end()}),Qe}var Et=this._readStreamForRange(Be,it),pt=!1,Rt=new st(this);Et.on("error",function(Ve){setImmediate(function(){pt||Rt.emit("error",Ve)})}),Ke(Rt,function(){Et.unpipe(Rt),Rt.unref(),Et.destroy()});var Kt=new Ut(it-Be);return Rt.on("error",function(Ve){setImmediate(function(){pt||Kt.emit("error",Ve)})}),Ke(Kt,function(){pt=!0,Rt.unpipe(Kt),Rt.destroy()}),Et.pipe(Rt).pipe(Kt)},Xt.prototype._readStreamForRange=function(Re,Be){throw new Error("not implemented")},Xt.prototype.read=function(Re,Be,it,Qe,Et){var pt=this.createReadStream({start:Qe,end:Qe+it}),Rt=new he,Kt=0;Rt._write=function(Ve,ct,lt){Ve.copy(Re,Be+Kt,0,Ve.length),Kt+=Ve.length,lt()},Rt.on("finish",Et),pt.on("error",function(Ve){Et(Ve)}),pt.pipe(Rt)},Xt.prototype.close=function(Re){setImmediate(Re)},y.inherits(st,ie);function st(Re){ie.call(this),this.context=Re,this.context.ref(),this.unreffedYet=!1}st.prototype._flush=function(Re){this.unref(),Re()},st.prototype.unref=function(Re){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var xe="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function be(Re,Be){if(Be)return Re.toString("utf8");for(var it="",Qe=0;Qe<Re.length;Qe++)it+=xe[Re[Qe]];return it}function ve(Re,Be){var it=Re.readUInt32LE(Be),Qe=Re.readUInt32LE(Be+4);return Qe*4294967296+it}var Ce;typeof Buffer.allocUnsafe=="function"?Ce=function(Re){return Buffer.allocUnsafe(Re)}:Ce=function(Re){return new Buffer(Re)};function Ke(Re,Be){typeof Re.destroy=="function"?Re._destroy=function(it,Qe){Be(),Qe!=null&&Qe(it)}:Re.destroy=Be}function ze(Re){if(Re)throw Re}}),v=P((_e,ge)=>{var ne=1e3,S=ne*60,j=S*60,y=j*24,I=y*7,D=y*365.25;ge.exports=function(Se,Oe){Oe=Oe||{};var Pe=typeof Se;if(Pe==="string"&&Se.length>0)return ie(Se);if(Pe==="number"&&isFinite(Se))return Oe.long?me(Se):he(Se);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Se))};function ie(Se){if(Se=String(Se),!(Se.length>100)){var Oe=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Se);if(Oe){var Pe=parseFloat(Oe[1]),Ne=(Oe[2]||"ms").toLowerCase();switch(Ne){case"years":case"year":case"yrs":case"yr":case"y":return Pe*D;case"weeks":case"week":case"w":return Pe*I;case"days":case"day":case"d":return Pe*y;case"hours":case"hour":case"hrs":case"hr":case"h":return Pe*j;case"minutes":case"minute":case"mins":case"min":case"m":return Pe*S;case"seconds":case"second":case"secs":case"sec":case"s":return Pe*ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Pe;default:return}}}}function he(Se){var Oe=Math.abs(Se);return Oe>=y?Math.round(Se/y)+"d":Oe>=j?Math.round(Se/j)+"h":Oe>=S?Math.round(Se/S)+"m":Oe>=ne?Math.round(Se/ne)+"s":Se+"ms"}function me(Se){var Oe=Math.abs(Se);return Oe>=y?ye(Se,Oe,y,"day"):Oe>=j?ye(Se,Oe,j,"hour"):Oe>=S?ye(Se,Oe,S,"minute"):Oe>=ne?ye(Se,Oe,ne,"second"):Se+" ms"}function ye(Se,Oe,Pe,Ne){var Le=Oe>=Pe*1.5;return Math.round(Se/Pe)+" "+Ne+(Le?"s":"")}}),a=P((_e,ge)=>{function ne(S){y.debug=y,y.default=y,y.coerce=ye,y.disable=he,y.enable=D,y.enabled=me,y.humanize=v(),y.destroy=Se,Object.keys(S).forEach(Oe=>{y[Oe]=S[Oe]}),y.names=[],y.skips=[],y.formatters={};function j(Oe){let Pe=0;for(let Ne=0;Ne<Oe.length;Ne++)Pe=(Pe<<5)-Pe+Oe.charCodeAt(Ne),Pe|=0;return y.colors[Math.abs(Pe)%y.colors.length]}y.selectColor=j;function y(Oe){let Pe,Ne=null,Le,qe;function Ge(...ot){if(!Ge.enabled)return;let dt=Ge,yt=Number(new Date),nt=yt-(Pe||yt);dt.diff=nt,dt.prev=Pe,dt.curr=yt,Pe=yt,ot[0]=y.coerce(ot[0]),typeof ot[0]!="string"&&ot.unshift("%O");let gt=0;ot[0]=ot[0].replace(/%([a-zA-Z%])/g,(Ut,Xt)=>{if(Ut==="%%")return"%";gt++;let st=y.formatters[Xt];if(typeof st=="function"){let xe=ot[gt];Ut=st.call(dt,xe),ot.splice(gt,1),gt--}return Ut}),y.formatArgs.call(dt,ot),(dt.log||y.log).apply(dt,ot)}return Ge.namespace=Oe,Ge.useColors=y.useColors(),Ge.color=y.selectColor(Oe),Ge.extend=I,Ge.destroy=y.destroy,Object.defineProperty(Ge,"enabled",{enumerable:!0,configurable:!1,get:()=>Ne!==null?Ne:(Le!==y.namespaces&&(Le=y.namespaces,qe=y.enabled(Oe)),qe),set:ot=>{Ne=ot}}),typeof y.init=="function"&&y.init(Ge),Ge}function I(Oe,Pe){let Ne=y(this.namespace+(typeof Pe>"u"?":":Pe)+Oe);return Ne.log=this.log,Ne}function D(Oe){y.save(Oe),y.namespaces=Oe,y.names=[],y.skips=[];let Pe=(typeof Oe=="string"?Oe:"").trim().replace(" ",",").split(",").filter(Boolean);for(let Ne of Pe)Ne[0]==="-"?y.skips.push(Ne.slice(1)):y.names.push(Ne)}function ie(Oe,Pe){let Ne=0,Le=0,qe=-1,Ge=0;for(;Ne<Oe.length;)if(Le<Pe.length&&(Pe[Le]===Oe[Ne]||Pe[Le]==="*"))Pe[Le]==="*"?(qe=Le,Ge=Ne,Le++):(Ne++,Le++);else if(qe!==-1)Le=qe+1,Ge++,Ne=Ge;else return!1;for(;Le<Pe.length&&Pe[Le]==="*";)Le++;return Le===Pe.length}function he(){let Oe=[...y.names,...y.skips.map(Pe=>"-"+Pe)].join(",");return y.enable(""),Oe}function me(Oe){for(let Pe of y.skips)if(ie(Oe,Pe))return!1;for(let Pe of y.names)if(ie(Oe,Pe))return!0;return!1}function ye(Oe){return Oe instanceof Error?Oe.stack||Oe.message:Oe}function Se(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return y.enable(y.load()),y}ge.exports=ne}),s=P((_e,ge)=>{_e.formatArgs=S,_e.save=j,_e.load=y,_e.useColors=ne,_e.storage=I(),_e.destroy=(()=>{let ie=!1;return()=>{ie||(ie=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),_e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ne(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let ie;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(ie=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(ie[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function S(ie){if(ie[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+ie[0]+(this.useColors?"%c ":" ")+"+"+ge.exports.humanize(this.diff),!this.useColors)return;let he="color: "+this.color;ie.splice(1,0,he,"color: inherit");let me=0,ye=0;ie[0].replace(/%[a-zA-Z%]/g,Se=>{Se!=="%%"&&(me++,Se==="%c"&&(ye=me))}),ie.splice(ye,0,he)}_e.log=console.debug||console.log||(()=>{});function j(ie){try{ie?_e.storage.setItem("debug",ie):_e.storage.removeItem("debug")}catch{}}function y(){let ie;try{ie=_e.storage.getItem("debug")}catch{}return!ie&&typeof process<"u"&&"env"in process&&(ie=t.DEBUG),ie}function I(){try{return localStorage}catch{}}ge.exports=a()(_e);var{formatters:D}=ge.exports;D.j=function(ie){try{return JSON.stringify(ie)}catch(he){return"[UnexpectedJSONParseError]: "+he.message}}}),n=P((_e,ge)=>{ge.exports=(ne,S=process.argv)=>{let j=ne.startsWith("-")?"":ne.length===1?"-":"--",y=S.indexOf(j+ne),I=S.indexOf("--");return y!==-1&&(I===-1||y<I)}}),o=P((_e,ge)=>{var ne=Je,S=Je,j=n(),{env:y}=process,I;j("no-color")||j("no-colors")||j("color=false")||j("color=never")?I=0:(j("color")||j("colors")||j("color=true")||j("color=always"))&&(I=1);function D(){if("FORCE_COLOR"in y)return y.FORCE_COLOR==="true"?1:y.FORCE_COLOR==="false"?0:y.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(y.FORCE_COLOR,10),3)}function ie(ye){return ye===0?!1:{level:ye,hasBasic:!0,has256:ye>=2,has16m:ye>=3}}function he(ye,{streamIsTTY:Se,sniffFlags:Oe=!0}={}){let Pe=D();Pe!==void 0&&(I=Pe);let Ne=Oe?I:Pe;if(Ne===0)return 0;if(Oe){if(j("color=16m")||j("color=full")||j("color=truecolor"))return 3;if(j("color=256"))return 2}if(ye&&!Se&&Ne===void 0)return 0;let Le=Ne||0;if(y.TERM==="dumb")return Le;if(process.platform==="win32"){let qe=ne.release().split(".");return Number(qe[0])>=10&&Number(qe[2])>=10586?Number(qe[2])>=14931?3:2:1}if("CI"in y)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(qe=>qe in y)||y.CI_NAME==="codeship"?1:Le;if("TEAMCITY_VERSION"in y)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(y.TEAMCITY_VERSION)?1:0;if(y.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in y){let qe=Number.parseInt((y.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(y.TERM_PROGRAM){case"iTerm.app":return qe>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(y.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(y.TERM)||"COLORTERM"in y?1:Le}function me(ye,Se={}){let Oe=he(ye,{streamIsTTY:ye&&ye.isTTY,...Se});return ie(Oe)}ge.exports={supportsColor:me,stdout:me({isTTY:S.isatty(1)}),stderr:me({isTTY:S.isatty(2)})}}),h=P((_e,ge)=>{var ne=Je,S=Je;_e.init=me,_e.log=D,_e.formatArgs=y,_e.save=ie,_e.load=he,_e.useColors=j,_e.destroy=S.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),_e.colors=[6,2,3,4,5,1];try{let Se=o();Se&&(Se.stderr||Se).level>=2&&(_e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}_e.inspectOpts=Object.keys(t).filter(Se=>/^debug_/i.test(Se)).reduce((Se,Oe)=>{let Pe=Oe.substring(6).toLowerCase().replace(/_([a-z])/g,(Le,qe)=>qe.toUpperCase()),Ne=t[Oe];return/^(yes|on|true|enabled)$/i.test(Ne)?Ne=!0:/^(no|off|false|disabled)$/i.test(Ne)?Ne=!1:Ne==="null"?Ne=null:Ne=Number(Ne),Se[Pe]=Ne,Se},{});function j(){return"colors"in _e.inspectOpts?!!_e.inspectOpts.colors:ne.isatty(process.stderr.fd)}function y(Se){let{namespace:Oe,useColors:Pe}=this;if(Pe){let Ne=this.color,Le="\x1B[3"+(Ne<8?Ne:"8;5;"+Ne),qe=`  ${Le};1m${Oe} \x1B[0m`;Se[0]=qe+Se[0].split(`
`).join(`
`+qe),Se.push(Le+"m+"+ge.exports.humanize(this.diff)+"\x1B[0m")}else Se[0]=I()+Oe+" "+Se[0]}function I(){return _e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function D(...Se){return process.stderr.write(S.formatWithOptions(_e.inspectOpts,...Se)+`
`)}function ie(Se){Se?t.DEBUG=Se:delete t.DEBUG}function he(){return t.DEBUG}function me(Se){Se.inspectOpts={};let Oe=Object.keys(_e.inspectOpts);for(let Pe=0;Pe<Oe.length;Pe++)Se.inspectOpts[Oe[Pe]]=_e.inspectOpts[Oe[Pe]]}ge.exports=a()(_e);var{formatters:ye}=ge.exports;ye.o=function(Se){return this.inspectOpts.colors=this.useColors,S.inspect(Se,this.inspectOpts).split(`
`).map(Oe=>Oe.trim()).join(" ")},ye.O=function(Se){return this.inspectOpts.colors=this.useColors,S.inspect(Se,this.inspectOpts)}}),m=P((_e,ge)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ge.exports=s():ge.exports=h()}),c=P((_e,ge)=>{ge.exports=ne;function ne(S,j){if(S&&j)return ne(S)(j);if(typeof S!="function")throw new TypeError("need wrapper function");return Object.keys(S).forEach(function(I){y[I]=S[I]}),y;function y(){for(var I=new Array(arguments.length),D=0;D<I.length;D++)I[D]=arguments[D];var ie=S.apply(this,I),he=I[I.length-1];return typeof ie=="function"&&ie!==he&&Object.keys(he).forEach(function(me){ie[me]=he[me]}),ie}}}),l=P((_e,ge)=>{var ne=c();ge.exports=ne(S),ge.exports.strict=ne(j),S.proto=S(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return S(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return j(this)},configurable:!0})});function S(y){var I=function(){return I.called?I.value:(I.called=!0,I.value=y.apply(this,arguments))};return I.called=!1,I}function j(y){var I=function(){if(I.called)throw new Error(I.onceError);return I.called=!0,I.value=y.apply(this,arguments)},D=y.name||"Function wrapped with `once`";return I.onceError=D+" shouldn't be called more than once",I.called=!1,I}}),x=P((_e,ge)=>{var ne=l(),S=function(){},j=function(D){return D.setHeader&&typeof D.abort=="function"},y=function(D){return D.stdio&&Array.isArray(D.stdio)&&D.stdio.length===3},I=function(D,ie,he){if(typeof ie=="function")return I(D,null,ie);ie||(ie={}),he=ne(he||S);var me=D._writableState,ye=D._readableState,Se=ie.readable||ie.readable!==!1&&D.readable,Oe=ie.writable||ie.writable!==!1&&D.writable,Pe=!1,Ne=function(){D.writable||Le()},Le=function(){Oe=!1,Se||he.call(D)},qe=function(){Se=!1,Oe||he.call(D)},Ge=function(gt){he.call(D,gt?new Error("exited with error code: "+gt):null)},ot=function(gt){he.call(D,gt)},dt=function(){process.nextTick(yt)},yt=function(){if(!Pe){if(Se&&!(ye&&ye.ended&&!ye.destroyed))return he.call(D,new Error("premature close"));if(Oe&&!(me&&me.ended&&!me.destroyed))return he.call(D,new Error("premature close"))}},nt=function(){D.req.on("finish",Le)};return j(D)?(D.on("complete",Le),D.on("abort",dt),D.req?nt():D.on("request",nt)):Oe&&!me&&(D.on("end",Ne),D.on("close",Ne)),y(D)&&D.on("exit",Ge),D.on("end",qe),D.on("finish",Le),ie.error!==!1&&D.on("error",ot),D.on("close",dt),function(){Pe=!0,D.removeListener("complete",Le),D.removeListener("abort",dt),D.removeListener("request",nt),D.req&&D.req.removeListener("finish",Le),D.removeListener("end",Ne),D.removeListener("close",Ne),D.removeListener("finish",Le),D.removeListener("exit",Ge),D.removeListener("end",qe),D.removeListener("error",ot),D.removeListener("close",dt)}};ge.exports=I}),T=P((_e,ge)=>{var ne=l(),S=x(),j;try{j=Je}catch{}var y=function(){},I=/^v?\.0/.test(process.version),D=function(Pe){return typeof Pe=="function"},ie=function(Pe){return!I||!j?!1:(Pe instanceof(j.ReadStream||y)||Pe instanceof(j.WriteStream||y))&&D(Pe.close)},he=function(Pe){return Pe.setHeader&&D(Pe.abort)},me=function(Pe,Ne,Le,qe){qe=ne(qe);var Ge=!1;Pe.on("close",function(){Ge=!0}),S(Pe,{readable:Ne,writable:Le},function(dt){if(dt)return qe(dt);Ge=!0,qe()});var ot=!1;return function(dt){if(!Ge&&!ot){if(ot=!0,ie(Pe))return Pe.close(y);if(he(Pe))return Pe.abort();if(D(Pe.destroy))return Pe.destroy();qe(dt||new Error("stream was destroyed"))}}},ye=function(Pe){Pe()},Se=function(Pe,Ne){return Pe.pipe(Ne)},Oe=function(){var Pe=Array.prototype.slice.call(arguments),Ne=D(Pe[Pe.length-1]||y)&&Pe.pop()||y;if(Array.isArray(Pe[0])&&(Pe=Pe[0]),Pe.length<2)throw new Error("pump requires two streams per minimum");var Le,qe=Pe.map(function(Ge,ot){var dt=ot<Pe.length-1,yt=ot>0;return me(Ge,dt,yt,function(nt){Le||(Le=nt),nt&&qe.forEach(ye),!dt&&(qe.forEach(ye),Ne(Le))})});return Pe.reduce(Se)};ge.exports=Oe}),b=P((_e,ge)=>{var{PassThrough:ne}=Je;ge.exports=S=>{S={...S};let{array:j}=S,{encoding:y}=S,I=y==="buffer",D=!1;j?D=!(y||I):y=y||"utf8",I&&(y=null);let ie=new ne({objectMode:D});y&&ie.setEncoding(y);let he=0,me=[];return ie.on("data",ye=>{me.push(ye),D?he=me.length:he+=ye.length}),ie.getBufferedValue=()=>j?me:I?Buffer.concat(me,he):me.join(""),ie.getBufferedLength=()=>he,ie}}),p=P((_e,ge)=>{var{constants:ne}=Ns(),S=T(),j=b(),y=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function I(D,ie){if(!D)return Promise.reject(new Error("Expected a stream"));ie={maxBuffer:1/0,...ie};let{maxBuffer:he}=ie,me;return await new Promise((ye,Se)=>{let Oe=Pe=>{Pe&&me.getBufferedLength()<=ne.MAX_LENGTH&&(Pe.bufferedData=me.getBufferedValue()),Se(Pe)};me=S(D,j(ie),Pe=>{if(Pe){Oe(Pe);return}ye()}),me.on("data",()=>{me.getBufferedLength()>he&&Oe(new y)})}),me.getBufferedValue()}ge.exports=I,ge.exports.default=I,ge.exports.buffer=(D,ie)=>I(D,{...ie,encoding:"buffer"}),ge.exports.array=(D,ie)=>I(D,{...ie,array:!0}),ge.exports.MaxBufferError=y}),O=P((_e,ge)=>{var ne=m()("extract-zip"),{createWriteStream:S,promises:j}=Je,y=p(),I=Je,{promisify:D}=Je,ie=Je,he=d(),me=D(he.open),ye=D(ie.pipeline),Se=class{constructor(Oe,Pe){this.zipPath=Oe,this.opts=Pe}async extract(){return ne("opening",this.zipPath,"with opts",this.opts),this.zipfile=await me(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((Oe,Pe)=>{this.zipfile.on("error",Ne=>{this.canceled=!0,Pe(Ne)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(ne("zip extraction complete"),Oe())}),this.zipfile.on("entry",async Ne=>{if(this.canceled){ne("skipping entry",Ne.fileName,{cancelled:this.canceled});return}if(ne("zipfile entry",Ne.fileName),Ne.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}let Le=I.dirname(I.join(this.opts.dir,Ne.fileName));try{await j.mkdir(Le,{recursive:!0});let qe=await j.realpath(Le);if(I.relative(this.opts.dir,qe).split(I.sep).includes(".."))throw new Error(`Out of bound path "${qe}" found while processing file ${Ne.fileName}`);await this.extractEntry(Ne),ne("finished processing",Ne.fileName),this.zipfile.readEntry()}catch(qe){this.canceled=!0,this.zipfile.close(),Pe(qe)}})})}async extractEntry(Oe){if(this.canceled){ne("skipping entry extraction",Oe.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(Oe,this.zipfile);let Pe=I.join(this.opts.dir,Oe.fileName),Ne=Oe.externalFileAttributes>>16&65535,Le=61440,qe=16384,Ge=(Ne&Le)===40960,ot=(Ne&Le)===qe;!ot&&Oe.fileName.endsWith("/")&&(ot=!0);let dt=Oe.versionMadeBy>>8;ot||(ot=dt===0&&Oe.externalFileAttributes===16),ne("extracting entry",{filename:Oe.fileName,isDir:ot,isSymlink:Ge});let yt=this.getExtractedMode(Ne,ot)&511,nt=ot?Pe:I.dirname(Pe),gt={recursive:!0};if(ot&&(gt.mode=yt),ne("mkdir",{dir:nt,...gt}),await j.mkdir(nt,gt),ot)return;ne("opening read stream",Pe);let Ut=await D(this.zipfile.openReadStream.bind(this.zipfile))(Oe);if(Ge){let Xt=await y(Ut);ne("creating symlink",Xt,Pe),await j.symlink(Xt,Pe)}else await ye(Ut,S(Pe,{mode:yt}))}getExtractedMode(Oe,Pe){let Ne=Oe;return Ne===0&&(Pe?(this.opts.defaultDirMode&&(Ne=parseInt(this.opts.defaultDirMode,10)),Ne||(Ne=493)):(this.opts.defaultFileMode&&(Ne=parseInt(this.opts.defaultFileMode,10)),Ne||(Ne=420))),Ne}};ge.exports=async function(Oe,Pe){if(ne("creating target directory",Pe.dir),!I.isAbsolute(Pe.dir))throw new Error("Target directory is expected to be absolute");return await j.mkdir(Pe.dir,{recursive:!0}),Pe.dir=await j.realpath(Pe.dir),new Se(Oe,Pe).extract()}}),z={};e(z,{extract:()=>le,yauzl:()=>q,yazl:()=>$}),Rc=w(z);var $=C(u()),q=C(d()),J=O(),le=J;return Rc}var Dc,ag;function Po(){if(ag)return Dc;ag=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{extract:()=>C,yauzl:()=>U,yazl:()=>e}),Dc=te(P);const e=Lc().yazl,U=Lc().yauzl,C=Lc().extract;return Dc}var Mc,og;function Ln(){if(og)return Mc;og=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{SerializedFS:()=>h,canAccessFile:()=>a,copyFileAndMakeWritable:()=>s,existsAsync:()=>f,mkdirIfNeeded:()=>d,removeFolders:()=>v,sanitizeForFilePath:()=>n,toPosixPath:()=>o}),Mc=U(C);var w=e(Je),g=e(Je),u=Fr(),_=Po();const f=m=>new Promise(c=>w.default.stat(m,l=>c(!l)));async function d(m){await w.default.promises.mkdir(g.default.dirname(m),{recursive:!0}).catch(()=>{})}async function v(m){return await Promise.all(m.map(c=>w.default.promises.rm(c,{recursive:!0,force:!0,maxRetries:10}).catch(l=>l)))}function a(m){if(!m)return!1;try{return w.default.accessSync(m),!0}catch{return!1}}async function s(m,c){await w.default.promises.copyFile(m,c),await w.default.promises.chmod(c,436)}function n(m){return m.replace(/[\x00-\x2C\x2E-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/g,"-")}function o(m){return m.split(g.default.sep).join(g.default.posix.sep)}class h{constructor(){this._buffers=new Map,this._operations=[],this._operationsDone=new u.ManualPromise,this._operationsDone.resolve()}mkdir(c){this._appendOperation({op:"mkdir",dir:c})}writeFile(c,l,x){this._buffers.delete(c),this._appendOperation({op:"writeFile",file:c,content:l,skipIfExists:x})}appendFile(c,l,x){this._buffers.has(c)||this._buffers.set(c,[]),this._buffers.get(c).push(l),x&&this._flushFile(c)}_flushFile(c){const l=this._buffers.get(c);if(l===void 0)return;const x=l.join("");this._buffers.delete(c),this._appendOperation({op:"appendFile",file:c,content:x})}copyFile(c,l){this._flushFile(c),this._buffers.delete(l),this._appendOperation({op:"copyFile",from:c,to:l})}async syncAndGetError(){for(const c of this._buffers.keys())this._flushFile(c);return await this._operationsDone,this._error}zip(c,l){for(const x of this._buffers.keys())this._flushFile(x);this._appendOperation({op:"zip",entries:c,zipFileName:l})}_appendOperation(c){const l=this._operations[this._operations.length-1];if((l==null?void 0:l.op)==="appendFile"&&c.op==="appendFile"&&l.file===c.file){l.content+=c.content;return}this._operations.push(c),this._operationsDone.isDone()&&this._performOperations()}async _performOperations(){for(this._operationsDone=new u.ManualPromise;this._operations.length;){const c=this._operations.shift();if(!this._error)try{await this._performOperation(c)}catch(l){this._error=l}}this._operationsDone.resolve()}async _performOperation(c){switch(c.op){case"mkdir":{await w.default.promises.mkdir(c.dir,{recursive:!0});return}case"writeFile":{c.skipIfExists?await w.default.promises.writeFile(c.file,c.content,{flag:"wx"}).catch(()=>{}):await w.default.promises.writeFile(c.file,c.content);return}case"copyFile":{await w.default.promises.copyFile(c.from,c.to);return}case"appendFile":{await w.default.promises.appendFile(c.file,c.content);return}case"zip":{const l=new _.yazl.ZipFile,x=new u.ManualPromise;l.on("error",T=>x.reject(T));for(const T of c.entries)l.addFile(T.value,T.name);l.end(),l.outputStream.pipe(w.default.createWriteStream(c.zipFileName)).on("close",()=>x.resolve()).on("error",T=>x.reject(T)),await x;return}}}}return Mc}var Fc,cg;function rO(){if(cg)return Fc;cg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(p,O)=>{for(var z in O)i(p,z,{get:O[z],enumerable:!0})},e=(p,O,z,$)=>{if(O&&typeof O=="object"||typeof O=="function")for(let q of R(O))!te.call(p,q)&&q!==z&&i(p,q,{get:()=>O[q],enumerable:!($=E(O,q))||$.enumerable});return p},U=(p,O,z)=>(z=p!=null?r(V(p)):{},e(!p||!p.__esModule?i(z,"default",{value:p,enumerable:!0}):z,p)),C=p=>e(i({},"__esModule",{value:!0}),p),w={};P(w,{downloadBrowserWithProgressBar:()=>h,logPolitely:()=>c}),Fc=C(w);var g=U(Je),u=U(Je),_=U(Je),f=U(Je),d=Mr(),v=Fr(),a=xi(),s=Ar(),n=Ln(),o=ui();async function h(p,O,z,$,q,J){if(await(0,n.existsAsync)((0,o.browserDirectoryToMarkerFilePath)(O)))return d.debugLogger.log("install",`${p} is already downloaded.`),!1;const le=f.default.join(_.default.tmpdir(),q);try{for(let ge=1;ge<=5;++ge){d.debugLogger.log("install",`downloading ${p} - attempt #${ge}`);const ne=$[(ge-1)%$.length];c(`Downloading ${p}`+s.colors.dim(` from ${ne}`));const{error:S}=await m(p,O,ne,le,z,J);if(!S){d.debugLogger.log("install",`SUCCESS installing ${p}`);break}await(0,n.existsAsync)(le)&&await u.default.promises.unlink(le),await(0,n.existsAsync)(O)&&await u.default.promises.rmdir(O,{recursive:!0});const j=(S==null?void 0:S.message)||"";if(d.debugLogger.log("install",`attempt #${ge} - ERROR: ${j}`),ge>=5)throw S}}catch(_e){throw d.debugLogger.log("install",`FAILED installation ${p} with error: ${_e}`),process.exitCode=1,_e}finally{await(0,n.existsAsync)(le)&&await u.default.promises.unlink(le)}return c(`${p} downloaded to ${O}`),!0}function m(p,O,z,$,q,J){const le=g.fork(f.default.join(__dirname,"oopDownloadBrowserMain.js")),_e=new v.ManualPromise,ge=l();le.on("message",S=>{(S==null?void 0:S.method)==="log"&&d.debugLogger.log("install",S.params.message),(S==null?void 0:S.method)==="progress"&&ge(S.params.done,S.params.total)}),le.on("exit",S=>{if(S!==0){_e.resolve({error:new Error(`Download failure, code=${S}`)});return}u.default.existsSync((0,o.browserDirectoryToMarkerFilePath)(O))?_e.resolve({error:null}):_e.resolve({error:new Error(`Download failure, ${(0,o.browserDirectoryToMarkerFilePath)(O)} does not exist`)})}),le.on("error",S=>{_e.resolve({error:S})}),d.debugLogger.log("install","running download:"),d.debugLogger.log("install",`-- from url: ${z}`),d.debugLogger.log("install",`-- to location: ${$}`);const ne={title:p,browserDirectory:O,url:z,zipPath:$,executablePath:q,socketTimeout:J,userAgent:(0,a.getUserAgent)()};return le.send({method:"download",params:ne}),_e}function c(p){const O=t.npm_config_loglevel;["silent","error","warn"].indexOf(O||"")>-1||console.log(p)}function l(){return process.stdout.isTTY?x():T()}function x(){let p,O=0;return(z,$)=>{p||(p=new s.progress(`${b($)} [:bar] :percent :etas`,{complete:"=",incomplete:" ",width:20,total:$}));const q=z-O;O=z,p.tick(q)}}function T(){let z=-1;return($,q)=>{const J=$/q,le=Math.floor(10*J);if(le>z){z=le;const _e=String(J*100|0).padStart(3);console.log(`|${"■".repeat(le*8)}${" ".repeat((10-le)*8)}| ${_e}% of ${b(q)}`)}}}function b(p){const O=p/1024/1024;return`${Math.round(O*10)/10} MiB`}return Fc}var Bc,lg;function nO(){if(lg)return Bc;lg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{deps:()=>e}),Bc=te(P);const e={"ubuntu20.04-x64":{tools:["xvfb","fonts-noto-color-emoji","ttf-unifont","libfontconfig","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","ttf-ubuntu-font-family"],chromium:["fonts-liberation","libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libegl1","libgbm1","libglib2.0-0","libgtk-3-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libx11-xcb1","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxrandr2","libxshmfence1"],firefox:["ffmpeg","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libglib2.0-0","libgtk-3-0","libpango-1.0-0","libpangocairo-1.0-0","libpangoft2-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrender1","libxt6","libxtst6"],webkit:["libenchant-2-2","libflite1","libx264-155","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libegl1","libenchant1c2a","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgdk-pixbuf2.0-0","libgl1","libgles2","libglib2.0-0","libgtk-3-0","libgudev-1.0-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu66","libjpeg-turbo8","libnghttp2-14","libnotify4","libopengl0","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libsecret-1-0","libvpx6","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp6","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1","libatomic1","libevent-2.1-7"],lib2package:{"libflite.so.1":"libflite1","libflite_usenglish.so.1":"libflite1","libflite_cmu_grapheme_lang.so.1":"libflite1","libflite_cmu_grapheme_lex.so.1":"libflite1","libflite_cmu_indic_lang.so.1":"libflite1","libflite_cmu_indic_lex.so.1":"libflite1","libflite_cmulex.so.1":"libflite1","libflite_cmu_time_awb.so.1":"libflite1","libflite_cmu_us_awb.so.1":"libflite1","libflite_cmu_us_kal16.so.1":"libflite1","libflite_cmu_us_kal.so.1":"libflite1","libflite_cmu_us_rms.so.1":"libflite1","libflite_cmu_us_slt.so.1":"libflite1","libx264.so":"libx264-155","libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libevdev.so.2":"libevdev2","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libgudev-1.0.so.0":"libgudev-1.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicui18n.so.66":"libicu66","libicuuc.so.66":"libicu66","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libOpenGL.so.0":"libopengl0","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6","libxshmfence.so.1":"libxshmfence1","libatomic.so.1":"libatomic1","libenchant-2.so.2":"libenchant-2-2","libevent-2.1.so.7":"libevent-2.1-7"}},"ubuntu22.04-x64":{tools:["xvfb","fonts-noto-color-emoji","fonts-unifont","libfontconfig1","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","fonts-freefont-ttf"],chromium:["libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libgbm1","libglib2.0-0","libnspr4","libnss3","libpango-1.0-0","libwayland-client0","libx11-6","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxkbcommon0","libxrandr2"],firefox:["ffmpeg","libasound2","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libglib2.0-0","libgtk-3-0","libpango-1.0-0","libpangocairo-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrandr2","libxrender1","libxtst6"],webkit:["libsoup-3.0-0","libenchant-2-2","gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libicu70","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libdbus-1-3","libdrm2","libegl1","libepoxy0","libevdev2","libffi7","libfontconfig1","libfreetype6","libgbm1","libgdk-pixbuf-2.0-0","libgles2","libglib2.0-0","libglx0","libgstreamer-gl1.0-0","libgstreamer-plugins-base1.0-0","libgstreamer1.0-0","libgtk-4-1","libgudev-1.0-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libjpeg-turbo8","liblcms2-2","libmanette-0.2-0","libnotify4","libopengl0","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libproxy1v5","libsecret-1-0","libwayland-client0","libwayland-egl1","libwayland-server0","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1","libx264-163","libatomic1","libevent-2.1-7","libavif13"],lib2package:{"libavif.so.13":"libavif13","libsoup-3.0.so.0":"libsoup-3.0-0","libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libepoxy.so.0":"libepoxy0","libevdev.so.2":"libevdev2","libffi.so.7":"libffi7","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf-2.0-0","libgdk-3.so.0":"libgtk-3-0","libgio-2.0.so.0":"libglib2.0-0","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libGLX.so.0":"libglx0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstallocators-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-4.so.1":"libgtk-4-1","libgudev-1.0.so.0":"libgudev-1.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libjpeg.so.8":"libjpeg-turbo8","liblcms2.so.2":"liblcms2-2","libmanette-0.2.so.0":"libmanette-0.2-0","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libOpenGL.so.0":"libopengl0","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpng16.so.16":"libpng16-16","libproxy.so.1":"libproxy1v5","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXtst.so.6":"libxtst6","libicui18n.so.60":"libicu70","libicuuc.so.66":"libicu70","libicui18n.so.66":"libicu70","libwebp.so.6":"libwebp6","libenchant-2.so.2":"libenchant-2-2","libx264.so":"libx264-163","libvpx.so.7":"libvpx7","libatomic.so.1":"libatomic1","libevent-2.1.so.7":"libevent-2.1-7"}},"ubuntu24.04-x64":{tools:["xvfb","fonts-noto-color-emoji","fonts-unifont","libfontconfig1","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","fonts-freefont-ttf"],chromium:["libasound2t64","libatk-bridge2.0-0t64","libatk1.0-0t64","libatspi2.0-0t64","libcairo2","libcups2t64","libdbus-1-3","libdrm2","libgbm1","libglib2.0-0t64","libnspr4","libnss3","libpango-1.0-0","libx11-6","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxkbcommon0","libxrandr2"],firefox:["libasound2t64","libatk1.0-0t64","libcairo-gobject2","libcairo2","libdbus-1-3","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libglib2.0-0t64","libgtk-3-0t64","libpango-1.0-0","libpangocairo-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrandr2","libxrender1"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libicu74","libatomic1","libatk-bridge2.0-0t64","libatk1.0-0t64","libcairo-gobject2","libcairo2","libdbus-1-3","libdrm2","libenchant-2-2","libepoxy0","libevent-2.1-7t64","libflite1","libfontconfig1","libfreetype6","libgbm1","libgdk-pixbuf-2.0-0","libgles2","libglib2.0-0t64","libgstreamer-gl1.0-0","libgstreamer-plugins-bad1.0-0","libgstreamer-plugins-base1.0-0","libgstreamer1.0-0","libgtk-4-1","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu74","libjpeg-turbo8","liblcms2-2","libmanette-0.2-0","libopus0","libpango-1.0-0","libpangocairo-1.0-0","libpng16-16t64","libsecret-1-0","libvpx9","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp7","libwebpdemux2","libwoff1","libx11-6","libxkbcommon0","libxml2","libxslt1.1","libx264-164","libavif16"],lib2package:{"libavif.so.16":"libavif16","libasound.so.2":"libasound2t64","libatk-1.0.so.0":"libatk1.0-0t64","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0t64","libatomic.so.1":"libatomic1","libatspi.so.0":"libatspi2.0-0t64","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2t64","libdbus-1.so.3":"libdbus-1-3","libdrm.so.2":"libdrm2","libenchant-2.so.2":"libenchant-2-2","libepoxy.so.0":"libepoxy0","libevent-2.1.so.7":"libevent-2.1-7t64","libflite_cmu_grapheme_lang.so.1":"libflite1","libflite_cmu_grapheme_lex.so.1":"libflite1","libflite_cmu_indic_lang.so.1":"libflite1","libflite_cmu_indic_lex.so.1":"libflite1","libflite_cmu_time_awb.so.1":"libflite1","libflite_cmu_us_awb.so.1":"libflite1","libflite_cmu_us_kal.so.1":"libflite1","libflite_cmu_us_kal16.so.1":"libflite1","libflite_cmu_us_rms.so.1":"libflite1","libflite_cmu_us_slt.so.1":"libflite1","libflite_cmulex.so.1":"libflite1","libflite_usenglish.so.1":"libflite1","libflite.so.1":"libflite1","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf-2.0-0","libgdk-3.so.0":"libgtk-3-0t64","libgio-2.0.so.0":"libglib2.0-0t64","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0t64","libgmodule-2.0.so.0":"libglib2.0-0t64","libgobject-2.0.so.0":"libglib2.0-0t64","libgstallocators-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgtk-3.so.0":"libgtk-3-0t64","libgtk-4.so.1":"libgtk-4-1","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicudata.so.74":"libicu74","libicui18n.so.74":"libicu74","libicuuc.so.74":"libicu74","libjpeg.so.8":"libjpeg-turbo8","liblcms2.so.2":"liblcms2-2","libmanette-0.2.so.0":"libmanette-0.2-0","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpng16.so.16":"libpng16-16t64","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-3.0.so.0":"libsoup-3.0-0","libvpx.so.9":"libvpx9","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.7":"libwebp7","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libx264.so":"libx264-164"}},"debian11-x64":{tools:["xvfb","fonts-noto-color-emoji","fonts-unifont","libfontconfig1","libfreetype6","xfonts-cyrillic","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","fonts-freefont-ttf"],chromium:["libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libgbm1","libglib2.0-0","libnspr4","libnss3","libpango-1.0-0","libwayland-client0","libx11-6","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxkbcommon0","libxrandr2"],firefox:["libasound2","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libglib2.0-0","libgtk-3-0","libharfbuzz0b","libpango-1.0-0","libpangocairo-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrandr2","libxrender1","libxtst6"],webkit:["gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libdbus-1-3","libdrm2","libegl1","libenchant-2-2","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgbm1","libgdk-pixbuf-2.0-0","libgles2","libglib2.0-0","libglx0","libgstreamer-gl1.0-0","libgstreamer-plugins-base1.0-0","libgstreamer1.0-0","libgtk-3-0","libgudev-1.0-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu67","libjpeg62-turbo","liblcms2-2","libmanette-0.2-0","libnghttp2-14","libnotify4","libopengl0","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libproxy1v5","libsecret-1-0","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp6","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1","libatomic1","libevent-2.1-7"],lib2package:{"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant-2.so.2":"libenchant-2-2","libepoxy.so.0":"libepoxy0","libevdev.so.2":"libevdev2","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf-2.0-0","libgdk-3.so.0":"libgtk-3-0","libgio-2.0.so.0":"libglib2.0-0","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libGLX.so.0":"libglx0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstallocators-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgtk-3.so.0":"libgtk-3-0","libgudev-1.0.so.0":"libgudev-1.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicui18n.so.67":"libicu67","libicuuc.so.67":"libicu67","libjpeg.so.62":"libjpeg62-turbo","liblcms2.so.2":"liblcms2-2","libmanette-0.2.so.0":"libmanette-0.2-0","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libOpenGL.so.0":"libopengl0","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpng16.so.16":"libpng16-16","libproxy.so.1":"libproxy1v5","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXtst.so.6":"libxtst6","libatomic.so.1":"libatomic1","libevent-2.1.so.7":"libevent-2.1-7"}},"debian12-x64":{tools:["xvfb","fonts-noto-color-emoji","fonts-unifont","libfontconfig1","libfreetype6","xfonts-scalable","fonts-liberation","fonts-ipafont-gothic","fonts-wqy-zenhei","fonts-tlwg-loma-otf","fonts-freefont-ttf"],chromium:["libasound2","libatk-bridge2.0-0","libatk1.0-0","libatspi2.0-0","libcairo2","libcups2","libdbus-1-3","libdrm2","libgbm1","libglib2.0-0","libnspr4","libnss3","libpango-1.0-0","libx11-6","libxcb1","libxcomposite1","libxdamage1","libxext6","libxfixes3","libxkbcommon0","libxrandr2"],firefox:["libasound2","libatk1.0-0","libcairo-gobject2","libcairo2","libdbus-1-3","libdbus-glib-1-2","libfontconfig1","libfreetype6","libgdk-pixbuf-2.0-0","libglib2.0-0","libgtk-3-0","libharfbuzz0b","libpango-1.0-0","libpangocairo-1.0-0","libx11-6","libx11-xcb1","libxcb-shm0","libxcb1","libxcomposite1","libxcursor1","libxdamage1","libxext6","libxfixes3","libxi6","libxrandr2","libxrender1","libxtst6"],webkit:["libsoup-3.0-0","gstreamer1.0-libav","gstreamer1.0-plugins-bad","gstreamer1.0-plugins-base","gstreamer1.0-plugins-good","libatk-bridge2.0-0","libatk1.0-0","libcairo2","libdbus-1-3","libdrm2","libegl1","libenchant-2-2","libepoxy0","libevdev2","libfontconfig1","libfreetype6","libgbm1","libgdk-pixbuf-2.0-0","libgles2","libglib2.0-0","libglx0","libgstreamer-gl1.0-0","libgstreamer-plugins-base1.0-0","libgstreamer1.0-0","libgtk-4-1","libgudev-1.0-0","libharfbuzz-icu0","libharfbuzz0b","libhyphen0","libicu72","libjpeg62-turbo","liblcms2-2","libmanette-0.2-0","libnotify4","libopengl0","libopenjp2-7","libopus0","libpango-1.0-0","libpng16-16","libproxy1v5","libsecret-1-0","libwayland-client0","libwayland-egl1","libwayland-server0","libwebp7","libwebpdemux2","libwoff1","libx11-6","libxcomposite1","libxdamage1","libxkbcommon0","libxml2","libxslt1.1","libatomic1","libevent-2.1-7","libavif15"],lib2package:{"libavif.so.15":"libavif15","libsoup-3.0.so.0":"libsoup-3.0-0","libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdrm.so.2":"libdrm2","libgbm.so.1":"libgbm1","libgio-2.0.so.0":"libglib2.0-0","libglib-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libpango-1.0.so.0":"libpango-1.0-0","libsmime3.so":"libnss3","libX11.so.6":"libx11-6","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libxkbcommon.so.0":"libxkbcommon0","libXrandr.so.2":"libxrandr2","libgtk-4.so.1":"libgtk-4-1"}}};return e["ubuntu20.04-arm64"]={tools:[...e["ubuntu20.04-x64"].tools],chromium:[...e["ubuntu20.04-x64"].chromium],firefox:[...e["ubuntu20.04-x64"].firefox],webkit:[...e["ubuntu20.04-x64"].webkit],lib2package:{...e["ubuntu20.04-x64"].lib2package}},e["ubuntu22.04-arm64"]={tools:[...e["ubuntu22.04-x64"].tools],chromium:[...e["ubuntu22.04-x64"].chromium],firefox:[...e["ubuntu22.04-x64"].firefox],webkit:[...e["ubuntu22.04-x64"].webkit],lib2package:{...e["ubuntu22.04-x64"].lib2package}},e["ubuntu24.04-arm64"]={tools:[...e["ubuntu24.04-x64"].tools],chromium:[...e["ubuntu24.04-x64"].chromium],firefox:[...e["ubuntu24.04-x64"].firefox],webkit:[...e["ubuntu24.04-x64"].webkit],lib2package:{...e["ubuntu24.04-x64"].lib2package}},e["debian11-arm64"]={tools:[...e["debian11-x64"].tools],chromium:[...e["debian11-x64"].chromium],firefox:[...e["debian11-x64"].firefox],webkit:[...e["debian11-x64"].webkit],lib2package:{...e["debian11-x64"].lib2package}},e["debian12-arm64"]={tools:[...e["debian12-x64"].tools],chromium:[...e["debian12-x64"].chromium],firefox:[...e["debian12-x64"].firefox],webkit:[...e["debian12-x64"].webkit],lib2package:{...e["debian12-x64"].lib2package}},Bc}var jc,ug;function Yn(){if(ug)return jc;ug=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{jsonStringifyForceASCII:()=>U,wrapInASCIIBox:()=>e}),jc=te(P);function e(C,w=0){const g=C.split(`
`),u=Math.max(...g.map(_=>_.length));return["╔"+"═".repeat(u+w*2)+"╗",...g.map(_=>"║"+" ".repeat(w)+_+" ".repeat(u-_.length+w)+"║"),"╚"+"═".repeat(u+w*2)+"╝"].join(`
`)}function U(C){return JSON.stringify(C).replace(/[\u007f-\uffff]/g,w=>"\\u"+("0000"+w.charCodeAt(0).toString(16)).slice(-4))}return jc}var Hc,dg;function ko(){if(dg)return Hc;dg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(v,a)=>{for(var s in a)i(v,s,{get:a[s],enumerable:!0})},e=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of R(a))!te.call(v,o)&&o!==s&&i(v,o,{get:()=>a[o],enumerable:!(n=E(a,o))||n.enumerable});return v},U=(v,a,s)=>(s=v!=null?r(V(v)):{},e(!v||!v.__esModule?i(s,"default",{value:v,enumerable:!0}):s,v)),C=v=>e(i({},"__esModule",{value:!0}),v),w={};P(w,{hostPlatform:()=>f,isOfficiallySupportedPlatform:()=>d}),Hc=C(w);var g=U(Je),u=Ww();function _(){if(t.PLAYWRIGHT_HOST_PLATFORM_OVERRIDE)return{hostPlatform:t.PLAYWRIGHT_HOST_PLATFORM_OVERRIDE,isOfficiallySupportedPlatform:!1};const v=g.default.platform();if(v==="darwin"){const a=g.default.release().split(".").map(n=>parseInt(n,10));let s="";return a[0]<18?s="mac10.13":a[0]===18?s="mac10.14":a[0]===19?s="mac10.15":(s="mac"+Math.min(a[0]-9,15),g.default.cpus().some(o=>o.model.includes("Apple"))&&(s+="-arm64")),{hostPlatform:s,isOfficiallySupportedPlatform:!0}}if(v==="linux"){if(!["x64","arm64"].includes(g.default.arch()))return{hostPlatform:"<unknown>",isOfficiallySupportedPlatform:!1};const a="-"+g.default.arch(),s=(0,u.getLinuxDistributionInfoSync)();if((s==null?void 0:s.id)==="ubuntu"||(s==null?void 0:s.id)==="pop"||(s==null?void 0:s.id)==="neon"||(s==null?void 0:s.id)==="tuxedo"){const n=(s==null?void 0:s.id)==="ubuntu",o=s==null?void 0:s.version,h=parseInt(s.version,10);return h<20?{hostPlatform:"ubuntu18.04"+a,isOfficiallySupportedPlatform:!1}:h<22?{hostPlatform:"ubuntu20.04"+a,isOfficiallySupportedPlatform:n&&o==="20.04"}:h<24?{hostPlatform:"ubuntu22.04"+a,isOfficiallySupportedPlatform:n&&o==="22.04"}:h<26?{hostPlatform:"ubuntu24.04"+a,isOfficiallySupportedPlatform:n&&o==="24.04"}:{hostPlatform:"ubuntu"+s.version+a,isOfficiallySupportedPlatform:!1}}if((s==null?void 0:s.id)==="linuxmint"){const n=parseInt(s.version,10);return n<=20?{hostPlatform:"ubuntu20.04"+a,isOfficiallySupportedPlatform:!1}:n===21?{hostPlatform:"ubuntu22.04"+a,isOfficiallySupportedPlatform:!1}:{hostPlatform:"ubuntu24.04"+a,isOfficiallySupportedPlatform:!1}}if((s==null?void 0:s.id)==="debian"||(s==null?void 0:s.id)==="raspbian"){const n=(s==null?void 0:s.id)==="debian";if((s==null?void 0:s.version)==="11")return{hostPlatform:"debian11"+a,isOfficiallySupportedPlatform:n};if((s==null?void 0:s.version)==="12")return{hostPlatform:"debian12"+a,isOfficiallySupportedPlatform:n};if((s==null?void 0:s.version)==="")return{hostPlatform:"debian12"+a,isOfficiallySupportedPlatform:n}}return{hostPlatform:"ubuntu20.04"+a,isOfficiallySupportedPlatform:!1}}return v==="win32"?{hostPlatform:"win64",isOfficiallySupportedPlatform:!0}:{hostPlatform:"<unknown>",isOfficiallySupportedPlatform:!1}}const{hostPlatform:f,isOfficiallySupportedPlatform:d}=_();return Hc}var Uc,hg;function rf(){if(hg)return Uc;hg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{spawnAsync:()=>U}),Uc=te(P);var e=Je;function U(C,w,g={}){const u=(0,e.spawn)(C,w,Object.assign({windowsHide:!0},g));return new Promise(_=>{let f="",d="";u.stdout&&u.stdout.on("data",v=>f+=v.toString()),u.stderr&&u.stderr.on("data",v=>d+=v.toString()),u.on("close",v=>_({stdout:f,stderr:d,code:v})),u.on("error",v=>_({stdout:f,stderr:d,code:0,error:v}))})}return Uc}var qc,pg;function $c(){if(pg)return qc;pg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(I,D)=>{for(var ie in D)i(I,ie,{get:D[ie],enumerable:!0})},e=(I,D,ie,he)=>{if(D&&typeof D=="object"||typeof D=="function")for(let me of R(D))!te.call(I,me)&&me!==ie&&i(I,me,{get:()=>D[me],enumerable:!(he=E(D,me))||he.enumerable});return I},U=(I,D,ie)=>(ie=I!=null?r(V(I)):{},e(!I||!I.__esModule?i(ie,"default",{value:I,enumerable:!0}):ie,I)),C=I=>e(i({},"__esModule",{value:!0}),I),w={};P(w,{dockerVersion:()=>x,installDependenciesLinux:()=>z,installDependenciesWindows:()=>O,readDockerVersionSync:()=>T,transformCommandsForRoot:()=>y,validateDependenciesLinux:()=>q,validateDependenciesWindows:()=>$,writeDockerVersion:()=>l}),qc=C(w);var g=U(Je),u=U(Je),_=U(Je),f=U(Je),d=nO(),v=Yn(),a=ko(),s=rf(),n=xi(),o=ui();const h=f.default.join(__dirname,"..","..","..","bin"),m=t.PW_CLI_DISPLAY_VERSION||zw.version,c="/ms-playwright/.docker-info";async function l(I){await u.default.promises.mkdir(f.default.dirname(c),{recursive:!0}),await u.default.promises.writeFile(c,JSON.stringify(x(I),null,2),"utf8"),await u.default.promises.chmod(c,511)}function x(I){return{driverVersion:m,dockerImageName:I.replace("%version%",m)}}function T(){try{const I=JSON.parse(u.default.readFileSync(c,"utf8"));return{...I,dockerImageNameTemplate:I.dockerImageName.replace(I.driverVersion,"%version%")}}catch{return null}}const b=I=>process.platform==="win32"?I.endsWith(".exe"):u.default.promises.access(I,u.default.constants.X_OK).then(()=>!0).catch(()=>!1);function p(){if(_.default.platform()!=="win32"||_.default.arch()!=="x64")return!1;const[I,D]=_.default.release().split(".").map(ie=>parseInt(ie,10));return I>6||I===6&&D>1}async function O(I,D){if(I.has("chromium")){const ie="powershell.exe",he=["-ExecutionPolicy","Bypass","-File",f.default.join(h,"install_media_pack.ps1")];if(D){console.log(`${ie} ${j(he).join(" ")}`);return}const{code:me}=await(0,s.spawnAsync)(ie,he,{cwd:h,stdio:"inherit"});if(me!==0)throw new Error("Failed to install windows dependencies!")}}async function z(I,D){const ie=[],he=a.hostPlatform;a.isOfficiallySupportedPlatform||console.warn(`BEWARE: your OS is not officially supported by Playwright; installing dependencies for ${he} as a fallback.`);for(const Le of I){const qe=d.deps[he];if(!qe){console.warn(`Cannot install dependencies for ${he} with Playwright ${(0,n.getPlaywrightVersion)()}!`);return}ie.push(...qe[Le])}const me=Array.from(new Set(ie));D||console.log("Installing dependencies...");const ye=[];ye.push("apt-get update"),ye.push(["apt-get","install","-y","--no-install-recommends",...me].join(" "));const{command:Se,args:Oe,elevatedPermissions:Pe}=await y(ye);if(D){console.log(`${Se} ${j(Oe).join(" ")}`);return}Pe&&console.log("Switching to root user to install dependencies...");const Ne=g.spawn(Se,Oe,{stdio:"inherit"});await new Promise((Le,qe)=>{Ne.on("exit",Ge=>Ge===0?Le():qe(new Error(`Installation process exited with code: ${Ge}`))),Ne.on("error",qe)})}async function $(I,D){const ie=D,he=[];for(const Le of ie)he.push(...await le(Le));const me=await Promise.all(he.map(Le=>_e(I,Le))),ye=new Set;for(const Le of me)for(const qe of Le)ye.add(qe);if(!ye.size)return;let Se=!1,Oe=!1;for(const Le of ye)Le.startsWith("api-ms-win-crt")||Le==="vcruntime140.dll"||Le==="vcruntime140_1.dll"||Le==="msvcp140.dll"?Se=!0:(Le==="mf.dll"||Le==="mfplat.dll"||Le==="msmpeg2vdec.dll"||Le==="evr.dll"||Le==="avrt.dll")&&(Oe=!0);const Pe=[];Se&&Pe.push("Some of the Universal C Runtime files cannot be found on the system. You can fix","that by installing Microsoft Visual C++ Redistributable for Visual Studio from:","https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads",""),Oe&&Pe.push("Some of the Media Foundation files cannot be found on the system. If you are","on Windows Server try fixing this by running the following command in PowerShell","as Administrator:","","    Install-WindowsFeature Server-Media-Foundation","","For Windows N editions visit:","https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions",""),Pe.push("Full list of missing libraries:",`    ${[...ye].join(`
    `)}`,"");const Ne=`Host system is missing dependencies!

${Pe.join(`
`)}`;if(p())throw new Error(Ne);console.warn("WARNING: running on unsupported windows version!"),console.warn(Ne)}async function q(I,D,ie){var ot,dt;const he=D,me=[];for(const yt of he)me.push(...await le(yt));const ye=await Promise.all(me.map(yt=>ge(yt,he))),Se=new Set;for(const yt of ye)for(const nt of yt)Se.add(nt);for(const yt of await ne(ie))Se.add(yt);if(!Se.size)return;const Oe=new Set(Se),Pe=new Set,Ne=d.deps[a.hostPlatform]?{...((ot=d.deps[a.hostPlatform])==null?void 0:ot.lib2package)||{},...S}:{};for(const yt of Se){const nt=Ne[yt];nt&&(Pe.add(nt),Se.delete(yt))}const Le=(dt=process.getuid)!=null&&dt.call(process)&&_.default.platform()!=="win32"?"sudo ":"",qe=T(),Ge=["Host system is missing dependencies to run browsers."];if(qe&&!qe.driverVersion.startsWith((0,n.getPlaywrightVersion)(!0)+".")){const yt=(0,n.getPlaywrightVersion)(),nt=qe.dockerImageName.replace(qe.driverVersion,yt);Ge.push("This is most likely due to Docker image version not matching Playwright version:",`- Playwright  : ${yt}`,`- Docker image: ${qe.driverVersion}`,"","Either:",`- (recommended) use Docker image "${nt}"`,"- (alternative 1) run the following command inside Docker to install missing dependencies:","",`    ${Le}${(0,o.buildPlaywrightCLICommand)(I,"install-deps")}`,"","- (alternative 2) use apt inside Docker:","",`    ${Le}apt-get install ${[...Pe].join(`\\
        `)}`,"","<3 Playwright Team")}else Pe.size&&!Se.size?Ge.push("Please install them with the following command:","",`    ${Le}${(0,o.buildPlaywrightCLICommand)(I,"install-deps")}`,"","Alternatively, use apt:",`    ${Le}apt-get install ${[...Pe].join(`\\
        `)}`,"","<3 Playwright Team"):Ge.push("Missing libraries:",...[...Oe].map(yt=>"    "+yt));throw new Error(`
`+(0,v.wrapInASCIIBox)(Ge.join(`
`),1))}function J(I){switch(_.default.platform()){case"linux":return I.endsWith(".so")||I.includes(".so.");case"win32":return I.endsWith(".dll");default:return!1}}async function le(I){if(!u.default.existsSync(I))return[];const D=(await u.default.promises.readdir(I)).map(ye=>f.default.resolve(I,ye)),ie=await Promise.all(D.map(ye=>u.default.promises.stat(ye))),he=D.filter((ye,Se)=>ie[Se].isFile());return(await Promise.all(he.map(async ye=>{const Se=f.default.basename(ye).toLowerCase();return J(Se)||await b(ye)?ye:!1}))).filter(Boolean)}async function _e(I,D){const ie=o.registry.findExecutable("winldd").executablePathOrDie(I),he=f.default.dirname(D),{stdout:me,code:ye}=await(0,s.spawnAsync)(ie,[D],{cwd:he,env:{...t,LD_LIBRARY_PATH:t.LD_LIBRARY_PATH?`${t.LD_LIBRARY_PATH}:${he}`:he}});return ye!==0?[]:me.split(`
`).map(Oe=>Oe.trim()).filter(Oe=>Oe.endsWith("not found")&&Oe.includes("=>")).map(Oe=>Oe.split("=>")[0].trim().toLowerCase())}async function ge(I,D){const ie=f.default.dirname(I);let he=D.join(":");t.LD_LIBRARY_PATH&&(he=`${t.LD_LIBRARY_PATH}:${he}`);const{stdout:me,code:ye}=await(0,s.spawnAsync)("ldd",[I],{cwd:ie,env:{...t,LD_LIBRARY_PATH:he}});return ye!==0?[]:me.split(`
`).map(Oe=>Oe.trim()).filter(Oe=>Oe.endsWith("not found")&&Oe.includes("=>")).map(Oe=>Oe.split("=>")[0].trim())}async function ne(I){if(!I.length)return[];const{stdout:D,code:ie,error:he}=await(0,s.spawnAsync)("/sbin/ldconfig",["-p"],{});if(ie!==0||he)return[];const me=ye=>D.toLowerCase().includes(ye.toLowerCase());return I.filter(ye=>!me(ye))}const S={"libx264.so":"gstreamer1.0-libav"};function j(I){return I.map(D=>D.includes(" ")?`"${D}"`:D)}async function y(I){var he;return((he=process.getuid)==null?void 0:he.call(process))===0?{command:"sh",args:["-c",`${I.join("&& ")}`],elevatedPermissions:!1}:(await(0,s.spawnAsync)("which",["sudo"])).code===0?{command:"sudo",args:["--","sh","-c",`${I.join("&& ")}`],elevatedPermissions:!0}:{command:"su",args:["root","-c",`${I.join("&& ")}`],elevatedPermissions:!0}}return qc}var co={exports:{}},Wc,fg;function iO(){if(fg)return Wc;fg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{noColors:()=>U,webColors:()=>e}),Wc=te(P);const e={enabled:!0,reset:w=>C(0,0,w),bold:w=>C(1,22,w),dim:w=>C(2,22,w),italic:w=>C(3,23,w),underline:w=>C(4,24,w),inverse:w=>C(7,27,w),hidden:w=>C(8,28,w),strikethrough:w=>C(9,29,w),black:w=>C(30,39,w),red:w=>C(31,39,w),green:w=>C(32,39,w),yellow:w=>C(33,39,w),blue:w=>C(34,39,w),magenta:w=>C(35,39,w),cyan:w=>C(36,39,w),white:w=>C(37,39,w),gray:w=>C(90,39,w),grey:w=>C(90,39,w)},U={enabled:!1,reset:w=>w,bold:w=>w,dim:w=>w,italic:w=>w,underline:w=>w,inverse:w=>w,hidden:w=>w,strikethrough:w=>w,black:w=>w,red:w=>w,green:w=>w,yellow:w=>w,blue:w=>w,magenta:w=>w,cyan:w=>w,white:w=>w,gray:w=>w,grey:w=>w},C=(w,g,u)=>`\x1B[${w}m${u}\x1B[${g}m`;return Wc}var zc,mg;function Gr(){if(mg)return zc;mg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{assert:()=>e}),zc=te(P);function e(U,C){if(!U)throw new Error(C||"Assertion error")}return zc}var Vc,gg;function zi(){if(gg)return Vc;gg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{headersArrayToObject:()=>U,headersObjectToArray:()=>e}),Vc=te(P);function e(C,w,g){g||(g=w);const u=[];for(const _ in C){const f=C[_];if(f!==void 0)if(w){const d=_.toLowerCase()==="set-cookie"?g:w;for(const v of f.split(d))u.push({name:_,value:v.trim()})}else u.push({name:_,value:f})}return u}function U(C,w){const g={};for(const{name:u,value:_}of C)g[w?u.toLowerCase():u]=_;return g}return Vc}var Kc,_g;function sO(){if(_g)return Kc;_g=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(st,xe)=>{for(var be in xe)t(st,be,{get:xe[be],enumerable:!0})},V=(st,xe,be,ve)=>{if(xe&&typeof xe=="object"||typeof xe=="function")for(let Ce of i(xe))!E.call(st,Ce)&&Ce!==be&&t(st,Ce,{get:()=>xe[Ce],enumerable:!(ve=r(xe,Ce))||ve.enumerable});return st},te=st=>V(t({},"__esModule",{value:!0}),st),P={};R(P,{AtKeywordToken:()=>Le,BadStringToken:()=>x,BadURLToken:()=>T,CDCToken:()=>O,CDOToken:()=>p,CSSParserToken:()=>l,CloseCurlyToken:()=>_e,CloseParenToken:()=>j,CloseSquareToken:()=>ne,ColonToken:()=>z,ColumnToken:()=>me,CommaToken:()=>q,DashMatchToken:()=>I,DelimToken:()=>Se,DimensionToken:()=>nt,EOFToken:()=>ye,FunctionToken:()=>Ne,GroupingToken:()=>J,HashToken:()=>qe,IdentToken:()=>Pe,IncludeMatchToken:()=>y,InvalidCharacterError:()=>o,NumberToken:()=>dt,OpenCurlyToken:()=>le,OpenParenToken:()=>S,OpenSquareToken:()=>ge,PercentageToken:()=>yt,PrefixMatchToken:()=>D,SemicolonToken:()=>$,StringToken:()=>Ge,StringValuedToken:()=>Oe,SubstringMatchToken:()=>he,SuffixMatchToken:()=>ie,URLToken:()=>ot,WhitespaceToken:()=>b,tokenize:()=>c}),Kc=te(P);const e=function(st,xe,be){return st>=xe&&st<=be};function U(st){return e(st,48,57)}function C(st){return U(st)||e(st,65,70)||e(st,97,102)}function w(st){return e(st,65,90)}function g(st){return e(st,97,122)}function u(st){return w(st)||g(st)}function _(st){return st>=128}function f(st){return u(st)||_(st)||st===95}function d(st){return f(st)||U(st)||st===45}function v(st){return e(st,0,8)||st===11||e(st,14,31)||st===127}function a(st){return st===10}function s(st){return a(st)||st===9||st===32}const n=1114111;class o extends Error{constructor(xe){super(xe),this.name="InvalidCharacterError"}}function h(st){const xe=[];for(let be=0;be<st.length;be++){let ve=st.charCodeAt(be);if(ve===13&&st.charCodeAt(be+1)===10&&(ve=10,be++),(ve===13||ve===12)&&(ve=10),ve===0&&(ve=65533),e(ve,55296,56319)&&e(st.charCodeAt(be+1),56320,57343)){const Ce=ve-55296,Ke=st.charCodeAt(be+1)-56320;ve=Math.pow(2,16)+Ce*Math.pow(2,10)+Ke,be++}xe.push(ve)}return xe}function m(st){if(st<=65535)return String.fromCharCode(st);st-=Math.pow(2,16);const xe=Math.floor(st/Math.pow(2,10))+55296,be=st%Math.pow(2,10)+56320;return String.fromCharCode(xe)+String.fromCharCode(be)}function c(st){const xe=h(st);let be=-1;const ve=[];let Ce;const Ke=function(qt){return qt>=xe.length?-1:xe[qt]},ze=function(qt){if(qt===void 0&&(qt=1),qt>3)throw"Spec Error: no more than three codepoints of lookahead.";return Ke(be+qt)},Re=function(qt){return qt===void 0&&(qt=1),be+=qt,Ce=Ke(be),!0},Be=function(){return be-=1,!0},it=function(qt){return qt===void 0&&(qt=Ce),qt===-1},Qe=function(){if(Et(),Re(),s(Ce)){for(;s(ze());)Re();return new b}else{if(Ce===34)return Kt();if(Ce===35)if(d(ze())||lt(ze(1),ze(2))){const qt=new qe("");return Bt(ze(1),ze(2),ze(3))&&(qt.type="id"),qt.value=Rr(),qt}else return new Se(Ce);else return Ce===36?ze()===61?(Re(),new ie):new Se(Ce):Ce===39?Kt():Ce===40?new S:Ce===41?new j:Ce===42?ze()===61?(Re(),new he):new Se(Ce):Ce===43?Sr()?(Be(),pt()):new Se(Ce):Ce===44?new q:Ce===45?Sr()?(Be(),pt()):ze(1)===45&&ze(2)===62?(Re(2),new O):hr()?(Be(),Rt()):new Se(Ce):Ce===46?Sr()?(Be(),pt()):new Se(Ce):Ce===58?new z:Ce===59?new $:Ce===60?ze(1)===33&&ze(2)===45&&ze(3)===45?(Re(3),new p):new Se(Ce):Ce===64?Bt(ze(1),ze(2),ze(3))?new Le(Rr()):new Se(Ce):Ce===91?new ge:Ce===92?It()?(Be(),Rt()):new Se(Ce):Ce===93?new ne:Ce===94?ze()===61?(Re(),new D):new Se(Ce):Ce===123?new le:Ce===124?ze()===61?(Re(),new I):ze()===124?(Re(),new me):new Se(Ce):Ce===125?new _e:Ce===126?ze()===61?(Re(),new y):new Se(Ce):U(Ce)?(Be(),pt()):f(Ce)?(Be(),Rt()):it()?new ye:new Se(Ce)}},Et=function(){for(;ze(1)===47&&ze(2)===42;)for(Re(2);;)if(Re(),Ce===42&&ze()===47){Re();break}else if(it())return},pt=function(){const qt=On();if(Bt(ze(1),ze(2),ze(3))){const pr=new nt;return pr.value=qt.value,pr.repr=qt.repr,pr.type=qt.type,pr.unit=Rr(),pr}else if(ze()===37){Re();const pr=new yt;return pr.value=qt.value,pr.repr=qt.repr,pr}else{const pr=new dt;return pr.value=qt.value,pr.repr=qt.repr,pr.type=qt.type,pr}},Rt=function(){const qt=Rr();if(qt.toLowerCase()==="url"&&ze()===40){for(Re();s(ze(1))&&s(ze(2));)Re();return ze()===34||ze()===39?new Ne(qt):s(ze())&&(ze(2)===34||ze(2)===39)?new Ne(qt):Ve()}else return ze()===40?(Re(),new Ne(qt)):new Pe(qt)},Kt=function(qt){qt===void 0&&(qt=Ce);let pr="";for(;Re();){if(Ce===qt||it())return new Ge(pr);if(a(Ce))return Be(),new x;Ce===92?it(ze())||(a(ze())?Re():pr+=m(ct())):pr+=m(Ce)}throw new Error("Internal error")},Ve=function(){const qt=new ot("");for(;s(ze());)Re();if(it(ze()))return qt;for(;Re();){if(Ce===41||it())return qt;if(s(Ce)){for(;s(ze());)Re();return ze()===41||it(ze())?(Re(),qt):(Qn(),new T)}else{if(Ce===34||Ce===39||Ce===40||v(Ce))return Qn(),new T;if(Ce===92)if(It())qt.value+=m(ct());else return Qn(),new T;else qt.value+=m(Ce)}}throw new Error("Internal error")},ct=function(){if(Re(),C(Ce)){const qt=[Ce];for(let Wr=0;Wr<5&&C(ze());Wr++)Re(),qt.push(Ce);s(ze())&&Re();let pr=parseInt(qt.map(function(Wr){return String.fromCharCode(Wr)}).join(""),16);return pr>n&&(pr=65533),pr}else return it()?65533:Ce},lt=function(qt,pr){return!(qt!==92||a(pr))},It=function(){return lt(Ce,ze())},Bt=function(qt,pr,Wr){return qt===45?f(pr)||pr===45||lt(pr,Wr):f(qt)?!0:qt===92?lt(qt,pr):!1},hr=function(){return Bt(Ce,ze(1),ze(2))},ur=function(qt,pr,Wr){return qt===43||qt===45?!!(U(pr)||pr===46&&U(Wr)):qt===46?!!U(pr):!!U(qt)},Sr=function(){return ur(Ce,ze(1),ze(2))},Rr=function(){let qt="";for(;Re();)if(d(Ce))qt+=m(Ce);else if(It())qt+=m(ct());else return Be(),qt;throw new Error("Internal parse error")},On=function(){let qt="",pr="integer";for((ze()===43||ze()===45)&&(Re(),qt+=m(Ce));U(ze());)Re(),qt+=m(Ce);if(ze(1)===46&&U(ze(2)))for(Re(),qt+=m(Ce),Re(),qt+=m(Ce),pr="number";U(ze());)Re(),qt+=m(Ce);const Wr=ze(1),ts=ze(2),da=ze(3);if((Wr===69||Wr===101)&&U(ts))for(Re(),qt+=m(Ce),Re(),qt+=m(Ce),pr="number";U(ze());)Re(),qt+=m(Ce);else if((Wr===69||Wr===101)&&(ts===43||ts===45)&&U(da))for(Re(),qt+=m(Ce),Re(),qt+=m(Ce),Re(),qt+=m(Ce),pr="number";U(ze());)Re(),qt+=m(Ce);const ha=Pi(qt);return{type:pr,value:ha,repr:qt}},Pi=function(qt){return+qt},Qn=function(){for(;Re();){if(Ce===41||it())return;It()&&ct()}};let ki=0;for(;!it(ze());)if(ve.push(Qe()),ki++,ki>xe.length*2)throw new Error("I'm infinite-looping!");return ve}class l{constructor(){this.tokenType=""}toJSON(){return{token:this.tokenType}}toString(){return this.tokenType}toSource(){return""+this}}class x extends l{constructor(){super(...arguments),this.tokenType="BADSTRING"}}class T extends l{constructor(){super(...arguments),this.tokenType="BADURL"}}class b extends l{constructor(){super(...arguments),this.tokenType="WHITESPACE"}toString(){return"WS"}toSource(){return" "}}class p extends l{constructor(){super(...arguments),this.tokenType="CDO"}toSource(){return"<!--"}}class O extends l{constructor(){super(...arguments),this.tokenType="CDC"}toSource(){return"-->"}}class z extends l{constructor(){super(...arguments),this.tokenType=":"}}class $ extends l{constructor(){super(...arguments),this.tokenType=";"}}class q extends l{constructor(){super(...arguments),this.tokenType=","}}class J extends l{constructor(){super(...arguments),this.value="",this.mirror=""}}class le extends J{constructor(){super(),this.tokenType="{",this.value="{",this.mirror="}"}}class _e extends J{constructor(){super(),this.tokenType="}",this.value="}",this.mirror="{"}}class ge extends J{constructor(){super(),this.tokenType="[",this.value="[",this.mirror="]"}}class ne extends J{constructor(){super(),this.tokenType="]",this.value="]",this.mirror="["}}class S extends J{constructor(){super(),this.tokenType="(",this.value="(",this.mirror=")"}}class j extends J{constructor(){super(),this.tokenType=")",this.value=")",this.mirror="("}}class y extends l{constructor(){super(...arguments),this.tokenType="~="}}class I extends l{constructor(){super(...arguments),this.tokenType="|="}}class D extends l{constructor(){super(...arguments),this.tokenType="^="}}class ie extends l{constructor(){super(...arguments),this.tokenType="$="}}class he extends l{constructor(){super(...arguments),this.tokenType="*="}}class me extends l{constructor(){super(...arguments),this.tokenType="||"}}class ye extends l{constructor(){super(...arguments),this.tokenType="EOF"}toSource(){return""}}class Se extends l{constructor(xe){super(),this.tokenType="DELIM",this.value="",this.value=m(xe)}toString(){return"DELIM("+this.value+")"}toJSON(){const xe=this.constructor.prototype.constructor.prototype.toJSON.call(this);return xe.value=this.value,xe}toSource(){return this.value==="\\"?`\\
`:this.value}}class Oe extends l{constructor(){super(...arguments),this.value=""}ASCIIMatch(xe){return this.value.toLowerCase()===xe.toLowerCase()}toJSON(){const xe=this.constructor.prototype.constructor.prototype.toJSON.call(this);return xe.value=this.value,xe}}class Pe extends Oe{constructor(xe){super(),this.tokenType="IDENT",this.value=xe}toString(){return"IDENT("+this.value+")"}toSource(){return gt(this.value)}}class Ne extends Oe{constructor(xe){super(),this.tokenType="FUNCTION",this.value=xe,this.mirror=")"}toString(){return"FUNCTION("+this.value+")"}toSource(){return gt(this.value)+"("}}class Le extends Oe{constructor(xe){super(),this.tokenType="AT-KEYWORD",this.value=xe}toString(){return"AT("+this.value+")"}toSource(){return"@"+gt(this.value)}}class qe extends Oe{constructor(xe){super(),this.tokenType="HASH",this.value=xe,this.type="unrestricted"}toString(){return"HASH("+this.value+")"}toJSON(){const xe=this.constructor.prototype.constructor.prototype.toJSON.call(this);return xe.value=this.value,xe.type=this.type,xe}toSource(){return this.type==="id"?"#"+gt(this.value):"#"+Ut(this.value)}}class Ge extends Oe{constructor(xe){super(),this.tokenType="STRING",this.value=xe}toString(){return'"'+Xt(this.value)+'"'}}class ot extends Oe{constructor(xe){super(),this.tokenType="URL",this.value=xe}toString(){return"URL("+this.value+")"}toSource(){return'url("'+Xt(this.value)+'")'}}class dt extends l{constructor(){super(),this.tokenType="NUMBER",this.type="integer",this.repr=""}toString(){return this.type==="integer"?"INT("+this.value+")":"NUMBER("+this.value+")"}toJSON(){const xe=super.toJSON();return xe.value=this.value,xe.type=this.type,xe.repr=this.repr,xe}toSource(){return this.repr}}class yt extends l{constructor(){super(),this.tokenType="PERCENTAGE",this.repr=""}toString(){return"PERCENTAGE("+this.value+")"}toJSON(){const xe=this.constructor.prototype.constructor.prototype.toJSON.call(this);return xe.value=this.value,xe.repr=this.repr,xe}toSource(){return this.repr+"%"}}class nt extends l{constructor(){super(),this.tokenType="DIMENSION",this.type="integer",this.repr="",this.unit=""}toString(){return"DIM("+this.value+","+this.unit+")"}toJSON(){const xe=this.constructor.prototype.constructor.prototype.toJSON.call(this);return xe.value=this.value,xe.type=this.type,xe.repr=this.repr,xe.unit=this.unit,xe}toSource(){const xe=this.repr;let be=gt(this.unit);return be[0].toLowerCase()==="e"&&(be[1]==="-"||e(be.charCodeAt(1),48,57))&&(be="\\65 "+be.slice(1,be.length)),xe+be}}function gt(st){st=""+st;let xe="";const be=st.charCodeAt(0);for(let ve=0;ve<st.length;ve++){const Ce=st.charCodeAt(ve);if(Ce===0)throw new o("Invalid character: the input contains U+0000.");e(Ce,1,31)||Ce===127||ve===0&&e(Ce,48,57)||ve===1&&e(Ce,48,57)&&be===45?xe+="\\"+Ce.toString(16)+" ":Ce>=128||Ce===45||Ce===95||e(Ce,48,57)||e(Ce,65,90)||e(Ce,97,122)?xe+=st[ve]:xe+="\\"+st[ve]}return xe}function Ut(st){st=""+st;let xe="";for(let be=0;be<st.length;be++){const ve=st.charCodeAt(be);if(ve===0)throw new o("Invalid character: the input contains U+0000.");ve>=128||ve===45||ve===95||e(ve,48,57)||e(ve,65,90)||e(ve,97,122)?xe+=st[be]:xe+="\\"+ve.toString(16)+" "}return xe}function Xt(st){st=""+st;let xe="";for(let be=0;be<st.length;be++){const ve=st.charCodeAt(be);if(ve===0)throw new o("Invalid character: the input contains U+0000.");e(ve,1,31)||ve===127?xe+="\\"+ve.toString(16)+" ":ve===34||ve===92?xe+="\\"+st[be]:xe+=st[be]}return xe}return Kc}var Gc,bg;function vg(){if(bg)return Gc;bg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},P=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!V.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},e=(d,v,a)=>(a=d!=null?t(R(d)):{},P(!d||!d.__esModule?r(a,"default",{value:d,enumerable:!0}):a,d)),U=d=>P(r({},"__esModule",{value:!0}),d),C={};te(C,{InvalidSelectorError:()=>g,isInvalidSelectorError:()=>u,parseCSS:()=>_,serializeSelector:()=>f}),Gc=U(C);var w=e(sO());class g extends Error{}function u(d){return d instanceof g}function _(d,v){let a;try{a=w.tokenize(d),a[a.length-1]instanceof w.EOFToken||a.push(new w.EOFToken)}catch(y){const I=y.message+` while parsing css selector "${d}". Did you mean to CSS.escape it?`,D=(y.stack||"").indexOf(y.message);throw D!==-1&&(y.stack=y.stack.substring(0,D)+I+y.stack.substring(D+y.message.length)),y.message=I,y}const s=a.find(y=>y instanceof w.AtKeywordToken||y instanceof w.BadStringToken||y instanceof w.BadURLToken||y instanceof w.ColumnToken||y instanceof w.CDOToken||y instanceof w.CDCToken||y instanceof w.SemicolonToken||y instanceof w.OpenCurlyToken||y instanceof w.CloseCurlyToken||y instanceof w.URLToken||y instanceof w.PercentageToken);if(s)throw new g(`Unsupported token "${s.toSource()}" while parsing css selector "${d}". Did you mean to CSS.escape it?`);let n=0;const o=new Set;function h(){return new g(`Unexpected token "${a[n].toSource()}" while parsing css selector "${d}". Did you mean to CSS.escape it?`)}function m(){for(;a[n]instanceof w.WhitespaceToken;)n++}function c(y=n){return a[y]instanceof w.IdentToken}function l(y=n){return a[y]instanceof w.StringToken}function x(y=n){return a[y]instanceof w.NumberToken}function T(y=n){return a[y]instanceof w.CommaToken}function b(y=n){return a[y]instanceof w.OpenParenToken}function p(y=n){return a[y]instanceof w.CloseParenToken}function O(y=n){return a[y]instanceof w.FunctionToken}function z(y=n){return a[y]instanceof w.DelimToken&&a[y].value==="*"}function $(y=n){return a[y]instanceof w.EOFToken}function q(y=n){return a[y]instanceof w.DelimToken&&[">","+","~"].includes(a[y].value)}function J(y=n){return T(y)||p(y)||$(y)||q(y)||a[y]instanceof w.WhitespaceToken}function le(){const y=[_e()];for(;m(),!!T();)n++,y.push(_e());return y}function _e(){return m(),x()||l()?a[n++].value:ge()}function ge(){const y={simples:[]};for(m(),q()?y.simples.push({selector:{functions:[{name:"scope",args:[]}]},combinator:""}):y.simples.push({selector:ne(),combinator:""});;){if(m(),q())y.simples[y.simples.length-1].combinator=a[n++].value,m();else if(J())break;y.simples.push({combinator:"",selector:ne()})}return y}function ne(){let y="";const I=[];for(;!J();)if(c()||z())y+=a[n++].toSource();else if(a[n]instanceof w.HashToken)y+=a[n++].toSource();else if(a[n]instanceof w.DelimToken&&a[n].value===".")if(n++,c())y+="."+a[n++].toSource();else throw h();else if(a[n]instanceof w.ColonToken)if(n++,c())if(!v.has(a[n].value.toLowerCase()))y+=":"+a[n++].toSource();else{const D=a[n++].value.toLowerCase();I.push({name:D,args:[]}),o.add(D)}else if(O()){const D=a[n++].value.toLowerCase();if(v.has(D)?(I.push({name:D,args:le()}),o.add(D)):y+=`:${D}(${S()})`,m(),!p())throw h();n++}else throw h();else if(a[n]instanceof w.OpenSquareToken){for(y+="[",n++;!(a[n]instanceof w.CloseSquareToken)&&!$();)y+=a[n++].toSource();if(!(a[n]instanceof w.CloseSquareToken))throw h();y+="]",n++}else throw h();if(!y&&!I.length)throw h();return{css:y||void 0,functions:I}}function S(){let y="",I=1;for(;!$()&&((b()||O())&&I++,p()&&I--,!!I);)y+=a[n++].toSource();return y}const j=le();if(!$())throw h();if(j.some(y=>typeof y!="object"||!("simples"in y)))throw new g(`Error while parsing css selector "${d}". Did you mean to CSS.escape it?`);return{selector:j,names:Array.from(o)}}function f(d){return d.map(v=>typeof v=="string"?`"${v}"`:typeof v=="number"?String(v):v.simples.map(({selector:a,combinator:s})=>{let n=a.css||"";return n=n+a.functions.map(o=>`:${o.name}(${f(o.args)})`).join(""),s&&(n+=" "+s),n}).join(" ")).join(", ")}return Gc}var Jc,wg;function Vi(){if(wg)return Jc;wg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(n,o)=>{for(var h in o)t(n,h,{get:o[h],enumerable:!0})},V=(n,o,h,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of i(o))!E.call(n,c)&&c!==h&&t(n,c,{get:()=>o[c],enumerable:!(m=r(o,c))||m.enumerable});return n},te=n=>V(t({},"__esModule",{value:!0}),n),P={};R(P,{InvalidSelectorError:()=>U.InvalidSelectorError,customCSSNames:()=>g,isInvalidSelectorError:()=>U.isInvalidSelectorError,parseAttributeSelector:()=>s,parseSelector:()=>u,splitSelectorByFrame:()=>_,stringifySelector:()=>d,visitAllSelectorParts:()=>v}),Jc=te(P);var e=vg(),U=vg();const C=new Set(["internal:has","internal:has-not","internal:and","internal:or","internal:chain","left-of","right-of","above","below","near"]),w=new Set(["left-of","right-of","above","below","near"]),g=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","has-text","above","below","right-of","left-of","near","nth-match"]);function u(n){const o=a(n),h=[];for(const m of o.parts){if(m.name==="css"||m.name==="css:light"){m.name==="css:light"&&(m.body=":light("+m.body+")");const c=(0,e.parseCSS)(m.body,g);h.push({name:"css",body:c.selector,source:m.body});continue}if(C.has(m.name)){let c,l;try{const p=JSON.parse("["+m.body+"]");if(!Array.isArray(p)||p.length<1||p.length>2||typeof p[0]!="string")throw new e.InvalidSelectorError(`Malformed selector: ${m.name}=`+m.body);if(c=p[0],p.length===2){if(typeof p[1]!="number"||!w.has(m.name))throw new e.InvalidSelectorError(`Malformed selector: ${m.name}=`+m.body);l=p[1]}}catch{throw new e.InvalidSelectorError(`Malformed selector: ${m.name}=`+m.body)}const x={name:m.name,source:m.body,body:{parsed:u(c),distance:l}},T=[...x.body.parsed.parts].reverse().find(p=>p.name==="internal:control"&&p.body==="enter-frame"),b=T?x.body.parsed.parts.indexOf(T):-1;b!==-1&&f(x.body.parsed.parts.slice(0,b+1),h.slice(0,b+1))&&x.body.parsed.parts.splice(0,b+1),h.push(x);continue}h.push({...m,source:m.body})}if(C.has(h[0].name))throw new e.InvalidSelectorError(`"${h[0].name}" selector cannot be first`);return{capture:o.capture,parts:h}}function _(n){const o=u(n),h=[];let m={parts:[]},c=0;for(let l=0;l<o.parts.length;++l){const x=o.parts[l];if(x.name==="internal:control"&&x.body==="enter-frame"){if(!m.parts.length)throw new e.InvalidSelectorError("Selector cannot start with entering frame, select the iframe first");h.push(m),m={parts:[]},c=l+1;continue}o.capture===l&&(m.capture=l-c),m.parts.push(x)}if(!m.parts.length)throw new e.InvalidSelectorError(`Selector cannot end with entering frame, while parsing selector ${n}`);if(h.push(m),typeof o.capture=="number"&&typeof h[h.length-1].capture!="number")throw new e.InvalidSelectorError("Can not capture the selector before diving into the frame. Only use * after the last frame has been selected");return h}function f(n,o){return d({parts:n})===d({parts:o})}function d(n,o){return typeof n=="string"?n:n.parts.map((h,m)=>{let c=!0;!o&&m!==n.capture&&(h.name==="css"||h.name==="xpath"&&h.source.startsWith("//")||h.source.startsWith(".."))&&(c=!1);const l=c?h.name+"=":"";return`${m===n.capture?"*":""}${l}${h.source}`}).join(" >> ")}function v(n,o){const h=(m,c)=>{for(const l of m.parts)o(l,c),C.has(l.name)&&h(l.body.parsed,!0)};h(n,!1)}function a(n){let o=0,h,m=0;const c={parts:[]},l=()=>{const T=n.substring(m,o).trim(),b=T.indexOf("=");let p,O;b!==-1&&T.substring(0,b).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(p=T.substring(0,b).trim(),O=T.substring(b+1)):T.length>1&&T[0]==='"'&&T[T.length-1]==='"'||T.length>1&&T[0]==="'"&&T[T.length-1]==="'"?(p="text",O=T):/^\(*\/\//.test(T)||T.startsWith("..")?(p="xpath",O=T):(p="css",O=T);let z=!1;if(p[0]==="*"&&(z=!0,p=p.substring(1)),c.parts.push({name:p,body:O}),z){if(c.capture!==void 0)throw new e.InvalidSelectorError("Only one of the selectors can capture using * modifier");c.capture=c.parts.length-1}};if(!n.includes(">>"))return o=n.length,l(),c;const x=()=>{const b=n.substring(m,o).match(/^\s*text\s*=(.*)$/);return!!b&&!!b[1]};for(;o<n.length;){const T=n[o];T==="\\"&&o+1<n.length?o+=2:T===h?(h=void 0,o++):!h&&(T==='"'||T==="'"||T==="`")&&!x()?(h=T,o++):!h&&T===">"&&n[o+1]===">"?(l(),o+=2,m=o):o++}return l(),c}function s(n,o){let h=0,m=n.length===0;const c=()=>n[h]||"",l=()=>{const _e=c();return++h,m=h>=n.length,_e},x=_e=>{throw m?new e.InvalidSelectorError(`Unexpected end of selector while parsing selector \`${n}\``):new e.InvalidSelectorError(`Error while parsing selector \`${n}\` - unexpected symbol "${c()}" at position ${h}`+(_e?" during "+_e:""))};function T(){for(;!m&&/\s/.test(c());)l()}function b(_e){return _e>=""||_e>="0"&&_e<="9"||_e>="A"&&_e<="Z"||_e>="a"&&_e<="z"||_e>="0"&&_e<="9"||_e==="_"||_e==="-"}function p(){let _e="";for(T();!m&&b(c());)_e+=l();return _e}function O(_e){let ge=l();for(ge!==_e&&x("parsing quoted string");!m&&c()!==_e;)c()==="\\"&&l(),ge+=l();return c()!==_e&&x("parsing quoted string"),ge+=l(),ge}function z(){l()!=="/"&&x("parsing regular expression");let _e="",ge=!1;for(;!m;){if(c()==="\\")_e+=l(),m&&x("parsing regular expression");else if(ge&&c()==="]")ge=!1;else if(!ge&&c()==="[")ge=!0;else if(!ge&&c()==="/")break;_e+=l()}l()!=="/"&&x("parsing regular expression");let ne="";for(;!m&&c().match(/[dgimsuy]/);)ne+=l();try{return new RegExp(_e,ne)}catch(S){throw new e.InvalidSelectorError(`Error while parsing selector \`${n}\`: ${S.message}`)}}function $(){let _e="";return T(),c()==="'"||c()==='"'?_e=O(c()).slice(1,-1):_e=p(),_e||x("parsing property path"),_e}function q(){T();let _e="";return m||(_e+=l()),!m&&_e!=="="&&(_e+=l()),["=","*=","^=","$=","|=","~="].includes(_e)||x("parsing operator"),_e}function J(){l();const _e=[];for(_e.push($()),T();c()===".";)l(),_e.push($()),T();if(c()==="]")return l(),{name:_e.join("."),jsonPath:_e,op:"<truthy>",value:null,caseSensitive:!1};const ge=q();let ne,S=!0;if(T(),c()==="/"){if(ge!=="=")throw new e.InvalidSelectorError(`Error while parsing selector \`${n}\` - cannot use ${ge} in attribute with regular expression`);ne=z()}else if(c()==="'"||c()==='"')ne=O(c()).slice(1,-1),T(),c()==="i"||c()==="I"?(S=!1,l()):(c()==="s"||c()==="S")&&(S=!0,l());else{for(ne="";!m&&(b(c())||c()==="+"||c()===".");)ne+=l();ne==="true"?ne=!0:ne==="false"?ne=!1:o||(ne=+ne,Number.isNaN(ne)&&x("parsing attribute value"))}if(T(),c()!=="]"&&x("parsing attribute value"),l(),ge!=="="&&typeof ne!="string")throw new e.InvalidSelectorError(`Error while parsing selector \`${n}\` - cannot use ${ge} in attribute with non-string matching value - ${ne}`);return{name:_e.join("."),jsonPath:_e,op:ge,value:ne,caseSensitive:S}}const le={name:"",attributes:[]};for(le.name=p(),T();c()==="[";)le.attributes.push(J()),T();if(m||x(void 0),!le.name&&!le.attributes.length)throw new e.InvalidSelectorError(`Error while parsing selector \`${n}\` - selector cannot be empty`);return le}return Jc}var Yc,yg;function Ei(){if(yg)return Yc;yg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(b,p)=>{for(var O in p)t(b,O,{get:p[O],enumerable:!0})},V=(b,p,O,z)=>{if(p&&typeof p=="object"||typeof p=="function")for(let $ of i(p))!E.call(b,$)&&$!==O&&t(b,$,{get:()=>p[$],enumerable:!(z=r(p,$))||z.enumerable});return b},te=b=>V(t({},"__esModule",{value:!0}),b),P={};R(P,{cacheNormalizedWhitespaces:()=>f,escapeForAttributeSelector:()=>n,escapeForTextSelector:()=>s,escapeHTML:()=>x,escapeHTMLAttribute:()=>l,escapeRegExp:()=>m,escapeTemplateString:()=>U,escapeWithQuotes:()=>e,isString:()=>C,longestCommonSubstring:()=>T,normalizeEscapedRegexQuotes:()=>v,normalizeWhiteSpace:()=>d,quoteCSSAttributeValue:()=>u,toSnakeCase:()=>g,toTitleCase:()=>w,trimString:()=>o,trimStringWithEllipsis:()=>h}),Yc=te(P);function e(b,p="'"){const O=JSON.stringify(b),z=O.substring(1,O.length-1).replace(/\\"/g,'"');if(p==="'")return p+z.replace(/[']/g,"\\'")+p;if(p==='"')return p+z.replace(/["]/g,'\\"')+p;if(p==="`")return p+z.replace(/[`]/g,"`")+p;throw new Error("Invalid escape char")}function U(b){return b.replace(/\\/g,"\\\\").replace(/`/g,"\\`").replace(/\$\{/g,"\\${")}function C(b){return typeof b=="string"||b instanceof String}function w(b){return b.charAt(0).toUpperCase()+b.substring(1)}function g(b){return b.replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/([A-Z])([A-Z][a-z])/g,"$1_$2").toLowerCase()}function u(b){return`"${b.replace(/["\\]/g,p=>"\\"+p)}"`}let _;function f(){_=new Map}function d(b){let p=_==null?void 0:_.get(b);return p===void 0&&(p=b.replace(/[\u200b\u00ad]/g,"").trim().replace(/\s+/g," "),_==null||_.set(b,p)),p}function v(b){return b.replace(/(^|[^\\])(\\\\)*\\(['"`])/g,"$1$2$3")}function a(b){return b.unicode||b.unicodeSets?String(b):String(b).replace(/(^|[^\\])(\\\\)*(["'`])/g,"$1$2\\$3").replace(/>>/g,"\\>\\>")}function s(b,p){return typeof b!="string"?a(b):`${JSON.stringify(b)}${p?"s":"i"}`}function n(b,p){return typeof b!="string"?a(b):`"${b.replace(/\\/g,"\\\\").replace(/["]/g,'\\"')}"${p?"s":"i"}`}function o(b,p,O=""){if(b.length<=p)return b;const z=[...b];return z.length>p?z.slice(0,p-O.length).join("")+O:z.join("")}function h(b,p){return o(b,p,"…")}function m(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function l(b){return b.replace(/[&<>"']/ug,p=>c[p])}function x(b){return b.replace(/[&<]/ug,p=>c[p])}function T(b,p){const O=b.length,z=p.length;let $=0,q=0;const J=Array(O+1).fill(null).map(()=>Array(z+1).fill(0));for(let le=1;le<=O;le++)for(let _e=1;_e<=z;_e++)b[le-1]===p[_e-1]&&(J[le][_e]=J[le-1][_e-1]+1,J[le][_e]>$&&($=J[le][_e],q=le));return b.slice(q-$,q)}return Yc}var Xc,Sg;function nf(){if(Sg)return Xc;Sg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(m,c)=>{for(var l in c)t(m,l,{get:c[l],enumerable:!0})},V=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of i(c))!E.call(m,T)&&T!==l&&t(m,T,{get:()=>c[T],enumerable:!(x=r(c,T))||x.enumerable});return m},te=m=>V(t({},"__esModule",{value:!0}),m),P={};R(P,{CSharpLocatorFactory:()=>s,JavaLocatorFactory:()=>a,JavaScriptLocatorFactory:()=>d,JsonlLocatorFactory:()=>n,PythonLocatorFactory:()=>v,asLocator:()=>w,asLocatorDescription:()=>C,asLocators:()=>g}),Xc=te(P);var e=Vi(),U=Ei();function C(m,c){try{const l=(0,e.parseSelector)(c),x=l.parts[l.parts.length-1];if((x==null?void 0:x.name)==="internal:describe"){const T=JSON.parse(x.body);if(typeof T=="string")return T}return u(new o[m],l,!1,1)[0]}catch{return c}}function w(m,c,l=!1){return g(m,c,l,1)[0]}function g(m,c,l=!1,x=20,T){try{return u(new o[m](T),(0,e.parseSelector)(c),l,x)}catch{return[c]}}function u(m,c,l=!1,x=20){const T=[...c.parts],b=[];let p=l?"frame-locator":"page";for(let O=0;O<T.length;O++){const z=T[O],$=p;if(p="locator",z.name==="internal:describe")continue;if(z.name==="nth"){z.body==="0"?b.push([m.generateLocator($,"first",""),m.generateLocator($,"nth","0")]):z.body==="-1"?b.push([m.generateLocator($,"last",""),m.generateLocator($,"nth","-1")]):b.push([m.generateLocator($,"nth",z.body)]);continue}if(z.name==="visible"){b.push([m.generateLocator($,"visible",z.body),m.generateLocator($,"default",`visible=${z.body}`)]);continue}if(z.name==="internal:text"){const{exact:ge,text:ne}=f(z.body);b.push([m.generateLocator($,"text",ne,{exact:ge})]);continue}if(z.name==="internal:has-text"){const{exact:ge,text:ne}=f(z.body);if(!ge){b.push([m.generateLocator($,"has-text",ne,{exact:ge})]);continue}}if(z.name==="internal:has-not-text"){const{exact:ge,text:ne}=f(z.body);if(!ge){b.push([m.generateLocator($,"has-not-text",ne,{exact:ge})]);continue}}if(z.name==="internal:has"){const ge=u(m,z.body.parsed,!1,x);b.push(ge.map(ne=>m.generateLocator($,"has",ne)));continue}if(z.name==="internal:has-not"){const ge=u(m,z.body.parsed,!1,x);b.push(ge.map(ne=>m.generateLocator($,"hasNot",ne)));continue}if(z.name==="internal:and"){const ge=u(m,z.body.parsed,!1,x);b.push(ge.map(ne=>m.generateLocator($,"and",ne)));continue}if(z.name==="internal:or"){const ge=u(m,z.body.parsed,!1,x);b.push(ge.map(ne=>m.generateLocator($,"or",ne)));continue}if(z.name==="internal:chain"){const ge=u(m,z.body.parsed,!1,x);b.push(ge.map(ne=>m.generateLocator($,"chain",ne)));continue}if(z.name==="internal:label"){const{exact:ge,text:ne}=f(z.body);b.push([m.generateLocator($,"label",ne,{exact:ge})]);continue}if(z.name==="internal:role"){const ge=(0,e.parseAttributeSelector)(z.body,!0),ne={attrs:[]};for(const S of ge.attributes)S.name==="name"?(ne.exact=S.caseSensitive,ne.name=S.value):(S.name==="level"&&typeof S.value=="string"&&(S.value=+S.value),ne.attrs.push({name:S.name==="include-hidden"?"includeHidden":S.name,value:S.value}));b.push([m.generateLocator($,"role",ge.name,ne)]);continue}if(z.name==="internal:testid"){const ge=(0,e.parseAttributeSelector)(z.body,!0),{value:ne}=ge.attributes[0];b.push([m.generateLocator($,"test-id",ne)]);continue}if(z.name==="internal:attr"){const ge=(0,e.parseAttributeSelector)(z.body,!0),{name:ne,value:S,caseSensitive:j}=ge.attributes[0],y=S,I=!!j;if(ne==="placeholder"){b.push([m.generateLocator($,"placeholder",y,{exact:I})]);continue}if(ne==="alt"){b.push([m.generateLocator($,"alt",y,{exact:I})]);continue}if(ne==="title"){b.push([m.generateLocator($,"title",y,{exact:I})]);continue}}if(z.name==="internal:control"&&z.body==="enter-frame"){const ge=b[b.length-1],ne=T[O-1],S=ge.map(j=>m.chainLocators([j,m.generateLocator($,"frame","")]));["xpath","css"].includes(ne.name)&&S.push(m.generateLocator($,"frame-locator",(0,e.stringifySelector)({parts:[ne]})),m.generateLocator($,"frame-locator",(0,e.stringifySelector)({parts:[ne]},!0))),ge.splice(0,ge.length,...S),p="frame-locator";continue}const q=T[O+1],J=(0,e.stringifySelector)({parts:[z]}),le=m.generateLocator($,"default",J);if(q&&["internal:has-text","internal:has-not-text"].includes(q.name)){const{exact:ge,text:ne}=f(q.body);if(!ge){const S=m.generateLocator("locator",q.name==="internal:has-text"?"has-text":"has-not-text",ne,{exact:ge}),j={};q.name==="internal:has-text"?j.hasText=ne:j.hasNotText=ne;const y=m.generateLocator($,"default",J,j);b.push([m.chainLocators([le,S]),y]),O++;continue}}let _e;if(["xpath","css"].includes(z.name)){const ge=(0,e.stringifySelector)({parts:[z]},!0);_e=m.generateLocator($,"default",ge)}b.push([le,_e].filter(Boolean))}return _(m,b,x)}function _(m,c,l){const x=c.map(()=>""),T=[],b=p=>{if(p===c.length)return T.push(m.chainLocators(x)),T.length<l;for(const O of c[p])if(x[p]=O,!b(p+1))return!1;return!0};return b(0),T}function f(m){let c=!1;const l=m.match(/^\/(.*)\/([igm]*)$/);return l?{text:new RegExp(l[1],l[2])}:(m.endsWith('"')?(m=JSON.parse(m),c=!0):m.endsWith('"s')?(m=JSON.parse(m.substring(0,m.length-1)),c=!0):m.endsWith('"i')&&(m=JSON.parse(m.substring(0,m.length-1)),c=!1),{exact:c,text:m})}class d{constructor(c){this.preferredQuote=c}generateLocator(c,l,x,T={}){switch(l){case"default":return T.hasText!==void 0?`locator(${this.quote(x)}, { hasText: ${this.toHasText(T.hasText)} })`:T.hasNotText!==void 0?`locator(${this.quote(x)}, { hasNotText: ${this.toHasText(T.hasNotText)} })`:`locator(${this.quote(x)})`;case"frame-locator":return`frameLocator(${this.quote(x)})`;case"frame":return"contentFrame()";case"nth":return`nth(${x})`;case"first":return"first()";case"last":return"last()";case"visible":return`filter({ visible: ${x==="true"?"true":"false"} })`;case"role":const b=[];h(T.name)?b.push(`name: ${this.regexToSourceString(T.name)}`):typeof T.name=="string"&&(b.push(`name: ${this.quote(T.name)}`),T.exact&&b.push("exact: true"));for(const{name:O,value:z}of T.attrs)b.push(`${O}: ${typeof z=="string"?this.quote(z):z}`);const p=b.length?`, { ${b.join(", ")} }`:"";return`getByRole(${this.quote(x)}${p})`;case"has-text":return`filter({ hasText: ${this.toHasText(x)} })`;case"has-not-text":return`filter({ hasNotText: ${this.toHasText(x)} })`;case"has":return`filter({ has: ${x} })`;case"hasNot":return`filter({ hasNot: ${x} })`;case"and":return`and(${x})`;case"or":return`or(${x})`;case"chain":return`locator(${x})`;case"test-id":return`getByTestId(${this.toTestIdValue(x)})`;case"text":return this.toCallWithExact("getByText",x,!!T.exact);case"alt":return this.toCallWithExact("getByAltText",x,!!T.exact);case"placeholder":return this.toCallWithExact("getByPlaceholder",x,!!T.exact);case"label":return this.toCallWithExact("getByLabel",x,!!T.exact);case"title":return this.toCallWithExact("getByTitle",x,!!T.exact);default:throw new Error("Unknown selector kind "+l)}}chainLocators(c){return c.join(".")}regexToSourceString(c){return(0,U.normalizeEscapedRegexQuotes)(String(c))}toCallWithExact(c,l,x){return h(l)?`${c}(${this.regexToSourceString(l)})`:x?`${c}(${this.quote(l)}, { exact: true })`:`${c}(${this.quote(l)})`}toHasText(c){return h(c)?this.regexToSourceString(c):this.quote(c)}toTestIdValue(c){return h(c)?this.regexToSourceString(c):this.quote(c)}quote(c){return(0,U.escapeWithQuotes)(c,this.preferredQuote??"'")}}class v{generateLocator(c,l,x,T={}){switch(l){case"default":return T.hasText!==void 0?`locator(${this.quote(x)}, has_text=${this.toHasText(T.hasText)})`:T.hasNotText!==void 0?`locator(${this.quote(x)}, has_not_text=${this.toHasText(T.hasNotText)})`:`locator(${this.quote(x)})`;case"frame-locator":return`frame_locator(${this.quote(x)})`;case"frame":return"content_frame";case"nth":return`nth(${x})`;case"first":return"first";case"last":return"last";case"visible":return`filter(visible=${x==="true"?"True":"False"})`;case"role":const b=[];h(T.name)?b.push(`name=${this.regexToString(T.name)}`):typeof T.name=="string"&&(b.push(`name=${this.quote(T.name)}`),T.exact&&b.push("exact=True"));for(const{name:O,value:z}of T.attrs){let $=typeof z=="string"?this.quote(z):z;typeof z=="boolean"&&($=z?"True":"False"),b.push(`${(0,U.toSnakeCase)(O)}=${$}`)}const p=b.length?`, ${b.join(", ")}`:"";return`get_by_role(${this.quote(x)}${p})`;case"has-text":return`filter(has_text=${this.toHasText(x)})`;case"has-not-text":return`filter(has_not_text=${this.toHasText(x)})`;case"has":return`filter(has=${x})`;case"hasNot":return`filter(has_not=${x})`;case"and":return`and_(${x})`;case"or":return`or_(${x})`;case"chain":return`locator(${x})`;case"test-id":return`get_by_test_id(${this.toTestIdValue(x)})`;case"text":return this.toCallWithExact("get_by_text",x,!!T.exact);case"alt":return this.toCallWithExact("get_by_alt_text",x,!!T.exact);case"placeholder":return this.toCallWithExact("get_by_placeholder",x,!!T.exact);case"label":return this.toCallWithExact("get_by_label",x,!!T.exact);case"title":return this.toCallWithExact("get_by_title",x,!!T.exact);default:throw new Error("Unknown selector kind "+l)}}chainLocators(c){return c.join(".")}regexToString(c){const l=c.flags.includes("i")?", re.IGNORECASE":"";return`re.compile(r"${(0,U.normalizeEscapedRegexQuotes)(c.source).replace(/\\\//,"/").replace(/"/g,'\\"')}"${l})`}toCallWithExact(c,l,x){return h(l)?`${c}(${this.regexToString(l)})`:x?`${c}(${this.quote(l)}, exact=True)`:`${c}(${this.quote(l)})`}toHasText(c){return h(c)?this.regexToString(c):`${this.quote(c)}`}toTestIdValue(c){return h(c)?this.regexToString(c):this.quote(c)}quote(c){return(0,U.escapeWithQuotes)(c,'"')}}class a{generateLocator(c,l,x,T={}){let b;switch(c){case"page":b="Page";break;case"frame-locator":b="FrameLocator";break;case"locator":b="Locator";break}switch(l){case"default":return T.hasText!==void 0?`locator(${this.quote(x)}, new ${b}.LocatorOptions().setHasText(${this.toHasText(T.hasText)}))`:T.hasNotText!==void 0?`locator(${this.quote(x)}, new ${b}.LocatorOptions().setHasNotText(${this.toHasText(T.hasNotText)}))`:`locator(${this.quote(x)})`;case"frame-locator":return`frameLocator(${this.quote(x)})`;case"frame":return"contentFrame()";case"nth":return`nth(${x})`;case"first":return"first()";case"last":return"last()";case"visible":return`filter(new ${b}.FilterOptions().setVisible(${x==="true"?"true":"false"}))`;case"role":const p=[];h(T.name)?p.push(`.setName(${this.regexToString(T.name)})`):typeof T.name=="string"&&(p.push(`.setName(${this.quote(T.name)})`),T.exact&&p.push(".setExact(true)"));for(const{name:z,value:$}of T.attrs)p.push(`.set${(0,U.toTitleCase)(z)}(${typeof $=="string"?this.quote($):$})`);const O=p.length?`, new ${b}.GetByRoleOptions()${p.join("")}`:"";return`getByRole(AriaRole.${(0,U.toSnakeCase)(x).toUpperCase()}${O})`;case"has-text":return`filter(new ${b}.FilterOptions().setHasText(${this.toHasText(x)}))`;case"has-not-text":return`filter(new ${b}.FilterOptions().setHasNotText(${this.toHasText(x)}))`;case"has":return`filter(new ${b}.FilterOptions().setHas(${x}))`;case"hasNot":return`filter(new ${b}.FilterOptions().setHasNot(${x}))`;case"and":return`and(${x})`;case"or":return`or(${x})`;case"chain":return`locator(${x})`;case"test-id":return`getByTestId(${this.toTestIdValue(x)})`;case"text":return this.toCallWithExact(b,"getByText",x,!!T.exact);case"alt":return this.toCallWithExact(b,"getByAltText",x,!!T.exact);case"placeholder":return this.toCallWithExact(b,"getByPlaceholder",x,!!T.exact);case"label":return this.toCallWithExact(b,"getByLabel",x,!!T.exact);case"title":return this.toCallWithExact(b,"getByTitle",x,!!T.exact);default:throw new Error("Unknown selector kind "+l)}}chainLocators(c){return c.join(".")}regexToString(c){const l=c.flags.includes("i")?", Pattern.CASE_INSENSITIVE":"";return`Pattern.compile(${this.quote((0,U.normalizeEscapedRegexQuotes)(c.source))}${l})`}toCallWithExact(c,l,x,T){return h(x)?`${l}(${this.regexToString(x)})`:T?`${l}(${this.quote(x)}, new ${c}.${(0,U.toTitleCase)(l)}Options().setExact(true))`:`${l}(${this.quote(x)})`}toHasText(c){return h(c)?this.regexToString(c):this.quote(c)}toTestIdValue(c){return h(c)?this.regexToString(c):this.quote(c)}quote(c){return(0,U.escapeWithQuotes)(c,'"')}}class s{generateLocator(c,l,x,T={}){switch(l){case"default":return T.hasText!==void 0?`Locator(${this.quote(x)}, new() { ${this.toHasText(T.hasText)} })`:T.hasNotText!==void 0?`Locator(${this.quote(x)}, new() { ${this.toHasNotText(T.hasNotText)} })`:`Locator(${this.quote(x)})`;case"frame-locator":return`FrameLocator(${this.quote(x)})`;case"frame":return"ContentFrame";case"nth":return`Nth(${x})`;case"first":return"First";case"last":return"Last";case"visible":return`Filter(new() { Visible = ${x==="true"?"true":"false"} })`;case"role":const b=[];h(T.name)?b.push(`NameRegex = ${this.regexToString(T.name)}`):typeof T.name=="string"&&(b.push(`Name = ${this.quote(T.name)}`),T.exact&&b.push("Exact = true"));for(const{name:O,value:z}of T.attrs)b.push(`${(0,U.toTitleCase)(O)} = ${typeof z=="string"?this.quote(z):z}`);const p=b.length?`, new() { ${b.join(", ")} }`:"";return`GetByRole(AriaRole.${(0,U.toTitleCase)(x)}${p})`;case"has-text":return`Filter(new() { ${this.toHasText(x)} })`;case"has-not-text":return`Filter(new() { ${this.toHasNotText(x)} })`;case"has":return`Filter(new() { Has = ${x} })`;case"hasNot":return`Filter(new() { HasNot = ${x} })`;case"and":return`And(${x})`;case"or":return`Or(${x})`;case"chain":return`Locator(${x})`;case"test-id":return`GetByTestId(${this.toTestIdValue(x)})`;case"text":return this.toCallWithExact("GetByText",x,!!T.exact);case"alt":return this.toCallWithExact("GetByAltText",x,!!T.exact);case"placeholder":return this.toCallWithExact("GetByPlaceholder",x,!!T.exact);case"label":return this.toCallWithExact("GetByLabel",x,!!T.exact);case"title":return this.toCallWithExact("GetByTitle",x,!!T.exact);default:throw new Error("Unknown selector kind "+l)}}chainLocators(c){return c.join(".")}regexToString(c){const l=c.flags.includes("i")?", RegexOptions.IgnoreCase":"";return`new Regex(${this.quote((0,U.normalizeEscapedRegexQuotes)(c.source))}${l})`}toCallWithExact(c,l,x){return h(l)?`${c}(${this.regexToString(l)})`:x?`${c}(${this.quote(l)}, new() { Exact = true })`:`${c}(${this.quote(l)})`}toHasText(c){return h(c)?`HasTextRegex = ${this.regexToString(c)}`:`HasText = ${this.quote(c)}`}toTestIdValue(c){return h(c)?this.regexToString(c):this.quote(c)}toHasNotText(c){return h(c)?`HasNotTextRegex = ${this.regexToString(c)}`:`HasNotText = ${this.quote(c)}`}quote(c){return(0,U.escapeWithQuotes)(c,'"')}}class n{generateLocator(c,l,x,T={}){return JSON.stringify({kind:l,body:x,options:T})}chainLocators(c){const l=c.map(x=>JSON.parse(x));for(let x=0;x<l.length-1;++x)l[x].next=l[x+1];return JSON.stringify(l[0])}}const o={javascript:d,python:v,java:a,csharp:s,jsonl:n};function h(m){return m instanceof RegExp}return Xc}var Qc,xg;function sf(){if(xg)return Qc;xg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{getMimeTypeForPath:()=>C,isJsonMimeType:()=>e,isTextualMimeType:()=>U}),Qc=te(P);function e(g){return!!g.match(/^(application\/json|application\/.*?\+json|text\/(x-)?json)(;\s*charset=.*)?$/)}function U(g){return!!g.match(/^(text\/.*?|application\/(json|(x-)?javascript|xml.*?|ecmascript|graphql|x-www-form-urlencoded)|image\/svg(\+xml)?|application\/.*?(\+json|\+xml))(;\s*charset=.*)?$/)}function C(g){const u=g.lastIndexOf(".");if(u===-1)return null;const _=g.substring(u+1);return w.get(_)||null}const w=new Map([["ez","application/andrew-inset"],["aw","application/applixware"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["dwd","application/atsc-dwd+xml"],["held","application/atsc-held+xml"],["rsat","application/atsc-rsat+xml"],["bdoc","application/bdoc"],["xcs","application/calendar+xml"],["ccxml","application/ccxml+xml"],["cdfx","application/cdfx+xml"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cu","application/cu-seeme"],["mpd","application/dash+xml"],["davmount","application/davmount+xml"],["dbk","application/docbook+xml"],["dssc","application/dssc+der"],["xdssc","application/dssc+xml"],["ecma","application/ecmascript"],["es","application/ecmascript"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["epub","application/epub+zip"],["exi","application/exi"],["exp","application/express"],["fdt","application/fdt+xml"],["pfr","application/font-tdpfr"],["geojson","application/geo+json"],["gml","application/gml+xml"],["gpx","application/gpx+xml"],["gxf","application/gxf"],["gz","application/gzip"],["hjson","application/hjson"],["stk","application/hyperstudio"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["ipfix","application/ipfix"],["its","application/its+xml"],["ear","application/java-archive"],["jar","application/java-archive"],["war","application/java-archive"],["ser","application/java-serialized-object"],["class","application/java-vm"],["js","application/javascript"],["mjs","application/javascript"],["json","application/json"],["map","application/json"],["json5","application/json5"],["jsonml","application/jsonml+json"],["jsonld","application/ld+json"],["lgr","application/lgr+xml"],["lostxml","application/lost+xml"],["hqx","application/mac-binhex40"],["cpt","application/mac-compactpro"],["mads","application/mads+xml"],["webmanifest","application/manifest+json"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ma","application/mathematica"],["mb","application/mathematica"],["nb","application/mathematica"],["mathml","application/mathml+xml"],["mbox","application/mbox"],["mscml","application/mediaservercontrol+xml"],["metalink","application/metalink+xml"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["maei","application/mmt-aei+xml"],["musd","application/mmt-usd+xml"],["mods","application/mods+xml"],["m21","application/mp21"],["mp21","application/mp21"],["m4p","application/mp4"],["mp4s","application/mp4"],["doc","application/msword"],["dot","application/msword"],["mxf","application/mxf"],["nq","application/n-quads"],["nt","application/n-triples"],["cjs","application/node"],["bin","application/octet-stream"],["bpk","application/octet-stream"],["buffer","application/octet-stream"],["deb","application/octet-stream"],["deploy","application/octet-stream"],["dist","application/octet-stream"],["distz","application/octet-stream"],["dll","application/octet-stream"],["dmg","application/octet-stream"],["dms","application/octet-stream"],["dump","application/octet-stream"],["elc","application/octet-stream"],["exe","application/octet-stream"],["img","application/octet-stream"],["iso","application/octet-stream"],["lrf","application/octet-stream"],["mar","application/octet-stream"],["msi","application/octet-stream"],["msm","application/octet-stream"],["msp","application/octet-stream"],["pkg","application/octet-stream"],["so","application/octet-stream"],["oda","application/oda"],["opf","application/oebps-package+xml"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["oxps","application/oxps"],["relo","application/p2p-overlay+xml"],["xer","application/patch-ops-error+xml"],["pdf","application/pdf"],["pgp","application/pgp-encrypted"],["asc","application/pgp-signature"],["sig","application/pgp-signature"],["prf","application/pics-rules"],["p10","application/pkcs10"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["ac","application/pkix-attr-cert"],["cer","application/pkix-cert"],["crl","application/pkix-crl"],["pkipath","application/pkix-pkipath"],["pki","application/pkixcmp"],["pls","application/pls+xml"],["ai","application/postscript"],["eps","application/postscript"],["ps","application/postscript"],["provx","application/provenance+xml"],["pskcxml","application/pskc+xml"],["raml","application/raml+yaml"],["owl","application/rdf+xml"],["rdf","application/rdf+xml"],["rif","application/reginfo+xml"],["rnc","application/relax-ng-compact-syntax"],["rl","application/resource-lists+xml"],["rld","application/resource-lists-diff+xml"],["rs","application/rls-services+xml"],["rapd","application/route-apd+xml"],["sls","application/route-s-tsid+xml"],["rusd","application/route-usd+xml"],["gbr","application/rpki-ghostbusters"],["mft","application/rpki-manifest"],["roa","application/rpki-roa"],["rsd","application/rsd+xml"],["rss","application/rss+xml"],["rtf","application/rtf"],["sbml","application/sbml+xml"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["spq","application/scvp-vp-request"],["spp","application/scvp-vp-response"],["sdp","application/sdp"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["shf","application/shf+xml"],["sieve","application/sieve"],["siv","application/sieve"],["smi","application/smil+xml"],["smil","application/smil+xml"],["rq","application/sparql-query"],["srx","application/sparql-results+xml"],["gram","application/srgs"],["grxml","application/srgs+xml"],["sru","application/sru+xml"],["ssdl","application/ssdl+xml"],["ssml","application/ssml+xml"],["swidtag","application/swid+xml"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tfi","application/thraud+xml"],["tsd","application/timestamped-data"],["toml","application/toml"],["trig","application/trig"],["ttml","application/ttml+xml"],["ubj","application/ubjson"],["rsheet","application/urc-ressheet+xml"],["td","application/urc-targetdesc+xml"],["vxml","application/voicexml+xml"],["wasm","application/wasm"],["wgt","application/widget"],["hlp","application/winhlp"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["xaml","application/xaml+xml"],["xav","application/xcap-att+xml"],["xca","application/xcap-caps+xml"],["xdf","application/xcap-diff+xml"],["xel","application/xcap-el+xml"],["xns","application/xcap-ns+xml"],["xenc","application/xenc+xml"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xlf","application/xliff+xml"],["rng","application/xml"],["xml","application/xml"],["xsd","application/xml"],["xsl","application/xml"],["dtd","application/xml-dtd"],["xop","application/xop+xml"],["xpl","application/xproc+xml"],["*xsl","application/xslt+xml"],["xslt","application/xslt+xml"],["xspf","application/xspf+xml"],["mxml","application/xv+xml"],["xhvml","application/xv+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["yang","application/yang"],["yin","application/yin+xml"],["zip","application/zip"],["*3gpp","audio/3gpp"],["adp","audio/adpcm"],["amr","audio/amr"],["au","audio/basic"],["snd","audio/basic"],["kar","audio/midi"],["mid","audio/midi"],["midi","audio/midi"],["rmi","audio/midi"],["mxmf","audio/mobile-xmf"],["*mp3","audio/mp3"],["m4a","audio/mp4"],["mp4a","audio/mp4"],["m2a","audio/mpeg"],["m3a","audio/mpeg"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mpga","audio/mpeg"],["oga","audio/ogg"],["ogg","audio/ogg"],["opus","audio/ogg"],["spx","audio/ogg"],["s3m","audio/s3m"],["sil","audio/silk"],["wav","audio/wav"],["*wav","audio/wave"],["weba","audio/webm"],["xm","audio/xm"],["ttc","font/collection"],["otf","font/otf"],["ttf","font/ttf"],["woff","font/woff"],["woff2","font/woff2"],["exr","image/aces"],["apng","image/apng"],["avif","image/avif"],["bmp","image/bmp"],["cgm","image/cgm"],["drle","image/dicom-rle"],["emf","image/emf"],["fits","image/fits"],["g3","image/g3fax"],["gif","image/gif"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["hsj2","image/hsj2"],["ief","image/ief"],["jls","image/jls"],["jp2","image/jp2"],["jpg2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["jph","image/jph"],["jhc","image/jphc"],["jpm","image/jpm"],["jpf","image/jpx"],["jpx","image/jpx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["ktx","image/ktx"],["ktx2","image/ktx2"],["png","image/png"],["sgi","image/sgi"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["t38","image/t38"],["tif","image/tiff"],["tiff","image/tiff"],["tfx","image/tiff-fx"],["webp","image/webp"],["wmf","image/wmf"],["disposition-notification","message/disposition-notification"],["u8msg","message/global"],["u8dsn","message/global-delivery-status"],["u8mdn","message/global-disposition-notification"],["u8hdr","message/global-headers"],["eml","message/rfc822"],["mime","message/rfc822"],["3mf","model/3mf"],["gltf","model/gltf+json"],["glb","model/gltf-binary"],["iges","model/iges"],["igs","model/iges"],["mesh","model/mesh"],["msh","model/mesh"],["silo","model/mesh"],["mtl","model/mtl"],["obj","model/obj"],["stpx","model/step+xml"],["stpz","model/step+zip"],["stpxz","model/step-xml+zip"],["stl","model/stl"],["vrml","model/vrml"],["wrl","model/vrml"],["*x3db","model/x3d+binary"],["x3dbz","model/x3d+binary"],["x3db","model/x3d+fastinfoset"],["*x3dv","model/x3d+vrml"],["x3dvz","model/x3d+vrml"],["x3d","model/x3d+xml"],["x3dz","model/x3d+xml"],["x3dv","model/x3d-vrml"],["appcache","text/cache-manifest"],["manifest","text/cache-manifest"],["ics","text/calendar"],["ifb","text/calendar"],["coffee","text/coffeescript"],["litcoffee","text/coffeescript"],["css","text/css"],["csv","text/csv"],["htm","text/html"],["html","text/html"],["shtml","text/html"],["jade","text/jade"],["jsx","text/jsx"],["less","text/less"],["markdown","text/markdown"],["md","text/markdown"],["mml","text/mathml"],["mdx","text/mdx"],["n3","text/n3"],["conf","text/plain"],["def","text/plain"],["in","text/plain"],["ini","text/plain"],["list","text/plain"],["log","text/plain"],["text","text/plain"],["txt","text/plain"],["rtx","text/richtext"],["*rtf","text/rtf"],["sgm","text/sgml"],["sgml","text/sgml"],["shex","text/shex"],["slim","text/slim"],["slm","text/slim"],["spdx","text/spdx"],["styl","text/stylus"],["stylus","text/stylus"],["tsv","text/tab-separated-values"],["man","text/troff"],["me","text/troff"],["ms","text/troff"],["roff","text/troff"],["t","text/troff"],["tr","text/troff"],["ttl","text/turtle"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["vcard","text/vcard"],["vtt","text/vtt"],["*xml","text/xml"],["yaml","text/yaml"],["yml","text/yaml"],["3gp","video/3gpp"],["3gpp","video/3gpp"],["3g2","video/3gpp2"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["m4s","video/iso.segment"],["jpgv","video/jpeg"],["jpm","video/jpm"],["jpgm","video/jpm"],["mj2","video/mj2"],["mjp2","video/mj2"],["ts","video/mp2t"],["mp4","video/mp4"],["mp4v","video/mp4"],["mpg4","video/mp4"],["m1v","video/mpeg"],["m2v","video/mpeg"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["ogv","video/ogg"],["mov","video/quicktime"],["qt","video/quicktime"],["webm","video/webm"]]);return Qc}var Zc,Eg;function af(){if(Eg)return Zc;Eg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{MultiMap:()=>e}),Zc=te(P);class e{constructor(){this._map=new Map}set(C,w){let g=this._map.get(C);g||(g=[],this._map.set(C,g)),g.push(w)}get(C){return this._map.get(C)||[]}has(C){return this._map.has(C)}delete(C,w){const g=this._map.get(C);g&&g.includes(w)&&this._map.set(C,g.filter(u=>w!==u))}deleteAll(C){this._map.delete(C)}hasValue(C,w){const g=this._map.get(C);return g?g.includes(w):!1}get size(){return this._map.size}[Symbol.iterator](){return this._map[Symbol.iterator]()}keys(){return this._map.keys()}values(){const C=[];for(const w of this.keys())C.push(...this.get(w));return C}clear(){this._map.clear()}}return Zc}var el,Og;function us(){if(Og)return el;Og=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{methodMetainfo:()=>e}),el=te(P);const e=new Map([["APIRequestContext.fetch",{title:'{method} "{url}"'}],["APIRequestContext.fetchResponseBody",{internal:!0}],["APIRequestContext.fetchLog",{internal:!0}],["APIRequestContext.storageState",{internal:!0}],["APIRequestContext.disposeAPIResponse",{internal:!0}],["APIRequestContext.dispose",{internal:!0}],["LocalUtils.zip",{internal:!0}],["LocalUtils.harOpen",{internal:!0}],["LocalUtils.harLookup",{internal:!0}],["LocalUtils.harClose",{internal:!0}],["LocalUtils.harUnzip",{internal:!0}],["LocalUtils.connect",{internal:!0}],["LocalUtils.tracingStarted",{internal:!0}],["LocalUtils.addStackToTracingNoReply",{internal:!0}],["LocalUtils.traceDiscarded",{internal:!0}],["LocalUtils.globToRegex",{internal:!0}],["Root.initialize",{internal:!0}],["Playwright.newRequest",{title:"Create request context"}],["DebugController.initialize",{internal:!0}],["DebugController.setReportStateChanged",{internal:!0}],["DebugController.resetForReuse",{internal:!0}],["DebugController.navigate",{internal:!0}],["DebugController.setRecorderMode",{internal:!0}],["DebugController.highlight",{internal:!0}],["DebugController.hideHighlight",{internal:!0}],["DebugController.resume",{internal:!0}],["DebugController.kill",{internal:!0}],["DebugController.closeAllBrowsers",{internal:!0}],["SocksSupport.socksConnected",{internal:!0}],["SocksSupport.socksFailed",{internal:!0}],["SocksSupport.socksData",{internal:!0}],["SocksSupport.socksError",{internal:!0}],["SocksSupport.socksEnd",{internal:!0}],["BrowserType.launch",{title:"Launch browser"}],["BrowserType.launchPersistentContext",{title:"Launch persistent context"}],["BrowserType.connectOverCDP",{title:"Connect over CDP"}],["Browser.close",{title:"Close browser"}],["Browser.killForTests",{internal:!0}],["Browser.defaultUserAgentForTest",{internal:!0}],["Browser.newContext",{title:"Create context"}],["Browser.newContextForReuse",{internal:!0}],["Browser.disconnectFromReusedContext",{internal:!0}],["Browser.newBrowserCDPSession",{internal:!0,title:"Create CDP session"}],["Browser.startTracing",{internal:!0}],["Browser.stopTracing",{internal:!0}],["EventTarget.waitForEventInfo",{title:'Wait for event "{info.event}"',snapshot:!0}],["BrowserContext.waitForEventInfo",{title:'Wait for event "{info.event}"',snapshot:!0}],["Page.waitForEventInfo",{title:'Wait for event "{info.event}"',snapshot:!0}],["WebSocket.waitForEventInfo",{title:'Wait for event "{info.event}"',snapshot:!0}],["ElectronApplication.waitForEventInfo",{title:'Wait for event "{info.event}"',snapshot:!0}],["AndroidDevice.waitForEventInfo",{title:'Wait for event "{info.event}"',snapshot:!0}],["BrowserContext.addCookies",{title:"Add cookies"}],["BrowserContext.addInitScript",{title:"Add init script"}],["BrowserContext.clearCookies",{title:"Clear cookies"}],["BrowserContext.clearPermissions",{title:"Clear permissions"}],["BrowserContext.close",{title:"Close context"}],["BrowserContext.cookies",{title:"Get cookies"}],["BrowserContext.exposeBinding",{title:"Expose binding"}],["BrowserContext.grantPermissions",{title:"Grant permissions"}],["BrowserContext.newPage",{title:"Create page"}],["BrowserContext.registerSelectorEngine",{internal:!0}],["BrowserContext.setTestIdAttributeName",{internal:!0}],["BrowserContext.setExtraHTTPHeaders",{title:"Set extra HTTP headers"}],["BrowserContext.setGeolocation",{title:"Set geolocation"}],["BrowserContext.setHTTPCredentials",{title:"Set HTTP credentials"}],["BrowserContext.setNetworkInterceptionPatterns",{internal:!0}],["BrowserContext.setWebSocketInterceptionPatterns",{internal:!0}],["BrowserContext.setOffline",{title:"Set offline mode"}],["BrowserContext.storageState",{title:"Get storage state"}],["BrowserContext.pause",{title:"Pause"}],["BrowserContext.enableRecorder",{internal:!0}],["BrowserContext.disableRecorder",{internal:!0}],["BrowserContext.newCDPSession",{internal:!0}],["BrowserContext.harStart",{internal:!0}],["BrowserContext.harExport",{internal:!0}],["BrowserContext.createTempFiles",{internal:!0}],["BrowserContext.updateSubscription",{internal:!0}],["BrowserContext.clockFastForward",{title:'Fast forward clock "{ticksNumber}{ticksString}"'}],["BrowserContext.clockInstall",{title:'Install clock "{timeNumber}{timeString}"'}],["BrowserContext.clockPauseAt",{title:'Pause clock "{timeNumber}{timeString}"'}],["BrowserContext.clockResume",{title:"Resume clock"}],["BrowserContext.clockRunFor",{title:'Run clock "{ticksNumber}{ticksString}"'}],["BrowserContext.clockSetFixedTime",{title:'Set fixed time "{timeNumber}{timeString}"'}],["BrowserContext.clockSetSystemTime",{title:'Set system time "{timeNumber}{timeString}"'}],["Page.addInitScript",{}],["Page.close",{title:"Close"}],["Page.emulateMedia",{title:"Emulate media",snapshot:!0}],["Page.exposeBinding",{title:"Expose binding"}],["Page.goBack",{title:"Go back",slowMo:!0,snapshot:!0}],["Page.goForward",{title:"Go forward",slowMo:!0,snapshot:!0}],["Page.requestGC",{title:"Request garbage collection"}],["Page.registerLocatorHandler",{title:"Register locator handler"}],["Page.resolveLocatorHandlerNoReply",{internal:!0}],["Page.unregisterLocatorHandler",{title:"Unregister locator handler"}],["Page.reload",{title:"Reload",slowMo:!0,snapshot:!0}],["Page.expectScreenshot",{title:"Expect screenshot",snapshot:!0}],["Page.screenshot",{title:"Screenshot",snapshot:!0}],["Page.setExtraHTTPHeaders",{title:"Set extra HTTP headers"}],["Page.setNetworkInterceptionPatterns",{internal:!0}],["Page.setWebSocketInterceptionPatterns",{internal:!0}],["Page.setViewportSize",{title:"Set viewport size",snapshot:!0}],["Page.keyboardDown",{title:'Key down "{key}"',slowMo:!0,snapshot:!0}],["Page.keyboardUp",{title:'Key up "{key}"',slowMo:!0,snapshot:!0}],["Page.keyboardInsertText",{title:'Insert "{text}"',slowMo:!0,snapshot:!0}],["Page.keyboardType",{title:'Type "{text}"',slowMo:!0,snapshot:!0}],["Page.keyboardPress",{title:'Press "{key}"',slowMo:!0,snapshot:!0}],["Page.mouseMove",{title:"Mouse move",slowMo:!0,snapshot:!0}],["Page.mouseDown",{title:"Mouse down",slowMo:!0,snapshot:!0}],["Page.mouseUp",{title:"Mouse up",slowMo:!0,snapshot:!0}],["Page.mouseClick",{title:"Click",slowMo:!0,snapshot:!0}],["Page.mouseWheel",{title:"Mouse wheel",slowMo:!0,snapshot:!0}],["Page.touchscreenTap",{title:"Tap",slowMo:!0,snapshot:!0}],["Page.accessibilitySnapshot",{internal:!0,snapshot:!0}],["Page.pdf",{title:"PDF"}],["Page.snapshotForAI",{internal:!0,snapshot:!0}],["Page.startJSCoverage",{internal:!0}],["Page.stopJSCoverage",{internal:!0}],["Page.startCSSCoverage",{internal:!0}],["Page.stopCSSCoverage",{internal:!0}],["Page.bringToFront",{title:"Bring to front"}],["Page.updateSubscription",{internal:!0}],["Frame.evalOnSelector",{title:"Evaluate",snapshot:!0}],["Frame.evalOnSelectorAll",{title:"Evaluate",snapshot:!0}],["Frame.addScriptTag",{title:"Add script tag",snapshot:!0}],["Frame.addStyleTag",{title:"Add style tag",snapshot:!0}],["Frame.ariaSnapshot",{title:"Aria snapshot",snapshot:!0}],["Frame.blur",{title:"Blur",slowMo:!0,snapshot:!0}],["Frame.check",{title:"Check",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.click",{title:"Click",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.content",{title:"Get content",snapshot:!0}],["Frame.dragAndDrop",{title:"Drag and drop",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.dblclick",{title:"Double click",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.dispatchEvent",{title:'Dispatch "{type}"',slowMo:!0,snapshot:!0}],["Frame.evaluateExpression",{title:"Evaluate",snapshot:!0}],["Frame.evaluateExpressionHandle",{title:"Evaluate",snapshot:!0}],["Frame.fill",{title:'Fill "{value}"',slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.focus",{title:"Focus",slowMo:!0,snapshot:!0}],["Frame.frameElement",{internal:!0}],["Frame.generateLocatorString",{internal:!0}],["Frame.highlight",{internal:!0}],["Frame.getAttribute",{internal:!0,snapshot:!0}],["Frame.goto",{title:'Navigate to "{url}"',slowMo:!0,snapshot:!0}],["Frame.hover",{title:"Hover",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.innerHTML",{title:"Get HTML",snapshot:!0}],["Frame.innerText",{title:"Get inner text",snapshot:!0}],["Frame.inputValue",{title:"Get input value",snapshot:!0}],["Frame.isChecked",{title:"Is checked",snapshot:!0}],["Frame.isDisabled",{title:"Is disabled",snapshot:!0}],["Frame.isEnabled",{title:"Is enabled",snapshot:!0}],["Frame.isHidden",{title:"Is hidden",snapshot:!0}],["Frame.isVisible",{title:"Is visible",snapshot:!0}],["Frame.isEditable",{title:"Is editable",snapshot:!0}],["Frame.press",{title:'Press "{key}"',slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.querySelector",{title:"Query selector",snapshot:!0}],["Frame.querySelectorAll",{title:"Query selector all",snapshot:!0}],["Frame.queryCount",{title:"Query count",snapshot:!0}],["Frame.selectOption",{title:"Select option",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.setContent",{title:"Set content",snapshot:!0}],["Frame.setInputFiles",{title:"Set input files",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.tap",{title:"Tap",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.textContent",{title:"Get text content",snapshot:!0}],["Frame.title",{internal:!0}],["Frame.type",{title:"Type",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.uncheck",{title:"Uncheck",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["Frame.waitForTimeout",{title:"Wait for timeout",snapshot:!0}],["Frame.waitForFunction",{title:"Wait for function",snapshot:!0}],["Frame.waitForSelector",{title:"Wait for selector",snapshot:!0}],["Frame.expect",{title:'Expect "{expression}"',snapshot:!0}],["Worker.evaluateExpression",{title:"Evaluate"}],["Worker.evaluateExpressionHandle",{title:"Evaluate"}],["JSHandle.dispose",{}],["ElementHandle.dispose",{}],["JSHandle.evaluateExpression",{title:"Evaluate",snapshot:!0}],["ElementHandle.evaluateExpression",{title:"Evaluate",snapshot:!0}],["JSHandle.evaluateExpressionHandle",{title:"Evaluate",snapshot:!0}],["ElementHandle.evaluateExpressionHandle",{title:"Evaluate",snapshot:!0}],["JSHandle.getPropertyList",{internal:!0}],["ElementHandle.getPropertyList",{internal:!0}],["JSHandle.getProperty",{internal:!0}],["ElementHandle.getProperty",{internal:!0}],["JSHandle.jsonValue",{internal:!0}],["ElementHandle.jsonValue",{internal:!0}],["ElementHandle.evalOnSelector",{title:"Evaluate",snapshot:!0}],["ElementHandle.evalOnSelectorAll",{title:"Evaluate",snapshot:!0}],["ElementHandle.boundingBox",{title:"Get bounding box",snapshot:!0}],["ElementHandle.check",{title:"Check",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.click",{title:"Click",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.contentFrame",{internal:!0,snapshot:!0}],["ElementHandle.dblclick",{title:"Double click",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.dispatchEvent",{title:"Dispatch event",slowMo:!0,snapshot:!0}],["ElementHandle.fill",{title:'Fill "{value}"',slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.focus",{title:"Focus",slowMo:!0,snapshot:!0}],["ElementHandle.getAttribute",{internal:!0}],["ElementHandle.hover",{title:"Hover",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.innerHTML",{title:"Get HTML",snapshot:!0}],["ElementHandle.innerText",{title:"Get inner text",snapshot:!0}],["ElementHandle.inputValue",{title:"Get input value",snapshot:!0}],["ElementHandle.isChecked",{title:"Is checked",snapshot:!0}],["ElementHandle.isDisabled",{title:"Is disabled",snapshot:!0}],["ElementHandle.isEditable",{title:"Is editable",snapshot:!0}],["ElementHandle.isEnabled",{title:"Is enabled",snapshot:!0}],["ElementHandle.isHidden",{title:"Is hidden",snapshot:!0}],["ElementHandle.isVisible",{title:"Is visible",snapshot:!0}],["ElementHandle.ownerFrame",{title:"Get owner frame"}],["ElementHandle.press",{title:'Press "{key}"',slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.querySelector",{title:"Query selector",snapshot:!0}],["ElementHandle.querySelectorAll",{title:"Query selector all",snapshot:!0}],["ElementHandle.screenshot",{title:"Screenshot",snapshot:!0}],["ElementHandle.scrollIntoViewIfNeeded",{title:"Scroll into view",slowMo:!0,snapshot:!0}],["ElementHandle.selectOption",{title:"Select option",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.selectText",{title:"Select text",slowMo:!0,snapshot:!0}],["ElementHandle.setInputFiles",{title:"Set input files",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.tap",{title:"Tap",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.textContent",{title:"Get text content",snapshot:!0}],["ElementHandle.type",{title:"Type",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.uncheck",{title:"Uncheck",slowMo:!0,snapshot:!0,pausesBeforeInput:!0}],["ElementHandle.waitForElementState",{title:"Wait for state",snapshot:!0}],["ElementHandle.waitForSelector",{title:"Wait for selector",snapshot:!0}],["Request.response",{internal:!0}],["Request.rawRequestHeaders",{internal:!0}],["Route.redirectNavigationRequest",{internal:!0}],["Route.abort",{}],["Route.continue",{internal:!0}],["Route.fulfill",{internal:!0}],["WebSocketRoute.connect",{internal:!0}],["WebSocketRoute.ensureOpened",{internal:!0}],["WebSocketRoute.sendToPage",{internal:!0}],["WebSocketRoute.sendToServer",{internal:!0}],["WebSocketRoute.closePage",{internal:!0}],["WebSocketRoute.closeServer",{internal:!0}],["Response.body",{internal:!0}],["Response.securityDetails",{internal:!0}],["Response.serverAddr",{internal:!0}],["Response.rawResponseHeaders",{internal:!0}],["Response.sizes",{internal:!0}],["BindingCall.reject",{internal:!0}],["BindingCall.resolve",{internal:!0}],["Dialog.accept",{title:"Accept dialog"}],["Dialog.dismiss",{title:"Dismiss dialog"}],["Tracing.tracingStart",{internal:!0}],["Tracing.tracingStartChunk",{internal:!0}],["Tracing.tracingGroup",{title:'Trace "{name}"'}],["Tracing.tracingGroupEnd",{title:"Group end"}],["Tracing.tracingStopChunk",{internal:!0}],["Tracing.tracingStop",{internal:!0}],["Artifact.pathAfterFinished",{internal:!0}],["Artifact.saveAs",{internal:!0}],["Artifact.saveAsStream",{internal:!0}],["Artifact.failure",{internal:!0}],["Artifact.stream",{internal:!0}],["Artifact.cancel",{internal:!0}],["Artifact.delete",{internal:!0}],["Stream.read",{internal:!0}],["Stream.close",{internal:!0}],["WritableStream.write",{internal:!0}],["WritableStream.close",{internal:!0}],["CDPSession.send",{internal:!0}],["CDPSession.detach",{internal:!0}],["Electron.launch",{title:"Launch electron"}],["ElectronApplication.browserWindow",{internal:!0}],["ElectronApplication.evaluateExpression",{title:"Evaluate"}],["ElectronApplication.evaluateExpressionHandle",{title:"Evaluate"}],["ElectronApplication.updateSubscription",{internal:!0}],["Android.devices",{internal:!0}],["AndroidSocket.write",{internal:!0}],["AndroidSocket.close",{internal:!0}],["AndroidDevice.wait",{}],["AndroidDevice.fill",{title:'Fill "{text}"'}],["AndroidDevice.tap",{title:"Tap"}],["AndroidDevice.drag",{title:"Drag"}],["AndroidDevice.fling",{title:"Fling"}],["AndroidDevice.longTap",{title:"Long tap"}],["AndroidDevice.pinchClose",{title:"Pinch close"}],["AndroidDevice.pinchOpen",{title:"Pinch open"}],["AndroidDevice.scroll",{title:"Scroll"}],["AndroidDevice.swipe",{title:"Swipe"}],["AndroidDevice.info",{internal:!0}],["AndroidDevice.screenshot",{title:"Screenshot"}],["AndroidDevice.inputType",{title:"Type"}],["AndroidDevice.inputPress",{title:"Press"}],["AndroidDevice.inputTap",{title:"Tap"}],["AndroidDevice.inputSwipe",{title:"Swipe"}],["AndroidDevice.inputDrag",{title:"Drag"}],["AndroidDevice.launchBrowser",{title:"Launch browser"}],["AndroidDevice.open",{title:"Open app"}],["AndroidDevice.shell",{internal:!0}],["AndroidDevice.installApk",{title:"Install apk"}],["AndroidDevice.push",{title:"Push"}],["AndroidDevice.connectToWebView",{internal:!0}],["AndroidDevice.close",{internal:!0}],["JsonPipe.send",{internal:!0}],["JsonPipe.close",{internal:!0}]]);return el}var tl,Tg;function Vw(){if(Tg)return tl;Tg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{formatProtocolParam:()=>U,renderTitleForCall:()=>w}),tl=te(P);var e=us();function U(g,u){if(!g)return"";if(u==="url")try{const _=new URL(g[u]);return _.protocol==="data:"?_.protocol:_.protocol==="about:"?g[u]:_.pathname+_.search}catch{return g[u]}return u==="timeNumber"?new Date(g[u]).toString():C(g,u)}function C(g,u){const _=u.split(".");let f=g;for(const d of _){if(typeof f!="object"||f===null)return"";f=f[d]}return f===void 0?"":String(f)}function w(g){var _;return(g.title??((_=e.methodMetainfo.get(g.type+"."+g.method))==null?void 0:_.title)??g.method).replace(/\{([^}]+)\}/g,(f,d)=>U(g.params,d))}return tl}var rl,Cg;function Wn(){if(Cg)return rl;Cg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{isError:()=>w,isObject:()=>C,isRegExp:()=>U,isString:()=>e.isString}),rl=te(P);var e=Ei();function U(g){return g instanceof RegExp||Object.prototype.toString.call(g)==="[object RegExp]"}function C(g){return typeof g=="object"&&g!==null}function w(g){var u;return g instanceof Error||g&&((u=Object.getPrototypeOf(g))==null?void 0:u.name)==="Error"}return rl}var nl,Pg;function Kw(){if(Pg)return nl;Pg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{Semaphore:()=>U}),nl=te(P);var e=Fr();class U{constructor(w){this._acquired=0,this._queue=[],this._max=w}setMax(w){this._max=w}acquire(){const w=new e.ManualPromise;return this._queue.push(w),this._flush(),w}release(){--this._acquired,this._flush()}_flush(){for(;this._acquired<this._max&&this._queue.length;)++this._acquired,this._queue.shift().resolve()}}return nl}var il,kg;function En(){if(kg)return il;kg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{DEFAULT_PLAYWRIGHT_LAUNCH_TIMEOUT:()=>_,DEFAULT_PLAYWRIGHT_TIMEOUT:()=>u,monotonicTime:()=>g,setTimeOrigin:()=>C,timeOrigin:()=>w}),il=te(P);let e=performance.timeOrigin,U=0;function C(f){e=f,U=performance.timeOrigin-f}function w(){return e}function g(){return Math.floor((performance.now()+U)*1e3)/1e3}const u=3e4,_=3*60*1e3;return il}var sl,Ag;function Ao(){if(Ag)return sl;Ag=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{pollAgainstDeadline:()=>C,raceAgainstDeadline:()=>U}),sl=te(P);var e=En();async function U(w,g){let u;return Promise.race([w().then(_=>({result:_,timedOut:!1})),new Promise(_=>{const d=(g||2147483647)-(0,e.monotonicTime)();u=setTimeout(()=>_({timedOut:!0}),d)})]).finally(()=>{clearTimeout(u)})}async function C(w,g,u=[100,250,500,1e3]){const _=u.pop()??1e3;let f;const d=()=>Promise.resolve().then(w);for(;;){const v=(0,e.monotonicTime)();if(g&&v>=g)break;const a=await U(d,g);if(a.timedOut)break;if(f=a.result.result,!a.result.continuePolling)return{result:f,timedOut:!1};const s=u.shift()??_;if(g&&g<=(0,e.monotonicTime)()+s)break;await new Promise(n=>setTimeout(n,s))}return{timedOut:!0,result:f}}return sl}var al,Ig;function di(){if(Ig)return al;Ig=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{constructURLBasedOnBaseURL:()=>a,globToRegexPattern:()=>C,resolveGlobToRegexPattern:()=>_,urlMatches:()=>u,urlMatchesEqual:()=>g}),al=te(P);var e=Ei();const U=new Set(["$","^","+",".","*","(",")","|","\\","?","{","}","[","]"]);function C(s){const n=["^"];let o=!1;for(let h=0;h<s.length;++h){const m=s[h];if(m==="\\"&&h+1<s.length){const c=s[++h];n.push(U.has(c)?"\\"+c:c);continue}if(m==="*"){const c=s[h-1];let l=1;for(;s[h+1]==="*";)l++,h++;const x=s[h+1];l>1&&(c==="/"||c===void 0)&&(x==="/"||x===void 0)?(n.push("((?:[^/]*(?:/|$))*)"),h++):n.push("([^/]*)");continue}switch(m){case"{":o=!0,n.push("(");break;case"}":o=!1,n.push(")");break;case",":if(o){n.push("|");break}n.push("\\"+m);break;default:n.push(U.has(m)?"\\"+m:m)}}return n.push("$"),n.join("")}function w(s){return s instanceof RegExp||Object.prototype.toString.call(s)==="[object RegExp]"}function g(s,n){return w(s)&&w(n)?s.source===n.source&&s.flags===n.flags:s===n}function u(s,n,o,h){if(o===void 0||o==="")return!0;if((0,e.isString)(o)&&(o=new RegExp(_(s,o,h))),w(o))return o.test(n);const m=v(n);if(!m)return!1;if(typeof o!="function")throw new Error("url parameter should be string, RegExp or function");return o(m)}function _(s,n,o){return o&&(s=f(s)),n=d(s,n),C(n)}function f(s){return s&&/^https?:\/\//.test(s)&&(s=s.replace(/^http/,"ws")),s}function d(s,n){if(!n.startsWith("*")){let o=function(l,x){return l.length===0?"":(h.set(x,l),x)};const h=new Map;if(n=n.replaceAll(/\\\\\?/g,"?"),n.startsWith("about:")||n.startsWith("data:")||n.startsWith("chrome:")||n.startsWith("edge:")||n.startsWith("file:"))return n;const m=n.split("/").map((l,x)=>{if(l==="."||l===".."||l==="")return l;if(x===0&&l.endsWith(":"))return o(l,"http:");const T=l.indexOf("?");if(T===-1)return o(l,`$_${x}_$`);const b=o(l.substring(0,T),`$_${x}_$`),p=o(l.substring(T),`?$_${x}_$`);return b+p}).join("/");let c=a(s,m);for(const[l,x]of h)c=c.replace(l,x);n=c}return n}function v(s){try{return new URL(s)}catch{return null}}function a(s,n){try{return new URL(n,s).toString()}catch{return n}}return al}var ol,Ng;function Gw(){if(Ng)return ol;Ng=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{blendWithWhite:()=>e,colorDeltaE94:()=>C,rgb2gray:()=>U,srgb2xyz:()=>w,xyz2lab:()=>_}),ol=te(P);function e(f,d){return 255+(f-255)*d}function U(f,d,v){return 77*f+150*d+29*v+128>>8}function C(f,d){const[v,a,s]=_(w(f)),[n,o,h]=_(w(d)),m=v-n,c=a-o,l=s-h,x=Math.sqrt(a**2+s**2),T=Math.sqrt(o**2+h**2),b=x-T;let p=c**2+l**2-b**2;p=p<0?0:Math.sqrt(p);const O=.045,z=.015,$=1,q=1,J=1,le=1+O*x,_e=1+z*x;return Math.sqrt((m/1/$)**2+(b/le/q)**2+(p/_e/J)**2)}function w(f){let d=f[0]/255,v=f[1]/255,a=f[2]/255;return d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,v=v>.04045?Math.pow((v+.055)/1.055,2.4):v/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,[d*.4124+v*.3576+a*.1805,d*.2126+v*.7152+a*.0722,d*.0193+v*.1192+a*.9505]}const g=6*6/29/29,u=6*6*6/29/29/29;function _(f){const d=f[0]/.950489,v=f[1],a=f[2]/1.08884,s=d>u?d**(1/3):d/3/g+4/29,n=v>u?v**(1/3):v/3/g+4/29,o=a>u?a**(1/3):a/3/g+4/29,h=116*n-16,m=500*(s-n),c=200*(n-o);return[h,m,c]}return ol}var cl,Rg;function aO(){if(Rg)return cl;Rg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{ImageChannel:()=>U}),cl=te(P);var e=Gw();class U{static intoRGB(w,g,u,_={}){const{paddingSize:f=0,paddingColorOdd:d=[255,0,255],paddingColorEven:v=[0,255,0]}=_,a=w+2*f,s=g+2*f,n=new Uint8Array(a*s),o=new Uint8Array(a*s),h=new Uint8Array(a*s);for(let m=0;m<s;++m)for(let c=0;c<a;++c){const l=m*a+c;if(m>=f&&m<s-f&&c>=f&&c<a-f){const x=((m-f)*w+(c-f))*4,T=u[x+3]===255?1:u[x+3]/255;n[l]=(0,e.blendWithWhite)(u[x],T),o[l]=(0,e.blendWithWhite)(u[x+1],T),h[l]=(0,e.blendWithWhite)(u[x+2],T)}else{const x=(m+c)%2===0?v:d;n[l]=x[0],o[l]=x[1],h[l]=x[2]}}return[new U(a,s,n),new U(a,s,o),new U(a,s,h)]}constructor(w,g,u){this.data=u,this.width=w,this.height=g}get(w,g){return this.data[g*this.width+w]}boundXY(w,g){return[Math.min(Math.max(w,0),this.width-1),Math.min(Math.max(g,0),this.height-1)]}}return cl}var ll,Lg;function oO(){if(Lg)return ll;Lg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{FastStats:()=>C,ssim:()=>U}),ll=te(P);const e=2**8-1;function U(w,g,u,_,f){const d=w.meanC1(g,u,_,f),v=w.meanC2(g,u,_,f),a=w.varianceC1(g,u,_,f),s=w.varianceC2(g,u,_,f),n=w.covariance(g,u,_,f),o=(.01*e)**2,h=(.03*e)**2;return(2*d*v+o)*(2*n+h)/(d**2+v**2+o)/(a+s+h)}class C{constructor(g,u){this.c1=g,this.c2=u;const{width:_,height:f}=g;this._partialSumC1=new Array(_*f),this._partialSumC2=new Array(_*f),this._partialSumSq1=new Array(_*f),this._partialSumSq2=new Array(_*f),this._partialSumMult=new Array(_*f);const d=(v,a,s,n,o)=>{v[a]=s,o>0&&(v[a]+=v[(o-1)*_+n]),n>0&&(v[a]+=v[o*_+n-1]),n>0&&o>0&&(v[a]-=v[(o-1)*_+n-1])};for(let v=0;v<f;++v)for(let a=0;a<_;++a){const s=v*_+a;d(this._partialSumC1,s,this.c1.data[s],a,v),d(this._partialSumC2,s,this.c2.data[s],a,v),d(this._partialSumSq1,s,this.c1.data[s]*this.c1.data[s],a,v),d(this._partialSumSq2,s,this.c2.data[s]*this.c2.data[s],a,v),d(this._partialSumMult,s,this.c1.data[s]*this.c2.data[s],a,v)}}_sum(g,u,_,f,d){const v=this.c1.width;let a=g[d*v+f];return _>0&&(a-=g[(_-1)*v+f]),u>0&&(a-=g[d*v+u-1]),u>0&&_>0&&(a+=g[(_-1)*v+u-1]),a}meanC1(g,u,_,f){const d=(f-u+1)*(_-g+1);return this._sum(this._partialSumC1,g,u,_,f)/d}meanC2(g,u,_,f){const d=(f-u+1)*(_-g+1);return this._sum(this._partialSumC2,g,u,_,f)/d}varianceC1(g,u,_,f){const d=(f-u+1)*(_-g+1);return(this._sum(this._partialSumSq1,g,u,_,f)-this._sum(this._partialSumC1,g,u,_,f)**2/d)/d}varianceC2(g,u,_,f){const d=(f-u+1)*(_-g+1);return(this._sum(this._partialSumSq2,g,u,_,f)-this._sum(this._partialSumC2,g,u,_,f)**2/d)/d}covariance(g,u,_,f){const d=(f-u+1)*(_-g+1);return(this._sum(this._partialSumMult,g,u,_,f)-this._sum(this._partialSumC1,g,u,_,f)*this._sum(this._partialSumC2,g,u,_,f)/d)/d}}return ll}var ul,Dg;function cO(){if(Dg)return ul;Dg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{compare:()=>_}),ul=te(P);var e=Gw(),U=aO(),C=oO();const w=15,g=1;function u(f,d,v,a,s,n,o){const h=(a*f+v)*4;d[h+0]=s,d[h+1]=n,d[h+2]=o,d[h+3]=255}function _(f,d,v,a,s,n={}){const{maxColorDeltaE94:o=1}=n,h=Math.max(g,w),m=[255,0,255],c=[0,255,0],[l,x,T]=U.ImageChannel.intoRGB(a,s,d,{paddingSize:h,paddingColorEven:m,paddingColorOdd:c}),[b,p,O]=U.ImageChannel.intoRGB(a,s,f,{paddingSize:h,paddingColorEven:m,paddingColorOdd:c}),z=(S,j)=>{},$=v?(S,j)=>u(a,v,S-h,j-h,255,0,0):z,q=v?(S,j)=>u(a,v,S-h,j-h,255,255,0):z,J=v?(S,j)=>{const y=(0,e.rgb2gray)(l.get(S,j),x.get(S,j),T.get(S,j)),I=(0,e.blendWithWhite)(y,.1);u(a,v,S-h,j-h,I,I,I)}:z;let le,_e,ge,ne=0;for(let S=h;S<l.height-h;++S)for(let j=h;j<l.width-h;++j){if(l.get(j,S)===b.get(j,S)&&x.get(j,S)===p.get(j,S)&&T.get(j,S)===O.get(j,S)){J(j,S);continue}if((0,e.colorDeltaE94)([l.get(j,S),x.get(j,S),T.get(j,S)],[b.get(j,S),p.get(j,S),O.get(j,S)])<=o){J(j,S);continue}(!le||!_e||!ge)&&(le=new C.FastStats(l,b),_e=new C.FastStats(x,p),ge=new C.FastStats(T,O));const[I,D]=l.boundXY(j-g,S-g),[ie,he]=l.boundXY(j+g,S+g),me=le.varianceC1(I,D,ie,he)+_e.varianceC1(I,D,ie,he)+ge.varianceC1(I,D,ie,he),ye=le.varianceC2(I,D,ie,he)+_e.varianceC2(I,D,ie,he)+ge.varianceC2(I,D,ie,he);if(me===0||ye===0){$(j,S),++ne;continue}const[Se,Oe]=l.boundXY(j-w,S-w),[Pe,Ne]=l.boundXY(j+w,S+w);((0,C.ssim)(le,Se,Oe,Pe,Ne)+(0,C.ssim)(_e,Se,Oe,Pe,Ne)+(0,C.ssim)(ge,Se,Oe,Pe,Ne))/3>=.99?q(j,S):($(j,S),++ne)}return ne}return ul}var dl,Mg;function lO(){if(Mg)return dl;Mg=1,dl=r;const t={threshold:.1,includeAA:!1,alpha:.1,aaColor:[255,255,0],diffColor:[255,0,0],diffColorAlt:null,diffMask:!1};function r(g,u,_,f,d,v){if(!i(g)||!i(u)||_&&!i(_))throw new Error("Image data: Uint8Array, Uint8ClampedArray or Buffer expected.");if(g.length!==u.length||_&&_.length!==g.length)throw new Error("Image sizes do not match.");if(g.length!==f*d*4)throw new Error("Image data size does not match width/height.");v=Object.assign({},t,v);const a=f*d,s=new Uint32Array(g.buffer,g.byteOffset,a),n=new Uint32Array(u.buffer,u.byteOffset,a);let o=!0;for(let c=0;c<a;c++)if(s[c]!==n[c]){o=!1;break}if(o){if(_&&!v.diffMask)for(let c=0;c<a;c++)w(g,4*c,v.alpha,_);return 0}const h=35215*v.threshold*v.threshold;let m=0;for(let c=0;c<d;c++)for(let l=0;l<f;l++){const x=(c*f+l)*4,T=V(g,u,x,x);Math.abs(T)>h?!v.includeAA&&(E(g,l,c,f,d,u)||E(u,l,c,f,d,g))?_&&!v.diffMask&&C(_,x,...v.aaColor):(_&&C(_,x,...T<0&&v.diffColorAlt||v.diffColor),m++):_&&(v.diffMask||w(g,x,v.alpha,_))}return m}function i(g){return ArrayBuffer.isView(g)&&g.constructor.BYTES_PER_ELEMENT===1}function E(g,u,_,f,d,v){const a=Math.max(u-1,0),s=Math.max(_-1,0),n=Math.min(u+1,f-1),o=Math.min(_+1,d-1),h=(_*f+u)*4;let m=u===a||u===n||_===s||_===o?1:0,c=0,l=0,x,T,b,p;for(let O=a;O<=n;O++)for(let z=s;z<=o;z++){if(O===u&&z===_)continue;const $=V(g,g,h,(z*f+O)*4,!0);if($===0){if(m++,m>2)return!1}else $<c?(c=$,x=O,T=z):$>l&&(l=$,b=O,p=z)}return c===0||l===0?!1:R(g,x,T,f,d)&&R(v,x,T,f,d)||R(g,b,p,f,d)&&R(v,b,p,f,d)}function R(g,u,_,f,d){const v=Math.max(u-1,0),a=Math.max(_-1,0),s=Math.min(u+1,f-1),n=Math.min(_+1,d-1),o=(_*f+u)*4;let h=u===v||u===s||_===a||_===n?1:0;for(let m=v;m<=s;m++)for(let c=a;c<=n;c++){if(m===u&&c===_)continue;const l=(c*f+m)*4;if(g[o]===g[l]&&g[o+1]===g[l+1]&&g[o+2]===g[l+2]&&g[o+3]===g[l+3]&&h++,h>2)return!0}return!1}function V(g,u,_,f,d){let v=g[_+0],a=g[_+1],s=g[_+2],n=g[_+3],o=u[f+0],h=u[f+1],m=u[f+2],c=u[f+3];if(n===c&&v===o&&a===h&&s===m)return 0;n<255&&(n/=255,v=U(v,n),a=U(a,n),s=U(s,n)),c<255&&(c/=255,o=U(o,c),h=U(h,c),m=U(m,c));const l=te(v,a,s),x=te(o,h,m),T=l-x;if(d)return T;const b=P(v,a,s)-P(o,h,m),p=e(v,a,s)-e(o,h,m),O=.5053*T*T+.299*b*b+.1957*p*p;return l>x?-O:O}function te(g,u,_){return g*.29889531+u*.58662247+_*.11448223}function P(g,u,_){return g*.59597799-u*.2741761-_*.32180189}function e(g,u,_){return g*.21147017-u*.52261711+_*.31114694}function U(g,u){return 255+(g-255)*u}function C(g,u,_,f,d){g[u+0]=_,g[u+1]=f,g[u+2]=d,g[u+3]=255}function w(g,u,_,f){const d=g[u+0],v=g[u+1],a=g[u+2],s=U(te(d,v,a),_*g[u+3]/255);C(f,u,s,s,s)}return dl}var hl,Fg;function Jw(){if(Fg)return hl;Fg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{compareBuffersOrStrings:()=>a,getComparator:()=>d}),hl=U(C);var w=cO(),g=e(lO()),u=Ar(),_=Ar(),f=Ar();function d(m){return m==="image/png"?s.bind(null,"image/png"):m==="image/jpeg"?s.bind(null,"image/jpeg"):m==="text/plain"?o:a}const v=5*1024;function a(m,c){return typeof m=="string"?o(m,c):!m||!(m instanceof Buffer)?{errorMessage:"Actual result should be a Buffer or a string."}:Buffer.compare(m,c)?{errorMessage:"Buffers differ"}:null}function s(m,c,l,x={}){if(!c||!(c instanceof Buffer))return{errorMessage:"Actual result should be a Buffer."};n(l,m);let T=m==="image/png"?f.PNG.sync.read(c):u.jpegjs.decode(c,{maxMemoryUsageInMB:v}),b=m==="image/png"?f.PNG.sync.read(l):u.jpegjs.decode(l,{maxMemoryUsageInMB:v});const p={width:Math.max(b.width,T.width),height:Math.max(b.height,T.height)};let O="";(b.width!==T.width||b.height!==T.height)&&(O=`Expected an image ${b.width}px by ${b.height}px, received ${T.width}px by ${T.height}px. `,T=h(T,p),b=h(b,p));const z=new f.PNG({width:p.width,height:p.height});let $;if(x.comparator==="ssim-cie94")$=(0,w.compare)(b.data,T.data,z.data,p.width,p.height,{maxColorDeltaE94:1});else if((x.comparator??"pixelmatch")==="pixelmatch")$=(0,g.default)(b.data,T.data,z.data,p.width,p.height,{threshold:x.threshold??.2});else throw new Error(`Configuration specifies unknown comparator "${x.comparator}"`);const q=x.maxDiffPixels,J=x.maxDiffPixelRatio!==void 0?b.width*b.height*x.maxDiffPixelRatio:void 0;let le;q!==void 0&&J!==void 0?le=Math.min(q,J):le=q??J??0;const _e=Math.ceil($/(b.width*b.height)*100)/100,ge=$>le?`${$} pixels (ratio ${_e.toFixed(2)} of all image pixels) are different.`:"";return ge||O?{errorMessage:O+ge,diff:f.PNG.sync.write(z)}:null}function n(m,c){if(c==="image/png"){const l=[137,80,78,71,13,10,26,10];if(m.length<l.length||!l.every((x,T)=>m[T]===x))throw new Error("could not decode image as PNG.")}else if(c==="image/jpeg"){const l=[255,216];if(m.length<l.length||!l.every((x,T)=>m[T]===x))throw new Error("could not decode image as JPEG.")}}function o(m,c){if(typeof m!="string")return{errorMessage:"Actual result should be a string"};let l=c.toString("utf-8");return l===m?null:(m.endsWith(`
`)||(m+=`
`),l.endsWith(`
`)||(l+=`
`),{errorMessage:_.diff.createPatch("file",l,m,void 0,void 0,{context:5}).split(`
`).slice(4).map(p=>p.startsWith("-")?_.colors.green(p):p.startsWith("+")?_.colors.red(p):p.startsWith("@@")?_.colors.dim(p):p).join(`
`)})}function h(m,c){if(m.width===c.width&&m.height===c.height)return m;const l=new Uint8Array(c.width*c.height*4);for(let x=0;x<c.height;x++)for(let T=0;T<c.width;T++){const b=(x*c.width+T)*4;if(x<m.height&&T<m.width){const p=(x*m.width+T)*4;l[b]=m.data[p],l[b+1]=m.data[p+1],l[b+2]=m.data[p+2],l[b+3]=m.data[p+3]}else l[b]=0,l[b+1]=0,l[b+2]=0,l[b+3]=0}return{data:Buffer.from(l),width:c.width,height:c.height}}return hl}var pl,Bg;function tn(){if(Bg)return pl;Bg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},P=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of E(s))!V.call(a,h)&&h!==n&&r(a,h,{get:()=>s[h],enumerable:!(o=i(s,h))||o.enumerable});return a},e=(a,s,n)=>(n=a!=null?t(R(a)):{},P(!a||!a.__esModule?r(n,"default",{value:a,enumerable:!0}):n,a)),U=a=>P(r({},"__esModule",{value:!0}),a),C={};te(C,{calculateSha1:()=>_,createGuid:()=>u,generateSelfSignedCertificate:()=>v}),pl=U(C);var w=e(Je),g=Gr();function u(){return w.default.randomBytes(16).toString("hex")}function _(a){const s=w.default.createHash("sha1");return s.update(a),s.digest("hex")}function f(a){const s=[];do{let n=a&127;a>>>=7,s.length>0&&(n|=128),s.push(n)}while(a>0);return Buffer.from(s.reverse())}class d{static encodeSequence(s){return this._encode(48,Buffer.concat(s))}static encodeInteger(s){return(0,g.assert)(s>=-128&&s<=127),this._encode(2,Buffer.from([s]))}static encodeObjectIdentifier(s){const n=s.split(".").map(h=>Number(h)),o=[f(40*n[0]+n[1])];for(let h=2;h<n.length;h++)o.push(f(n[h]));return this._encode(6,Buffer.concat(o))}static encodeNull(){return Buffer.from([5,0])}static encodeSet(s){return(0,g.assert)(s.length===1,"Only one item in the set is supported. We'd need to sort the data to support more."),this._encode(49,Buffer.concat(s))}static encodeExplicitContextDependent(s,n){return this._encode(160+s,n)}static encodePrintableString(s){return this._encode(19,Buffer.from(s))}static encodeBitString(s){const o=Buffer.concat([Buffer.from([0]),s]);return this._encode(3,o)}static encodeDate(s){const n=s.getUTCFullYear(),o=n>=2050,m=[o?n.toString():n.toString().slice(-2),(s.getUTCMonth()+1).toString().padStart(2,"0"),s.getUTCDate().toString().padStart(2,"0"),s.getUTCHours().toString().padStart(2,"0"),s.getUTCMinutes().toString().padStart(2,"0"),s.getUTCSeconds().toString().padStart(2,"0")].join("")+"Z",c=o?24:23;return this._encode(c,Buffer.from(m))}static _encode(s,n){const o=this._encodeLength(n.length);return Buffer.concat([Buffer.from([s]),o,n])}static _encodeLength(s){if(s<128)return Buffer.from([s]);{const n=[];for(;s>0;)n.unshift(s&255),s>>=8;return Buffer.from([128|n.length,...n])}}}function v(){const{privateKey:a,publicKey:s}=w.default.generateKeyPairSync("rsa",{modulusLength:2048}),n=s.export({type:"pkcs1",format:"der"}),o=365*24*60*60*1e3,h=new Date(new Date().getTime()-o),m=new Date(new Date().getTime()+o),c=d.encodeSequence([d.encodeExplicitContextDependent(0,d.encodeInteger(1)),d.encodeInteger(1),d.encodeSequence([d.encodeObjectIdentifier("1.2.840.113549.1.1.11"),d.encodeNull()]),d.encodeSequence([d.encodeSet([d.encodeSequence([d.encodeObjectIdentifier("2.5.4.3"),d.encodePrintableString("localhost")])]),d.encodeSet([d.encodeSequence([d.encodeObjectIdentifier("2.5.4.10"),d.encodePrintableString("Playwright Client Certificate Support")])])]),d.encodeSequence([d.encodeDate(h),d.encodeDate(m)]),d.encodeSequence([d.encodeSet([d.encodeSequence([d.encodeObjectIdentifier("2.5.4.3"),d.encodePrintableString("localhost")])]),d.encodeSet([d.encodeSequence([d.encodeObjectIdentifier("2.5.4.10"),d.encodePrintableString("Playwright Client Certificate Support")])])]),d.encodeSequence([d.encodeSequence([d.encodeObjectIdentifier("1.2.840.113549.1.1.1"),d.encodeNull()]),d.encodeBitString(n)])]),l=w.default.sign("sha256",c,a);return{cert:["-----BEGIN CERTIFICATE-----",d.encodeSequence([c,d.encodeSequence([d.encodeObjectIdentifier("1.2.840.113549.1.1.11"),d.encodeNull()]),d.encodeBitString(l)]).toString("base64").match(/.{1,64}/g).join(`
`),"-----END CERTIFICATE-----"].join(`
`),key:a.export({type:"pkcs1",format:"pem"})}}return pl}var fl,jg;function of(){if(jg)return fl;jg=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(_,f)=>{for(var d in f)r(_,d,{get:f[d],enumerable:!0})},te=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of E(f))!R.call(_,a)&&a!==d&&r(_,a,{get:()=>f[a],enumerable:!(v=i(f,a))||v.enumerable});return _},P=_=>te(r({},"__esModule",{value:!0}),_),e={};V(e,{getAsBooleanFromENV:()=>C,getFromENV:()=>U,getPackageManager:()=>w,getPackageManagerExecCommand:()=>g,isLikelyNpxGlobal:()=>u}),fl=P(e);function U(_){let f=t[_];return f=f===void 0?t[`npm_config_${_.toLowerCase()}`]:f,f=f===void 0?t[`npm_package_config_${_.toLowerCase()}`]:f,f}function C(_,f){const d=U(_);return d==="false"||d==="0"?!1:d?!0:!!f}function w(){const _=t.npm_config_user_agent||"";return _.includes("yarn")?"yarn":_.includes("pnpm")?"pnpm":"npm"}function g(){const _=w();return _==="yarn"?"yarn":_==="pnpm"?"pnpm exec":"npx"}function u(){return process.argv.length>=2&&process.argv[1].includes("_npx")}return fl}var ml,Hg;function Xn(){if(Hg)return ml;Hg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(u,_)=>{for(var f in _)t(u,f,{get:_[f],enumerable:!0})},V=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of i(_))!E.call(u,v)&&v!==f&&t(u,v,{get:()=>_[v],enumerable:!(d=r(_,v))||d.enumerable});return u},te=u=>V(t({},"__esModule",{value:!0}),u),P={};R(P,{debugMode:()=>C,isUnderTest:()=>g}),ml=te(P);var e=of();const U=(0,e.getFromENV)("PWDEBUG")||"";function C(){return U==="console"?"console":U==="0"||U==="false"?"":U?"inspector":""}const w=(0,e.getAsBooleanFromENV)("PWTEST_UNDER_TEST");function g(){return w}return ml}var gl,Ug;function qr(){if(Ug)return gl;Ug=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{eventsHelper:()=>U}),gl=te(P);class e{static addEventListener(w,g,u){return w.on(g,u),{emitter:w,eventName:g,handler:u}}static removeEventListeners(w){for(const g of w)g.emitter.removeListener(g.eventName,g.handler);w.splice(0,w.length)}}const U=e;return gl}var _l,qg;function uO(){if(qg)return _l;qg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{serializeExpectedTextValues:()=>U}),_l=te(P);var e=Wn();function U(C,w={}){return C.map(g=>({string:(0,e.isString)(g)?g:void 0,regexSource:(0,e.isRegExp)(g)?g.source:void 0,regexFlags:(0,e.isRegExp)(g)?g.flags:void 0,matchSubstring:w.matchSubstring,ignoreCase:w.ignoreCase,normalizeWhiteSpace:w.normalizeWhiteSpace}))}return _l}var bl,$g;function zs(){if($g)return bl;$g=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=($,q)=>{for(var J in q)r($,J,{get:q[J],enumerable:!0})},P=($,q,J,le)=>{if(q&&typeof q=="object"||typeof q=="function")for(let _e of E(q))!V.call($,_e)&&_e!==J&&r($,_e,{get:()=>q[_e],enumerable:!(le=i(q,_e))||le.enumerable});return $},e=($,q,J)=>(J=$!=null?t(R($)):{},P(!$||!$.__esModule?r(J,"default",{value:$,enumerable:!0}):J,$)),U=$=>P(r({},"__esModule",{value:!0}),$),C={};te(C,{createConnectionAsync:()=>b,createSocket:()=>x,createTLSSocket:()=>T,httpHappyEyeballsAgent:()=>l,httpsHappyEyeballsAgent:()=>c,timingForSocket:()=>z}),bl=U(C);var w=e(Je),g=e(Je),u=e(Je),_=e(Je),f=e(Je),d=Gr(),v=Fr(),a=En();const s=300,n=Symbol("kDNSLookupAt"),o=Symbol("kTCPConnectionAt");class h extends g.default.Agent{createConnection(q,J){if(_.default.isIP(O(q)))return _.default.createConnection(q);b(q,J,!1).catch(le=>J==null?void 0:J(le))}}class m extends u.default.Agent{createConnection(q,J){if(_.default.isIP(O(q)))return f.default.connect(q);b(q,J,!0).catch(le=>J==null?void 0:J(le))}}const c=new m({keepAlive:!0}),l=new h({keepAlive:!0});async function x($,q){return new Promise((J,le)=>{if(_.default.isIP($)){const _e=_.default.createConnection({host:$,port:q});_e.on("connect",()=>J(_e)),_e.on("error",ge=>le(ge))}else b({host:$,port:q},(_e,ge)=>{_e&&le(_e),ge&&J(ge)},!1).catch(_e=>le(_e))})}async function T($){return new Promise((q,J)=>{if((0,d.assert)($.host,"host is required"),_.default.isIP($.host)){const le=f.default.connect($);le.on("secureConnect",()=>q(le)),le.on("error",_e=>J(_e))}else b($,(le,_e)=>{le&&J(le),_e&&(_e.on("secureConnect",()=>q(_e)),_e.on("error",ge=>J(ge)))},!0).catch(le=>J(le))})}async function b($,q,J){const le=$.__testHookLookup||p,_e=O($),ge=await le(_e),ne=(0,a.monotonicTime)(),S=new Set;let j,y=0;const I=(ie,he)=>{S.delete(ie)&&(++y,j??(j=he),y===ge.length&&(q==null||q(j)))},D=new v.ManualPromise;for(const{address:ie}of ge){const he=J?f.default.connect({...$,port:$.port,host:ie,servername:_e}):_.default.createConnection({...$,port:$.port,host:ie});if(he[n]=ne,he.on("connect",()=>{he[o]=(0,a.monotonicTime)(),D.resolve(),q==null||q(null,he),S.delete(he);for(const me of S)me.destroy();S.clear()}),he.on("timeout",()=>{he.destroy(),I(he,new Error("Connection timeout"))}),he.on("error",me=>I(he,me)),S.add(he),await Promise.race([D,new Promise(me=>setTimeout(me,s))]),D.isDone())break}}async function p($){const q=await w.default.promises.lookup($,{all:!0,family:0,verbatim:!0});let J=q.filter(({family:ge})=>ge===6),le=q.filter(({family:ge})=>ge===4);if(J.length&&J[0]!==q[0]){const ge=J;J=le,le=ge}const _e=[];for(let ge=0;ge<Math.max(J.length,le.length);ge++)J[ge]&&_e.push(J[ge]),le[ge]&&_e.push(le[ge]);return _e}function O($){if($.hostname)return $.hostname;if($.host)return $.host;throw new Error("Either options.hostname or options.host must be provided")}function z($){return{dnsLookupAt:$[n],tcpConnectionAt:$[o]}}return bl}var vl,Wg;function Ki(){if(Wg)return vl;Wg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(b,p)=>{for(var O in p)r(b,O,{get:p[O],enumerable:!0})},P=(b,p,O,z)=>{if(p&&typeof p=="object"||typeof p=="function")for(let $ of E(p))!V.call(b,$)&&$!==O&&r(b,$,{get:()=>p[$],enumerable:!(z=i(p,$))||z.enumerable});return b},e=(b,p,O)=>(O=b!=null?t(R(b)):{},P(!b||!b.__esModule?r(O,"default",{value:b,enumerable:!0}):O,b)),U=b=>P(r({},"__esModule",{value:!0}),b),C={};te(C,{NET_DEFAULT_TIMEOUT:()=>v,createHttp2Server:()=>c,createHttpServer:()=>h,createHttpsServer:()=>m,createProxyAgent:()=>o,fetchData:()=>s,httpRequest:()=>a,isURLAvailable:()=>l}),vl=U(C);var w=e(Je),g=e(Je),u=e(Je),_=e(Je),f=Ar(),d=zs();const v=3e4;function a(b,p,O){const z=_.default.parse(b.url);let $={...z,agent:z.protocol==="https:"?d.httpsHappyEyeballsAgent:d.httpHappyEyeballsAgent,method:b.method||"GET",headers:b.headers};b.rejectUnauthorized!==void 0&&($.rejectUnauthorized=b.rejectUnauthorized);const q=(0,f.getProxyForUrl)(b.url);if(q){const ge=_.default.parse(q);b.url.startsWith("http:")?$={path:z.href,host:ge.hostname,port:ge.port,headers:$.headers,method:$.method}:(ge.secureProxy=ge.protocol==="https:",$.agent=new f.HttpsProxyAgent(ge),$.rejectUnauthorized=!1)}let J;const le=ge=>{const ne=ge.statusCode||0;ne>=300&&ne<400&&ge.headers.location?(_e.destroy(),J=a({...b,url:new URL(ge.headers.location,b.url).toString()},p,O).cancel):p(ge)},_e=$.protocol==="https:"?u.default.request($,le):w.default.request($,le);return _e.on("error",O),b.socketTimeout!==void 0&&_e.setTimeout(b.socketTimeout,()=>{O(new Error(`Request to ${b.url} timed out after ${b.socketTimeout}ms`)),_e.abort()}),J=ge=>_e.destroy(ge),_e.end(b.data),{cancel:ge=>J(ge)}}function s(b,p,O){const z=new Promise(($,q)=>{const{cancel:J}=a(p,async le=>{if(le.statusCode!==200){const ge=O?await O(p,le):new Error(`fetch failed: server returned code ${le.statusCode}. URL: ${p.url}`);q(ge);return}let _e="";le.on("data",ge=>_e+=ge),le.on("error",ge=>q(ge)),le.on("end",()=>$(_e))},q);b==null||b.cleanupWhenAborted(J)});return b?b.race(z):z}function n(b,p){if(!p)return!1;const O=p.split(",").map($=>($=$.trim(),$.startsWith(".")||($="."+$),$)),z="."+b.hostname;return O.some($=>z.endsWith($))}function o(b,p){var $;if(!b||p&&b.bypass&&n(p,b.bypass))return;let O=b.server.trim();/^\w+:\/\//.test(O)||(O="http://"+O);const z=_.default.parse(O);return($=z.protocol)!=null&&$.startsWith("socks")?new f.SocksProxyAgent({host:z.hostname,port:z.port||void 0}):(b.username&&(z.auth=`${b.username}:${b.password||""}`),p&&["ws:","wss:"].includes(p.protocol)?new f.HttpsProxyAgent(z):new f.HttpsProxyAgent(z))}function h(...b){const p=w.default.createServer(...b);return T(p),p}function m(...b){const p=u.default.createServer(...b);return T(p),p}function c(...b){const p=g.default.createSecureServer(...b);return T(p),p}async function l(b,p,O,z){let $=await x(b,p,O,z);if($===404&&b.pathname==="/"){const q=new URL(b);q.pathname="/index.html",$=await x(q,p,O,z)}return $>=200&&$<404}async function x(b,p,O,z){return new Promise($=>{O==null||O(`HTTP GET: ${b}`),a({url:b.toString(),headers:{Accept:"*/*"},rejectUnauthorized:!p},q=>{q.resume();const J=q.statusCode??0;O==null||O(`HTTP Status: ${J}`),$(J)},q=>{q.code==="DEPTH_ZERO_SELF_SIGNED_CERT"&&(z==null||z("[WebServer] Self-signed certificate detected. Try adding ignoreHTTPSErrors: true to config.webServer.")),O==null||O(`Error while checking if ${b} is available: ${q.message}`),$(0)})})}function T(b){const p=new Set;b.on("connection",z=>{p.add(z),z.once("close",()=>p.delete(z))});const O=b.close;b.close=z=>{for(const $ of p)$.destroy();return p.clear(),O.call(b,z)}}return vl}var wl,zg;function Yw(){if(zg)return wl;zg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(s,n)=>{for(var o in n)r(s,o,{get:n[o],enumerable:!0})},P=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of E(n))!V.call(s,m)&&m!==o&&r(s,m,{get:()=>n[m],enumerable:!(h=i(n,m))||h.enumerable});return s},e=(s,n,o)=>(o=s!=null?t(R(s)):{},P(!s||!s.__esModule?r(o,"default",{value:s,enumerable:!0}):o,s)),U=s=>P(r({},"__esModule",{value:!0}),s),C={};te(C,{HttpServer:()=>a}),wl=U(C);var w=e(Je),g=e(Je),u=Ar(),_=tn(),f=Gr(),d=Fr(),v=Ki();class a{constructor(){this._urlPrefixPrecise="",this._urlPrefixHumanReadable="",this._port=0,this._started=!1,this._routes=[],this._server=(0,v.createHttpServer)(this._onRequest.bind(this))}server(){return this._server}routePrefix(n,o){this._routes.push({prefix:n,handler:o})}routePath(n,o){this._routes.push({exact:n,handler:o})}port(){return this._port}async _tryStart(n,o){const h=new d.ManualPromise,m=c=>h.reject(c);this._server.on("error",m);try{this._server.listen(n,o),await Promise.race([new Promise(c=>this._server.once("listening",c)),h])}finally{this._server.removeListener("error",m)}}createWebSocket(n,o){(0,f.assert)(!this._wsGuid,"can only create one main websocket transport per server"),this._wsGuid=o||(0,_.createGuid)(),new u.wsServer({server:this._server,path:"/"+this._wsGuid}).on("connection",m=>{n.onconnect(),n.sendEvent=(c,l)=>m.send(JSON.stringify({method:c,params:l})),n.close=()=>m.close(),m.on("message",async c=>{const{id:l,method:x,params:T}=JSON.parse(String(c));try{const b=await n.dispatch(x,T);m.send(JSON.stringify({id:l,result:b}))}catch(b){m.send(JSON.stringify({id:l,error:String(b)}))}}),m.on("close",()=>n.onclose()),m.on("error",()=>n.onclose())})}wsGuid(){return this._wsGuid}async start(n={}){(0,f.assert)(!this._started,"server already started"),this._started=!0;const o=n.host||"localhost";if(n.preferredPort)try{await this._tryStart(n.preferredPort,o)}catch(m){if(!m||!m.message||!m.message.includes("EADDRINUSE"))throw m;await this._tryStart(void 0,o)}else await this._tryStart(n.port,o);const h=this._server.address();if((0,f.assert)(h,"Could not bind server socket"),typeof h=="string")this._urlPrefixPrecise=h,this._urlPrefixHumanReadable=h;else{this._port=h.port;const m=h.family==="IPv4"?h.address:`[${h.address}]`;this._urlPrefixPrecise=`http://${m}:${h.port}`,this._urlPrefixHumanReadable=`http://${o}:${h.port}`}}async stop(){await new Promise(n=>this._server.close(n))}urlPrefix(n){return n==="human-readable"?this._urlPrefixHumanReadable:this._urlPrefixPrecise}serveFile(n,o,h,m){try{for(const[c,l]of Object.entries(m||{}))o.setHeader(c,l);return n.headers.range?this._serveRangeFile(n,o,h):this._serveFile(o,h),!0}catch{return!1}}_serveFile(n,o){const h=w.default.readFileSync(o);n.statusCode=200;const m=u.mime.getType(g.default.extname(o))||"application/octet-stream";n.setHeader("Content-Type",m),n.setHeader("Content-Length",h.byteLength),n.end(h)}_serveRangeFile(n,o,h){const m=n.headers.range;if(!m||!m.startsWith("bytes=")||m.includes(", ")||[...m].filter(O=>O==="-").length!==1)return o.statusCode=400,o.end("Bad request");const[c,l]=m.replace(/bytes=/,"").split("-");let x,T;const b=w.default.statSync(h).size;if(c!==""&&l===""?(x=+c,T=b-1):c===""&&l!==""?(x=b-+l,T=b-1):(x=+c,T=+l),Number.isNaN(x)||Number.isNaN(T)||x>=b||T>=b||x>T)return o.writeHead(416,{"Content-Range":`bytes */${b}`}),o.end();o.writeHead(206,{"Content-Range":`bytes ${x}-${T}/${b}`,"Accept-Ranges":"bytes","Content-Length":T-x+1,"Content-Type":u.mime.getType(g.default.extname(h))}),w.default.createReadStream(h,{start:x,end:T}).pipe(o)}_onRequest(n,o){if(n.method==="OPTIONS"){o.writeHead(200),o.end();return}n.on("error",()=>o.end());try{if(!n.url){o.end();return}const h=new URL("http://localhost"+n.url);for(const m of this._routes)if(m.exact&&h.pathname===m.exact&&m.handler(n,o)||m.prefix&&h.pathname.startsWith(m.prefix)&&m.handler(n,o))return;o.statusCode=404,o.end()}catch{o.end()}}}return wl}var yl,Vg;function Xw(){if(Vg)return yl;Vg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(u,_)=>{for(var f in _)t(u,f,{get:_[f],enumerable:!0})},V=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of i(_))!E.call(u,v)&&v!==f&&t(u,v,{get:()=>_[v],enumerable:!(d=r(_,v))||d.enumerable});return u},te=u=>V(t({},"__esModule",{value:!0}),u),P={};R(P,{Zone:()=>C,currentZone:()=>g,emptyZone:()=>w}),yl=te(P);var e=Je;const U=new e.AsyncLocalStorage;class C{constructor(_,f){this._asyncLocalStorage=_,this._data=f}with(_,f){return new C(this._asyncLocalStorage,new Map(this._data).set(_,f))}without(_){const f=_?new Map(this._data):new Map;return f.delete(_),new C(this._asyncLocalStorage,f)}run(_){return this._asyncLocalStorage.run(this,_)}data(_){return this._data.get(_)}}const w=new C(U,new Map);function g(){return U.getStore()??w}return yl}var Sl,Kg;function Qw(){if(Kg)return Sl;Kg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(O,z)=>{for(var $ in z)i(O,$,{get:z[$],enumerable:!0})},e=(O,z,$,q)=>{if(z&&typeof z=="object"||typeof z=="function")for(let J of R(z))!te.call(O,J)&&J!==$&&i(O,J,{get:()=>z[J],enumerable:!(q=E(z,J))||q.enumerable});return O},U=(O,z,$)=>($=O!=null?r(V(O)):{},e(!O||!O.__esModule?i($,"default",{value:O,enumerable:!0}):$,O)),C=O=>e(i({},"__esModule",{value:!0}),O),w={};P(w,{nodePlatform:()=>T,setBoxedStackPrefixes:()=>l}),Sl=C(w);var g=U(Je),u=U(Je),_=U(Je),f=U(Je),d=Je,v=Vr(),a=Ar(),s=Mr(),n=Xw(),o=Xn();const h=f.promisify(d.pipeline);class m{constructor(z){this._zone=z}push(z){return new m(this._zone.with("apiZone",z))}pop(){return new m(this._zone.without("apiZone"))}run(z){return this._zone.run(z)}data(){return this._zone.data("apiZone")}}let c=[];function l(O){c=O}const x=_.default.dirname(require.resolve("../../../package.json")),T={name:"node",boxedStackPrefixes:()=>t.PWDEBUGIMPL?[]:[x,...c],calculateSha1:O=>{const z=g.default.createHash("sha1");return z.update(O),Promise.resolve(z.digest("hex"))},colors:a.colors,coreDir:x,createGuid:()=>g.default.randomBytes(16).toString("hex"),defaultMaxListeners:()=>v.EventEmitter.defaultMaxListeners,fs:()=>u.default,env:t,inspectCustom:f.inspect.custom,isDebugMode:()=>!!(0,o.debugMode)(),isJSDebuggerAttached:()=>!!Je.url(),isLogEnabled(O){return s.debugLogger.isEnabled(O)},isUnderTest:()=>(0,o.isUnderTest)(),log(O,z){s.debugLogger.log(O,z)},path:()=>_.default,pathSeparator:_.default.sep,showInternalStackFrames:()=>!!t.PWDEBUGIMPL,async streamFile(O,z){await h(u.default.createReadStream(O),z)},streamReadable:O=>new b(O),streamWritable:O=>new p(O),zones:{current:()=>new m((0,n.currentZone)()),empty:new m(n.emptyZone)}};class b extends d.Readable{constructor(z){super(),this._channel=z}async _read(){const z=await this._channel.read({size:1048576});z.binary.byteLength?this.push(z.binary):this.push(null)}_destroy(z,$){this._channel.close().catch(q=>null),super._destroy(z,$)}}class p extends d.Writable{constructor(z){super(),this._channel=z}async _write(z,$,q){const J=await this._channel.write({binary:typeof z=="string"?Buffer.from(z):z}).catch(le=>le);q(J||null)}async _final(z){const $=await this._channel.close().catch(q=>q);z($||null)}}return Sl}var xl,Gg;function Gi(){if(Gg)return xl;Gg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(z,$)=>{for(var q in $)r(z,q,{get:$[q],enumerable:!0})},P=(z,$,q,J)=>{if($&&typeof $=="object"||typeof $=="function")for(let le of E($))!V.call(z,le)&&le!==q&&r(z,le,{get:()=>$[le],enumerable:!(J=i($,le))||J.enumerable});return z},e=(z,$,q)=>(q=z!=null?t(R(z)):{},P(!z||!z.__esModule?r(q,"default",{value:z,enumerable:!0}):q,z)),U=z=>P(r({},"__esModule",{value:!0}),z),C={};te(C,{envArrayToObject:()=>O,gracefullyCloseAll:()=>a,gracefullyCloseSet:()=>d,gracefullyProcessExitDoNotHang:()=>s,launchProcess:()=>p}),xl=U(C);var w=e(Je),g=e(Je),u=e(Je),_=Ln(),f=nr();const d=new Set,v=new Set;async function a(){await Promise.all(Array.from(d).map(z=>z().catch($=>{})))}function s(z){setTimeout(()=>process.exit(z),3e4),a().then(()=>{process.exit(z)})}function n(){for(const z of v)z()}let o=!1;function h(){const z=()=>{(0,f.isUnderTest)()?setTimeout(()=>process.exit(130),1e3):process.exit(130)};if(o){process.off("SIGINT",h);for(const $ of v)$();z()}else o=!0,a().then(()=>z())}function m(){a()}function c(){a()}const l=new Set,x={exit:n,SIGINT:h,SIGTERM:m,SIGHUP:c};function T(z){l.has(z)||(l.add(z),process.on(z,x[z]))}function b(){if(!v.size){for(const z of l)process.off(z,x[z]);l.clear()}}async function p(z){const $=z.stdio==="pipe"?["ignore","pipe","pipe","pipe","pipe"]:["pipe","pipe","pipe"];z.log(`<launching> ${z.command} ${z.args?z.args.join(" "):""}`);const q={detached:process.platform!=="win32",env:z.env,cwd:z.cwd,shell:z.shell,stdio:$},J=w.spawn(z.command,z.args||[],q),le=async()=>{z.log(`[pid=${J.pid||"N/A"}] starting temporary directories cleanup`);const me=await(0,_.removeFolders)(z.tempDirectories);for(let ye=0;ye<z.tempDirectories.length;++ye)me[ye]&&z.log(`[pid=${J.pid||"N/A"}] exception while removing ${z.tempDirectories[ye]}: ${me[ye]}`);z.log(`[pid=${J.pid||"N/A"}] finished temporary directories cleanup`)};if(J.on("error",()=>{}),!J.pid){let me;const ye=new Promise((Se,Oe)=>me=Se);return J.once("error",Se=>{me(new Error("Failed to launch: "+Se))}),ye.then(Se=>Promise.reject(Se))}z.log(`<launched> pid=${J.pid}`),u.createInterface({input:J.stdout}).on("line",me=>{z.log(`[pid=${J.pid}][out] `+me)}),u.createInterface({input:J.stderr}).on("line",me=>{z.log(`[pid=${J.pid}][err] `+me)});let ne=!1,S=()=>{};const j=new Promise(me=>S=me);J.once("close",(me,ye)=>{z.log(`[pid=${J.pid}] <process did exit: exitCode=${me}, signal=${ye}>`),ne=!0,d.delete(I),v.delete(ie),b(),z.onExit(me,ye),le().then(S)}),T("exit"),z.handleSIGINT&&T("SIGINT"),z.handleSIGTERM&&T("SIGTERM"),z.handleSIGHUP&&T("SIGHUP"),d.add(I),v.add(ie);let y=!1;async function I(){if(y){z.log(`[pid=${J.pid}] <forcefully close>`),D(),await j;return}y=!0,z.log(`[pid=${J.pid}] <gracefully close start>`),await z.attemptToGracefullyClose().catch(()=>D()),await j,z.log(`[pid=${J.pid}] <gracefully close end>`)}function D(){if(d.delete(I),v.delete(ie),b(),z.log(`[pid=${J.pid}] <kill>`),J.pid&&!J.killed&&!ne){z.log(`[pid=${J.pid}] <will force kill>`);try{if(process.platform==="win32"){const me=w.spawnSync(`taskkill /pid ${J.pid} /T /F`,{shell:!0}),[ye,Se]=[me.stdout.toString(),me.stderr.toString()];ye&&z.log(`[pid=${J.pid}] taskkill stdout: ${ye}`),Se&&z.log(`[pid=${J.pid}] taskkill stderr: ${Se}`)}else process.kill(-J.pid,"SIGKILL")}catch(me){z.log(`[pid=${J.pid}] exception while trying to kill process: ${me}`)}}else z.log(`[pid=${J.pid}] <skipped force kill spawnedProcess.killed=${J.killed} processClosed=${ne}>`)}function ie(){D(),z.log(`[pid=${J.pid||"N/A"}] starting temporary directories cleanup`);for(const me of z.tempDirectories)try{g.default.rmSync(me,{force:!0,recursive:!0,maxRetries:5})}catch(ye){z.log(`[pid=${J.pid||"N/A"}] exception while removing ${me}: ${ye}`)}z.log(`[pid=${J.pid||"N/A"}] finished temporary directories cleanup`)}function he(){return D(),j}return{launchedProcess:J,gracefullyClose:I,kill:he}}function O(z){const $={};for(const{name:q,value:J}of z)$[q]=J;return $}return xl}var El,Jg;function Zw(){if(Jg)return El;Jg=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(a,s)=>{for(var n in s)i(a,n,{get:s[n],enumerable:!0})},e=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of R(s))!te.call(a,h)&&h!==n&&i(a,h,{get:()=>s[h],enumerable:!(o=E(s,h))||o.enumerable});return a},U=(a,s,n)=>(n=a!=null?r(V(a)):{},e(!a||!a.__esModule?i(n,"default",{value:a,enumerable:!0}):n,a)),C=a=>e(i({},"__esModule",{value:!0}),a),w={};P(w,{startProfiling:()=>d,stopProfiling:()=>v}),El=C(w);var g=U(Je),u=U(Je);const _=t.PWTEST_PROFILE_DIR||"";let f;async function d(){_&&(f=new Je.Session,f.connect(),await new Promise(a=>{f.post("Profiler.enable",()=>{f.post("Profiler.start",a)})}))}async function v(a){_&&await new Promise(s=>f.post("Profiler.stop",(n,{profile:o})=>{n||(g.default.mkdirSync(_,{recursive:!0}),g.default.writeFileSync(u.default.join(_,a+".json"),JSON.stringify(o))),s()}))}return El}var Ol,Yg;function Vs(){if(Yg)return Ol;Yg=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(x,T)=>{for(var b in T)r(x,b,{get:T[b],enumerable:!0})},P=(x,T,b,p)=>{if(T&&typeof T=="object"||typeof T=="function")for(let O of E(T))!V.call(x,O)&&O!==b&&r(x,O,{get:()=>T[O],enumerable:!(p=i(T,O))||p.enumerable});return x},e=(x,T,b)=>(b=x!=null?t(R(x)):{},P(!x||!x.__esModule?r(b,"default",{value:x,enumerable:!0}):b,x)),U=x=>P(r({},"__esModule",{value:!0}),x),C={};te(C,{SocksProxy:()=>h,SocksProxyHandler:()=>m,parsePattern:()=>o}),Ol=U(C);var w=e(Vr()),g=e(Je),u=Gr(),_=tn(),f=Mr(),d=zs();class v{constructor(T,b,p){this._buffer=Buffer.from([]),this._offset=0,this._fence=0,this._uid=T,this._socket=b,this._client=p,this._boundOnData=this._onData.bind(this),b.on("data",this._boundOnData),b.on("close",()=>this._onClose()),b.on("end",()=>this._onClose()),b.on("error",()=>this._onClose()),this._run().catch(()=>this._socket.end())}async _run(){(0,u.assert)(await this._authenticate());const{command:T,host:b,port:p}=await this._parseRequest();if(T!==1){this._writeBytes(Buffer.from([5,7,0,1,0,0,0,0,0,0]));return}this._socket.off("data",this._boundOnData),this._client.onSocketRequested({uid:this._uid,host:b,port:p})}async _authenticate(){const T=await this._readByte();(0,u.assert)(T===5,"The VER field must be set to x05 for this version of the protocol, was "+T);const b=await this._readByte();(0,u.assert)(b,"No authentication methods specified");const p=await this._readBytes(b);for(const O of p)if(O===0)return this._writeBytes(Buffer.from([T,O])),!0;return this._writeBytes(Buffer.from([T,255])),!1}async _parseRequest(){const T=await this._readByte();(0,u.assert)(T===5,"The VER field must be set to x05 for this version of the protocol, was "+T);const b=await this._readByte();await this._readByte();const p=await this._readByte();let O="";switch(p){case 1:O=(await this._readBytes(4)).join(".");break;case 3:const $=await this._readByte();O=(await this._readBytes($)).toString();break;case 4:const q=await this._readBytes(16),J=[];for(let le=0;le<8;++le)J.push(q.readUInt16BE(le*2).toString(16));O=J.join(":");break}const z=(await this._readBytes(2)).readUInt16BE(0);return this._buffer=Buffer.from([]),this._offset=0,this._fence=0,{command:b,host:O,port:z}}async _readByte(){return(await this._readBytes(1))[0]}async _readBytes(T){return this._fence=this._offset+T,(!this._buffer||this._buffer.length<this._fence)&&await new Promise(b=>this._fenceCallback=b),this._offset+=T,this._buffer.slice(this._offset-T,this._offset)}_writeBytes(T){this._socket.writable&&this._socket.write(T)}_onClose(){this._client.onSocketClosed({uid:this._uid})}_onData(T){if(this._buffer=Buffer.concat([this._buffer,T]),this._fenceCallback&&this._buffer.length>=this._fence){const b=this._fenceCallback;this._fenceCallback=void 0,b()}}socketConnected(T,b){this._writeBytes(Buffer.from([5,0,0,...s(T),b>>8,b&255])),this._socket.on("data",p=>this._client.onSocketData({uid:this._uid,data:p}))}socketFailed(T){const b=Buffer.from([5,0,0,...s("0.0.0.0"),0,0]);switch(T){case"ENOENT":case"ENOTFOUND":case"ETIMEDOUT":case"EHOSTUNREACH":b[1]=4;break;case"ENETUNREACH":b[1]=3;break;case"ECONNREFUSED":b[1]=5;break;case"ERULESET":b[1]=2;break}this._writeBytes(b),this._socket.end()}sendData(T){this._socket.write(T)}end(){this._socket.end()}error(T){this._socket.destroy(new Error(T))}}function a(x){return[...x].reduce((T,b)=>{const p=b.charCodeAt(0);if(p>=48&&p<=57)return T+p;if(p>=97&&p<=102)return T+(p-97)+10;if(p>=65&&p<=70)return T+(p-65)+10;throw new Error("Invalid IPv6 token "+x)},0)}function s(x){if(g.default.isIPv4(x))return[1,...x.split(".",4).map(T=>+T&255)];if(g.default.isIPv6(x)){const T=[4],b=x.split(":",8);for(;b.length<8;)b.unshift("");for(const p of b){const O=a(p);T.push(O>>8&255,O&255)}return T}throw new Error("Only IPv4 and IPv6 addresses are supported")}function n(x){const T=x.split("*").map(b=>b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join(".*");return new RegExp("^"+T+"$")}function o(x){if(!x)return()=>!1;const T=x.split(",").map(b=>{const p=b.match(/^(.*?)(?::(\d+))?$/);if(!p)throw new Error(`Unsupported token "${b}" in pattern "${x}"`);const O=p[2]?+p[2]:void 0,z=J=>O===void 0||O===J;let $=p[1];if($==="<loopback>")return(J,le)=>z(le)?J==="localhost"||J.endsWith(".localhost")||J==="127.0.0.1"||J==="[::1]":!1;if($==="*")return(J,le)=>z(le);if(g.default.isIPv4($)||g.default.isIPv6($))return(J,le)=>J===$&&z(le);$[0]==="."&&($="*"+$);const q=n($);return(J,le)=>!z(le)||g.default.isIPv4(J)||g.default.isIPv6(J)?!1:!!J.match(q)});return(b,p)=>T.some(O=>O(b,p))}const c=class c extends w.default{constructor(){super(),this._connections=new Map,this._sockets=new Set,this._closed=!1,this._patternMatcher=()=>!1,this._directSockets=new Map,this._server=new g.default.Server(T=>{const b=(0,_.createGuid)(),p=new v(b,T,this);this._connections.set(b,p)}),this._server.on("connection",T=>{if(this._closed){T.destroy();return}this._sockets.add(T),T.once("close",()=>this._sockets.delete(T))})}setPattern(T){try{this._patternMatcher=o(T)}catch{this._patternMatcher=()=>!1}}async _handleDirect(T){var b,p;try{const O=await(0,d.createSocket)(T.host,T.port);O.on("data",q=>{var J;return(J=this._connections.get(T.uid))==null?void 0:J.sendData(q)}),O.on("error",q=>{var J;(J=this._connections.get(T.uid))==null||J.error(q.message),this._directSockets.delete(T.uid)}),O.on("end",()=>{var q;(q=this._connections.get(T.uid))==null||q.end(),this._directSockets.delete(T.uid)});const z=O.localAddress,$=O.localPort;this._directSockets.set(T.uid,O),(b=this._connections.get(T.uid))==null||b.socketConnected(z,$)}catch(O){(p=this._connections.get(T.uid))==null||p.socketFailed(O.code)}}port(){return this._port}async listen(T,b){return new Promise(p=>{this._server.listen(T,b,()=>{const O=this._server.address().port;this._port=O,p(O)})})}async close(){if(!this._closed){this._closed=!0;for(const T of this._sockets)T.destroy();this._sockets.clear(),await new Promise(T=>this._server.close(T))}}onSocketRequested(T){if(!this._patternMatcher(T.host,T.port)){this._handleDirect(T);return}this.emit(c.Events.SocksRequested,T)}onSocketData(T){const b=this._directSockets.get(T.uid);if(b){b.write(T.data);return}this.emit(c.Events.SocksData,T)}onSocketClosed(T){const b=this._directSockets.get(T.uid);if(b){b.destroy(),this._directSockets.delete(T.uid);return}this.emit(c.Events.SocksClosed,T)}socketConnected({uid:T,host:b,port:p}){var O;(O=this._connections.get(T))==null||O.socketConnected(b,p)}socketFailed({uid:T,errorCode:b}){var p;(p=this._connections.get(T))==null||p.socketFailed(b)}sendSocketData({uid:T,data:b}){var p;(p=this._connections.get(T))==null||p.sendData(b)}sendSocketEnd({uid:T}){var b;(b=this._connections.get(T))==null||b.end()}sendSocketError({uid:T,error:b}){var p;(p=this._connections.get(T))==null||p.error(b)}};c.Events={SocksRequested:"socksRequested",SocksData:"socksData",SocksClosed:"socksClosed"};let h=c;const l=class l extends w.default{constructor(T,b){super(),this._sockets=new Map,this._patternMatcher=()=>!1,this._patternMatcher=o(T),this._redirectPortForTest=b}cleanup(){for(const T of this._sockets.keys())this.socketClosed({uid:T})}async socketRequested({uid:T,host:b,port:p}){if(f.debugLogger.log("socks",`[${T}] => request ${b}:${p}`),!this._patternMatcher(b,p)){const O={uid:T,errorCode:"ERULESET"};f.debugLogger.log("socks",`[${T}] <= pattern error ${O.errorCode}`),this.emit(l.Events.SocksFailed,O);return}b==="local.playwright"&&(b="localhost");try{this._redirectPortForTest&&(p=this._redirectPortForTest);const O=await(0,d.createSocket)(b,p);O.on("data",J=>{const le={uid:T,data:J};this.emit(l.Events.SocksData,le)}),O.on("error",J=>{const le={uid:T,error:J.message};f.debugLogger.log("socks",`[${T}] <= network socket error ${le.error}`),this.emit(l.Events.SocksError,le),this._sockets.delete(T)}),O.on("end",()=>{const J={uid:T};f.debugLogger.log("socks",`[${T}] <= network socket closed`),this.emit(l.Events.SocksEnd,J),this._sockets.delete(T)});const z=O.localAddress,$=O.localPort;this._sockets.set(T,O);const q={uid:T,host:z,port:$};f.debugLogger.log("socks",`[${T}] <= connected to network ${q.host}:${q.port}`),this.emit(l.Events.SocksConnected,q)}catch(O){const z={uid:T,errorCode:O.code};f.debugLogger.log("socks",`[${T}] <= connect error ${z.errorCode}`),this.emit(l.Events.SocksFailed,z)}}sendSocketData({uid:T,data:b}){var p;(p=this._sockets.get(T))==null||p.write(b)}socketClosed({uid:T}){var b;f.debugLogger.log("socks",`[${T}] <= browser socket closed`),(b=this._sockets.get(T))==null||b.destroy(),this._sockets.delete(T)}};l.Events={SocksConnected:"socksConnected",SocksData:"socksData",SocksError:"socksError",SocksFailed:"socksFailed",SocksEnd:"socksEnd"};let m=l;return Ol}var Tl,Xg;function cf(){if(Xg)return Tl;Xg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{makeWaitForNextTask:()=>e}),Tl=te(P);function e(){if(process.versions.electron)return g=>setTimeout(g,0);if(parseInt(process.versions.node,10)>=11)return setImmediate;let U=!1;const C=[],w=()=>{const g=C.shift();if(!g){U=!1;return}setImmediate(w),g()};return g=>{C.push(g),U||(U=!0,setImmediate(w))}}return Tl}var Cl,Qg;function ey(){if(Qg)return Cl;Qg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{WSServer:()=>_,perMessageDeflate:()=>u}),Cl=te(P);var e=Ki(),U=Ar(),C=Mr();let w=0;const g=Symbol("kConnection"),u={serverNoContextTakeover:!0,zlibDeflateOptions:{level:3},zlibInflateOptions:{chunkSize:10*1024},threshold:10*1024};class _{constructor(d){this._delegate=d}async listen(d=0,v,a){C.debugLogger.log("server",`Server started at ${new Date}`);const s=(0,e.createHttpServer)(this._delegate.onRequest);s.on("error",o=>C.debugLogger.log("server",String(o))),this.server=s;const n=await new Promise((o,h)=>{s.listen(d,v,()=>{const m=s.address();if(!m){h(new Error("Could not bind server socket"));return}const c=typeof m=="string"?`${m}${a}`:`ws://${v||"localhost"}:${m.port}${a}`;o(c)}).on("error",h)});return C.debugLogger.log("server","Listening at "+n),this._wsServer=new U.wsServer({noServer:!0,perMessageDeflate:u}),this._wsServer.on("headers",o=>this._delegate.onHeaders(o)),s.on("upgrade",(o,h,m)=>{if(new URL("http://localhost"+o.url).pathname!==a){h.write(`HTTP/${o.httpVersion} 400 Bad Request\r
\r
`),h.destroy();return}const l=this._delegate.onUpgrade(o,h);if(l){h.write(l.error),h.destroy();return}this._wsServer.handleUpgrade(o,h,m,x=>this._wsServer.emit("connection",x,o))}),this._wsServer.on("connection",(o,h)=>{C.debugLogger.log("server","Connected client ws.extension="+o.extensions);const m=new URL("http://localhost"+(h.url||"")),c=String(++w);C.debugLogger.log("server",`[${c}] serving connection: ${h.url}`);const l=this._delegate.onConnection(h,m,o,c);o[g]=l}),n}async close(){const d=this._wsServer;if(!d)return;C.debugLogger.log("server","closing websocket server");const v=new Promise(a=>d.close(a));await Promise.all(Array.from(d.clients).map(async a=>{const s=a[g];s&&await s.close();try{a.terminate()}catch{}})),await v,C.debugLogger.log("server","closing http server"),this.server&&await new Promise(a=>this.server.close(a)),this._wsServer=void 0,this.server=void 0,C.debugLogger.log("server","closed server")}}return Cl}var Pl,Zg;function ty(){if(Zg)return Pl;Zg=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{ZipFile:()=>U}),Pl=te(P);var e=Po();class U{constructor(w){this._entries=new Map,this._fileName=w,this._openedPromise=this._open()}async _open(){await new Promise((w,g)=>{e.yauzl.open(this._fileName,{autoClose:!1},(u,_)=>{if(u){g(u);return}this._zipFile=_,this._zipFile.on("entry",f=>{this._entries.set(f.fileName,f)}),this._zipFile.on("end",w)})})}async entries(){return await this._openedPromise,[...this._entries.keys()]}async read(w){await this._openedPromise;const g=this._entries.get(w);if(!g)throw new Error(`${w} not found in file ${this._fileName}`);return new Promise((u,_)=>{this._zipFile.openReadStream(g,(f,d)=>{if(f||!d){_(f||"Entry not found");return}const v=[];d.on("data",a=>v.push(a)),d.on("end",()=>u(Buffer.concat(v)))})})}close(){var w;(w=this._zipFile)==null||w.close()}}return Pl}co.exports;var e_;function nr(){return e_||(e_=1,function(t){var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(w,g)=>{for(var u in g)r(w,u,{get:g[u],enumerable:!0})},te=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of E(g))!R.call(w,f)&&f!==u&&r(w,f,{get:()=>g[f],enumerable:!(_=i(g,f))||_.enumerable});return w},P=(w,g,u)=>(te(w,g,"default"),u&&te(u,g,"default")),e=w=>te(r({},"__esModule",{value:!0}),w),U={};V(U,{colors:()=>C.colors}),t.exports=e(U),P(U,iO(),t.exports),P(U,Gr(),t.exports),P(U,zi(),t.exports),P(U,nf(),t.exports),P(U,Fr(),t.exports),P(U,sf(),t.exports),P(U,af(),t.exports),P(U,Vw(),t.exports),P(U,us(),t.exports),P(U,Wn(),t.exports),P(U,Kw(),t.exports),P(U,pn(),t.exports),P(U,Ei(),t.exports),P(U,En(),t.exports),P(U,Ao(),t.exports),P(U,di(),t.exports),P(U,Yn(),t.exports),P(U,Jw(),t.exports),P(U,tn(),t.exports),P(U,Xn(),t.exports),P(U,Mr(),t.exports),P(U,of(),t.exports),P(U,qr(),t.exports),P(U,uO(),t.exports),P(U,Ln(),t.exports),P(U,ko(),t.exports),P(U,Yw(),t.exports),P(U,Ki(),t.exports),P(U,Qw(),t.exports),P(U,Gi(),t.exports),P(U,Zw(),t.exports),P(U,Vs(),t.exports),P(U,rf(),t.exports),P(U,cf(),t.exports),P(U,xi(),t.exports),P(U,ey(),t.exports),P(U,ty(),t.exports),P(U,Xw(),t.exports);var C=Ar()}(co)),co.exports}const dO="Do not edit this file, use utils/roll_browser.js",hO=[{name:"chromium",revision:"1181",installByDefault:!0,browserVersion:"139.0.7258.5"},{name:"chromium-headless-shell",revision:"1181",installByDefault:!0,browserVersion:"139.0.7258.5"},{name:"chromium-tip-of-tree",revision:"1345",installByDefault:!1,browserVersion:"140.0.7271.0"},{name:"chromium-tip-of-tree-headless-shell",revision:"1345",installByDefault:!1,browserVersion:"140.0.7271.0"},{name:"firefox",revision:"1489",installByDefault:!0,browserVersion:"140.0.2"},{name:"firefox-beta",revision:"1484",installByDefault:!1,browserVersion:"140.0b7"},{name:"webkit",revision:"2191",installByDefault:!0,revisionOverrides:{"debian11-x64":"2105","debian11-arm64":"2105","mac10.14":"1446","mac10.15":"1616",mac11:"1816","mac11-arm64":"1816",mac12:"2009","mac12-arm64":"2009",mac13:"2140","mac13-arm64":"2140","ubuntu20.04-x64":"2092","ubuntu20.04-arm64":"2092"},browserVersion:"26.0"},{name:"ffmpeg",revision:"1011",installByDefault:!0,revisionOverrides:{mac12:"1010","mac12-arm64":"1010"}},{name:"winldd",revision:"1007",installByDefault:!1},{name:"android",revision:"1001",installByDefault:!1}],pO={comment:dO,browsers:hO};var kl,t_;function ui(){if(t_)return kl;t_=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(he,me)=>{for(var ye in me)i(he,ye,{get:me[ye],enumerable:!0})},e=(he,me,ye,Se)=>{if(me&&typeof me=="object"||typeof me=="function")for(let Oe of R(me))!te.call(he,Oe)&&Oe!==ye&&i(he,Oe,{get:()=>me[Oe],enumerable:!(Se=E(me,Oe))||Se.enumerable});return he},U=(he,me,ye)=>(ye=he!=null?r(V(he)):{},e(!he||!he.__esModule?i(ye,"default",{value:he,enumerable:!0}):ye,he)),C=he=>e(i({},"__esModule",{value:!0}),he),w={};P(w,{Registry:()=>ne,browserDirectoryToMarkerFilePath:()=>S,buildPlaywrightCLICommand:()=>j,findChromiumChannel:()=>I,installBrowsersForNpmInstall:()=>y,registry:()=>ie,registryDirectory:()=>J,writeDockerVersion:()=>b.writeDockerVersion}),kl=C(w);var g=U(Je),u=U(Je),_=U(Je),f=U(Je),d=rO(),v=$c(),a=$c(),s=nr(),n=Yn(),o=Mr(),h=ko(),m=Ki(),c=rf(),l=xi(),x=Ar(),T=Ln(),b=$c();const p=_.default.join(__dirname,"..","..",".."),O=_.default.join(__dirname,"..","..","..","bin"),z=["https://cdn.playwright.dev/dbazure/download/playwright","https://playwright.download.prss.microsoft.com/dbazure/download/playwright","https://cdn.playwright.dev"];if(t.PW_TEST_CDN_THAT_SHOULD_WORK)for(let he=0;he<z.length;he++){const me=z[he];if(me!==t.PW_TEST_CDN_THAT_SHOULD_WORK){const ye=new URL(me);ye.hostname=ye.hostname+".does-not-resolve.playwright.dev",z[he]=ye.toString()}}const $={chromium:{linux:["chrome-linux","chrome"],mac:["chrome-mac","Chromium.app","Contents","MacOS","Chromium"],win:["chrome-win","chrome.exe"]},"chromium-headless-shell":{linux:["chrome-linux","headless_shell"],mac:["chrome-mac","headless_shell"],win:["chrome-win","headless_shell.exe"]},firefox:{linux:["firefox","firefox"],mac:["firefox","Nightly.app","Contents","MacOS","firefox"],win:["firefox","firefox.exe"]},webkit:{linux:["pw_run.sh"],mac:["pw_run.sh"],win:["Playwright.exe"]},ffmpeg:{linux:["ffmpeg-linux"],mac:["ffmpeg-mac"],win:["ffmpeg-win64.exe"]},winldd:{linux:void 0,mac:void 0,win:["PrintDeps.exe"]}},q={chromium:{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/chromium/%s/chromium-linux.zip","ubuntu22.04-x64":"builds/chromium/%s/chromium-linux.zip","ubuntu24.04-x64":"builds/chromium/%s/chromium-linux.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/chromium/%s/chromium-linux-arm64.zip","ubuntu22.04-arm64":"builds/chromium/%s/chromium-linux-arm64.zip","ubuntu24.04-arm64":"builds/chromium/%s/chromium-linux-arm64.zip","debian11-x64":"builds/chromium/%s/chromium-linux.zip","debian11-arm64":"builds/chromium/%s/chromium-linux-arm64.zip","debian12-x64":"builds/chromium/%s/chromium-linux.zip","debian12-arm64":"builds/chromium/%s/chromium-linux-arm64.zip","mac10.13":"builds/chromium/%s/chromium-mac.zip","mac10.14":"builds/chromium/%s/chromium-mac.zip","mac10.15":"builds/chromium/%s/chromium-mac.zip",mac11:"builds/chromium/%s/chromium-mac.zip","mac11-arm64":"builds/chromium/%s/chromium-mac-arm64.zip",mac12:"builds/chromium/%s/chromium-mac.zip","mac12-arm64":"builds/chromium/%s/chromium-mac-arm64.zip",mac13:"builds/chromium/%s/chromium-mac.zip","mac13-arm64":"builds/chromium/%s/chromium-mac-arm64.zip",mac14:"builds/chromium/%s/chromium-mac.zip","mac14-arm64":"builds/chromium/%s/chromium-mac-arm64.zip",mac15:"builds/chromium/%s/chromium-mac.zip","mac15-arm64":"builds/chromium/%s/chromium-mac-arm64.zip",win64:"builds/chromium/%s/chromium-win64.zip"},"chromium-headless-shell":{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/chromium/%s/chromium-headless-shell-linux.zip","ubuntu22.04-x64":"builds/chromium/%s/chromium-headless-shell-linux.zip","ubuntu24.04-x64":"builds/chromium/%s/chromium-headless-shell-linux.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/chromium/%s/chromium-headless-shell-linux-arm64.zip","ubuntu22.04-arm64":"builds/chromium/%s/chromium-headless-shell-linux-arm64.zip","ubuntu24.04-arm64":"builds/chromium/%s/chromium-headless-shell-linux-arm64.zip","debian11-x64":"builds/chromium/%s/chromium-headless-shell-linux.zip","debian11-arm64":"builds/chromium/%s/chromium-headless-shell-linux-arm64.zip","debian12-x64":"builds/chromium/%s/chromium-headless-shell-linux.zip","debian12-arm64":"builds/chromium/%s/chromium-headless-shell-linux-arm64.zip","mac10.13":void 0,"mac10.14":void 0,"mac10.15":void 0,mac11:"builds/chromium/%s/chromium-headless-shell-mac.zip","mac11-arm64":"builds/chromium/%s/chromium-headless-shell-mac-arm64.zip",mac12:"builds/chromium/%s/chromium-headless-shell-mac.zip","mac12-arm64":"builds/chromium/%s/chromium-headless-shell-mac-arm64.zip",mac13:"builds/chromium/%s/chromium-headless-shell-mac.zip","mac13-arm64":"builds/chromium/%s/chromium-headless-shell-mac-arm64.zip",mac14:"builds/chromium/%s/chromium-headless-shell-mac.zip","mac14-arm64":"builds/chromium/%s/chromium-headless-shell-mac-arm64.zip",mac15:"builds/chromium/%s/chromium-headless-shell-mac.zip","mac15-arm64":"builds/chromium/%s/chromium-headless-shell-mac-arm64.zip",win64:"builds/chromium/%s/chromium-headless-shell-win64.zip"},"chromium-tip-of-tree":{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux.zip","ubuntu22.04-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux.zip","ubuntu24.04-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux-arm64.zip","ubuntu22.04-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux-arm64.zip","ubuntu24.04-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux-arm64.zip","debian11-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux.zip","debian11-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux-arm64.zip","debian12-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux.zip","debian12-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-linux-arm64.zip","mac10.13":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac10.14":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac10.15":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip",mac11:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac11-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac-arm64.zip",mac12:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac12-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac-arm64.zip",mac13:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac13-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac-arm64.zip",mac14:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac14-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac-arm64.zip",mac15:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac.zip","mac15-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-mac-arm64.zip",win64:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-win64.zip"},"chromium-tip-of-tree-headless-shell":{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux.zip","ubuntu22.04-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux.zip","ubuntu24.04-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux-arm64.zip","ubuntu22.04-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux-arm64.zip","ubuntu24.04-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux-arm64.zip","debian11-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux.zip","debian11-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux-arm64.zip","debian12-x64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux.zip","debian12-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-linux-arm64.zip","mac10.13":void 0,"mac10.14":void 0,"mac10.15":void 0,mac11:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac.zip","mac11-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac-arm64.zip",mac12:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac.zip","mac12-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac-arm64.zip",mac13:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac.zip","mac13-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac-arm64.zip",mac14:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac.zip","mac14-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac-arm64.zip",mac15:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac.zip","mac15-arm64":"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-mac-arm64.zip",win64:"builds/chromium-tip-of-tree/%s/chromium-tip-of-tree-headless-shell-win64.zip"},firefox:{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/firefox/%s/firefox-ubuntu-20.04.zip","ubuntu22.04-x64":"builds/firefox/%s/firefox-ubuntu-22.04.zip","ubuntu24.04-x64":"builds/firefox/%s/firefox-ubuntu-24.04.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/firefox/%s/firefox-ubuntu-20.04-arm64.zip","ubuntu22.04-arm64":"builds/firefox/%s/firefox-ubuntu-22.04-arm64.zip","ubuntu24.04-arm64":"builds/firefox/%s/firefox-ubuntu-24.04-arm64.zip","debian11-x64":"builds/firefox/%s/firefox-debian-11.zip","debian11-arm64":"builds/firefox/%s/firefox-debian-11-arm64.zip","debian12-x64":"builds/firefox/%s/firefox-debian-12.zip","debian12-arm64":"builds/firefox/%s/firefox-debian-12-arm64.zip","mac10.13":"builds/firefox/%s/firefox-mac.zip","mac10.14":"builds/firefox/%s/firefox-mac.zip","mac10.15":"builds/firefox/%s/firefox-mac.zip",mac11:"builds/firefox/%s/firefox-mac.zip","mac11-arm64":"builds/firefox/%s/firefox-mac-arm64.zip",mac12:"builds/firefox/%s/firefox-mac.zip","mac12-arm64":"builds/firefox/%s/firefox-mac-arm64.zip",mac13:"builds/firefox/%s/firefox-mac.zip","mac13-arm64":"builds/firefox/%s/firefox-mac-arm64.zip",mac14:"builds/firefox/%s/firefox-mac.zip","mac14-arm64":"builds/firefox/%s/firefox-mac-arm64.zip",mac15:"builds/firefox/%s/firefox-mac.zip","mac15-arm64":"builds/firefox/%s/firefox-mac-arm64.zip",win64:"builds/firefox/%s/firefox-win64.zip"},"firefox-beta":{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/firefox-beta/%s/firefox-beta-ubuntu-20.04.zip","ubuntu22.04-x64":"builds/firefox-beta/%s/firefox-beta-ubuntu-22.04.zip","ubuntu24.04-x64":"builds/firefox-beta/%s/firefox-beta-ubuntu-24.04.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":void 0,"ubuntu22.04-arm64":"builds/firefox-beta/%s/firefox-beta-ubuntu-22.04-arm64.zip","ubuntu24.04-arm64":"builds/firefox-beta/%s/firefox-beta-ubuntu-24.04-arm64.zip","debian11-x64":"builds/firefox-beta/%s/firefox-beta-debian-11.zip","debian11-arm64":"builds/firefox-beta/%s/firefox-beta-debian-11-arm64.zip","debian12-x64":"builds/firefox-beta/%s/firefox-beta-debian-12.zip","debian12-arm64":"builds/firefox-beta/%s/firefox-beta-debian-12-arm64.zip","mac10.13":"builds/firefox-beta/%s/firefox-beta-mac.zip","mac10.14":"builds/firefox-beta/%s/firefox-beta-mac.zip","mac10.15":"builds/firefox-beta/%s/firefox-beta-mac.zip",mac11:"builds/firefox-beta/%s/firefox-beta-mac.zip","mac11-arm64":"builds/firefox-beta/%s/firefox-beta-mac-arm64.zip",mac12:"builds/firefox-beta/%s/firefox-beta-mac.zip","mac12-arm64":"builds/firefox-beta/%s/firefox-beta-mac-arm64.zip",mac13:"builds/firefox-beta/%s/firefox-beta-mac.zip","mac13-arm64":"builds/firefox-beta/%s/firefox-beta-mac-arm64.zip",mac14:"builds/firefox-beta/%s/firefox-beta-mac.zip","mac14-arm64":"builds/firefox-beta/%s/firefox-beta-mac-arm64.zip",mac15:"builds/firefox-beta/%s/firefox-beta-mac.zip","mac15-arm64":"builds/firefox-beta/%s/firefox-beta-mac-arm64.zip",win64:"builds/firefox-beta/%s/firefox-beta-win64.zip"},webkit:{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/webkit/%s/webkit-ubuntu-20.04.zip","ubuntu22.04-x64":"builds/webkit/%s/webkit-ubuntu-22.04.zip","ubuntu24.04-x64":"builds/webkit/%s/webkit-ubuntu-24.04.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/webkit/%s/webkit-ubuntu-20.04-arm64.zip","ubuntu22.04-arm64":"builds/webkit/%s/webkit-ubuntu-22.04-arm64.zip","ubuntu24.04-arm64":"builds/webkit/%s/webkit-ubuntu-24.04-arm64.zip","debian11-x64":"builds/webkit/%s/webkit-debian-11.zip","debian11-arm64":"builds/webkit/%s/webkit-debian-11-arm64.zip","debian12-x64":"builds/webkit/%s/webkit-debian-12.zip","debian12-arm64":"builds/webkit/%s/webkit-debian-12-arm64.zip","mac10.13":void 0,"mac10.14":"builds/deprecated-webkit-mac-10.14/%s/deprecated-webkit-mac-10.14.zip","mac10.15":"builds/deprecated-webkit-mac-10.15/%s/deprecated-webkit-mac-10.15.zip",mac11:"builds/webkit/%s/webkit-mac-11.zip","mac11-arm64":"builds/webkit/%s/webkit-mac-11-arm64.zip",mac12:"builds/webkit/%s/webkit-mac-12.zip","mac12-arm64":"builds/webkit/%s/webkit-mac-12-arm64.zip",mac13:"builds/webkit/%s/webkit-mac-13.zip","mac13-arm64":"builds/webkit/%s/webkit-mac-13-arm64.zip",mac14:"builds/webkit/%s/webkit-mac-14.zip","mac14-arm64":"builds/webkit/%s/webkit-mac-14-arm64.zip",mac15:"builds/webkit/%s/webkit-mac-15.zip","mac15-arm64":"builds/webkit/%s/webkit-mac-15-arm64.zip",win64:"builds/webkit/%s/webkit-win64.zip"},ffmpeg:{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/ffmpeg/%s/ffmpeg-linux.zip","ubuntu22.04-x64":"builds/ffmpeg/%s/ffmpeg-linux.zip","ubuntu24.04-x64":"builds/ffmpeg/%s/ffmpeg-linux.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/ffmpeg/%s/ffmpeg-linux-arm64.zip","ubuntu22.04-arm64":"builds/ffmpeg/%s/ffmpeg-linux-arm64.zip","ubuntu24.04-arm64":"builds/ffmpeg/%s/ffmpeg-linux-arm64.zip","debian11-x64":"builds/ffmpeg/%s/ffmpeg-linux.zip","debian11-arm64":"builds/ffmpeg/%s/ffmpeg-linux-arm64.zip","debian12-x64":"builds/ffmpeg/%s/ffmpeg-linux.zip","debian12-arm64":"builds/ffmpeg/%s/ffmpeg-linux-arm64.zip","mac10.13":"builds/ffmpeg/%s/ffmpeg-mac.zip","mac10.14":"builds/ffmpeg/%s/ffmpeg-mac.zip","mac10.15":"builds/ffmpeg/%s/ffmpeg-mac.zip",mac11:"builds/ffmpeg/%s/ffmpeg-mac.zip","mac11-arm64":"builds/ffmpeg/%s/ffmpeg-mac-arm64.zip",mac12:"builds/ffmpeg/%s/ffmpeg-mac.zip","mac12-arm64":"builds/ffmpeg/%s/ffmpeg-mac-arm64.zip",mac13:"builds/ffmpeg/%s/ffmpeg-mac.zip","mac13-arm64":"builds/ffmpeg/%s/ffmpeg-mac-arm64.zip",mac14:"builds/ffmpeg/%s/ffmpeg-mac.zip","mac14-arm64":"builds/ffmpeg/%s/ffmpeg-mac-arm64.zip",mac15:"builds/ffmpeg/%s/ffmpeg-mac.zip","mac15-arm64":"builds/ffmpeg/%s/ffmpeg-mac-arm64.zip",win64:"builds/ffmpeg/%s/ffmpeg-win64.zip"},winldd:{"<unknown>":void 0,"ubuntu18.04-x64":void 0,"ubuntu20.04-x64":void 0,"ubuntu22.04-x64":void 0,"ubuntu24.04-x64":void 0,"ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":void 0,"ubuntu22.04-arm64":void 0,"ubuntu24.04-arm64":void 0,"debian11-x64":void 0,"debian11-arm64":void 0,"debian12-x64":void 0,"debian12-arm64":void 0,"mac10.13":void 0,"mac10.14":void 0,"mac10.15":void 0,mac11:void 0,"mac11-arm64":void 0,mac12:void 0,"mac12-arm64":void 0,mac13:void 0,"mac13-arm64":void 0,mac14:void 0,"mac14-arm64":void 0,mac15:void 0,"mac15-arm64":void 0,win64:"builds/winldd/%s/winldd-win64.zip"},android:{"<unknown>":"builds/android/%s/android.zip","ubuntu18.04-x64":void 0,"ubuntu20.04-x64":"builds/android/%s/android.zip","ubuntu22.04-x64":"builds/android/%s/android.zip","ubuntu24.04-x64":"builds/android/%s/android.zip","ubuntu18.04-arm64":void 0,"ubuntu20.04-arm64":"builds/android/%s/android.zip","ubuntu22.04-arm64":"builds/android/%s/android.zip","ubuntu24.04-arm64":"builds/android/%s/android.zip","debian11-x64":"builds/android/%s/android.zip","debian11-arm64":"builds/android/%s/android.zip","debian12-x64":"builds/android/%s/android.zip","debian12-arm64":"builds/android/%s/android.zip","mac10.13":"builds/android/%s/android.zip","mac10.14":"builds/android/%s/android.zip","mac10.15":"builds/android/%s/android.zip",mac11:"builds/android/%s/android.zip","mac11-arm64":"builds/android/%s/android.zip",mac12:"builds/android/%s/android.zip","mac12-arm64":"builds/android/%s/android.zip",mac13:"builds/android/%s/android.zip","mac13-arm64":"builds/android/%s/android.zip",mac14:"builds/android/%s/android.zip","mac14-arm64":"builds/android/%s/android.zip",mac15:"builds/android/%s/android.zip","mac15-arm64":"builds/android/%s/android.zip",win64:"builds/android/%s/android.zip"},_bidiFirefox:{},_bidiChromium:{}},J=(()=>{let he;const me=(0,s.getFromENV)("PLAYWRIGHT_BROWSERS_PATH");if(me==="0")he=_.default.join(__dirname,"..","..","..",".local-browsers");else if(me)he=me;else{let ye;if(process.platform==="linux")ye=t.XDG_CACHE_HOME||_.default.join(u.default.homedir(),".cache");else if(process.platform==="darwin")ye=_.default.join(u.default.homedir(),"Library","Caches");else if(process.platform==="win32")ye=t.LOCALAPPDATA||_.default.join(u.default.homedir(),"AppData","Local");else throw new Error("Unsupported platform: "+process.platform);he=_.default.join(ye,"ms-playwright")}return _.default.isAbsolute(he)||(he=_.default.resolve((0,s.getFromENV)("INIT_CWD")||process.cwd(),he)),he})();function le(he){const me=_.default.basename(he);for(const ye of ge)if(me.startsWith(ye.replace(/-/g,"_")+"-"))return!0;return!1}function _e(he){return he.browsers.map(me=>{const ye=me.name,Se=(me.revisionOverrides||{})[h.hostPlatform],Oe=Se||me.revision,Pe=Se?`${ye}_${h.hostPlatform}_special`:`${ye}`;return{name:ye,revision:Oe,hasRevisionOverride:!!Se,browserVersion:Se?void 0:me.browserVersion,installByDefault:!!me.installByDefault,dir:_.default.join(J,Pe.replace(/-/g,"_")+"-"+Oe)}})}const ge=["android","chromium","firefox","webkit","ffmpeg","firefox-beta","chromium-tip-of-tree","chromium-headless-shell","chromium-tip-of-tree-headless-shell"];class ne{constructor(me){const ye=_e(me),Se=(Be,it)=>{let Qe;return process.platform==="linux"?Qe=$[it].linux:process.platform==="darwin"?Qe=$[it].mac:process.platform==="win32"&&(Qe=$[it].win),Qe?_.default.join(Be,...Qe):void 0},Oe=(Be,it,Qe,Et)=>{if(!it)throw new Error(`${Be} is not supported on ${h.hostPlatform}`);const pt=j(Et,`install${Qe?"":" "+Be}`);if(!(0,T.canAccessFile)(it)){const Rt=(0,v.readDockerVersionSync)(),Kt=Rt?(0,v.dockerVersion)(Rt.dockerImageNameTemplate):null,ct=Rt&&Kt&&Rt.dockerImageName!==Kt.dockerImageName?[`Looks like ${Et==="javascript"?"Playwright Test or ":""}Playwright was just updated to ${Kt.driverVersion}.`,"Please update docker image as well.",`-  current: ${Rt.dockerImageName}`,`- required: ${Kt.dockerImageName}`,"","<3 Playwright Team"].join(`
`):[`Looks like ${Et==="javascript"?"Playwright Test or ":""}Playwright was just installed or updated.`,`Please run the following command to download new browser${Qe?"s":""}:`,"",`    ${pt}`,"","<3 Playwright Team"].join(`
`);throw new Error(`Executable doesn't exist at ${it}
${(0,n.wrapInASCIIBox)(ct,1)}`)}return it};this._executables=[];const Pe=ye.find(Be=>Be.name==="chromium"),Ne=Se(Pe.dir,"chromium");this._executables.push({type:"browser",name:"chromium",browserName:"chromium",directory:Pe.dir,executablePath:()=>Ne,executablePathOrDie:Be=>Oe("chromium",Ne,Pe.installByDefault,Be),installType:Pe.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,Pe.dir,["chrome-linux"],[],["chrome-win"]),downloadURLs:this._downloadURLs(Pe),browserVersion:Pe.browserVersion,_install:()=>this._downloadExecutable(Pe,Ne),_dependencyGroup:"chromium",_isHermeticInstallation:!0});const Le=ye.find(Be=>Be.name==="chromium-headless-shell"),qe=Se(Le.dir,"chromium-headless-shell");this._executables.push({type:"channel",name:"chromium-headless-shell",browserName:"chromium",directory:Le.dir,executablePath:()=>qe,executablePathOrDie:Be=>Oe("chromium",qe,Le.installByDefault,Be),installType:Le.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,Le.dir,["chrome-linux"],[],["chrome-win"]),downloadURLs:this._downloadURLs(Le),browserVersion:Pe.browserVersion,_install:()=>this._downloadExecutable(Le,qe),_dependencyGroup:"chromium",_isHermeticInstallation:!0});const Ge=ye.find(Be=>Be.name==="chromium-tip-of-tree-headless-shell"),ot=Se(Ge.dir,"chromium-headless-shell");this._executables.push({type:"channel",name:"chromium-tip-of-tree-headless-shell",browserName:"chromium",directory:Ge.dir,executablePath:()=>ot,executablePathOrDie:Be=>Oe("chromium",ot,Ge.installByDefault,Be),installType:Ge.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,Ge.dir,["chrome-linux"],[],["chrome-win"]),downloadURLs:this._downloadURLs(Ge),browserVersion:Pe.browserVersion,_install:()=>this._downloadExecutable(Ge,ot),_dependencyGroup:"chromium",_isHermeticInstallation:!0});const dt=ye.find(Be=>Be.name==="chromium-tip-of-tree"),yt=Se(dt.dir,"chromium");this._executables.push({type:"tool",name:"chromium-tip-of-tree",browserName:"chromium",directory:dt.dir,executablePath:()=>yt,executablePathOrDie:Be=>Oe("chromium-tip-of-tree",yt,dt.installByDefault,Be),installType:dt.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,dt.dir,["chrome-linux"],[],["chrome-win"]),downloadURLs:this._downloadURLs(dt),browserVersion:dt.browserVersion,_install:()=>this._downloadExecutable(dt,yt),_dependencyGroup:"chromium",_isHermeticInstallation:!0}),this._executables.push(this._createChromiumChannel("chrome",{linux:"/opt/google/chrome/chrome",darwin:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",win32:"\\Google\\Chrome\\Application\\chrome.exe"},()=>this._installChromiumChannel("chrome",{linux:"reinstall_chrome_stable_linux.sh",darwin:"reinstall_chrome_stable_mac.sh",win32:"reinstall_chrome_stable_win.ps1"}))),this._executables.push(this._createChromiumChannel("chrome-beta",{linux:"/opt/google/chrome-beta/chrome",darwin:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",win32:"\\Google\\Chrome Beta\\Application\\chrome.exe"},()=>this._installChromiumChannel("chrome-beta",{linux:"reinstall_chrome_beta_linux.sh",darwin:"reinstall_chrome_beta_mac.sh",win32:"reinstall_chrome_beta_win.ps1"}))),this._executables.push(this._createChromiumChannel("chrome-dev",{linux:"/opt/google/chrome-unstable/chrome",darwin:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",win32:"\\Google\\Chrome Dev\\Application\\chrome.exe"})),this._executables.push(this._createChromiumChannel("chrome-canary",{linux:"",darwin:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",win32:"\\Google\\Chrome SxS\\Application\\chrome.exe"})),this._executables.push(this._createChromiumChannel("msedge",{linux:"/opt/microsoft/msedge/msedge",darwin:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",win32:"\\Microsoft\\Edge\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge",{linux:"reinstall_msedge_stable_linux.sh",darwin:"reinstall_msedge_stable_mac.sh",win32:"reinstall_msedge_stable_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-beta",{linux:"/opt/microsoft/msedge-beta/msedge",darwin:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",win32:"\\Microsoft\\Edge Beta\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge-beta",{darwin:"reinstall_msedge_beta_mac.sh",linux:"reinstall_msedge_beta_linux.sh",win32:"reinstall_msedge_beta_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-dev",{linux:"/opt/microsoft/msedge-dev/msedge",darwin:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",win32:"\\Microsoft\\Edge Dev\\Application\\msedge.exe"},()=>this._installMSEdgeChannel("msedge-dev",{darwin:"reinstall_msedge_dev_mac.sh",linux:"reinstall_msedge_dev_linux.sh",win32:"reinstall_msedge_dev_win.ps1"}))),this._executables.push(this._createChromiumChannel("msedge-canary",{linux:"",darwin:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",win32:"\\Microsoft\\Edge SxS\\Application\\msedge.exe"})),this._executables.push(this._createBidiFirefoxChannel("moz-firefox",{linux:"/snap/bin/firefox",darwin:"/Applications/Firefox.app/Contents/MacOS/firefox",win32:"\\Mozilla Firefox\\firefox.exe"})),this._executables.push(this._createBidiFirefoxChannel("moz-firefox-beta",{linux:"/opt/firefox-beta/firefox",darwin:"/Applications/Firefox.app/Contents/MacOS/firefox",win32:"\\Mozilla Firefox\\firefox.exe"})),this._executables.push(this._createBidiFirefoxChannel("moz-firefox-nightly",{linux:"/opt/firefox-nightly/firefox",darwin:"/Applications/Firefox Nightly.app/Contents/MacOS/firefox",win32:"\\Mozilla Firefox\\firefox.exe"})),this._executables.push(this._createBidiChromiumChannel("bidi-chrome-stable",{linux:"/opt/google/chrome/chrome",darwin:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",win32:"\\Google\\Chrome\\Application\\chrome.exe"})),this._executables.push(this._createBidiChromiumChannel("bidi-chrome-canary",{linux:"",darwin:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",win32:"\\Google\\Chrome SxS\\Application\\chrome.exe"})),this._executables.push({type:"browser",name:"_bidiChromium",browserName:"_bidiChromium",directory:Pe.dir,executablePath:()=>Ne,executablePathOrDie:Be=>Oe("chromium",Ne,Pe.installByDefault,Be),installType:"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,Pe.dir,["chrome-linux"],[],["chrome-win"]),downloadURLs:this._downloadURLs(Pe),browserVersion:Pe.browserVersion,_install:()=>this._downloadExecutable(Pe,Ne),_dependencyGroup:"chromium",_isHermeticInstallation:!0});const nt=ye.find(Be=>Be.name==="firefox"),gt=Se(nt.dir,"firefox");this._executables.push({type:"browser",name:"firefox",browserName:"firefox",directory:nt.dir,executablePath:()=>gt,executablePathOrDie:Be=>Oe("firefox",gt,nt.installByDefault,Be),installType:nt.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,nt.dir,["firefox"],[],["firefox"]),downloadURLs:this._downloadURLs(nt),browserVersion:nt.browserVersion,_install:()=>this._downloadExecutable(nt,gt),_dependencyGroup:"firefox",_isHermeticInstallation:!0});const Ut=ye.find(Be=>Be.name==="firefox-beta"),Xt=Se(Ut.dir,"firefox");this._executables.push({type:"tool",name:"firefox-beta",browserName:"firefox",directory:Ut.dir,executablePath:()=>Xt,executablePathOrDie:Be=>Oe("firefox-beta",Xt,Ut.installByDefault,Be),installType:Ut.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,Ut.dir,["firefox"],[],["firefox"]),downloadURLs:this._downloadURLs(Ut),browserVersion:Ut.browserVersion,_install:()=>this._downloadExecutable(Ut,Xt),_dependencyGroup:"firefox",_isHermeticInstallation:!0});const st=ye.find(Be=>Be.name==="webkit"),xe=Se(st.dir,"webkit"),be=[_.default.join("minibrowser-gtk"),_.default.join("minibrowser-gtk","bin"),_.default.join("minibrowser-gtk","lib"),_.default.join("minibrowser-gtk","sys","lib"),_.default.join("minibrowser-wpe"),_.default.join("minibrowser-wpe","bin"),_.default.join("minibrowser-wpe","lib"),_.default.join("minibrowser-wpe","sys","lib")];this._executables.push({type:"browser",name:"webkit",browserName:"webkit",directory:st.dir,executablePath:()=>xe,executablePathOrDie:Be=>Oe("webkit",xe,st.installByDefault,Be),installType:st.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:Be=>this._validateHostRequirements(Be,st.dir,be,["libGLESv2.so.2","libx264.so"],[""]),downloadURLs:this._downloadURLs(st),browserVersion:st.browserVersion,_install:()=>this._downloadExecutable(st,xe),_dependencyGroup:"webkit",_isHermeticInstallation:!0});const ve=ye.find(Be=>Be.name==="ffmpeg"),Ce=Se(ve.dir,"ffmpeg");this._executables.push({type:"tool",name:"ffmpeg",browserName:void 0,directory:ve.dir,executablePath:()=>Ce,executablePathOrDie:Be=>Oe("ffmpeg",Ce,ve.installByDefault,Be),installType:ve.installByDefault?"download-by-default":"download-on-demand",_validateHostRequirements:()=>Promise.resolve(),downloadURLs:this._downloadURLs(ve),_install:()=>this._downloadExecutable(ve,Ce),_dependencyGroup:"tools",_isHermeticInstallation:!0});const Ke=ye.find(Be=>Be.name==="winldd"),ze=Se(Ke.dir,"winldd");this._executables.push({type:"tool",name:"winldd",browserName:void 0,directory:Ke.dir,executablePath:()=>ze,executablePathOrDie:Be=>Oe("winldd",ze,Ke.installByDefault,Be),installType:process.platform==="win32"?"download-by-default":"none",_validateHostRequirements:()=>Promise.resolve(),downloadURLs:this._downloadURLs(Ke),_install:()=>this._downloadExecutable(Ke,ze),_dependencyGroup:"tools",_isHermeticInstallation:!0});const Re=ye.find(Be=>Be.name==="android");this._executables.push({type:"tool",name:"android",browserName:void 0,directory:Re.dir,executablePath:()=>{},executablePathOrDie:()=>"",installType:"download-on-demand",_validateHostRequirements:()=>Promise.resolve(),downloadURLs:this._downloadURLs(Re),_install:()=>this._downloadExecutable(Re),_dependencyGroup:"tools",_isHermeticInstallation:!0})}_createChromiumChannel(me,ye,Se){const Oe=(Pe,Ne)=>{const Le=ye[process.platform];if(!Le){if(Ne)throw new Error(`Chromium distribution '${me}' is not supported on ${process.platform}`);return}const qe=process.platform==="win32"?[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"],t.HOMEDRIVE+"\\Program Files",t.HOMEDRIVE+"\\Program Files (x86)"].filter(Boolean):[""];for(const dt of qe){const yt=_.default.join(dt,Le);if((0,T.canAccessFile)(yt))return yt}if(!Ne)return;const Ge=qe.length?` at ${_.default.join(qe[0],Le)}`:"",ot=Se?`
Run "${j(Pe,"install "+me)}"`:"";throw new Error(`Chromium distribution '${me}' is not found${Ge}${ot}`)};return{type:"channel",name:me,browserName:"chromium",directory:void 0,executablePath:Pe=>Oe(Pe,!1),executablePathOrDie:Pe=>Oe(Pe,!0),installType:Se?"install-script":"none",_validateHostRequirements:()=>Promise.resolve(),_isHermeticInstallation:!1,_install:Se}}_createBidiFirefoxChannel(me,ye,Se){const Oe=(Pe,Ne)=>{const Le=ye[process.platform];if(!Le){if(Ne)throw new Error(`Firefox distribution '${me}' is not supported on ${process.platform}`);return}const qe=process.platform==="win32"?[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"],t.HOMEDRIVE+"\\Program Files",t.HOMEDRIVE+"\\Program Files (x86)"].filter(Boolean):[""];for(const Ge of qe){const ot=_.default.join(Ge,Le);if((0,T.canAccessFile)(ot))return ot}if(Ne)throw new Error(`Cannot find Firefox installation for channel '${me}' at the standard system paths.`)};return{type:"channel",name:me,browserName:"_bidiFirefox",directory:void 0,executablePath:Pe=>Oe(Pe,!1),executablePathOrDie:Pe=>Oe(Pe,!0),installType:"none",_validateHostRequirements:()=>Promise.resolve(),_isHermeticInstallation:!0,_install:Se}}_createBidiChromiumChannel(me,ye,Se){const Oe=(Pe,Ne)=>{const Le=ye[process.platform];if(!Le){if(Ne)throw new Error(`Chromium distribution '${me}' is not supported on ${process.platform}`);return}const qe=process.platform==="win32"?[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"],t.HOMEDRIVE+"\\Program Files",t.HOMEDRIVE+"\\Program Files (x86)"].filter(Boolean):[""];for(const dt of qe){const yt=_.default.join(dt,Le);if((0,T.canAccessFile)(yt))return yt}if(!Ne)return;const Ge=qe.length?` at ${_.default.join(qe[0],Le)}`:"",ot=Se?`
Run "${j(Pe,"install "+me)}"`:"";throw new Error(`Chromium distribution '${me}' is not found${Ge}${ot}`)};return{type:"channel",name:me,browserName:"_bidiChromium",directory:void 0,executablePath:Pe=>Oe(Pe,!1),executablePathOrDie:Pe=>Oe(Pe,!0),installType:Se?"install-script":"none",_validateHostRequirements:()=>Promise.resolve(),_isHermeticInstallation:!1,_install:Se}}executables(){return this._executables}findExecutable(me){return this._executables.find(ye=>ye.name===me)}defaultExecutables(){return this._executables.filter(me=>me.installType==="download-by-default")}_dedupe(me){return Array.from(new Set(me))}async _validateHostRequirements(me,ye,Se,Oe,Pe){if(u.default.platform()==="linux")return await(0,a.validateDependenciesLinux)(me,Se.map(Ne=>_.default.join(ye,Ne)),Oe);if(u.default.platform()==="win32"&&u.default.arch()==="x64")return await(0,a.validateDependenciesWindows)(me,Pe.map(Ne=>_.default.join(ye,Ne)))}async installDeps(me,ye){const Se=this._dedupe(me),Oe=new Set;for(const Pe of Se)Pe._dependencyGroup&&Oe.add(Pe._dependencyGroup);if(Oe.add("tools"),u.default.platform()==="win32")return await(0,a.installDependenciesWindows)(Oe,ye);if(u.default.platform()==="linux")return await(0,a.installDependenciesLinux)(Oe,ye)}async install(me,ye){const Se=this._dedupe(me);await g.default.promises.mkdir(J,{recursive:!0});const Oe=_.default.join(J,"__dirlock"),Pe=_.default.join(J,".links");let Ne;try{Ne=await x.lockfile.lock(J,{retries:{retries:20,factor:1.27579},onCompromised:Le=>{throw new Error(`${Le.message} Path: ${Oe}`)},lockfilePath:Oe}),await g.default.promises.mkdir(Pe,{recursive:!0}),await g.default.promises.writeFile(_.default.join(Pe,(0,s.calculateSha1)(p)),p),(0,s.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_BROWSER_GC")||await this._validateInstallationCache(Pe);for(const Le of Se){if(!Le._install)throw new Error(`ERROR: Playwright does not support installing ${Le.name}`);const{embedderName:qe}=(0,l.getEmbedderName)();if(!(0,s.getAsBooleanFromENV)("CI")&&!Le._isHermeticInstallation&&!ye&&Le.executablePath(qe)){const Ge=j(qe,"install --force "+Le.name);process.stderr.write(`
`+(0,n.wrapInASCIIBox)([`ATTENTION: "${Le.name}" is already installed on the system!`,"",`"${Le.name}" installation is not hermetic; installing newer version`,"requires *removal* of a current installation first.","",`To *uninstall* current version and re-install latest "${Le.name}":`,"",`- Close all running instances of "${Le.name}", if any`,'- Use "--force" to install browser:',"",`    ${Ge}`,"","<3 Playwright Team"].join(`
`),1)+`

`);return}await Le._install()}}catch(Le){if(Le.code==="ELOCKED"){const qe=process.platform==="win32"?"rm -R":"rm -rf";throw new Error(`
`+(0,n.wrapInASCIIBox)(["An active lockfile is found at:","",`  ${Oe}`,"","Either:","- wait a few minutes if other Playwright is installing browsers in parallel","- remove lock manually with:","",`    ${qe} ${Oe}`,"","<3 Playwright Team"].join(`
`),1))}else throw Le}finally{Ne&&await Ne()}}async uninstall(me){const ye=_.default.join(J,".links");if(me){const Se=await g.default.promises.readdir(ye).catch(()=>[]);for(const Oe of Se)await g.default.promises.unlink(_.default.join(ye,Oe))}else await g.default.promises.unlink(_.default.join(ye,(0,s.calculateSha1)(p))).catch(()=>{});return await this._validateInstallationCache(ye),{numberOfBrowsersLeft:(await g.default.promises.readdir(J).catch(()=>[])).filter(Se=>le(Se)).length}}async validateHostRequirementsForExecutablesIfNeeded(me,ye){if((0,s.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS")){process.stderr.write("Skipping host requirements validation logic because `PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS` env variable is set.\n");return}for(const Se of me)await this._validateHostRequirementsForExecutableIfNeeded(Se,ye)}async _validateHostRequirementsForExecutableIfNeeded(me,ye){if(!me.directory)return;const Oe=_.default.join(me.directory,"DEPENDENCIES_VALIDATED");if(!await g.default.promises.stat(Oe).then(Pe=>Date.now()-Pe.mtime.getTime()<2592e6).catch(()=>!1)){o.debugLogger.log("install",`validating host requirements for "${me.name}"`);try{await me._validateHostRequirements(ye),o.debugLogger.log("install",`validation passed for ${me.name}`)}catch(Pe){throw o.debugLogger.log("install",`validation failed for ${me.name}`),Pe}await g.default.promises.writeFile(Oe,"").catch(()=>{})}}_downloadURLs(me){const ye=q[me.name],Se=ye[h.hostPlatform]||ye["<unknown>"];if(!Se)return[];const Oe=f.format(Se,me.revision);let Pe=z.map(qe=>`${qe}/${Oe}`),Ne;me.name.startsWith("chromium")?Ne="PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST":me.name.startsWith("firefox")?Ne="PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST":me.name.startsWith("webkit")&&(Ne="PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST");const Le=Ne&&(0,s.getFromENV)(Ne)||(0,s.getFromENV)("PLAYWRIGHT_DOWNLOAD_HOST");return Le&&(Pe=[`${Le}/${Oe}`]),Pe}async _downloadExecutable(me,ye){const Se=this._downloadURLs(me);if(!Se.length)throw new Error(`ERROR: Playwright does not support ${me.name} on ${h.hostPlatform}`);if(h.isOfficiallySupportedPlatform||(0,d.logPolitely)(`BEWARE: your OS is not officially supported by Playwright; downloading fallback build for ${h.hostPlatform}.`),me.hasRevisionOverride){const Ge=`You are using a frozen ${me.name} browser which does not receive updates anymore on ${h.hostPlatform}. Please update to the latest version of your operating system to test up-to-date browsers.`;t.GITHUB_ACTIONS?console.log(`::warning title=Playwright::${Ge}`):(0,d.logPolitely)(Ge)}const Oe=me.name.split("-").map(Ge=>Ge==="ffmpeg"?"FFMPEG":Ge.charAt(0).toUpperCase()+Ge.slice(1)).join(" "),Pe=me.browserVersion?`${Oe} ${me.browserVersion} (playwright build v${me.revision})`:`${Oe} playwright build v${me.revision}`,Ne=`playwright-download-${me.name}-${h.hostPlatform}-${me.revision}.zip`,qe=+((0,s.getFromENV)("PLAYWRIGHT_DOWNLOAD_CONNECTION_TIMEOUT")||"0")||m.NET_DEFAULT_TIMEOUT;await(0,d.downloadBrowserWithProgressBar)(Pe,me.dir,ye,Se,Ne,qe).catch(Ge=>{throw new Error(`Failed to download ${Pe}, caused by
${Ge.stack}`)})}async _installMSEdgeChannel(me,ye){const Se=[];if(process.platform!=="linux"){const Oe=D(JSON.parse(await(0,m.fetchData)(void 0,{url:"https://edgeupdates.microsoft.com/api/products"}))),Pe={msedge:"Stable","msedge-beta":"Beta","msedge-dev":"Dev"}[me],Ne=Oe.find(ot=>ot.product===Pe),Le={darwin:{platform:"MacOS",arch:"universal",artifact:"pkg"},win32:{platform:"Windows",arch:"x64",artifact:"msi"}}[process.platform],qe=Le?Ne.releases.find(ot=>ot.platform===Le.platform&&ot.architecture===Le.arch&&ot.artifacts.length>0):null,Ge=qe?qe.artifacts.find(ot=>ot.artifactname===Le.artifact):null;if(Ge)Se.push(Ge.location);else throw new Error(`Cannot install ${me} on ${process.platform}`)}await this._installChromiumChannel(me,ye,Se)}async _installChromiumChannel(me,ye,Se=[]){const Oe=ye[process.platform];if(!Oe)throw new Error(`Cannot install ${me} on ${process.platform}`);const Pe=O;if(Oe.endsWith(".ps1")){const Le=["-ExecutionPolicy","Bypass","-File",_.default.join(O,Oe),...Se],{code:qe}=await(0,c.spawnAsync)("powershell.exe",Le,{cwd:Pe,stdio:"inherit"});if(qe!==0)throw new Error(`Failed to install ${me}`)}else{const{command:Le,args:qe,elevatedPermissions:Ge}=await(0,v.transformCommandsForRoot)([`bash "${_.default.join(O,Oe)}" ${Se.join("")}`]);Ge&&console.log("Switching to root user to install dependencies...");const{code:ot}=await(0,c.spawnAsync)(Le,qe,{cwd:Pe,stdio:"inherit"});if(ot!==0)throw new Error(`Failed to install ${me}`)}}async listInstalledBrowsers(){const me=_.default.join(J,".links"),{browsers:ye}=await this._traverseBrowserInstallations(me);return ye.filter(Se=>g.default.existsSync(Se.browserPath))}async _validateInstallationCache(me){const{browsers:ye,brokenLinks:Se}=await this._traverseBrowserInstallations(me);await this._deleteStaleBrowsers(ye),await this._deleteBrokenInstallations(Se)}async _traverseBrowserInstallations(me){const ye=[],Se=[];for(const Oe of await g.default.promises.readdir(me)){const Pe=_.default.join(me,Oe);let Ne="";try{Ne=(await g.default.promises.readFile(Pe)).toString();const Le=XE(_.default.join(Ne,"browsers.json")),qe=_e(Le);for(const Ge of ge){const ot=qe.find(nt=>nt.name===Ge);if(!ot)continue;const dt=ot.dir,yt=parseInt(ot.revision,10);ye.push({browserName:Ge,browserVersion:yt,browserPath:dt,referenceDir:Ne})}}catch{Se.push(Pe)}}return{browsers:ye,brokenLinks:Se}}async _deleteStaleBrowsers(me){const ye=new Set;for(const Pe of me){const{browserName:Ne,browserVersion:Le,browserPath:qe}=Pe;(!(Ne==="chromium"&&(Le>=786218||Le<3e5)||Ne==="firefox"&&Le>=1128||Ne==="webkit"&&Le>=1307||Ne!=="firefox"&&Ne!=="chromium"&&Ne!=="webkit")||await(0,T.existsAsync)(S(qe)))&&ye.add(qe)}let Se=(await g.default.promises.readdir(J)).map(Pe=>_.default.join(J,Pe));Se=Se.filter(Pe=>le(Pe));const Oe=new Set(Se);for(const Pe of ye)Oe.delete(Pe);for(const Pe of Oe)(0,d.logPolitely)("Removing unused browser at "+Pe);await(0,T.removeFolders)([...Oe])}async _deleteBrokenInstallations(me){for(const ye of me)await g.default.promises.unlink(ye).catch(Se=>{})}}function S(he){return _.default.join(he,"INSTALLATION_COMPLETE")}function j(he,me){switch(he){case"python":return`playwright ${me}`;case"java":return`mvn exec:java -e -D exec.mainClass=com.microsoft.playwright.CLI -D exec.args="${me}"`;case"csharp":return`pwsh bin/Debug/netX/playwright.ps1 ${me}`;default:return`${(0,s.getPackageManagerExecCommand)()} playwright ${me}`}}async function y(he){if((0,s.getAsBooleanFromENV)("PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD"))return(0,d.logPolitely)("Skipping browsers download because `PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD` env variable is set"),!1;const me=[];process.platform==="win32"&&me.push(ie.findExecutable("winldd"));for(const ye of he){const Se=ie.findExecutable(ye);if(!Se||Se.installType==="none")throw new Error(`Cannot install ${ye}`);me.push(Se)}await ie.install(me,!1)}function I(he){let me=null;for(const ye of["chromium","chrome","msedge"])try{ie.findExecutable(ye).executablePathOrDie(he),me=ye==="chromium"?void 0:ye;break}catch{}if(me===null){const Se=["No chromium-based browser found on the system.","Please run the following command to download one:","",`    ${j(he,"install chromium")}`,"","<3 Playwright Team"].join(`
`);throw new Error(`
`+(0,n.wrapInASCIIBox)(Se,1))}return me}function D(he){if(typeof he!="object"||!he)return he;if(Array.isArray(he))return he.map(D);const me={};for(const[ye,Se]of Object.entries(he))me[ye.toLowerCase()]=D(Se);return me}const ie=new ne(pO);return kl}var Al,r_;function Fp(){if(r_)return Al;r_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(l,x)=>{for(var T in x)t(l,T,{get:x[T],enumerable:!0})},V=(l,x,T,b)=>{if(x&&typeof x=="object"||typeof x=="function")for(let p of i(x))!E.call(l,p)&&p!==T&&t(l,p,{get:()=>x[p],enumerable:!(b=r(x,p))||b.enumerable});return l},te=l=>V(t({},"__esModule",{value:!0}),l),P={};R(P,{ValidationError:()=>e,createMetadataValidator:()=>g,findValidator:()=>C,maybeFindValidator:()=>w,scheme:()=>U,tAny:()=>a,tArray:()=>n,tBinary:()=>d,tBoolean:()=>_,tChannel:()=>m,tEnum:()=>h,tNumber:()=>u,tObject:()=>o,tOptional:()=>s,tString:()=>f,tType:()=>c,tUndefined:()=>v}),Al=te(P);class e extends Error{}const U={};function C(l,x,T){const b=w(l,x,T);if(!b)throw new e(`Unknown scheme for ${T}: ${l}.${x}`);return b}function w(l,x,T){const b=l+(T==="Initializer"?"":x[0].toUpperCase()+x.substring(1))+T;return U[b]}function g(){return s(U.Metadata)}const u=(l,x,T)=>{if(l instanceof Number)return l.valueOf();if(typeof l=="number")return l;throw new e(`${x}: expected number, got ${typeof l}`)},_=(l,x,T)=>{if(l instanceof Boolean)return l.valueOf();if(typeof l=="boolean")return l;throw new e(`${x}: expected boolean, got ${typeof l}`)},f=(l,x,T)=>{if(l instanceof String)return l.valueOf();if(typeof l=="string")return l;throw new e(`${x}: expected string, got ${typeof l}`)},d=(l,x,T)=>{if(T.binary==="fromBase64"){if(l instanceof String)return Buffer.from(l.valueOf(),"base64");if(typeof l=="string")return Buffer.from(l,"base64");throw new e(`${x}: expected base64-encoded buffer, got ${typeof l}`)}if(T.binary==="toBase64"){if(!(l instanceof Buffer))throw new e(`${x}: expected Buffer, got ${typeof l}`);return l.toString("base64")}if(T.binary==="buffer"){if(!(l instanceof Buffer))throw new e(`${x}: expected Buffer, got ${typeof l}`);return l}throw new e(`Unsupported binary behavior "${T.binary}"`)},v=(l,x,T)=>{if(Object.is(l,void 0))return l;throw new e(`${x}: expected undefined, got ${typeof l}`)},a=(l,x,T)=>l,s=l=>(x,T,b)=>Object.is(x,void 0)?x:l(x,T,b),n=l=>(x,T,b)=>{if(!Array.isArray(x))throw new e(`${T}: expected array, got ${typeof x}`);return x.map((p,O)=>l(p,T+"["+O+"]",b))},o=l=>(x,T,b)=>{if(Object.is(x,null))throw new e(`${T}: expected object, got null`);if(typeof x!="object")throw new e(`${T}: expected object, got ${typeof x}`);const p={};for(const[O,z]of Object.entries(l)){const $=z(x[O],T?T+"."+O:O,b);Object.is($,void 0)||(p[O]=$)}if(b.isUnderTest())for(const[O,z]of Object.entries(x))O.startsWith("__testHook")&&(p[O]=z);return p},h=l=>(x,T,b)=>{if(!l.includes(x))throw new e(`${T}: expected one of (${l.join("|")})`);return x},m=l=>(x,T,b)=>b.tChannelImpl(l,x,T,b),c=l=>(x,T,b)=>{const p=U[l];if(!p)throw new e(T+': unknown type "'+l+'"');return p(x,T,b)};return Al}var Il,n_;function Io(){if(n_)return Il;n_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{ValidationError:()=>U.ValidationError,createMetadataValidator:()=>U.createMetadataValidator,findValidator:()=>U.findValidator,maybeFindValidator:()=>U.maybeFindValidator}),Il=te(P);var e=Fp(),U=Fp();return e.scheme.StackFrame=(0,e.tObject)({file:e.tString,line:e.tNumber,column:e.tNumber,function:(0,e.tOptional)(e.tString)}),e.scheme.Metadata=(0,e.tObject)({location:(0,e.tOptional)((0,e.tObject)({file:e.tString,line:(0,e.tOptional)(e.tNumber),column:(0,e.tOptional)(e.tNumber)})),title:(0,e.tOptional)(e.tString),internal:(0,e.tOptional)(e.tBoolean),stepId:(0,e.tOptional)(e.tString)}),e.scheme.ClientSideCallMetadata=(0,e.tObject)({id:e.tNumber,stack:(0,e.tOptional)((0,e.tArray)((0,e.tType)("StackFrame")))}),e.scheme.Point=(0,e.tObject)({x:e.tNumber,y:e.tNumber}),e.scheme.Rect=(0,e.tObject)({x:e.tNumber,y:e.tNumber,width:e.tNumber,height:e.tNumber}),e.scheme.SerializedValue=(0,e.tObject)({n:(0,e.tOptional)(e.tNumber),b:(0,e.tOptional)(e.tBoolean),s:(0,e.tOptional)(e.tString),v:(0,e.tOptional)((0,e.tEnum)(["null","undefined","NaN","Infinity","-Infinity","-0"])),d:(0,e.tOptional)(e.tString),u:(0,e.tOptional)(e.tString),bi:(0,e.tOptional)(e.tString),ta:(0,e.tOptional)((0,e.tObject)({b:e.tBinary,k:(0,e.tEnum)(["i8","ui8","ui8c","i16","ui16","i32","ui32","f32","f64","bi64","bui64"])})),e:(0,e.tOptional)((0,e.tObject)({m:e.tString,n:e.tString,s:e.tString})),r:(0,e.tOptional)((0,e.tObject)({p:e.tString,f:e.tString})),a:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SerializedValue"))),o:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({k:e.tString,v:(0,e.tType)("SerializedValue")}))),h:(0,e.tOptional)(e.tNumber),id:(0,e.tOptional)(e.tNumber),ref:(0,e.tOptional)(e.tNumber)}),e.scheme.SerializedArgument=(0,e.tObject)({value:(0,e.tType)("SerializedValue"),handles:(0,e.tArray)((0,e.tChannel)("*"))}),e.scheme.ExpectedTextValue=(0,e.tObject)({string:(0,e.tOptional)(e.tString),regexSource:(0,e.tOptional)(e.tString),regexFlags:(0,e.tOptional)(e.tString),matchSubstring:(0,e.tOptional)(e.tBoolean),ignoreCase:(0,e.tOptional)(e.tBoolean),normalizeWhiteSpace:(0,e.tOptional)(e.tBoolean)}),e.scheme.SelectorEngine=(0,e.tObject)({name:e.tString,source:e.tString,contentScript:(0,e.tOptional)(e.tBoolean)}),e.scheme.AXNode=(0,e.tObject)({role:e.tString,name:e.tString,valueString:(0,e.tOptional)(e.tString),valueNumber:(0,e.tOptional)(e.tNumber),description:(0,e.tOptional)(e.tString),keyshortcuts:(0,e.tOptional)(e.tString),roledescription:(0,e.tOptional)(e.tString),valuetext:(0,e.tOptional)(e.tString),disabled:(0,e.tOptional)(e.tBoolean),expanded:(0,e.tOptional)(e.tBoolean),focused:(0,e.tOptional)(e.tBoolean),modal:(0,e.tOptional)(e.tBoolean),multiline:(0,e.tOptional)(e.tBoolean),multiselectable:(0,e.tOptional)(e.tBoolean),readonly:(0,e.tOptional)(e.tBoolean),required:(0,e.tOptional)(e.tBoolean),selected:(0,e.tOptional)(e.tBoolean),checked:(0,e.tOptional)((0,e.tEnum)(["checked","unchecked","mixed"])),pressed:(0,e.tOptional)((0,e.tEnum)(["pressed","released","mixed"])),level:(0,e.tOptional)(e.tNumber),valuemin:(0,e.tOptional)(e.tNumber),valuemax:(0,e.tOptional)(e.tNumber),autocomplete:(0,e.tOptional)(e.tString),haspopup:(0,e.tOptional)(e.tString),invalid:(0,e.tOptional)(e.tString),orientation:(0,e.tOptional)(e.tString),children:(0,e.tOptional)((0,e.tArray)((0,e.tType)("AXNode")))}),e.scheme.SetNetworkCookie=(0,e.tObject)({name:e.tString,value:e.tString,url:(0,e.tOptional)(e.tString),domain:(0,e.tOptional)(e.tString),path:(0,e.tOptional)(e.tString),expires:(0,e.tOptional)(e.tNumber),httpOnly:(0,e.tOptional)(e.tBoolean),secure:(0,e.tOptional)(e.tBoolean),sameSite:(0,e.tOptional)((0,e.tEnum)(["Strict","Lax","None"])),partitionKey:(0,e.tOptional)(e.tString),_crHasCrossSiteAncestor:(0,e.tOptional)(e.tBoolean)}),e.scheme.NetworkCookie=(0,e.tObject)({name:e.tString,value:e.tString,domain:e.tString,path:e.tString,expires:e.tNumber,httpOnly:e.tBoolean,secure:e.tBoolean,sameSite:(0,e.tEnum)(["Strict","Lax","None"]),partitionKey:(0,e.tOptional)(e.tString),_crHasCrossSiteAncestor:(0,e.tOptional)(e.tBoolean)}),e.scheme.NameValue=(0,e.tObject)({name:e.tString,value:e.tString}),e.scheme.IndexedDBDatabase=(0,e.tObject)({name:e.tString,version:e.tNumber,stores:(0,e.tArray)((0,e.tObject)({name:e.tString,autoIncrement:e.tBoolean,keyPath:(0,e.tOptional)(e.tString),keyPathArray:(0,e.tOptional)((0,e.tArray)(e.tString)),records:(0,e.tArray)((0,e.tObject)({key:(0,e.tOptional)(e.tAny),keyEncoded:(0,e.tOptional)(e.tAny),value:(0,e.tOptional)(e.tAny),valueEncoded:(0,e.tOptional)(e.tAny)})),indexes:(0,e.tArray)((0,e.tObject)({name:e.tString,keyPath:(0,e.tOptional)(e.tString),keyPathArray:(0,e.tOptional)((0,e.tArray)(e.tString)),multiEntry:e.tBoolean,unique:e.tBoolean}))}))}),e.scheme.SetOriginStorage=(0,e.tObject)({origin:e.tString,localStorage:(0,e.tArray)((0,e.tType)("NameValue")),indexedDB:(0,e.tOptional)((0,e.tArray)((0,e.tType)("IndexedDBDatabase")))}),e.scheme.OriginStorage=(0,e.tObject)({origin:e.tString,localStorage:(0,e.tArray)((0,e.tType)("NameValue")),indexedDB:(0,e.tOptional)((0,e.tArray)((0,e.tType)("IndexedDBDatabase")))}),e.scheme.SerializedError=(0,e.tObject)({error:(0,e.tOptional)((0,e.tObject)({message:e.tString,name:e.tString,stack:(0,e.tOptional)(e.tString)})),value:(0,e.tOptional)((0,e.tType)("SerializedValue"))}),e.scheme.RecordHarOptions=(0,e.tObject)({zip:(0,e.tOptional)(e.tBoolean),content:(0,e.tOptional)((0,e.tEnum)(["embed","attach","omit"])),mode:(0,e.tOptional)((0,e.tEnum)(["full","minimal"])),urlGlob:(0,e.tOptional)(e.tString),urlRegexSource:(0,e.tOptional)(e.tString),urlRegexFlags:(0,e.tOptional)(e.tString)}),e.scheme.FormField=(0,e.tObject)({name:e.tString,value:(0,e.tOptional)(e.tString),file:(0,e.tOptional)((0,e.tObject)({name:e.tString,mimeType:(0,e.tOptional)(e.tString),buffer:e.tBinary}))}),e.scheme.APIRequestContextInitializer=(0,e.tObject)({tracing:(0,e.tChannel)(["Tracing"])}),e.scheme.APIRequestContextFetchParams=(0,e.tObject)({url:e.tString,encodedParams:(0,e.tOptional)(e.tString),params:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),method:(0,e.tOptional)(e.tString),headers:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),postData:(0,e.tOptional)(e.tBinary),jsonData:(0,e.tOptional)(e.tString),formData:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),multipartData:(0,e.tOptional)((0,e.tArray)((0,e.tType)("FormField"))),timeout:e.tNumber,failOnStatusCode:(0,e.tOptional)(e.tBoolean),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),maxRedirects:(0,e.tOptional)(e.tNumber),maxRetries:(0,e.tOptional)(e.tNumber)}),e.scheme.APIRequestContextFetchResult=(0,e.tObject)({response:(0,e.tType)("APIResponse")}),e.scheme.APIRequestContextFetchResponseBodyParams=(0,e.tObject)({fetchUid:e.tString}),e.scheme.APIRequestContextFetchResponseBodyResult=(0,e.tObject)({binary:(0,e.tOptional)(e.tBinary)}),e.scheme.APIRequestContextFetchLogParams=(0,e.tObject)({fetchUid:e.tString}),e.scheme.APIRequestContextFetchLogResult=(0,e.tObject)({log:(0,e.tArray)(e.tString)}),e.scheme.APIRequestContextStorageStateParams=(0,e.tObject)({indexedDB:(0,e.tOptional)(e.tBoolean)}),e.scheme.APIRequestContextStorageStateResult=(0,e.tObject)({cookies:(0,e.tArray)((0,e.tType)("NetworkCookie")),origins:(0,e.tArray)((0,e.tType)("OriginStorage"))}),e.scheme.APIRequestContextDisposeAPIResponseParams=(0,e.tObject)({fetchUid:e.tString}),e.scheme.APIRequestContextDisposeAPIResponseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.APIRequestContextDisposeParams=(0,e.tObject)({reason:(0,e.tOptional)(e.tString)}),e.scheme.APIRequestContextDisposeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.APIResponse=(0,e.tObject)({fetchUid:e.tString,url:e.tString,status:e.tNumber,statusText:e.tString,headers:(0,e.tArray)((0,e.tType)("NameValue"))}),e.scheme.LifecycleEvent=(0,e.tEnum)(["load","domcontentloaded","networkidle","commit"]),e.scheme.LocalUtilsInitializer=(0,e.tObject)({deviceDescriptors:(0,e.tArray)((0,e.tObject)({name:e.tString,descriptor:(0,e.tObject)({userAgent:e.tString,viewport:(0,e.tObject)({width:e.tNumber,height:e.tNumber}),screen:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),deviceScaleFactor:e.tNumber,isMobile:e.tBoolean,hasTouch:e.tBoolean,defaultBrowserType:(0,e.tEnum)(["chromium","firefox","webkit"])})}))}),e.scheme.LocalUtilsZipParams=(0,e.tObject)({zipFile:e.tString,entries:(0,e.tArray)((0,e.tType)("NameValue")),stacksId:(0,e.tOptional)(e.tString),mode:(0,e.tEnum)(["write","append"]),includeSources:e.tBoolean}),e.scheme.LocalUtilsZipResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.LocalUtilsHarOpenParams=(0,e.tObject)({file:e.tString}),e.scheme.LocalUtilsHarOpenResult=(0,e.tObject)({harId:(0,e.tOptional)(e.tString),error:(0,e.tOptional)(e.tString)}),e.scheme.LocalUtilsHarLookupParams=(0,e.tObject)({harId:e.tString,url:e.tString,method:e.tString,headers:(0,e.tArray)((0,e.tType)("NameValue")),postData:(0,e.tOptional)(e.tBinary),isNavigationRequest:e.tBoolean}),e.scheme.LocalUtilsHarLookupResult=(0,e.tObject)({action:(0,e.tEnum)(["error","redirect","fulfill","noentry"]),message:(0,e.tOptional)(e.tString),redirectURL:(0,e.tOptional)(e.tString),status:(0,e.tOptional)(e.tNumber),headers:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),body:(0,e.tOptional)(e.tBinary)}),e.scheme.LocalUtilsHarCloseParams=(0,e.tObject)({harId:e.tString}),e.scheme.LocalUtilsHarCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.LocalUtilsHarUnzipParams=(0,e.tObject)({zipFile:e.tString,harFile:e.tString}),e.scheme.LocalUtilsHarUnzipResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.LocalUtilsConnectParams=(0,e.tObject)({wsEndpoint:e.tString,headers:(0,e.tOptional)(e.tAny),exposeNetwork:(0,e.tOptional)(e.tString),slowMo:(0,e.tOptional)(e.tNumber),timeout:e.tNumber,socksProxyRedirectPortForTest:(0,e.tOptional)(e.tNumber)}),e.scheme.LocalUtilsConnectResult=(0,e.tObject)({pipe:(0,e.tChannel)(["JsonPipe"]),headers:(0,e.tArray)((0,e.tType)("NameValue"))}),e.scheme.LocalUtilsTracingStartedParams=(0,e.tObject)({tracesDir:(0,e.tOptional)(e.tString),traceName:e.tString}),e.scheme.LocalUtilsTracingStartedResult=(0,e.tObject)({stacksId:e.tString}),e.scheme.LocalUtilsAddStackToTracingNoReplyParams=(0,e.tObject)({callData:(0,e.tType)("ClientSideCallMetadata")}),e.scheme.LocalUtilsAddStackToTracingNoReplyResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.LocalUtilsTraceDiscardedParams=(0,e.tObject)({stacksId:e.tString}),e.scheme.LocalUtilsTraceDiscardedResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.LocalUtilsGlobToRegexParams=(0,e.tObject)({glob:e.tString,baseURL:(0,e.tOptional)(e.tString),webSocketUrl:(0,e.tOptional)(e.tBoolean)}),e.scheme.LocalUtilsGlobToRegexResult=(0,e.tObject)({regex:e.tString}),e.scheme.RootInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.RootInitializeParams=(0,e.tObject)({sdkLanguage:(0,e.tEnum)(["javascript","python","java","csharp"])}),e.scheme.RootInitializeResult=(0,e.tObject)({playwright:(0,e.tChannel)(["Playwright"])}),e.scheme.PlaywrightInitializer=(0,e.tObject)({chromium:(0,e.tChannel)(["BrowserType"]),firefox:(0,e.tChannel)(["BrowserType"]),webkit:(0,e.tChannel)(["BrowserType"]),_bidiChromium:(0,e.tChannel)(["BrowserType"]),_bidiFirefox:(0,e.tChannel)(["BrowserType"]),android:(0,e.tChannel)(["Android"]),electron:(0,e.tChannel)(["Electron"]),utils:(0,e.tOptional)((0,e.tChannel)(["LocalUtils"])),preLaunchedBrowser:(0,e.tOptional)((0,e.tChannel)(["Browser"])),preConnectedAndroidDevice:(0,e.tOptional)((0,e.tChannel)(["AndroidDevice"])),socksSupport:(0,e.tOptional)((0,e.tChannel)(["SocksSupport"]))}),e.scheme.PlaywrightNewRequestParams=(0,e.tObject)({baseURL:(0,e.tOptional)(e.tString),userAgent:(0,e.tOptional)(e.tString),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),failOnStatusCode:(0,e.tOptional)(e.tBoolean),clientCertificates:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({origin:e.tString,cert:(0,e.tOptional)(e.tBinary),key:(0,e.tOptional)(e.tBinary),passphrase:(0,e.tOptional)(e.tString),pfx:(0,e.tOptional)(e.tBinary)}))),maxRedirects:(0,e.tOptional)(e.tNumber),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString),send:(0,e.tOptional)((0,e.tEnum)(["always","unauthorized"]))})),proxy:(0,e.tOptional)((0,e.tObject)({server:e.tString,bypass:(0,e.tOptional)(e.tString),username:(0,e.tOptional)(e.tString),password:(0,e.tOptional)(e.tString)})),storageState:(0,e.tOptional)((0,e.tObject)({cookies:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NetworkCookie"))),origins:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SetOriginStorage")))})),tracesDir:(0,e.tOptional)(e.tString)}),e.scheme.PlaywrightNewRequestResult=(0,e.tObject)({request:(0,e.tChannel)(["APIRequestContext"])}),e.scheme.RecorderSource=(0,e.tObject)({isRecorded:e.tBoolean,id:e.tString,label:e.tString,text:e.tString,language:e.tString,highlight:(0,e.tArray)((0,e.tObject)({line:e.tNumber,type:e.tString})),revealLine:(0,e.tOptional)(e.tNumber),group:(0,e.tOptional)(e.tString)}),e.scheme.DebugControllerInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerInspectRequestedEvent=(0,e.tObject)({selector:e.tString,locator:e.tString,ariaSnapshot:e.tString}),e.scheme.DebugControllerSetModeRequestedEvent=(0,e.tObject)({mode:e.tString}),e.scheme.DebugControllerStateChangedEvent=(0,e.tObject)({pageCount:e.tNumber}),e.scheme.DebugControllerSourceChangedEvent=(0,e.tObject)({text:e.tString,header:(0,e.tOptional)(e.tString),footer:(0,e.tOptional)(e.tString),actions:(0,e.tOptional)((0,e.tArray)(e.tString))}),e.scheme.DebugControllerPausedEvent=(0,e.tObject)({paused:e.tBoolean}),e.scheme.DebugControllerInitializeParams=(0,e.tObject)({codegenId:e.tString,sdkLanguage:(0,e.tEnum)(["javascript","python","java","csharp"])}),e.scheme.DebugControllerInitializeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerSetReportStateChangedParams=(0,e.tObject)({enabled:e.tBoolean}),e.scheme.DebugControllerSetReportStateChangedResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerResetForReuseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerResetForReuseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerNavigateParams=(0,e.tObject)({url:e.tString}),e.scheme.DebugControllerNavigateResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerSetRecorderModeParams=(0,e.tObject)({mode:(0,e.tEnum)(["inspecting","recording","none"]),testIdAttributeName:(0,e.tOptional)(e.tString)}),e.scheme.DebugControllerSetRecorderModeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerHighlightParams=(0,e.tObject)({selector:(0,e.tOptional)(e.tString),ariaTemplate:(0,e.tOptional)(e.tString)}),e.scheme.DebugControllerHighlightResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerHideHighlightParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerHideHighlightResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerResumeParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerResumeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerKillParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerKillResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerCloseAllBrowsersParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DebugControllerCloseAllBrowsersResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.SocksSupportInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.SocksSupportSocksRequestedEvent=(0,e.tObject)({uid:e.tString,host:e.tString,port:e.tNumber}),e.scheme.SocksSupportSocksDataEvent=(0,e.tObject)({uid:e.tString,data:e.tBinary}),e.scheme.SocksSupportSocksClosedEvent=(0,e.tObject)({uid:e.tString}),e.scheme.SocksSupportSocksConnectedParams=(0,e.tObject)({uid:e.tString,host:e.tString,port:e.tNumber}),e.scheme.SocksSupportSocksConnectedResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.SocksSupportSocksFailedParams=(0,e.tObject)({uid:e.tString,errorCode:e.tString}),e.scheme.SocksSupportSocksFailedResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.SocksSupportSocksDataParams=(0,e.tObject)({uid:e.tString,data:e.tBinary}),e.scheme.SocksSupportSocksDataResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.SocksSupportSocksErrorParams=(0,e.tObject)({uid:e.tString,error:e.tString}),e.scheme.SocksSupportSocksErrorResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.SocksSupportSocksEndParams=(0,e.tObject)({uid:e.tString}),e.scheme.SocksSupportSocksEndResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserTypeInitializer=(0,e.tObject)({executablePath:e.tString,name:e.tString}),e.scheme.BrowserTypeLaunchParams=(0,e.tObject)({channel:(0,e.tOptional)(e.tString),executablePath:(0,e.tOptional)(e.tString),args:(0,e.tOptional)((0,e.tArray)(e.tString)),ignoreAllDefaultArgs:(0,e.tOptional)(e.tBoolean),ignoreDefaultArgs:(0,e.tOptional)((0,e.tArray)(e.tString)),assistantMode:(0,e.tOptional)(e.tBoolean),handleSIGINT:(0,e.tOptional)(e.tBoolean),handleSIGTERM:(0,e.tOptional)(e.tBoolean),handleSIGHUP:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber,env:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),headless:(0,e.tOptional)(e.tBoolean),devtools:(0,e.tOptional)(e.tBoolean),proxy:(0,e.tOptional)((0,e.tObject)({server:e.tString,bypass:(0,e.tOptional)(e.tString),username:(0,e.tOptional)(e.tString),password:(0,e.tOptional)(e.tString)})),downloadsPath:(0,e.tOptional)(e.tString),tracesDir:(0,e.tOptional)(e.tString),chromiumSandbox:(0,e.tOptional)(e.tBoolean),firefoxUserPrefs:(0,e.tOptional)(e.tAny),cdpPort:(0,e.tOptional)(e.tNumber),slowMo:(0,e.tOptional)(e.tNumber)}),e.scheme.BrowserTypeLaunchResult=(0,e.tObject)({browser:(0,e.tChannel)(["Browser"])}),e.scheme.BrowserTypeLaunchPersistentContextParams=(0,e.tObject)({channel:(0,e.tOptional)(e.tString),executablePath:(0,e.tOptional)(e.tString),args:(0,e.tOptional)((0,e.tArray)(e.tString)),ignoreAllDefaultArgs:(0,e.tOptional)(e.tBoolean),ignoreDefaultArgs:(0,e.tOptional)((0,e.tArray)(e.tString)),assistantMode:(0,e.tOptional)(e.tBoolean),handleSIGINT:(0,e.tOptional)(e.tBoolean),handleSIGTERM:(0,e.tOptional)(e.tBoolean),handleSIGHUP:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber,env:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),headless:(0,e.tOptional)(e.tBoolean),devtools:(0,e.tOptional)(e.tBoolean),proxy:(0,e.tOptional)((0,e.tObject)({server:e.tString,bypass:(0,e.tOptional)(e.tString),username:(0,e.tOptional)(e.tString),password:(0,e.tOptional)(e.tString)})),downloadsPath:(0,e.tOptional)(e.tString),tracesDir:(0,e.tOptional)(e.tString),chromiumSandbox:(0,e.tOptional)(e.tBoolean),firefoxUserPrefs:(0,e.tOptional)(e.tAny),cdpPort:(0,e.tOptional)(e.tNumber),noDefaultViewport:(0,e.tOptional)(e.tBoolean),viewport:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),screen:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),clientCertificates:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({origin:e.tString,cert:(0,e.tOptional)(e.tBinary),key:(0,e.tOptional)(e.tBinary),passphrase:(0,e.tOptional)(e.tString),pfx:(0,e.tOptional)(e.tBinary)}))),javaScriptEnabled:(0,e.tOptional)(e.tBoolean),bypassCSP:(0,e.tOptional)(e.tBoolean),userAgent:(0,e.tOptional)(e.tString),locale:(0,e.tOptional)(e.tString),timezoneId:(0,e.tOptional)(e.tString),geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)})),permissions:(0,e.tOptional)((0,e.tArray)(e.tString)),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),offline:(0,e.tOptional)(e.tBoolean),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString),send:(0,e.tOptional)((0,e.tEnum)(["always","unauthorized"]))})),deviceScaleFactor:(0,e.tOptional)(e.tNumber),isMobile:(0,e.tOptional)(e.tBoolean),hasTouch:(0,e.tOptional)(e.tBoolean),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),reducedMotion:(0,e.tOptional)((0,e.tEnum)(["reduce","no-preference","no-override"])),forcedColors:(0,e.tOptional)((0,e.tEnum)(["active","none","no-override"])),acceptDownloads:(0,e.tOptional)((0,e.tEnum)(["accept","deny","internal-browser-default"])),contrast:(0,e.tOptional)((0,e.tEnum)(["no-preference","more","no-override"])),baseURL:(0,e.tOptional)(e.tString),recordVideo:(0,e.tOptional)((0,e.tObject)({dir:e.tString,size:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))})),strictSelectors:(0,e.tOptional)(e.tBoolean),serviceWorkers:(0,e.tOptional)((0,e.tEnum)(["allow","block"])),selectorEngines:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SelectorEngine"))),testIdAttributeName:(0,e.tOptional)(e.tString),userDataDir:e.tString,slowMo:(0,e.tOptional)(e.tNumber)}),e.scheme.BrowserTypeLaunchPersistentContextResult=(0,e.tObject)({browser:(0,e.tChannel)(["Browser"]),context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.BrowserTypeConnectOverCDPParams=(0,e.tObject)({endpointURL:e.tString,headers:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),slowMo:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.BrowserTypeConnectOverCDPResult=(0,e.tObject)({browser:(0,e.tChannel)(["Browser"]),defaultContext:(0,e.tOptional)((0,e.tChannel)(["BrowserContext"]))}),e.scheme.BrowserInitializer=(0,e.tObject)({version:e.tString,name:e.tString}),e.scheme.BrowserContextEvent=(0,e.tObject)({context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.BrowserCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserCloseParams=(0,e.tObject)({reason:(0,e.tOptional)(e.tString)}),e.scheme.BrowserCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserKillForTestsParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserKillForTestsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserDefaultUserAgentForTestParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserDefaultUserAgentForTestResult=(0,e.tObject)({userAgent:e.tString}),e.scheme.BrowserNewContextParams=(0,e.tObject)({noDefaultViewport:(0,e.tOptional)(e.tBoolean),viewport:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),screen:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),clientCertificates:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({origin:e.tString,cert:(0,e.tOptional)(e.tBinary),key:(0,e.tOptional)(e.tBinary),passphrase:(0,e.tOptional)(e.tString),pfx:(0,e.tOptional)(e.tBinary)}))),javaScriptEnabled:(0,e.tOptional)(e.tBoolean),bypassCSP:(0,e.tOptional)(e.tBoolean),userAgent:(0,e.tOptional)(e.tString),locale:(0,e.tOptional)(e.tString),timezoneId:(0,e.tOptional)(e.tString),geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)})),permissions:(0,e.tOptional)((0,e.tArray)(e.tString)),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),offline:(0,e.tOptional)(e.tBoolean),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString),send:(0,e.tOptional)((0,e.tEnum)(["always","unauthorized"]))})),deviceScaleFactor:(0,e.tOptional)(e.tNumber),isMobile:(0,e.tOptional)(e.tBoolean),hasTouch:(0,e.tOptional)(e.tBoolean),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),reducedMotion:(0,e.tOptional)((0,e.tEnum)(["reduce","no-preference","no-override"])),forcedColors:(0,e.tOptional)((0,e.tEnum)(["active","none","no-override"])),acceptDownloads:(0,e.tOptional)((0,e.tEnum)(["accept","deny","internal-browser-default"])),contrast:(0,e.tOptional)((0,e.tEnum)(["no-preference","more","no-override"])),baseURL:(0,e.tOptional)(e.tString),recordVideo:(0,e.tOptional)((0,e.tObject)({dir:e.tString,size:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))})),strictSelectors:(0,e.tOptional)(e.tBoolean),serviceWorkers:(0,e.tOptional)((0,e.tEnum)(["allow","block"])),selectorEngines:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SelectorEngine"))),testIdAttributeName:(0,e.tOptional)(e.tString),proxy:(0,e.tOptional)((0,e.tObject)({server:e.tString,bypass:(0,e.tOptional)(e.tString),username:(0,e.tOptional)(e.tString),password:(0,e.tOptional)(e.tString)})),storageState:(0,e.tOptional)((0,e.tObject)({cookies:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SetNetworkCookie"))),origins:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SetOriginStorage")))}))}),e.scheme.BrowserNewContextResult=(0,e.tObject)({context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.BrowserNewContextForReuseParams=(0,e.tObject)({noDefaultViewport:(0,e.tOptional)(e.tBoolean),viewport:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),screen:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),clientCertificates:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({origin:e.tString,cert:(0,e.tOptional)(e.tBinary),key:(0,e.tOptional)(e.tBinary),passphrase:(0,e.tOptional)(e.tString),pfx:(0,e.tOptional)(e.tBinary)}))),javaScriptEnabled:(0,e.tOptional)(e.tBoolean),bypassCSP:(0,e.tOptional)(e.tBoolean),userAgent:(0,e.tOptional)(e.tString),locale:(0,e.tOptional)(e.tString),timezoneId:(0,e.tOptional)(e.tString),geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)})),permissions:(0,e.tOptional)((0,e.tArray)(e.tString)),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),offline:(0,e.tOptional)(e.tBoolean),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString),send:(0,e.tOptional)((0,e.tEnum)(["always","unauthorized"]))})),deviceScaleFactor:(0,e.tOptional)(e.tNumber),isMobile:(0,e.tOptional)(e.tBoolean),hasTouch:(0,e.tOptional)(e.tBoolean),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),reducedMotion:(0,e.tOptional)((0,e.tEnum)(["reduce","no-preference","no-override"])),forcedColors:(0,e.tOptional)((0,e.tEnum)(["active","none","no-override"])),acceptDownloads:(0,e.tOptional)((0,e.tEnum)(["accept","deny","internal-browser-default"])),contrast:(0,e.tOptional)((0,e.tEnum)(["no-preference","more","no-override"])),baseURL:(0,e.tOptional)(e.tString),recordVideo:(0,e.tOptional)((0,e.tObject)({dir:e.tString,size:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))})),strictSelectors:(0,e.tOptional)(e.tBoolean),serviceWorkers:(0,e.tOptional)((0,e.tEnum)(["allow","block"])),selectorEngines:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SelectorEngine"))),testIdAttributeName:(0,e.tOptional)(e.tString),proxy:(0,e.tOptional)((0,e.tObject)({server:e.tString,bypass:(0,e.tOptional)(e.tString),username:(0,e.tOptional)(e.tString),password:(0,e.tOptional)(e.tString)})),storageState:(0,e.tOptional)((0,e.tObject)({cookies:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SetNetworkCookie"))),origins:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SetOriginStorage")))}))}),e.scheme.BrowserNewContextForReuseResult=(0,e.tObject)({context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.BrowserDisconnectFromReusedContextParams=(0,e.tObject)({reason:e.tString}),e.scheme.BrowserDisconnectFromReusedContextResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserNewBrowserCDPSessionParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserNewBrowserCDPSessionResult=(0,e.tObject)({session:(0,e.tChannel)(["CDPSession"])}),e.scheme.BrowserStartTracingParams=(0,e.tObject)({page:(0,e.tOptional)((0,e.tChannel)(["Page"])),screenshots:(0,e.tOptional)(e.tBoolean),categories:(0,e.tOptional)((0,e.tArray)(e.tString))}),e.scheme.BrowserStartTracingResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserStopTracingParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserStopTracingResult=(0,e.tObject)({artifact:(0,e.tChannel)(["Artifact"])}),e.scheme.EventTargetInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.EventTargetWaitForEventInfoParams=(0,e.tObject)({info:(0,e.tObject)({waitId:e.tString,phase:(0,e.tEnum)(["before","after","log"]),event:(0,e.tOptional)(e.tString),message:(0,e.tOptional)(e.tString),error:(0,e.tOptional)(e.tString)})}),e.scheme.BrowserContextWaitForEventInfoParams=(0,e.tType)("EventTargetWaitForEventInfoParams"),e.scheme.PageWaitForEventInfoParams=(0,e.tType)("EventTargetWaitForEventInfoParams"),e.scheme.WebSocketWaitForEventInfoParams=(0,e.tType)("EventTargetWaitForEventInfoParams"),e.scheme.ElectronApplicationWaitForEventInfoParams=(0,e.tType)("EventTargetWaitForEventInfoParams"),e.scheme.AndroidDeviceWaitForEventInfoParams=(0,e.tType)("EventTargetWaitForEventInfoParams"),e.scheme.EventTargetWaitForEventInfoResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextWaitForEventInfoResult=(0,e.tType)("EventTargetWaitForEventInfoResult"),e.scheme.PageWaitForEventInfoResult=(0,e.tType)("EventTargetWaitForEventInfoResult"),e.scheme.WebSocketWaitForEventInfoResult=(0,e.tType)("EventTargetWaitForEventInfoResult"),e.scheme.ElectronApplicationWaitForEventInfoResult=(0,e.tType)("EventTargetWaitForEventInfoResult"),e.scheme.AndroidDeviceWaitForEventInfoResult=(0,e.tType)("EventTargetWaitForEventInfoResult"),e.scheme.BrowserContextInitializer=(0,e.tObject)({isChromium:e.tBoolean,requestContext:(0,e.tChannel)(["APIRequestContext"]),tracing:(0,e.tChannel)(["Tracing"]),options:(0,e.tObject)({noDefaultViewport:(0,e.tOptional)(e.tBoolean),viewport:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),screen:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),clientCertificates:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({origin:e.tString,cert:(0,e.tOptional)(e.tBinary),key:(0,e.tOptional)(e.tBinary),passphrase:(0,e.tOptional)(e.tString),pfx:(0,e.tOptional)(e.tBinary)}))),javaScriptEnabled:(0,e.tOptional)(e.tBoolean),bypassCSP:(0,e.tOptional)(e.tBoolean),userAgent:(0,e.tOptional)(e.tString),locale:(0,e.tOptional)(e.tString),timezoneId:(0,e.tOptional)(e.tString),geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)})),permissions:(0,e.tOptional)((0,e.tArray)(e.tString)),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),offline:(0,e.tOptional)(e.tBoolean),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString),send:(0,e.tOptional)((0,e.tEnum)(["always","unauthorized"]))})),deviceScaleFactor:(0,e.tOptional)(e.tNumber),isMobile:(0,e.tOptional)(e.tBoolean),hasTouch:(0,e.tOptional)(e.tBoolean),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),reducedMotion:(0,e.tOptional)((0,e.tEnum)(["reduce","no-preference","no-override"])),forcedColors:(0,e.tOptional)((0,e.tEnum)(["active","none","no-override"])),acceptDownloads:(0,e.tOptional)((0,e.tEnum)(["accept","deny","internal-browser-default"])),contrast:(0,e.tOptional)((0,e.tEnum)(["no-preference","more","no-override"])),baseURL:(0,e.tOptional)(e.tString),recordVideo:(0,e.tOptional)((0,e.tObject)({dir:e.tString,size:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))})),strictSelectors:(0,e.tOptional)(e.tBoolean),serviceWorkers:(0,e.tOptional)((0,e.tEnum)(["allow","block"])),selectorEngines:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SelectorEngine"))),testIdAttributeName:(0,e.tOptional)(e.tString)})}),e.scheme.BrowserContextBindingCallEvent=(0,e.tObject)({binding:(0,e.tChannel)(["BindingCall"])}),e.scheme.BrowserContextConsoleEvent=(0,e.tObject)({type:e.tString,text:e.tString,args:(0,e.tArray)((0,e.tChannel)(["ElementHandle","JSHandle"])),location:(0,e.tObject)({url:e.tString,lineNumber:e.tNumber,columnNumber:e.tNumber}),page:(0,e.tChannel)(["Page"])}),e.scheme.BrowserContextCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextDialogEvent=(0,e.tObject)({dialog:(0,e.tChannel)(["Dialog"])}),e.scheme.BrowserContextPageEvent=(0,e.tObject)({page:(0,e.tChannel)(["Page"])}),e.scheme.BrowserContextPageErrorEvent=(0,e.tObject)({error:(0,e.tType)("SerializedError"),page:(0,e.tChannel)(["Page"])}),e.scheme.BrowserContextRouteEvent=(0,e.tObject)({route:(0,e.tChannel)(["Route"])}),e.scheme.BrowserContextWebSocketRouteEvent=(0,e.tObject)({webSocketRoute:(0,e.tChannel)(["WebSocketRoute"])}),e.scheme.BrowserContextVideoEvent=(0,e.tObject)({artifact:(0,e.tChannel)(["Artifact"])}),e.scheme.BrowserContextBackgroundPageEvent=(0,e.tObject)({page:(0,e.tChannel)(["Page"])}),e.scheme.BrowserContextServiceWorkerEvent=(0,e.tObject)({worker:(0,e.tChannel)(["Worker"])}),e.scheme.BrowserContextRequestEvent=(0,e.tObject)({request:(0,e.tChannel)(["Request"]),page:(0,e.tOptional)((0,e.tChannel)(["Page"]))}),e.scheme.BrowserContextRequestFailedEvent=(0,e.tObject)({request:(0,e.tChannel)(["Request"]),failureText:(0,e.tOptional)(e.tString),responseEndTiming:e.tNumber,page:(0,e.tOptional)((0,e.tChannel)(["Page"]))}),e.scheme.BrowserContextRequestFinishedEvent=(0,e.tObject)({request:(0,e.tChannel)(["Request"]),response:(0,e.tOptional)((0,e.tChannel)(["Response"])),responseEndTiming:e.tNumber,page:(0,e.tOptional)((0,e.tChannel)(["Page"]))}),e.scheme.BrowserContextResponseEvent=(0,e.tObject)({response:(0,e.tChannel)(["Response"]),page:(0,e.tOptional)((0,e.tChannel)(["Page"]))}),e.scheme.BrowserContextRecorderEventEvent=(0,e.tObject)({event:(0,e.tEnum)(["actionAdded","actionUpdated","signalAdded"]),data:e.tAny,page:(0,e.tChannel)(["Page"])}),e.scheme.BrowserContextAddCookiesParams=(0,e.tObject)({cookies:(0,e.tArray)((0,e.tType)("SetNetworkCookie"))}),e.scheme.BrowserContextAddCookiesResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextAddInitScriptParams=(0,e.tObject)({source:e.tString}),e.scheme.BrowserContextAddInitScriptResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClearCookiesParams=(0,e.tObject)({name:(0,e.tOptional)(e.tString),nameRegexSource:(0,e.tOptional)(e.tString),nameRegexFlags:(0,e.tOptional)(e.tString),domain:(0,e.tOptional)(e.tString),domainRegexSource:(0,e.tOptional)(e.tString),domainRegexFlags:(0,e.tOptional)(e.tString),path:(0,e.tOptional)(e.tString),pathRegexSource:(0,e.tOptional)(e.tString),pathRegexFlags:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClearCookiesResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClearPermissionsParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClearPermissionsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextCloseParams=(0,e.tObject)({reason:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextCookiesParams=(0,e.tObject)({urls:(0,e.tArray)(e.tString)}),e.scheme.BrowserContextCookiesResult=(0,e.tObject)({cookies:(0,e.tArray)((0,e.tType)("NetworkCookie"))}),e.scheme.BrowserContextExposeBindingParams=(0,e.tObject)({name:e.tString,needsHandle:(0,e.tOptional)(e.tBoolean)}),e.scheme.BrowserContextExposeBindingResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextGrantPermissionsParams=(0,e.tObject)({permissions:(0,e.tArray)(e.tString),origin:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextGrantPermissionsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextNewPageParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextNewPageResult=(0,e.tObject)({page:(0,e.tChannel)(["Page"])}),e.scheme.BrowserContextRegisterSelectorEngineParams=(0,e.tObject)({selectorEngine:(0,e.tType)("SelectorEngine")}),e.scheme.BrowserContextRegisterSelectorEngineResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetTestIdAttributeNameParams=(0,e.tObject)({testIdAttributeName:e.tString}),e.scheme.BrowserContextSetTestIdAttributeNameResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetExtraHTTPHeadersParams=(0,e.tObject)({headers:(0,e.tArray)((0,e.tType)("NameValue"))}),e.scheme.BrowserContextSetExtraHTTPHeadersResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetGeolocationParams=(0,e.tObject)({geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)}))}),e.scheme.BrowserContextSetGeolocationResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetHTTPCredentialsParams=(0,e.tObject)({httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString)}))}),e.scheme.BrowserContextSetHTTPCredentialsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetNetworkInterceptionPatternsParams=(0,e.tObject)({patterns:(0,e.tArray)((0,e.tObject)({glob:(0,e.tOptional)(e.tString),regexSource:(0,e.tOptional)(e.tString),regexFlags:(0,e.tOptional)(e.tString)}))}),e.scheme.BrowserContextSetNetworkInterceptionPatternsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetWebSocketInterceptionPatternsParams=(0,e.tObject)({patterns:(0,e.tArray)((0,e.tObject)({glob:(0,e.tOptional)(e.tString),regexSource:(0,e.tOptional)(e.tString),regexFlags:(0,e.tOptional)(e.tString)}))}),e.scheme.BrowserContextSetWebSocketInterceptionPatternsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextSetOfflineParams=(0,e.tObject)({offline:e.tBoolean}),e.scheme.BrowserContextSetOfflineResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextStorageStateParams=(0,e.tObject)({indexedDB:(0,e.tOptional)(e.tBoolean)}),e.scheme.BrowserContextStorageStateResult=(0,e.tObject)({cookies:(0,e.tArray)((0,e.tType)("NetworkCookie")),origins:(0,e.tArray)((0,e.tType)("OriginStorage"))}),e.scheme.BrowserContextPauseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextPauseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextEnableRecorderParams=(0,e.tObject)({language:(0,e.tOptional)(e.tString),mode:(0,e.tOptional)((0,e.tEnum)(["inspecting","recording"])),recorderMode:(0,e.tOptional)((0,e.tEnum)(["default","api"])),pauseOnNextStatement:(0,e.tOptional)(e.tBoolean),testIdAttributeName:(0,e.tOptional)(e.tString),launchOptions:(0,e.tOptional)(e.tAny),contextOptions:(0,e.tOptional)(e.tAny),device:(0,e.tOptional)(e.tString),saveStorage:(0,e.tOptional)(e.tString),outputFile:(0,e.tOptional)(e.tString),handleSIGINT:(0,e.tOptional)(e.tBoolean),omitCallTracking:(0,e.tOptional)(e.tBoolean)}),e.scheme.BrowserContextEnableRecorderResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextDisableRecorderParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextDisableRecorderResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextNewCDPSessionParams=(0,e.tObject)({page:(0,e.tOptional)((0,e.tChannel)(["Page"])),frame:(0,e.tOptional)((0,e.tChannel)(["Frame"]))}),e.scheme.BrowserContextNewCDPSessionResult=(0,e.tObject)({session:(0,e.tChannel)(["CDPSession"])}),e.scheme.BrowserContextHarStartParams=(0,e.tObject)({page:(0,e.tOptional)((0,e.tChannel)(["Page"])),options:(0,e.tType)("RecordHarOptions")}),e.scheme.BrowserContextHarStartResult=(0,e.tObject)({harId:e.tString}),e.scheme.BrowserContextHarExportParams=(0,e.tObject)({harId:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextHarExportResult=(0,e.tObject)({artifact:(0,e.tChannel)(["Artifact"])}),e.scheme.BrowserContextCreateTempFilesParams=(0,e.tObject)({rootDirName:(0,e.tOptional)(e.tString),items:(0,e.tArray)((0,e.tObject)({name:e.tString,lastModifiedMs:(0,e.tOptional)(e.tNumber)}))}),e.scheme.BrowserContextCreateTempFilesResult=(0,e.tObject)({rootDir:(0,e.tOptional)((0,e.tChannel)(["WritableStream"])),writableStreams:(0,e.tArray)((0,e.tChannel)(["WritableStream"]))}),e.scheme.BrowserContextUpdateSubscriptionParams=(0,e.tObject)({event:(0,e.tEnum)(["console","dialog","request","response","requestFinished","requestFailed"]),enabled:e.tBoolean}),e.scheme.BrowserContextUpdateSubscriptionResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockFastForwardParams=(0,e.tObject)({ticksNumber:(0,e.tOptional)(e.tNumber),ticksString:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClockFastForwardResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockInstallParams=(0,e.tObject)({timeNumber:(0,e.tOptional)(e.tNumber),timeString:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClockInstallResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockPauseAtParams=(0,e.tObject)({timeNumber:(0,e.tOptional)(e.tNumber),timeString:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClockPauseAtResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockResumeParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockResumeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockRunForParams=(0,e.tObject)({ticksNumber:(0,e.tOptional)(e.tNumber),ticksString:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClockRunForResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockSetFixedTimeParams=(0,e.tObject)({timeNumber:(0,e.tOptional)(e.tNumber),timeString:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClockSetFixedTimeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BrowserContextClockSetSystemTimeParams=(0,e.tObject)({timeNumber:(0,e.tOptional)(e.tNumber),timeString:(0,e.tOptional)(e.tString)}),e.scheme.BrowserContextClockSetSystemTimeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageInitializer=(0,e.tObject)({mainFrame:(0,e.tChannel)(["Frame"]),viewportSize:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),isClosed:e.tBoolean,opener:(0,e.tOptional)((0,e.tChannel)(["Page"]))}),e.scheme.PageBindingCallEvent=(0,e.tObject)({binding:(0,e.tChannel)(["BindingCall"])}),e.scheme.PageCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageCrashEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageDownloadEvent=(0,e.tObject)({url:e.tString,suggestedFilename:e.tString,artifact:(0,e.tChannel)(["Artifact"])}),e.scheme.PageViewportSizeChangedEvent=(0,e.tObject)({viewportSize:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))}),e.scheme.PageFileChooserEvent=(0,e.tObject)({element:(0,e.tChannel)(["ElementHandle"]),isMultiple:e.tBoolean}),e.scheme.PageFrameAttachedEvent=(0,e.tObject)({frame:(0,e.tChannel)(["Frame"])}),e.scheme.PageFrameDetachedEvent=(0,e.tObject)({frame:(0,e.tChannel)(["Frame"])}),e.scheme.PageLocatorHandlerTriggeredEvent=(0,e.tObject)({uid:e.tNumber}),e.scheme.PageRouteEvent=(0,e.tObject)({route:(0,e.tChannel)(["Route"])}),e.scheme.PageWebSocketRouteEvent=(0,e.tObject)({webSocketRoute:(0,e.tChannel)(["WebSocketRoute"])}),e.scheme.PageVideoEvent=(0,e.tObject)({artifact:(0,e.tChannel)(["Artifact"])}),e.scheme.PageWebSocketEvent=(0,e.tObject)({webSocket:(0,e.tChannel)(["WebSocket"])}),e.scheme.PageWorkerEvent=(0,e.tObject)({worker:(0,e.tChannel)(["Worker"])}),e.scheme.PageAddInitScriptParams=(0,e.tObject)({source:e.tString}),e.scheme.PageAddInitScriptResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageCloseParams=(0,e.tObject)({runBeforeUnload:(0,e.tOptional)(e.tBoolean),reason:(0,e.tOptional)(e.tString)}),e.scheme.PageCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageEmulateMediaParams=(0,e.tObject)({media:(0,e.tOptional)((0,e.tEnum)(["screen","print","no-override"])),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),reducedMotion:(0,e.tOptional)((0,e.tEnum)(["reduce","no-preference","no-override"])),forcedColors:(0,e.tOptional)((0,e.tEnum)(["active","none","no-override"])),contrast:(0,e.tOptional)((0,e.tEnum)(["no-preference","more","no-override"]))}),e.scheme.PageEmulateMediaResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageExposeBindingParams=(0,e.tObject)({name:e.tString,needsHandle:(0,e.tOptional)(e.tBoolean)}),e.scheme.PageExposeBindingResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageGoBackParams=(0,e.tObject)({timeout:e.tNumber,waitUntil:(0,e.tOptional)((0,e.tType)("LifecycleEvent"))}),e.scheme.PageGoBackResult=(0,e.tObject)({response:(0,e.tOptional)((0,e.tChannel)(["Response"]))}),e.scheme.PageGoForwardParams=(0,e.tObject)({timeout:e.tNumber,waitUntil:(0,e.tOptional)((0,e.tType)("LifecycleEvent"))}),e.scheme.PageGoForwardResult=(0,e.tObject)({response:(0,e.tOptional)((0,e.tChannel)(["Response"]))}),e.scheme.PageRequestGCParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageRequestGCResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageRegisterLocatorHandlerParams=(0,e.tObject)({selector:e.tString,noWaitAfter:(0,e.tOptional)(e.tBoolean)}),e.scheme.PageRegisterLocatorHandlerResult=(0,e.tObject)({uid:e.tNumber}),e.scheme.PageResolveLocatorHandlerNoReplyParams=(0,e.tObject)({uid:e.tNumber,remove:(0,e.tOptional)(e.tBoolean)}),e.scheme.PageResolveLocatorHandlerNoReplyResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageUnregisterLocatorHandlerParams=(0,e.tObject)({uid:e.tNumber}),e.scheme.PageUnregisterLocatorHandlerResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageReloadParams=(0,e.tObject)({timeout:e.tNumber,waitUntil:(0,e.tOptional)((0,e.tType)("LifecycleEvent"))}),e.scheme.PageReloadResult=(0,e.tObject)({response:(0,e.tOptional)((0,e.tChannel)(["Response"]))}),e.scheme.PageExpectScreenshotParams=(0,e.tObject)({expected:(0,e.tOptional)(e.tBinary),timeout:e.tNumber,isNot:e.tBoolean,locator:(0,e.tOptional)((0,e.tObject)({frame:(0,e.tChannel)(["Frame"]),selector:e.tString})),comparator:(0,e.tOptional)(e.tString),maxDiffPixels:(0,e.tOptional)(e.tNumber),maxDiffPixelRatio:(0,e.tOptional)(e.tNumber),threshold:(0,e.tOptional)(e.tNumber),fullPage:(0,e.tOptional)(e.tBoolean),clip:(0,e.tOptional)((0,e.tType)("Rect")),omitBackground:(0,e.tOptional)(e.tBoolean),caret:(0,e.tOptional)((0,e.tEnum)(["hide","initial"])),animations:(0,e.tOptional)((0,e.tEnum)(["disabled","allow"])),scale:(0,e.tOptional)((0,e.tEnum)(["css","device"])),mask:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({frame:(0,e.tChannel)(["Frame"]),selector:e.tString}))),maskColor:(0,e.tOptional)(e.tString),style:(0,e.tOptional)(e.tString)}),e.scheme.PageExpectScreenshotResult=(0,e.tObject)({diff:(0,e.tOptional)(e.tBinary),errorMessage:(0,e.tOptional)(e.tString),actual:(0,e.tOptional)(e.tBinary),previous:(0,e.tOptional)(e.tBinary),timedOut:(0,e.tOptional)(e.tBoolean),log:(0,e.tOptional)((0,e.tArray)(e.tString))}),e.scheme.PageScreenshotParams=(0,e.tObject)({timeout:e.tNumber,type:(0,e.tOptional)((0,e.tEnum)(["png","jpeg"])),quality:(0,e.tOptional)(e.tNumber),fullPage:(0,e.tOptional)(e.tBoolean),clip:(0,e.tOptional)((0,e.tType)("Rect")),omitBackground:(0,e.tOptional)(e.tBoolean),caret:(0,e.tOptional)((0,e.tEnum)(["hide","initial"])),animations:(0,e.tOptional)((0,e.tEnum)(["disabled","allow"])),scale:(0,e.tOptional)((0,e.tEnum)(["css","device"])),mask:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({frame:(0,e.tChannel)(["Frame"]),selector:e.tString}))),maskColor:(0,e.tOptional)(e.tString),style:(0,e.tOptional)(e.tString)}),e.scheme.PageScreenshotResult=(0,e.tObject)({binary:e.tBinary}),e.scheme.PageSetExtraHTTPHeadersParams=(0,e.tObject)({headers:(0,e.tArray)((0,e.tType)("NameValue"))}),e.scheme.PageSetExtraHTTPHeadersResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageSetNetworkInterceptionPatternsParams=(0,e.tObject)({patterns:(0,e.tArray)((0,e.tObject)({glob:(0,e.tOptional)(e.tString),regexSource:(0,e.tOptional)(e.tString),regexFlags:(0,e.tOptional)(e.tString)}))}),e.scheme.PageSetNetworkInterceptionPatternsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageSetWebSocketInterceptionPatternsParams=(0,e.tObject)({patterns:(0,e.tArray)((0,e.tObject)({glob:(0,e.tOptional)(e.tString),regexSource:(0,e.tOptional)(e.tString),regexFlags:(0,e.tOptional)(e.tString)}))}),e.scheme.PageSetWebSocketInterceptionPatternsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageSetViewportSizeParams=(0,e.tObject)({viewportSize:(0,e.tObject)({width:e.tNumber,height:e.tNumber})}),e.scheme.PageSetViewportSizeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageKeyboardDownParams=(0,e.tObject)({key:e.tString}),e.scheme.PageKeyboardDownResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageKeyboardUpParams=(0,e.tObject)({key:e.tString}),e.scheme.PageKeyboardUpResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageKeyboardInsertTextParams=(0,e.tObject)({text:e.tString}),e.scheme.PageKeyboardInsertTextResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageKeyboardTypeParams=(0,e.tObject)({text:e.tString,delay:(0,e.tOptional)(e.tNumber)}),e.scheme.PageKeyboardTypeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageKeyboardPressParams=(0,e.tObject)({key:e.tString,delay:(0,e.tOptional)(e.tNumber)}),e.scheme.PageKeyboardPressResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageMouseMoveParams=(0,e.tObject)({x:e.tNumber,y:e.tNumber,steps:(0,e.tOptional)(e.tNumber)}),e.scheme.PageMouseMoveResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageMouseDownParams=(0,e.tObject)({button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),clickCount:(0,e.tOptional)(e.tNumber)}),e.scheme.PageMouseDownResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageMouseUpParams=(0,e.tObject)({button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),clickCount:(0,e.tOptional)(e.tNumber)}),e.scheme.PageMouseUpResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageMouseClickParams=(0,e.tObject)({x:e.tNumber,y:e.tNumber,delay:(0,e.tOptional)(e.tNumber),button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),clickCount:(0,e.tOptional)(e.tNumber)}),e.scheme.PageMouseClickResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageMouseWheelParams=(0,e.tObject)({deltaX:e.tNumber,deltaY:e.tNumber}),e.scheme.PageMouseWheelResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageTouchscreenTapParams=(0,e.tObject)({x:e.tNumber,y:e.tNumber}),e.scheme.PageTouchscreenTapResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageAccessibilitySnapshotParams=(0,e.tObject)({interestingOnly:(0,e.tOptional)(e.tBoolean),root:(0,e.tOptional)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.PageAccessibilitySnapshotResult=(0,e.tObject)({rootAXNode:(0,e.tOptional)((0,e.tType)("AXNode"))}),e.scheme.PagePdfParams=(0,e.tObject)({scale:(0,e.tOptional)(e.tNumber),displayHeaderFooter:(0,e.tOptional)(e.tBoolean),headerTemplate:(0,e.tOptional)(e.tString),footerTemplate:(0,e.tOptional)(e.tString),printBackground:(0,e.tOptional)(e.tBoolean),landscape:(0,e.tOptional)(e.tBoolean),pageRanges:(0,e.tOptional)(e.tString),format:(0,e.tOptional)(e.tString),width:(0,e.tOptional)(e.tString),height:(0,e.tOptional)(e.tString),preferCSSPageSize:(0,e.tOptional)(e.tBoolean),margin:(0,e.tOptional)((0,e.tObject)({top:(0,e.tOptional)(e.tString),bottom:(0,e.tOptional)(e.tString),left:(0,e.tOptional)(e.tString),right:(0,e.tOptional)(e.tString)})),tagged:(0,e.tOptional)(e.tBoolean),outline:(0,e.tOptional)(e.tBoolean)}),e.scheme.PagePdfResult=(0,e.tObject)({pdf:e.tBinary}),e.scheme.PageSnapshotForAIParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageSnapshotForAIResult=(0,e.tObject)({snapshot:e.tString}),e.scheme.PageStartJSCoverageParams=(0,e.tObject)({resetOnNavigation:(0,e.tOptional)(e.tBoolean),reportAnonymousScripts:(0,e.tOptional)(e.tBoolean)}),e.scheme.PageStartJSCoverageResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageStopJSCoverageParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageStopJSCoverageResult=(0,e.tObject)({entries:(0,e.tArray)((0,e.tObject)({url:e.tString,scriptId:e.tString,source:(0,e.tOptional)(e.tString),functions:(0,e.tArray)((0,e.tObject)({functionName:e.tString,isBlockCoverage:e.tBoolean,ranges:(0,e.tArray)((0,e.tObject)({startOffset:e.tNumber,endOffset:e.tNumber,count:e.tNumber}))}))}))}),e.scheme.PageStartCSSCoverageParams=(0,e.tObject)({resetOnNavigation:(0,e.tOptional)(e.tBoolean)}),e.scheme.PageStartCSSCoverageResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageStopCSSCoverageParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageStopCSSCoverageResult=(0,e.tObject)({entries:(0,e.tArray)((0,e.tObject)({url:e.tString,text:(0,e.tOptional)(e.tString),ranges:(0,e.tArray)((0,e.tObject)({start:e.tNumber,end:e.tNumber}))}))}),e.scheme.PageBringToFrontParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageBringToFrontResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.PageUpdateSubscriptionParams=(0,e.tObject)({event:(0,e.tEnum)(["console","dialog","fileChooser","request","response","requestFinished","requestFailed"]),enabled:e.tBoolean}),e.scheme.PageUpdateSubscriptionResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameInitializer=(0,e.tObject)({url:e.tString,name:e.tString,parentFrame:(0,e.tOptional)((0,e.tChannel)(["Frame"])),loadStates:(0,e.tArray)((0,e.tType)("LifecycleEvent"))}),e.scheme.FrameLoadstateEvent=(0,e.tObject)({add:(0,e.tOptional)((0,e.tType)("LifecycleEvent")),remove:(0,e.tOptional)((0,e.tType)("LifecycleEvent"))}),e.scheme.FrameNavigatedEvent=(0,e.tObject)({url:e.tString,name:e.tString,newDocument:(0,e.tOptional)((0,e.tObject)({request:(0,e.tOptional)((0,e.tChannel)(["Request"]))})),error:(0,e.tOptional)(e.tString)}),e.scheme.FrameEvalOnSelectorParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.FrameEvalOnSelectorResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.FrameEvalOnSelectorAllParams=(0,e.tObject)({selector:e.tString,expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.FrameEvalOnSelectorAllResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.FrameAddScriptTagParams=(0,e.tObject)({url:(0,e.tOptional)(e.tString),content:(0,e.tOptional)(e.tString),type:(0,e.tOptional)(e.tString)}),e.scheme.FrameAddScriptTagResult=(0,e.tObject)({element:(0,e.tChannel)(["ElementHandle"])}),e.scheme.FrameAddStyleTagParams=(0,e.tObject)({url:(0,e.tOptional)(e.tString),content:(0,e.tOptional)(e.tString)}),e.scheme.FrameAddStyleTagResult=(0,e.tObject)({element:(0,e.tChannel)(["ElementHandle"])}),e.scheme.FrameAriaSnapshotParams=(0,e.tObject)({selector:e.tString,forAI:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameAriaSnapshotResult=(0,e.tObject)({snapshot:e.tString}),e.scheme.FrameBlurParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameBlurResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameCheckParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),force:(0,e.tOptional)(e.tBoolean),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameCheckResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameClickParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),force:(0,e.tOptional)(e.tBoolean),noWaitAfter:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),delay:(0,e.tOptional)(e.tNumber),button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),clickCount:(0,e.tOptional)(e.tNumber),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameClickResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameContentParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameContentResult=(0,e.tObject)({value:e.tString}),e.scheme.FrameDragAndDropParams=(0,e.tObject)({source:e.tString,target:e.tString,force:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean),sourcePosition:(0,e.tOptional)((0,e.tType)("Point")),targetPosition:(0,e.tOptional)((0,e.tType)("Point")),strict:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameDragAndDropResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameDblclickParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),force:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),delay:(0,e.tOptional)(e.tNumber),button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameDblclickResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameDispatchEventParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),type:e.tString,eventInit:(0,e.tType)("SerializedArgument"),timeout:e.tNumber}),e.scheme.FrameDispatchEventResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameEvaluateExpressionParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.FrameEvaluateExpressionResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.FrameEvaluateExpressionHandleParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.FrameEvaluateExpressionHandleResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.FrameFillParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),value:e.tString,force:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameFillResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameFocusParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameFocusResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameFrameElementParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameFrameElementResult=(0,e.tObject)({element:(0,e.tChannel)(["ElementHandle"])}),e.scheme.FrameGenerateLocatorStringParams=(0,e.tObject)({selector:e.tString}),e.scheme.FrameGenerateLocatorStringResult=(0,e.tObject)({value:(0,e.tOptional)(e.tString)}),e.scheme.FrameHighlightParams=(0,e.tObject)({selector:e.tString}),e.scheme.FrameHighlightResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameGetAttributeParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),name:e.tString,timeout:e.tNumber}),e.scheme.FrameGetAttributeResult=(0,e.tObject)({value:(0,e.tOptional)(e.tString)}),e.scheme.FrameGotoParams=(0,e.tObject)({url:e.tString,timeout:e.tNumber,waitUntil:(0,e.tOptional)((0,e.tType)("LifecycleEvent")),referer:(0,e.tOptional)(e.tString)}),e.scheme.FrameGotoResult=(0,e.tObject)({response:(0,e.tOptional)((0,e.tChannel)(["Response"]))}),e.scheme.FrameHoverParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),force:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameHoverResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameInnerHTMLParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameInnerHTMLResult=(0,e.tObject)({value:e.tString}),e.scheme.FrameInnerTextParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameInnerTextResult=(0,e.tObject)({value:e.tString}),e.scheme.FrameInputValueParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameInputValueResult=(0,e.tObject)({value:e.tString}),e.scheme.FrameIsCheckedParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameIsCheckedResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.FrameIsDisabledParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameIsDisabledResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.FrameIsEnabledParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameIsEnabledResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.FrameIsHiddenParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameIsHiddenResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.FrameIsVisibleParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameIsVisibleResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.FrameIsEditableParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameIsEditableResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.FramePressParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),key:e.tString,delay:(0,e.tOptional)(e.tNumber),noWaitAfter:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FramePressResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameQuerySelectorParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameQuerySelectorResult=(0,e.tObject)({element:(0,e.tOptional)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.FrameQuerySelectorAllParams=(0,e.tObject)({selector:e.tString}),e.scheme.FrameQuerySelectorAllResult=(0,e.tObject)({elements:(0,e.tArray)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.FrameQueryCountParams=(0,e.tObject)({selector:e.tString}),e.scheme.FrameQueryCountResult=(0,e.tObject)({value:e.tNumber}),e.scheme.FrameSelectOptionParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),elements:(0,e.tOptional)((0,e.tArray)((0,e.tChannel)(["ElementHandle"]))),options:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({valueOrLabel:(0,e.tOptional)(e.tString),value:(0,e.tOptional)(e.tString),label:(0,e.tOptional)(e.tString),index:(0,e.tOptional)(e.tNumber)}))),force:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameSelectOptionResult=(0,e.tObject)({values:(0,e.tArray)(e.tString)}),e.scheme.FrameSetContentParams=(0,e.tObject)({html:e.tString,timeout:e.tNumber,waitUntil:(0,e.tOptional)((0,e.tType)("LifecycleEvent"))}),e.scheme.FrameSetContentResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameSetInputFilesParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),payloads:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({name:e.tString,mimeType:(0,e.tOptional)(e.tString),buffer:e.tBinary}))),localDirectory:(0,e.tOptional)(e.tString),directoryStream:(0,e.tOptional)((0,e.tChannel)(["WritableStream"])),localPaths:(0,e.tOptional)((0,e.tArray)(e.tString)),streams:(0,e.tOptional)((0,e.tArray)((0,e.tChannel)(["WritableStream"]))),timeout:e.tNumber}),e.scheme.FrameSetInputFilesResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameTapParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),force:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameTapResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameTextContentParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.FrameTextContentResult=(0,e.tObject)({value:(0,e.tOptional)(e.tString)}),e.scheme.FrameTitleParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameTitleResult=(0,e.tObject)({value:e.tString}),e.scheme.FrameTypeParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),text:e.tString,delay:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.FrameTypeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameUncheckParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),force:(0,e.tOptional)(e.tBoolean),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameUncheckResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameWaitForTimeoutParams=(0,e.tObject)({waitTimeout:e.tNumber}),e.scheme.FrameWaitForTimeoutResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.FrameWaitForFunctionParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument"),timeout:e.tNumber,pollingInterval:(0,e.tOptional)(e.tNumber)}),e.scheme.FrameWaitForFunctionResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.FrameWaitForSelectorParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber,state:(0,e.tOptional)((0,e.tEnum)(["attached","detached","visible","hidden"])),omitReturnValue:(0,e.tOptional)(e.tBoolean)}),e.scheme.FrameWaitForSelectorResult=(0,e.tObject)({element:(0,e.tOptional)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.FrameExpectParams=(0,e.tObject)({selector:(0,e.tOptional)(e.tString),expression:e.tString,expressionArg:(0,e.tOptional)(e.tAny),expectedText:(0,e.tOptional)((0,e.tArray)((0,e.tType)("ExpectedTextValue"))),expectedNumber:(0,e.tOptional)(e.tNumber),expectedValue:(0,e.tOptional)((0,e.tType)("SerializedArgument")),useInnerText:(0,e.tOptional)(e.tBoolean),isNot:e.tBoolean,timeout:e.tNumber}),e.scheme.FrameExpectResult=(0,e.tObject)({matches:e.tBoolean,received:(0,e.tOptional)((0,e.tType)("SerializedValue")),timedOut:(0,e.tOptional)(e.tBoolean),log:(0,e.tOptional)((0,e.tArray)(e.tString))}),e.scheme.WorkerInitializer=(0,e.tObject)({url:e.tString}),e.scheme.WorkerCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WorkerEvaluateExpressionParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.WorkerEvaluateExpressionResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.WorkerEvaluateExpressionHandleParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.WorkerEvaluateExpressionHandleResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.JSHandleInitializer=(0,e.tObject)({preview:e.tString}),e.scheme.JSHandlePreviewUpdatedEvent=(0,e.tObject)({preview:e.tString}),e.scheme.ElementHandlePreviewUpdatedEvent=(0,e.tType)("JSHandlePreviewUpdatedEvent"),e.scheme.JSHandleDisposeParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleDisposeParams=(0,e.tType)("JSHandleDisposeParams"),e.scheme.JSHandleDisposeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleDisposeResult=(0,e.tType)("JSHandleDisposeResult"),e.scheme.JSHandleEvaluateExpressionParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.ElementHandleEvaluateExpressionParams=(0,e.tType)("JSHandleEvaluateExpressionParams"),e.scheme.JSHandleEvaluateExpressionResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.ElementHandleEvaluateExpressionResult=(0,e.tType)("JSHandleEvaluateExpressionResult"),e.scheme.JSHandleEvaluateExpressionHandleParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.ElementHandleEvaluateExpressionHandleParams=(0,e.tType)("JSHandleEvaluateExpressionHandleParams"),e.scheme.JSHandleEvaluateExpressionHandleResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.ElementHandleEvaluateExpressionHandleResult=(0,e.tType)("JSHandleEvaluateExpressionHandleResult"),e.scheme.JSHandleGetPropertyListParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleGetPropertyListParams=(0,e.tType)("JSHandleGetPropertyListParams"),e.scheme.JSHandleGetPropertyListResult=(0,e.tObject)({properties:(0,e.tArray)((0,e.tObject)({name:e.tString,value:(0,e.tChannel)(["ElementHandle","JSHandle"])}))}),e.scheme.ElementHandleGetPropertyListResult=(0,e.tType)("JSHandleGetPropertyListResult"),e.scheme.JSHandleGetPropertyParams=(0,e.tObject)({name:e.tString}),e.scheme.ElementHandleGetPropertyParams=(0,e.tType)("JSHandleGetPropertyParams"),e.scheme.JSHandleGetPropertyResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.ElementHandleGetPropertyResult=(0,e.tType)("JSHandleGetPropertyResult"),e.scheme.JSHandleJsonValueParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleJsonValueParams=(0,e.tType)("JSHandleJsonValueParams"),e.scheme.JSHandleJsonValueResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.ElementHandleJsonValueResult=(0,e.tType)("JSHandleJsonValueResult"),e.scheme.ElementHandleInitializer=(0,e.tObject)({preview:e.tString}),e.scheme.ElementHandleEvalOnSelectorParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.ElementHandleEvalOnSelectorResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.ElementHandleEvalOnSelectorAllParams=(0,e.tObject)({selector:e.tString,expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.ElementHandleEvalOnSelectorAllResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.ElementHandleBoundingBoxParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleBoundingBoxResult=(0,e.tObject)({value:(0,e.tOptional)((0,e.tType)("Rect"))}),e.scheme.ElementHandleCheckParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleCheckResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleClickParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),noWaitAfter:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),delay:(0,e.tOptional)(e.tNumber),button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),clickCount:(0,e.tOptional)(e.tNumber),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleClickResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleContentFrameParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleContentFrameResult=(0,e.tObject)({frame:(0,e.tOptional)((0,e.tChannel)(["Frame"]))}),e.scheme.ElementHandleDblclickParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),delay:(0,e.tOptional)(e.tNumber),button:(0,e.tOptional)((0,e.tEnum)(["left","right","middle"])),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleDblclickResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleDispatchEventParams=(0,e.tObject)({type:e.tString,eventInit:(0,e.tType)("SerializedArgument")}),e.scheme.ElementHandleDispatchEventResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleFillParams=(0,e.tObject)({value:e.tString,force:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.ElementHandleFillResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleFocusParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleFocusResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleGetAttributeParams=(0,e.tObject)({name:e.tString}),e.scheme.ElementHandleGetAttributeResult=(0,e.tObject)({value:(0,e.tOptional)(e.tString)}),e.scheme.ElementHandleHoverParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleHoverResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleInnerHTMLParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleInnerHTMLResult=(0,e.tObject)({value:e.tString}),e.scheme.ElementHandleInnerTextParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleInnerTextResult=(0,e.tObject)({value:e.tString}),e.scheme.ElementHandleInputValueParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleInputValueResult=(0,e.tObject)({value:e.tString}),e.scheme.ElementHandleIsCheckedParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleIsCheckedResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.ElementHandleIsDisabledParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleIsDisabledResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.ElementHandleIsEditableParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleIsEditableResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.ElementHandleIsEnabledParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleIsEnabledResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.ElementHandleIsHiddenParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleIsHiddenResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.ElementHandleIsVisibleParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleIsVisibleResult=(0,e.tObject)({value:e.tBoolean}),e.scheme.ElementHandleOwnerFrameParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleOwnerFrameResult=(0,e.tObject)({frame:(0,e.tOptional)((0,e.tChannel)(["Frame"]))}),e.scheme.ElementHandlePressParams=(0,e.tObject)({key:e.tString,delay:(0,e.tOptional)(e.tNumber),timeout:e.tNumber,noWaitAfter:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandlePressResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleQuerySelectorParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleQuerySelectorResult=(0,e.tObject)({element:(0,e.tOptional)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.ElementHandleQuerySelectorAllParams=(0,e.tObject)({selector:e.tString}),e.scheme.ElementHandleQuerySelectorAllResult=(0,e.tObject)({elements:(0,e.tArray)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.ElementHandleScreenshotParams=(0,e.tObject)({timeout:e.tNumber,type:(0,e.tOptional)((0,e.tEnum)(["png","jpeg"])),quality:(0,e.tOptional)(e.tNumber),omitBackground:(0,e.tOptional)(e.tBoolean),caret:(0,e.tOptional)((0,e.tEnum)(["hide","initial"])),animations:(0,e.tOptional)((0,e.tEnum)(["disabled","allow"])),scale:(0,e.tOptional)((0,e.tEnum)(["css","device"])),mask:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({frame:(0,e.tChannel)(["Frame"]),selector:e.tString}))),maskColor:(0,e.tOptional)(e.tString),style:(0,e.tOptional)(e.tString)}),e.scheme.ElementHandleScreenshotResult=(0,e.tObject)({binary:e.tBinary}),e.scheme.ElementHandleScrollIntoViewIfNeededParams=(0,e.tObject)({timeout:e.tNumber}),e.scheme.ElementHandleScrollIntoViewIfNeededResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleSelectOptionParams=(0,e.tObject)({elements:(0,e.tOptional)((0,e.tArray)((0,e.tChannel)(["ElementHandle"]))),options:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({valueOrLabel:(0,e.tOptional)(e.tString),value:(0,e.tOptional)(e.tString),label:(0,e.tOptional)(e.tString),index:(0,e.tOptional)(e.tNumber)}))),force:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.ElementHandleSelectOptionResult=(0,e.tObject)({values:(0,e.tArray)(e.tString)}),e.scheme.ElementHandleSelectTextParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber}),e.scheme.ElementHandleSelectTextResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleSetInputFilesParams=(0,e.tObject)({payloads:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({name:e.tString,mimeType:(0,e.tOptional)(e.tString),buffer:e.tBinary}))),localDirectory:(0,e.tOptional)(e.tString),directoryStream:(0,e.tOptional)((0,e.tChannel)(["WritableStream"])),localPaths:(0,e.tOptional)((0,e.tArray)(e.tString)),streams:(0,e.tOptional)((0,e.tArray)((0,e.tChannel)(["WritableStream"]))),timeout:e.tNumber}),e.scheme.ElementHandleSetInputFilesResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleTapParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),modifiers:(0,e.tOptional)((0,e.tArray)((0,e.tEnum)(["Alt","Control","ControlOrMeta","Meta","Shift"]))),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleTapResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleTextContentParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleTextContentResult=(0,e.tObject)({value:(0,e.tOptional)(e.tString)}),e.scheme.ElementHandleTypeParams=(0,e.tObject)({text:e.tString,delay:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.ElementHandleTypeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleUncheckParams=(0,e.tObject)({force:(0,e.tOptional)(e.tBoolean),position:(0,e.tOptional)((0,e.tType)("Point")),timeout:e.tNumber,trial:(0,e.tOptional)(e.tBoolean)}),e.scheme.ElementHandleUncheckResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleWaitForElementStateParams=(0,e.tObject)({state:(0,e.tEnum)(["visible","hidden","stable","enabled","disabled","editable"]),timeout:e.tNumber}),e.scheme.ElementHandleWaitForElementStateResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElementHandleWaitForSelectorParams=(0,e.tObject)({selector:e.tString,strict:(0,e.tOptional)(e.tBoolean),timeout:e.tNumber,state:(0,e.tOptional)((0,e.tEnum)(["attached","detached","visible","hidden"]))}),e.scheme.ElementHandleWaitForSelectorResult=(0,e.tObject)({element:(0,e.tOptional)((0,e.tChannel)(["ElementHandle"]))}),e.scheme.RequestInitializer=(0,e.tObject)({frame:(0,e.tOptional)((0,e.tChannel)(["Frame"])),serviceWorker:(0,e.tOptional)((0,e.tChannel)(["Worker"])),url:e.tString,resourceType:e.tString,method:e.tString,postData:(0,e.tOptional)(e.tBinary),headers:(0,e.tArray)((0,e.tType)("NameValue")),isNavigationRequest:e.tBoolean,redirectedFrom:(0,e.tOptional)((0,e.tChannel)(["Request"]))}),e.scheme.RequestResponseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.RequestResponseResult=(0,e.tObject)({response:(0,e.tOptional)((0,e.tChannel)(["Response"]))}),e.scheme.RequestRawRequestHeadersParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.RequestRawRequestHeadersResult=(0,e.tObject)({headers:(0,e.tArray)((0,e.tType)("NameValue"))}),e.scheme.RouteInitializer=(0,e.tObject)({request:(0,e.tChannel)(["Request"])}),e.scheme.RouteRedirectNavigationRequestParams=(0,e.tObject)({url:e.tString}),e.scheme.RouteRedirectNavigationRequestResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.RouteAbortParams=(0,e.tObject)({errorCode:(0,e.tOptional)(e.tString)}),e.scheme.RouteAbortResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.RouteContinueParams=(0,e.tObject)({url:(0,e.tOptional)(e.tString),method:(0,e.tOptional)(e.tString),headers:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),postData:(0,e.tOptional)(e.tBinary),isFallback:e.tBoolean}),e.scheme.RouteContinueResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.RouteFulfillParams=(0,e.tObject)({status:(0,e.tOptional)(e.tNumber),headers:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),body:(0,e.tOptional)(e.tString),isBase64:(0,e.tOptional)(e.tBoolean),fetchResponseUid:(0,e.tOptional)(e.tString)}),e.scheme.RouteFulfillResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteInitializer=(0,e.tObject)({url:e.tString}),e.scheme.WebSocketRouteMessageFromPageEvent=(0,e.tObject)({message:e.tString,isBase64:e.tBoolean}),e.scheme.WebSocketRouteMessageFromServerEvent=(0,e.tObject)({message:e.tString,isBase64:e.tBoolean}),e.scheme.WebSocketRouteClosePageEvent=(0,e.tObject)({code:(0,e.tOptional)(e.tNumber),reason:(0,e.tOptional)(e.tString),wasClean:e.tBoolean}),e.scheme.WebSocketRouteCloseServerEvent=(0,e.tObject)({code:(0,e.tOptional)(e.tNumber),reason:(0,e.tOptional)(e.tString),wasClean:e.tBoolean}),e.scheme.WebSocketRouteConnectParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteConnectResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteEnsureOpenedParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteEnsureOpenedResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteSendToPageParams=(0,e.tObject)({message:e.tString,isBase64:e.tBoolean}),e.scheme.WebSocketRouteSendToPageResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteSendToServerParams=(0,e.tObject)({message:e.tString,isBase64:e.tBoolean}),e.scheme.WebSocketRouteSendToServerResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteClosePageParams=(0,e.tObject)({code:(0,e.tOptional)(e.tNumber),reason:(0,e.tOptional)(e.tString),wasClean:e.tBoolean}),e.scheme.WebSocketRouteClosePageResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketRouteCloseServerParams=(0,e.tObject)({code:(0,e.tOptional)(e.tNumber),reason:(0,e.tOptional)(e.tString),wasClean:e.tBoolean}),e.scheme.WebSocketRouteCloseServerResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ResourceTiming=(0,e.tObject)({startTime:e.tNumber,domainLookupStart:e.tNumber,domainLookupEnd:e.tNumber,connectStart:e.tNumber,secureConnectionStart:e.tNumber,connectEnd:e.tNumber,requestStart:e.tNumber,responseStart:e.tNumber}),e.scheme.ResponseInitializer=(0,e.tObject)({request:(0,e.tChannel)(["Request"]),url:e.tString,status:e.tNumber,statusText:e.tString,headers:(0,e.tArray)((0,e.tType)("NameValue")),timing:(0,e.tType)("ResourceTiming"),fromServiceWorker:e.tBoolean}),e.scheme.ResponseBodyParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ResponseBodyResult=(0,e.tObject)({binary:e.tBinary}),e.scheme.ResponseSecurityDetailsParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ResponseSecurityDetailsResult=(0,e.tObject)({value:(0,e.tOptional)((0,e.tType)("SecurityDetails"))}),e.scheme.ResponseServerAddrParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ResponseServerAddrResult=(0,e.tObject)({value:(0,e.tOptional)((0,e.tType)("RemoteAddr"))}),e.scheme.ResponseRawResponseHeadersParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ResponseRawResponseHeadersResult=(0,e.tObject)({headers:(0,e.tArray)((0,e.tType)("NameValue"))}),e.scheme.ResponseSizesParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ResponseSizesResult=(0,e.tObject)({sizes:(0,e.tType)("RequestSizes")}),e.scheme.SecurityDetails=(0,e.tObject)({issuer:(0,e.tOptional)(e.tString),protocol:(0,e.tOptional)(e.tString),subjectName:(0,e.tOptional)(e.tString),validFrom:(0,e.tOptional)(e.tNumber),validTo:(0,e.tOptional)(e.tNumber)}),e.scheme.RequestSizes=(0,e.tObject)({requestBodySize:e.tNumber,requestHeadersSize:e.tNumber,responseBodySize:e.tNumber,responseHeadersSize:e.tNumber}),e.scheme.RemoteAddr=(0,e.tObject)({ipAddress:e.tString,port:e.tNumber}),e.scheme.WebSocketInitializer=(0,e.tObject)({url:e.tString}),e.scheme.WebSocketOpenEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WebSocketFrameSentEvent=(0,e.tObject)({opcode:e.tNumber,data:e.tString}),e.scheme.WebSocketFrameReceivedEvent=(0,e.tObject)({opcode:e.tNumber,data:e.tString}),e.scheme.WebSocketSocketErrorEvent=(0,e.tObject)({error:e.tString}),e.scheme.WebSocketCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BindingCallInitializer=(0,e.tObject)({frame:(0,e.tChannel)(["Frame"]),name:e.tString,args:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SerializedValue"))),handle:(0,e.tOptional)((0,e.tChannel)(["ElementHandle","JSHandle"]))}),e.scheme.BindingCallRejectParams=(0,e.tObject)({error:(0,e.tType)("SerializedError")}),e.scheme.BindingCallRejectResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.BindingCallResolveParams=(0,e.tObject)({result:(0,e.tType)("SerializedArgument")}),e.scheme.BindingCallResolveResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DialogInitializer=(0,e.tObject)({page:(0,e.tOptional)((0,e.tChannel)(["Page"])),type:e.tString,message:e.tString,defaultValue:e.tString}),e.scheme.DialogAcceptParams=(0,e.tObject)({promptText:(0,e.tOptional)(e.tString)}),e.scheme.DialogAcceptResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DialogDismissParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.DialogDismissResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingTracingStartParams=(0,e.tObject)({name:(0,e.tOptional)(e.tString),snapshots:(0,e.tOptional)(e.tBoolean),screenshots:(0,e.tOptional)(e.tBoolean),live:(0,e.tOptional)(e.tBoolean)}),e.scheme.TracingTracingStartResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingTracingStartChunkParams=(0,e.tObject)({name:(0,e.tOptional)(e.tString),title:(0,e.tOptional)(e.tString)}),e.scheme.TracingTracingStartChunkResult=(0,e.tObject)({traceName:e.tString}),e.scheme.TracingTracingGroupParams=(0,e.tObject)({name:e.tString,location:(0,e.tOptional)((0,e.tObject)({file:e.tString,line:(0,e.tOptional)(e.tNumber),column:(0,e.tOptional)(e.tNumber)}))}),e.scheme.TracingTracingGroupResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingTracingGroupEndParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingTracingGroupEndResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingTracingStopChunkParams=(0,e.tObject)({mode:(0,e.tEnum)(["archive","discard","entries"])}),e.scheme.TracingTracingStopChunkResult=(0,e.tObject)({artifact:(0,e.tOptional)((0,e.tChannel)(["Artifact"])),entries:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue")))}),e.scheme.TracingTracingStopParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.TracingTracingStopResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactInitializer=(0,e.tObject)({absolutePath:e.tString}),e.scheme.ArtifactPathAfterFinishedParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactPathAfterFinishedResult=(0,e.tObject)({value:e.tString}),e.scheme.ArtifactSaveAsParams=(0,e.tObject)({path:e.tString}),e.scheme.ArtifactSaveAsResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactSaveAsStreamParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactSaveAsStreamResult=(0,e.tObject)({stream:(0,e.tChannel)(["Stream"])}),e.scheme.ArtifactFailureParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactFailureResult=(0,e.tObject)({error:(0,e.tOptional)(e.tString)}),e.scheme.ArtifactStreamParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactStreamResult=(0,e.tObject)({stream:(0,e.tChannel)(["Stream"])}),e.scheme.ArtifactCancelParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactCancelResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactDeleteParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ArtifactDeleteResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.StreamInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.StreamReadParams=(0,e.tObject)({size:(0,e.tOptional)(e.tNumber)}),e.scheme.StreamReadResult=(0,e.tObject)({binary:e.tBinary}),e.scheme.StreamCloseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.StreamCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WritableStreamInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WritableStreamWriteParams=(0,e.tObject)({binary:e.tBinary}),e.scheme.WritableStreamWriteResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WritableStreamCloseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.WritableStreamCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.CDPSessionInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.CDPSessionEventEvent=(0,e.tObject)({method:e.tString,params:(0,e.tOptional)(e.tAny)}),e.scheme.CDPSessionSendParams=(0,e.tObject)({method:e.tString,params:(0,e.tOptional)(e.tAny)}),e.scheme.CDPSessionSendResult=(0,e.tObject)({result:e.tAny}),e.scheme.CDPSessionDetachParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.CDPSessionDetachResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElectronInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElectronLaunchParams=(0,e.tObject)({executablePath:(0,e.tOptional)(e.tString),args:(0,e.tOptional)((0,e.tArray)(e.tString)),cwd:(0,e.tOptional)(e.tString),env:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),timeout:e.tNumber,acceptDownloads:(0,e.tOptional)((0,e.tEnum)(["accept","deny","internal-browser-default"])),bypassCSP:(0,e.tOptional)(e.tBoolean),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)})),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString)})),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),locale:(0,e.tOptional)(e.tString),offline:(0,e.tOptional)(e.tBoolean),recordVideo:(0,e.tOptional)((0,e.tObject)({dir:e.tString,size:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))})),strictSelectors:(0,e.tOptional)(e.tBoolean),timezoneId:(0,e.tOptional)(e.tString),tracesDir:(0,e.tOptional)(e.tString),selectorEngines:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SelectorEngine"))),testIdAttributeName:(0,e.tOptional)(e.tString)}),e.scheme.ElectronLaunchResult=(0,e.tObject)({electronApplication:(0,e.tChannel)(["ElectronApplication"])}),e.scheme.ElectronApplicationInitializer=(0,e.tObject)({context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.ElectronApplicationCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.ElectronApplicationConsoleEvent=(0,e.tObject)({type:e.tString,text:e.tString,args:(0,e.tArray)((0,e.tChannel)(["ElementHandle","JSHandle"])),location:(0,e.tObject)({url:e.tString,lineNumber:e.tNumber,columnNumber:e.tNumber})}),e.scheme.ElectronApplicationBrowserWindowParams=(0,e.tObject)({page:(0,e.tChannel)(["Page"])}),e.scheme.ElectronApplicationBrowserWindowResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.ElectronApplicationEvaluateExpressionParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.ElectronApplicationEvaluateExpressionResult=(0,e.tObject)({value:(0,e.tType)("SerializedValue")}),e.scheme.ElectronApplicationEvaluateExpressionHandleParams=(0,e.tObject)({expression:e.tString,isFunction:(0,e.tOptional)(e.tBoolean),arg:(0,e.tType)("SerializedArgument")}),e.scheme.ElectronApplicationEvaluateExpressionHandleResult=(0,e.tObject)({handle:(0,e.tChannel)(["ElementHandle","JSHandle"])}),e.scheme.ElectronApplicationUpdateSubscriptionParams=(0,e.tObject)({event:(0,e.tEnum)(["console"]),enabled:e.tBoolean}),e.scheme.ElectronApplicationUpdateSubscriptionResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDevicesParams=(0,e.tObject)({host:(0,e.tOptional)(e.tString),port:(0,e.tOptional)(e.tNumber),omitDriverInstall:(0,e.tOptional)(e.tBoolean)}),e.scheme.AndroidDevicesResult=(0,e.tObject)({devices:(0,e.tArray)((0,e.tChannel)(["AndroidDevice"]))}),e.scheme.AndroidSocketInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidSocketDataEvent=(0,e.tObject)({data:e.tBinary}),e.scheme.AndroidSocketCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidSocketWriteParams=(0,e.tObject)({data:e.tBinary}),e.scheme.AndroidSocketWriteResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidSocketCloseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidSocketCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceInitializer=(0,e.tObject)({model:e.tString,serial:e.tString}),e.scheme.AndroidDeviceCloseEvent=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceWebViewAddedEvent=(0,e.tObject)({webView:(0,e.tType)("AndroidWebView")}),e.scheme.AndroidDeviceWebViewRemovedEvent=(0,e.tObject)({socketName:e.tString}),e.scheme.AndroidDeviceWaitParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),state:(0,e.tOptional)((0,e.tEnum)(["gone"])),timeout:e.tNumber}),e.scheme.AndroidDeviceWaitResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceFillParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),text:e.tString,timeout:e.tNumber}),e.scheme.AndroidDeviceFillResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceTapParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),duration:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDeviceTapResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceDragParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),dest:(0,e.tType)("Point"),speed:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDeviceDragResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceFlingParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),direction:(0,e.tEnum)(["up","down","left","right"]),speed:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDeviceFlingResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceLongTapParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),timeout:e.tNumber}),e.scheme.AndroidDeviceLongTapResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDevicePinchCloseParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),percent:e.tNumber,speed:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDevicePinchCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDevicePinchOpenParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),percent:e.tNumber,speed:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDevicePinchOpenResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceScrollParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),direction:(0,e.tEnum)(["up","down","left","right"]),percent:e.tNumber,speed:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDeviceScrollResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceSwipeParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),direction:(0,e.tEnum)(["up","down","left","right"]),percent:e.tNumber,speed:(0,e.tOptional)(e.tNumber),timeout:e.tNumber}),e.scheme.AndroidDeviceSwipeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceInfoParams=(0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector")}),e.scheme.AndroidDeviceInfoResult=(0,e.tObject)({info:(0,e.tType)("AndroidElementInfo")}),e.scheme.AndroidDeviceScreenshotParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceScreenshotResult=(0,e.tObject)({binary:e.tBinary}),e.scheme.AndroidDeviceInputTypeParams=(0,e.tObject)({text:e.tString}),e.scheme.AndroidDeviceInputTypeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceInputPressParams=(0,e.tObject)({key:e.tString}),e.scheme.AndroidDeviceInputPressResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceInputTapParams=(0,e.tObject)({point:(0,e.tType)("Point")}),e.scheme.AndroidDeviceInputTapResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceInputSwipeParams=(0,e.tObject)({segments:(0,e.tArray)((0,e.tType)("Point")),steps:e.tNumber}),e.scheme.AndroidDeviceInputSwipeResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceInputDragParams=(0,e.tObject)({from:(0,e.tType)("Point"),to:(0,e.tType)("Point"),steps:e.tNumber}),e.scheme.AndroidDeviceInputDragResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceLaunchBrowserParams=(0,e.tObject)({noDefaultViewport:(0,e.tOptional)(e.tBoolean),viewport:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),screen:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber})),ignoreHTTPSErrors:(0,e.tOptional)(e.tBoolean),clientCertificates:(0,e.tOptional)((0,e.tArray)((0,e.tObject)({origin:e.tString,cert:(0,e.tOptional)(e.tBinary),key:(0,e.tOptional)(e.tBinary),passphrase:(0,e.tOptional)(e.tString),pfx:(0,e.tOptional)(e.tBinary)}))),javaScriptEnabled:(0,e.tOptional)(e.tBoolean),bypassCSP:(0,e.tOptional)(e.tBoolean),userAgent:(0,e.tOptional)(e.tString),locale:(0,e.tOptional)(e.tString),timezoneId:(0,e.tOptional)(e.tString),geolocation:(0,e.tOptional)((0,e.tObject)({longitude:e.tNumber,latitude:e.tNumber,accuracy:(0,e.tOptional)(e.tNumber)})),permissions:(0,e.tOptional)((0,e.tArray)(e.tString)),extraHTTPHeaders:(0,e.tOptional)((0,e.tArray)((0,e.tType)("NameValue"))),offline:(0,e.tOptional)(e.tBoolean),httpCredentials:(0,e.tOptional)((0,e.tObject)({username:e.tString,password:e.tString,origin:(0,e.tOptional)(e.tString),send:(0,e.tOptional)((0,e.tEnum)(["always","unauthorized"]))})),deviceScaleFactor:(0,e.tOptional)(e.tNumber),isMobile:(0,e.tOptional)(e.tBoolean),hasTouch:(0,e.tOptional)(e.tBoolean),colorScheme:(0,e.tOptional)((0,e.tEnum)(["dark","light","no-preference","no-override"])),reducedMotion:(0,e.tOptional)((0,e.tEnum)(["reduce","no-preference","no-override"])),forcedColors:(0,e.tOptional)((0,e.tEnum)(["active","none","no-override"])),acceptDownloads:(0,e.tOptional)((0,e.tEnum)(["accept","deny","internal-browser-default"])),contrast:(0,e.tOptional)((0,e.tEnum)(["no-preference","more","no-override"])),baseURL:(0,e.tOptional)(e.tString),recordVideo:(0,e.tOptional)((0,e.tObject)({dir:e.tString,size:(0,e.tOptional)((0,e.tObject)({width:e.tNumber,height:e.tNumber}))})),strictSelectors:(0,e.tOptional)(e.tBoolean),serviceWorkers:(0,e.tOptional)((0,e.tEnum)(["allow","block"])),selectorEngines:(0,e.tOptional)((0,e.tArray)((0,e.tType)("SelectorEngine"))),testIdAttributeName:(0,e.tOptional)(e.tString),pkg:(0,e.tOptional)(e.tString),args:(0,e.tOptional)((0,e.tArray)(e.tString)),proxy:(0,e.tOptional)((0,e.tObject)({server:e.tString,bypass:(0,e.tOptional)(e.tString),username:(0,e.tOptional)(e.tString),password:(0,e.tOptional)(e.tString)}))}),e.scheme.AndroidDeviceLaunchBrowserResult=(0,e.tObject)({context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.AndroidDeviceOpenParams=(0,e.tObject)({command:e.tString}),e.scheme.AndroidDeviceOpenResult=(0,e.tObject)({socket:(0,e.tChannel)(["AndroidSocket"])}),e.scheme.AndroidDeviceShellParams=(0,e.tObject)({command:e.tString}),e.scheme.AndroidDeviceShellResult=(0,e.tObject)({result:e.tBinary}),e.scheme.AndroidDeviceInstallApkParams=(0,e.tObject)({file:e.tBinary,args:(0,e.tOptional)((0,e.tArray)(e.tString))}),e.scheme.AndroidDeviceInstallApkResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDevicePushParams=(0,e.tObject)({file:e.tBinary,path:e.tString,mode:(0,e.tOptional)(e.tNumber)}),e.scheme.AndroidDevicePushResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceConnectToWebViewParams=(0,e.tObject)({socketName:e.tString}),e.scheme.AndroidDeviceConnectToWebViewResult=(0,e.tObject)({context:(0,e.tChannel)(["BrowserContext"])}),e.scheme.AndroidDeviceCloseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidDeviceCloseResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.AndroidWebView=(0,e.tObject)({pid:e.tNumber,pkg:e.tString,socketName:e.tString}),e.scheme.AndroidSelector=(0,e.tObject)({checkable:(0,e.tOptional)(e.tBoolean),checked:(0,e.tOptional)(e.tBoolean),clazz:(0,e.tOptional)(e.tString),clickable:(0,e.tOptional)(e.tBoolean),depth:(0,e.tOptional)(e.tNumber),desc:(0,e.tOptional)(e.tString),enabled:(0,e.tOptional)(e.tBoolean),focusable:(0,e.tOptional)(e.tBoolean),focused:(0,e.tOptional)(e.tBoolean),hasChild:(0,e.tOptional)((0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector")})),hasDescendant:(0,e.tOptional)((0,e.tObject)({androidSelector:(0,e.tType)("AndroidSelector"),maxDepth:(0,e.tOptional)(e.tNumber)})),longClickable:(0,e.tOptional)(e.tBoolean),pkg:(0,e.tOptional)(e.tString),res:(0,e.tOptional)(e.tString),scrollable:(0,e.tOptional)(e.tBoolean),selected:(0,e.tOptional)(e.tBoolean),text:(0,e.tOptional)(e.tString)}),e.scheme.AndroidElementInfo=(0,e.tObject)({children:(0,e.tOptional)((0,e.tArray)((0,e.tType)("AndroidElementInfo"))),clazz:e.tString,desc:e.tString,res:e.tString,pkg:e.tString,text:e.tString,bounds:(0,e.tType)("Rect"),checkable:e.tBoolean,checked:e.tBoolean,clickable:e.tBoolean,enabled:e.tBoolean,focusable:e.tBoolean,focused:e.tBoolean,longClickable:e.tBoolean,scrollable:e.tBoolean,selected:e.tBoolean}),e.scheme.JsonPipeInitializer=(0,e.tOptional)((0,e.tObject)({})),e.scheme.JsonPipeMessageEvent=(0,e.tObject)({message:e.tAny}),e.scheme.JsonPipeClosedEvent=(0,e.tObject)({reason:(0,e.tOptional)(e.tString)}),e.scheme.JsonPipeSendParams=(0,e.tObject)({message:e.tAny}),e.scheme.JsonPipeSendResult=(0,e.tOptional)((0,e.tObject)({})),e.scheme.JsonPipeCloseParams=(0,e.tOptional)((0,e.tObject)({})),e.scheme.JsonPipeCloseResult=(0,e.tOptional)((0,e.tObject)({})),Il}var Nl,i_;function No(){if(i_)return Nl;i_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{parseSerializedValue:()=>e,serializeValue:()=>C}),Nl=te(P);function e(s,n){return U(s,n,new Map,[])}function U(s,n,o,h){if(s.ref!==void 0)return o.get(s.ref);if(s.n!==void 0)return s.n;if(s.s!==void 0)return s.s;if(s.b!==void 0)return s.b;if(s.v!==void 0){if(s.v==="undefined")return;if(s.v==="null")return null;if(s.v==="NaN")return NaN;if(s.v==="Infinity")return 1/0;if(s.v==="-Infinity")return-1/0;if(s.v==="-0")return-0}if(s.d!==void 0)return new Date(s.d);if(s.u!==void 0)return new URL(s.u);if(s.bi!==void 0)return BigInt(s.bi);if(s.e!==void 0){const m=new Error(s.e.m);return m.name=s.e.n,m.stack=s.e.s,m}if(s.r!==void 0)return new RegExp(s.r.p,s.r.f);if(s.ta!==void 0){const m=v[s.ta.k];return new m(s.ta.b.buffer,s.ta.b.byteOffset,s.ta.b.length/m.BYTES_PER_ELEMENT)}if(s.a!==void 0){const m=[];o.set(s.id,m);for(let c=0;c<s.a.length;c++)m.push(U(s.a[c],n,o,[...h,c]));return m}if(s.o!==void 0){const m={};o.set(s.id,m);for(const{k:c,v:l}of s.o)m[c]=U(l,n,o,[...h,c]);return m}if(s.h!==void 0){if(n===void 0)throw new Error("Unexpected handle");return n[s.h]}throw new Error(`Attempting to deserialize unexpected value${g(h)}: ${s}`)}function C(s,n){return w(s,n,{lastId:0,visited:new Map},[])}function w(s,n,o,h){const m=n(s);if("fallThrough"in m)s=m.fallThrough;else return m;if(typeof s=="symbol")return{v:"undefined"};if(Object.is(s,void 0))return{v:"undefined"};if(Object.is(s,null))return{v:"null"};if(Object.is(s,NaN))return{v:"NaN"};if(Object.is(s,1/0))return{v:"Infinity"};if(Object.is(s,-1/0))return{v:"-Infinity"};if(Object.is(s,-0))return{v:"-0"};if(typeof s=="boolean")return{b:s};if(typeof s=="number")return{n:s};if(typeof s=="string")return{s};if(typeof s=="bigint")return{bi:s.toString()};if(d(s))return{e:{n:s.name,m:s.message,s:s.stack||""}};if(_(s))return{d:s.toJSON()};if(f(s))return{u:s.toJSON()};if(u(s))return{r:{p:s.source,f:s.flags}};const c=a.get(s.constructor);if(c)return{ta:{b:Buffer.from(s.buffer,s.byteOffset,s.byteLength),k:c}};const l=o.visited.get(s);if(l)return{ref:l};if(Array.isArray(s)){const x=[],T=++o.lastId;o.visited.set(s,T);for(let b=0;b<s.length;++b)x.push(w(s[b],n,o,[...h,b]));return{a:x,id:T}}if(typeof s=="object"){const x=[],T=++o.lastId;o.visited.set(s,T);for(const b of Object.keys(s))x.push({k:b,v:w(s[b],n,o,[...h,b])});return{o:x,id:T}}throw new Error(`Attempting to serialize unexpected value${g(h)}: ${s}`)}function g(s){const n=s.map((o,h)=>typeof o=="string"?h?`.${o}`:o:`[${o}]`).join("");return n.length>0?` at position "${n}"`:""}function u(s){return s instanceof RegExp||Object.prototype.toString.call(s)==="[object RegExp]"}function _(s){return s instanceof Date||Object.prototype.toString.call(s)==="[object Date]"}function f(s){return s instanceof URL||Object.prototype.toString.call(s)==="[object URL]"}function d(s){const n=s?Object.getPrototypeOf(s):null;return s instanceof Error||(n==null?void 0:n.name)==="Error"||n&&d(n)}const v={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,bi64:BigInt64Array,bui64:BigUint64Array},a=new Map(Object.entries(v).map(([s,n])=>[n,s]));return Nl}var Rl,s_;function Pn(){if(s_)return Rl;s_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(d,v)=>{for(var a in v)t(d,a,{get:v[a],enumerable:!0})},V=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of i(v))!E.call(d,n)&&n!==a&&t(d,n,{get:()=>v[n],enumerable:!(s=r(v,n))||s.enumerable});return d},te=d=>V(t({},"__esModule",{value:!0}),d),P={};R(P,{TargetClosedError:()=>g,TimeoutError:()=>w,isTargetClosedError:()=>u,parseError:()=>f,serializeError:()=>_}),Rl=te(P);var e=No(),U=nr();class C extends Error{constructor(v){super(v),this.name=this.constructor.name}}class w extends C{}class g extends C{constructor(v,a){super((v||"Target page, context or browser has been closed")+(a||""))}}function u(d){return d instanceof g||d.name==="TargetClosedError"}function _(d){return(0,U.isError)(d)?{error:{message:d.message,stack:d.stack,name:d.name}}:{value:(0,e.serializeValue)(d,v=>({fallThrough:v}))}}function f(d){if(!d.error){if(d.value===void 0)throw new Error("Serialized error must have either an error or a value");return(0,e.parseSerializedValue)(d.value,void 0)}const v=new Error(d.error.message);return v.stack=d.error.stack||"",v.name=d.error.name,v}return Rl}var Ll,a_;function Tr(){if(a_)return Ll;a_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{SdkObject:()=>C,createInstrumentation:()=>g,createRootSdkObject:()=>w,serverSideCallMetadata:()=>u}),Ll=te(P);var e=Vr(),U=tn();class C extends e.EventEmitter{constructor(f,d,v){super(),this.guid=v||`${d||""}@${(0,U.createGuid)()}`,this.setMaxListeners(0),this.attribution={...f.attribution},this.instrumentation=f.instrumentation}}function w(){const _={attribution:{},instrumentation:g()},f=new C(_);return f.guid="",f}function g(){const _=new Map;return new Proxy({},{get:(f,d)=>typeof d!="string"?f[d]:d==="addListener"?(v,a)=>_.set(v,a):d==="removeListener"?v=>_.delete(v):d.startsWith("on")?async(v,...a)=>{var s;for(const[n,o]of _)(!o||v.attribution.context===o)&&await((s=n[d])==null?void 0:s.call(n,v,...a))}:f[d]})}function u(){return{id:"",startTime:0,endTime:0,type:"Internal",method:"",params:{},log:[],isServerSide:!0}}return Ll}var Dl,o_;function Dn(){if(o_)return Dl;o_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{ProtocolError:()=>U,isProtocolError:()=>C,isSessionClosedError:()=>w}),Dl=te(P);var e=pn();class U extends Error{constructor(u,_,f){super(),this.type=u,this.method=_,this.logs=f}setMessage(u){(0,e.rewriteErrorMessage)(this,`Protocol error (${this.method}): ${u}`)}browserLogMessage(){return this.logs?`
Browser logs:
`+this.logs:""}}function C(g){return g instanceof U}function w(g){return g instanceof U&&(g.type==="closed"||g.type==="crashed")}return Dl}var Ml,c_;function lf(){if(c_)return Ml;c_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{compressCallLog:()=>e,findRepeatedSubsequencesForTest:()=>C}),Ml=te(P);function e(w){const g=[];for(const u of U(w))for(let _=0;_<u.sequence.length;_++){const f=u.sequence[_],d=f.match(/^\s*/),v="  "+(d==null?void 0:d[0])||"",a=`${u.count} × `;u.count>1&&_===0?g.push(v+a+f.trim()):u.count>1?g.push(v+" ".repeat(a.length-2)+"- "+f.trim()):g.push(v+"- "+f.trim())}return g}function U(w){const g=w.length,u=[];let _=0;const f=(d,v)=>{if(d.length!==v.length)return!1;for(let a=0;a<d.length;a++)if(d[a]!==v[a])return!1;return!0};for(;_<g;){let d=1,v=[w[_]],a=1;for(let s=1;s<=g-_;s++){const n=w.slice(_,_+s);let o=1;for(;_+s*o<=g&&f(w.slice(_+s*(o-1),_+s*o),n);)o+=1;o-=1,o>1&&o*s>d*a&&(d=o,v=n,a=s)}u.push({sequence:v,count:d}),_+=a*d}return u}const C=U;return Ml}var Fl,l_;function bn(){if(l_)return Fl;l_=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},te=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!R.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},P=d=>te(r({},"__esModule",{value:!0}),d),e={};V(e,{ProgressController:()=>g,isAbortError:()=>f}),Fl=P(e);var U=Pn(),C=nr(),w=Fr();class g{constructor(v,a){this._forceAbortPromise=new w.ManualPromise,this._donePromise=new w.ManualPromise,this._cleanups=[],this._strictMode=!1,this._state="before",this._strictMode=!t.PLAYWRIGHT_LEGACY_TIMEOUTS,this.metadata=v,this.sdkObject=a,this.instrumentation=a.instrumentation,this._logName=a.logName||"api",this._forceAbortPromise.catch(s=>null)}setLogName(v){this._logName=v}async abort(v){this._state==="running"&&(v[_]=!0,this._state={error:v},this._forceAbortPromise.reject(v)),this._strictMode&&await this._donePromise}async run(v,a){(0,C.assert)(this._state==="before"),this._state="running";let s;const n=a?Math.min((0,C.monotonicTime)()+a,2147483647):0,o=new U.TimeoutError(`Timeout ${a}ms exceeded.`);let h;const m=()=>{if(!n)return;const l=()=>{this._state==="running"&&(o[_]=!0,this._state={error:o},this._forceAbortPromise.reject(o))},x=n-(0,C.monotonicTime)();x<=0?l():h=setTimeout(l,x)},c={log:l=>{this._state==="running"&&this.metadata.log.push(l),this.instrumentation.onCallLog(this.sdkObject,this.metadata,this._logName,l)},cleanupWhenAborted:l=>{if(this._strictMode){if(this._state!=="running")throw new Error("Internal error: cannot register cleanup after operation has finished.");this._cleanups.push(l);return}this._state==="running"?this._cleanups.push(l):u(typeof this._state=="object"?this._state.error:void 0,l)},metadata:this.metadata,race:l=>{const x=Array.isArray(l)?l:[l];return Promise.race([...x,this._forceAbortPromise])},raceWithCleanup:(l,x)=>c.race(l.then(T=>(this._state!=="running"?x(T):this._cleanups.push(()=>x(T)),T))),wait:async l=>{let x;const T=new Promise(b=>x=setTimeout(b,l));return c.race(T).finally(()=>clearTimeout(x))},legacyDisableTimeout:()=>{this._strictMode||clearTimeout(h)},legacyEnableTimeout:()=>{this._strictMode||m()},legacySetErrorHandler:l=>{this._strictMode||(s=l)}};m();try{const l=v(c),x=this._strictMode?await l:await Promise.race([l,this._forceAbortPromise]);return this._state="finished",x}catch(l){if(this._state={error:l},await Promise.all(this._cleanups.splice(0).map(x=>u(l,x))),s)return s(l);throw l}finally{clearTimeout(h),this._donePromise.resolve()}}}async function u(d,v){try{await v(d)}catch{}}const _=Symbol("kAbortError");function f(d){return!!d[_]}return Fl}var Bl,u_;function $r(){if(u_)return Bl;u_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(T,b)=>{for(var p in b)t(T,p,{get:b[p],enumerable:!0})},V=(T,b,p,O)=>{if(b&&typeof b=="object"||typeof b=="function")for(let z of i(b))!E.call(T,z)&&z!==p&&t(T,z,{get:()=>b[z],enumerable:!(O=r(b,z))||O.enumerable});return T},te=T=>V(t({},"__esModule",{value:!0}),T),P={};R(P,{Dispatcher:()=>m,DispatcherConnection:()=>l,RootDispatcher:()=>c,setMaxDispatchersForTest:()=>o}),Bl=te(P);var e=Vr(),U=qr(),C=Io(),w=nr(),g=Xn(),u=Pn(),_=Tr(),f=Dn(),d=lf(),v=us(),a=bn();const s=(0,C.createMetadataValidator)();let n;function o(T){n=T}function h(T){return n??{JSHandle:1e5,ElementHandle:1e5}[T]??1e4}class m extends e.EventEmitter{constructor(b,p,O,z,$){super(),this._dispatchers=new Map,this._disposed=!1,this._eventListeners=[],this._activeProgressControllers=new Set,this.connection=b instanceof l?b:b.connection,this._parent=b instanceof l?void 0:b;const q=p.guid;this._guid=q,this._type=O,this._object=p,this._gcBucket=$??O,this.connection.registerDispatcher(this),this._parent&&((0,w.assert)(!this._parent._dispatchers.has(q)),this._parent._dispatchers.set(q,this)),this._parent&&this.connection.sendCreate(this._parent,O,q,z),this.connection.maybeDisposeStaleDispatchers(this._gcBucket)}parentScope(){return this._parent}addObjectListener(b,p){this._eventListeners.push(U.eventsHelper.addEventListener(this._object,b,p))}adopt(b){if(b._parent===this)return;b._parent._dispatchers.delete(b._guid),this._dispatchers.set(b._guid,b),b._parent=this,this.connection.sendAdopt(this,b)}async _runCommand(b,p,O){const z=new a.ProgressController(b,this._object);this._activeProgressControllers.add(z);try{return await z.run($=>this[p](O,$),O==null?void 0:O.timeout)}finally{this._activeProgressControllers.delete(z)}}_dispatchEvent(b,p){if(this._disposed){if((0,g.isUnderTest)())throw new Error(`${this._guid} is sending "${String(b)}" event after being disposed`);return}this.connection.sendEvent(this,b,p)}_dispose(b){this._disposeRecursively(new u.TargetClosedError),this.connection.sendDispose(this,b)}_onDispose(){}async stopPendingOperations(b){const p=[],O=z=>{p.push(...z._activeProgressControllers);for(const $ of[...z._dispatchers.values()])O($)};O(this),await Promise.all(p.map(z=>z.abort(b)))}_disposeRecursively(b){var O;(0,w.assert)(!this._disposed,`${this._guid} is disposed more than once`);for(const z of this._activeProgressControllers)z.metadata.potentiallyClosesScope||z.abort(b).catch(()=>{});this._onDispose(),this._disposed=!0,U.eventsHelper.removeEventListeners(this._eventListeners),(O=this._parent)==null||O._dispatchers.delete(this._guid);const p=this.connection._dispatchersByBucket.get(this._gcBucket);p==null||p.delete(this._guid),this.connection._dispatcherByGuid.delete(this._guid),this.connection._dispatcherByObject.delete(this._object);for(const z of[...this._dispatchers.values()])z._disposeRecursively(b);this._dispatchers.clear()}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._dispatchers.values()).map(b=>b._debugScopeState())}}async waitForEventInfo(){}}class c extends m{constructor(b,p){super(b,(0,_.createRootSdkObject)(),"Root",{}),this.createPlaywright=p,this._initialized=!1}async initialize(b,p){return(0,w.assert)(this.createPlaywright),(0,w.assert)(!this._initialized),this._initialized=!0,{playwright:await this.createPlaywright(this,b)}}}class l{constructor(b){this._dispatcherByGuid=new Map,this._dispatcherByObject=new Map,this._dispatchersByBucket=new Map,this.onmessage=p=>{},this._waitOperations=new Map,this._isLocal=!!b}sendEvent(b,p,O){O=(0,C.findValidator)(b._type,p,"Event")(O,"",this._validatorToWireContext()),this.onmessage({guid:b._guid,method:p,params:O})}sendCreate(b,p,O,z){z=(0,C.findValidator)(p,"","Initializer")(z,"",this._validatorToWireContext()),this.onmessage({guid:b._guid,method:"__create__",params:{type:p,initializer:z,guid:O}})}sendAdopt(b,p){this.onmessage({guid:b._guid,method:"__adopt__",params:{guid:p._guid}})}sendDispose(b,p){this.onmessage({guid:b._guid,method:"__dispose__",params:{reason:p}})}_validatorToWireContext(){return{tChannelImpl:this._tChannelImplToWire.bind(this),binary:this._isLocal?"buffer":"toBase64",isUnderTest:g.isUnderTest}}_validatorFromWireContext(){return{tChannelImpl:this._tChannelImplFromWire.bind(this),binary:this._isLocal?"buffer":"fromBase64",isUnderTest:g.isUnderTest}}_tChannelImplFromWire(b,p,O,z){if(p&&typeof p=="object"&&typeof p.guid=="string"){const $=p.guid,q=this._dispatcherByGuid.get($);if(!q)throw new C.ValidationError(`${O}: no object with guid ${$}`);if(b!=="*"&&!b.includes(q._type))throw new C.ValidationError(`${O}: object with guid ${$} has type ${q._type}, expected ${b.toString()}`);return q}throw new C.ValidationError(`${O}: expected guid for ${b.toString()}`)}_tChannelImplToWire(b,p,O,z){if(p instanceof m){if(b!=="*"&&!b.includes(p._type))throw new C.ValidationError(`${O}: dispatcher with guid ${p._guid} has type ${p._type}, expected ${b.toString()}`);return{guid:p._guid}}throw new C.ValidationError(`${O}: expected dispatcher ${b.toString()}`)}existingDispatcher(b){return this._dispatcherByObject.get(b)}registerDispatcher(b){(0,w.assert)(!this._dispatcherByGuid.has(b._guid)),this._dispatcherByGuid.set(b._guid,b),this._dispatcherByObject.set(b._object,b);let p=this._dispatchersByBucket.get(b._gcBucket);p||(p=new Set,this._dispatchersByBucket.set(b._gcBucket,p)),p.add(b._guid)}maybeDisposeStaleDispatchers(b){const p=h(b),O=this._dispatchersByBucket.get(b);if(!O||O.size<=p)return;const z=[...O],$=p/10|0;this._dispatchersByBucket.set(b,new Set(z.slice($)));for(let q=0;q<$;++q){const J=this._dispatcherByGuid.get(z[q]);J&&J._dispose("gc")}}async dispatch(b){var j,y,I,D,ie,he;const{id:p,guid:O,method:z,params:$,metadata:q}=b,J=this._dispatcherByGuid.get(O);if(!J){this.onmessage({id:p,error:(0,u.serializeError)(new u.TargetClosedError)});return}let le,_e;try{const me=(0,C.findValidator)(J._type,z,"Params"),ye=this._validatorFromWireContext();if(le=me($,"",ye),_e=s(q,"",ye),typeof J[z]!="function")throw new Error(`Mismatching dispatcher: "${J._type}" does not implement "${z}"`)}catch(me){this.onmessage({id:p,error:(0,u.serializeError)(me)});return}(j=v.methodMetainfo.get(J._type+"."+z))!=null&&j.internal&&(_e.internal=!0);const ge=J._object,ne={id:`call@${p}`,location:_e.location,title:_e.title,internal:_e.internal,stepId:_e.stepId,objectId:ge.guid,pageId:(I=(y=ge.attribution)==null?void 0:y.page)==null?void 0:I.guid,frameId:(ie=(D=ge.attribution)==null?void 0:D.frame)==null?void 0:ie.guid,startTime:(0,w.monotonicTime)(),endTime:0,type:J._type,method:z,params:$||{},log:[]};if((he=$==null?void 0:$.info)!=null&&he.waitId){const me=$.info;switch(me.phase){case"before":{this._waitOperations.set(me.waitId,ne),await ge.instrumentation.onBeforeCall(ge,ne),this.onmessage({id:p});return}case"log":{const ye=this._waitOperations.get(me.waitId);ye.log.push(me.message),ge.instrumentation.onCallLog(ge,ye,"api",me.message),this.onmessage({id:p});return}case"after":{const ye=this._waitOperations.get(me.waitId);ye.endTime=(0,w.monotonicTime)(),ye.error=me.error?{error:{name:"Error",message:me.error}}:void 0,this._waitOperations.delete(me.waitId),await ge.instrumentation.onAfterCall(ge,ye),this.onmessage({id:p});return}}}await ge.instrumentation.onBeforeCall(ge,ne);const S={id:p};try{const me=await J._runCommand(ne,z,le),ye=(0,C.findValidator)(J._type,z,"Result");S.result=ye(me,"",this._validatorToWireContext()),ne.result=me}catch(me){if((0,u.isTargetClosedError)(me)){const ye=x(ge);ye&&(0,w.rewriteErrorMessage)(me,ye)}else(0,f.isProtocolError)(me)&&(me.type==="closed"?me=new u.TargetClosedError(x(ge),me.browserLogMessage()):me.type==="crashed"&&(0,w.rewriteErrorMessage)(me,"Target crashed "+me.browserLogMessage()));S.error=(0,u.serializeError)(me),ne.error=S.error}finally{ne.endTime=(0,w.monotonicTime)(),await ge.instrumentation.onAfterCall(ge,ne)}S.error&&(S.log=(0,d.compressCallLog)(ne.log)),this.onmessage(S)}}function x(T){var b,p,O;return((b=T.attribution.page)==null?void 0:b.closeReason)||((p=T.attribution.context)==null?void 0:p._closeReason)||((O=T.attribution.browser)==null?void 0:O._closeReason)}return Bl}var jl,d_;function fO(){if(d_)return jl;d_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),jl=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/clock.ts
var clock_exports = {};
__export(clock_exports, {
  ClockController: () => ClockController,
  createClock: () => createClock,
  inject: () => inject,
  install: () => install
});
module.exports = __toCommonJS(clock_exports);
var ClockController = class {
  constructor(embedder) {
    this._duringTick = false;
    this._uniqueTimerId = idCounterStart;
    this.disposables = [];
    this._log = [];
    this._timers = /* @__PURE__ */ new Map();
    this._now = { time: asWallTime(0), isFixedTime: false, ticks: 0, origin: asWallTime(-1) };
    this._embedder = embedder;
  }
  uninstall() {
    this.disposables.forEach((dispose) => dispose());
    this.disposables.length = 0;
  }
  now() {
    this._replayLogOnce();
    this._syncRealTime();
    return this._now.time;
  }
  install(time) {
    this._replayLogOnce();
    this._innerSetTime(asWallTime(time));
  }
  setSystemTime(time) {
    this._replayLogOnce();
    this._innerSetTime(asWallTime(time));
  }
  setFixedTime(time) {
    this._replayLogOnce();
    this._innerSetFixedTime(asWallTime(time));
  }
  performanceNow() {
    this._replayLogOnce();
    this._syncRealTime();
    return this._now.ticks;
  }
  _syncRealTime() {
    if (!this._realTime)
      return;
    const now = this._embedder.performanceNow();
    const sinceLastSync = now - this._realTime.lastSyncTicks;
    if (sinceLastSync > 0) {
      this._advanceNow(shiftTicks(this._now.ticks, sinceLastSync));
      this._realTime.lastSyncTicks = now;
    }
  }
  _innerSetTime(time) {
    this._now.time = time;
    this._now.isFixedTime = false;
    if (this._now.origin < 0)
      this._now.origin = this._now.time;
  }
  _innerSetFixedTime(time) {
    this._innerSetTime(time);
    this._now.isFixedTime = true;
  }
  _advanceNow(to) {
    if (!this._now.isFixedTime)
      this._now.time = asWallTime(this._now.time + to - this._now.ticks);
    this._now.ticks = to;
  }
  async log(type, time, param) {
    this._log.push({ type, time, param });
  }
  async runFor(ticks) {
    this._replayLogOnce();
    if (ticks < 0)
      throw new TypeError("Negative ticks are not supported");
    await this._runTo(shiftTicks(this._now.ticks, ticks));
  }
  async _runTo(to) {
    to = Math.ceil(to);
    if (this._now.ticks > to)
      return;
    let firstException;
    while (true) {
      const result = await this._callFirstTimer(to);
      if (!result.timerFound)
        break;
      firstException = firstException || result.error;
    }
    this._advanceNow(to);
    if (firstException)
      throw firstException;
  }
  async pauseAt(time) {
    this._replayLogOnce();
    this._innerPause();
    const toConsume = time - this._now.time;
    await this._innerFastForwardTo(shiftTicks(this._now.ticks, toConsume));
    return toConsume;
  }
  _innerPause() {
    this._realTime = void 0;
    this._updateRealTimeTimer();
  }
  resume() {
    this._replayLogOnce();
    this._innerResume();
  }
  _innerResume() {
    const now = this._embedder.performanceNow();
    this._realTime = { startTicks: now, lastSyncTicks: now };
    this._updateRealTimeTimer();
  }
  _updateRealTimeTimer() {
    var _a;
    if (!this._realTime) {
      (_a = this._currentRealTimeTimer) == null ? void 0 : _a.dispose();
      this._currentRealTimeTimer = void 0;
      return;
    }
    const firstTimer = this._firstTimer();
    const callAt = Math.min(firstTimer ? firstTimer.callAt : this._now.ticks + maxTimeout, this._now.ticks + 100);
    if (this._currentRealTimeTimer && this._currentRealTimeTimer.callAt < callAt)
      return;
    if (this._currentRealTimeTimer) {
      this._currentRealTimeTimer.dispose();
      this._currentRealTimeTimer = void 0;
    }
    this._currentRealTimeTimer = {
      callAt,
      dispose: this._embedder.setTimeout(() => {
        this._currentRealTimeTimer = void 0;
        this._syncRealTime();
        void this._runTo(this._now.ticks).catch((e) => console.error(e)).then(() => this._updateRealTimeTimer());
      }, callAt - this._now.ticks)
    };
  }
  async fastForward(ticks) {
    this._replayLogOnce();
    await this._innerFastForwardTo(shiftTicks(this._now.ticks, ticks | 0));
  }
  async _innerFastForwardTo(to) {
    if (to < this._now.ticks)
      throw new Error("Cannot fast-forward to the past");
    for (const timer of this._timers.values()) {
      if (to > timer.callAt)
        timer.callAt = to;
    }
    await this._runTo(to);
  }
  addTimer(options) {
    this._replayLogOnce();
    if (options.type === "AnimationFrame" /* AnimationFrame */ && !options.func)
      throw new Error("Callback must be provided to requestAnimationFrame calls");
    if (options.type === "IdleCallback" /* IdleCallback */ && !options.func)
      throw new Error("Callback must be provided to requestIdleCallback calls");
    if (["Timeout" /* Timeout */, "Interval" /* Interval */].includes(options.type) && !options.func && options.delay === void 0)
      throw new Error("Callback must be provided to timer calls");
    let delay = options.delay ? +options.delay : 0;
    if (!Number.isFinite(delay))
      delay = 0;
    delay = delay > maxTimeout ? 1 : delay;
    delay = Math.max(0, delay);
    const timer = {
      type: options.type,
      func: options.func,
      args: options.args || [],
      delay,
      callAt: shiftTicks(this._now.ticks, delay || (this._duringTick ? 1 : 0)),
      createdAt: this._now.ticks,
      id: this._uniqueTimerId++,
      error: new Error()
    };
    this._timers.set(timer.id, timer);
    if (this._realTime)
      this._updateRealTimeTimer();
    return timer.id;
  }
  countTimers() {
    return this._timers.size;
  }
  _firstTimer(beforeTick) {
    let firstTimer = null;
    for (const timer of this._timers.values()) {
      const isInRange = beforeTick === void 0 || timer.callAt <= beforeTick;
      if (isInRange && (!firstTimer || compareTimers(firstTimer, timer) === 1))
        firstTimer = timer;
    }
    return firstTimer;
  }
  _takeFirstTimer(beforeTick) {
    const timer = this._firstTimer(beforeTick);
    if (!timer)
      return null;
    this._advanceNow(timer.callAt);
    if (timer.type === "Interval" /* Interval */)
      timer.callAt = shiftTicks(timer.callAt, timer.delay);
    else
      this._timers.delete(timer.id);
    return timer;
  }
  async _callFirstTimer(beforeTick) {
    const timer = this._takeFirstTimer(beforeTick);
    if (!timer)
      return { timerFound: false };
    this._duringTick = true;
    try {
      if (typeof timer.func !== "function") {
        let error2;
        try {
          (() => {
            globalThis.eval(timer.func);
          })();
        } catch (e) {
          error2 = e;
        }
        await new Promise((f) => this._embedder.setTimeout(f));
        return { timerFound: true, error: error2 };
      }
      let args = timer.args;
      if (timer.type === "AnimationFrame" /* AnimationFrame */)
        args = [this._now.ticks];
      else if (timer.type === "IdleCallback" /* IdleCallback */)
        args = [{ didTimeout: false, timeRemaining: () => 0 }];
      let error;
      try {
        timer.func.apply(null, args);
      } catch (e) {
        error = e;
      }
      await new Promise((f) => this._embedder.setTimeout(f));
      return { timerFound: true, error };
    } finally {
      this._duringTick = false;
    }
  }
  getTimeToNextFrame() {
    return 16 - this._now.ticks % 16;
  }
  clearTimer(timerId, type) {
    this._replayLogOnce();
    if (!timerId) {
      return;
    }
    const id = Number(timerId);
    if (Number.isNaN(id) || id < idCounterStart) {
      const handlerName = getClearHandler(type);
      new Error(\`Clock: \${handlerName} was invoked to clear a native timer instead of one created by the clock library.\`);
    }
    const timer = this._timers.get(id);
    if (timer) {
      if (timer.type === type || timer.type === "Timeout" && type === "Interval" || timer.type === "Interval" && type === "Timeout") {
        this._timers.delete(id);
      } else {
        const clear = getClearHandler(type);
        const schedule = getScheduleHandler(timer.type);
        throw new Error(
          \`Cannot clear timer: timer created with \${schedule}() but cleared with \${clear}()\`
        );
      }
    }
  }
  _replayLogOnce() {
    if (!this._log.length)
      return;
    let lastLogTime = -1;
    let isPaused = false;
    for (const { type, time, param } of this._log) {
      if (!isPaused && lastLogTime !== -1)
        this._advanceNow(shiftTicks(this._now.ticks, time - lastLogTime));
      lastLogTime = time;
      if (type === "install") {
        this._innerSetTime(asWallTime(param));
      } else if (type === "fastForward" || type === "runFor") {
        this._advanceNow(shiftTicks(this._now.ticks, param));
      } else if (type === "pauseAt") {
        isPaused = true;
        this._innerPause();
        this._innerSetTime(asWallTime(param));
      } else if (type === "resume") {
        this._innerResume();
        isPaused = false;
      } else if (type === "setFixedTime") {
        this._innerSetFixedTime(asWallTime(param));
      } else if (type === "setSystemTime") {
        this._innerSetTime(asWallTime(param));
      }
    }
    if (!isPaused && lastLogTime > 0)
      this._advanceNow(shiftTicks(this._now.ticks, this._embedder.dateNow() - lastLogTime));
    this._log.length = 0;
  }
};
function mirrorDateProperties(target, source) {
  for (const prop in source) {
    if (source.hasOwnProperty(prop))
      target[prop] = source[prop];
  }
  target.toString = () => source.toString();
  target.prototype = source.prototype;
  target.parse = source.parse;
  target.UTC = source.UTC;
  target.prototype.toUTCString = source.prototype.toUTCString;
  target.isFake = true;
  return target;
}
function createDate(clock, NativeDate) {
  function ClockDate(year, month, date, hour, minute, second, ms) {
    if (!(this instanceof ClockDate))
      return new NativeDate(clock.now()).toString();
    switch (arguments.length) {
      case 0:
        return new NativeDate(clock.now());
      case 1:
        return new NativeDate(year);
      case 2:
        return new NativeDate(year, month);
      case 3:
        return new NativeDate(year, month, date);
      case 4:
        return new NativeDate(year, month, date, hour);
      case 5:
        return new NativeDate(year, month, date, hour, minute);
      case 6:
        return new NativeDate(
          year,
          month,
          date,
          hour,
          minute,
          second
        );
      default:
        return new NativeDate(
          year,
          month,
          date,
          hour,
          minute,
          second,
          ms
        );
    }
  }
  ClockDate.now = () => clock.now();
  return mirrorDateProperties(ClockDate, NativeDate);
}
function createIntl(clock, NativeIntl) {
  const ClockIntl = {};
  for (const key of Object.getOwnPropertyNames(NativeIntl))
    ClockIntl[key] = NativeIntl[key];
  ClockIntl.DateTimeFormat = function(...args) {
    const realFormatter = new NativeIntl.DateTimeFormat(...args);
    const formatter = {
      formatRange: realFormatter.formatRange.bind(realFormatter),
      formatRangeToParts: realFormatter.formatRangeToParts.bind(realFormatter),
      resolvedOptions: realFormatter.resolvedOptions.bind(realFormatter),
      format: (date) => realFormatter.format(date || clock.now()),
      formatToParts: (date) => realFormatter.formatToParts(date || clock.now())
    };
    return formatter;
  };
  ClockIntl.DateTimeFormat.prototype = Object.create(
    NativeIntl.DateTimeFormat.prototype
  );
  ClockIntl.DateTimeFormat.supportedLocalesOf = NativeIntl.DateTimeFormat.supportedLocalesOf;
  return ClockIntl;
}
function compareTimers(a, b) {
  if (a.callAt < b.callAt)
    return -1;
  if (a.callAt > b.callAt)
    return 1;
  if (a.type === "Immediate" /* Immediate */ && b.type !== "Immediate" /* Immediate */)
    return -1;
  if (a.type !== "Immediate" /* Immediate */ && b.type === "Immediate" /* Immediate */)
    return 1;
  if (a.createdAt < b.createdAt)
    return -1;
  if (a.createdAt > b.createdAt)
    return 1;
  if (a.id < b.id)
    return -1;
  if (a.id > b.id)
    return 1;
}
var maxTimeout = Math.pow(2, 31) - 1;
var idCounterStart = 1e12;
function platformOriginals(globalObject) {
  const raw = {
    setTimeout: globalObject.setTimeout,
    clearTimeout: globalObject.clearTimeout,
    setInterval: globalObject.setInterval,
    clearInterval: globalObject.clearInterval,
    requestAnimationFrame: globalObject.requestAnimationFrame ? globalObject.requestAnimationFrame : void 0,
    cancelAnimationFrame: globalObject.cancelAnimationFrame ? globalObject.cancelAnimationFrame : void 0,
    requestIdleCallback: globalObject.requestIdleCallback ? globalObject.requestIdleCallback : void 0,
    cancelIdleCallback: globalObject.cancelIdleCallback ? globalObject.cancelIdleCallback : void 0,
    Date: globalObject.Date,
    performance: globalObject.performance,
    Intl: globalObject.Intl
  };
  const bound = { ...raw };
  for (const key of Object.keys(bound)) {
    if (key !== "Date" && typeof bound[key] === "function")
      bound[key] = bound[key].bind(globalObject);
  }
  return { raw, bound };
}
function getScheduleHandler(type) {
  if (type === "IdleCallback" || type === "AnimationFrame")
    return \`request\${type}\`;
  return \`set\${type}\`;
}
function createApi(clock, originals) {
  return {
    setTimeout: (func, timeout, ...args) => {
      const delay = timeout ? +timeout : timeout;
      return clock.addTimer({
        type: "Timeout" /* Timeout */,
        func,
        args,
        delay
      });
    },
    clearTimeout: (timerId) => {
      if (timerId)
        clock.clearTimer(timerId, "Timeout" /* Timeout */);
    },
    setInterval: (func, timeout, ...args) => {
      const delay = timeout ? +timeout : timeout;
      return clock.addTimer({
        type: "Interval" /* Interval */,
        func,
        args,
        delay
      });
    },
    clearInterval: (timerId) => {
      if (timerId)
        return clock.clearTimer(timerId, "Interval" /* Interval */);
    },
    requestAnimationFrame: (callback) => {
      return clock.addTimer({
        type: "AnimationFrame" /* AnimationFrame */,
        func: callback,
        delay: clock.getTimeToNextFrame()
      });
    },
    cancelAnimationFrame: (timerId) => {
      if (timerId)
        return clock.clearTimer(timerId, "AnimationFrame" /* AnimationFrame */);
    },
    requestIdleCallback: (callback, options) => {
      let timeToNextIdlePeriod = 0;
      if (clock.countTimers() > 0)
        timeToNextIdlePeriod = 50;
      return clock.addTimer({
        type: "IdleCallback" /* IdleCallback */,
        func: callback,
        delay: (options == null ? void 0 : options.timeout) ? Math.min(options == null ? void 0 : options.timeout, timeToNextIdlePeriod) : timeToNextIdlePeriod
      });
    },
    cancelIdleCallback: (timerId) => {
      if (timerId)
        return clock.clearTimer(timerId, "IdleCallback" /* IdleCallback */);
    },
    Intl: originals.Intl ? createIntl(clock, originals.Intl) : void 0,
    Date: createDate(clock, originals.Date),
    performance: originals.performance ? fakePerformance(clock, originals.performance) : void 0
  };
}
function getClearHandler(type) {
  if (type === "IdleCallback" || type === "AnimationFrame")
    return \`cancel\${type}\`;
  return \`clear\${type}\`;
}
function fakePerformance(clock, performance) {
  const result = {
    now: () => clock.performanceNow()
  };
  result.__defineGetter__("timeOrigin", () => clock._now.origin || 0);
  for (const key of Object.keys(performance.__proto__)) {
    if (key === "now" || key === "timeOrigin")
      continue;
    if (key === "getEntries" || key === "getEntriesByName" || key === "getEntriesByType")
      result[key] = () => [];
    else
      result[key] = () => {
      };
  }
  return result;
}
function createClock(globalObject) {
  const originals = platformOriginals(globalObject);
  const embedder = {
    dateNow: () => originals.raw.Date.now(),
    performanceNow: () => Math.ceil(originals.raw.performance.now()),
    setTimeout: (task, timeout) => {
      const timerId = originals.bound.setTimeout(task, timeout);
      return () => originals.bound.clearTimeout(timerId);
    },
    setInterval: (task, delay) => {
      const intervalId = originals.bound.setInterval(task, delay);
      return () => originals.bound.clearInterval(intervalId);
    }
  };
  const clock = new ClockController(embedder);
  const api = createApi(clock, originals.bound);
  return { clock, api, originals: originals.raw };
}
function install(globalObject, config = {}) {
  var _a, _b;
  if ((_a = globalObject.Date) == null ? void 0 : _a.isFake) {
    throw new TypeError(\`Can't install fake timers twice on the same global object.\`);
  }
  const { clock, api, originals } = createClock(globalObject);
  const toFake = ((_b = config.toFake) == null ? void 0 : _b.length) ? config.toFake : Object.keys(originals);
  for (const method of toFake) {
    if (method === "Date") {
      globalObject.Date = mirrorDateProperties(api.Date, globalObject.Date);
    } else if (method === "Intl") {
      globalObject.Intl = api[method];
    } else if (method === "performance") {
      globalObject.performance = api[method];
      const kEventTimeStamp = Symbol("playwrightEventTimeStamp");
      Object.defineProperty(Event.prototype, "timeStamp", {
        get() {
          var _a2;
          if (!this[kEventTimeStamp])
            this[kEventTimeStamp] = (_a2 = api.performance) == null ? void 0 : _a2.now();
          return this[kEventTimeStamp];
        }
      });
    } else {
      globalObject[method] = (...args) => {
        return api[method].apply(api, args);
      };
    }
    clock.disposables.push(() => {
      globalObject[method] = originals[method];
    });
  }
  return { clock, api, originals };
}
function inject(globalObject) {
  const builtins = platformOriginals(globalObject).bound;
  const { clock: controller } = install(globalObject);
  controller.resume();
  return {
    controller,
    builtins
  };
}
function asWallTime(n) {
  return n;
}
function shiftTicks(ticks, ms) {
  return ticks + ms;
}
`;return jl}var Hl,h_;function mO(){if(h_)return Hl;h_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(f,d)=>{for(var v in d)r(f,v,{get:d[v],enumerable:!0})},P=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of E(d))!V.call(f,s)&&s!==v&&r(f,s,{get:()=>d[s],enumerable:!(a=i(d,s))||a.enumerable});return f},e=(f,d,v)=>(v=f!=null?t(R(f)):{},P(!f||!f.__esModule?r(v,"default",{value:f,enumerable:!0}):v,f)),U=f=>P(r({},"__esModule",{value:!0}),f),C={};te(C,{Clock:()=>g}),Hl=U(C);var w=e(fO());class g{constructor(d){this._initScripts=[],this._browserContext=d}async resetForReuse(){await this._browserContext.removeInitScripts(this._initScripts),this._initScripts=[]}async fastForward(d,v){await this._installIfNeeded(d);const a=u(v);this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('fastForward', ${Date.now()}, ${a})`)),await d.race(this._evaluateInFrames(`globalThis.__pwClock.controller.fastForward(${a})`))}async install(d,v){await this._installIfNeeded(d);const a=v!==void 0?_(v):Date.now();this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('install', ${Date.now()}, ${a})`)),await d.race(this._evaluateInFrames(`globalThis.__pwClock.controller.install(${a})`))}async pauseAt(d,v){await this._installIfNeeded(d);const a=_(v);this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('pauseAt', ${Date.now()}, ${a})`)),await d.race(this._evaluateInFrames(`globalThis.__pwClock.controller.pauseAt(${a})`))}resumeNoReply(){if(!this._initScripts.length)return;(async()=>{this._initScripts.push(await this._browserContext.addInitScript(void 0,`globalThis.__pwClock.controller.log('resume', ${Date.now()})`)),await this._evaluateInFrames("globalThis.__pwClock.controller.resume()")})().catch(()=>{})}async resume(d){await this._installIfNeeded(d),this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('resume', ${Date.now()})`)),await d.race(this._evaluateInFrames("globalThis.__pwClock.controller.resume()"))}async setFixedTime(d,v){await this._installIfNeeded(d);const a=_(v);this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('setFixedTime', ${Date.now()}, ${a})`)),await d.race(this._evaluateInFrames(`globalThis.__pwClock.controller.setFixedTime(${a})`))}async setSystemTime(d,v){await this._installIfNeeded(d);const a=_(v);this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('setSystemTime', ${Date.now()}, ${a})`)),await d.race(this._evaluateInFrames(`globalThis.__pwClock.controller.setSystemTime(${a})`))}async runFor(d,v){await this._installIfNeeded(d);const a=u(v);this._initScripts.push(await this._browserContext.addInitScript(d,`globalThis.__pwClock.controller.log('runFor', ${Date.now()}, ${a})`)),await d.race(this._evaluateInFrames(`globalThis.__pwClock.controller.runFor(${a})`))}async _installIfNeeded(d){if(this._initScripts.length)return;const v=`(() => {
      const module = {};
      ${w.source}
      if (!globalThis.__pwClock)
        globalThis.__pwClock = (module.exports.inject())(globalThis);
    })();`,a=await this._browserContext.addInitScript(d,v);await d.race(this._evaluateInFrames(v)),this._initScripts.push(a)}async _evaluateInFrames(d){await this._browserContext.safeNonStallingEvaluateInAllFrames(d,"main",{throwOnJSErrors:!0})}}function u(f){if(typeof f=="number")return f;if(!f)return 0;const d=f,v=d.split(":"),a=v.length;let s=a,n=0,o;if(a>3||!/^(\d\d:){0,2}\d\d?$/.test(d))throw new Error("Clock only understands numbers, 'mm:ss' and 'hh:mm:ss'");for(;s--;){if(o=parseInt(v[s],10),o>=60)throw new Error(`Invalid time ${d}`);n+=o*Math.pow(60,a-s-1)}return n*1e3}function _(f){if(!f)return 0;if(typeof f=="number")return f;const d=new Date(f);if(!isFinite(d.getTime()))throw new Error(`Invalid date: ${f}`);return d.getTime()}return Hl}var Ul,p_;function ry(){if(p_)return Ul;p_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(a,s)=>{for(var n in s)t(a,n,{get:s[n],enumerable:!0})},V=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of i(s))!E.call(a,h)&&h!==n&&t(a,h,{get:()=>s[h],enumerable:!(o=r(s,h))||o.enumerable});return a},te=a=>V(t({},"__esModule",{value:!0}),a),P={};R(P,{Debugger:()=>u,shouldSlowMo:()=>d}),Ul=te(P);var e=Vr(),U=nr(),C=Ir(),w=us();const g=Symbol("Debugger"),v=class v extends e.EventEmitter{constructor(s){super(),this._pauseOnNextStatement=!1,this._pausedCallsMetadata=new Map,this._muted=!1,this._context=s,this._context[g]=this,this._enabled=(0,U.debugMode)()==="inspector",this._enabled&&this.pauseOnNextStatement(),s.instrumentation.addListener(this,s),this._context.once(C.BrowserContext.Events.Close,()=>{this._context.instrumentation.removeListener(this)}),this._slowMo=this._context._browser.options.slowMo}async setMuted(s){this._muted=s}async onBeforeCall(s,n){this._muted||(_(s,n)||this._pauseOnNextStatement&&f(n))&&await this.pause(s,n)}async _doSlowMo(){await new Promise(s=>setTimeout(s,this._slowMo))}async onAfterCall(s,n){this._slowMo&&d(n)&&await this._doSlowMo()}async onBeforeInputAction(s,n){this._muted||this._enabled&&this._pauseOnNextStatement&&await this.pause(s,n)}async pause(s,n){if(this._muted)return;this._enabled=!0,n.pauseStartTime=(0,U.monotonicTime)();const o=new Promise(h=>{this._pausedCallsMetadata.set(n,{resolve:h,sdkObject:s})});return this.emit(v.Events.PausedStateChanged),o}resume(s){if(!this.isPaused())return;this._pauseOnNextStatement=s;const n=(0,U.monotonicTime)();for(const[o,{resolve:h}]of this._pausedCallsMetadata)o.pauseEndTime=n,h();this._pausedCallsMetadata.clear(),this.emit(v.Events.PausedStateChanged)}pauseOnNextStatement(){this._pauseOnNextStatement=!0}isPaused(s){return s?this._pausedCallsMetadata.has(s):!!this._pausedCallsMetadata.size}pausedDetails(){const s=[];for(const[n,{sdkObject:o}]of this._pausedCallsMetadata)s.push({metadata:n,sdkObject:o});return s}};v.Events={PausedStateChanged:"pausedstatechanged"};let u=v;function _(a,s){var n;return a.attribution.playwright.options.isServer||!((n=a.attribution.browser)!=null&&n.options.headful)&&!(0,U.isUnderTest)()?!1:s.method==="pause"}function f(a){if(a.internal)return!1;if(a.method==="close")return!0;if(a.method==="waitForSelector"||a.method==="waitForEventInfo"||a.method==="querySelector"||a.method==="querySelectorAll")return!1;const s=a.type+"."+a.method,n=w.methodMetainfo.get(s);return n!=null&&n.internal?!1:!!(n!=null&&n.snapshot)&&!n.pausesBeforeInput}function d(a){const s=w.methodMetainfo.get(a.type+"."+a.method);return!!(s!=null&&s.slowMo)}return Ul}var ql,f_;function Ks(){if(f_)return ql;f_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{Dialog:()=>C,DialogManager:()=>w}),ql=te(P);var e=nr(),U=Tr();class C extends U.SdkObject{constructor(u,_,f,d,v){super(u,"dialog"),this._handled=!1,this._page=u,this._type=_,this._message=f,this._onHandle=d,this._defaultValue=v||""}page(){return this._page}type(){return this._type}message(){return this._message}defaultValue(){return this._defaultValue}async accept(u){(0,e.assert)(!this._handled,"Cannot accept dialog which is already handled!"),this._handled=!0,this._page.browserContext.dialogManager.dialogWillClose(this),await this._onHandle(!0,u)}async dismiss(){(0,e.assert)(!this._handled,"Cannot dismiss dialog which is already handled!"),this._handled=!0,this._page.browserContext.dialogManager.dialogWillClose(this),await this._onHandle(!1)}async close(){this._type==="beforeunload"?await this.accept():await this.dismiss()}}class w{constructor(u){this._dialogHandlers=new Set,this._openedDialogs=new Set,this._instrumentation=u}dialogDidOpen(u){for(const f of u.page().frameManager.frames())f._invalidateNonStallingEvaluations("JavaScript dialog interrupted evaluation");this._openedDialogs.add(u),this._instrumentation.onDialog(u);let _=!1;for(const f of this._dialogHandlers)f(u)&&(_=!0);_||u.close().then(()=>{})}dialogWillClose(u){this._openedDialogs.delete(u)}addDialogHandler(u){this._dialogHandlers.add(u)}removeDialogHandler(u){if(this._dialogHandlers.delete(u),!this._dialogHandlers.size)for(const _ of this._openedDialogs)_.close().catch(()=>{})}hasOpenDialogsForPage(u){return[...this._openedDialogs].some(_=>_.page()===u)}async closeBeforeUnloadDialogs(){await Promise.all([...this._openedDialogs].map(async u=>{u.type()==="beforeunload"&&await u.dismiss()}))}}return ql}var $l,m_;function Gs(){if(m_)return $l;m_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(v,a)=>{for(var s in a)r(v,s,{get:a[s],enumerable:!0})},P=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of E(a))!V.call(v,o)&&o!==s&&r(v,o,{get:()=>a[o],enumerable:!(n=i(a,o))||n.enumerable});return v},e=(v,a,s)=>(s=v!=null?t(R(v)):{},P(!v||!v.__esModule?r(s,"default",{value:v,enumerable:!0}):s,v)),U=v=>P(r({},"__esModule",{value:!0}),v),C={};te(C,{Artifact:()=>d}),$l=U(C);var w=e(Je),g=nr(),u=Pn(),_=Tr(),f=Fr();class d extends _.SdkObject{constructor(a,s,n,o){super(a,"artifact"),this._finishedPromise=new f.ManualPromise,this._saveCallbacks=[],this._finished=!1,this._deleted=!1,this._localPath=s,this._unaccessibleErrorMessage=n,this._cancelCallback=o}finishedPromise(){return this._finishedPromise}localPath(){return this._localPath}async localPathAfterFinished(){if(this._unaccessibleErrorMessage)throw new Error(this._unaccessibleErrorMessage);if(await this._finishedPromise,this._failureError)throw this._failureError;return this._localPath}saveAs(a){if(this._unaccessibleErrorMessage)throw new Error(this._unaccessibleErrorMessage);if(this._deleted)throw new Error("File already deleted. Save before deleting.");if(this._failureError)throw this._failureError;if(this._finished){a(this._localPath).catch(()=>{});return}this._saveCallbacks.push(a)}async failureError(){var a;return this._unaccessibleErrorMessage?this._unaccessibleErrorMessage:(await this._finishedPromise,((a=this._failureError)==null?void 0:a.message)||null)}async cancel(){return(0,g.assert)(this._cancelCallback!==void 0),this._cancelCallback()}async delete(){if(this._unaccessibleErrorMessage)return;const a=await this.localPathAfterFinished();this._deleted||(this._deleted=!0,a&&await w.default.promises.unlink(a).catch(s=>{}))}async deleteOnContextClose(){this._deleted||(this._deleted=!0,this._unaccessibleErrorMessage||await w.default.promises.unlink(this._localPath).catch(a=>{}),await this.reportFinished(new u.TargetClosedError))}async reportFinished(a){if(!this._finished){if(this._finished=!0,this._failureError=a,a)for(const s of this._saveCallbacks)await s("",a);else for(const s of this._saveCallbacks)await s(this._localPath);this._saveCallbacks=[],this._finishedPromise.resolve()}}}return $l}var Wl,g_;function gO(){if(g_)return Wl;g_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),Wl=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/utilityScript.ts
var utilityScript_exports = {};
__export(utilityScript_exports, {
  UtilityScript: () => UtilityScript
});
module.exports = __toCommonJS(utilityScript_exports);

// packages/playwright-core/src/utils/isomorphic/utilityScriptSerializers.ts
function isRegExp(obj) {
  try {
    return obj instanceof RegExp || Object.prototype.toString.call(obj) === "[object RegExp]";
  } catch (error) {
    return false;
  }
}
function isDate(obj) {
  try {
    return obj instanceof Date || Object.prototype.toString.call(obj) === "[object Date]";
  } catch (error) {
    return false;
  }
}
function isURL(obj) {
  try {
    return obj instanceof URL || Object.prototype.toString.call(obj) === "[object URL]";
  } catch (error) {
    return false;
  }
}
function isError(obj) {
  var _a;
  try {
    return obj instanceof Error || obj && ((_a = Object.getPrototypeOf(obj)) == null ? void 0 : _a.name) === "Error";
  } catch (error) {
    return false;
  }
}
function isTypedArray(obj, constructor) {
  try {
    return obj instanceof constructor || Object.prototype.toString.call(obj) === \`[object \${constructor.name}]\`;
  } catch (error) {
    return false;
  }
}
var typedArrayConstructors = {
  i8: Int8Array,
  ui8: Uint8Array,
  ui8c: Uint8ClampedArray,
  i16: Int16Array,
  ui16: Uint16Array,
  i32: Int32Array,
  ui32: Uint32Array,
  // TODO: add Float16Array once it's in baseline
  f32: Float32Array,
  f64: Float64Array,
  bi64: BigInt64Array,
  bui64: BigUint64Array
};
function typedArrayToBase64(array) {
  if ("toBase64" in array)
    return array.toBase64();
  const binary = Array.from(new Uint8Array(array.buffer, array.byteOffset, array.byteLength)).map((b) => String.fromCharCode(b)).join("");
  return btoa(binary);
}
function base64ToTypedArray(base64, TypedArrayConstructor) {
  const binary = atob(base64);
  const bytes = new Uint8Array(binary.length);
  for (let i = 0; i < binary.length; i++)
    bytes[i] = binary.charCodeAt(i);
  return new TypedArrayConstructor(bytes.buffer);
}
function parseEvaluationResultValue(value, handles = [], refs = /* @__PURE__ */ new Map()) {
  if (Object.is(value, void 0))
    return void 0;
  if (typeof value === "object" && value) {
    if ("ref" in value)
      return refs.get(value.ref);
    if ("v" in value) {
      if (value.v === "undefined")
        return void 0;
      if (value.v === "null")
        return null;
      if (value.v === "NaN")
        return NaN;
      if (value.v === "Infinity")
        return Infinity;
      if (value.v === "-Infinity")
        return -Infinity;
      if (value.v === "-0")
        return -0;
      return void 0;
    }
    if ("d" in value) {
      return new Date(value.d);
    }
    if ("u" in value)
      return new URL(value.u);
    if ("bi" in value)
      return BigInt(value.bi);
    if ("e" in value) {
      const error = new Error(value.e.m);
      error.name = value.e.n;
      error.stack = value.e.s;
      return error;
    }
    if ("r" in value)
      return new RegExp(value.r.p, value.r.f);
    if ("a" in value) {
      const result = [];
      refs.set(value.id, result);
      for (const a of value.a)
        result.push(parseEvaluationResultValue(a, handles, refs));
      return result;
    }
    if ("o" in value) {
      const result = {};
      refs.set(value.id, result);
      for (const { k, v } of value.o) {
        if (k === "__proto__")
          continue;
        result[k] = parseEvaluationResultValue(v, handles, refs);
      }
      return result;
    }
    if ("h" in value)
      return handles[value.h];
    if ("ta" in value)
      return base64ToTypedArray(value.ta.b, typedArrayConstructors[value.ta.k]);
  }
  return value;
}
function serializeAsCallArgument(value, handleSerializer) {
  return serialize(value, handleSerializer, { visited: /* @__PURE__ */ new Map(), lastId: 0 });
}
function serialize(value, handleSerializer, visitorInfo) {
  if (value && typeof value === "object") {
    if (typeof globalThis.Window === "function" && value instanceof globalThis.Window)
      return "ref: <Window>";
    if (typeof globalThis.Document === "function" && value instanceof globalThis.Document)
      return "ref: <Document>";
    if (typeof globalThis.Node === "function" && value instanceof globalThis.Node)
      return "ref: <Node>";
  }
  return innerSerialize(value, handleSerializer, visitorInfo);
}
function innerSerialize(value, handleSerializer, visitorInfo) {
  var _a;
  const result = handleSerializer(value);
  if ("fallThrough" in result)
    value = result.fallThrough;
  else
    return result;
  if (typeof value === "symbol")
    return { v: "undefined" };
  if (Object.is(value, void 0))
    return { v: "undefined" };
  if (Object.is(value, null))
    return { v: "null" };
  if (Object.is(value, NaN))
    return { v: "NaN" };
  if (Object.is(value, Infinity))
    return { v: "Infinity" };
  if (Object.is(value, -Infinity))
    return { v: "-Infinity" };
  if (Object.is(value, -0))
    return { v: "-0" };
  if (typeof value === "boolean")
    return value;
  if (typeof value === "number")
    return value;
  if (typeof value === "string")
    return value;
  if (typeof value === "bigint")
    return { bi: value.toString() };
  if (isError(value)) {
    let stack;
    if ((_a = value.stack) == null ? void 0 : _a.startsWith(value.name + ": " + value.message)) {
      stack = value.stack;
    } else {
      stack = \`\${value.name}: \${value.message}
\${value.stack}\`;
    }
    return { e: { n: value.name, m: value.message, s: stack } };
  }
  if (isDate(value))
    return { d: value.toJSON() };
  if (isURL(value))
    return { u: value.toJSON() };
  if (isRegExp(value))
    return { r: { p: value.source, f: value.flags } };
  for (const [k, ctor] of Object.entries(typedArrayConstructors)) {
    if (isTypedArray(value, ctor))
      return { ta: { b: typedArrayToBase64(value), k } };
  }
  const id = visitorInfo.visited.get(value);
  if (id)
    return { ref: id };
  if (Array.isArray(value)) {
    const a = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (let i = 0; i < value.length; ++i)
      a.push(serialize(value[i], handleSerializer, visitorInfo));
    return { a, id: id2 };
  }
  if (typeof value === "object") {
    const o = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (const name of Object.keys(value)) {
      let item;
      try {
        item = value[name];
      } catch (e) {
        continue;
      }
      if (name === "toJSON" && typeof item === "function")
        o.push({ k: name, v: { o: [], id: 0 } });
      else
        o.push({ k: name, v: serialize(item, handleSerializer, visitorInfo) });
    }
    let jsonWrapper;
    try {
      if (o.length === 0 && value.toJSON && typeof value.toJSON === "function")
        jsonWrapper = { value: value.toJSON() };
    } catch (e) {
    }
    if (jsonWrapper)
      return innerSerialize(jsonWrapper.value, handleSerializer, visitorInfo);
    return { o, id: id2 };
  }
}

// packages/injected/src/utilityScript.ts
var UtilityScript = class {
  // eslint-disable-next-line no-restricted-globals
  constructor(global, isUnderTest) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    this.global = global;
    this.isUnderTest = isUnderTest;
    if (global.__pwClock) {
      this.builtins = global.__pwClock.builtins;
    } else {
      this.builtins = {
        setTimeout: (_a = global.setTimeout) == null ? void 0 : _a.bind(global),
        clearTimeout: (_b = global.clearTimeout) == null ? void 0 : _b.bind(global),
        setInterval: (_c = global.setInterval) == null ? void 0 : _c.bind(global),
        clearInterval: (_d = global.clearInterval) == null ? void 0 : _d.bind(global),
        requestAnimationFrame: (_e = global.requestAnimationFrame) == null ? void 0 : _e.bind(global),
        cancelAnimationFrame: (_f = global.cancelAnimationFrame) == null ? void 0 : _f.bind(global),
        requestIdleCallback: (_g = global.requestIdleCallback) == null ? void 0 : _g.bind(global),
        cancelIdleCallback: (_h = global.cancelIdleCallback) == null ? void 0 : _h.bind(global),
        performance: global.performance,
        Intl: global.Intl,
        Date: global.Date
      };
    }
    if (this.isUnderTest)
      global.builtins = this.builtins;
  }
  evaluate(isFunction, returnByValue, expression, argCount, ...argsAndHandles) {
    const args = argsAndHandles.slice(0, argCount);
    const handles = argsAndHandles.slice(argCount);
    const parameters = [];
    for (let i = 0; i < args.length; i++)
      parameters[i] = parseEvaluationResultValue(args[i], handles);
    let result = this.global.eval(expression);
    if (isFunction === true) {
      result = result(...parameters);
    } else if (isFunction === false) {
      result = result;
    } else {
      if (typeof result === "function")
        result = result(...parameters);
    }
    return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;
  }
  jsonValue(returnByValue, value) {
    if (value === void 0)
      return void 0;
    return serializeAsCallArgument(value, (value2) => ({ fallThrough: value2 }));
  }
  _promiseAwareJsonValueNoThrow(value) {
    const safeJson = (value2) => {
      try {
        return this.jsonValue(true, value2);
      } catch (e) {
        return void 0;
      }
    };
    if (value && typeof value === "object" && typeof value.then === "function") {
      return (async () => {
        const promiseValue = await value;
        return safeJson(promiseValue);
      })();
    }
    return safeJson(value);
  }
};
`;return Wl}var zl,__;function ds(){if(__)return zl;__=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(n,o)=>{for(var h in o)t(n,h,{get:o[h],enumerable:!0})},V=(n,o,h,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of i(o))!E.call(n,c)&&c!==h&&t(n,c,{get:()=>o[c],enumerable:!(m=r(o,c))||m.enumerable});return n},te=n=>V(t({},"__esModule",{value:!0}),n),P={};R(P,{parseEvaluationResultValue:()=>d,serializeAsCallArgument:()=>v}),zl=te(P);function e(n){try{return n instanceof RegExp||Object.prototype.toString.call(n)==="[object RegExp]"}catch{return!1}}function U(n){try{return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}catch{return!1}}function C(n){try{return n instanceof URL||Object.prototype.toString.call(n)==="[object URL]"}catch{return!1}}function w(n){var o;try{return n instanceof Error||n&&((o=Object.getPrototypeOf(n))==null?void 0:o.name)==="Error"}catch{return!1}}function g(n,o){try{return n instanceof o||Object.prototype.toString.call(n)===`[object ${o.name}]`}catch{return!1}}const u={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,bi64:BigInt64Array,bui64:BigUint64Array};function _(n){if("toBase64"in n)return n.toBase64();const o=Array.from(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(h=>String.fromCharCode(h)).join("");return btoa(o)}function f(n,o){const h=atob(n),m=new Uint8Array(h.length);for(let c=0;c<h.length;c++)m[c]=h.charCodeAt(c);return new o(m.buffer)}function d(n,o=[],h=new Map){if(!Object.is(n,void 0)){if(typeof n=="object"&&n){if("ref"in n)return h.get(n.ref);if("v"in n)return n.v==="undefined"?void 0:n.v==="null"?null:n.v==="NaN"?NaN:n.v==="Infinity"?1/0:n.v==="-Infinity"?-1/0:n.v==="-0"?-0:void 0;if("d"in n)return new Date(n.d);if("u"in n)return new URL(n.u);if("bi"in n)return BigInt(n.bi);if("e"in n){const m=new Error(n.e.m);return m.name=n.e.n,m.stack=n.e.s,m}if("r"in n)return new RegExp(n.r.p,n.r.f);if("a"in n){const m=[];h.set(n.id,m);for(const c of n.a)m.push(d(c,o,h));return m}if("o"in n){const m={};h.set(n.id,m);for(const{k:c,v:l}of n.o)c!=="__proto__"&&(m[c]=d(l,o,h));return m}if("h"in n)return o[n.h];if("ta"in n)return f(n.ta.b,u[n.ta.k])}return n}}function v(n,o){return a(n,o,{visited:new Map,lastId:0})}function a(n,o,h){if(n&&typeof n=="object"){if(typeof globalThis.Window=="function"&&n instanceof globalThis.Window)return"ref: <Window>";if(typeof globalThis.Document=="function"&&n instanceof globalThis.Document)return"ref: <Document>";if(typeof globalThis.Node=="function"&&n instanceof globalThis.Node)return"ref: <Node>"}return s(n,o,h)}function s(n,o,h){var l;const m=o(n);if("fallThrough"in m)n=m.fallThrough;else return m;if(typeof n=="symbol")return{v:"undefined"};if(Object.is(n,void 0))return{v:"undefined"};if(Object.is(n,null))return{v:"null"};if(Object.is(n,NaN))return{v:"NaN"};if(Object.is(n,1/0))return{v:"Infinity"};if(Object.is(n,-1/0))return{v:"-Infinity"};if(Object.is(n,-0))return{v:"-0"};if(typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(typeof n=="bigint")return{bi:n.toString()};if(w(n)){let x;return(l=n.stack)!=null&&l.startsWith(n.name+": "+n.message)?x=n.stack:x=`${n.name}: ${n.message}
${n.stack}`,{e:{n:n.name,m:n.message,s:x}}}if(U(n))return{d:n.toJSON()};if(C(n))return{u:n.toJSON()};if(e(n))return{r:{p:n.source,f:n.flags}};for(const[x,T]of Object.entries(u))if(g(n,T))return{ta:{b:_(n),k:x}};const c=h.visited.get(n);if(c)return{ref:c};if(Array.isArray(n)){const x=[],T=++h.lastId;h.visited.set(n,T);for(let b=0;b<n.length;++b)x.push(a(n[b],o,h));return{a:x,id:T}}if(typeof n=="object"){const x=[],T=++h.lastId;h.visited.set(n,T);for(const p of Object.keys(n)){let O;try{O=n[p]}catch{continue}p==="toJSON"&&typeof O=="function"?x.push({k:p,v:{o:[],id:0}}):x.push({k:p,v:a(O,o,h)})}let b;try{x.length===0&&n.toJSON&&typeof n.toJSON=="function"&&(b={value:n.toJSON()})}catch{}return b?s(b.value,o,h):{o:x,id:T}}}return zl}var Vl,b_;function Oi(){if(b_)return Vl;b_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(l,x)=>{for(var T in x)r(l,T,{get:x[T],enumerable:!0})},P=(l,x,T,b)=>{if(x&&typeof x=="object"||typeof x=="function")for(let p of E(x))!V.call(l,p)&&p!==T&&r(l,p,{get:()=>x[p],enumerable:!(b=i(x,p))||b.enumerable});return l},e=(l,x,T)=>(T=l!=null?t(R(l)):{},P(!l||!l.__esModule?r(T,"default",{value:l,enumerable:!0}):T,l)),U=l=>P(r({},"__esModule",{value:!0}),l),C={};te(C,{ExecutionContext:()=>d,JSHandle:()=>v,JavaScriptErrorInEvaluate:()=>h,evaluate:()=>a,evaluateExpression:()=>s,isJavaScriptErrorInEvaluate:()=>m,normalizeEvaluationExpression:()=>o,parseUnserializableValue:()=>n,sparseArrayToString:()=>c}),Vl=U(C);var w=Tr(),g=e(gO()),u=nr(),_=ds(),f=Fr();class d extends w.SdkObject{constructor(x,T,b){super(x,"execution-context"),this._contextDestroyedScope=new f.LongStandingScope,this.worldNameForTest=b,this.delegate=T}contextDestroyed(x){this._contextDestroyedScope.close(new Error(x))}async _raceAgainstContextDestroyed(x){return this._contextDestroyedScope.race(x)}rawEvaluateJSON(x){return this._raceAgainstContextDestroyed(this.delegate.rawEvaluateJSON(x))}rawEvaluateHandle(x){return this._raceAgainstContextDestroyed(this.delegate.rawEvaluateHandle(this,x))}async evaluateWithArguments(x,T,b,p){const O=await this.utilityScript();return this._raceAgainstContextDestroyed(this.delegate.evaluateWithArguments(x,T,O,b,p))}getProperties(x){return this._raceAgainstContextDestroyed(this.delegate.getProperties(x))}releaseHandle(x){return this.delegate.releaseHandle(x)}adoptIfNeeded(x){return null}utilityScript(){if(!this._utilityScriptPromise){const x=`
      (() => {
        const module = {};
        ${g.source}
        return new (module.exports.UtilityScript())(globalThis, ${(0,u.isUnderTest)()});
      })();`;this._utilityScriptPromise=this._raceAgainstContextDestroyed(this.delegate.rawEvaluateHandle(this,x)).then(T=>(T._setPreview("UtilityScript"),T))}return this._utilityScriptPromise}async doSlowMo(){}}class v extends w.SdkObject{constructor(x,T,b,p,O){super(x,"handle"),this.__jshandle=!0,this._disposed=!1,this._context=x,this._objectId=p,this._value=O,this._objectType=T,this._preview=this._objectId?b||`JSHandle@${this._objectType}`:String(O),this._objectId&&globalThis.leakedJSHandles&&globalThis.leakedJSHandles.set(this,new Error("Leaked JSHandle"))}async evaluate(x,T){return a(this._context,!0,x,this,T)}async evaluateHandle(x,T){return a(this._context,!1,x,this,T)}async evaluateExpression(x,T,b){const p=await s(this._context,x,{...T,returnByValue:!0},this,b);return await this._context.doSlowMo(),p}async evaluateExpressionHandle(x,T,b){const p=await s(this._context,x,{...T,returnByValue:!1},this,b);return await this._context.doSlowMo(),p}async getProperty(x){const T=await this.evaluateHandle((O,z)=>{const $={__proto__:null};return $[z]=O[z],$},x),p=(await T.getProperties()).get(x);return T.dispose(),p}async getProperties(){return this._objectId?this._context.getProperties(this):new Map}rawValue(){return this._value}async jsonValue(){return this._objectId?this._context.evaluateWithArguments("(utilityScript, ...args) => utilityScript.jsonValue(...args)",!0,[!0],[this]):this._value}asElement(){return null}dispose(){this._disposed||(this._disposed=!0,this._objectId&&(this._context.releaseHandle(this).catch(x=>{}),globalThis.leakedJSHandles&&globalThis.leakedJSHandles.delete(this)))}toString(){return this._preview}_setPreviewCallback(x){this._previewCallback=x}preview(){return this._preview}worldNameForTest(){return this._context.worldNameForTest}_setPreview(x){this._preview=x,this._previewCallback&&this._previewCallback(x)}}async function a(l,x,T,...b){return s(l,String(T),{returnByValue:x,isFunction:typeof T=="function"},...b)}async function s(l,x,T,...b){x=o(x,T.isFunction);const p=[],O=[],z=le=>(p.push(le),p.length-1);b=b.map(le=>(0,_.serializeAsCallArgument)(le,_e=>{if(_e instanceof v){if(!_e._objectId)return{fallThrough:_e._value};if(_e._disposed)throw new h("JSHandle is disposed!");const ge=l.adoptIfNeeded(_e);return ge===null?{h:z(Promise.resolve(_e))}:(O.push(ge),{h:z(ge)})}return{fallThrough:_e}}));const $=[];for(const le of await Promise.all(p)){if(le._context!==l)throw new h("JSHandles can be evaluated only in the context they were created!");$.push(le)}const q=[T.isFunction,T.returnByValue,x,b.length,...b],J="(utilityScript, ...args) => utilityScript.evaluate(...args)";try{return await l.evaluateWithArguments(J,T.returnByValue||!1,q,$)}finally{O.map(le=>le.then(_e=>_e.dispose()))}}function n(l){if(l==="NaN")return NaN;if(l==="Infinity")return 1/0;if(l==="-Infinity")return-1/0;if(l==="-0")return-0}function o(l,x){if(l=l.trim(),x)try{new Function("("+l+")")}catch{l.startsWith("async ")?l="async function "+l.substring(6):l="function "+l;try{new Function("("+l+")")}catch{throw new Error("Passed function is not well-serializable!")}}return/^(async)?\s*function(\s|\()/.test(l)&&(l="("+l+")"),l}class h extends Error{}function m(l){return l instanceof h}function c(l){const x=[];for(const{name:p,value:O}of l){const z=+p;isNaN(z)||z<0||x.push({index:z,value:O})}x.sort((p,O)=>p.index-O.index);let T=-1;const b=[];for(const{index:p,value:O}of x){const z=p-T-1;z===1?b.push("empty"):z>1&&b.push(`empty x ${z}`),b.push(String(O)),T=p}return"["+b.join(", ")+"]"}return Vl}var Kl,v_;function ny(){if(v_)return Kl;v_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},P=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of E(s))!V.call(a,h)&&h!==n&&r(a,h,{get:()=>s[h],enumerable:!(o=i(s,h))||o.enumerable});return a},e=(a,s,n)=>(n=a!=null?t(R(a)):{},P(!a||!a.__esModule?r(n,"default",{value:a,enumerable:!0}):n,a)),U=a=>P(r({},"__esModule",{value:!0}),a),C={};te(C,{fileUploadSizeLimit:()=>f,prepareFilesForUpload:()=>v}),Kl=U(C);var w=e(Je),g=e(Je),u=Gr(),_=Ar();const f=50*1024*1024;async function d(a){return(await Promise.all(a.map(async n=>(await w.default.promises.stat(n)).size))).reduce((n,o)=>n+o,0)>=f}async function v(a,s){const{payloads:n,streams:o,directoryStream:h}=s;let{localPaths:m,localDirectory:c}=s;if([n,m,c,o,h].filter(Boolean).length!==1)throw new Error("Exactly one of payloads, localPaths and streams must be provided");if(o&&(m=o.map(T=>T.path())),h&&(c=h.path()),m)for(const T of m)(0,u.assert)(g.default.isAbsolute(T)&&g.default.resolve(T)===T,"Paths provided to localPaths must be absolute and fully resolved.");let l=n;if(!a._page.browserContext._browser._isCollocatedWithServer&&m){if(await d(m))throw new Error("Cannot transfer files larger than 50Mb to a browser not co-located with the server");l=await Promise.all(m.map(async T=>({name:g.default.basename(T),buffer:await w.default.promises.readFile(T),lastModifiedMs:(await w.default.promises.stat(T)).mtimeMs}))),m=void 0}const x=l==null?void 0:l.map(T=>({name:T.name,mimeType:T.mimeType||_.mime.getType(T.name)||"application/octet-stream",buffer:T.buffer.toString("base64"),lastModifiedMs:T.lastModifiedMs}));return{localPaths:m,localDirectory:c,filePayloads:x}}return Kl}var Gl,w_;function _O(){if(w_)return Gl;w_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),Gl=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/injectedScript.ts
var injectedScript_exports = {};
__export(injectedScript_exports, {
  InjectedScript: () => InjectedScript
});
module.exports = __toCommonJS(injectedScript_exports);

// packages/playwright-core/src/utils/isomorphic/ariaSnapshot.ts
function parseAriaSnapshot(yaml, text, options = {}) {
  var _a;
  const lineCounter = new yaml.LineCounter();
  const parseOptions = {
    keepSourceTokens: true,
    lineCounter,
    ...options
  };
  const yamlDoc = yaml.parseDocument(text, parseOptions);
  const errors = [];
  const convertRange = (range) => {
    return [lineCounter.linePos(range[0]), lineCounter.linePos(range[1])];
  };
  const addError = (error) => {
    errors.push({
      message: error.message,
      range: [lineCounter.linePos(error.pos[0]), lineCounter.linePos(error.pos[1])]
    });
  };
  const convertSeq = (container, seq) => {
    for (const item of seq.items) {
      const itemIsString = item instanceof yaml.Scalar && typeof item.value === "string";
      if (itemIsString) {
        const childNode = KeyParser.parse(item, parseOptions, errors);
        if (childNode) {
          container.children = container.children || [];
          container.children.push(childNode);
        }
        continue;
      }
      const itemIsMap = item instanceof yaml.YAMLMap;
      if (itemIsMap) {
        convertMap(container, item);
        continue;
      }
      errors.push({
        message: "Sequence items should be strings or maps",
        range: convertRange(item.range || seq.range)
      });
    }
  };
  const convertMap = (container, map) => {
    var _a2;
    for (const entry of map.items) {
      container.children = container.children || [];
      const keyIsString = entry.key instanceof yaml.Scalar && typeof entry.key.value === "string";
      if (!keyIsString) {
        errors.push({
          message: "Only string keys are supported",
          range: convertRange(entry.key.range || map.range)
        });
        continue;
      }
      const key = entry.key;
      const value = entry.value;
      if (key.value === "text") {
        const valueIsString = value instanceof yaml.Scalar && typeof value.value === "string";
        if (!valueIsString) {
          errors.push({
            message: "Text value should be a string",
            range: convertRange(entry.value.range || map.range)
          });
          continue;
        }
        container.children.push({
          kind: "text",
          text: valueOrRegex(value.value)
        });
        continue;
      }
      if (key.value === "/children") {
        const valueIsString = value instanceof yaml.Scalar && typeof value.value === "string";
        if (!valueIsString || value.value !== "contain" && value.value !== "equal" && value.value !== "deep-equal") {
          errors.push({
            message: 'Strict value should be "contain", "equal" or "deep-equal"',
            range: convertRange(entry.value.range || map.range)
          });
          continue;
        }
        container.containerMode = value.value;
        continue;
      }
      if (key.value.startsWith("/")) {
        const valueIsString = value instanceof yaml.Scalar && typeof value.value === "string";
        if (!valueIsString) {
          errors.push({
            message: "Property value should be a string",
            range: convertRange(entry.value.range || map.range)
          });
          continue;
        }
        container.props = (_a2 = container.props) != null ? _a2 : {};
        container.props[key.value.slice(1)] = valueOrRegex(value.value);
        continue;
      }
      const childNode = KeyParser.parse(key, parseOptions, errors);
      if (!childNode)
        continue;
      const valueIsScalar = value instanceof yaml.Scalar;
      if (valueIsScalar) {
        const type = typeof value.value;
        if (type !== "string" && type !== "number" && type !== "boolean") {
          errors.push({
            message: "Node value should be a string or a sequence",
            range: convertRange(entry.value.range || map.range)
          });
          continue;
        }
        container.children.push({
          ...childNode,
          children: [{
            kind: "text",
            text: valueOrRegex(String(value.value))
          }]
        });
        continue;
      }
      const valueIsSequence = value instanceof yaml.YAMLSeq;
      if (valueIsSequence) {
        container.children.push(childNode);
        convertSeq(childNode, value);
        continue;
      }
      errors.push({
        message: "Map values should be strings or sequences",
        range: convertRange(entry.value.range || map.range)
      });
    }
  };
  const fragment = { kind: "role", role: "fragment" };
  yamlDoc.errors.forEach(addError);
  if (errors.length)
    return { errors, fragment };
  if (!(yamlDoc.contents instanceof yaml.YAMLSeq)) {
    errors.push({
      message: 'Aria snapshot must be a YAML sequence, elements starting with " -"',
      range: yamlDoc.contents ? convertRange(yamlDoc.contents.range) : [{ line: 0, col: 0 }, { line: 0, col: 0 }]
    });
  }
  if (errors.length)
    return { errors, fragment };
  convertSeq(fragment, yamlDoc.contents);
  if (errors.length)
    return { errors, fragment: emptyFragment };
  if (((_a = fragment.children) == null ? void 0 : _a.length) === 1 && (!fragment.containerMode || fragment.containerMode === "contain"))
    return { fragment: fragment.children[0], errors: [] };
  return { fragment, errors: [] };
}
var emptyFragment = { kind: "role", role: "fragment" };
function normalizeWhitespace(text) {
  return text.replace(/[\\u200b\\u00ad]/g, "").replace(/[\\r\\n\\s\\t]+/g, " ").trim();
}
function valueOrRegex(value) {
  return value.startsWith("/") && value.endsWith("/") && value.length > 1 ? { pattern: value.slice(1, -1) } : normalizeWhitespace(value);
}
var KeyParser = class _KeyParser {
  static parse(text, options, errors) {
    try {
      return new _KeyParser(text.value)._parse();
    } catch (e) {
      if (e instanceof ParserError) {
        const message = options.prettyErrors === false ? e.message : e.message + ":\\n\\n" + text.value + "\\n" + " ".repeat(e.pos) + "^\\n";
        errors.push({
          message,
          range: [options.lineCounter.linePos(text.range[0]), options.lineCounter.linePos(text.range[0] + e.pos)]
        });
        return null;
      }
      throw e;
    }
  }
  constructor(input) {
    this._input = input;
    this._pos = 0;
    this._length = input.length;
  }
  _peek() {
    return this._input[this._pos] || "";
  }
  _next() {
    if (this._pos < this._length)
      return this._input[this._pos++];
    return null;
  }
  _eof() {
    return this._pos >= this._length;
  }
  _isWhitespace() {
    return !this._eof() && /\\s/.test(this._peek());
  }
  _skipWhitespace() {
    while (this._isWhitespace())
      this._pos++;
  }
  _readIdentifier(type) {
    if (this._eof())
      this._throwError(\`Unexpected end of input when expecting \${type}\`);
    const start = this._pos;
    while (!this._eof() && /[a-zA-Z]/.test(this._peek()))
      this._pos++;
    return this._input.slice(start, this._pos);
  }
  _readString() {
    let result = "";
    let escaped = false;
    while (!this._eof()) {
      const ch = this._next();
      if (escaped) {
        result += ch;
        escaped = false;
      } else if (ch === "\\\\") {
        escaped = true;
      } else if (ch === '"') {
        return result;
      } else {
        result += ch;
      }
    }
    this._throwError("Unterminated string");
  }
  _throwError(message, offset = 0) {
    throw new ParserError(message, offset || this._pos);
  }
  _readRegex() {
    let result = "";
    let escaped = false;
    let insideClass = false;
    while (!this._eof()) {
      const ch = this._next();
      if (escaped) {
        result += ch;
        escaped = false;
      } else if (ch === "\\\\") {
        escaped = true;
        result += ch;
      } else if (ch === "/" && !insideClass) {
        return { pattern: result };
      } else if (ch === "[") {
        insideClass = true;
        result += ch;
      } else if (ch === "]" && insideClass) {
        result += ch;
        insideClass = false;
      } else {
        result += ch;
      }
    }
    this._throwError("Unterminated regex");
  }
  _readStringOrRegex() {
    const ch = this._peek();
    if (ch === '"') {
      this._next();
      return normalizeWhitespace(this._readString());
    }
    if (ch === "/") {
      this._next();
      return this._readRegex();
    }
    return null;
  }
  _readAttributes(result) {
    let errorPos = this._pos;
    while (true) {
      this._skipWhitespace();
      if (this._peek() === "[") {
        this._next();
        this._skipWhitespace();
        errorPos = this._pos;
        const flagName = this._readIdentifier("attribute");
        this._skipWhitespace();
        let flagValue = "";
        if (this._peek() === "=") {
          this._next();
          this._skipWhitespace();
          errorPos = this._pos;
          while (this._peek() !== "]" && !this._isWhitespace() && !this._eof())
            flagValue += this._next();
        }
        this._skipWhitespace();
        if (this._peek() !== "]")
          this._throwError("Expected ]");
        this._next();
        this._applyAttribute(result, flagName, flagValue || "true", errorPos);
      } else {
        break;
      }
    }
  }
  _parse() {
    this._skipWhitespace();
    const role = this._readIdentifier("role");
    this._skipWhitespace();
    const name = this._readStringOrRegex() || "";
    const result = { kind: "role", role, name };
    this._readAttributes(result);
    this._skipWhitespace();
    if (!this._eof())
      this._throwError("Unexpected input");
    return result;
  }
  _applyAttribute(node, key, value, errorPos) {
    if (key === "checked") {
      this._assert(value === "true" || value === "false" || value === "mixed", 'Value of "checked" attribute must be a boolean or "mixed"', errorPos);
      node.checked = value === "true" ? true : value === "false" ? false : "mixed";
      return;
    }
    if (key === "disabled") {
      this._assert(value === "true" || value === "false", 'Value of "disabled" attribute must be a boolean', errorPos);
      node.disabled = value === "true";
      return;
    }
    if (key === "expanded") {
      this._assert(value === "true" || value === "false", 'Value of "expanded" attribute must be a boolean', errorPos);
      node.expanded = value === "true";
      return;
    }
    if (key === "active") {
      this._assert(value === "true" || value === "false", 'Value of "active" attribute must be a boolean', errorPos);
      node.active = value === "true";
      return;
    }
    if (key === "level") {
      this._assert(!isNaN(Number(value)), 'Value of "level" attribute must be a number', errorPos);
      node.level = Number(value);
      return;
    }
    if (key === "pressed") {
      this._assert(value === "true" || value === "false" || value === "mixed", 'Value of "pressed" attribute must be a boolean or "mixed"', errorPos);
      node.pressed = value === "true" ? true : value === "false" ? false : "mixed";
      return;
    }
    if (key === "selected") {
      this._assert(value === "true" || value === "false", 'Value of "selected" attribute must be a boolean', errorPos);
      node.selected = value === "true";
      return;
    }
    this._assert(false, \`Unsupported attribute [\${key}]\`, errorPos);
  }
  _assert(value, message, valuePos) {
    if (!value)
      this._throwError(message || "Assertion error", valuePos);
  }
};
var ParserError = class extends Error {
  constructor(message, pos) {
    super(message);
    this.pos = pos;
  }
};

// packages/playwright-core/src/utils/isomorphic/cssTokenizer.ts
var between = function(num, first, last) {
  return num >= first && num <= last;
};
function digit(code) {
  return between(code, 48, 57);
}
function hexdigit(code) {
  return digit(code) || between(code, 65, 70) || between(code, 97, 102);
}
function uppercaseletter(code) {
  return between(code, 65, 90);
}
function lowercaseletter(code) {
  return between(code, 97, 122);
}
function letter(code) {
  return uppercaseletter(code) || lowercaseletter(code);
}
function nonascii(code) {
  return code >= 128;
}
function namestartchar(code) {
  return letter(code) || nonascii(code) || code === 95;
}
function namechar(code) {
  return namestartchar(code) || digit(code) || code === 45;
}
function nonprintable(code) {
  return between(code, 0, 8) || code === 11 || between(code, 14, 31) || code === 127;
}
function newline(code) {
  return code === 10;
}
function whitespace(code) {
  return newline(code) || code === 9 || code === 32;
}
var maximumallowedcodepoint = 1114111;
var InvalidCharacterError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "InvalidCharacterError";
  }
};
function preprocess(str) {
  const codepoints = [];
  for (let i = 0; i < str.length; i++) {
    let code = str.charCodeAt(i);
    if (code === 13 && str.charCodeAt(i + 1) === 10) {
      code = 10;
      i++;
    }
    if (code === 13 || code === 12)
      code = 10;
    if (code === 0)
      code = 65533;
    if (between(code, 55296, 56319) && between(str.charCodeAt(i + 1), 56320, 57343)) {
      const lead = code - 55296;
      const trail = str.charCodeAt(i + 1) - 56320;
      code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;
      i++;
    }
    codepoints.push(code);
  }
  return codepoints;
}
function stringFromCode(code) {
  if (code <= 65535)
    return String.fromCharCode(code);
  code -= Math.pow(2, 16);
  const lead = Math.floor(code / Math.pow(2, 10)) + 55296;
  const trail = code % Math.pow(2, 10) + 56320;
  return String.fromCharCode(lead) + String.fromCharCode(trail);
}
function tokenize(str1) {
  const str = preprocess(str1);
  let i = -1;
  const tokens = [];
  let code;
  let line = 0;
  let column = 0;
  let lastLineLength = 0;
  const incrLineno = function() {
    line += 1;
    lastLineLength = column;
    column = 0;
  };
  const locStart = { line, column };
  const codepoint = function(i2) {
    if (i2 >= str.length)
      return -1;
    return str[i2];
  };
  const next = function(num) {
    if (num === void 0)
      num = 1;
    if (num > 3)
      throw "Spec Error: no more than three codepoints of lookahead.";
    return codepoint(i + num);
  };
  const consume = function(num) {
    if (num === void 0)
      num = 1;
    i += num;
    code = codepoint(i);
    if (newline(code))
      incrLineno();
    else
      column += num;
    return true;
  };
  const reconsume = function() {
    i -= 1;
    if (newline(code)) {
      line -= 1;
      column = lastLineLength;
    } else {
      column -= 1;
    }
    locStart.line = line;
    locStart.column = column;
    return true;
  };
  const eof = function(codepoint2) {
    if (codepoint2 === void 0)
      codepoint2 = code;
    return codepoint2 === -1;
  };
  const donothing = function() {
  };
  const parseerror = function() {
  };
  const consumeAToken = function() {
    consumeComments();
    consume();
    if (whitespace(code)) {
      while (whitespace(next()))
        consume();
      return new WhitespaceToken();
    } else if (code === 34) {
      return consumeAStringToken();
    } else if (code === 35) {
      if (namechar(next()) || areAValidEscape(next(1), next(2))) {
        const token = new HashToken("");
        if (wouldStartAnIdentifier(next(1), next(2), next(3)))
          token.type = "id";
        token.value = consumeAName();
        return token;
      } else {
        return new DelimToken(code);
      }
    } else if (code === 36) {
      if (next() === 61) {
        consume();
        return new SuffixMatchToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 39) {
      return consumeAStringToken();
    } else if (code === 40) {
      return new OpenParenToken();
    } else if (code === 41) {
      return new CloseParenToken();
    } else if (code === 42) {
      if (next() === 61) {
        consume();
        return new SubstringMatchToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 43) {
      if (startsWithANumber()) {
        reconsume();
        return consumeANumericToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 44) {
      return new CommaToken();
    } else if (code === 45) {
      if (startsWithANumber()) {
        reconsume();
        return consumeANumericToken();
      } else if (next(1) === 45 && next(2) === 62) {
        consume(2);
        return new CDCToken();
      } else if (startsWithAnIdentifier()) {
        reconsume();
        return consumeAnIdentlikeToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 46) {
      if (startsWithANumber()) {
        reconsume();
        return consumeANumericToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 58) {
      return new ColonToken();
    } else if (code === 59) {
      return new SemicolonToken();
    } else if (code === 60) {
      if (next(1) === 33 && next(2) === 45 && next(3) === 45) {
        consume(3);
        return new CDOToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 64) {
      if (wouldStartAnIdentifier(next(1), next(2), next(3)))
        return new AtKeywordToken(consumeAName());
      else
        return new DelimToken(code);
    } else if (code === 91) {
      return new OpenSquareToken();
    } else if (code === 92) {
      if (startsWithAValidEscape()) {
        reconsume();
        return consumeAnIdentlikeToken();
      } else {
        parseerror();
        return new DelimToken(code);
      }
    } else if (code === 93) {
      return new CloseSquareToken();
    } else if (code === 94) {
      if (next() === 61) {
        consume();
        return new PrefixMatchToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 123) {
      return new OpenCurlyToken();
    } else if (code === 124) {
      if (next() === 61) {
        consume();
        return new DashMatchToken();
      } else if (next() === 124) {
        consume();
        return new ColumnToken();
      } else {
        return new DelimToken(code);
      }
    } else if (code === 125) {
      return new CloseCurlyToken();
    } else if (code === 126) {
      if (next() === 61) {
        consume();
        return new IncludeMatchToken();
      } else {
        return new DelimToken(code);
      }
    } else if (digit(code)) {
      reconsume();
      return consumeANumericToken();
    } else if (namestartchar(code)) {
      reconsume();
      return consumeAnIdentlikeToken();
    } else if (eof()) {
      return new EOFToken();
    } else {
      return new DelimToken(code);
    }
  };
  const consumeComments = function() {
    while (next(1) === 47 && next(2) === 42) {
      consume(2);
      while (true) {
        consume();
        if (code === 42 && next() === 47) {
          consume();
          break;
        } else if (eof()) {
          parseerror();
          return;
        }
      }
    }
  };
  const consumeANumericToken = function() {
    const num = consumeANumber();
    if (wouldStartAnIdentifier(next(1), next(2), next(3))) {
      const token = new DimensionToken();
      token.value = num.value;
      token.repr = num.repr;
      token.type = num.type;
      token.unit = consumeAName();
      return token;
    } else if (next() === 37) {
      consume();
      const token = new PercentageToken();
      token.value = num.value;
      token.repr = num.repr;
      return token;
    } else {
      const token = new NumberToken();
      token.value = num.value;
      token.repr = num.repr;
      token.type = num.type;
      return token;
    }
  };
  const consumeAnIdentlikeToken = function() {
    const str2 = consumeAName();
    if (str2.toLowerCase() === "url" && next() === 40) {
      consume();
      while (whitespace(next(1)) && whitespace(next(2)))
        consume();
      if (next() === 34 || next() === 39)
        return new FunctionToken(str2);
      else if (whitespace(next()) && (next(2) === 34 || next(2) === 39))
        return new FunctionToken(str2);
      else
        return consumeAURLToken();
    } else if (next() === 40) {
      consume();
      return new FunctionToken(str2);
    } else {
      return new IdentToken(str2);
    }
  };
  const consumeAStringToken = function(endingCodePoint) {
    if (endingCodePoint === void 0)
      endingCodePoint = code;
    let string = "";
    while (consume()) {
      if (code === endingCodePoint || eof()) {
        return new StringToken(string);
      } else if (newline(code)) {
        parseerror();
        reconsume();
        return new BadStringToken();
      } else if (code === 92) {
        if (eof(next()))
          donothing();
        else if (newline(next()))
          consume();
        else
          string += stringFromCode(consumeEscape());
      } else {
        string += stringFromCode(code);
      }
    }
    throw new Error("Internal error");
  };
  const consumeAURLToken = function() {
    const token = new URLToken("");
    while (whitespace(next()))
      consume();
    if (eof(next()))
      return token;
    while (consume()) {
      if (code === 41 || eof()) {
        return token;
      } else if (whitespace(code)) {
        while (whitespace(next()))
          consume();
        if (next() === 41 || eof(next())) {
          consume();
          return token;
        } else {
          consumeTheRemnantsOfABadURL();
          return new BadURLToken();
        }
      } else if (code === 34 || code === 39 || code === 40 || nonprintable(code)) {
        parseerror();
        consumeTheRemnantsOfABadURL();
        return new BadURLToken();
      } else if (code === 92) {
        if (startsWithAValidEscape()) {
          token.value += stringFromCode(consumeEscape());
        } else {
          parseerror();
          consumeTheRemnantsOfABadURL();
          return new BadURLToken();
        }
      } else {
        token.value += stringFromCode(code);
      }
    }
    throw new Error("Internal error");
  };
  const consumeEscape = function() {
    consume();
    if (hexdigit(code)) {
      const digits = [code];
      for (let total = 0; total < 5; total++) {
        if (hexdigit(next())) {
          consume();
          digits.push(code);
        } else {
          break;
        }
      }
      if (whitespace(next()))
        consume();
      let value = parseInt(digits.map(function(x) {
        return String.fromCharCode(x);
      }).join(""), 16);
      if (value > maximumallowedcodepoint)
        value = 65533;
      return value;
    } else if (eof()) {
      return 65533;
    } else {
      return code;
    }
  };
  const areAValidEscape = function(c1, c2) {
    if (c1 !== 92)
      return false;
    if (newline(c2))
      return false;
    return true;
  };
  const startsWithAValidEscape = function() {
    return areAValidEscape(code, next());
  };
  const wouldStartAnIdentifier = function(c1, c2, c3) {
    if (c1 === 45)
      return namestartchar(c2) || c2 === 45 || areAValidEscape(c2, c3);
    else if (namestartchar(c1))
      return true;
    else if (c1 === 92)
      return areAValidEscape(c1, c2);
    else
      return false;
  };
  const startsWithAnIdentifier = function() {
    return wouldStartAnIdentifier(code, next(1), next(2));
  };
  const wouldStartANumber = function(c1, c2, c3) {
    if (c1 === 43 || c1 === 45) {
      if (digit(c2))
        return true;
      if (c2 === 46 && digit(c3))
        return true;
      return false;
    } else if (c1 === 46) {
      if (digit(c2))
        return true;
      return false;
    } else if (digit(c1)) {
      return true;
    } else {
      return false;
    }
  };
  const startsWithANumber = function() {
    return wouldStartANumber(code, next(1), next(2));
  };
  const consumeAName = function() {
    let result = "";
    while (consume()) {
      if (namechar(code)) {
        result += stringFromCode(code);
      } else if (startsWithAValidEscape()) {
        result += stringFromCode(consumeEscape());
      } else {
        reconsume();
        return result;
      }
    }
    throw new Error("Internal parse error");
  };
  const consumeANumber = function() {
    let repr = "";
    let type = "integer";
    if (next() === 43 || next() === 45) {
      consume();
      repr += stringFromCode(code);
    }
    while (digit(next())) {
      consume();
      repr += stringFromCode(code);
    }
    if (next(1) === 46 && digit(next(2))) {
      consume();
      repr += stringFromCode(code);
      consume();
      repr += stringFromCode(code);
      type = "number";
      while (digit(next())) {
        consume();
        repr += stringFromCode(code);
      }
    }
    const c1 = next(1), c2 = next(2), c3 = next(3);
    if ((c1 === 69 || c1 === 101) && digit(c2)) {
      consume();
      repr += stringFromCode(code);
      consume();
      repr += stringFromCode(code);
      type = "number";
      while (digit(next())) {
        consume();
        repr += stringFromCode(code);
      }
    } else if ((c1 === 69 || c1 === 101) && (c2 === 43 || c2 === 45) && digit(c3)) {
      consume();
      repr += stringFromCode(code);
      consume();
      repr += stringFromCode(code);
      consume();
      repr += stringFromCode(code);
      type = "number";
      while (digit(next())) {
        consume();
        repr += stringFromCode(code);
      }
    }
    const value = convertAStringToANumber(repr);
    return { type, value, repr };
  };
  const convertAStringToANumber = function(string) {
    return +string;
  };
  const consumeTheRemnantsOfABadURL = function() {
    while (consume()) {
      if (code === 41 || eof()) {
        return;
      } else if (startsWithAValidEscape()) {
        consumeEscape();
        donothing();
      } else {
        donothing();
      }
    }
  };
  let iterationCount = 0;
  while (!eof(next())) {
    tokens.push(consumeAToken());
    iterationCount++;
    if (iterationCount > str.length * 2)
      throw new Error("I'm infinite-looping!");
  }
  return tokens;
}
var CSSParserToken = class {
  constructor() {
    this.tokenType = "";
  }
  toJSON() {
    return { token: this.tokenType };
  }
  toString() {
    return this.tokenType;
  }
  toSource() {
    return "" + this;
  }
};
var BadStringToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "BADSTRING";
  }
};
var BadURLToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "BADURL";
  }
};
var WhitespaceToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "WHITESPACE";
  }
  toString() {
    return "WS";
  }
  toSource() {
    return " ";
  }
};
var CDOToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "CDO";
  }
  toSource() {
    return "<!--";
  }
};
var CDCToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "CDC";
  }
  toSource() {
    return "-->";
  }
};
var ColonToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = ":";
  }
};
var SemicolonToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = ";";
  }
};
var CommaToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = ",";
  }
};
var GroupingToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.value = "";
    this.mirror = "";
  }
};
var OpenCurlyToken = class extends GroupingToken {
  constructor() {
    super();
    this.tokenType = "{";
    this.value = "{";
    this.mirror = "}";
  }
};
var CloseCurlyToken = class extends GroupingToken {
  constructor() {
    super();
    this.tokenType = "}";
    this.value = "}";
    this.mirror = "{";
  }
};
var OpenSquareToken = class extends GroupingToken {
  constructor() {
    super();
    this.tokenType = "[";
    this.value = "[";
    this.mirror = "]";
  }
};
var CloseSquareToken = class extends GroupingToken {
  constructor() {
    super();
    this.tokenType = "]";
    this.value = "]";
    this.mirror = "[";
  }
};
var OpenParenToken = class extends GroupingToken {
  constructor() {
    super();
    this.tokenType = "(";
    this.value = "(";
    this.mirror = ")";
  }
};
var CloseParenToken = class extends GroupingToken {
  constructor() {
    super();
    this.tokenType = ")";
    this.value = ")";
    this.mirror = "(";
  }
};
var IncludeMatchToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "~=";
  }
};
var DashMatchToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "|=";
  }
};
var PrefixMatchToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "^=";
  }
};
var SuffixMatchToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "$=";
  }
};
var SubstringMatchToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "*=";
  }
};
var ColumnToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "||";
  }
};
var EOFToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.tokenType = "EOF";
  }
  toSource() {
    return "";
  }
};
var DelimToken = class extends CSSParserToken {
  constructor(code) {
    super();
    this.tokenType = "DELIM";
    this.value = "";
    this.value = stringFromCode(code);
  }
  toString() {
    return "DELIM(" + this.value + ")";
  }
  toJSON() {
    const json = this.constructor.prototype.constructor.prototype.toJSON.call(this);
    json.value = this.value;
    return json;
  }
  toSource() {
    if (this.value === "\\\\")
      return "\\\\\\n";
    else
      return this.value;
  }
};
var StringValuedToken = class extends CSSParserToken {
  constructor() {
    super(...arguments);
    this.value = "";
  }
  ASCIIMatch(str) {
    return this.value.toLowerCase() === str.toLowerCase();
  }
  toJSON() {
    const json = this.constructor.prototype.constructor.prototype.toJSON.call(this);
    json.value = this.value;
    return json;
  }
};
var IdentToken = class extends StringValuedToken {
  constructor(val) {
    super();
    this.tokenType = "IDENT";
    this.value = val;
  }
  toString() {
    return "IDENT(" + this.value + ")";
  }
  toSource() {
    return escapeIdent(this.value);
  }
};
var FunctionToken = class extends StringValuedToken {
  constructor(val) {
    super();
    this.tokenType = "FUNCTION";
    this.value = val;
    this.mirror = ")";
  }
  toString() {
    return "FUNCTION(" + this.value + ")";
  }
  toSource() {
    return escapeIdent(this.value) + "(";
  }
};
var AtKeywordToken = class extends StringValuedToken {
  constructor(val) {
    super();
    this.tokenType = "AT-KEYWORD";
    this.value = val;
  }
  toString() {
    return "AT(" + this.value + ")";
  }
  toSource() {
    return "@" + escapeIdent(this.value);
  }
};
var HashToken = class extends StringValuedToken {
  constructor(val) {
    super();
    this.tokenType = "HASH";
    this.value = val;
    this.type = "unrestricted";
  }
  toString() {
    return "HASH(" + this.value + ")";
  }
  toJSON() {
    const json = this.constructor.prototype.constructor.prototype.toJSON.call(this);
    json.value = this.value;
    json.type = this.type;
    return json;
  }
  toSource() {
    if (this.type === "id")
      return "#" + escapeIdent(this.value);
    else
      return "#" + escapeHash(this.value);
  }
};
var StringToken = class extends StringValuedToken {
  constructor(val) {
    super();
    this.tokenType = "STRING";
    this.value = val;
  }
  toString() {
    return '"' + escapeString(this.value) + '"';
  }
};
var URLToken = class extends StringValuedToken {
  constructor(val) {
    super();
    this.tokenType = "URL";
    this.value = val;
  }
  toString() {
    return "URL(" + this.value + ")";
  }
  toSource() {
    return 'url("' + escapeString(this.value) + '")';
  }
};
var NumberToken = class extends CSSParserToken {
  constructor() {
    super();
    this.tokenType = "NUMBER";
    this.type = "integer";
    this.repr = "";
  }
  toString() {
    if (this.type === "integer")
      return "INT(" + this.value + ")";
    return "NUMBER(" + this.value + ")";
  }
  toJSON() {
    const json = super.toJSON();
    json.value = this.value;
    json.type = this.type;
    json.repr = this.repr;
    return json;
  }
  toSource() {
    return this.repr;
  }
};
var PercentageToken = class extends CSSParserToken {
  constructor() {
    super();
    this.tokenType = "PERCENTAGE";
    this.repr = "";
  }
  toString() {
    return "PERCENTAGE(" + this.value + ")";
  }
  toJSON() {
    const json = this.constructor.prototype.constructor.prototype.toJSON.call(this);
    json.value = this.value;
    json.repr = this.repr;
    return json;
  }
  toSource() {
    return this.repr + "%";
  }
};
var DimensionToken = class extends CSSParserToken {
  constructor() {
    super();
    this.tokenType = "DIMENSION";
    this.type = "integer";
    this.repr = "";
    this.unit = "";
  }
  toString() {
    return "DIM(" + this.value + "," + this.unit + ")";
  }
  toJSON() {
    const json = this.constructor.prototype.constructor.prototype.toJSON.call(this);
    json.value = this.value;
    json.type = this.type;
    json.repr = this.repr;
    json.unit = this.unit;
    return json;
  }
  toSource() {
    const source = this.repr;
    let unit = escapeIdent(this.unit);
    if (unit[0].toLowerCase() === "e" && (unit[1] === "-" || between(unit.charCodeAt(1), 48, 57))) {
      unit = "\\\\65 " + unit.slice(1, unit.length);
    }
    return source + unit;
  }
};
function escapeIdent(string) {
  string = "" + string;
  let result = "";
  const firstcode = string.charCodeAt(0);
  for (let i = 0; i < string.length; i++) {
    const code = string.charCodeAt(i);
    if (code === 0)
      throw new InvalidCharacterError("Invalid character: the input contains U+0000.");
    if (between(code, 1, 31) || code === 127 || i === 0 && between(code, 48, 57) || i === 1 && between(code, 48, 57) && firstcode === 45)
      result += "\\\\" + code.toString(16) + " ";
    else if (code >= 128 || code === 45 || code === 95 || between(code, 48, 57) || between(code, 65, 90) || between(code, 97, 122))
      result += string[i];
    else
      result += "\\\\" + string[i];
  }
  return result;
}
function escapeHash(string) {
  string = "" + string;
  let result = "";
  for (let i = 0; i < string.length; i++) {
    const code = string.charCodeAt(i);
    if (code === 0)
      throw new InvalidCharacterError("Invalid character: the input contains U+0000.");
    if (code >= 128 || code === 45 || code === 95 || between(code, 48, 57) || between(code, 65, 90) || between(code, 97, 122))
      result += string[i];
    else
      result += "\\\\" + code.toString(16) + " ";
  }
  return result;
}
function escapeString(string) {
  string = "" + string;
  let result = "";
  for (let i = 0; i < string.length; i++) {
    const code = string.charCodeAt(i);
    if (code === 0)
      throw new InvalidCharacterError("Invalid character: the input contains U+0000.");
    if (between(code, 1, 31) || code === 127)
      result += "\\\\" + code.toString(16) + " ";
    else if (code === 34 || code === 92)
      result += "\\\\" + string[i];
    else
      result += string[i];
  }
  return result;
}

// packages/playwright-core/src/utils/isomorphic/cssParser.ts
var InvalidSelectorError = class extends Error {
};
function parseCSS(selector, customNames) {
  let tokens;
  try {
    tokens = tokenize(selector);
    if (!(tokens[tokens.length - 1] instanceof EOFToken))
      tokens.push(new EOFToken());
  } catch (e) {
    const newMessage = e.message + \` while parsing css selector "\${selector}". Did you mean to CSS.escape it?\`;
    const index = (e.stack || "").indexOf(e.message);
    if (index !== -1)
      e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);
    e.message = newMessage;
    throw e;
  }
  const unsupportedToken = tokens.find((token) => {
    return token instanceof AtKeywordToken || token instanceof BadStringToken || token instanceof BadURLToken || token instanceof ColumnToken || token instanceof CDOToken || token instanceof CDCToken || token instanceof SemicolonToken || // TODO: Consider using these for something, e.g. to escape complex strings.
    // For example :xpath{ (//div/bar[@attr="foo"])[2]/baz }
    // Or this way :xpath( {complex-xpath-goes-here("hello")} )
    token instanceof OpenCurlyToken || token instanceof CloseCurlyToken || // TODO: Consider treating these as strings?
    token instanceof URLToken || token instanceof PercentageToken;
  });
  if (unsupportedToken)
    throw new InvalidSelectorError(\`Unsupported token "\${unsupportedToken.toSource()}" while parsing css selector "\${selector}". Did you mean to CSS.escape it?\`);
  let pos = 0;
  const names = /* @__PURE__ */ new Set();
  function unexpected() {
    return new InvalidSelectorError(\`Unexpected token "\${tokens[pos].toSource()}" while parsing css selector "\${selector}". Did you mean to CSS.escape it?\`);
  }
  function skipWhitespace() {
    while (tokens[pos] instanceof WhitespaceToken)
      pos++;
  }
  function isIdent(p = pos) {
    return tokens[p] instanceof IdentToken;
  }
  function isString(p = pos) {
    return tokens[p] instanceof StringToken;
  }
  function isNumber(p = pos) {
    return tokens[p] instanceof NumberToken;
  }
  function isComma(p = pos) {
    return tokens[p] instanceof CommaToken;
  }
  function isOpenParen(p = pos) {
    return tokens[p] instanceof OpenParenToken;
  }
  function isCloseParen(p = pos) {
    return tokens[p] instanceof CloseParenToken;
  }
  function isFunction(p = pos) {
    return tokens[p] instanceof FunctionToken;
  }
  function isStar(p = pos) {
    return tokens[p] instanceof DelimToken && tokens[p].value === "*";
  }
  function isEOF(p = pos) {
    return tokens[p] instanceof EOFToken;
  }
  function isClauseCombinator(p = pos) {
    return tokens[p] instanceof DelimToken && [">", "+", "~"].includes(tokens[p].value);
  }
  function isSelectorClauseEnd(p = pos) {
    return isComma(p) || isCloseParen(p) || isEOF(p) || isClauseCombinator(p) || tokens[p] instanceof WhitespaceToken;
  }
  function consumeFunctionArguments() {
    const result2 = [consumeArgument()];
    while (true) {
      skipWhitespace();
      if (!isComma())
        break;
      pos++;
      result2.push(consumeArgument());
    }
    return result2;
  }
  function consumeArgument() {
    skipWhitespace();
    if (isNumber())
      return tokens[pos++].value;
    if (isString())
      return tokens[pos++].value;
    return consumeComplexSelector();
  }
  function consumeComplexSelector() {
    const result2 = { simples: [] };
    skipWhitespace();
    if (isClauseCombinator()) {
      result2.simples.push({ selector: { functions: [{ name: "scope", args: [] }] }, combinator: "" });
    } else {
      result2.simples.push({ selector: consumeSimpleSelector(), combinator: "" });
    }
    while (true) {
      skipWhitespace();
      if (isClauseCombinator()) {
        result2.simples[result2.simples.length - 1].combinator = tokens[pos++].value;
        skipWhitespace();
      } else if (isSelectorClauseEnd()) {
        break;
      }
      result2.simples.push({ combinator: "", selector: consumeSimpleSelector() });
    }
    return result2;
  }
  function consumeSimpleSelector() {
    let rawCSSString = "";
    const functions = [];
    while (!isSelectorClauseEnd()) {
      if (isIdent() || isStar()) {
        rawCSSString += tokens[pos++].toSource();
      } else if (tokens[pos] instanceof HashToken) {
        rawCSSString += tokens[pos++].toSource();
      } else if (tokens[pos] instanceof DelimToken && tokens[pos].value === ".") {
        pos++;
        if (isIdent())
          rawCSSString += "." + tokens[pos++].toSource();
        else
          throw unexpected();
      } else if (tokens[pos] instanceof ColonToken) {
        pos++;
        if (isIdent()) {
          if (!customNames.has(tokens[pos].value.toLowerCase())) {
            rawCSSString += ":" + tokens[pos++].toSource();
          } else {
            const name = tokens[pos++].value.toLowerCase();
            functions.push({ name, args: [] });
            names.add(name);
          }
        } else if (isFunction()) {
          const name = tokens[pos++].value.toLowerCase();
          if (!customNames.has(name)) {
            rawCSSString += \`:\${name}(\${consumeBuiltinFunctionArguments()})\`;
          } else {
            functions.push({ name, args: consumeFunctionArguments() });
            names.add(name);
          }
          skipWhitespace();
          if (!isCloseParen())
            throw unexpected();
          pos++;
        } else {
          throw unexpected();
        }
      } else if (tokens[pos] instanceof OpenSquareToken) {
        rawCSSString += "[";
        pos++;
        while (!(tokens[pos] instanceof CloseSquareToken) && !isEOF())
          rawCSSString += tokens[pos++].toSource();
        if (!(tokens[pos] instanceof CloseSquareToken))
          throw unexpected();
        rawCSSString += "]";
        pos++;
      } else {
        throw unexpected();
      }
    }
    if (!rawCSSString && !functions.length)
      throw unexpected();
    return { css: rawCSSString || void 0, functions };
  }
  function consumeBuiltinFunctionArguments() {
    let s = "";
    let balance = 1;
    while (!isEOF()) {
      if (isOpenParen() || isFunction())
        balance++;
      if (isCloseParen())
        balance--;
      if (!balance)
        break;
      s += tokens[pos++].toSource();
    }
    return s;
  }
  const result = consumeFunctionArguments();
  if (!isEOF())
    throw unexpected();
  if (result.some((arg) => typeof arg !== "object" || !("simples" in arg)))
    throw new InvalidSelectorError(\`Error while parsing css selector "\${selector}". Did you mean to CSS.escape it?\`);
  return { selector: result, names: Array.from(names) };
}

// packages/playwright-core/src/utils/isomorphic/selectorParser.ts
var kNestedSelectorNames = /* @__PURE__ */ new Set(["internal:has", "internal:has-not", "internal:and", "internal:or", "internal:chain", "left-of", "right-of", "above", "below", "near"]);
var kNestedSelectorNamesWithDistance = /* @__PURE__ */ new Set(["left-of", "right-of", "above", "below", "near"]);
var customCSSNames = /* @__PURE__ */ new Set(["not", "is", "where", "has", "scope", "light", "visible", "text", "text-matches", "text-is", "has-text", "above", "below", "right-of", "left-of", "near", "nth-match"]);
function parseSelector(selector) {
  const parsedStrings = parseSelectorString(selector);
  const parts = [];
  for (const part of parsedStrings.parts) {
    if (part.name === "css" || part.name === "css:light") {
      if (part.name === "css:light")
        part.body = ":light(" + part.body + ")";
      const parsedCSS = parseCSS(part.body, customCSSNames);
      parts.push({
        name: "css",
        body: parsedCSS.selector,
        source: part.body
      });
      continue;
    }
    if (kNestedSelectorNames.has(part.name)) {
      let innerSelector;
      let distance;
      try {
        const unescaped = JSON.parse("[" + part.body + "]");
        if (!Array.isArray(unescaped) || unescaped.length < 1 || unescaped.length > 2 || typeof unescaped[0] !== "string")
          throw new InvalidSelectorError(\`Malformed selector: \${part.name}=\` + part.body);
        innerSelector = unescaped[0];
        if (unescaped.length === 2) {
          if (typeof unescaped[1] !== "number" || !kNestedSelectorNamesWithDistance.has(part.name))
            throw new InvalidSelectorError(\`Malformed selector: \${part.name}=\` + part.body);
          distance = unescaped[1];
        }
      } catch (e) {
        throw new InvalidSelectorError(\`Malformed selector: \${part.name}=\` + part.body);
      }
      const nested = { name: part.name, source: part.body, body: { parsed: parseSelector(innerSelector), distance } };
      const lastFrame = [...nested.body.parsed.parts].reverse().find((part2) => part2.name === "internal:control" && part2.body === "enter-frame");
      const lastFrameIndex = lastFrame ? nested.body.parsed.parts.indexOf(lastFrame) : -1;
      if (lastFrameIndex !== -1 && selectorPartsEqual(nested.body.parsed.parts.slice(0, lastFrameIndex + 1), parts.slice(0, lastFrameIndex + 1)))
        nested.body.parsed.parts.splice(0, lastFrameIndex + 1);
      parts.push(nested);
      continue;
    }
    parts.push({ ...part, source: part.body });
  }
  if (kNestedSelectorNames.has(parts[0].name))
    throw new InvalidSelectorError(\`"\${parts[0].name}" selector cannot be first\`);
  return {
    capture: parsedStrings.capture,
    parts
  };
}
function selectorPartsEqual(list1, list2) {
  return stringifySelector({ parts: list1 }) === stringifySelector({ parts: list2 });
}
function stringifySelector(selector, forceEngineName) {
  if (typeof selector === "string")
    return selector;
  return selector.parts.map((p, i) => {
    let includeEngine = true;
    if (!forceEngineName && i !== selector.capture) {
      if (p.name === "css")
        includeEngine = false;
      else if (p.name === "xpath" && p.source.startsWith("//") || p.source.startsWith(".."))
        includeEngine = false;
    }
    const prefix = includeEngine ? p.name + "=" : "";
    return \`\${i === selector.capture ? "*" : ""}\${prefix}\${p.source}\`;
  }).join(" >> ");
}
function visitAllSelectorParts(selector, visitor) {
  const visit = (selector2, nested) => {
    for (const part of selector2.parts) {
      visitor(part, nested);
      if (kNestedSelectorNames.has(part.name))
        visit(part.body.parsed, true);
    }
  };
  visit(selector, false);
}
function parseSelectorString(selector) {
  let index = 0;
  let quote;
  let start = 0;
  const result = { parts: [] };
  const append = () => {
    const part = selector.substring(start, index).trim();
    const eqIndex = part.indexOf("=");
    let name;
    let body;
    if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {
      name = part.substring(0, eqIndex).trim();
      body = part.substring(eqIndex + 1);
    } else if (part.length > 1 && part[0] === '"' && part[part.length - 1] === '"') {
      name = "text";
      body = part;
    } else if (part.length > 1 && part[0] === "'" && part[part.length - 1] === "'") {
      name = "text";
      body = part;
    } else if (/^\\(*\\/\\//.test(part) || part.startsWith("..")) {
      name = "xpath";
      body = part;
    } else {
      name = "css";
      body = part;
    }
    let capture = false;
    if (name[0] === "*") {
      capture = true;
      name = name.substring(1);
    }
    result.parts.push({ name, body });
    if (capture) {
      if (result.capture !== void 0)
        throw new InvalidSelectorError(\`Only one of the selectors can capture using * modifier\`);
      result.capture = result.parts.length - 1;
    }
  };
  if (!selector.includes(">>")) {
    index = selector.length;
    append();
    return result;
  }
  const shouldIgnoreTextSelectorQuote = () => {
    const prefix = selector.substring(start, index);
    const match = prefix.match(/^\\s*text\\s*=(.*)$/);
    return !!match && !!match[1];
  };
  while (index < selector.length) {
    const c = selector[index];
    if (c === "\\\\" && index + 1 < selector.length) {
      index += 2;
    } else if (c === quote) {
      quote = void 0;
      index++;
    } else if (!quote && (c === '"' || c === "'" || c === "\`") && !shouldIgnoreTextSelectorQuote()) {
      quote = c;
      index++;
    } else if (!quote && c === ">" && selector[index + 1] === ">") {
      append();
      index += 2;
      start = index;
    } else {
      index++;
    }
  }
  append();
  return result;
}
function parseAttributeSelector(selector, allowUnquotedStrings) {
  let wp = 0;
  let EOL = selector.length === 0;
  const next = () => selector[wp] || "";
  const eat1 = () => {
    const result2 = next();
    ++wp;
    EOL = wp >= selector.length;
    return result2;
  };
  const syntaxError = (stage) => {
    if (EOL)
      throw new InvalidSelectorError(\`Unexpected end of selector while parsing selector \\\`\${selector}\\\`\`);
    throw new InvalidSelectorError(\`Error while parsing selector \\\`\${selector}\\\` - unexpected symbol "\${next()}" at position \${wp}\` + (stage ? " during " + stage : ""));
  };
  function skipSpaces() {
    while (!EOL && /\\s/.test(next()))
      eat1();
  }
  function isCSSNameChar(char) {
    return char >= "\\x80" || char >= "0" && char <= "9" || char >= "A" && char <= "Z" || char >= "a" && char <= "z" || char >= "0" && char <= "9" || char === "_" || char === "-";
  }
  function readIdentifier() {
    let result2 = "";
    skipSpaces();
    while (!EOL && isCSSNameChar(next()))
      result2 += eat1();
    return result2;
  }
  function readQuotedString(quote) {
    let result2 = eat1();
    if (result2 !== quote)
      syntaxError("parsing quoted string");
    while (!EOL && next() !== quote) {
      if (next() === "\\\\")
        eat1();
      result2 += eat1();
    }
    if (next() !== quote)
      syntaxError("parsing quoted string");
    result2 += eat1();
    return result2;
  }
  function readRegularExpression() {
    if (eat1() !== "/")
      syntaxError("parsing regular expression");
    let source = "";
    let inClass = false;
    while (!EOL) {
      if (next() === "\\\\") {
        source += eat1();
        if (EOL)
          syntaxError("parsing regular expression");
      } else if (inClass && next() === "]") {
        inClass = false;
      } else if (!inClass && next() === "[") {
        inClass = true;
      } else if (!inClass && next() === "/") {
        break;
      }
      source += eat1();
    }
    if (eat1() !== "/")
      syntaxError("parsing regular expression");
    let flags = "";
    while (!EOL && next().match(/[dgimsuy]/))
      flags += eat1();
    try {
      return new RegExp(source, flags);
    } catch (e) {
      throw new InvalidSelectorError(\`Error while parsing selector \\\`\${selector}\\\`: \${e.message}\`);
    }
  }
  function readAttributeToken() {
    let token = "";
    skipSpaces();
    if (next() === \`'\` || next() === \`"\`)
      token = readQuotedString(next()).slice(1, -1);
    else
      token = readIdentifier();
    if (!token)
      syntaxError("parsing property path");
    return token;
  }
  function readOperator() {
    skipSpaces();
    let op = "";
    if (!EOL)
      op += eat1();
    if (!EOL && op !== "=")
      op += eat1();
    if (!["=", "*=", "^=", "$=", "|=", "~="].includes(op))
      syntaxError("parsing operator");
    return op;
  }
  function readAttribute() {
    eat1();
    const jsonPath = [];
    jsonPath.push(readAttributeToken());
    skipSpaces();
    while (next() === ".") {
      eat1();
      jsonPath.push(readAttributeToken());
      skipSpaces();
    }
    if (next() === "]") {
      eat1();
      return { name: jsonPath.join("."), jsonPath, op: "<truthy>", value: null, caseSensitive: false };
    }
    const operator = readOperator();
    let value = void 0;
    let caseSensitive = true;
    skipSpaces();
    if (next() === "/") {
      if (operator !== "=")
        throw new InvalidSelectorError(\`Error while parsing selector \\\`\${selector}\\\` - cannot use \${operator} in attribute with regular expression\`);
      value = readRegularExpression();
    } else if (next() === \`'\` || next() === \`"\`) {
      value = readQuotedString(next()).slice(1, -1);
      skipSpaces();
      if (next() === "i" || next() === "I") {
        caseSensitive = false;
        eat1();
      } else if (next() === "s" || next() === "S") {
        caseSensitive = true;
        eat1();
      }
    } else {
      value = "";
      while (!EOL && (isCSSNameChar(next()) || next() === "+" || next() === "."))
        value += eat1();
      if (value === "true") {
        value = true;
      } else if (value === "false") {
        value = false;
      } else {
        if (!allowUnquotedStrings) {
          value = +value;
          if (Number.isNaN(value))
            syntaxError("parsing attribute value");
        }
      }
    }
    skipSpaces();
    if (next() !== "]")
      syntaxError("parsing attribute value");
    eat1();
    if (operator !== "=" && typeof value !== "string")
      throw new InvalidSelectorError(\`Error while parsing selector \\\`\${selector}\\\` - cannot use \${operator} in attribute with non-string matching value - \${value}\`);
    return { name: jsonPath.join("."), jsonPath, op: operator, value, caseSensitive };
  }
  const result = {
    name: "",
    attributes: []
  };
  result.name = readIdentifier();
  skipSpaces();
  while (next() === "[") {
    result.attributes.push(readAttribute());
    skipSpaces();
  }
  if (!EOL)
    syntaxError(void 0);
  if (!result.name && !result.attributes.length)
    throw new InvalidSelectorError(\`Error while parsing selector \\\`\${selector}\\\` - selector cannot be empty\`);
  return result;
}

// packages/playwright-core/src/utils/isomorphic/stringUtils.ts
function escapeWithQuotes(text, char = "'") {
  const stringified = JSON.stringify(text);
  const escapedText = stringified.substring(1, stringified.length - 1).replace(/\\\\"/g, '"');
  if (char === "'")
    return char + escapedText.replace(/[']/g, "\\\\'") + char;
  if (char === '"')
    return char + escapedText.replace(/["]/g, '\\\\"') + char;
  if (char === "\`")
    return char + escapedText.replace(/[\`]/g, "\`") + char;
  throw new Error("Invalid escape char");
}
function toTitleCase(name) {
  return name.charAt(0).toUpperCase() + name.substring(1);
}
function toSnakeCase(name) {
  return name.replace(/([a-z0-9])([A-Z])/g, "$1_$2").replace(/([A-Z])([A-Z][a-z])/g, "$1_$2").toLowerCase();
}
function quoteCSSAttributeValue(text) {
  return \`"\${text.replace(/["\\\\]/g, (char) => "\\\\" + char)}"\`;
}
var normalizedWhitespaceCache;
function cacheNormalizedWhitespaces() {
  normalizedWhitespaceCache = /* @__PURE__ */ new Map();
}
function normalizeWhiteSpace(text) {
  let result = normalizedWhitespaceCache == null ? void 0 : normalizedWhitespaceCache.get(text);
  if (result === void 0) {
    result = text.replace(/[\\u200b\\u00ad]/g, "").trim().replace(/\\s+/g, " ");
    normalizedWhitespaceCache == null ? void 0 : normalizedWhitespaceCache.set(text, result);
  }
  return result;
}
function normalizeEscapedRegexQuotes(source) {
  return source.replace(/(^|[^\\\\])(\\\\\\\\)*\\\\(['"\`])/g, "$1$2$3");
}
function escapeRegexForSelector(re) {
  if (re.unicode || re.unicodeSets)
    return String(re);
  return String(re).replace(/(^|[^\\\\])(\\\\\\\\)*(["'\`])/g, "$1$2\\\\$3").replace(/>>/g, "\\\\>\\\\>");
}
function escapeForTextSelector(text, exact) {
  if (typeof text !== "string")
    return escapeRegexForSelector(text);
  return \`\${JSON.stringify(text)}\${exact ? "s" : "i"}\`;
}
function escapeForAttributeSelector(value, exact) {
  if (typeof value !== "string")
    return escapeRegexForSelector(value);
  return \`"\${value.replace(/\\\\/g, "\\\\\\\\").replace(/["]/g, '\\\\"')}"\${exact ? "s" : "i"}\`;
}
function trimString(input, cap, suffix = "") {
  if (input.length <= cap)
    return input;
  const chars = [...input];
  if (chars.length > cap)
    return chars.slice(0, cap - suffix.length).join("") + suffix;
  return chars.join("");
}
function trimStringWithEllipsis(input, cap) {
  return trimString(input, cap, "\\u2026");
}
function escapeRegExp(s) {
  return s.replace(/[.*+?^\${}()|[\\]\\\\]/g, "\\\\$&");
}
function longestCommonSubstring(s1, s2) {
  const n = s1.length;
  const m = s2.length;
  let maxLen = 0;
  let endingIndex = 0;
  const dp = Array(n + 1).fill(null).map(() => Array(m + 1).fill(0));
  for (let i = 1; i <= n; i++) {
    for (let j = 1; j <= m; j++) {
      if (s1[i - 1] === s2[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1;
        if (dp[i][j] > maxLen) {
          maxLen = dp[i][j];
          endingIndex = i;
        }
      }
    }
  }
  return s1.slice(endingIndex - maxLen, endingIndex);
}

// packages/playwright-core/src/utils/isomorphic/locatorGenerators.ts
function asLocator(lang, selector, isFrameLocator = false) {
  return asLocators(lang, selector, isFrameLocator, 1)[0];
}
function asLocators(lang, selector, isFrameLocator = false, maxOutputSize = 20, preferredQuote) {
  try {
    return innerAsLocators(new generators[lang](preferredQuote), parseSelector(selector), isFrameLocator, maxOutputSize);
  } catch (e) {
    return [selector];
  }
}
function innerAsLocators(factory, parsed, isFrameLocator = false, maxOutputSize = 20) {
  const parts = [...parsed.parts];
  const tokens = [];
  let nextBase = isFrameLocator ? "frame-locator" : "page";
  for (let index = 0; index < parts.length; index++) {
    const part = parts[index];
    const base = nextBase;
    nextBase = "locator";
    if (part.name === "internal:describe")
      continue;
    if (part.name === "nth") {
      if (part.body === "0")
        tokens.push([factory.generateLocator(base, "first", ""), factory.generateLocator(base, "nth", "0")]);
      else if (part.body === "-1")
        tokens.push([factory.generateLocator(base, "last", ""), factory.generateLocator(base, "nth", "-1")]);
      else
        tokens.push([factory.generateLocator(base, "nth", part.body)]);
      continue;
    }
    if (part.name === "visible") {
      tokens.push([factory.generateLocator(base, "visible", part.body), factory.generateLocator(base, "default", \`visible=\${part.body}\`)]);
      continue;
    }
    if (part.name === "internal:text") {
      const { exact, text } = detectExact(part.body);
      tokens.push([factory.generateLocator(base, "text", text, { exact })]);
      continue;
    }
    if (part.name === "internal:has-text") {
      const { exact, text } = detectExact(part.body);
      if (!exact) {
        tokens.push([factory.generateLocator(base, "has-text", text, { exact })]);
        continue;
      }
    }
    if (part.name === "internal:has-not-text") {
      const { exact, text } = detectExact(part.body);
      if (!exact) {
        tokens.push([factory.generateLocator(base, "has-not-text", text, { exact })]);
        continue;
      }
    }
    if (part.name === "internal:has") {
      const inners = innerAsLocators(factory, part.body.parsed, false, maxOutputSize);
      tokens.push(inners.map((inner) => factory.generateLocator(base, "has", inner)));
      continue;
    }
    if (part.name === "internal:has-not") {
      const inners = innerAsLocators(factory, part.body.parsed, false, maxOutputSize);
      tokens.push(inners.map((inner) => factory.generateLocator(base, "hasNot", inner)));
      continue;
    }
    if (part.name === "internal:and") {
      const inners = innerAsLocators(factory, part.body.parsed, false, maxOutputSize);
      tokens.push(inners.map((inner) => factory.generateLocator(base, "and", inner)));
      continue;
    }
    if (part.name === "internal:or") {
      const inners = innerAsLocators(factory, part.body.parsed, false, maxOutputSize);
      tokens.push(inners.map((inner) => factory.generateLocator(base, "or", inner)));
      continue;
    }
    if (part.name === "internal:chain") {
      const inners = innerAsLocators(factory, part.body.parsed, false, maxOutputSize);
      tokens.push(inners.map((inner) => factory.generateLocator(base, "chain", inner)));
      continue;
    }
    if (part.name === "internal:label") {
      const { exact, text } = detectExact(part.body);
      tokens.push([factory.generateLocator(base, "label", text, { exact })]);
      continue;
    }
    if (part.name === "internal:role") {
      const attrSelector = parseAttributeSelector(part.body, true);
      const options = { attrs: [] };
      for (const attr of attrSelector.attributes) {
        if (attr.name === "name") {
          options.exact = attr.caseSensitive;
          options.name = attr.value;
        } else {
          if (attr.name === "level" && typeof attr.value === "string")
            attr.value = +attr.value;
          options.attrs.push({ name: attr.name === "include-hidden" ? "includeHidden" : attr.name, value: attr.value });
        }
      }
      tokens.push([factory.generateLocator(base, "role", attrSelector.name, options)]);
      continue;
    }
    if (part.name === "internal:testid") {
      const attrSelector = parseAttributeSelector(part.body, true);
      const { value } = attrSelector.attributes[0];
      tokens.push([factory.generateLocator(base, "test-id", value)]);
      continue;
    }
    if (part.name === "internal:attr") {
      const attrSelector = parseAttributeSelector(part.body, true);
      const { name, value, caseSensitive } = attrSelector.attributes[0];
      const text = value;
      const exact = !!caseSensitive;
      if (name === "placeholder") {
        tokens.push([factory.generateLocator(base, "placeholder", text, { exact })]);
        continue;
      }
      if (name === "alt") {
        tokens.push([factory.generateLocator(base, "alt", text, { exact })]);
        continue;
      }
      if (name === "title") {
        tokens.push([factory.generateLocator(base, "title", text, { exact })]);
        continue;
      }
    }
    if (part.name === "internal:control" && part.body === "enter-frame") {
      const lastTokens = tokens[tokens.length - 1];
      const lastPart = parts[index - 1];
      const transformed = lastTokens.map((token) => factory.chainLocators([token, factory.generateLocator(base, "frame", "")]));
      if (["xpath", "css"].includes(lastPart.name)) {
        transformed.push(
          factory.generateLocator(base, "frame-locator", stringifySelector({ parts: [lastPart] })),
          factory.generateLocator(base, "frame-locator", stringifySelector({ parts: [lastPart] }, true))
        );
      }
      lastTokens.splice(0, lastTokens.length, ...transformed);
      nextBase = "frame-locator";
      continue;
    }
    const nextPart = parts[index + 1];
    const selectorPart = stringifySelector({ parts: [part] });
    const locatorPart = factory.generateLocator(base, "default", selectorPart);
    if (nextPart && ["internal:has-text", "internal:has-not-text"].includes(nextPart.name)) {
      const { exact, text } = detectExact(nextPart.body);
      if (!exact) {
        const nextLocatorPart = factory.generateLocator("locator", nextPart.name === "internal:has-text" ? "has-text" : "has-not-text", text, { exact });
        const options = {};
        if (nextPart.name === "internal:has-text")
          options.hasText = text;
        else
          options.hasNotText = text;
        const combinedPart = factory.generateLocator(base, "default", selectorPart, options);
        tokens.push([factory.chainLocators([locatorPart, nextLocatorPart]), combinedPart]);
        index++;
        continue;
      }
    }
    let locatorPartWithEngine;
    if (["xpath", "css"].includes(part.name)) {
      const selectorPart2 = stringifySelector(
        { parts: [part] },
        /* forceEngineName */
        true
      );
      locatorPartWithEngine = factory.generateLocator(base, "default", selectorPart2);
    }
    tokens.push([locatorPart, locatorPartWithEngine].filter(Boolean));
  }
  return combineTokens(factory, tokens, maxOutputSize);
}
function combineTokens(factory, tokens, maxOutputSize) {
  const currentTokens = tokens.map(() => "");
  const result = [];
  const visit = (index) => {
    if (index === tokens.length) {
      result.push(factory.chainLocators(currentTokens));
      return result.length < maxOutputSize;
    }
    for (const taken of tokens[index]) {
      currentTokens[index] = taken;
      if (!visit(index + 1))
        return false;
    }
    return true;
  };
  visit(0);
  return result;
}
function detectExact(text) {
  let exact = false;
  const match = text.match(/^\\/(.*)\\/([igm]*)$/);
  if (match)
    return { text: new RegExp(match[1], match[2]) };
  if (text.endsWith('"')) {
    text = JSON.parse(text);
    exact = true;
  } else if (text.endsWith('"s')) {
    text = JSON.parse(text.substring(0, text.length - 1));
    exact = true;
  } else if (text.endsWith('"i')) {
    text = JSON.parse(text.substring(0, text.length - 1));
    exact = false;
  }
  return { exact, text };
}
var JavaScriptLocatorFactory = class {
  constructor(preferredQuote) {
    this.preferredQuote = preferredQuote;
  }
  generateLocator(base, kind, body, options = {}) {
    switch (kind) {
      case "default":
        if (options.hasText !== void 0)
          return \`locator(\${this.quote(body)}, { hasText: \${this.toHasText(options.hasText)} })\`;
        if (options.hasNotText !== void 0)
          return \`locator(\${this.quote(body)}, { hasNotText: \${this.toHasText(options.hasNotText)} })\`;
        return \`locator(\${this.quote(body)})\`;
      case "frame-locator":
        return \`frameLocator(\${this.quote(body)})\`;
      case "frame":
        return \`contentFrame()\`;
      case "nth":
        return \`nth(\${body})\`;
      case "first":
        return \`first()\`;
      case "last":
        return \`last()\`;
      case "visible":
        return \`filter({ visible: \${body === "true" ? "true" : "false"} })\`;
      case "role":
        const attrs = [];
        if (isRegExp(options.name)) {
          attrs.push(\`name: \${this.regexToSourceString(options.name)}\`);
        } else if (typeof options.name === "string") {
          attrs.push(\`name: \${this.quote(options.name)}\`);
          if (options.exact)
            attrs.push(\`exact: true\`);
        }
        for (const { name, value } of options.attrs)
          attrs.push(\`\${name}: \${typeof value === "string" ? this.quote(value) : value}\`);
        const attrString = attrs.length ? \`, { \${attrs.join(", ")} }\` : "";
        return \`getByRole(\${this.quote(body)}\${attrString})\`;
      case "has-text":
        return \`filter({ hasText: \${this.toHasText(body)} })\`;
      case "has-not-text":
        return \`filter({ hasNotText: \${this.toHasText(body)} })\`;
      case "has":
        return \`filter({ has: \${body} })\`;
      case "hasNot":
        return \`filter({ hasNot: \${body} })\`;
      case "and":
        return \`and(\${body})\`;
      case "or":
        return \`or(\${body})\`;
      case "chain":
        return \`locator(\${body})\`;
      case "test-id":
        return \`getByTestId(\${this.toTestIdValue(body)})\`;
      case "text":
        return this.toCallWithExact("getByText", body, !!options.exact);
      case "alt":
        return this.toCallWithExact("getByAltText", body, !!options.exact);
      case "placeholder":
        return this.toCallWithExact("getByPlaceholder", body, !!options.exact);
      case "label":
        return this.toCallWithExact("getByLabel", body, !!options.exact);
      case "title":
        return this.toCallWithExact("getByTitle", body, !!options.exact);
      default:
        throw new Error("Unknown selector kind " + kind);
    }
  }
  chainLocators(locators) {
    return locators.join(".");
  }
  regexToSourceString(re) {
    return normalizeEscapedRegexQuotes(String(re));
  }
  toCallWithExact(method, body, exact) {
    if (isRegExp(body))
      return \`\${method}(\${this.regexToSourceString(body)})\`;
    return exact ? \`\${method}(\${this.quote(body)}, { exact: true })\` : \`\${method}(\${this.quote(body)})\`;
  }
  toHasText(body) {
    if (isRegExp(body))
      return this.regexToSourceString(body);
    return this.quote(body);
  }
  toTestIdValue(value) {
    if (isRegExp(value))
      return this.regexToSourceString(value);
    return this.quote(value);
  }
  quote(text) {
    var _a;
    return escapeWithQuotes(text, (_a = this.preferredQuote) != null ? _a : "'");
  }
};
var PythonLocatorFactory = class {
  generateLocator(base, kind, body, options = {}) {
    switch (kind) {
      case "default":
        if (options.hasText !== void 0)
          return \`locator(\${this.quote(body)}, has_text=\${this.toHasText(options.hasText)})\`;
        if (options.hasNotText !== void 0)
          return \`locator(\${this.quote(body)}, has_not_text=\${this.toHasText(options.hasNotText)})\`;
        return \`locator(\${this.quote(body)})\`;
      case "frame-locator":
        return \`frame_locator(\${this.quote(body)})\`;
      case "frame":
        return \`content_frame\`;
      case "nth":
        return \`nth(\${body})\`;
      case "first":
        return \`first\`;
      case "last":
        return \`last\`;
      case "visible":
        return \`filter(visible=\${body === "true" ? "True" : "False"})\`;
      case "role":
        const attrs = [];
        if (isRegExp(options.name)) {
          attrs.push(\`name=\${this.regexToString(options.name)}\`);
        } else if (typeof options.name === "string") {
          attrs.push(\`name=\${this.quote(options.name)}\`);
          if (options.exact)
            attrs.push(\`exact=True\`);
        }
        for (const { name, value } of options.attrs) {
          let valueString = typeof value === "string" ? this.quote(value) : value;
          if (typeof value === "boolean")
            valueString = value ? "True" : "False";
          attrs.push(\`\${toSnakeCase(name)}=\${valueString}\`);
        }
        const attrString = attrs.length ? \`, \${attrs.join(", ")}\` : "";
        return \`get_by_role(\${this.quote(body)}\${attrString})\`;
      case "has-text":
        return \`filter(has_text=\${this.toHasText(body)})\`;
      case "has-not-text":
        return \`filter(has_not_text=\${this.toHasText(body)})\`;
      case "has":
        return \`filter(has=\${body})\`;
      case "hasNot":
        return \`filter(has_not=\${body})\`;
      case "and":
        return \`and_(\${body})\`;
      case "or":
        return \`or_(\${body})\`;
      case "chain":
        return \`locator(\${body})\`;
      case "test-id":
        return \`get_by_test_id(\${this.toTestIdValue(body)})\`;
      case "text":
        return this.toCallWithExact("get_by_text", body, !!options.exact);
      case "alt":
        return this.toCallWithExact("get_by_alt_text", body, !!options.exact);
      case "placeholder":
        return this.toCallWithExact("get_by_placeholder", body, !!options.exact);
      case "label":
        return this.toCallWithExact("get_by_label", body, !!options.exact);
      case "title":
        return this.toCallWithExact("get_by_title", body, !!options.exact);
      default:
        throw new Error("Unknown selector kind " + kind);
    }
  }
  chainLocators(locators) {
    return locators.join(".");
  }
  regexToString(body) {
    const suffix = body.flags.includes("i") ? ", re.IGNORECASE" : "";
    return \`re.compile(r"\${normalizeEscapedRegexQuotes(body.source).replace(/\\\\\\//, "/").replace(/"/g, '\\\\"')}"\${suffix})\`;
  }
  toCallWithExact(method, body, exact) {
    if (isRegExp(body))
      return \`\${method}(\${this.regexToString(body)})\`;
    if (exact)
      return \`\${method}(\${this.quote(body)}, exact=True)\`;
    return \`\${method}(\${this.quote(body)})\`;
  }
  toHasText(body) {
    if (isRegExp(body))
      return this.regexToString(body);
    return \`\${this.quote(body)}\`;
  }
  toTestIdValue(value) {
    if (isRegExp(value))
      return this.regexToString(value);
    return this.quote(value);
  }
  quote(text) {
    return escapeWithQuotes(text, '"');
  }
};
var JavaLocatorFactory = class {
  generateLocator(base, kind, body, options = {}) {
    let clazz;
    switch (base) {
      case "page":
        clazz = "Page";
        break;
      case "frame-locator":
        clazz = "FrameLocator";
        break;
      case "locator":
        clazz = "Locator";
        break;
    }
    switch (kind) {
      case "default":
        if (options.hasText !== void 0)
          return \`locator(\${this.quote(body)}, new \${clazz}.LocatorOptions().setHasText(\${this.toHasText(options.hasText)}))\`;
        if (options.hasNotText !== void 0)
          return \`locator(\${this.quote(body)}, new \${clazz}.LocatorOptions().setHasNotText(\${this.toHasText(options.hasNotText)}))\`;
        return \`locator(\${this.quote(body)})\`;
      case "frame-locator":
        return \`frameLocator(\${this.quote(body)})\`;
      case "frame":
        return \`contentFrame()\`;
      case "nth":
        return \`nth(\${body})\`;
      case "first":
        return \`first()\`;
      case "last":
        return \`last()\`;
      case "visible":
        return \`filter(new \${clazz}.FilterOptions().setVisible(\${body === "true" ? "true" : "false"}))\`;
      case "role":
        const attrs = [];
        if (isRegExp(options.name)) {
          attrs.push(\`.setName(\${this.regexToString(options.name)})\`);
        } else if (typeof options.name === "string") {
          attrs.push(\`.setName(\${this.quote(options.name)})\`);
          if (options.exact)
            attrs.push(\`.setExact(true)\`);
        }
        for (const { name, value } of options.attrs)
          attrs.push(\`.set\${toTitleCase(name)}(\${typeof value === "string" ? this.quote(value) : value})\`);
        const attrString = attrs.length ? \`, new \${clazz}.GetByRoleOptions()\${attrs.join("")}\` : "";
        return \`getByRole(AriaRole.\${toSnakeCase(body).toUpperCase()}\${attrString})\`;
      case "has-text":
        return \`filter(new \${clazz}.FilterOptions().setHasText(\${this.toHasText(body)}))\`;
      case "has-not-text":
        return \`filter(new \${clazz}.FilterOptions().setHasNotText(\${this.toHasText(body)}))\`;
      case "has":
        return \`filter(new \${clazz}.FilterOptions().setHas(\${body}))\`;
      case "hasNot":
        return \`filter(new \${clazz}.FilterOptions().setHasNot(\${body}))\`;
      case "and":
        return \`and(\${body})\`;
      case "or":
        return \`or(\${body})\`;
      case "chain":
        return \`locator(\${body})\`;
      case "test-id":
        return \`getByTestId(\${this.toTestIdValue(body)})\`;
      case "text":
        return this.toCallWithExact(clazz, "getByText", body, !!options.exact);
      case "alt":
        return this.toCallWithExact(clazz, "getByAltText", body, !!options.exact);
      case "placeholder":
        return this.toCallWithExact(clazz, "getByPlaceholder", body, !!options.exact);
      case "label":
        return this.toCallWithExact(clazz, "getByLabel", body, !!options.exact);
      case "title":
        return this.toCallWithExact(clazz, "getByTitle", body, !!options.exact);
      default:
        throw new Error("Unknown selector kind " + kind);
    }
  }
  chainLocators(locators) {
    return locators.join(".");
  }
  regexToString(body) {
    const suffix = body.flags.includes("i") ? ", Pattern.CASE_INSENSITIVE" : "";
    return \`Pattern.compile(\${this.quote(normalizeEscapedRegexQuotes(body.source))}\${suffix})\`;
  }
  toCallWithExact(clazz, method, body, exact) {
    if (isRegExp(body))
      return \`\${method}(\${this.regexToString(body)})\`;
    if (exact)
      return \`\${method}(\${this.quote(body)}, new \${clazz}.\${toTitleCase(method)}Options().setExact(true))\`;
    return \`\${method}(\${this.quote(body)})\`;
  }
  toHasText(body) {
    if (isRegExp(body))
      return this.regexToString(body);
    return this.quote(body);
  }
  toTestIdValue(value) {
    if (isRegExp(value))
      return this.regexToString(value);
    return this.quote(value);
  }
  quote(text) {
    return escapeWithQuotes(text, '"');
  }
};
var CSharpLocatorFactory = class {
  generateLocator(base, kind, body, options = {}) {
    switch (kind) {
      case "default":
        if (options.hasText !== void 0)
          return \`Locator(\${this.quote(body)}, new() { \${this.toHasText(options.hasText)} })\`;
        if (options.hasNotText !== void 0)
          return \`Locator(\${this.quote(body)}, new() { \${this.toHasNotText(options.hasNotText)} })\`;
        return \`Locator(\${this.quote(body)})\`;
      case "frame-locator":
        return \`FrameLocator(\${this.quote(body)})\`;
      case "frame":
        return \`ContentFrame\`;
      case "nth":
        return \`Nth(\${body})\`;
      case "first":
        return \`First\`;
      case "last":
        return \`Last\`;
      case "visible":
        return \`Filter(new() { Visible = \${body === "true" ? "true" : "false"} })\`;
      case "role":
        const attrs = [];
        if (isRegExp(options.name)) {
          attrs.push(\`NameRegex = \${this.regexToString(options.name)}\`);
        } else if (typeof options.name === "string") {
          attrs.push(\`Name = \${this.quote(options.name)}\`);
          if (options.exact)
            attrs.push(\`Exact = true\`);
        }
        for (const { name, value } of options.attrs)
          attrs.push(\`\${toTitleCase(name)} = \${typeof value === "string" ? this.quote(value) : value}\`);
        const attrString = attrs.length ? \`, new() { \${attrs.join(", ")} }\` : "";
        return \`GetByRole(AriaRole.\${toTitleCase(body)}\${attrString})\`;
      case "has-text":
        return \`Filter(new() { \${this.toHasText(body)} })\`;
      case "has-not-text":
        return \`Filter(new() { \${this.toHasNotText(body)} })\`;
      case "has":
        return \`Filter(new() { Has = \${body} })\`;
      case "hasNot":
        return \`Filter(new() { HasNot = \${body} })\`;
      case "and":
        return \`And(\${body})\`;
      case "or":
        return \`Or(\${body})\`;
      case "chain":
        return \`Locator(\${body})\`;
      case "test-id":
        return \`GetByTestId(\${this.toTestIdValue(body)})\`;
      case "text":
        return this.toCallWithExact("GetByText", body, !!options.exact);
      case "alt":
        return this.toCallWithExact("GetByAltText", body, !!options.exact);
      case "placeholder":
        return this.toCallWithExact("GetByPlaceholder", body, !!options.exact);
      case "label":
        return this.toCallWithExact("GetByLabel", body, !!options.exact);
      case "title":
        return this.toCallWithExact("GetByTitle", body, !!options.exact);
      default:
        throw new Error("Unknown selector kind " + kind);
    }
  }
  chainLocators(locators) {
    return locators.join(".");
  }
  regexToString(body) {
    const suffix = body.flags.includes("i") ? ", RegexOptions.IgnoreCase" : "";
    return \`new Regex(\${this.quote(normalizeEscapedRegexQuotes(body.source))}\${suffix})\`;
  }
  toCallWithExact(method, body, exact) {
    if (isRegExp(body))
      return \`\${method}(\${this.regexToString(body)})\`;
    if (exact)
      return \`\${method}(\${this.quote(body)}, new() { Exact = true })\`;
    return \`\${method}(\${this.quote(body)})\`;
  }
  toHasText(body) {
    if (isRegExp(body))
      return \`HasTextRegex = \${this.regexToString(body)}\`;
    return \`HasText = \${this.quote(body)}\`;
  }
  toTestIdValue(value) {
    if (isRegExp(value))
      return this.regexToString(value);
    return this.quote(value);
  }
  toHasNotText(body) {
    if (isRegExp(body))
      return \`HasNotTextRegex = \${this.regexToString(body)}\`;
    return \`HasNotText = \${this.quote(body)}\`;
  }
  quote(text) {
    return escapeWithQuotes(text, '"');
  }
};
var JsonlLocatorFactory = class {
  generateLocator(base, kind, body, options = {}) {
    return JSON.stringify({
      kind,
      body,
      options
    });
  }
  chainLocators(locators) {
    const objects = locators.map((l) => JSON.parse(l));
    for (let i = 0; i < objects.length - 1; ++i)
      objects[i].next = objects[i + 1];
    return JSON.stringify(objects[0]);
  }
};
var generators = {
  javascript: JavaScriptLocatorFactory,
  python: PythonLocatorFactory,
  java: JavaLocatorFactory,
  csharp: CSharpLocatorFactory,
  jsonl: JsonlLocatorFactory
};
function isRegExp(obj) {
  return obj instanceof RegExp;
}

// packages/injected/src/domUtils.ts
var globalOptions = {};
function setGlobalOptions(options) {
  globalOptions = options;
}
function isInsideScope(scope, element) {
  while (element) {
    if (scope.contains(element))
      return true;
    element = enclosingShadowHost(element);
  }
  return false;
}
function parentElementOrShadowHost(element) {
  if (element.parentElement)
    return element.parentElement;
  if (!element.parentNode)
    return;
  if (element.parentNode.nodeType === 11 && element.parentNode.host)
    return element.parentNode.host;
}
function enclosingShadowRootOrDocument(element) {
  let node = element;
  while (node.parentNode)
    node = node.parentNode;
  if (node.nodeType === 11 || node.nodeType === 9)
    return node;
}
function enclosingShadowHost(element) {
  while (element.parentElement)
    element = element.parentElement;
  return parentElementOrShadowHost(element);
}
function closestCrossShadow(element, css, scope) {
  while (element) {
    const closest = element.closest(css);
    if (scope && closest !== scope && (closest == null ? void 0 : closest.contains(scope)))
      return;
    if (closest)
      return closest;
    element = enclosingShadowHost(element);
  }
}
function getElementComputedStyle(element, pseudo) {
  return element.ownerDocument && element.ownerDocument.defaultView ? element.ownerDocument.defaultView.getComputedStyle(element, pseudo) : void 0;
}
function isElementStyleVisibilityVisible(element, style) {
  style = style != null ? style : getElementComputedStyle(element);
  if (!style)
    return true;
  if (Element.prototype.checkVisibility && globalOptions.browserNameForWorkarounds !== "webkit") {
    if (!element.checkVisibility())
      return false;
  } else {
    const detailsOrSummary = element.closest("details,summary");
    if (detailsOrSummary !== element && (detailsOrSummary == null ? void 0 : detailsOrSummary.nodeName) === "DETAILS" && !detailsOrSummary.open)
      return false;
  }
  if (style.visibility !== "visible")
    return false;
  return true;
}
function box(element) {
  const style = getElementComputedStyle(element);
  if (!style)
    return { visible: true };
  if (style.display === "contents") {
    for (let child = element.firstChild; child; child = child.nextSibling) {
      if (child.nodeType === 1 && isElementVisible(child))
        return { visible: true, style };
      if (child.nodeType === 3 && isVisibleTextNode(child))
        return { visible: true, style };
    }
    return { visible: false, style };
  }
  if (!isElementStyleVisibilityVisible(element, style))
    return { style, visible: false };
  const rect = element.getBoundingClientRect();
  return { rect, style, visible: rect.width > 0 && rect.height > 0 };
}
function isElementVisible(element) {
  return box(element).visible;
}
function isVisibleTextNode(node) {
  const range = node.ownerDocument.createRange();
  range.selectNode(node);
  const rect = range.getBoundingClientRect();
  return rect.width > 0 && rect.height > 0;
}
function elementSafeTagName(element) {
  if (element instanceof HTMLFormElement)
    return "FORM";
  return element.tagName.toUpperCase();
}

// packages/injected/src/roleUtils.ts
function hasExplicitAccessibleName(e) {
  return e.hasAttribute("aria-label") || e.hasAttribute("aria-labelledby");
}
var kAncestorPreventingLandmark = "article:not([role]), aside:not([role]), main:not([role]), nav:not([role]), section:not([role]), [role=article], [role=complementary], [role=main], [role=navigation], [role=region]";
var kGlobalAriaAttributes = [
  ["aria-atomic", void 0],
  ["aria-busy", void 0],
  ["aria-controls", void 0],
  ["aria-current", void 0],
  ["aria-describedby", void 0],
  ["aria-details", void 0],
  // Global use deprecated in ARIA 1.2
  // ['aria-disabled', undefined],
  ["aria-dropeffect", void 0],
  // Global use deprecated in ARIA 1.2
  // ['aria-errormessage', undefined],
  ["aria-flowto", void 0],
  ["aria-grabbed", void 0],
  // Global use deprecated in ARIA 1.2
  // ['aria-haspopup', undefined],
  ["aria-hidden", void 0],
  // Global use deprecated in ARIA 1.2
  // ['aria-invalid', undefined],
  ["aria-keyshortcuts", void 0],
  ["aria-label", ["caption", "code", "deletion", "emphasis", "generic", "insertion", "paragraph", "presentation", "strong", "subscript", "superscript"]],
  ["aria-labelledby", ["caption", "code", "deletion", "emphasis", "generic", "insertion", "paragraph", "presentation", "strong", "subscript", "superscript"]],
  ["aria-live", void 0],
  ["aria-owns", void 0],
  ["aria-relevant", void 0],
  ["aria-roledescription", ["generic"]]
];
function hasGlobalAriaAttribute(element, forRole) {
  return kGlobalAriaAttributes.some(([attr, prohibited]) => {
    return !(prohibited == null ? void 0 : prohibited.includes(forRole || "")) && element.hasAttribute(attr);
  });
}
function hasTabIndex(element) {
  return !Number.isNaN(Number(String(element.getAttribute("tabindex"))));
}
function isFocusable(element) {
  return !isNativelyDisabled(element) && (isNativelyFocusable(element) || hasTabIndex(element));
}
function isNativelyFocusable(element) {
  const tagName = elementSafeTagName(element);
  if (["BUTTON", "DETAILS", "SELECT", "TEXTAREA"].includes(tagName))
    return true;
  if (tagName === "A" || tagName === "AREA")
    return element.hasAttribute("href");
  if (tagName === "INPUT")
    return !element.hidden;
  return false;
}
var kImplicitRoleByTagName = {
  "A": (e) => {
    return e.hasAttribute("href") ? "link" : null;
  },
  "AREA": (e) => {
    return e.hasAttribute("href") ? "link" : null;
  },
  "ARTICLE": () => "article",
  "ASIDE": () => "complementary",
  "BLOCKQUOTE": () => "blockquote",
  "BUTTON": () => "button",
  "CAPTION": () => "caption",
  "CODE": () => "code",
  "DATALIST": () => "listbox",
  "DD": () => "definition",
  "DEL": () => "deletion",
  "DETAILS": () => "group",
  "DFN": () => "term",
  "DIALOG": () => "dialog",
  "DT": () => "term",
  "EM": () => "emphasis",
  "FIELDSET": () => "group",
  "FIGURE": () => "figure",
  "FOOTER": (e) => closestCrossShadow(e, kAncestorPreventingLandmark) ? null : "contentinfo",
  "FORM": (e) => hasExplicitAccessibleName(e) ? "form" : null,
  "H1": () => "heading",
  "H2": () => "heading",
  "H3": () => "heading",
  "H4": () => "heading",
  "H5": () => "heading",
  "H6": () => "heading",
  "HEADER": (e) => closestCrossShadow(e, kAncestorPreventingLandmark) ? null : "banner",
  "HR": () => "separator",
  "HTML": () => "document",
  "IMG": (e) => e.getAttribute("alt") === "" && !e.getAttribute("title") && !hasGlobalAriaAttribute(e) && !hasTabIndex(e) ? "presentation" : "img",
  "INPUT": (e) => {
    const type = e.type.toLowerCase();
    if (type === "search")
      return e.hasAttribute("list") ? "combobox" : "searchbox";
    if (["email", "tel", "text", "url", ""].includes(type)) {
      const list = getIdRefs(e, e.getAttribute("list"))[0];
      return list && elementSafeTagName(list) === "DATALIST" ? "combobox" : "textbox";
    }
    if (type === "hidden")
      return null;
    if (type === "file")
      return "button";
    return inputTypeToRole[type] || "textbox";
  },
  "INS": () => "insertion",
  "LI": () => "listitem",
  "MAIN": () => "main",
  "MARK": () => "mark",
  "MATH": () => "math",
  "MENU": () => "list",
  "METER": () => "meter",
  "NAV": () => "navigation",
  "OL": () => "list",
  "OPTGROUP": () => "group",
  "OPTION": () => "option",
  "OUTPUT": () => "status",
  "P": () => "paragraph",
  "PROGRESS": () => "progressbar",
  "SEARCH": () => "search",
  "SECTION": (e) => hasExplicitAccessibleName(e) ? "region" : null,
  "SELECT": (e) => e.hasAttribute("multiple") || e.size > 1 ? "listbox" : "combobox",
  "STRONG": () => "strong",
  "SUB": () => "subscript",
  "SUP": () => "superscript",
  // For <svg> we default to Chrome behavior:
  // - Chrome reports 'img'.
  // - Firefox reports 'diagram' that is not in official ARIA spec yet.
  // - Safari reports 'no role', but still computes accessible name.
  "SVG": () => "img",
  "TABLE": () => "table",
  "TBODY": () => "rowgroup",
  "TD": (e) => {
    const table = closestCrossShadow(e, "table");
    const role = table ? getExplicitAriaRole(table) : "";
    return role === "grid" || role === "treegrid" ? "gridcell" : "cell";
  },
  "TEXTAREA": () => "textbox",
  "TFOOT": () => "rowgroup",
  "TH": (e) => {
    if (e.getAttribute("scope") === "col")
      return "columnheader";
    if (e.getAttribute("scope") === "row")
      return "rowheader";
    const table = closestCrossShadow(e, "table");
    const role = table ? getExplicitAriaRole(table) : "";
    return role === "grid" || role === "treegrid" ? "gridcell" : "cell";
  },
  "THEAD": () => "rowgroup",
  "TIME": () => "time",
  "TR": () => "row",
  "UL": () => "list"
};
var kPresentationInheritanceParents = {
  "DD": ["DL", "DIV"],
  "DIV": ["DL"],
  "DT": ["DL", "DIV"],
  "LI": ["OL", "UL"],
  "TBODY": ["TABLE"],
  "TD": ["TR"],
  "TFOOT": ["TABLE"],
  "TH": ["TR"],
  "THEAD": ["TABLE"],
  "TR": ["THEAD", "TBODY", "TFOOT", "TABLE"]
};
function getImplicitAriaRole(element) {
  var _a;
  const implicitRole = ((_a = kImplicitRoleByTagName[elementSafeTagName(element)]) == null ? void 0 : _a.call(kImplicitRoleByTagName, element)) || "";
  if (!implicitRole)
    return null;
  let ancestor = element;
  while (ancestor) {
    const parent = parentElementOrShadowHost(ancestor);
    const parents = kPresentationInheritanceParents[elementSafeTagName(ancestor)];
    if (!parents || !parent || !parents.includes(elementSafeTagName(parent)))
      break;
    const parentExplicitRole = getExplicitAriaRole(parent);
    if ((parentExplicitRole === "none" || parentExplicitRole === "presentation") && !hasPresentationConflictResolution(parent, parentExplicitRole))
      return parentExplicitRole;
    ancestor = parent;
  }
  return implicitRole;
}
var validRoles = [
  "alert",
  "alertdialog",
  "application",
  "article",
  "banner",
  "blockquote",
  "button",
  "caption",
  "cell",
  "checkbox",
  "code",
  "columnheader",
  "combobox",
  "complementary",
  "contentinfo",
  "definition",
  "deletion",
  "dialog",
  "directory",
  "document",
  "emphasis",
  "feed",
  "figure",
  "form",
  "generic",
  "grid",
  "gridcell",
  "group",
  "heading",
  "img",
  "insertion",
  "link",
  "list",
  "listbox",
  "listitem",
  "log",
  "main",
  "mark",
  "marquee",
  "math",
  "meter",
  "menu",
  "menubar",
  "menuitem",
  "menuitemcheckbox",
  "menuitemradio",
  "navigation",
  "none",
  "note",
  "option",
  "paragraph",
  "presentation",
  "progressbar",
  "radio",
  "radiogroup",
  "region",
  "row",
  "rowgroup",
  "rowheader",
  "scrollbar",
  "search",
  "searchbox",
  "separator",
  "slider",
  "spinbutton",
  "status",
  "strong",
  "subscript",
  "superscript",
  "switch",
  "tab",
  "table",
  "tablist",
  "tabpanel",
  "term",
  "textbox",
  "time",
  "timer",
  "toolbar",
  "tooltip",
  "tree",
  "treegrid",
  "treeitem"
];
function getExplicitAriaRole(element) {
  const roles = (element.getAttribute("role") || "").split(" ").map((role) => role.trim());
  return roles.find((role) => validRoles.includes(role)) || null;
}
function hasPresentationConflictResolution(element, role) {
  return hasGlobalAriaAttribute(element, role) || isFocusable(element);
}
function getAriaRole(element) {
  const explicitRole = getExplicitAriaRole(element);
  if (!explicitRole)
    return getImplicitAriaRole(element);
  if (explicitRole === "none" || explicitRole === "presentation") {
    const implicitRole = getImplicitAriaRole(element);
    if (hasPresentationConflictResolution(element, implicitRole))
      return implicitRole;
  }
  return explicitRole;
}
function getAriaBoolean(attr) {
  return attr === null ? void 0 : attr.toLowerCase() === "true";
}
function isElementIgnoredForAria(element) {
  return ["STYLE", "SCRIPT", "NOSCRIPT", "TEMPLATE"].includes(elementSafeTagName(element));
}
function isElementHiddenForAria(element) {
  if (isElementIgnoredForAria(element))
    return true;
  const style = getElementComputedStyle(element);
  const isSlot = element.nodeName === "SLOT";
  if ((style == null ? void 0 : style.display) === "contents" && !isSlot) {
    for (let child = element.firstChild; child; child = child.nextSibling) {
      if (child.nodeType === 1 && !isElementHiddenForAria(child))
        return false;
      if (child.nodeType === 3 && isVisibleTextNode(child))
        return false;
    }
    return true;
  }
  const isOptionInsideSelect = element.nodeName === "OPTION" && !!element.closest("select");
  if (!isOptionInsideSelect && !isSlot && !isElementStyleVisibilityVisible(element, style))
    return true;
  return belongsToDisplayNoneOrAriaHiddenOrNonSlotted(element);
}
function belongsToDisplayNoneOrAriaHiddenOrNonSlotted(element) {
  let hidden = cacheIsHidden == null ? void 0 : cacheIsHidden.get(element);
  if (hidden === void 0) {
    hidden = false;
    if (element.parentElement && element.parentElement.shadowRoot && !element.assignedSlot)
      hidden = true;
    if (!hidden) {
      const style = getElementComputedStyle(element);
      hidden = !style || style.display === "none" || getAriaBoolean(element.getAttribute("aria-hidden")) === true;
    }
    if (!hidden) {
      const parent = parentElementOrShadowHost(element);
      if (parent)
        hidden = belongsToDisplayNoneOrAriaHiddenOrNonSlotted(parent);
    }
    cacheIsHidden == null ? void 0 : cacheIsHidden.set(element, hidden);
  }
  return hidden;
}
function getIdRefs(element, ref) {
  if (!ref)
    return [];
  const root = enclosingShadowRootOrDocument(element);
  if (!root)
    return [];
  try {
    const ids = ref.split(" ").filter((id) => !!id);
    const result = [];
    for (const id of ids) {
      const firstElement = root.querySelector("#" + CSS.escape(id));
      if (firstElement && !result.includes(firstElement))
        result.push(firstElement);
    }
    return result;
  } catch (e) {
    return [];
  }
}
function trimFlatString(s) {
  return s.trim();
}
function asFlatString(s) {
  return s.split("\\xA0").map((chunk) => chunk.replace(/\\r\\n/g, "\\n").replace(/[\\u200b\\u00ad]/g, "").replace(/\\s\\s*/g, " ")).join("\\xA0").trim();
}
function queryInAriaOwned(element, selector) {
  const result = [...element.querySelectorAll(selector)];
  for (const owned of getIdRefs(element, element.getAttribute("aria-owns"))) {
    if (owned.matches(selector))
      result.push(owned);
    result.push(...owned.querySelectorAll(selector));
  }
  return result;
}
function getCSSContent(element, pseudo) {
  const cache = pseudo === "::before" ? cachePseudoContentBefore : pseudo === "::after" ? cachePseudoContentAfter : cachePseudoContent;
  if (cache == null ? void 0 : cache.has(element))
    return cache == null ? void 0 : cache.get(element);
  const style = getElementComputedStyle(element, pseudo);
  let content;
  if (style && style.display !== "none" && style.visibility !== "hidden") {
    content = parseCSSContentPropertyAsString(element, style.content, !!pseudo);
  }
  if (pseudo && content !== void 0) {
    const display = (style == null ? void 0 : style.display) || "inline";
    if (display !== "inline")
      content = " " + content + " ";
  }
  if (cache)
    cache.set(element, content);
  return content;
}
function parseCSSContentPropertyAsString(element, content, isPseudo) {
  if (!content || content === "none" || content === "normal") {
    return;
  }
  try {
    let tokens = tokenize(content).filter((token) => !(token instanceof WhitespaceToken));
    const delimIndex = tokens.findIndex((token) => token instanceof DelimToken && token.value === "/");
    if (delimIndex !== -1) {
      tokens = tokens.slice(delimIndex + 1);
    } else if (!isPseudo) {
      return;
    }
    const accumulated = [];
    let index = 0;
    while (index < tokens.length) {
      if (tokens[index] instanceof StringToken) {
        accumulated.push(tokens[index].value);
        index++;
      } else if (index + 2 < tokens.length && tokens[index] instanceof FunctionToken && tokens[index].value === "attr" && tokens[index + 1] instanceof IdentToken && tokens[index + 2] instanceof CloseParenToken) {
        const attrName = tokens[index + 1].value;
        accumulated.push(element.getAttribute(attrName) || "");
        index += 3;
      } else {
        return;
      }
    }
    return accumulated.join("");
  } catch {
  }
}
function getAriaLabelledByElements(element) {
  const ref = element.getAttribute("aria-labelledby");
  if (ref === null)
    return null;
  const refs = getIdRefs(element, ref);
  return refs.length ? refs : null;
}
function allowsNameFromContent(role, targetDescendant) {
  const alwaysAllowsNameFromContent = ["button", "cell", "checkbox", "columnheader", "gridcell", "heading", "link", "menuitem", "menuitemcheckbox", "menuitemradio", "option", "radio", "row", "rowheader", "switch", "tab", "tooltip", "treeitem"].includes(role);
  const descendantAllowsNameFromContent = targetDescendant && ["", "caption", "code", "contentinfo", "definition", "deletion", "emphasis", "insertion", "list", "listitem", "mark", "none", "paragraph", "presentation", "region", "row", "rowgroup", "section", "strong", "subscript", "superscript", "table", "term", "time"].includes(role);
  return alwaysAllowsNameFromContent || descendantAllowsNameFromContent;
}
function getElementAccessibleName(element, includeHidden) {
  const cache = includeHidden ? cacheAccessibleNameHidden : cacheAccessibleName;
  let accessibleName = cache == null ? void 0 : cache.get(element);
  if (accessibleName === void 0) {
    accessibleName = "";
    const elementProhibitsNaming = ["caption", "code", "definition", "deletion", "emphasis", "generic", "insertion", "mark", "paragraph", "presentation", "strong", "subscript", "suggestion", "superscript", "term", "time"].includes(getAriaRole(element) || "");
    if (!elementProhibitsNaming) {
      accessibleName = asFlatString(getTextAlternativeInternal(element, {
        includeHidden,
        visitedElements: /* @__PURE__ */ new Set(),
        embeddedInTargetElement: "self"
      }));
    }
    cache == null ? void 0 : cache.set(element, accessibleName);
  }
  return accessibleName;
}
function getElementAccessibleDescription(element, includeHidden) {
  const cache = includeHidden ? cacheAccessibleDescriptionHidden : cacheAccessibleDescription;
  let accessibleDescription = cache == null ? void 0 : cache.get(element);
  if (accessibleDescription === void 0) {
    accessibleDescription = "";
    if (element.hasAttribute("aria-describedby")) {
      const describedBy = getIdRefs(element, element.getAttribute("aria-describedby"));
      accessibleDescription = asFlatString(describedBy.map((ref) => getTextAlternativeInternal(ref, {
        includeHidden,
        visitedElements: /* @__PURE__ */ new Set(),
        embeddedInDescribedBy: { element: ref, hidden: isElementHiddenForAria(ref) }
      })).join(" "));
    } else if (element.hasAttribute("aria-description")) {
      accessibleDescription = asFlatString(element.getAttribute("aria-description") || "");
    } else {
      accessibleDescription = asFlatString(element.getAttribute("title") || "");
    }
    cache == null ? void 0 : cache.set(element, accessibleDescription);
  }
  return accessibleDescription;
}
function getAriaInvalid(element) {
  const ariaInvalid = element.getAttribute("aria-invalid");
  if (!ariaInvalid || ariaInvalid.trim() === "" || ariaInvalid.toLocaleLowerCase() === "false")
    return "false";
  if (ariaInvalid === "true" || ariaInvalid === "grammar" || ariaInvalid === "spelling")
    return ariaInvalid;
  return "true";
}
function getValidityInvalid(element) {
  if ("validity" in element) {
    const validity = element.validity;
    return (validity == null ? void 0 : validity.valid) === false;
  }
  return false;
}
function getElementAccessibleErrorMessage(element) {
  const cache = cacheAccessibleErrorMessage;
  let accessibleErrorMessage = cacheAccessibleErrorMessage == null ? void 0 : cacheAccessibleErrorMessage.get(element);
  if (accessibleErrorMessage === void 0) {
    accessibleErrorMessage = "";
    const isAriaInvalid = getAriaInvalid(element) !== "false";
    const isValidityInvalid = getValidityInvalid(element);
    if (isAriaInvalid || isValidityInvalid) {
      const errorMessageId = element.getAttribute("aria-errormessage");
      const errorMessages = getIdRefs(element, errorMessageId);
      const parts = errorMessages.map((errorMessage) => asFlatString(
        getTextAlternativeInternal(errorMessage, {
          visitedElements: /* @__PURE__ */ new Set(),
          embeddedInDescribedBy: { element: errorMessage, hidden: isElementHiddenForAria(errorMessage) }
        })
      ));
      accessibleErrorMessage = parts.join(" ").trim();
    }
    cache == null ? void 0 : cache.set(element, accessibleErrorMessage);
  }
  return accessibleErrorMessage;
}
function getTextAlternativeInternal(element, options) {
  var _a, _b, _c, _d;
  if (options.visitedElements.has(element))
    return "";
  const childOptions = {
    ...options,
    embeddedInTargetElement: options.embeddedInTargetElement === "self" ? "descendant" : options.embeddedInTargetElement
  };
  if (!options.includeHidden) {
    const isEmbeddedInHiddenReferenceTraversal = !!((_a = options.embeddedInLabelledBy) == null ? void 0 : _a.hidden) || !!((_b = options.embeddedInDescribedBy) == null ? void 0 : _b.hidden) || !!((_c = options.embeddedInNativeTextAlternative) == null ? void 0 : _c.hidden) || !!((_d = options.embeddedInLabel) == null ? void 0 : _d.hidden);
    if (isElementIgnoredForAria(element) || !isEmbeddedInHiddenReferenceTraversal && isElementHiddenForAria(element)) {
      options.visitedElements.add(element);
      return "";
    }
  }
  const labelledBy = getAriaLabelledByElements(element);
  if (!options.embeddedInLabelledBy) {
    const accessibleName = (labelledBy || []).map((ref) => getTextAlternativeInternal(ref, {
      ...options,
      embeddedInLabelledBy: { element: ref, hidden: isElementHiddenForAria(ref) },
      embeddedInDescribedBy: void 0,
      embeddedInTargetElement: void 0,
      embeddedInLabel: void 0,
      embeddedInNativeTextAlternative: void 0
    })).join(" ");
    if (accessibleName)
      return accessibleName;
  }
  const role = getAriaRole(element) || "";
  const tagName = elementSafeTagName(element);
  if (!!options.embeddedInLabel || !!options.embeddedInLabelledBy || options.embeddedInTargetElement === "descendant") {
    const isOwnLabel = [...element.labels || []].includes(element);
    const isOwnLabelledBy = (labelledBy || []).includes(element);
    if (!isOwnLabel && !isOwnLabelledBy) {
      if (role === "textbox") {
        options.visitedElements.add(element);
        if (tagName === "INPUT" || tagName === "TEXTAREA")
          return element.value;
        return element.textContent || "";
      }
      if (["combobox", "listbox"].includes(role)) {
        options.visitedElements.add(element);
        let selectedOptions;
        if (tagName === "SELECT") {
          selectedOptions = [...element.selectedOptions];
          if (!selectedOptions.length && element.options.length)
            selectedOptions.push(element.options[0]);
        } else {
          const listbox = role === "combobox" ? queryInAriaOwned(element, "*").find((e) => getAriaRole(e) === "listbox") : element;
          selectedOptions = listbox ? queryInAriaOwned(listbox, '[aria-selected="true"]').filter((e) => getAriaRole(e) === "option") : [];
        }
        if (!selectedOptions.length && tagName === "INPUT") {
          return element.value;
        }
        return selectedOptions.map((option) => getTextAlternativeInternal(option, childOptions)).join(" ");
      }
      if (["progressbar", "scrollbar", "slider", "spinbutton", "meter"].includes(role)) {
        options.visitedElements.add(element);
        if (element.hasAttribute("aria-valuetext"))
          return element.getAttribute("aria-valuetext") || "";
        if (element.hasAttribute("aria-valuenow"))
          return element.getAttribute("aria-valuenow") || "";
        return element.getAttribute("value") || "";
      }
      if (["menu"].includes(role)) {
        options.visitedElements.add(element);
        return "";
      }
    }
  }
  const ariaLabel = element.getAttribute("aria-label") || "";
  if (trimFlatString(ariaLabel)) {
    options.visitedElements.add(element);
    return ariaLabel;
  }
  if (!["presentation", "none"].includes(role)) {
    if (tagName === "INPUT" && ["button", "submit", "reset"].includes(element.type)) {
      options.visitedElements.add(element);
      const value = element.value || "";
      if (trimFlatString(value))
        return value;
      if (element.type === "submit")
        return "Submit";
      if (element.type === "reset")
        return "Reset";
      const title = element.getAttribute("title") || "";
      return title;
    }
    if (tagName === "INPUT" && element.type === "file") {
      options.visitedElements.add(element);
      const labels = element.labels || [];
      if (labels.length && !options.embeddedInLabelledBy)
        return getAccessibleNameFromAssociatedLabels(labels, options);
      return "Choose File";
    }
    if (tagName === "INPUT" && element.type === "image") {
      options.visitedElements.add(element);
      const labels = element.labels || [];
      if (labels.length && !options.embeddedInLabelledBy)
        return getAccessibleNameFromAssociatedLabels(labels, options);
      const alt = element.getAttribute("alt") || "";
      if (trimFlatString(alt))
        return alt;
      const title = element.getAttribute("title") || "";
      if (trimFlatString(title))
        return title;
      return "Submit";
    }
    if (!labelledBy && tagName === "BUTTON") {
      options.visitedElements.add(element);
      const labels = element.labels || [];
      if (labels.length)
        return getAccessibleNameFromAssociatedLabels(labels, options);
    }
    if (!labelledBy && tagName === "OUTPUT") {
      options.visitedElements.add(element);
      const labels = element.labels || [];
      if (labels.length)
        return getAccessibleNameFromAssociatedLabels(labels, options);
      return element.getAttribute("title") || "";
    }
    if (!labelledBy && (tagName === "TEXTAREA" || tagName === "SELECT" || tagName === "INPUT")) {
      options.visitedElements.add(element);
      const labels = element.labels || [];
      if (labels.length)
        return getAccessibleNameFromAssociatedLabels(labels, options);
      const usePlaceholder = tagName === "INPUT" && ["text", "password", "search", "tel", "email", "url"].includes(element.type) || tagName === "TEXTAREA";
      const placeholder = element.getAttribute("placeholder") || "";
      const title = element.getAttribute("title") || "";
      if (!usePlaceholder || title)
        return title;
      return placeholder;
    }
    if (!labelledBy && tagName === "FIELDSET") {
      options.visitedElements.add(element);
      for (let child = element.firstElementChild; child; child = child.nextElementSibling) {
        if (elementSafeTagName(child) === "LEGEND") {
          return getTextAlternativeInternal(child, {
            ...childOptions,
            embeddedInNativeTextAlternative: { element: child, hidden: isElementHiddenForAria(child) }
          });
        }
      }
      const title = element.getAttribute("title") || "";
      return title;
    }
    if (!labelledBy && tagName === "FIGURE") {
      options.visitedElements.add(element);
      for (let child = element.firstElementChild; child; child = child.nextElementSibling) {
        if (elementSafeTagName(child) === "FIGCAPTION") {
          return getTextAlternativeInternal(child, {
            ...childOptions,
            embeddedInNativeTextAlternative: { element: child, hidden: isElementHiddenForAria(child) }
          });
        }
      }
      const title = element.getAttribute("title") || "";
      return title;
    }
    if (tagName === "IMG") {
      options.visitedElements.add(element);
      const alt = element.getAttribute("alt") || "";
      if (trimFlatString(alt))
        return alt;
      const title = element.getAttribute("title") || "";
      return title;
    }
    if (tagName === "TABLE") {
      options.visitedElements.add(element);
      for (let child = element.firstElementChild; child; child = child.nextElementSibling) {
        if (elementSafeTagName(child) === "CAPTION") {
          return getTextAlternativeInternal(child, {
            ...childOptions,
            embeddedInNativeTextAlternative: { element: child, hidden: isElementHiddenForAria(child) }
          });
        }
      }
      const summary = element.getAttribute("summary") || "";
      if (summary)
        return summary;
    }
    if (tagName === "AREA") {
      options.visitedElements.add(element);
      const alt = element.getAttribute("alt") || "";
      if (trimFlatString(alt))
        return alt;
      const title = element.getAttribute("title") || "";
      return title;
    }
    if (tagName === "SVG" || element.ownerSVGElement) {
      options.visitedElements.add(element);
      for (let child = element.firstElementChild; child; child = child.nextElementSibling) {
        if (elementSafeTagName(child) === "TITLE" && child.ownerSVGElement) {
          return getTextAlternativeInternal(child, {
            ...childOptions,
            embeddedInLabelledBy: { element: child, hidden: isElementHiddenForAria(child) }
          });
        }
      }
    }
    if (element.ownerSVGElement && tagName === "A") {
      const title = element.getAttribute("xlink:title") || "";
      if (trimFlatString(title)) {
        options.visitedElements.add(element);
        return title;
      }
    }
  }
  const shouldNameFromContentForSummary = tagName === "SUMMARY" && !["presentation", "none"].includes(role);
  if (allowsNameFromContent(role, options.embeddedInTargetElement === "descendant") || shouldNameFromContentForSummary || !!options.embeddedInLabelledBy || !!options.embeddedInDescribedBy || !!options.embeddedInLabel || !!options.embeddedInNativeTextAlternative) {
    options.visitedElements.add(element);
    const accessibleName = innerAccumulatedElementText(element, childOptions);
    const maybeTrimmedAccessibleName = options.embeddedInTargetElement === "self" ? trimFlatString(accessibleName) : accessibleName;
    if (maybeTrimmedAccessibleName)
      return accessibleName;
  }
  if (!["presentation", "none"].includes(role) || tagName === "IFRAME") {
    options.visitedElements.add(element);
    const title = element.getAttribute("title") || "";
    if (trimFlatString(title))
      return title;
  }
  options.visitedElements.add(element);
  return "";
}
function innerAccumulatedElementText(element, options) {
  const tokens = [];
  const visit = (node, skipSlotted) => {
    var _a;
    if (skipSlotted && node.assignedSlot)
      return;
    if (node.nodeType === 1) {
      const display = ((_a = getElementComputedStyle(node)) == null ? void 0 : _a.display) || "inline";
      let token = getTextAlternativeInternal(node, options);
      if (display !== "inline" || node.nodeName === "BR")
        token = " " + token + " ";
      tokens.push(token);
    } else if (node.nodeType === 3) {
      tokens.push(node.textContent || "");
    }
  };
  tokens.push(getCSSContent(element, "::before") || "");
  const content = getCSSContent(element);
  if (content !== void 0) {
    tokens.push(content);
  } else {
    const assignedNodes = element.nodeName === "SLOT" ? element.assignedNodes() : [];
    if (assignedNodes.length) {
      for (const child of assignedNodes)
        visit(child, false);
    } else {
      for (let child = element.firstChild; child; child = child.nextSibling)
        visit(child, true);
      if (element.shadowRoot) {
        for (let child = element.shadowRoot.firstChild; child; child = child.nextSibling)
          visit(child, true);
      }
      for (const owned of getIdRefs(element, element.getAttribute("aria-owns")))
        visit(owned, true);
    }
  }
  tokens.push(getCSSContent(element, "::after") || "");
  return tokens.join("");
}
var kAriaSelectedRoles = ["gridcell", "option", "row", "tab", "rowheader", "columnheader", "treeitem"];
function getAriaSelected(element) {
  if (elementSafeTagName(element) === "OPTION")
    return element.selected;
  if (kAriaSelectedRoles.includes(getAriaRole(element) || ""))
    return getAriaBoolean(element.getAttribute("aria-selected")) === true;
  return false;
}
var kAriaCheckedRoles = ["checkbox", "menuitemcheckbox", "option", "radio", "switch", "menuitemradio", "treeitem"];
function getAriaChecked(element) {
  const result = getChecked(element, true);
  return result === "error" ? false : result;
}
function getCheckedAllowMixed(element) {
  return getChecked(element, true);
}
function getCheckedWithoutMixed(element) {
  const result = getChecked(element, false);
  return result;
}
function getChecked(element, allowMixed) {
  const tagName = elementSafeTagName(element);
  if (allowMixed && tagName === "INPUT" && element.indeterminate)
    return "mixed";
  if (tagName === "INPUT" && ["checkbox", "radio"].includes(element.type))
    return element.checked;
  if (kAriaCheckedRoles.includes(getAriaRole(element) || "")) {
    const checked = element.getAttribute("aria-checked");
    if (checked === "true")
      return true;
    if (allowMixed && checked === "mixed")
      return "mixed";
    return false;
  }
  return "error";
}
var kAriaReadonlyRoles = ["checkbox", "combobox", "grid", "gridcell", "listbox", "radiogroup", "slider", "spinbutton", "textbox", "columnheader", "rowheader", "searchbox", "switch", "treegrid"];
function getReadonly(element) {
  const tagName = elementSafeTagName(element);
  if (["INPUT", "TEXTAREA", "SELECT"].includes(tagName))
    return element.hasAttribute("readonly");
  if (kAriaReadonlyRoles.includes(getAriaRole(element) || ""))
    return element.getAttribute("aria-readonly") === "true";
  if (element.isContentEditable)
    return false;
  return "error";
}
var kAriaPressedRoles = ["button"];
function getAriaPressed(element) {
  if (kAriaPressedRoles.includes(getAriaRole(element) || "")) {
    const pressed = element.getAttribute("aria-pressed");
    if (pressed === "true")
      return true;
    if (pressed === "mixed")
      return "mixed";
  }
  return false;
}
var kAriaExpandedRoles = ["application", "button", "checkbox", "combobox", "gridcell", "link", "listbox", "menuitem", "row", "rowheader", "tab", "treeitem", "columnheader", "menuitemcheckbox", "menuitemradio", "rowheader", "switch"];
function getAriaExpanded(element) {
  if (elementSafeTagName(element) === "DETAILS")
    return element.open;
  if (kAriaExpandedRoles.includes(getAriaRole(element) || "")) {
    const expanded = element.getAttribute("aria-expanded");
    if (expanded === null)
      return void 0;
    if (expanded === "true")
      return true;
    return false;
  }
  return void 0;
}
var kAriaLevelRoles = ["heading", "listitem", "row", "treeitem"];
function getAriaLevel(element) {
  const native = { "H1": 1, "H2": 2, "H3": 3, "H4": 4, "H5": 5, "H6": 6 }[elementSafeTagName(element)];
  if (native)
    return native;
  if (kAriaLevelRoles.includes(getAriaRole(element) || "")) {
    const attr = element.getAttribute("aria-level");
    const value = attr === null ? Number.NaN : Number(attr);
    if (Number.isInteger(value) && value >= 1)
      return value;
  }
  return 0;
}
var kAriaDisabledRoles = ["application", "button", "composite", "gridcell", "group", "input", "link", "menuitem", "scrollbar", "separator", "tab", "checkbox", "columnheader", "combobox", "grid", "listbox", "menu", "menubar", "menuitemcheckbox", "menuitemradio", "option", "radio", "radiogroup", "row", "rowheader", "searchbox", "select", "slider", "spinbutton", "switch", "tablist", "textbox", "toolbar", "tree", "treegrid", "treeitem"];
function getAriaDisabled(element) {
  return isNativelyDisabled(element) || hasExplicitAriaDisabled(element);
}
function isNativelyDisabled(element) {
  const isNativeFormControl = ["BUTTON", "INPUT", "SELECT", "TEXTAREA", "OPTION", "OPTGROUP"].includes(elementSafeTagName(element));
  return isNativeFormControl && (element.hasAttribute("disabled") || belongsToDisabledOptGroup(element) || belongsToDisabledFieldSet(element));
}
function belongsToDisabledOptGroup(element) {
  return elementSafeTagName(element) === "OPTION" && !!element.closest("OPTGROUP[DISABLED]");
}
function belongsToDisabledFieldSet(element) {
  const fieldSetElement = element == null ? void 0 : element.closest("FIELDSET[DISABLED]");
  if (!fieldSetElement)
    return false;
  const legendElement = fieldSetElement.querySelector(":scope > LEGEND");
  return !legendElement || !legendElement.contains(element);
}
function hasExplicitAriaDisabled(element, isAncestor = false) {
  if (!element)
    return false;
  if (isAncestor || kAriaDisabledRoles.includes(getAriaRole(element) || "")) {
    const attribute = (element.getAttribute("aria-disabled") || "").toLowerCase();
    if (attribute === "true")
      return true;
    if (attribute === "false")
      return false;
    return hasExplicitAriaDisabled(parentElementOrShadowHost(element), true);
  }
  return false;
}
function getAccessibleNameFromAssociatedLabels(labels, options) {
  return [...labels].map((label) => getTextAlternativeInternal(label, {
    ...options,
    embeddedInLabel: { element: label, hidden: isElementHiddenForAria(label) },
    embeddedInNativeTextAlternative: void 0,
    embeddedInLabelledBy: void 0,
    embeddedInDescribedBy: void 0,
    embeddedInTargetElement: void 0
  })).filter((accessibleName) => !!accessibleName).join(" ");
}
function receivesPointerEvents(element) {
  const cache = cachePointerEvents;
  let e = element;
  let result;
  const parents = [];
  for (; e; e = parentElementOrShadowHost(e)) {
    const cached = cache.get(e);
    if (cached !== void 0) {
      result = cached;
      break;
    }
    parents.push(e);
    const style = getElementComputedStyle(e);
    if (!style) {
      result = true;
      break;
    }
    const value = style.pointerEvents;
    if (value) {
      result = value !== "none";
      break;
    }
  }
  if (result === void 0)
    result = true;
  for (const parent of parents)
    cache.set(parent, result);
  return result;
}
var cacheAccessibleName;
var cacheAccessibleNameHidden;
var cacheAccessibleDescription;
var cacheAccessibleDescriptionHidden;
var cacheAccessibleErrorMessage;
var cacheIsHidden;
var cachePseudoContent;
var cachePseudoContentBefore;
var cachePseudoContentAfter;
var cachePointerEvents;
var cachesCounter = 0;
function beginAriaCaches() {
  ++cachesCounter;
  cacheAccessibleName != null ? cacheAccessibleName : cacheAccessibleName = /* @__PURE__ */ new Map();
  cacheAccessibleNameHidden != null ? cacheAccessibleNameHidden : cacheAccessibleNameHidden = /* @__PURE__ */ new Map();
  cacheAccessibleDescription != null ? cacheAccessibleDescription : cacheAccessibleDescription = /* @__PURE__ */ new Map();
  cacheAccessibleDescriptionHidden != null ? cacheAccessibleDescriptionHidden : cacheAccessibleDescriptionHidden = /* @__PURE__ */ new Map();
  cacheAccessibleErrorMessage != null ? cacheAccessibleErrorMessage : cacheAccessibleErrorMessage = /* @__PURE__ */ new Map();
  cacheIsHidden != null ? cacheIsHidden : cacheIsHidden = /* @__PURE__ */ new Map();
  cachePseudoContent != null ? cachePseudoContent : cachePseudoContent = /* @__PURE__ */ new Map();
  cachePseudoContentBefore != null ? cachePseudoContentBefore : cachePseudoContentBefore = /* @__PURE__ */ new Map();
  cachePseudoContentAfter != null ? cachePseudoContentAfter : cachePseudoContentAfter = /* @__PURE__ */ new Map();
  cachePointerEvents != null ? cachePointerEvents : cachePointerEvents = /* @__PURE__ */ new Map();
}
function endAriaCaches() {
  if (!--cachesCounter) {
    cacheAccessibleName = void 0;
    cacheAccessibleNameHidden = void 0;
    cacheAccessibleDescription = void 0;
    cacheAccessibleDescriptionHidden = void 0;
    cacheAccessibleErrorMessage = void 0;
    cacheIsHidden = void 0;
    cachePseudoContent = void 0;
    cachePseudoContentBefore = void 0;
    cachePseudoContentAfter = void 0;
    cachePointerEvents = void 0;
  }
}
var inputTypeToRole = {
  "button": "button",
  "checkbox": "checkbox",
  "image": "button",
  "number": "spinbutton",
  "radio": "radio",
  "range": "slider",
  "reset": "button",
  "submit": "button"
};

// packages/injected/src/yaml.ts
function yamlEscapeKeyIfNeeded(str) {
  if (!yamlStringNeedsQuotes(str))
    return str;
  return \`'\` + str.replace(/'/g, \`''\`) + \`'\`;
}
function yamlEscapeValueIfNeeded(str) {
  if (!yamlStringNeedsQuotes(str))
    return str;
  return '"' + str.replace(/[\\\\"\\x00-\\x1f\\x7f-\\x9f]/g, (c) => {
    switch (c) {
      case "\\\\":
        return "\\\\\\\\";
      case '"':
        return '\\\\"';
      case "\\b":
        return "\\\\b";
      case "\\f":
        return "\\\\f";
      case "\\n":
        return "\\\\n";
      case "\\r":
        return "\\\\r";
      case "	":
        return "\\\\t";
      default:
        const code = c.charCodeAt(0);
        return "\\\\x" + code.toString(16).padStart(2, "0");
    }
  }) + '"';
}
function yamlStringNeedsQuotes(str) {
  if (str.length === 0)
    return true;
  if (/^\\s|\\s$/.test(str))
    return true;
  if (/[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f-\\x9f]/.test(str))
    return true;
  if (/^-/.test(str))
    return true;
  if (/[\\n:](\\s|$)/.test(str))
    return true;
  if (/\\s#/.test(str))
    return true;
  if (/[\\n\\r]/.test(str))
    return true;
  if (/^[&*\\],?!>|@"'#%]/.test(str))
    return true;
  if (/[{}\`]/.test(str))
    return true;
  if (/^\\[/.test(str))
    return true;
  if (!isNaN(Number(str)) || ["y", "n", "yes", "no", "true", "false", "on", "off", "null"].includes(str.toLowerCase()))
    return true;
  return false;
}

// packages/injected/src/ariaSnapshot.ts
var lastRef = 0;
function generateAriaTree(rootElement, options) {
  const visited = /* @__PURE__ */ new Set();
  const snapshot = {
    root: { role: "fragment", name: "", children: [], element: rootElement, props: {}, box: box(rootElement), receivesPointerEvents: true },
    elements: /* @__PURE__ */ new Map(),
    refs: /* @__PURE__ */ new Map()
  };
  const visit = (ariaNode, node, parentElementVisible) => {
    if (visited.has(node))
      return;
    visited.add(node);
    if (node.nodeType === Node.TEXT_NODE && node.nodeValue) {
      if (!parentElementVisible)
        return;
      const text = node.nodeValue;
      if (ariaNode.role !== "textbox" && text)
        ariaNode.children.push(node.nodeValue || "");
      return;
    }
    if (node.nodeType !== Node.ELEMENT_NODE)
      return;
    const element = node;
    const isElementHiddenForAria2 = isElementHiddenForAria(element);
    if (isElementHiddenForAria2 && !(options == null ? void 0 : options.forAI))
      return;
    const ariaChildren = [];
    if (element.hasAttribute("aria-owns")) {
      const ids = element.getAttribute("aria-owns").split(/\\s+/);
      for (const id of ids) {
        const ownedElement = rootElement.ownerDocument.getElementById(id);
        if (ownedElement)
          ariaChildren.push(ownedElement);
      }
    }
    const visible = !isElementHiddenForAria2 || isElementVisible(element);
    const childAriaNode = visible ? toAriaNode(element, options) : null;
    if (childAriaNode) {
      if (childAriaNode.ref) {
        snapshot.elements.set(childAriaNode.ref, element);
        snapshot.refs.set(element, childAriaNode.ref);
      }
      ariaNode.children.push(childAriaNode);
    }
    processElement(childAriaNode || ariaNode, element, ariaChildren, visible);
  };
  function processElement(ariaNode, element, ariaChildren, parentElementVisible) {
    var _a;
    const display = ((_a = getElementComputedStyle(element)) == null ? void 0 : _a.display) || "inline";
    const treatAsBlock = display !== "inline" || element.nodeName === "BR" ? " " : "";
    if (treatAsBlock)
      ariaNode.children.push(treatAsBlock);
    ariaNode.children.push(getCSSContent(element, "::before") || "");
    const assignedNodes = element.nodeName === "SLOT" ? element.assignedNodes() : [];
    if (assignedNodes.length) {
      for (const child of assignedNodes)
        visit(ariaNode, child, parentElementVisible);
    } else {
      for (let child = element.firstChild; child; child = child.nextSibling) {
        if (!child.assignedSlot)
          visit(ariaNode, child, parentElementVisible);
      }
      if (element.shadowRoot) {
        for (let child = element.shadowRoot.firstChild; child; child = child.nextSibling)
          visit(ariaNode, child, parentElementVisible);
      }
    }
    for (const child of ariaChildren)
      visit(ariaNode, child, parentElementVisible);
    ariaNode.children.push(getCSSContent(element, "::after") || "");
    if (treatAsBlock)
      ariaNode.children.push(treatAsBlock);
    if (ariaNode.children.length === 1 && ariaNode.name === ariaNode.children[0])
      ariaNode.children = [];
    if (ariaNode.role === "link" && element.hasAttribute("href")) {
      const href = element.getAttribute("href");
      ariaNode.props["url"] = href;
    }
  }
  beginAriaCaches();
  try {
    visit(snapshot.root, rootElement, true);
  } finally {
    endAriaCaches();
  }
  normalizeStringChildren(snapshot.root);
  normalizeGenericRoles(snapshot.root);
  return snapshot;
}
function ariaRef(element, role, name, options) {
  var _a;
  if (!(options == null ? void 0 : options.forAI))
    return void 0;
  let ariaRef2;
  ariaRef2 = element._ariaRef;
  if (!ariaRef2 || ariaRef2.role !== role || ariaRef2.name !== name) {
    ariaRef2 = { role, name, ref: ((_a = options == null ? void 0 : options.refPrefix) != null ? _a : "") + "e" + ++lastRef };
    element._ariaRef = ariaRef2;
  }
  return ariaRef2.ref;
}
function toAriaNode(element, options) {
  var _a;
  const active = element.ownerDocument.activeElement === element;
  if (element.nodeName === "IFRAME") {
    return {
      role: "iframe",
      name: "",
      ref: ariaRef(element, "iframe", "", options),
      children: [],
      props: {},
      element,
      box: box(element),
      receivesPointerEvents: true,
      active
    };
  }
  const defaultRole = (options == null ? void 0 : options.forAI) ? "generic" : null;
  const role = (_a = getAriaRole(element)) != null ? _a : defaultRole;
  if (!role || role === "presentation" || role === "none")
    return null;
  const name = normalizeWhiteSpace(getElementAccessibleName(element, false) || "");
  const receivesPointerEvents3 = receivesPointerEvents(element);
  const result = {
    role,
    name,
    ref: ariaRef(element, role, name, options),
    children: [],
    props: {},
    element,
    box: box(element),
    receivesPointerEvents: receivesPointerEvents3,
    active
  };
  if (kAriaCheckedRoles.includes(role))
    result.checked = getAriaChecked(element);
  if (kAriaDisabledRoles.includes(role))
    result.disabled = getAriaDisabled(element);
  if (kAriaExpandedRoles.includes(role))
    result.expanded = getAriaExpanded(element);
  if (kAriaLevelRoles.includes(role))
    result.level = getAriaLevel(element);
  if (kAriaPressedRoles.includes(role))
    result.pressed = getAriaPressed(element);
  if (kAriaSelectedRoles.includes(role))
    result.selected = getAriaSelected(element);
  if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement) {
    if (element.type !== "checkbox" && element.type !== "radio" && element.type !== "file")
      result.children = [element.value];
  }
  return result;
}
function normalizeGenericRoles(node) {
  const normalizeChildren = (node2) => {
    const result = [];
    for (const child of node2.children || []) {
      if (typeof child === "string") {
        result.push(child);
        continue;
      }
      const normalized = normalizeChildren(child);
      result.push(...normalized);
    }
    const removeSelf = node2.role === "generic" && result.length <= 1 && result.every((c) => typeof c !== "string" && receivesPointerEvents2(c));
    if (removeSelf)
      return result;
    node2.children = result;
    return [node2];
  };
  normalizeChildren(node);
}
function normalizeStringChildren(rootA11yNode) {
  const flushChildren = (buffer, normalizedChildren) => {
    if (!buffer.length)
      return;
    const text = normalizeWhiteSpace(buffer.join(""));
    if (text)
      normalizedChildren.push(text);
    buffer.length = 0;
  };
  const visit = (ariaNode) => {
    const normalizedChildren = [];
    const buffer = [];
    for (const child of ariaNode.children || []) {
      if (typeof child === "string") {
        buffer.push(child);
      } else {
        flushChildren(buffer, normalizedChildren);
        visit(child);
        normalizedChildren.push(child);
      }
    }
    flushChildren(buffer, normalizedChildren);
    ariaNode.children = normalizedChildren.length ? normalizedChildren : [];
    if (ariaNode.children.length === 1 && ariaNode.children[0] === ariaNode.name)
      ariaNode.children = [];
  };
  visit(rootA11yNode);
}
function matchesText(text, template) {
  if (!template)
    return true;
  if (!text)
    return false;
  if (typeof template === "string")
    return text === template;
  return !!text.match(new RegExp(template.pattern));
}
function matchesTextNode(text, template) {
  return matchesText(text, template.text);
}
function matchesName(text, template) {
  return matchesText(text, template.name);
}
function matchesAriaTree(rootElement, template) {
  const snapshot = generateAriaTree(rootElement);
  const matches = matchesNodeDeep(snapshot.root, template, false, false);
  return {
    matches,
    received: {
      raw: renderAriaTree(snapshot, { mode: "raw" }),
      regex: renderAriaTree(snapshot, { mode: "regex" })
    }
  };
}
function getAllByAria(rootElement, template) {
  const root = generateAriaTree(rootElement).root;
  const matches = matchesNodeDeep(root, template, true, false);
  return matches.map((n) => n.element);
}
function matchesNode(node, template, isDeepEqual) {
  var _a;
  if (typeof node === "string" && template.kind === "text")
    return matchesTextNode(node, template);
  if (node === null || typeof node !== "object" || template.kind !== "role")
    return false;
  if (template.role !== "fragment" && template.role !== node.role)
    return false;
  if (template.checked !== void 0 && template.checked !== node.checked)
    return false;
  if (template.disabled !== void 0 && template.disabled !== node.disabled)
    return false;
  if (template.expanded !== void 0 && template.expanded !== node.expanded)
    return false;
  if (template.level !== void 0 && template.level !== node.level)
    return false;
  if (template.pressed !== void 0 && template.pressed !== node.pressed)
    return false;
  if (template.selected !== void 0 && template.selected !== node.selected)
    return false;
  if (!matchesName(node.name, template))
    return false;
  if (!matchesText(node.props.url, (_a = template.props) == null ? void 0 : _a.url))
    return false;
  if (template.containerMode === "contain")
    return containsList(node.children || [], template.children || []);
  if (template.containerMode === "equal")
    return listEqual(node.children || [], template.children || [], false);
  if (template.containerMode === "deep-equal" || isDeepEqual)
    return listEqual(node.children || [], template.children || [], true);
  return containsList(node.children || [], template.children || []);
}
function listEqual(children, template, isDeepEqual) {
  if (template.length !== children.length)
    return false;
  for (let i = 0; i < template.length; ++i) {
    if (!matchesNode(children[i], template[i], isDeepEqual))
      return false;
  }
  return true;
}
function containsList(children, template) {
  if (template.length > children.length)
    return false;
  const cc = children.slice();
  const tt = template.slice();
  for (const t of tt) {
    let c = cc.shift();
    while (c) {
      if (matchesNode(c, t, false))
        break;
      c = cc.shift();
    }
    if (!c)
      return false;
  }
  return true;
}
function matchesNodeDeep(root, template, collectAll, isDeepEqual) {
  const results = [];
  const visit = (node, parent) => {
    if (matchesNode(node, template, isDeepEqual)) {
      const result = typeof node === "string" ? parent : node;
      if (result)
        results.push(result);
      return !collectAll;
    }
    if (typeof node === "string")
      return false;
    for (const child of node.children || []) {
      if (visit(child, node))
        return true;
    }
    return false;
  };
  visit(root, null);
  return results;
}
function renderAriaTree(ariaSnapshot, options) {
  const lines = [];
  const includeText = (options == null ? void 0 : options.mode) === "regex" ? textContributesInfo : () => true;
  const renderString = (options == null ? void 0 : options.mode) === "regex" ? convertToBestGuessRegex : (str) => str;
  const visit = (ariaNode2, parentAriaNode, indent) => {
    if (typeof ariaNode2 === "string") {
      if (parentAriaNode && !includeText(parentAriaNode, ariaNode2))
        return;
      const text = yamlEscapeValueIfNeeded(renderString(ariaNode2));
      if (text)
        lines.push(indent + "- text: " + text);
      return;
    }
    let key = ariaNode2.role;
    if (ariaNode2.name && ariaNode2.name.length <= 900) {
      const name = renderString(ariaNode2.name);
      if (name) {
        const stringifiedName = name.startsWith("/") && name.endsWith("/") ? name : JSON.stringify(name);
        key += " " + stringifiedName;
      }
    }
    if (ariaNode2.checked === "mixed")
      key += \` [checked=mixed]\`;
    if (ariaNode2.checked === true)
      key += \` [checked]\`;
    if (ariaNode2.disabled)
      key += \` [disabled]\`;
    if (ariaNode2.expanded)
      key += \` [expanded]\`;
    if (ariaNode2.active && (options == null ? void 0 : options.forAI))
      key += \` [active]\`;
    if (ariaNode2.level)
      key += \` [level=\${ariaNode2.level}]\`;
    if (ariaNode2.pressed === "mixed")
      key += \` [pressed=mixed]\`;
    if (ariaNode2.pressed === true)
      key += \` [pressed]\`;
    if (ariaNode2.selected === true)
      key += \` [selected]\`;
    if ((options == null ? void 0 : options.forAI) && receivesPointerEvents2(ariaNode2)) {
      const ref = ariaNode2.ref;
      const cursor = hasPointerCursor(ariaNode2) ? " [cursor=pointer]" : "";
      if (ref)
        key += \` [ref=\${ref}]\${cursor}\`;
    }
    const escapedKey = indent + "- " + yamlEscapeKeyIfNeeded(key);
    const hasProps = !!Object.keys(ariaNode2.props).length;
    if (!ariaNode2.children.length && !hasProps) {
      lines.push(escapedKey);
    } else if (ariaNode2.children.length === 1 && typeof ariaNode2.children[0] === "string" && !hasProps) {
      const text = includeText(ariaNode2, ariaNode2.children[0]) ? renderString(ariaNode2.children[0]) : null;
      if (text)
        lines.push(escapedKey + ": " + yamlEscapeValueIfNeeded(text));
      else
        lines.push(escapedKey);
    } else {
      lines.push(escapedKey + ":");
      for (const [name, value] of Object.entries(ariaNode2.props))
        lines.push(indent + "  - /" + name + ": " + yamlEscapeValueIfNeeded(value));
      for (const child of ariaNode2.children || [])
        visit(child, ariaNode2, indent + "  ");
    }
  };
  const ariaNode = ariaSnapshot.root;
  if (ariaNode.role === "fragment") {
    for (const child of ariaNode.children || [])
      visit(child, ariaNode, "");
  } else {
    visit(ariaNode, null, "");
  }
  return lines.join("\\n");
}
function convertToBestGuessRegex(text) {
  const dynamicContent = [
    // 2mb
    { regex: /\\b[\\d,.]+[bkmBKM]+\\b/, replacement: "[\\\\d,.]+[bkmBKM]+" },
    // 2ms, 20s
    { regex: /\\b\\d+[hmsp]+\\b/, replacement: "\\\\d+[hmsp]+" },
    { regex: /\\b[\\d,.]+[hmsp]+\\b/, replacement: "[\\\\d,.]+[hmsp]+" },
    // Do not replace single digits with regex by default.
    // 2+ digits: [Issue 22, 22.3, 2.33, 2,333]
    { regex: /\\b\\d+,\\d+\\b/, replacement: "\\\\d+,\\\\d+" },
    { regex: /\\b\\d+\\.\\d{2,}\\b/, replacement: "\\\\d+\\\\.\\\\d+" },
    { regex: /\\b\\d{2,}\\.\\d+\\b/, replacement: "\\\\d+\\\\.\\\\d+" },
    { regex: /\\b\\d{2,}\\b/, replacement: "\\\\d+" }
  ];
  let pattern = "";
  let lastIndex = 0;
  const combinedRegex = new RegExp(dynamicContent.map((r) => "(" + r.regex.source + ")").join("|"), "g");
  text.replace(combinedRegex, (match, ...args) => {
    const offset = args[args.length - 2];
    const groups = args.slice(0, -2);
    pattern += escapeRegExp(text.slice(lastIndex, offset));
    for (let i = 0; i < groups.length; i++) {
      if (groups[i]) {
        const { replacement } = dynamicContent[i];
        pattern += replacement;
        break;
      }
    }
    lastIndex = offset + match.length;
    return match;
  });
  if (!pattern)
    return text;
  pattern += escapeRegExp(text.slice(lastIndex));
  return String(new RegExp(pattern));
}
function textContributesInfo(node, text) {
  if (!text.length)
    return false;
  if (!node.name)
    return true;
  if (node.name.length > text.length)
    return false;
  const substr = text.length <= 200 && node.name.length <= 200 ? longestCommonSubstring(text, node.name) : "";
  let filtered = text;
  while (substr && filtered.includes(substr))
    filtered = filtered.replace(substr, "");
  return filtered.trim().length / text.length > 0.1;
}
function receivesPointerEvents2(ariaNode) {
  return ariaNode.box.visible && ariaNode.receivesPointerEvents;
}
function hasPointerCursor(ariaNode) {
  var _a;
  return ((_a = ariaNode.box.style) == null ? void 0 : _a.cursor) === "pointer";
}

// packages/injected/src/highlight.css?inline
var highlight_default = ":host{font-size:13px;font-family:system-ui,Ubuntu,Droid Sans,sans-serif;color:#333}svg{position:absolute;height:0}x-pw-tooltip{backdrop-filter:blur(5px);background-color:#fff;border-radius:6px;box-shadow:0 .5rem 1.2rem #0000004d;display:none;font-size:12.8px;font-weight:400;left:0;line-height:1.5;max-width:600px;position:absolute;top:0;padding:0;flex-direction:column;overflow:hidden}x-pw-tooltip-line{display:flex;max-width:600px;padding:6px;user-select:none;cursor:pointer}x-pw-tooltip-line.selectable:hover{background-color:#f2f2f2;overflow:hidden}x-pw-tooltip-footer{display:flex;max-width:600px;padding:6px;user-select:none;color:#777}x-pw-dialog{background-color:#fff;pointer-events:auto;border-radius:6px;box-shadow:0 .5rem 1.2rem #0000004d;display:flex;flex-direction:column;position:absolute;width:400px;height:150px;z-index:10;font-size:13px}x-pw-dialog-body{display:flex;flex-direction:column;flex:auto}x-pw-dialog-body label{margin:5px 8px;display:flex;flex-direction:row;align-items:center}x-pw-highlight{position:absolute;top:0;left:0;width:0;height:0}x-pw-action-point{position:absolute;width:20px;height:20px;background:red;border-radius:10px;margin:-10px 0 0 -10px;z-index:2}x-pw-separator{height:1px;margin:6px 9px;background:#949494e5}x-pw-tool-gripper{height:28px;width:24px;margin:2px 0;cursor:grab}x-pw-tool-gripper:active{cursor:grabbing}x-pw-tool-gripper>x-div{width:16px;height:16px;margin:6px 4px;clip-path:url(#icon-gripper);background-color:#555}x-pw-tools-list>label{display:flex;align-items:center;margin:0 10px;user-select:none}x-pw-tools-list{display:flex;width:100%;border-bottom:1px solid #dddddd}x-pw-tool-item{pointer-events:auto;height:28px;width:28px;border-radius:3px}x-pw-tool-item:not(.disabled){cursor:pointer}x-pw-tool-item:not(.disabled):hover{background-color:#dbdbdb}x-pw-tool-item.toggled{background-color:#8acae480}x-pw-tool-item.toggled:not(.disabled):hover{background-color:#8acae4c4}x-pw-tool-item>x-div{width:16px;height:16px;margin:6px;background-color:#3a3a3a}x-pw-tool-item.disabled>x-div{background-color:#61616180;cursor:default}x-pw-tool-item.record.toggled{background-color:transparent}x-pw-tool-item.record.toggled:not(.disabled):hover{background-color:#dbdbdb}x-pw-tool-item.record.toggled>x-div{background-color:#a1260d}x-pw-tool-item.record.disabled.toggled>x-div{opacity:.8}x-pw-tool-item.accept>x-div{background-color:#388a34}x-pw-tool-item.record>x-div{clip-path:url(#icon-circle-large-filled)}x-pw-tool-item.pick-locator>x-div{clip-path:url(#icon-inspect)}x-pw-tool-item.text>x-div{clip-path:url(#icon-whole-word)}x-pw-tool-item.visibility>x-div{clip-path:url(#icon-eye)}x-pw-tool-item.value>x-div{clip-path:url(#icon-symbol-constant)}x-pw-tool-item.snapshot>x-div{clip-path:url(#icon-gist)}x-pw-tool-item.accept>x-div{clip-path:url(#icon-check)}x-pw-tool-item.cancel>x-div{clip-path:url(#icon-close)}x-pw-tool-item.succeeded>x-div{clip-path:url(#icon-pass);background-color:#388a34!important}x-pw-overlay{position:absolute;top:0;max-width:min-content;z-index:2147483647;background:transparent;pointer-events:auto}x-pw-overlay x-pw-tools-list{background-color:#fffd;box-shadow:#0000001a 0 5px 5px;border-radius:3px;border-bottom:none}x-pw-overlay x-pw-tool-item{margin:2px}textarea.text-editor{font-family:system-ui,Ubuntu,Droid Sans,sans-serif;flex:auto;border:none;margin:6px 10px;color:#333;outline:1px solid transparent!important;resize:none;padding:0;font-size:13px}textarea.text-editor.does-not-match{outline:1px solid red!important}x-div{display:block}x-spacer{flex:auto}*{box-sizing:border-box}*[hidden]{display:none!important}x-locator-editor{flex:none;width:100%;height:60px;padding:4px;border-bottom:1px solid #dddddd;outline:1px solid transparent}x-locator-editor.does-not-match{outline:1px solid red}.CodeMirror{width:100%!important;height:100%!important}\\n";

// packages/injected/src/highlight.ts
var Highlight = class {
  constructor(injectedScript) {
    this._renderedEntries = [];
    this._language = "javascript";
    this._injectedScript = injectedScript;
    const document = injectedScript.document;
    this._isUnderTest = injectedScript.isUnderTest;
    this._glassPaneElement = document.createElement("x-pw-glass");
    this._glassPaneElement.style.position = "fixed";
    this._glassPaneElement.style.top = "0";
    this._glassPaneElement.style.right = "0";
    this._glassPaneElement.style.bottom = "0";
    this._glassPaneElement.style.left = "0";
    this._glassPaneElement.style.zIndex = "2147483647";
    this._glassPaneElement.style.pointerEvents = "none";
    this._glassPaneElement.style.display = "flex";
    this._glassPaneElement.style.backgroundColor = "transparent";
    for (const eventName of ["click", "auxclick", "dragstart", "input", "keydown", "keyup", "pointerdown", "pointerup", "mousedown", "mouseup", "mouseleave", "focus", "scroll"]) {
      this._glassPaneElement.addEventListener(eventName, (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
      });
    }
    this._actionPointElement = document.createElement("x-pw-action-point");
    this._actionPointElement.setAttribute("hidden", "true");
    this._glassPaneShadow = this._glassPaneElement.attachShadow({ mode: this._isUnderTest ? "open" : "closed" });
    if (typeof this._glassPaneShadow.adoptedStyleSheets.push === "function") {
      const sheet = new this._injectedScript.window.CSSStyleSheet();
      sheet.replaceSync(highlight_default);
      this._glassPaneShadow.adoptedStyleSheets.push(sheet);
    } else {
      const styleElement = this._injectedScript.document.createElement("style");
      styleElement.textContent = highlight_default;
      this._glassPaneShadow.appendChild(styleElement);
    }
    this._glassPaneShadow.appendChild(this._actionPointElement);
  }
  install() {
    if (!this._injectedScript.document.documentElement)
      return;
    if (!this._injectedScript.document.documentElement.contains(this._glassPaneElement) || this._glassPaneElement.nextElementSibling)
      this._injectedScript.document.documentElement.appendChild(this._glassPaneElement);
  }
  setLanguage(language) {
    this._language = language;
  }
  runHighlightOnRaf(selector) {
    if (this._rafRequest)
      this._injectedScript.utils.builtins.cancelAnimationFrame(this._rafRequest);
    const elements = this._injectedScript.querySelectorAll(selector, this._injectedScript.document.documentElement);
    const locator = asLocator(this._language, stringifySelector(selector));
    const color = elements.length > 1 ? "#f6b26b7f" : "#6fa8dc7f";
    this.updateHighlight(elements.map((element, index) => {
      const suffix = elements.length > 1 ? \` [\${index + 1} of \${elements.length}]\` : "";
      return { element, color, tooltipText: locator + suffix };
    }));
    this._rafRequest = this._injectedScript.utils.builtins.requestAnimationFrame(() => this.runHighlightOnRaf(selector));
  }
  uninstall() {
    if (this._rafRequest)
      this._injectedScript.utils.builtins.cancelAnimationFrame(this._rafRequest);
    this._glassPaneElement.remove();
  }
  showActionPoint(x, y) {
    this._actionPointElement.style.top = y + "px";
    this._actionPointElement.style.left = x + "px";
    this._actionPointElement.hidden = false;
  }
  hideActionPoint() {
    this._actionPointElement.hidden = true;
  }
  clearHighlight() {
    var _a, _b;
    for (const entry of this._renderedEntries) {
      (_a = entry.highlightElement) == null ? void 0 : _a.remove();
      (_b = entry.tooltipElement) == null ? void 0 : _b.remove();
    }
    this._renderedEntries = [];
  }
  maskElements(elements, color) {
    this.updateHighlight(elements.map((element) => ({ element, color })));
  }
  updateHighlight(entries) {
    if (this._highlightIsUpToDate(entries))
      return;
    this.clearHighlight();
    for (const entry of entries) {
      const highlightElement = this._createHighlightElement();
      this._glassPaneShadow.appendChild(highlightElement);
      let tooltipElement;
      if (entry.tooltipText) {
        tooltipElement = this._injectedScript.document.createElement("x-pw-tooltip");
        this._glassPaneShadow.appendChild(tooltipElement);
        tooltipElement.style.top = "0";
        tooltipElement.style.left = "0";
        tooltipElement.style.display = "flex";
        const lineElement = this._injectedScript.document.createElement("x-pw-tooltip-line");
        lineElement.textContent = entry.tooltipText;
        tooltipElement.appendChild(lineElement);
      }
      this._renderedEntries.push({ targetElement: entry.element, color: entry.color, tooltipElement, highlightElement });
    }
    for (const entry of this._renderedEntries) {
      entry.box = entry.targetElement.getBoundingClientRect();
      if (!entry.tooltipElement)
        continue;
      const { anchorLeft, anchorTop } = this.tooltipPosition(entry.box, entry.tooltipElement);
      entry.tooltipTop = anchorTop;
      entry.tooltipLeft = anchorLeft;
    }
    for (const entry of this._renderedEntries) {
      if (entry.tooltipElement) {
        entry.tooltipElement.style.top = entry.tooltipTop + "px";
        entry.tooltipElement.style.left = entry.tooltipLeft + "px";
      }
      const box2 = entry.box;
      entry.highlightElement.style.backgroundColor = entry.color;
      entry.highlightElement.style.left = box2.x + "px";
      entry.highlightElement.style.top = box2.y + "px";
      entry.highlightElement.style.width = box2.width + "px";
      entry.highlightElement.style.height = box2.height + "px";
      entry.highlightElement.style.display = "block";
      if (this._isUnderTest)
        console.error("Highlight box for test: " + JSON.stringify({ x: box2.x, y: box2.y, width: box2.width, height: box2.height }));
    }
  }
  firstBox() {
    var _a;
    return (_a = this._renderedEntries[0]) == null ? void 0 : _a.box;
  }
  tooltipPosition(box2, tooltipElement) {
    const tooltipWidth = tooltipElement.offsetWidth;
    const tooltipHeight = tooltipElement.offsetHeight;
    const totalWidth = this._glassPaneElement.offsetWidth;
    const totalHeight = this._glassPaneElement.offsetHeight;
    let anchorLeft = box2.left;
    if (anchorLeft + tooltipWidth > totalWidth - 5)
      anchorLeft = totalWidth - tooltipWidth - 5;
    let anchorTop = box2.bottom + 5;
    if (anchorTop + tooltipHeight > totalHeight - 5) {
      if (box2.top > tooltipHeight + 5) {
        anchorTop = box2.top - tooltipHeight - 5;
      } else {
        anchorTop = totalHeight - 5 - tooltipHeight;
      }
    }
    return { anchorLeft, anchorTop };
  }
  _highlightIsUpToDate(entries) {
    if (entries.length !== this._renderedEntries.length)
      return false;
    for (let i = 0; i < this._renderedEntries.length; ++i) {
      if (entries[i].element !== this._renderedEntries[i].targetElement)
        return false;
      if (entries[i].color !== this._renderedEntries[i].color)
        return false;
      const oldBox = this._renderedEntries[i].box;
      if (!oldBox)
        return false;
      const box2 = entries[i].element.getBoundingClientRect();
      if (box2.top !== oldBox.top || box2.right !== oldBox.right || box2.bottom !== oldBox.bottom || box2.left !== oldBox.left)
        return false;
    }
    return true;
  }
  _createHighlightElement() {
    return this._injectedScript.document.createElement("x-pw-highlight");
  }
  appendChild(element) {
    this._glassPaneShadow.appendChild(element);
  }
};

// packages/injected/src/layoutSelectorUtils.ts
function boxRightOf(box1, box2, maxDistance) {
  const distance = box1.left - box2.right;
  if (distance < 0 || maxDistance !== void 0 && distance > maxDistance)
    return;
  return distance + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);
}
function boxLeftOf(box1, box2, maxDistance) {
  const distance = box2.left - box1.right;
  if (distance < 0 || maxDistance !== void 0 && distance > maxDistance)
    return;
  return distance + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);
}
function boxAbove(box1, box2, maxDistance) {
  const distance = box2.top - box1.bottom;
  if (distance < 0 || maxDistance !== void 0 && distance > maxDistance)
    return;
  return distance + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);
}
function boxBelow(box1, box2, maxDistance) {
  const distance = box1.top - box2.bottom;
  if (distance < 0 || maxDistance !== void 0 && distance > maxDistance)
    return;
  return distance + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);
}
function boxNear(box1, box2, maxDistance) {
  const kThreshold = maxDistance === void 0 ? 50 : maxDistance;
  let score = 0;
  if (box1.left - box2.right >= 0)
    score += box1.left - box2.right;
  if (box2.left - box1.right >= 0)
    score += box2.left - box1.right;
  if (box2.top - box1.bottom >= 0)
    score += box2.top - box1.bottom;
  if (box1.top - box2.bottom >= 0)
    score += box1.top - box2.bottom;
  return score > kThreshold ? void 0 : score;
}
var kLayoutSelectorNames = ["left-of", "right-of", "above", "below", "near"];
function layoutSelectorScore(name, element, inner, maxDistance) {
  const box2 = element.getBoundingClientRect();
  const scorer = { "left-of": boxLeftOf, "right-of": boxRightOf, "above": boxAbove, "below": boxBelow, "near": boxNear }[name];
  let bestScore;
  for (const e of inner) {
    if (e === element)
      continue;
    const score = scorer(box2, e.getBoundingClientRect(), maxDistance);
    if (score === void 0)
      continue;
    if (bestScore === void 0 || score < bestScore)
      bestScore = score;
  }
  return bestScore;
}

// packages/injected/src/selectorUtils.ts
function matchesComponentAttribute(obj, attr) {
  for (const token of attr.jsonPath) {
    if (obj !== void 0 && obj !== null)
      obj = obj[token];
  }
  return matchesAttributePart(obj, attr);
}
function matchesAttributePart(value, attr) {
  const objValue = typeof value === "string" && !attr.caseSensitive ? value.toUpperCase() : value;
  const attrValue = typeof attr.value === "string" && !attr.caseSensitive ? attr.value.toUpperCase() : attr.value;
  if (attr.op === "<truthy>")
    return !!objValue;
  if (attr.op === "=") {
    if (attrValue instanceof RegExp)
      return typeof objValue === "string" && !!objValue.match(attrValue);
    return objValue === attrValue;
  }
  if (typeof objValue !== "string" || typeof attrValue !== "string")
    return false;
  if (attr.op === "*=")
    return objValue.includes(attrValue);
  if (attr.op === "^=")
    return objValue.startsWith(attrValue);
  if (attr.op === "$=")
    return objValue.endsWith(attrValue);
  if (attr.op === "|=")
    return objValue === attrValue || objValue.startsWith(attrValue + "-");
  if (attr.op === "~=")
    return objValue.split(" ").includes(attrValue);
  return false;
}
function shouldSkipForTextMatching(element) {
  const document = element.ownerDocument;
  return element.nodeName === "SCRIPT" || element.nodeName === "NOSCRIPT" || element.nodeName === "STYLE" || document.head && document.head.contains(element);
}
function elementText(cache, root) {
  let value = cache.get(root);
  if (value === void 0) {
    value = { full: "", normalized: "", immediate: [] };
    if (!shouldSkipForTextMatching(root)) {
      let currentImmediate = "";
      if (root instanceof HTMLInputElement && (root.type === "submit" || root.type === "button")) {
        value = { full: root.value, normalized: normalizeWhiteSpace(root.value), immediate: [root.value] };
      } else {
        for (let child = root.firstChild; child; child = child.nextSibling) {
          if (child.nodeType === Node.TEXT_NODE) {
            value.full += child.nodeValue || "";
            currentImmediate += child.nodeValue || "";
          } else if (child.nodeType === Node.COMMENT_NODE) {
            continue;
          } else {
            if (currentImmediate)
              value.immediate.push(currentImmediate);
            currentImmediate = "";
            if (child.nodeType === Node.ELEMENT_NODE)
              value.full += elementText(cache, child).full;
          }
        }
        if (currentImmediate)
          value.immediate.push(currentImmediate);
        if (root.shadowRoot)
          value.full += elementText(cache, root.shadowRoot).full;
        if (value.full)
          value.normalized = normalizeWhiteSpace(value.full);
      }
    }
    cache.set(root, value);
  }
  return value;
}
function elementMatchesText(cache, element, matcher) {
  if (shouldSkipForTextMatching(element))
    return "none";
  if (!matcher(elementText(cache, element)))
    return "none";
  for (let child = element.firstChild; child; child = child.nextSibling) {
    if (child.nodeType === Node.ELEMENT_NODE && matcher(elementText(cache, child)))
      return "selfAndChildren";
  }
  if (element.shadowRoot && matcher(elementText(cache, element.shadowRoot)))
    return "selfAndChildren";
  return "self";
}
function getElementLabels(textCache, element) {
  const labels = getAriaLabelledByElements(element);
  if (labels)
    return labels.map((label) => elementText(textCache, label));
  const ariaLabel = element.getAttribute("aria-label");
  if (ariaLabel !== null && !!ariaLabel.trim())
    return [{ full: ariaLabel, normalized: normalizeWhiteSpace(ariaLabel), immediate: [ariaLabel] }];
  const isNonHiddenInput = element.nodeName === "INPUT" && element.type !== "hidden";
  if (["BUTTON", "METER", "OUTPUT", "PROGRESS", "SELECT", "TEXTAREA"].includes(element.nodeName) || isNonHiddenInput) {
    const labels2 = element.labels;
    if (labels2)
      return [...labels2].map((label) => elementText(textCache, label));
  }
  return [];
}

// packages/injected/src/reactSelectorEngine.ts
function getFunctionComponentName(component) {
  return component.displayName || component.name || "Anonymous";
}
function getComponentName(reactElement) {
  if (reactElement.type) {
    switch (typeof reactElement.type) {
      case "function":
        return getFunctionComponentName(reactElement.type);
      case "string":
        return reactElement.type;
      case "object":
        return reactElement.type.displayName || (reactElement.type.render ? getFunctionComponentName(reactElement.type.render) : "");
    }
  }
  if (reactElement._currentElement) {
    const elementType = reactElement._currentElement.type;
    if (typeof elementType === "string")
      return elementType;
    if (typeof elementType === "function")
      return elementType.displayName || elementType.name || "Anonymous";
  }
  return "";
}
function getComponentKey(reactElement) {
  var _a, _b;
  return (_b = reactElement.key) != null ? _b : (_a = reactElement._currentElement) == null ? void 0 : _a.key;
}
function getChildren(reactElement) {
  if (reactElement.child) {
    const children = [];
    for (let child = reactElement.child; child; child = child.sibling)
      children.push(child);
    return children;
  }
  if (!reactElement._currentElement)
    return [];
  const isKnownElement = (reactElement2) => {
    var _a;
    const elementType = (_a = reactElement2._currentElement) == null ? void 0 : _a.type;
    return typeof elementType === "function" || typeof elementType === "string";
  };
  if (reactElement._renderedComponent) {
    const child = reactElement._renderedComponent;
    return isKnownElement(child) ? [child] : [];
  }
  if (reactElement._renderedChildren)
    return [...Object.values(reactElement._renderedChildren)].filter(isKnownElement);
  return [];
}
function getProps(reactElement) {
  var _a;
  const props = (
    // React 16+
    reactElement.memoizedProps || // React 15
    ((_a = reactElement._currentElement) == null ? void 0 : _a.props)
  );
  if (!props || typeof props === "string")
    return props;
  const result = { ...props };
  delete result.children;
  return result;
}
function buildComponentsTree(reactElement) {
  var _a;
  const treeNode = {
    key: getComponentKey(reactElement),
    name: getComponentName(reactElement),
    children: getChildren(reactElement).map(buildComponentsTree),
    rootElements: [],
    props: getProps(reactElement)
  };
  const rootElement = (
    // React 16+
    // @see https://github.com/baruchvlz/resq/blob/5c15a5e04d3f7174087248f5a158c3d6dcc1ec72/src/utils.js#L29
    reactElement.stateNode || // React 15
    reactElement._hostNode || ((_a = reactElement._renderedComponent) == null ? void 0 : _a._hostNode)
  );
  if (rootElement instanceof Element) {
    treeNode.rootElements.push(rootElement);
  } else {
    for (const child of treeNode.children)
      treeNode.rootElements.push(...child.rootElements);
  }
  return treeNode;
}
function filterComponentsTree(treeNode, searchFn, result = []) {
  if (searchFn(treeNode))
    result.push(treeNode);
  for (const child of treeNode.children)
    filterComponentsTree(child, searchFn, result);
  return result;
}
function findReactRoots(root, roots = []) {
  const document = root.ownerDocument || root;
  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);
  do {
    const node = walker.currentNode;
    const reactNode = node;
    const rootKey = Object.keys(reactNode).find((key) => key.startsWith("__reactContainer") && reactNode[key] !== null);
    if (rootKey) {
      roots.push(reactNode[rootKey].stateNode.current);
    } else {
      const legacyRootKey = "_reactRootContainer";
      if (reactNode.hasOwnProperty(legacyRootKey) && reactNode[legacyRootKey] !== null) {
        roots.push(reactNode[legacyRootKey]._internalRoot.current);
      }
    }
    if (node instanceof Element && node.hasAttribute("data-reactroot")) {
      for (const key of Object.keys(node)) {
        if (key.startsWith("__reactInternalInstance") || key.startsWith("__reactFiber"))
          roots.push(node[key]);
      }
    }
    const shadowRoot = node instanceof Element ? node.shadowRoot : null;
    if (shadowRoot)
      findReactRoots(shadowRoot, roots);
  } while (walker.nextNode());
  return roots;
}
var createReactEngine = () => ({
  queryAll(scope, selector) {
    const { name, attributes } = parseAttributeSelector(selector, false);
    const reactRoots = findReactRoots(scope.ownerDocument || scope);
    const trees = reactRoots.map((reactRoot) => buildComponentsTree(reactRoot));
    const treeNodes = trees.map((tree) => filterComponentsTree(tree, (treeNode) => {
      var _a;
      const props = (_a = treeNode.props) != null ? _a : {};
      if (treeNode.key !== void 0)
        props.key = treeNode.key;
      if (name && treeNode.name !== name)
        return false;
      if (treeNode.rootElements.some((domNode) => !isInsideScope(scope, domNode)))
        return false;
      for (const attr of attributes) {
        if (!matchesComponentAttribute(props, attr))
          return false;
      }
      return true;
    })).flat();
    const allRootElements = /* @__PURE__ */ new Set();
    for (const treeNode of treeNodes) {
      for (const domNode of treeNode.rootElements)
        allRootElements.add(domNode);
    }
    return [...allRootElements];
  }
});

// packages/injected/src/roleSelectorEngine.ts
var kSupportedAttributes = ["selected", "checked", "pressed", "expanded", "level", "disabled", "name", "include-hidden"];
kSupportedAttributes.sort();
function validateSupportedRole(attr, roles, role) {
  if (!roles.includes(role))
    throw new Error(\`"\${attr}" attribute is only supported for roles: \${roles.slice().sort().map((role2) => \`"\${role2}"\`).join(", ")}\`);
}
function validateSupportedValues(attr, values) {
  if (attr.op !== "<truthy>" && !values.includes(attr.value))
    throw new Error(\`"\${attr.name}" must be one of \${values.map((v) => JSON.stringify(v)).join(", ")}\`);
}
function validateSupportedOp(attr, ops) {
  if (!ops.includes(attr.op))
    throw new Error(\`"\${attr.name}" does not support "\${attr.op}" matcher\`);
}
function validateAttributes(attrs, role) {
  const options = { role };
  for (const attr of attrs) {
    switch (attr.name) {
      case "checked": {
        validateSupportedRole(attr.name, kAriaCheckedRoles, role);
        validateSupportedValues(attr, [true, false, "mixed"]);
        validateSupportedOp(attr, ["<truthy>", "="]);
        options.checked = attr.op === "<truthy>" ? true : attr.value;
        break;
      }
      case "pressed": {
        validateSupportedRole(attr.name, kAriaPressedRoles, role);
        validateSupportedValues(attr, [true, false, "mixed"]);
        validateSupportedOp(attr, ["<truthy>", "="]);
        options.pressed = attr.op === "<truthy>" ? true : attr.value;
        break;
      }
      case "selected": {
        validateSupportedRole(attr.name, kAriaSelectedRoles, role);
        validateSupportedValues(attr, [true, false]);
        validateSupportedOp(attr, ["<truthy>", "="]);
        options.selected = attr.op === "<truthy>" ? true : attr.value;
        break;
      }
      case "expanded": {
        validateSupportedRole(attr.name, kAriaExpandedRoles, role);
        validateSupportedValues(attr, [true, false]);
        validateSupportedOp(attr, ["<truthy>", "="]);
        options.expanded = attr.op === "<truthy>" ? true : attr.value;
        break;
      }
      case "level": {
        validateSupportedRole(attr.name, kAriaLevelRoles, role);
        if (typeof attr.value === "string")
          attr.value = +attr.value;
        if (attr.op !== "=" || typeof attr.value !== "number" || Number.isNaN(attr.value))
          throw new Error(\`"level" attribute must be compared to a number\`);
        options.level = attr.value;
        break;
      }
      case "disabled": {
        validateSupportedValues(attr, [true, false]);
        validateSupportedOp(attr, ["<truthy>", "="]);
        options.disabled = attr.op === "<truthy>" ? true : attr.value;
        break;
      }
      case "name": {
        if (attr.op === "<truthy>")
          throw new Error(\`"name" attribute must have a value\`);
        if (typeof attr.value !== "string" && !(attr.value instanceof RegExp))
          throw new Error(\`"name" attribute must be a string or a regular expression\`);
        options.name = attr.value;
        options.nameOp = attr.op;
        options.exact = attr.caseSensitive;
        break;
      }
      case "include-hidden": {
        validateSupportedValues(attr, [true, false]);
        validateSupportedOp(attr, ["<truthy>", "="]);
        options.includeHidden = attr.op === "<truthy>" ? true : attr.value;
        break;
      }
      default: {
        throw new Error(\`Unknown attribute "\${attr.name}", must be one of \${kSupportedAttributes.map((a) => \`"\${a}"\`).join(", ")}.\`);
      }
    }
  }
  return options;
}
function queryRole(scope, options, internal) {
  const result = [];
  const match = (element) => {
    if (getAriaRole(element) !== options.role)
      return;
    if (options.selected !== void 0 && getAriaSelected(element) !== options.selected)
      return;
    if (options.checked !== void 0 && getAriaChecked(element) !== options.checked)
      return;
    if (options.pressed !== void 0 && getAriaPressed(element) !== options.pressed)
      return;
    if (options.expanded !== void 0 && getAriaExpanded(element) !== options.expanded)
      return;
    if (options.level !== void 0 && getAriaLevel(element) !== options.level)
      return;
    if (options.disabled !== void 0 && getAriaDisabled(element) !== options.disabled)
      return;
    if (!options.includeHidden) {
      const isHidden = isElementHiddenForAria(element);
      if (isHidden)
        return;
    }
    if (options.name !== void 0) {
      const accessibleName = normalizeWhiteSpace(getElementAccessibleName(element, !!options.includeHidden));
      if (typeof options.name === "string")
        options.name = normalizeWhiteSpace(options.name);
      if (internal && !options.exact && options.nameOp === "=")
        options.nameOp = "*=";
      if (!matchesAttributePart(accessibleName, { name: "", jsonPath: [], op: options.nameOp || "=", value: options.name, caseSensitive: !!options.exact }))
        return;
    }
    result.push(element);
  };
  const query = (root) => {
    const shadows = [];
    if (root.shadowRoot)
      shadows.push(root.shadowRoot);
    for (const element of root.querySelectorAll("*")) {
      match(element);
      if (element.shadowRoot)
        shadows.push(element.shadowRoot);
    }
    shadows.forEach(query);
  };
  query(scope);
  return result;
}
function createRoleEngine(internal) {
  return {
    queryAll: (scope, selector) => {
      const parsed = parseAttributeSelector(selector, true);
      const role = parsed.name.toLowerCase();
      if (!role)
        throw new Error(\`Role must not be empty\`);
      const options = validateAttributes(parsed.attributes, role);
      beginAriaCaches();
      try {
        return queryRole(scope, options, internal);
      } finally {
        endAriaCaches();
      }
    }
  };
}

// packages/injected/src/selectorEvaluator.ts
var SelectorEvaluatorImpl = class {
  constructor() {
    this._retainCacheCounter = 0;
    this._cacheText = /* @__PURE__ */ new Map();
    this._cacheQueryCSS = /* @__PURE__ */ new Map();
    this._cacheMatches = /* @__PURE__ */ new Map();
    this._cacheQuery = /* @__PURE__ */ new Map();
    this._cacheMatchesSimple = /* @__PURE__ */ new Map();
    this._cacheMatchesParents = /* @__PURE__ */ new Map();
    this._cacheCallMatches = /* @__PURE__ */ new Map();
    this._cacheCallQuery = /* @__PURE__ */ new Map();
    this._cacheQuerySimple = /* @__PURE__ */ new Map();
    this._engines = /* @__PURE__ */ new Map();
    this._engines.set("not", notEngine);
    this._engines.set("is", isEngine);
    this._engines.set("where", isEngine);
    this._engines.set("has", hasEngine);
    this._engines.set("scope", scopeEngine);
    this._engines.set("light", lightEngine);
    this._engines.set("visible", visibleEngine);
    this._engines.set("text", textEngine);
    this._engines.set("text-is", textIsEngine);
    this._engines.set("text-matches", textMatchesEngine);
    this._engines.set("has-text", hasTextEngine);
    this._engines.set("right-of", createLayoutEngine("right-of"));
    this._engines.set("left-of", createLayoutEngine("left-of"));
    this._engines.set("above", createLayoutEngine("above"));
    this._engines.set("below", createLayoutEngine("below"));
    this._engines.set("near", createLayoutEngine("near"));
    this._engines.set("nth-match", nthMatchEngine);
    const allNames = [...this._engines.keys()];
    allNames.sort();
    const parserNames = [...customCSSNames];
    parserNames.sort();
    if (allNames.join("|") !== parserNames.join("|"))
      throw new Error(\`Please keep customCSSNames in sync with evaluator engines: \${allNames.join("|")} vs \${parserNames.join("|")}\`);
  }
  begin() {
    ++this._retainCacheCounter;
  }
  end() {
    --this._retainCacheCounter;
    if (!this._retainCacheCounter) {
      this._cacheQueryCSS.clear();
      this._cacheMatches.clear();
      this._cacheQuery.clear();
      this._cacheMatchesSimple.clear();
      this._cacheMatchesParents.clear();
      this._cacheCallMatches.clear();
      this._cacheCallQuery.clear();
      this._cacheQuerySimple.clear();
      this._cacheText.clear();
    }
  }
  _cached(cache, main, rest, cb) {
    if (!cache.has(main))
      cache.set(main, []);
    const entries = cache.get(main);
    const entry = entries.find((e) => rest.every((value, index) => e.rest[index] === value));
    if (entry)
      return entry.result;
    const result = cb();
    entries.push({ rest, result });
    return result;
  }
  _checkSelector(s) {
    const wellFormed = typeof s === "object" && s && (Array.isArray(s) || "simples" in s && s.simples.length);
    if (!wellFormed)
      throw new Error(\`Malformed selector "\${s}"\`);
    return s;
  }
  matches(element, s, context) {
    const selector = this._checkSelector(s);
    this.begin();
    try {
      return this._cached(this._cacheMatches, element, [selector, context.scope, context.pierceShadow, context.originalScope], () => {
        if (Array.isArray(selector))
          return this._matchesEngine(isEngine, element, selector, context);
        if (this._hasScopeClause(selector))
          context = this._expandContextForScopeMatching(context);
        if (!this._matchesSimple(element, selector.simples[selector.simples.length - 1].selector, context))
          return false;
        return this._matchesParents(element, selector, selector.simples.length - 2, context);
      });
    } finally {
      this.end();
    }
  }
  query(context, s) {
    const selector = this._checkSelector(s);
    this.begin();
    try {
      return this._cached(this._cacheQuery, selector, [context.scope, context.pierceShadow, context.originalScope], () => {
        if (Array.isArray(selector))
          return this._queryEngine(isEngine, context, selector);
        if (this._hasScopeClause(selector))
          context = this._expandContextForScopeMatching(context);
        const previousScoreMap = this._scoreMap;
        this._scoreMap = /* @__PURE__ */ new Map();
        let elements = this._querySimple(context, selector.simples[selector.simples.length - 1].selector);
        elements = elements.filter((element) => this._matchesParents(element, selector, selector.simples.length - 2, context));
        if (this._scoreMap.size) {
          elements.sort((a, b) => {
            const aScore = this._scoreMap.get(a);
            const bScore = this._scoreMap.get(b);
            if (aScore === bScore)
              return 0;
            if (aScore === void 0)
              return 1;
            if (bScore === void 0)
              return -1;
            return aScore - bScore;
          });
        }
        this._scoreMap = previousScoreMap;
        return elements;
      });
    } finally {
      this.end();
    }
  }
  _markScore(element, score) {
    if (this._scoreMap)
      this._scoreMap.set(element, score);
  }
  _hasScopeClause(selector) {
    return selector.simples.some((simple) => simple.selector.functions.some((f) => f.name === "scope"));
  }
  _expandContextForScopeMatching(context) {
    if (context.scope.nodeType !== 1)
      return context;
    const scope = parentElementOrShadowHost(context.scope);
    if (!scope)
      return context;
    return { ...context, scope, originalScope: context.originalScope || context.scope };
  }
  _matchesSimple(element, simple, context) {
    return this._cached(this._cacheMatchesSimple, element, [simple, context.scope, context.pierceShadow, context.originalScope], () => {
      if (element === context.scope)
        return false;
      if (simple.css && !this._matchesCSS(element, simple.css))
        return false;
      for (const func of simple.functions) {
        if (!this._matchesEngine(this._getEngine(func.name), element, func.args, context))
          return false;
      }
      return true;
    });
  }
  _querySimple(context, simple) {
    if (!simple.functions.length)
      return this._queryCSS(context, simple.css || "*");
    return this._cached(this._cacheQuerySimple, simple, [context.scope, context.pierceShadow, context.originalScope], () => {
      let css = simple.css;
      const funcs = simple.functions;
      if (css === "*" && funcs.length)
        css = void 0;
      let elements;
      let firstIndex = -1;
      if (css !== void 0) {
        elements = this._queryCSS(context, css);
      } else {
        firstIndex = funcs.findIndex((func) => this._getEngine(func.name).query !== void 0);
        if (firstIndex === -1)
          firstIndex = 0;
        elements = this._queryEngine(this._getEngine(funcs[firstIndex].name), context, funcs[firstIndex].args);
      }
      for (let i = 0; i < funcs.length; i++) {
        if (i === firstIndex)
          continue;
        const engine = this._getEngine(funcs[i].name);
        if (engine.matches !== void 0)
          elements = elements.filter((e) => this._matchesEngine(engine, e, funcs[i].args, context));
      }
      for (let i = 0; i < funcs.length; i++) {
        if (i === firstIndex)
          continue;
        const engine = this._getEngine(funcs[i].name);
        if (engine.matches === void 0)
          elements = elements.filter((e) => this._matchesEngine(engine, e, funcs[i].args, context));
      }
      return elements;
    });
  }
  _matchesParents(element, complex, index, context) {
    if (index < 0)
      return true;
    return this._cached(this._cacheMatchesParents, element, [complex, index, context.scope, context.pierceShadow, context.originalScope], () => {
      const { selector: simple, combinator } = complex.simples[index];
      if (combinator === ">") {
        const parent = parentElementOrShadowHostInContext(element, context);
        if (!parent || !this._matchesSimple(parent, simple, context))
          return false;
        return this._matchesParents(parent, complex, index - 1, context);
      }
      if (combinator === "+") {
        const previousSibling = previousSiblingInContext(element, context);
        if (!previousSibling || !this._matchesSimple(previousSibling, simple, context))
          return false;
        return this._matchesParents(previousSibling, complex, index - 1, context);
      }
      if (combinator === "") {
        let parent = parentElementOrShadowHostInContext(element, context);
        while (parent) {
          if (this._matchesSimple(parent, simple, context)) {
            if (this._matchesParents(parent, complex, index - 1, context))
              return true;
            if (complex.simples[index - 1].combinator === "")
              break;
          }
          parent = parentElementOrShadowHostInContext(parent, context);
        }
        return false;
      }
      if (combinator === "~") {
        let previousSibling = previousSiblingInContext(element, context);
        while (previousSibling) {
          if (this._matchesSimple(previousSibling, simple, context)) {
            if (this._matchesParents(previousSibling, complex, index - 1, context))
              return true;
            if (complex.simples[index - 1].combinator === "~")
              break;
          }
          previousSibling = previousSiblingInContext(previousSibling, context);
        }
        return false;
      }
      if (combinator === ">=") {
        let parent = element;
        while (parent) {
          if (this._matchesSimple(parent, simple, context)) {
            if (this._matchesParents(parent, complex, index - 1, context))
              return true;
            if (complex.simples[index - 1].combinator === "")
              break;
          }
          parent = parentElementOrShadowHostInContext(parent, context);
        }
        return false;
      }
      throw new Error(\`Unsupported combinator "\${combinator}"\`);
    });
  }
  _matchesEngine(engine, element, args, context) {
    if (engine.matches)
      return this._callMatches(engine, element, args, context);
    if (engine.query)
      return this._callQuery(engine, args, context).includes(element);
    throw new Error(\`Selector engine should implement "matches" or "query"\`);
  }
  _queryEngine(engine, context, args) {
    if (engine.query)
      return this._callQuery(engine, args, context);
    if (engine.matches)
      return this._queryCSS(context, "*").filter((element) => this._callMatches(engine, element, args, context));
    throw new Error(\`Selector engine should implement "matches" or "query"\`);
  }
  _callMatches(engine, element, args, context) {
    return this._cached(this._cacheCallMatches, element, [engine, context.scope, context.pierceShadow, context.originalScope, ...args], () => {
      return engine.matches(element, args, context, this);
    });
  }
  _callQuery(engine, args, context) {
    return this._cached(this._cacheCallQuery, engine, [context.scope, context.pierceShadow, context.originalScope, ...args], () => {
      return engine.query(context, args, this);
    });
  }
  _matchesCSS(element, css) {
    return element.matches(css);
  }
  _queryCSS(context, css) {
    return this._cached(this._cacheQueryCSS, css, [context.scope, context.pierceShadow, context.originalScope], () => {
      let result = [];
      function query(root) {
        result = result.concat([...root.querySelectorAll(css)]);
        if (!context.pierceShadow)
          return;
        if (root.shadowRoot)
          query(root.shadowRoot);
        for (const element of root.querySelectorAll("*")) {
          if (element.shadowRoot)
            query(element.shadowRoot);
        }
      }
      query(context.scope);
      return result;
    });
  }
  _getEngine(name) {
    const engine = this._engines.get(name);
    if (!engine)
      throw new Error(\`Unknown selector engine "\${name}"\`);
    return engine;
  }
};
var isEngine = {
  matches(element, args, context, evaluator) {
    if (args.length === 0)
      throw new Error(\`"is" engine expects non-empty selector list\`);
    return args.some((selector) => evaluator.matches(element, selector, context));
  },
  query(context, args, evaluator) {
    if (args.length === 0)
      throw new Error(\`"is" engine expects non-empty selector list\`);
    let elements = [];
    for (const arg of args)
      elements = elements.concat(evaluator.query(context, arg));
    return args.length === 1 ? elements : sortInDOMOrder(elements);
  }
};
var hasEngine = {
  matches(element, args, context, evaluator) {
    if (args.length === 0)
      throw new Error(\`"has" engine expects non-empty selector list\`);
    return evaluator.query({ ...context, scope: element }, args).length > 0;
  }
  // TODO: we can implement efficient "query" by matching "args" and returning
  // all parents/descendants, just have to be careful with the ":scope" matching.
};
var scopeEngine = {
  matches(element, args, context, evaluator) {
    if (args.length !== 0)
      throw new Error(\`"scope" engine expects no arguments\`);
    const actualScope = context.originalScope || context.scope;
    if (actualScope.nodeType === 9)
      return element === actualScope.documentElement;
    return element === actualScope;
  },
  query(context, args, evaluator) {
    if (args.length !== 0)
      throw new Error(\`"scope" engine expects no arguments\`);
    const actualScope = context.originalScope || context.scope;
    if (actualScope.nodeType === 9) {
      const root = actualScope.documentElement;
      return root ? [root] : [];
    }
    if (actualScope.nodeType === 1)
      return [actualScope];
    return [];
  }
};
var notEngine = {
  matches(element, args, context, evaluator) {
    if (args.length === 0)
      throw new Error(\`"not" engine expects non-empty selector list\`);
    return !evaluator.matches(element, args, context);
  }
};
var lightEngine = {
  query(context, args, evaluator) {
    return evaluator.query({ ...context, pierceShadow: false }, args);
  },
  matches(element, args, context, evaluator) {
    return evaluator.matches(element, args, { ...context, pierceShadow: false });
  }
};
var visibleEngine = {
  matches(element, args, context, evaluator) {
    if (args.length)
      throw new Error(\`"visible" engine expects no arguments\`);
    return isElementVisible(element);
  }
};
var textEngine = {
  matches(element, args, context, evaluator) {
    if (args.length !== 1 || typeof args[0] !== "string")
      throw new Error(\`"text" engine expects a single string\`);
    const text = normalizeWhiteSpace(args[0]).toLowerCase();
    const matcher = (elementText2) => elementText2.normalized.toLowerCase().includes(text);
    return elementMatchesText(evaluator._cacheText, element, matcher) === "self";
  }
};
var textIsEngine = {
  matches(element, args, context, evaluator) {
    if (args.length !== 1 || typeof args[0] !== "string")
      throw new Error(\`"text-is" engine expects a single string\`);
    const text = normalizeWhiteSpace(args[0]);
    const matcher = (elementText2) => {
      if (!text && !elementText2.immediate.length)
        return true;
      return elementText2.immediate.some((s) => normalizeWhiteSpace(s) === text);
    };
    return elementMatchesText(evaluator._cacheText, element, matcher) !== "none";
  }
};
var textMatchesEngine = {
  matches(element, args, context, evaluator) {
    if (args.length === 0 || typeof args[0] !== "string" || args.length > 2 || args.length === 2 && typeof args[1] !== "string")
      throw new Error(\`"text-matches" engine expects a regexp body and optional regexp flags\`);
    const re = new RegExp(args[0], args.length === 2 ? args[1] : void 0);
    const matcher = (elementText2) => re.test(elementText2.full);
    return elementMatchesText(evaluator._cacheText, element, matcher) === "self";
  }
};
var hasTextEngine = {
  matches(element, args, context, evaluator) {
    if (args.length !== 1 || typeof args[0] !== "string")
      throw new Error(\`"has-text" engine expects a single string\`);
    if (shouldSkipForTextMatching(element))
      return false;
    const text = normalizeWhiteSpace(args[0]).toLowerCase();
    const matcher = (elementText2) => elementText2.normalized.toLowerCase().includes(text);
    return matcher(elementText(evaluator._cacheText, element));
  }
};
function createLayoutEngine(name) {
  return {
    matches(element, args, context, evaluator) {
      const maxDistance = args.length && typeof args[args.length - 1] === "number" ? args[args.length - 1] : void 0;
      const queryArgs = maxDistance === void 0 ? args : args.slice(0, args.length - 1);
      if (args.length < 1 + (maxDistance === void 0 ? 0 : 1))
        throw new Error(\`"\${name}" engine expects a selector list and optional maximum distance in pixels\`);
      const inner = evaluator.query(context, queryArgs);
      const score = layoutSelectorScore(name, element, inner, maxDistance);
      if (score === void 0)
        return false;
      evaluator._markScore(element, score);
      return true;
    }
  };
}
var nthMatchEngine = {
  query(context, args, evaluator) {
    let index = args[args.length - 1];
    if (args.length < 2)
      throw new Error(\`"nth-match" engine expects non-empty selector list and an index argument\`);
    if (typeof index !== "number" || index < 1)
      throw new Error(\`"nth-match" engine expects a one-based index as the last argument\`);
    const elements = isEngine.query(context, args.slice(0, args.length - 1), evaluator);
    index--;
    return index < elements.length ? [elements[index]] : [];
  }
};
function parentElementOrShadowHostInContext(element, context) {
  if (element === context.scope)
    return;
  if (!context.pierceShadow)
    return element.parentElement || void 0;
  return parentElementOrShadowHost(element);
}
function previousSiblingInContext(element, context) {
  if (element === context.scope)
    return;
  return element.previousElementSibling || void 0;
}
function sortInDOMOrder(elements) {
  const elementToEntry = /* @__PURE__ */ new Map();
  const roots = [];
  const result = [];
  function append(element) {
    let entry = elementToEntry.get(element);
    if (entry)
      return entry;
    const parent = parentElementOrShadowHost(element);
    if (parent) {
      const parentEntry = append(parent);
      parentEntry.children.push(element);
    } else {
      roots.push(element);
    }
    entry = { children: [], taken: false };
    elementToEntry.set(element, entry);
    return entry;
  }
  for (const e of elements)
    append(e).taken = true;
  function visit(element) {
    const entry = elementToEntry.get(element);
    if (entry.taken)
      result.push(element);
    if (entry.children.length > 1) {
      const set = new Set(entry.children);
      entry.children = [];
      let child = element.firstElementChild;
      while (child && entry.children.length < set.size) {
        if (set.has(child))
          entry.children.push(child);
        child = child.nextElementSibling;
      }
      child = element.shadowRoot ? element.shadowRoot.firstElementChild : null;
      while (child && entry.children.length < set.size) {
        if (set.has(child))
          entry.children.push(child);
        child = child.nextElementSibling;
      }
    }
    entry.children.forEach(visit);
  }
  roots.forEach(visit);
  return result;
}

// packages/injected/src/selectorGenerator.ts
var kTextScoreRange = 10;
var kExactPenalty = kTextScoreRange / 2;
var kTestIdScore = 1;
var kOtherTestIdScore = 2;
var kIframeByAttributeScore = 10;
var kBeginPenalizedScore = 50;
var kRoleWithNameScore = 100;
var kPlaceholderScore = 120;
var kLabelScore = 140;
var kAltTextScore = 160;
var kTextScore = 180;
var kTitleScore = 200;
var kTextScoreRegex = 250;
var kPlaceholderScoreExact = kPlaceholderScore + kExactPenalty;
var kLabelScoreExact = kLabelScore + kExactPenalty;
var kRoleWithNameScoreExact = kRoleWithNameScore + kExactPenalty;
var kAltTextScoreExact = kAltTextScore + kExactPenalty;
var kTextScoreExact = kTextScore + kExactPenalty;
var kTitleScoreExact = kTitleScore + kExactPenalty;
var kEndPenalizedScore = 300;
var kCSSIdScore = 500;
var kRoleWithoutNameScore = 510;
var kCSSInputTypeNameScore = 520;
var kCSSTagNameScore = 530;
var kNthScore = 1e4;
var kCSSFallbackScore = 1e7;
var kScoreThresholdForTextExpect = 1e3;
function generateSelector(injectedScript, targetElement, options) {
  var _a;
  injectedScript._evaluator.begin();
  const cache = { allowText: /* @__PURE__ */ new Map(), disallowText: /* @__PURE__ */ new Map() };
  beginAriaCaches();
  try {
    let selectors = [];
    if (options.forTextExpect) {
      let targetTokens = cssFallback(injectedScript, targetElement.ownerDocument.documentElement, options);
      for (let element = targetElement; element; element = parentElementOrShadowHost(element)) {
        const tokens = generateSelectorFor(cache, injectedScript, element, { ...options, noText: true });
        if (!tokens)
          continue;
        const score = combineScores(tokens);
        if (score <= kScoreThresholdForTextExpect) {
          targetTokens = tokens;
          break;
        }
      }
      selectors = [joinTokens(targetTokens)];
    } else {
      if (!targetElement.matches("input,textarea,select") && !targetElement.isContentEditable) {
        const interactiveParent = closestCrossShadow(targetElement, "button,select,input,[role=button],[role=checkbox],[role=radio],a,[role=link]", options.root);
        if (interactiveParent && isElementVisible(interactiveParent))
          targetElement = interactiveParent;
      }
      if (options.multiple) {
        const withText = generateSelectorFor(cache, injectedScript, targetElement, options);
        const withoutText = generateSelectorFor(cache, injectedScript, targetElement, { ...options, noText: true });
        let tokens = [withText, withoutText];
        cache.allowText.clear();
        cache.disallowText.clear();
        if (withText && hasCSSIdToken(withText))
          tokens.push(generateSelectorFor(cache, injectedScript, targetElement, { ...options, noCSSId: true }));
        if (withoutText && hasCSSIdToken(withoutText))
          tokens.push(generateSelectorFor(cache, injectedScript, targetElement, { ...options, noText: true, noCSSId: true }));
        tokens = tokens.filter(Boolean);
        if (!tokens.length) {
          const css = cssFallback(injectedScript, targetElement, options);
          tokens.push(css);
          if (hasCSSIdToken(css))
            tokens.push(cssFallback(injectedScript, targetElement, { ...options, noCSSId: true }));
        }
        selectors = [...new Set(tokens.map((t) => joinTokens(t)))];
      } else {
        const targetTokens = generateSelectorFor(cache, injectedScript, targetElement, options) || cssFallback(injectedScript, targetElement, options);
        selectors = [joinTokens(targetTokens)];
      }
    }
    const selector = selectors[0];
    const parsedSelector = injectedScript.parseSelector(selector);
    return {
      selector,
      selectors,
      elements: injectedScript.querySelectorAll(parsedSelector, (_a = options.root) != null ? _a : targetElement.ownerDocument)
    };
  } finally {
    endAriaCaches();
    injectedScript._evaluator.end();
  }
}
function filterRegexTokens(textCandidates) {
  return textCandidates.filter((c) => c[0].selector[0] !== "/");
}
function generateSelectorFor(cache, injectedScript, targetElement, options) {
  if (options.root && !isInsideScope(options.root, targetElement))
    throw new Error(\`Target element must belong to the root's subtree\`);
  if (targetElement === options.root)
    return [{ engine: "css", selector: ":scope", score: 1 }];
  if (targetElement.ownerDocument.documentElement === targetElement)
    return [{ engine: "css", selector: "html", score: 1 }];
  const calculate = (element, allowText) => {
    var _a;
    const allowNthMatch = element === targetElement;
    let textCandidates = allowText ? buildTextCandidates(injectedScript, element, element === targetElement) : [];
    if (element !== targetElement) {
      textCandidates = filterRegexTokens(textCandidates);
    }
    const noTextCandidates = buildNoTextCandidates(injectedScript, element, options).filter((token) => !options.omitInternalEngines || !token.engine.startsWith("internal:")).map((token) => [token]);
    let result = chooseFirstSelector(injectedScript, (_a = options.root) != null ? _a : targetElement.ownerDocument, element, [...textCandidates, ...noTextCandidates], allowNthMatch);
    textCandidates = filterRegexTokens(textCandidates);
    const checkWithText = (textCandidatesToUse) => {
      const allowParentText = allowText && !textCandidatesToUse.length;
      const candidates = [...textCandidatesToUse, ...noTextCandidates].filter((c) => {
        if (!result)
          return true;
        return combineScores(c) < combineScores(result);
      });
      let bestPossibleInParent = candidates[0];
      if (!bestPossibleInParent)
        return;
      for (let parent = parentElementOrShadowHost(element); parent && parent !== options.root; parent = parentElementOrShadowHost(parent)) {
        const parentTokens = calculateCached(parent, allowParentText);
        if (!parentTokens)
          continue;
        if (result && combineScores([...parentTokens, ...bestPossibleInParent]) >= combineScores(result))
          continue;
        bestPossibleInParent = chooseFirstSelector(injectedScript, parent, element, candidates, allowNthMatch);
        if (!bestPossibleInParent)
          return;
        const combined = [...parentTokens, ...bestPossibleInParent];
        if (!result || combineScores(combined) < combineScores(result))
          result = combined;
      }
    };
    checkWithText(textCandidates);
    if (element === targetElement && textCandidates.length)
      checkWithText([]);
    return result;
  };
  const calculateCached = (element, allowText) => {
    const map = allowText ? cache.allowText : cache.disallowText;
    let value = map.get(element);
    if (value === void 0) {
      value = calculate(element, allowText);
      map.set(element, value);
    }
    return value;
  };
  return calculate(targetElement, !options.noText);
}
function buildNoTextCandidates(injectedScript, element, options) {
  const candidates = [];
  {
    for (const attr of ["data-testid", "data-test-id", "data-test"]) {
      if (attr !== options.testIdAttributeName && element.getAttribute(attr))
        candidates.push({ engine: "css", selector: \`[\${attr}=\${quoteCSSAttributeValue(element.getAttribute(attr))}]\`, score: kOtherTestIdScore });
    }
    if (!options.noCSSId) {
      const idAttr = element.getAttribute("id");
      if (idAttr && !isGuidLike(idAttr))
        candidates.push({ engine: "css", selector: makeSelectorForId(idAttr), score: kCSSIdScore });
    }
    candidates.push({ engine: "css", selector: escapeNodeName(element), score: kCSSTagNameScore });
  }
  if (element.nodeName === "IFRAME") {
    for (const attribute of ["name", "title"]) {
      if (element.getAttribute(attribute))
        candidates.push({ engine: "css", selector: \`\${escapeNodeName(element)}[\${attribute}=\${quoteCSSAttributeValue(element.getAttribute(attribute))}]\`, score: kIframeByAttributeScore });
    }
    if (element.getAttribute(options.testIdAttributeName))
      candidates.push({ engine: "css", selector: \`[\${options.testIdAttributeName}=\${quoteCSSAttributeValue(element.getAttribute(options.testIdAttributeName))}]\`, score: kTestIdScore });
    penalizeScoreForLength([candidates]);
    return candidates;
  }
  if (element.getAttribute(options.testIdAttributeName))
    candidates.push({ engine: "internal:testid", selector: \`[\${options.testIdAttributeName}=\${escapeForAttributeSelector(element.getAttribute(options.testIdAttributeName), true)}]\`, score: kTestIdScore });
  if (element.nodeName === "INPUT" || element.nodeName === "TEXTAREA") {
    const input = element;
    if (input.placeholder) {
      candidates.push({ engine: "internal:attr", selector: \`[placeholder=\${escapeForAttributeSelector(input.placeholder, true)}]\`, score: kPlaceholderScoreExact });
      for (const alternative of suitableTextAlternatives(input.placeholder))
        candidates.push({ engine: "internal:attr", selector: \`[placeholder=\${escapeForAttributeSelector(alternative.text, false)}]\`, score: kPlaceholderScore - alternative.scoreBonus });
    }
  }
  const labels = getElementLabels(injectedScript._evaluator._cacheText, element);
  for (const label of labels) {
    const labelText = label.normalized;
    candidates.push({ engine: "internal:label", selector: escapeForTextSelector(labelText, true), score: kLabelScoreExact });
    for (const alternative of suitableTextAlternatives(labelText))
      candidates.push({ engine: "internal:label", selector: escapeForTextSelector(alternative.text, false), score: kLabelScore - alternative.scoreBonus });
  }
  const ariaRole = getAriaRole(element);
  if (ariaRole && !["none", "presentation"].includes(ariaRole))
    candidates.push({ engine: "internal:role", selector: ariaRole, score: kRoleWithoutNameScore });
  if (element.getAttribute("name") && ["BUTTON", "FORM", "FIELDSET", "FRAME", "IFRAME", "INPUT", "KEYGEN", "OBJECT", "OUTPUT", "SELECT", "TEXTAREA", "MAP", "META", "PARAM"].includes(element.nodeName))
    candidates.push({ engine: "css", selector: \`\${escapeNodeName(element)}[name=\${quoteCSSAttributeValue(element.getAttribute("name"))}]\`, score: kCSSInputTypeNameScore });
  if (["INPUT", "TEXTAREA"].includes(element.nodeName) && element.getAttribute("type") !== "hidden") {
    if (element.getAttribute("type"))
      candidates.push({ engine: "css", selector: \`\${escapeNodeName(element)}[type=\${quoteCSSAttributeValue(element.getAttribute("type"))}]\`, score: kCSSInputTypeNameScore });
  }
  if (["INPUT", "TEXTAREA", "SELECT"].includes(element.nodeName) && element.getAttribute("type") !== "hidden")
    candidates.push({ engine: "css", selector: escapeNodeName(element), score: kCSSInputTypeNameScore + 1 });
  penalizeScoreForLength([candidates]);
  return candidates;
}
function buildTextCandidates(injectedScript, element, isTargetNode) {
  if (element.nodeName === "SELECT")
    return [];
  const candidates = [];
  const title = element.getAttribute("title");
  if (title) {
    candidates.push([{ engine: "internal:attr", selector: \`[title=\${escapeForAttributeSelector(title, true)}]\`, score: kTitleScoreExact }]);
    for (const alternative of suitableTextAlternatives(title))
      candidates.push([{ engine: "internal:attr", selector: \`[title=\${escapeForAttributeSelector(alternative.text, false)}]\`, score: kTitleScore - alternative.scoreBonus }]);
  }
  const alt = element.getAttribute("alt");
  if (alt && ["APPLET", "AREA", "IMG", "INPUT"].includes(element.nodeName)) {
    candidates.push([{ engine: "internal:attr", selector: \`[alt=\${escapeForAttributeSelector(alt, true)}]\`, score: kAltTextScoreExact }]);
    for (const alternative of suitableTextAlternatives(alt))
      candidates.push([{ engine: "internal:attr", selector: \`[alt=\${escapeForAttributeSelector(alternative.text, false)}]\`, score: kAltTextScore - alternative.scoreBonus }]);
  }
  const text = elementText(injectedScript._evaluator._cacheText, element).normalized;
  const textAlternatives = text ? suitableTextAlternatives(text) : [];
  if (text) {
    if (isTargetNode) {
      if (text.length <= 80)
        candidates.push([{ engine: "internal:text", selector: escapeForTextSelector(text, true), score: kTextScoreExact }]);
      for (const alternative of textAlternatives)
        candidates.push([{ engine: "internal:text", selector: escapeForTextSelector(alternative.text, false), score: kTextScore - alternative.scoreBonus }]);
    }
    const cssToken = { engine: "css", selector: escapeNodeName(element), score: kCSSTagNameScore };
    for (const alternative of textAlternatives)
      candidates.push([cssToken, { engine: "internal:has-text", selector: escapeForTextSelector(alternative.text, false), score: kTextScore - alternative.scoreBonus }]);
    if (text.length <= 80) {
      const re = new RegExp("^" + escapeRegExp(text) + "$");
      candidates.push([cssToken, { engine: "internal:has-text", selector: escapeForTextSelector(re, false), score: kTextScoreRegex }]);
    }
  }
  const ariaRole = getAriaRole(element);
  if (ariaRole && !["none", "presentation"].includes(ariaRole)) {
    const ariaName = getElementAccessibleName(element, false);
    if (ariaName) {
      const roleToken = { engine: "internal:role", selector: \`\${ariaRole}[name=\${escapeForAttributeSelector(ariaName, true)}]\`, score: kRoleWithNameScoreExact };
      candidates.push([roleToken]);
      for (const alternative of suitableTextAlternatives(ariaName))
        candidates.push([{ engine: "internal:role", selector: \`\${ariaRole}[name=\${escapeForAttributeSelector(alternative.text, false)}]\`, score: kRoleWithNameScore - alternative.scoreBonus }]);
    } else {
      const roleToken = { engine: "internal:role", selector: \`\${ariaRole}\`, score: kRoleWithoutNameScore };
      for (const alternative of textAlternatives)
        candidates.push([roleToken, { engine: "internal:has-text", selector: escapeForTextSelector(alternative.text, false), score: kTextScore - alternative.scoreBonus }]);
      if (text.length <= 80) {
        const re = new RegExp("^" + escapeRegExp(text) + "$");
        candidates.push([roleToken, { engine: "internal:has-text", selector: escapeForTextSelector(re, false), score: kTextScoreRegex }]);
      }
    }
  }
  penalizeScoreForLength(candidates);
  return candidates;
}
function makeSelectorForId(id) {
  return /^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(id) ? "#" + id : \`[id=\${quoteCSSAttributeValue(id)}]\`;
}
function hasCSSIdToken(tokens) {
  return tokens.some((token) => token.engine === "css" && (token.selector.startsWith("#") || token.selector.startsWith('[id="')));
}
function cssFallback(injectedScript, targetElement, options) {
  var _a;
  const root = (_a = options.root) != null ? _a : targetElement.ownerDocument;
  const tokens = [];
  function uniqueCSSSelector(prefix) {
    const path = tokens.slice();
    if (prefix)
      path.unshift(prefix);
    const selector = path.join(" > ");
    const parsedSelector = injectedScript.parseSelector(selector);
    const node = injectedScript.querySelector(parsedSelector, root, false);
    return node === targetElement ? selector : void 0;
  }
  function makeStrict(selector) {
    const token = { engine: "css", selector, score: kCSSFallbackScore };
    const parsedSelector = injectedScript.parseSelector(selector);
    const elements = injectedScript.querySelectorAll(parsedSelector, root);
    if (elements.length === 1)
      return [token];
    const nth = { engine: "nth", selector: String(elements.indexOf(targetElement)), score: kNthScore };
    return [token, nth];
  }
  for (let element = targetElement; element && element !== root; element = parentElementOrShadowHost(element)) {
    let bestTokenForLevel = "";
    if (element.id && !options.noCSSId) {
      const token = makeSelectorForId(element.id);
      const selector = uniqueCSSSelector(token);
      if (selector)
        return makeStrict(selector);
      bestTokenForLevel = token;
    }
    const parent = element.parentNode;
    const classes = [...element.classList].map(escapeClassName);
    for (let i = 0; i < classes.length; ++i) {
      const token = "." + classes.slice(0, i + 1).join(".");
      const selector = uniqueCSSSelector(token);
      if (selector)
        return makeStrict(selector);
      if (!bestTokenForLevel && parent) {
        const sameClassSiblings = parent.querySelectorAll(token);
        if (sameClassSiblings.length === 1)
          bestTokenForLevel = token;
      }
    }
    if (parent) {
      const siblings = [...parent.children];
      const nodeName = element.nodeName;
      const sameTagSiblings = siblings.filter((sibling) => sibling.nodeName === nodeName);
      const token = sameTagSiblings.indexOf(element) === 0 ? escapeNodeName(element) : \`\${escapeNodeName(element)}:nth-child(\${1 + siblings.indexOf(element)})\`;
      const selector = uniqueCSSSelector(token);
      if (selector)
        return makeStrict(selector);
      if (!bestTokenForLevel)
        bestTokenForLevel = token;
    } else if (!bestTokenForLevel) {
      bestTokenForLevel = escapeNodeName(element);
    }
    tokens.unshift(bestTokenForLevel);
  }
  return makeStrict(uniqueCSSSelector());
}
function penalizeScoreForLength(groups) {
  for (const group of groups) {
    for (const token of group) {
      if (token.score > kBeginPenalizedScore && token.score < kEndPenalizedScore)
        token.score += Math.min(kTextScoreRange, token.selector.length / 10 | 0);
    }
  }
}
function joinTokens(tokens) {
  const parts = [];
  let lastEngine = "";
  for (const { engine, selector } of tokens) {
    if (parts.length && (lastEngine !== "css" || engine !== "css" || selector.startsWith(":nth-match(")))
      parts.push(">>");
    lastEngine = engine;
    if (engine === "css")
      parts.push(selector);
    else
      parts.push(\`\${engine}=\${selector}\`);
  }
  return parts.join(" ");
}
function combineScores(tokens) {
  let score = 0;
  for (let i = 0; i < tokens.length; i++)
    score += tokens[i].score * (tokens.length - i);
  return score;
}
function chooseFirstSelector(injectedScript, scope, targetElement, selectors, allowNthMatch) {
  const joined = selectors.map((tokens) => ({ tokens, score: combineScores(tokens) }));
  joined.sort((a, b) => a.score - b.score);
  let bestWithIndex = null;
  for (const { tokens } of joined) {
    const parsedSelector = injectedScript.parseSelector(joinTokens(tokens));
    const result = injectedScript.querySelectorAll(parsedSelector, scope);
    if (result[0] === targetElement && result.length === 1) {
      return tokens;
    }
    const index = result.indexOf(targetElement);
    if (!allowNthMatch || bestWithIndex || index === -1 || result.length > 5)
      continue;
    const nth = { engine: "nth", selector: String(index), score: kNthScore };
    bestWithIndex = [...tokens, nth];
  }
  return bestWithIndex;
}
function isGuidLike(id) {
  let lastCharacterType;
  let transitionCount = 0;
  for (let i = 0; i < id.length; ++i) {
    const c = id[i];
    let characterType;
    if (c === "-" || c === "_")
      continue;
    if (c >= "a" && c <= "z")
      characterType = "lower";
    else if (c >= "A" && c <= "Z")
      characterType = "upper";
    else if (c >= "0" && c <= "9")
      characterType = "digit";
    else
      characterType = "other";
    if (characterType === "lower" && lastCharacterType === "upper") {
      lastCharacterType = characterType;
      continue;
    }
    if (lastCharacterType && lastCharacterType !== characterType)
      ++transitionCount;
    lastCharacterType = characterType;
  }
  return transitionCount >= id.length / 4;
}
function trimWordBoundary(text, maxLength) {
  if (text.length <= maxLength)
    return text;
  text = text.substring(0, maxLength);
  const match = text.match(/^(.*)\\b(.+?)$/);
  if (!match)
    return "";
  return match[1].trimEnd();
}
function suitableTextAlternatives(text) {
  let result = [];
  {
    const match = text.match(/^([\\d.,]+)[^.,\\w]/);
    const leadingNumberLength = match ? match[1].length : 0;
    if (leadingNumberLength) {
      const alt = trimWordBoundary(text.substring(leadingNumberLength).trimStart(), 80);
      result.push({ text: alt, scoreBonus: alt.length <= 30 ? 2 : 1 });
    }
  }
  {
    const match = text.match(/[^.,\\w]([\\d.,]+)$/);
    const trailingNumberLength = match ? match[1].length : 0;
    if (trailingNumberLength) {
      const alt = trimWordBoundary(text.substring(0, text.length - trailingNumberLength).trimEnd(), 80);
      result.push({ text: alt, scoreBonus: alt.length <= 30 ? 2 : 1 });
    }
  }
  if (text.length <= 30) {
    result.push({ text, scoreBonus: 0 });
  } else {
    result.push({ text: trimWordBoundary(text, 80), scoreBonus: 0 });
    result.push({ text: trimWordBoundary(text, 30), scoreBonus: 1 });
  }
  result = result.filter((r) => r.text);
  if (!result.length)
    result.push({ text: text.substring(0, 80), scoreBonus: 0 });
  return result;
}
function escapeNodeName(node) {
  return node.nodeName.toLocaleLowerCase().replace(/[:\\.]/g, (char) => "\\\\" + char);
}
function escapeClassName(className) {
  let result = "";
  for (let i = 0; i < className.length; i++)
    result += cssEscapeCharacter(className, i);
  return result;
}
function cssEscapeCharacter(s, i) {
  const c = s.charCodeAt(i);
  if (c === 0)
    return "\\uFFFD";
  if (c >= 1 && c <= 31 || c >= 48 && c <= 57 && (i === 0 || i === 1 && s.charCodeAt(0) === 45))
    return "\\\\" + c.toString(16) + " ";
  if (i === 0 && c === 45 && s.length === 1)
    return "\\\\" + s.charAt(i);
  if (c >= 128 || c === 45 || c === 95 || c >= 48 && c <= 57 || c >= 65 && c <= 90 || c >= 97 && c <= 122)
    return s.charAt(i);
  return "\\\\" + s.charAt(i);
}

// packages/injected/src/vueSelectorEngine.ts
function basename(filename, ext) {
  const normalized = filename.replace(/^[a-zA-Z]:/, "").replace(/\\\\/g, "/");
  let result = normalized.substring(normalized.lastIndexOf("/") + 1);
  if (ext && result.endsWith(ext))
    result = result.substring(0, result.length - ext.length);
  return result;
}
function toUpper(_, c) {
  return c ? c.toUpperCase() : "";
}
var classifyRE = /(?:^|[-_/])(\\w)/g;
var classify = (str) => {
  return str && str.replace(classifyRE, toUpper);
};
function buildComponentsTreeVue3(instance) {
  function getComponentTypeName(options) {
    const name = options.name || options._componentTag || options.__playwright_guessedName;
    if (name)
      return name;
    const file = options.__file;
    if (file)
      return classify(basename(file, ".vue"));
  }
  function saveComponentName(instance2, key) {
    instance2.type.__playwright_guessedName = key;
    return key;
  }
  function getInstanceName(instance2) {
    var _a, _b, _c, _d;
    const name = getComponentTypeName(instance2.type || {});
    if (name)
      return name;
    if (instance2.root === instance2)
      return "Root";
    for (const key in (_b = (_a = instance2.parent) == null ? void 0 : _a.type) == null ? void 0 : _b.components) {
      if (((_c = instance2.parent) == null ? void 0 : _c.type.components[key]) === instance2.type)
        return saveComponentName(instance2, key);
    }
    for (const key in (_d = instance2.appContext) == null ? void 0 : _d.components) {
      if (instance2.appContext.components[key] === instance2.type)
        return saveComponentName(instance2, key);
    }
    return "Anonymous Component";
  }
  function isBeingDestroyed(instance2) {
    return instance2._isBeingDestroyed || instance2.isUnmounted;
  }
  function isFragment(instance2) {
    return instance2.subTree.type.toString() === "Symbol(Fragment)";
  }
  function getInternalInstanceChildren(subTree) {
    const list = [];
    if (subTree.component)
      list.push(subTree.component);
    if (subTree.suspense)
      list.push(...getInternalInstanceChildren(subTree.suspense.activeBranch));
    if (Array.isArray(subTree.children)) {
      subTree.children.forEach((childSubTree) => {
        if (childSubTree.component)
          list.push(childSubTree.component);
        else
          list.push(...getInternalInstanceChildren(childSubTree));
      });
    }
    return list.filter((child) => {
      var _a;
      return !isBeingDestroyed(child) && !((_a = child.type.devtools) == null ? void 0 : _a.hide);
    });
  }
  function getRootElementsFromComponentInstance(instance2) {
    if (isFragment(instance2))
      return getFragmentRootElements(instance2.subTree);
    return [instance2.subTree.el];
  }
  function getFragmentRootElements(vnode) {
    if (!vnode.children)
      return [];
    const list = [];
    for (let i = 0, l = vnode.children.length; i < l; i++) {
      const childVnode = vnode.children[i];
      if (childVnode.component)
        list.push(...getRootElementsFromComponentInstance(childVnode.component));
      else if (childVnode.el)
        list.push(childVnode.el);
    }
    return list;
  }
  function buildComponentsTree2(instance2) {
    return {
      name: getInstanceName(instance2),
      children: getInternalInstanceChildren(instance2.subTree).map(buildComponentsTree2),
      rootElements: getRootElementsFromComponentInstance(instance2),
      props: instance2.props
    };
  }
  return buildComponentsTree2(instance);
}
function buildComponentsTreeVue2(instance) {
  function getComponentName2(options) {
    const name = options.displayName || options.name || options._componentTag;
    if (name)
      return name;
    const file = options.__file;
    if (file)
      return classify(basename(file, ".vue"));
  }
  function getInstanceName(instance2) {
    const name = getComponentName2(instance2.$options || instance2.fnOptions || {});
    if (name)
      return name;
    return instance2.$root === instance2 ? "Root" : "Anonymous Component";
  }
  function getInternalInstanceChildren(instance2) {
    if (instance2.$children)
      return instance2.$children;
    if (Array.isArray(instance2.subTree.children))
      return instance2.subTree.children.filter((vnode) => !!vnode.component).map((vnode) => vnode.component);
    return [];
  }
  function buildComponentsTree2(instance2) {
    return {
      name: getInstanceName(instance2),
      children: getInternalInstanceChildren(instance2).map(buildComponentsTree2),
      rootElements: [instance2.$el],
      props: instance2._props
    };
  }
  return buildComponentsTree2(instance);
}
function filterComponentsTree2(treeNode, searchFn, result = []) {
  if (searchFn(treeNode))
    result.push(treeNode);
  for (const child of treeNode.children)
    filterComponentsTree2(child, searchFn, result);
  return result;
}
function findVueRoots(root, roots = []) {
  const document = root.ownerDocument || root;
  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);
  const vue2Roots = /* @__PURE__ */ new Set();
  do {
    const node = walker.currentNode;
    if (node.__vue__)
      vue2Roots.add(node.__vue__.$root);
    if (node.__vue_app__ && node._vnode && node._vnode.component)
      roots.push({ root: node._vnode.component, version: 3 });
    const shadowRoot = node instanceof Element ? node.shadowRoot : null;
    if (shadowRoot)
      findVueRoots(shadowRoot, roots);
  } while (walker.nextNode());
  for (const vue2root of vue2Roots) {
    roots.push({
      version: 2,
      root: vue2root
    });
  }
  return roots;
}
var createVueEngine = () => ({
  queryAll(scope, selector) {
    const document = scope.ownerDocument || scope;
    const { name, attributes } = parseAttributeSelector(selector, false);
    const vueRoots = findVueRoots(document);
    const trees = vueRoots.map((vueRoot) => vueRoot.version === 3 ? buildComponentsTreeVue3(vueRoot.root) : buildComponentsTreeVue2(vueRoot.root));
    const treeNodes = trees.map((tree) => filterComponentsTree2(tree, (treeNode) => {
      if (name && treeNode.name !== name)
        return false;
      if (treeNode.rootElements.some((rootElement) => !isInsideScope(scope, rootElement)))
        return false;
      for (const attr of attributes) {
        if (!matchesComponentAttribute(treeNode.props, attr))
          return false;
      }
      return true;
    })).flat();
    const allRootElements = /* @__PURE__ */ new Set();
    for (const treeNode of treeNodes) {
      for (const rootElement of treeNode.rootElements)
        allRootElements.add(rootElement);
    }
    return [...allRootElements];
  }
});

// packages/injected/src/xpathSelectorEngine.ts
var XPathEngine = {
  queryAll(root, selector) {
    if (selector.startsWith("/") && root.nodeType !== Node.DOCUMENT_NODE)
      selector = "." + selector;
    const result = [];
    const document = root.ownerDocument || root;
    if (!document)
      return result;
    const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);
    for (let node = it.iterateNext(); node; node = it.iterateNext()) {
      if (node.nodeType === Node.ELEMENT_NODE)
        result.push(node);
    }
    return result;
  }
};

// packages/playwright-core/src/utils/isomorphic/locatorUtils.ts
function getByAttributeTextSelector(attrName, text, options) {
  return \`internal:attr=[\${attrName}=\${escapeForAttributeSelector(text, (options == null ? void 0 : options.exact) || false)}]\`;
}
function getByTestIdSelector(testIdAttributeName, testId) {
  return \`internal:testid=[\${testIdAttributeName}=\${escapeForAttributeSelector(testId, true)}]\`;
}
function getByLabelSelector(text, options) {
  return "internal:label=" + escapeForTextSelector(text, !!(options == null ? void 0 : options.exact));
}
function getByAltTextSelector(text, options) {
  return getByAttributeTextSelector("alt", text, options);
}
function getByTitleSelector(text, options) {
  return getByAttributeTextSelector("title", text, options);
}
function getByPlaceholderSelector(text, options) {
  return getByAttributeTextSelector("placeholder", text, options);
}
function getByTextSelector(text, options) {
  return "internal:text=" + escapeForTextSelector(text, !!(options == null ? void 0 : options.exact));
}
function getByRoleSelector(role, options = {}) {
  const props = [];
  if (options.checked !== void 0)
    props.push(["checked", String(options.checked)]);
  if (options.disabled !== void 0)
    props.push(["disabled", String(options.disabled)]);
  if (options.selected !== void 0)
    props.push(["selected", String(options.selected)]);
  if (options.expanded !== void 0)
    props.push(["expanded", String(options.expanded)]);
  if (options.includeHidden !== void 0)
    props.push(["include-hidden", String(options.includeHidden)]);
  if (options.level !== void 0)
    props.push(["level", String(options.level)]);
  if (options.name !== void 0)
    props.push(["name", escapeForAttributeSelector(options.name, !!options.exact)]);
  if (options.pressed !== void 0)
    props.push(["pressed", String(options.pressed)]);
  return \`internal:role=\${role}\${props.map(([n, v]) => \`[\${n}=\${v}]\`).join("")}\`;
}

// packages/injected/src/consoleApi.ts
var selectorSymbol = Symbol("selector");
selectorSymbol;
var _Locator = class _Locator {
  constructor(injectedScript, selector, options) {
    if (options == null ? void 0 : options.hasText)
      selector += \` >> internal:has-text=\${escapeForTextSelector(options.hasText, false)}\`;
    if (options == null ? void 0 : options.hasNotText)
      selector += \` >> internal:has-not-text=\${escapeForTextSelector(options.hasNotText, false)}\`;
    if (options == null ? void 0 : options.has)
      selector += \` >> internal:has=\` + JSON.stringify(options.has[selectorSymbol]);
    if (options == null ? void 0 : options.hasNot)
      selector += \` >> internal:has-not=\` + JSON.stringify(options.hasNot[selectorSymbol]);
    if ((options == null ? void 0 : options.visible) !== void 0)
      selector += \` >> visible=\${options.visible ? "true" : "false"}\`;
    this[selectorSymbol] = selector;
    if (selector) {
      const parsed = injectedScript.parseSelector(selector);
      this.element = injectedScript.querySelector(parsed, injectedScript.document, false);
      this.elements = injectedScript.querySelectorAll(parsed, injectedScript.document);
    }
    const selectorBase = selector;
    const self = this;
    self.locator = (selector2, options2) => {
      return new _Locator(injectedScript, selectorBase ? selectorBase + " >> " + selector2 : selector2, options2);
    };
    self.getByTestId = (testId) => self.locator(getByTestIdSelector(injectedScript.testIdAttributeNameForStrictErrorAndConsoleCodegen(), testId));
    self.getByAltText = (text, options2) => self.locator(getByAltTextSelector(text, options2));
    self.getByLabel = (text, options2) => self.locator(getByLabelSelector(text, options2));
    self.getByPlaceholder = (text, options2) => self.locator(getByPlaceholderSelector(text, options2));
    self.getByText = (text, options2) => self.locator(getByTextSelector(text, options2));
    self.getByTitle = (text, options2) => self.locator(getByTitleSelector(text, options2));
    self.getByRole = (role, options2 = {}) => self.locator(getByRoleSelector(role, options2));
    self.filter = (options2) => new _Locator(injectedScript, selector, options2);
    self.first = () => self.locator("nth=0");
    self.last = () => self.locator("nth=-1");
    self.nth = (index) => self.locator(\`nth=\${index}\`);
    self.and = (locator) => new _Locator(injectedScript, selectorBase + \` >> internal:and=\` + JSON.stringify(locator[selectorSymbol]));
    self.or = (locator) => new _Locator(injectedScript, selectorBase + \` >> internal:or=\` + JSON.stringify(locator[selectorSymbol]));
  }
};
var Locator = _Locator;
var ConsoleAPI = class {
  constructor(injectedScript) {
    this._injectedScript = injectedScript;
  }
  install() {
    if (this._injectedScript.window.playwright)
      return;
    this._injectedScript.window.playwright = {
      $: (selector, strict) => this._querySelector(selector, !!strict),
      $$: (selector) => this._querySelectorAll(selector),
      inspect: (selector) => this._inspect(selector),
      selector: (element) => this._selector(element),
      generateLocator: (element, language) => this._generateLocator(element, language),
      ariaSnapshot: (element, options) => {
        return this._injectedScript.ariaSnapshot(element || this._injectedScript.document.body, options);
      },
      resume: () => this._resume(),
      ...new Locator(this._injectedScript, "")
    };
    delete this._injectedScript.window.playwright.filter;
    delete this._injectedScript.window.playwright.first;
    delete this._injectedScript.window.playwright.last;
    delete this._injectedScript.window.playwright.nth;
    delete this._injectedScript.window.playwright.and;
    delete this._injectedScript.window.playwright.or;
  }
  _querySelector(selector, strict) {
    if (typeof selector !== "string")
      throw new Error(\`Usage: playwright.query('Playwright >> selector').\`);
    const parsed = this._injectedScript.parseSelector(selector);
    return this._injectedScript.querySelector(parsed, this._injectedScript.document, strict);
  }
  _querySelectorAll(selector) {
    if (typeof selector !== "string")
      throw new Error(\`Usage: playwright.$$('Playwright >> selector').\`);
    const parsed = this._injectedScript.parseSelector(selector);
    return this._injectedScript.querySelectorAll(parsed, this._injectedScript.document);
  }
  _inspect(selector) {
    if (typeof selector !== "string")
      throw new Error(\`Usage: playwright.inspect('Playwright >> selector').\`);
    this._injectedScript.window.inspect(this._querySelector(selector, false));
  }
  _selector(element) {
    if (!(element instanceof Element))
      throw new Error(\`Usage: playwright.selector(element).\`);
    return this._injectedScript.generateSelectorSimple(element);
  }
  _generateLocator(element, language) {
    if (!(element instanceof Element))
      throw new Error(\`Usage: playwright.locator(element).\`);
    const selector = this._injectedScript.generateSelectorSimple(element);
    return asLocator(language || "javascript", selector);
  }
  _resume() {
    this._injectedScript.window.__pw_resume().catch(() => {
    });
  }
};

// packages/playwright-core/src/utils/isomorphic/utilityScriptSerializers.ts
function isRegExp2(obj) {
  try {
    return obj instanceof RegExp || Object.prototype.toString.call(obj) === "[object RegExp]";
  } catch (error) {
    return false;
  }
}
function isDate(obj) {
  try {
    return obj instanceof Date || Object.prototype.toString.call(obj) === "[object Date]";
  } catch (error) {
    return false;
  }
}
function isURL(obj) {
  try {
    return obj instanceof URL || Object.prototype.toString.call(obj) === "[object URL]";
  } catch (error) {
    return false;
  }
}
function isError(obj) {
  var _a;
  try {
    return obj instanceof Error || obj && ((_a = Object.getPrototypeOf(obj)) == null ? void 0 : _a.name) === "Error";
  } catch (error) {
    return false;
  }
}
function isTypedArray(obj, constructor) {
  try {
    return obj instanceof constructor || Object.prototype.toString.call(obj) === \`[object \${constructor.name}]\`;
  } catch (error) {
    return false;
  }
}
var typedArrayConstructors = {
  i8: Int8Array,
  ui8: Uint8Array,
  ui8c: Uint8ClampedArray,
  i16: Int16Array,
  ui16: Uint16Array,
  i32: Int32Array,
  ui32: Uint32Array,
  // TODO: add Float16Array once it's in baseline
  f32: Float32Array,
  f64: Float64Array,
  bi64: BigInt64Array,
  bui64: BigUint64Array
};
function typedArrayToBase64(array) {
  if ("toBase64" in array)
    return array.toBase64();
  const binary = Array.from(new Uint8Array(array.buffer, array.byteOffset, array.byteLength)).map((b) => String.fromCharCode(b)).join("");
  return btoa(binary);
}
function base64ToTypedArray(base64, TypedArrayConstructor) {
  const binary = atob(base64);
  const bytes = new Uint8Array(binary.length);
  for (let i = 0; i < binary.length; i++)
    bytes[i] = binary.charCodeAt(i);
  return new TypedArrayConstructor(bytes.buffer);
}
function parseEvaluationResultValue(value, handles = [], refs = /* @__PURE__ */ new Map()) {
  if (Object.is(value, void 0))
    return void 0;
  if (typeof value === "object" && value) {
    if ("ref" in value)
      return refs.get(value.ref);
    if ("v" in value) {
      if (value.v === "undefined")
        return void 0;
      if (value.v === "null")
        return null;
      if (value.v === "NaN")
        return NaN;
      if (value.v === "Infinity")
        return Infinity;
      if (value.v === "-Infinity")
        return -Infinity;
      if (value.v === "-0")
        return -0;
      return void 0;
    }
    if ("d" in value) {
      return new Date(value.d);
    }
    if ("u" in value)
      return new URL(value.u);
    if ("bi" in value)
      return BigInt(value.bi);
    if ("e" in value) {
      const error = new Error(value.e.m);
      error.name = value.e.n;
      error.stack = value.e.s;
      return error;
    }
    if ("r" in value)
      return new RegExp(value.r.p, value.r.f);
    if ("a" in value) {
      const result = [];
      refs.set(value.id, result);
      for (const a of value.a)
        result.push(parseEvaluationResultValue(a, handles, refs));
      return result;
    }
    if ("o" in value) {
      const result = {};
      refs.set(value.id, result);
      for (const { k, v } of value.o) {
        if (k === "__proto__")
          continue;
        result[k] = parseEvaluationResultValue(v, handles, refs);
      }
      return result;
    }
    if ("h" in value)
      return handles[value.h];
    if ("ta" in value)
      return base64ToTypedArray(value.ta.b, typedArrayConstructors[value.ta.k]);
  }
  return value;
}
function serializeAsCallArgument(value, handleSerializer) {
  return serialize(value, handleSerializer, { visited: /* @__PURE__ */ new Map(), lastId: 0 });
}
function serialize(value, handleSerializer, visitorInfo) {
  if (value && typeof value === "object") {
    if (typeof globalThis.Window === "function" && value instanceof globalThis.Window)
      return "ref: <Window>";
    if (typeof globalThis.Document === "function" && value instanceof globalThis.Document)
      return "ref: <Document>";
    if (typeof globalThis.Node === "function" && value instanceof globalThis.Node)
      return "ref: <Node>";
  }
  return innerSerialize(value, handleSerializer, visitorInfo);
}
function innerSerialize(value, handleSerializer, visitorInfo) {
  var _a;
  const result = handleSerializer(value);
  if ("fallThrough" in result)
    value = result.fallThrough;
  else
    return result;
  if (typeof value === "symbol")
    return { v: "undefined" };
  if (Object.is(value, void 0))
    return { v: "undefined" };
  if (Object.is(value, null))
    return { v: "null" };
  if (Object.is(value, NaN))
    return { v: "NaN" };
  if (Object.is(value, Infinity))
    return { v: "Infinity" };
  if (Object.is(value, -Infinity))
    return { v: "-Infinity" };
  if (Object.is(value, -0))
    return { v: "-0" };
  if (typeof value === "boolean")
    return value;
  if (typeof value === "number")
    return value;
  if (typeof value === "string")
    return value;
  if (typeof value === "bigint")
    return { bi: value.toString() };
  if (isError(value)) {
    let stack;
    if ((_a = value.stack) == null ? void 0 : _a.startsWith(value.name + ": " + value.message)) {
      stack = value.stack;
    } else {
      stack = \`\${value.name}: \${value.message}
\${value.stack}\`;
    }
    return { e: { n: value.name, m: value.message, s: stack } };
  }
  if (isDate(value))
    return { d: value.toJSON() };
  if (isURL(value))
    return { u: value.toJSON() };
  if (isRegExp2(value))
    return { r: { p: value.source, f: value.flags } };
  for (const [k, ctor] of Object.entries(typedArrayConstructors)) {
    if (isTypedArray(value, ctor))
      return { ta: { b: typedArrayToBase64(value), k } };
  }
  const id = visitorInfo.visited.get(value);
  if (id)
    return { ref: id };
  if (Array.isArray(value)) {
    const a = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (let i = 0; i < value.length; ++i)
      a.push(serialize(value[i], handleSerializer, visitorInfo));
    return { a, id: id2 };
  }
  if (typeof value === "object") {
    const o = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (const name of Object.keys(value)) {
      let item;
      try {
        item = value[name];
      } catch (e) {
        continue;
      }
      if (name === "toJSON" && typeof item === "function")
        o.push({ k: name, v: { o: [], id: 0 } });
      else
        o.push({ k: name, v: serialize(item, handleSerializer, visitorInfo) });
    }
    let jsonWrapper;
    try {
      if (o.length === 0 && value.toJSON && typeof value.toJSON === "function")
        jsonWrapper = { value: value.toJSON() };
    } catch (e) {
    }
    if (jsonWrapper)
      return innerSerialize(jsonWrapper.value, handleSerializer, visitorInfo);
    return { o, id: id2 };
  }
}

// packages/injected/src/utilityScript.ts
var UtilityScript = class {
  // eslint-disable-next-line no-restricted-globals
  constructor(global, isUnderTest) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    this.global = global;
    this.isUnderTest = isUnderTest;
    if (global.__pwClock) {
      this.builtins = global.__pwClock.builtins;
    } else {
      this.builtins = {
        setTimeout: (_a = global.setTimeout) == null ? void 0 : _a.bind(global),
        clearTimeout: (_b = global.clearTimeout) == null ? void 0 : _b.bind(global),
        setInterval: (_c = global.setInterval) == null ? void 0 : _c.bind(global),
        clearInterval: (_d = global.clearInterval) == null ? void 0 : _d.bind(global),
        requestAnimationFrame: (_e = global.requestAnimationFrame) == null ? void 0 : _e.bind(global),
        cancelAnimationFrame: (_f = global.cancelAnimationFrame) == null ? void 0 : _f.bind(global),
        requestIdleCallback: (_g = global.requestIdleCallback) == null ? void 0 : _g.bind(global),
        cancelIdleCallback: (_h = global.cancelIdleCallback) == null ? void 0 : _h.bind(global),
        performance: global.performance,
        Intl: global.Intl,
        Date: global.Date
      };
    }
    if (this.isUnderTest)
      global.builtins = this.builtins;
  }
  evaluate(isFunction, returnByValue, expression, argCount, ...argsAndHandles) {
    const args = argsAndHandles.slice(0, argCount);
    const handles = argsAndHandles.slice(argCount);
    const parameters = [];
    for (let i = 0; i < args.length; i++)
      parameters[i] = parseEvaluationResultValue(args[i], handles);
    let result = this.global.eval(expression);
    if (isFunction === true) {
      result = result(...parameters);
    } else if (isFunction === false) {
      result = result;
    } else {
      if (typeof result === "function")
        result = result(...parameters);
    }
    return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;
  }
  jsonValue(returnByValue, value) {
    if (value === void 0)
      return void 0;
    return serializeAsCallArgument(value, (value2) => ({ fallThrough: value2 }));
  }
  _promiseAwareJsonValueNoThrow(value) {
    const safeJson = (value2) => {
      try {
        return this.jsonValue(true, value2);
      } catch (e) {
        return void 0;
      }
    };
    if (value && typeof value === "object" && typeof value.then === "function") {
      return (async () => {
        const promiseValue = await value;
        return safeJson(promiseValue);
      })();
    }
    return safeJson(value);
  }
};

// packages/injected/src/injectedScript.ts
var InjectedScript = class {
  // eslint-disable-next-line no-restricted-globals
  constructor(window, options) {
    this._testIdAttributeNameForStrictErrorAndConsoleCodegen = "data-testid";
    // Recorder must use any external dependencies through InjectedScript.
    // Otherwise it will end up with a copy of all modules it uses, and any
    // module-level globals will be duplicated, which leads to subtle bugs.
    this.utils = {
      asLocator,
      cacheNormalizedWhitespaces,
      elementText,
      getAriaRole,
      getElementAccessibleDescription,
      getElementAccessibleName,
      isElementVisible,
      isInsideScope,
      normalizeWhiteSpace,
      parseAriaSnapshot,
      // Builtins protect injected code from clock emulation.
      builtins: null
    };
    this.window = window;
    this.document = window.document;
    this.isUnderTest = options.isUnderTest;
    this.utils.builtins = new UtilityScript(window, options.isUnderTest).builtins;
    this._sdkLanguage = options.sdkLanguage;
    this._testIdAttributeNameForStrictErrorAndConsoleCodegen = options.testIdAttributeName;
    this._evaluator = new SelectorEvaluatorImpl();
    this.consoleApi = new ConsoleAPI(this);
    this.onGlobalListenersRemoved = /* @__PURE__ */ new Set();
    this._autoClosingTags = /* @__PURE__ */ new Set(["AREA", "BASE", "BR", "COL", "COMMAND", "EMBED", "HR", "IMG", "INPUT", "KEYGEN", "LINK", "MENUITEM", "META", "PARAM", "SOURCE", "TRACK", "WBR"]);
    this._booleanAttributes = /* @__PURE__ */ new Set(["checked", "selected", "disabled", "readonly", "multiple"]);
    this._eventTypes = /* @__PURE__ */ new Map([
      ["auxclick", "mouse"],
      ["click", "mouse"],
      ["dblclick", "mouse"],
      ["mousedown", "mouse"],
      ["mouseeenter", "mouse"],
      ["mouseleave", "mouse"],
      ["mousemove", "mouse"],
      ["mouseout", "mouse"],
      ["mouseover", "mouse"],
      ["mouseup", "mouse"],
      ["mouseleave", "mouse"],
      ["mousewheel", "mouse"],
      ["keydown", "keyboard"],
      ["keyup", "keyboard"],
      ["keypress", "keyboard"],
      ["textInput", "keyboard"],
      ["touchstart", "touch"],
      ["touchmove", "touch"],
      ["touchend", "touch"],
      ["touchcancel", "touch"],
      ["pointerover", "pointer"],
      ["pointerout", "pointer"],
      ["pointerenter", "pointer"],
      ["pointerleave", "pointer"],
      ["pointerdown", "pointer"],
      ["pointerup", "pointer"],
      ["pointermove", "pointer"],
      ["pointercancel", "pointer"],
      ["gotpointercapture", "pointer"],
      ["lostpointercapture", "pointer"],
      ["focus", "focus"],
      ["blur", "focus"],
      ["drag", "drag"],
      ["dragstart", "drag"],
      ["dragend", "drag"],
      ["dragover", "drag"],
      ["dragenter", "drag"],
      ["dragleave", "drag"],
      ["dragexit", "drag"],
      ["drop", "drag"],
      ["wheel", "wheel"],
      ["deviceorientation", "deviceorientation"],
      ["deviceorientationabsolute", "deviceorientation"],
      ["devicemotion", "devicemotion"]
    ]);
    this._hoverHitTargetInterceptorEvents = /* @__PURE__ */ new Set(["mousemove"]);
    this._tapHitTargetInterceptorEvents = /* @__PURE__ */ new Set(["pointerdown", "pointerup", "touchstart", "touchend", "touchcancel"]);
    this._mouseHitTargetInterceptorEvents = /* @__PURE__ */ new Set(["mousedown", "mouseup", "pointerdown", "pointerup", "click", "auxclick", "dblclick", "contextmenu"]);
    this._allHitTargetInterceptorEvents = /* @__PURE__ */ new Set([...this._hoverHitTargetInterceptorEvents, ...this._tapHitTargetInterceptorEvents, ...this._mouseHitTargetInterceptorEvents]);
    this._engines = /* @__PURE__ */ new Map();
    this._engines.set("xpath", XPathEngine);
    this._engines.set("xpath:light", XPathEngine);
    this._engines.set("_react", createReactEngine());
    this._engines.set("_vue", createVueEngine());
    this._engines.set("role", createRoleEngine(false));
    this._engines.set("text", this._createTextEngine(true, false));
    this._engines.set("text:light", this._createTextEngine(false, false));
    this._engines.set("id", this._createAttributeEngine("id", true));
    this._engines.set("id:light", this._createAttributeEngine("id", false));
    this._engines.set("data-testid", this._createAttributeEngine("data-testid", true));
    this._engines.set("data-testid:light", this._createAttributeEngine("data-testid", false));
    this._engines.set("data-test-id", this._createAttributeEngine("data-test-id", true));
    this._engines.set("data-test-id:light", this._createAttributeEngine("data-test-id", false));
    this._engines.set("data-test", this._createAttributeEngine("data-test", true));
    this._engines.set("data-test:light", this._createAttributeEngine("data-test", false));
    this._engines.set("css", this._createCSSEngine());
    this._engines.set("nth", { queryAll: () => [] });
    this._engines.set("visible", this._createVisibleEngine());
    this._engines.set("internal:control", this._createControlEngine());
    this._engines.set("internal:has", this._createHasEngine());
    this._engines.set("internal:has-not", this._createHasNotEngine());
    this._engines.set("internal:and", { queryAll: () => [] });
    this._engines.set("internal:or", { queryAll: () => [] });
    this._engines.set("internal:chain", this._createInternalChainEngine());
    this._engines.set("internal:label", this._createInternalLabelEngine());
    this._engines.set("internal:text", this._createTextEngine(true, true));
    this._engines.set("internal:has-text", this._createInternalHasTextEngine());
    this._engines.set("internal:has-not-text", this._createInternalHasNotTextEngine());
    this._engines.set("internal:attr", this._createNamedAttributeEngine());
    this._engines.set("internal:testid", this._createNamedAttributeEngine());
    this._engines.set("internal:role", createRoleEngine(true));
    this._engines.set("internal:describe", this._createDescribeEngine());
    this._engines.set("aria-ref", this._createAriaRefEngine());
    for (const { name, source } of options.customEngines)
      this._engines.set(name, this.eval(source));
    this._stableRafCount = options.stableRafCount;
    this._browserName = options.browserName;
    setGlobalOptions({ browserNameForWorkarounds: options.browserName });
    this._setupGlobalListenersRemovalDetection();
    this._setupHitTargetInterceptors();
    if (this.isUnderTest)
      this.window.__injectedScript = this;
  }
  eval(expression) {
    return this.window.eval(expression);
  }
  testIdAttributeNameForStrictErrorAndConsoleCodegen() {
    return this._testIdAttributeNameForStrictErrorAndConsoleCodegen;
  }
  parseSelector(selector) {
    const result = parseSelector(selector);
    visitAllSelectorParts(result, (part) => {
      if (!this._engines.has(part.name))
        throw this.createStacklessError(\`Unknown engine "\${part.name}" while parsing selector \${selector}\`);
    });
    return result;
  }
  generateSelector(targetElement, options) {
    return generateSelector(this, targetElement, options);
  }
  generateSelectorSimple(targetElement, options) {
    return generateSelector(this, targetElement, { ...options, testIdAttributeName: this._testIdAttributeNameForStrictErrorAndConsoleCodegen }).selector;
  }
  querySelector(selector, root, strict) {
    const result = this.querySelectorAll(selector, root);
    if (strict && result.length > 1)
      throw this.strictModeViolationError(selector, result);
    return result[0];
  }
  _queryNth(elements, part) {
    const list = [...elements];
    let nth = +part.body;
    if (nth === -1)
      nth = list.length - 1;
    return new Set(list.slice(nth, nth + 1));
  }
  _queryLayoutSelector(elements, part, originalRoot) {
    const name = part.name;
    const body = part.body;
    const result = [];
    const inner = this.querySelectorAll(body.parsed, originalRoot);
    for (const element of elements) {
      const score = layoutSelectorScore(name, element, inner, body.distance);
      if (score !== void 0)
        result.push({ element, score });
    }
    result.sort((a, b) => a.score - b.score);
    return new Set(result.map((r) => r.element));
  }
  ariaSnapshot(node, options) {
    if (node.nodeType !== Node.ELEMENT_NODE)
      throw this.createStacklessError("Can only capture aria snapshot of Element nodes.");
    this._lastAriaSnapshot = generateAriaTree(node, options);
    return renderAriaTree(this._lastAriaSnapshot, options);
  }
  ariaSnapshotForRecorder() {
    const tree = generateAriaTree(this.document.body, { forAI: true });
    const ariaSnapshot = renderAriaTree(tree, { forAI: true });
    return { ariaSnapshot, refs: tree.refs };
  }
  getAllByAria(document, template) {
    return getAllByAria(document.documentElement, template);
  }
  querySelectorAll(selector, root) {
    if (selector.capture !== void 0) {
      if (selector.parts.some((part) => part.name === "nth"))
        throw this.createStacklessError(\`Can't query n-th element in a request with the capture.\`);
      const withHas = { parts: selector.parts.slice(0, selector.capture + 1) };
      if (selector.capture < selector.parts.length - 1) {
        const parsed = { parts: selector.parts.slice(selector.capture + 1) };
        const has = { name: "internal:has", body: { parsed }, source: stringifySelector(parsed) };
        withHas.parts.push(has);
      }
      return this.querySelectorAll(withHas, root);
    }
    if (!root["querySelectorAll"])
      throw this.createStacklessError("Node is not queryable.");
    if (selector.capture !== void 0) {
      throw this.createStacklessError("Internal error: there should not be a capture in the selector.");
    }
    if (root.nodeType === 11 && selector.parts.length === 1 && selector.parts[0].name === "css" && selector.parts[0].source === ":scope")
      return [root];
    this._evaluator.begin();
    try {
      let roots = /* @__PURE__ */ new Set([root]);
      for (const part of selector.parts) {
        if (part.name === "nth") {
          roots = this._queryNth(roots, part);
        } else if (part.name === "internal:and") {
          const andElements = this.querySelectorAll(part.body.parsed, root);
          roots = new Set(andElements.filter((e) => roots.has(e)));
        } else if (part.name === "internal:or") {
          const orElements = this.querySelectorAll(part.body.parsed, root);
          roots = new Set(sortInDOMOrder(/* @__PURE__ */ new Set([...roots, ...orElements])));
        } else if (kLayoutSelectorNames.includes(part.name)) {
          roots = this._queryLayoutSelector(roots, part, root);
        } else {
          const next = /* @__PURE__ */ new Set();
          for (const root2 of roots) {
            const all = this._queryEngineAll(part, root2);
            for (const one of all)
              next.add(one);
          }
          roots = next;
        }
      }
      return [...roots];
    } finally {
      this._evaluator.end();
    }
  }
  _queryEngineAll(part, root) {
    const result = this._engines.get(part.name).queryAll(root, part.body);
    for (const element of result) {
      if (!("nodeName" in element))
        throw this.createStacklessError(\`Expected a Node but got \${Object.prototype.toString.call(element)}\`);
    }
    return result;
  }
  _createAttributeEngine(attribute, shadow) {
    const toCSS = (selector) => {
      const css = \`[\${attribute}=\${JSON.stringify(selector)}]\`;
      return [{ simples: [{ selector: { css, functions: [] }, combinator: "" }] }];
    };
    return {
      queryAll: (root, selector) => {
        return this._evaluator.query({ scope: root, pierceShadow: shadow }, toCSS(selector));
      }
    };
  }
  _createCSSEngine() {
    return {
      queryAll: (root, body) => {
        return this._evaluator.query({ scope: root, pierceShadow: true }, body);
      }
    };
  }
  _createTextEngine(shadow, internal) {
    const queryAll = (root, selector) => {
      const { matcher, kind } = createTextMatcher(selector, internal);
      const result = [];
      let lastDidNotMatchSelf = null;
      const appendElement = (element) => {
        if (kind === "lax" && lastDidNotMatchSelf && lastDidNotMatchSelf.contains(element))
          return false;
        const matches = elementMatchesText(this._evaluator._cacheText, element, matcher);
        if (matches === "none")
          lastDidNotMatchSelf = element;
        if (matches === "self" || matches === "selfAndChildren" && kind === "strict" && !internal)
          result.push(element);
      };
      if (root.nodeType === Node.ELEMENT_NODE)
        appendElement(root);
      const elements = this._evaluator._queryCSS({ scope: root, pierceShadow: shadow }, "*");
      for (const element of elements)
        appendElement(element);
      return result;
    };
    return { queryAll };
  }
  _createInternalHasTextEngine() {
    return {
      queryAll: (root, selector) => {
        if (root.nodeType !== 1)
          return [];
        const element = root;
        const text = elementText(this._evaluator._cacheText, element);
        const { matcher } = createTextMatcher(selector, true);
        return matcher(text) ? [element] : [];
      }
    };
  }
  _createInternalHasNotTextEngine() {
    return {
      queryAll: (root, selector) => {
        if (root.nodeType !== 1)
          return [];
        const element = root;
        const text = elementText(this._evaluator._cacheText, element);
        const { matcher } = createTextMatcher(selector, true);
        return matcher(text) ? [] : [element];
      }
    };
  }
  _createInternalLabelEngine() {
    return {
      queryAll: (root, selector) => {
        const { matcher } = createTextMatcher(selector, true);
        const allElements = this._evaluator._queryCSS({ scope: root, pierceShadow: true }, "*");
        return allElements.filter((element) => {
          return getElementLabels(this._evaluator._cacheText, element).some((label) => matcher(label));
        });
      }
    };
  }
  _createNamedAttributeEngine() {
    const queryAll = (root, selector) => {
      const parsed = parseAttributeSelector(selector, true);
      if (parsed.name || parsed.attributes.length !== 1)
        throw new Error("Malformed attribute selector: " + selector);
      const { name, value, caseSensitive } = parsed.attributes[0];
      const lowerCaseValue = caseSensitive ? null : value.toLowerCase();
      let matcher;
      if (value instanceof RegExp)
        matcher = (s) => !!s.match(value);
      else if (caseSensitive)
        matcher = (s) => s === value;
      else
        matcher = (s) => s.toLowerCase().includes(lowerCaseValue);
      const elements = this._evaluator._queryCSS({ scope: root, pierceShadow: true }, \`[\${name}]\`);
      return elements.filter((e) => matcher(e.getAttribute(name)));
    };
    return { queryAll };
  }
  _createDescribeEngine() {
    const queryAll = (root) => {
      if (root.nodeType !== 1)
        return [];
      return [root];
    };
    return { queryAll };
  }
  _createControlEngine() {
    return {
      queryAll(root, body) {
        if (body === "enter-frame")
          return [];
        if (body === "return-empty")
          return [];
        if (body === "component") {
          if (root.nodeType !== 1)
            return [];
          return [root.childElementCount === 1 ? root.firstElementChild : root];
        }
        throw new Error(\`Internal error, unknown internal:control selector \${body}\`);
      }
    };
  }
  _createHasEngine() {
    const queryAll = (root, body) => {
      if (root.nodeType !== 1)
        return [];
      const has = !!this.querySelector(body.parsed, root, false);
      return has ? [root] : [];
    };
    return { queryAll };
  }
  _createHasNotEngine() {
    const queryAll = (root, body) => {
      if (root.nodeType !== 1)
        return [];
      const has = !!this.querySelector(body.parsed, root, false);
      return has ? [] : [root];
    };
    return { queryAll };
  }
  _createVisibleEngine() {
    const queryAll = (root, body) => {
      if (root.nodeType !== 1)
        return [];
      const visible = body === "true";
      return isElementVisible(root) === visible ? [root] : [];
    };
    return { queryAll };
  }
  _createInternalChainEngine() {
    const queryAll = (root, body) => {
      return this.querySelectorAll(body.parsed, root);
    };
    return { queryAll };
  }
  extend(source, params) {
    const constrFunction = this.window.eval(\`
    (() => {
      const module = {};
      \${source}
      return module.exports.default();
    })()\`);
    return new constrFunction(this, params);
  }
  async viewportRatio(element) {
    return await new Promise((resolve) => {
      const observer = new IntersectionObserver((entries) => {
        resolve(entries[0].intersectionRatio);
        observer.disconnect();
      });
      observer.observe(element);
      this.utils.builtins.requestAnimationFrame(() => {
      });
    });
  }
  getElementBorderWidth(node) {
    if (node.nodeType !== Node.ELEMENT_NODE || !node.ownerDocument || !node.ownerDocument.defaultView)
      return { left: 0, top: 0 };
    const style = node.ownerDocument.defaultView.getComputedStyle(node);
    return { left: parseInt(style.borderLeftWidth || "", 10), top: parseInt(style.borderTopWidth || "", 10) };
  }
  describeIFrameStyle(iframe) {
    if (!iframe.ownerDocument || !iframe.ownerDocument.defaultView)
      return "error:notconnected";
    const defaultView = iframe.ownerDocument.defaultView;
    for (let e = iframe; e; e = parentElementOrShadowHost(e)) {
      if (defaultView.getComputedStyle(e).transform !== "none")
        return "transformed";
    }
    const iframeStyle = defaultView.getComputedStyle(iframe);
    return {
      left: parseInt(iframeStyle.borderLeftWidth || "", 10) + parseInt(iframeStyle.paddingLeft || "", 10),
      top: parseInt(iframeStyle.borderTopWidth || "", 10) + parseInt(iframeStyle.paddingTop || "", 10)
    };
  }
  retarget(node, behavior) {
    let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;
    if (!element)
      return null;
    if (behavior === "none")
      return element;
    if (!element.matches("input, textarea, select") && !element.isContentEditable) {
      if (behavior === "button-link")
        element = element.closest("button, [role=button], a, [role=link]") || element;
      else
        element = element.closest("button, [role=button], [role=checkbox], [role=radio]") || element;
    }
    if (behavior === "follow-label") {
      if (!element.matches("a, input, textarea, button, select, [role=link], [role=button], [role=checkbox], [role=radio]") && !element.isContentEditable) {
        const enclosingLabel = element.closest("label");
        if (enclosingLabel && enclosingLabel.control)
          element = enclosingLabel.control;
      }
    }
    return element;
  }
  async checkElementStates(node, states) {
    if (states.includes("stable")) {
      const stableResult = await this._checkElementIsStable(node);
      if (stableResult === false)
        return { missingState: "stable" };
      if (stableResult === "error:notconnected")
        return "error:notconnected";
    }
    for (const state of states) {
      if (state !== "stable") {
        const result = this.elementState(node, state);
        if (result.received === "error:notconnected")
          return "error:notconnected";
        if (!result.matches)
          return { missingState: state };
      }
    }
  }
  async _checkElementIsStable(node) {
    const continuePolling = Symbol("continuePolling");
    let lastRect;
    let stableRafCounter = 0;
    let lastTime = 0;
    const check = () => {
      const element = this.retarget(node, "no-follow-label");
      if (!element)
        return "error:notconnected";
      const time = this.utils.builtins.performance.now();
      if (this._stableRafCount > 1 && time - lastTime < 15)
        return continuePolling;
      lastTime = time;
      const clientRect = element.getBoundingClientRect();
      const rect = { x: clientRect.top, y: clientRect.left, width: clientRect.width, height: clientRect.height };
      if (lastRect) {
        const samePosition = rect.x === lastRect.x && rect.y === lastRect.y && rect.width === lastRect.width && rect.height === lastRect.height;
        if (!samePosition)
          return false;
        if (++stableRafCounter >= this._stableRafCount)
          return true;
      }
      lastRect = rect;
      return continuePolling;
    };
    let fulfill;
    let reject;
    const result = new Promise((f, r) => {
      fulfill = f;
      reject = r;
    });
    const raf = () => {
      try {
        const success = check();
        if (success !== continuePolling)
          fulfill(success);
        else
          this.utils.builtins.requestAnimationFrame(raf);
      } catch (e) {
        reject(e);
      }
    };
    this.utils.builtins.requestAnimationFrame(raf);
    return result;
  }
  _createAriaRefEngine() {
    const queryAll = (root, selector) => {
      var _a, _b;
      const result = (_b = (_a = this._lastAriaSnapshot) == null ? void 0 : _a.elements) == null ? void 0 : _b.get(selector);
      return result && result.isConnected ? [result] : [];
    };
    return { queryAll };
  }
  elementState(node, state) {
    const element = this.retarget(node, ["visible", "hidden"].includes(state) ? "none" : "follow-label");
    if (!element || !element.isConnected) {
      if (state === "hidden")
        return { matches: true, received: "hidden" };
      return { matches: false, received: "error:notconnected" };
    }
    if (state === "visible" || state === "hidden") {
      const visible = isElementVisible(element);
      return {
        matches: state === "visible" ? visible : !visible,
        received: visible ? "visible" : "hidden"
      };
    }
    if (state === "disabled" || state === "enabled") {
      const disabled = getAriaDisabled(element);
      return {
        matches: state === "disabled" ? disabled : !disabled,
        received: disabled ? "disabled" : "enabled"
      };
    }
    if (state === "editable") {
      const disabled = getAriaDisabled(element);
      const readonly = getReadonly(element);
      if (readonly === "error")
        throw this.createStacklessError("Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]");
      return {
        matches: !disabled && !readonly,
        received: disabled ? "disabled" : readonly ? "readOnly" : "editable"
      };
    }
    if (state === "checked" || state === "unchecked") {
      const need = state === "checked";
      const checked = getCheckedWithoutMixed(element);
      if (checked === "error")
        throw this.createStacklessError("Not a checkbox or radio button");
      return {
        matches: need === checked,
        received: checked ? "checked" : "unchecked"
      };
    }
    if (state === "indeterminate") {
      const checked = getCheckedAllowMixed(element);
      if (checked === "error")
        throw this.createStacklessError("Not a checkbox or radio button");
      return {
        matches: checked === "mixed",
        received: checked === true ? "checked" : checked === false ? "unchecked" : "mixed"
      };
    }
    throw this.createStacklessError(\`Unexpected element state "\${state}"\`);
  }
  selectOptions(node, optionsToSelect) {
    const element = this.retarget(node, "follow-label");
    if (!element)
      return "error:notconnected";
    if (element.nodeName.toLowerCase() !== "select")
      throw this.createStacklessError("Element is not a <select> element");
    const select = element;
    const options = [...select.options];
    const selectedOptions = [];
    let remainingOptionsToSelect = optionsToSelect.slice();
    for (let index = 0; index < options.length; index++) {
      const option = options[index];
      const filter = (optionToSelect) => {
        if (optionToSelect instanceof Node)
          return option === optionToSelect;
        let matches = true;
        if (optionToSelect.valueOrLabel !== void 0)
          matches = matches && (optionToSelect.valueOrLabel === option.value || optionToSelect.valueOrLabel === option.label);
        if (optionToSelect.value !== void 0)
          matches = matches && optionToSelect.value === option.value;
        if (optionToSelect.label !== void 0)
          matches = matches && optionToSelect.label === option.label;
        if (optionToSelect.index !== void 0)
          matches = matches && optionToSelect.index === index;
        return matches;
      };
      if (!remainingOptionsToSelect.some(filter))
        continue;
      if (!this.elementState(option, "enabled").matches)
        return "error:optionnotenabled";
      selectedOptions.push(option);
      if (select.multiple) {
        remainingOptionsToSelect = remainingOptionsToSelect.filter((o) => !filter(o));
      } else {
        remainingOptionsToSelect = [];
        break;
      }
    }
    if (remainingOptionsToSelect.length)
      return "error:optionsnotfound";
    select.value = void 0;
    selectedOptions.forEach((option) => option.selected = true);
    select.dispatchEvent(new Event("input", { bubbles: true, composed: true }));
    select.dispatchEvent(new Event("change", { bubbles: true }));
    return selectedOptions.map((option) => option.value);
  }
  fill(node, value) {
    const element = this.retarget(node, "follow-label");
    if (!element)
      return "error:notconnected";
    if (element.nodeName.toLowerCase() === "input") {
      const input = element;
      const type = input.type.toLowerCase();
      const kInputTypesToSetValue = /* @__PURE__ */ new Set(["color", "date", "time", "datetime-local", "month", "range", "week"]);
      const kInputTypesToTypeInto = /* @__PURE__ */ new Set(["", "email", "number", "password", "search", "tel", "text", "url"]);
      if (!kInputTypesToTypeInto.has(type) && !kInputTypesToSetValue.has(type))
        throw this.createStacklessError(\`Input of type "\${type}" cannot be filled\`);
      if (type === "number") {
        value = value.trim();
        if (isNaN(Number(value)))
          throw this.createStacklessError("Cannot type text into input[type=number]");
      }
      if (kInputTypesToSetValue.has(type)) {
        value = value.trim();
        input.focus();
        input.value = value;
        if (input.value !== value)
          throw this.createStacklessError("Malformed value");
        element.dispatchEvent(new Event("input", { bubbles: true, composed: true }));
        element.dispatchEvent(new Event("change", { bubbles: true }));
        return "done";
      }
    } else if (element.nodeName.toLowerCase() === "textarea") {
    } else if (!element.isContentEditable) {
      throw this.createStacklessError("Element is not an <input>, <textarea> or [contenteditable] element");
    }
    this.selectText(element);
    return "needsinput";
  }
  selectText(node) {
    const element = this.retarget(node, "follow-label");
    if (!element)
      return "error:notconnected";
    if (element.nodeName.toLowerCase() === "input") {
      const input = element;
      input.select();
      input.focus();
      return "done";
    }
    if (element.nodeName.toLowerCase() === "textarea") {
      const textarea = element;
      textarea.selectionStart = 0;
      textarea.selectionEnd = textarea.value.length;
      textarea.focus();
      return "done";
    }
    const range = element.ownerDocument.createRange();
    range.selectNodeContents(element);
    const selection = element.ownerDocument.defaultView.getSelection();
    if (selection) {
      selection.removeAllRanges();
      selection.addRange(range);
    }
    element.focus();
    return "done";
  }
  _activelyFocused(node) {
    const activeElement = node.getRootNode().activeElement;
    const isFocused = activeElement === node && !!node.ownerDocument && node.ownerDocument.hasFocus();
    return { activeElement, isFocused };
  }
  focusNode(node, resetSelectionIfNotFocused) {
    if (!node.isConnected)
      return "error:notconnected";
    if (node.nodeType !== Node.ELEMENT_NODE)
      throw this.createStacklessError("Node is not an element");
    const { activeElement, isFocused: wasFocused } = this._activelyFocused(node);
    if (node.isContentEditable && !wasFocused && activeElement && activeElement.blur) {
      activeElement.blur();
    }
    node.focus();
    node.focus();
    if (resetSelectionIfNotFocused && !wasFocused && node.nodeName.toLowerCase() === "input") {
      try {
        const input = node;
        input.setSelectionRange(0, 0);
      } catch (e) {
      }
    }
    return "done";
  }
  blurNode(node) {
    if (!node.isConnected)
      return "error:notconnected";
    if (node.nodeType !== Node.ELEMENT_NODE)
      throw this.createStacklessError("Node is not an element");
    node.blur();
    return "done";
  }
  setInputFiles(node, payloads) {
    if (node.nodeType !== Node.ELEMENT_NODE)
      return "Node is not of type HTMLElement";
    const element = node;
    if (element.nodeName !== "INPUT")
      return "Not an <input> element";
    const input = element;
    const type = (input.getAttribute("type") || "").toLowerCase();
    if (type !== "file")
      return "Not an input[type=file] element";
    const files = payloads.map((file) => {
      const bytes = Uint8Array.from(atob(file.buffer), (c) => c.charCodeAt(0));
      return new File([bytes], file.name, { type: file.mimeType, lastModified: file.lastModifiedMs });
    });
    const dt = new DataTransfer();
    for (const file of files)
      dt.items.add(file);
    input.files = dt.files;
    input.dispatchEvent(new Event("input", { bubbles: true, composed: true }));
    input.dispatchEvent(new Event("change", { bubbles: true }));
  }
  expectHitTarget(hitPoint, targetElement) {
    const roots = [];
    let parentElement = targetElement;
    while (parentElement) {
      const root = enclosingShadowRootOrDocument(parentElement);
      if (!root)
        break;
      roots.push(root);
      if (root.nodeType === 9)
        break;
      parentElement = root.host;
    }
    let hitElement;
    for (let index = roots.length - 1; index >= 0; index--) {
      const root = roots[index];
      const elements = root.elementsFromPoint(hitPoint.x, hitPoint.y);
      const singleElement = root.elementFromPoint(hitPoint.x, hitPoint.y);
      if (singleElement && elements[0] && parentElementOrShadowHost(singleElement) === elements[0]) {
        const style = this.window.getComputedStyle(singleElement);
        if ((style == null ? void 0 : style.display) === "contents") {
          elements.unshift(singleElement);
        }
      }
      if (elements[0] && elements[0].shadowRoot === root && elements[1] === singleElement) {
        elements.shift();
      }
      const innerElement = elements[0];
      if (!innerElement)
        break;
      hitElement = innerElement;
      if (index && innerElement !== roots[index - 1].host)
        break;
    }
    const hitParents = [];
    while (hitElement && hitElement !== targetElement) {
      hitParents.push(hitElement);
      hitElement = parentElementOrShadowHost(hitElement);
    }
    if (hitElement === targetElement)
      return "done";
    const hitTargetDescription = this.previewNode(hitParents[0] || this.document.documentElement);
    let rootHitTargetDescription;
    let element = targetElement;
    while (element) {
      const index = hitParents.indexOf(element);
      if (index !== -1) {
        if (index > 1)
          rootHitTargetDescription = this.previewNode(hitParents[index - 1]);
        break;
      }
      element = parentElementOrShadowHost(element);
    }
    if (rootHitTargetDescription)
      return { hitTargetDescription: \`\${hitTargetDescription} from \${rootHitTargetDescription} subtree\` };
    return { hitTargetDescription };
  }
  // Life of a pointer action, for example click.
  //
  // 0. Retry items 1 and 2 while action fails due to navigation or element being detached.
  //   1. Resolve selector to an element.
  //   2. Retry the following steps until the element is detached or frame navigates away.
  //     2a. Wait for the element to be stable (not moving), visible and enabled.
  //     2b. Scroll element into view. Scrolling alternates between:
  //         - Built-in protocol scrolling.
  //         - Anchoring to the top/left, bottom/right and center/center.
  //         This is to scroll elements from under sticky headers/footers.
  //     2c. Click point is calculated, either based on explicitly specified position,
  //         or some visible point of the element based on protocol content quads.
  //     2d. Click point relative to page viewport is converted relative to the target iframe
  //         for the next hit-point check.
  //     2e. (injected) Hit target at the click point must be a descendant of the target element.
  //         This prevents mis-clicking in edge cases like <iframe> overlaying the target.
  //     2f. (injected) Events specific for click (or some other action type) are intercepted on
  //         the Window with capture:true. See 2i for details.
  //         Note: this step is skipped for drag&drop (see inline comments for the reason).
  //     2g. Necessary keyboard modifiers are pressed.
  //     2h. Click event is issued (mousemove + mousedown + mouseup).
  //     2i. (injected) For each event, we check that hit target at the event point
  //         is a descendant of the target element.
  //         This guarantees no race between issuing the event and handling it in the page,
  //         for example due to layout shift.
  //         When hit target check fails, we block all future events in the page.
  //     2j. Keyboard modifiers are restored.
  //     2k. (injected) Event interceptor is removed.
  //     2l. All navigations triggered between 2g-2k are awaited to be either committed or canceled.
  //     2m. If failed, wait for increasing amount of time before the next retry.
  setupHitTargetInterceptor(node, action, hitPoint, blockAllEvents) {
    const element = this.retarget(node, "button-link");
    if (!element || !element.isConnected)
      return "error:notconnected";
    if (hitPoint) {
      const preliminaryResult = this.expectHitTarget(hitPoint, element);
      if (preliminaryResult !== "done")
        return preliminaryResult.hitTargetDescription;
    }
    if (action === "drag")
      return { stop: () => "done" };
    const events = {
      "hover": this._hoverHitTargetInterceptorEvents,
      "tap": this._tapHitTargetInterceptorEvents,
      "mouse": this._mouseHitTargetInterceptorEvents
    }[action];
    let result;
    const listener = (event) => {
      if (!events.has(event.type))
        return;
      if (!event.isTrusted)
        return;
      const point = !!this.window.TouchEvent && event instanceof this.window.TouchEvent ? event.touches[0] : event;
      if (result === void 0 && point)
        result = this.expectHitTarget({ x: point.clientX, y: point.clientY }, element);
      if (blockAllEvents || result !== "done" && result !== void 0) {
        event.preventDefault();
        event.stopPropagation();
        event.stopImmediatePropagation();
      }
    };
    const stop = () => {
      if (this._hitTargetInterceptor === listener)
        this._hitTargetInterceptor = void 0;
      return result || "done";
    };
    this._hitTargetInterceptor = listener;
    return { stop };
  }
  dispatchEvent(node, type, eventInitObj) {
    var _a, _b, _c, _d, _e;
    let event;
    const eventInit = { bubbles: true, cancelable: true, composed: true, ...eventInitObj };
    switch (this._eventTypes.get(type)) {
      case "mouse":
        event = new MouseEvent(type, eventInit);
        break;
      case "keyboard":
        event = new KeyboardEvent(type, eventInit);
        break;
      case "touch": {
        if (this._browserName === "webkit") {
          const createTouch = (t) => {
            var _a2, _b2, _c2;
            if (t instanceof Touch)
              return t;
            let pageX = t.pageX;
            if (pageX === void 0 && t.clientX !== void 0)
              pageX = t.clientX + (((_a2 = this.document.scrollingElement) == null ? void 0 : _a2.scrollLeft) || 0);
            let pageY = t.pageY;
            if (pageY === void 0 && t.clientY !== void 0)
              pageY = t.clientY + (((_b2 = this.document.scrollingElement) == null ? void 0 : _b2.scrollTop) || 0);
            return this.document.createTouch(this.window, (_c2 = t.target) != null ? _c2 : node, t.identifier, pageX, pageY, t.screenX, t.screenY, t.radiusX, t.radiusY, t.rotationAngle, t.force);
          };
          const createTouchList = (touches) => {
            if (touches instanceof TouchList || !touches)
              return touches;
            return this.document.createTouchList(...touches.map(createTouch));
          };
          (_a = eventInit.target) != null ? _a : eventInit.target = node;
          eventInit.touches = createTouchList(eventInit.touches);
          eventInit.targetTouches = createTouchList(eventInit.targetTouches);
          eventInit.changedTouches = createTouchList(eventInit.changedTouches);
          event = new TouchEvent(type, eventInit);
        } else {
          (_b = eventInit.target) != null ? _b : eventInit.target = node;
          eventInit.touches = (_c = eventInit.touches) == null ? void 0 : _c.map((t) => {
            var _a2;
            return t instanceof Touch ? t : new Touch({ ...t, target: (_a2 = t.target) != null ? _a2 : node });
          });
          eventInit.targetTouches = (_d = eventInit.targetTouches) == null ? void 0 : _d.map((t) => {
            var _a2;
            return t instanceof Touch ? t : new Touch({ ...t, target: (_a2 = t.target) != null ? _a2 : node });
          });
          eventInit.changedTouches = (_e = eventInit.changedTouches) == null ? void 0 : _e.map((t) => {
            var _a2;
            return t instanceof Touch ? t : new Touch({ ...t, target: (_a2 = t.target) != null ? _a2 : node });
          });
          event = new TouchEvent(type, eventInit);
        }
        break;
      }
      case "pointer":
        event = new PointerEvent(type, eventInit);
        break;
      case "focus":
        event = new FocusEvent(type, eventInit);
        break;
      case "drag":
        event = new DragEvent(type, eventInit);
        break;
      case "wheel":
        event = new WheelEvent(type, eventInit);
        break;
      case "deviceorientation":
        try {
          event = new DeviceOrientationEvent(type, eventInit);
        } catch {
          const { bubbles, cancelable, alpha, beta, gamma, absolute } = eventInit;
          event = this.document.createEvent("DeviceOrientationEvent");
          event.initDeviceOrientationEvent(type, bubbles, cancelable, alpha, beta, gamma, absolute);
        }
        break;
      case "devicemotion":
        try {
          event = new DeviceMotionEvent(type, eventInit);
        } catch {
          const { bubbles, cancelable, acceleration, accelerationIncludingGravity, rotationRate, interval } = eventInit;
          event = this.document.createEvent("DeviceMotionEvent");
          event.initDeviceMotionEvent(type, bubbles, cancelable, acceleration, accelerationIncludingGravity, rotationRate, interval);
        }
        break;
      default:
        event = new Event(type, eventInit);
        break;
    }
    node.dispatchEvent(event);
  }
  previewNode(node) {
    if (node.nodeType === Node.TEXT_NODE)
      return oneLine(\`#text=\${node.nodeValue || ""}\`);
    if (node.nodeType !== Node.ELEMENT_NODE)
      return oneLine(\`<\${node.nodeName.toLowerCase()} />\`);
    const element = node;
    const attrs = [];
    for (let i = 0; i < element.attributes.length; i++) {
      const { name, value } = element.attributes[i];
      if (name === "style")
        continue;
      if (!value && this._booleanAttributes.has(name))
        attrs.push(\` \${name}\`);
      else
        attrs.push(\` \${name}="\${value}"\`);
    }
    attrs.sort((a, b) => a.length - b.length);
    const attrText = trimStringWithEllipsis(attrs.join(""), 500);
    if (this._autoClosingTags.has(element.nodeName))
      return oneLine(\`<\${element.nodeName.toLowerCase()}\${attrText}/>\`);
    const children = element.childNodes;
    let onlyText = false;
    if (children.length <= 5) {
      onlyText = true;
      for (let i = 0; i < children.length; i++)
        onlyText = onlyText && children[i].nodeType === Node.TEXT_NODE;
    }
    const text = onlyText ? element.textContent || "" : children.length ? "\\u2026" : "";
    return oneLine(\`<\${element.nodeName.toLowerCase()}\${attrText}>\${trimStringWithEllipsis(text, 50)}</\${element.nodeName.toLowerCase()}>\`);
  }
  strictModeViolationError(selector, matches) {
    const infos = matches.slice(0, 10).map((m) => ({
      preview: this.previewNode(m),
      selector: this.generateSelectorSimple(m)
    }));
    const lines = infos.map((info, i) => \`
    \${i + 1}) \${info.preview} aka \${asLocator(this._sdkLanguage, info.selector)}\`);
    if (infos.length < matches.length)
      lines.push("\\n    ...");
    return this.createStacklessError(\`strict mode violation: \${asLocator(this._sdkLanguage, stringifySelector(selector))} resolved to \${matches.length} elements:\${lines.join("")}
\`);
  }
  createStacklessError(message) {
    if (this._browserName === "firefox") {
      const error2 = new Error("Error: " + message);
      error2.stack = "";
      return error2;
    }
    const error = new Error(message);
    delete error.stack;
    return error;
  }
  createHighlight() {
    return new Highlight(this);
  }
  maskSelectors(selectors, color) {
    if (this._highlight)
      this.hideHighlight();
    this._highlight = new Highlight(this);
    this._highlight.install();
    const elements = [];
    for (const selector of selectors)
      elements.push(this.querySelectorAll(selector, this.document.documentElement));
    this._highlight.maskElements(elements.flat(), color);
  }
  highlight(selector) {
    if (!this._highlight) {
      this._highlight = new Highlight(this);
      this._highlight.install();
    }
    this._highlight.runHighlightOnRaf(selector);
  }
  hideHighlight() {
    if (this._highlight) {
      this._highlight.uninstall();
      delete this._highlight;
    }
  }
  markTargetElements(markedElements, callId) {
    var _a, _b;
    if (((_a = this._markedElements) == null ? void 0 : _a.callId) !== callId)
      this._markedElements = void 0;
    const previous = ((_b = this._markedElements) == null ? void 0 : _b.elements) || /* @__PURE__ */ new Set();
    const unmarkEvent = new CustomEvent("__playwright_unmark_target__", {
      bubbles: true,
      cancelable: true,
      detail: callId,
      composed: true
    });
    for (const element of previous) {
      if (!markedElements.has(element))
        element.dispatchEvent(unmarkEvent);
    }
    const markEvent = new CustomEvent("__playwright_mark_target__", {
      bubbles: true,
      cancelable: true,
      detail: callId,
      composed: true
    });
    for (const element of markedElements) {
      if (!previous.has(element))
        element.dispatchEvent(markEvent);
    }
    this._markedElements = { callId, elements: markedElements };
  }
  _setupGlobalListenersRemovalDetection() {
    const customEventName = "__playwright_global_listeners_check__";
    let seenEvent = false;
    const handleCustomEvent = () => seenEvent = true;
    this.window.addEventListener(customEventName, handleCustomEvent);
    new MutationObserver((entries) => {
      const newDocumentElement = entries.some((entry) => Array.from(entry.addedNodes).includes(this.document.documentElement));
      if (!newDocumentElement)
        return;
      seenEvent = false;
      this.window.dispatchEvent(new CustomEvent(customEventName));
      if (seenEvent)
        return;
      this.window.addEventListener(customEventName, handleCustomEvent);
      for (const callback of this.onGlobalListenersRemoved)
        callback();
    }).observe(this.document, { childList: true });
  }
  _setupHitTargetInterceptors() {
    const listener = (event) => {
      var _a;
      return (_a = this._hitTargetInterceptor) == null ? void 0 : _a.call(this, event);
    };
    const addHitTargetInterceptorListeners = () => {
      for (const event of this._allHitTargetInterceptorEvents)
        this.window.addEventListener(event, listener, { capture: true, passive: false });
    };
    addHitTargetInterceptorListeners();
    this.onGlobalListenersRemoved.add(addHitTargetInterceptorListeners);
  }
  async expect(element, options, elements) {
    var _a, _b;
    const isArray = options.expression === "to.have.count" || options.expression.endsWith(".array");
    if (isArray)
      return this.expectArray(elements, options);
    if (!element) {
      if (!options.isNot && options.expression === "to.be.hidden")
        return { matches: true };
      if (options.isNot && options.expression === "to.be.visible")
        return { matches: false };
      if (!options.isNot && options.expression === "to.be.detached")
        return { matches: true };
      if (options.isNot && options.expression === "to.be.attached")
        return { matches: false };
      if (options.isNot && options.expression === "to.be.in.viewport")
        return { matches: false };
      if (options.expression === "to.have.title" && ((_a = options == null ? void 0 : options.expectedText) == null ? void 0 : _a[0])) {
        const matcher = new ExpectedTextMatcher(options.expectedText[0]);
        const received = this.document.title;
        return { received, matches: matcher.matches(received) };
      }
      if (options.expression === "to.have.url" && ((_b = options == null ? void 0 : options.expectedText) == null ? void 0 : _b[0])) {
        const matcher = new ExpectedTextMatcher(options.expectedText[0]);
        const received = this.document.location.href;
        return { received, matches: matcher.matches(received) };
      }
      return { matches: options.isNot, missingReceived: true };
    }
    return await this.expectSingleElement(element, options);
  }
  async expectSingleElement(element, options) {
    var _a, _b;
    const expression = options.expression;
    {
      let result;
      if (expression === "to.have.attribute") {
        const hasAttribute = element.hasAttribute(options.expressionArg);
        result = {
          matches: hasAttribute,
          received: hasAttribute ? "attribute present" : "attribute not present"
        };
      } else if (expression === "to.be.checked") {
        const { checked, indeterminate } = options.expectedValue;
        if (indeterminate) {
          if (checked !== void 0)
            throw this.createStacklessError("Can't assert indeterminate and checked at the same time");
          result = this.elementState(element, "indeterminate");
        } else {
          result = this.elementState(element, checked === false ? "unchecked" : "checked");
        }
      } else if (expression === "to.be.disabled") {
        result = this.elementState(element, "disabled");
      } else if (expression === "to.be.editable") {
        result = this.elementState(element, "editable");
      } else if (expression === "to.be.readonly") {
        result = this.elementState(element, "editable");
        result.matches = !result.matches;
      } else if (expression === "to.be.empty") {
        if (element.nodeName === "INPUT" || element.nodeName === "TEXTAREA") {
          const value = element.value;
          result = { matches: !value, received: value ? "notEmpty" : "empty" };
        } else {
          const text = (_a = element.textContent) == null ? void 0 : _a.trim();
          result = { matches: !text, received: text ? "notEmpty" : "empty" };
        }
      } else if (expression === "to.be.enabled") {
        result = this.elementState(element, "enabled");
      } else if (expression === "to.be.focused") {
        const focused = this._activelyFocused(element).isFocused;
        result = {
          matches: focused,
          received: focused ? "focused" : "inactive"
        };
      } else if (expression === "to.be.hidden") {
        result = this.elementState(element, "hidden");
      } else if (expression === "to.be.visible") {
        result = this.elementState(element, "visible");
      } else if (expression === "to.be.attached") {
        result = {
          matches: true,
          received: "attached"
        };
      } else if (expression === "to.be.detached") {
        result = {
          matches: false,
          received: "attached"
        };
      }
      if (result) {
        if (result.received === "error:notconnected")
          throw this.createStacklessError("Element is not connected");
        return result;
      }
    }
    {
      if (expression === "to.have.property") {
        let target = element;
        const properties = options.expressionArg.split(".");
        for (let i = 0; i < properties.length - 1; i++) {
          if (typeof target !== "object" || !(properties[i] in target))
            return { received: void 0, matches: false };
          target = target[properties[i]];
        }
        const received = target[properties[properties.length - 1]];
        const matches = deepEquals(received, options.expectedValue);
        return { received, matches };
      }
    }
    {
      if (expression === "to.be.in.viewport") {
        const ratio = await this.viewportRatio(element);
        return { received: \`viewport ratio \${ratio}\`, matches: ratio > 0 && ratio > ((_b = options.expectedNumber) != null ? _b : 0) - 1e-9 };
      }
    }
    {
      if (expression === "to.have.values") {
        element = this.retarget(element, "follow-label");
        if (element.nodeName !== "SELECT" || !element.multiple)
          throw this.createStacklessError("Not a select element with a multiple attribute");
        const received = [...element.selectedOptions].map((o) => o.value);
        if (received.length !== options.expectedText.length)
          return { received, matches: false };
        return { received, matches: received.map((r, i) => new ExpectedTextMatcher(options.expectedText[i]).matches(r)).every(Boolean) };
      }
    }
    {
      if (expression === "to.match.aria") {
        const result = matchesAriaTree(element, options.expectedValue);
        return {
          received: result.received,
          matches: !!result.matches.length
        };
      }
    }
    {
      let received;
      if (expression === "to.have.attribute.value") {
        const value = element.getAttribute(options.expressionArg);
        if (value === null)
          return { received: null, matches: false };
        received = value;
      } else if (["to.have.class", "to.contain.class"].includes(expression)) {
        if (!options.expectedText)
          throw this.createStacklessError("Expected text is not provided for " + expression);
        return {
          received: element.classList.toString(),
          matches: new ExpectedTextMatcher(options.expectedText[0]).matchesClassList(
            this,
            element.classList,
            /* partial */
            expression === "to.contain.class"
          )
        };
      } else if (expression === "to.have.css") {
        received = this.window.getComputedStyle(element).getPropertyValue(options.expressionArg);
      } else if (expression === "to.have.id") {
        received = element.id;
      } else if (expression === "to.have.text") {
        received = options.useInnerText ? element.innerText : elementText(/* @__PURE__ */ new Map(), element).full;
      } else if (expression === "to.have.accessible.name") {
        received = getElementAccessibleName(
          element,
          false
          /* includeHidden */
        );
      } else if (expression === "to.have.accessible.description") {
        received = getElementAccessibleDescription(
          element,
          false
          /* includeHidden */
        );
      } else if (expression === "to.have.accessible.error.message") {
        received = getElementAccessibleErrorMessage(element);
      } else if (expression === "to.have.role") {
        received = getAriaRole(element) || "";
      } else if (expression === "to.have.value") {
        element = this.retarget(element, "follow-label");
        if (element.nodeName !== "INPUT" && element.nodeName !== "TEXTAREA" && element.nodeName !== "SELECT")
          throw this.createStacklessError("Not an input element");
        received = element.value;
      }
      if (received !== void 0 && options.expectedText) {
        const matcher = new ExpectedTextMatcher(options.expectedText[0]);
        return { received, matches: matcher.matches(received) };
      }
    }
    throw this.createStacklessError("Unknown expect matcher: " + expression);
  }
  expectArray(elements, options) {
    const expression = options.expression;
    if (expression === "to.have.count") {
      const received2 = elements.length;
      const matches2 = received2 === options.expectedNumber;
      return { received: received2, matches: matches2 };
    }
    if (!options.expectedText)
      throw this.createStacklessError("Expected text is not provided for " + expression);
    if (["to.have.class.array", "to.contain.class.array"].includes(expression)) {
      const receivedClassLists = elements.map((e) => e.classList);
      const received2 = receivedClassLists.map(String);
      if (receivedClassLists.length !== options.expectedText.length)
        return { received: received2, matches: false };
      const matches2 = this._matchSequentially(
        options.expectedText,
        receivedClassLists,
        (matcher, r) => matcher.matchesClassList(
          this,
          r,
          /* partial */
          expression === "to.contain.class.array"
        )
      );
      return {
        received: received2,
        matches: matches2
      };
    }
    if (!["to.contain.text.array", "to.have.text.array"].includes(expression))
      throw this.createStacklessError("Unknown expect matcher: " + expression);
    const received = elements.map((e) => options.useInnerText ? e.innerText : elementText(/* @__PURE__ */ new Map(), e).full);
    const lengthShouldMatch = expression !== "to.contain.text.array";
    const matchesLength = received.length === options.expectedText.length || !lengthShouldMatch;
    if (!matchesLength)
      return { received, matches: false };
    const matches = this._matchSequentially(options.expectedText, received, (matcher, r) => matcher.matches(r));
    return { received, matches };
  }
  _matchSequentially(expectedText, received, matchFn) {
    const matchers = expectedText.map((e) => new ExpectedTextMatcher(e));
    let mIndex = 0;
    let rIndex = 0;
    while (mIndex < matchers.length && rIndex < received.length) {
      if (matchFn(matchers[mIndex], received[rIndex]))
        ++mIndex;
      ++rIndex;
    }
    return mIndex === matchers.length;
  }
};
function oneLine(s) {
  return s.replace(/\\n/g, "\\u21B5").replace(/\\t/g, "\\u21C6");
}
function cssUnquote(s) {
  s = s.substring(1, s.length - 1);
  if (!s.includes("\\\\"))
    return s;
  const r = [];
  let i = 0;
  while (i < s.length) {
    if (s[i] === "\\\\" && i + 1 < s.length)
      i++;
    r.push(s[i++]);
  }
  return r.join("");
}
function createTextMatcher(selector, internal) {
  if (selector[0] === "/" && selector.lastIndexOf("/") > 0) {
    const lastSlash = selector.lastIndexOf("/");
    const re = new RegExp(selector.substring(1, lastSlash), selector.substring(lastSlash + 1));
    return { matcher: (elementText2) => re.test(elementText2.full), kind: "regex" };
  }
  const unquote = internal ? JSON.parse.bind(JSON) : cssUnquote;
  let strict = false;
  if (selector.length > 1 && selector[0] === '"' && selector[selector.length - 1] === '"') {
    selector = unquote(selector);
    strict = true;
  } else if (internal && selector.length > 1 && selector[0] === '"' && selector[selector.length - 2] === '"' && selector[selector.length - 1] === "i") {
    selector = unquote(selector.substring(0, selector.length - 1));
    strict = false;
  } else if (internal && selector.length > 1 && selector[0] === '"' && selector[selector.length - 2] === '"' && selector[selector.length - 1] === "s") {
    selector = unquote(selector.substring(0, selector.length - 1));
    strict = true;
  } else if (selector.length > 1 && selector[0] === "'" && selector[selector.length - 1] === "'") {
    selector = unquote(selector);
    strict = true;
  }
  selector = normalizeWhiteSpace(selector);
  if (strict) {
    if (internal)
      return { kind: "strict", matcher: (elementText2) => elementText2.normalized === selector };
    const strictTextNodeMatcher = (elementText2) => {
      if (!selector && !elementText2.immediate.length)
        return true;
      return elementText2.immediate.some((s) => normalizeWhiteSpace(s) === selector);
    };
    return { matcher: strictTextNodeMatcher, kind: "strict" };
  }
  selector = selector.toLowerCase();
  return { kind: "lax", matcher: (elementText2) => elementText2.normalized.toLowerCase().includes(selector) };
}
var ExpectedTextMatcher = class {
  constructor(expected) {
    this._normalizeWhiteSpace = expected.normalizeWhiteSpace;
    this._ignoreCase = expected.ignoreCase;
    this._string = expected.matchSubstring ? void 0 : this.normalize(expected.string);
    this._substring = expected.matchSubstring ? this.normalize(expected.string) : void 0;
    if (expected.regexSource) {
      const flags = new Set((expected.regexFlags || "").split(""));
      if (expected.ignoreCase === false)
        flags.delete("i");
      if (expected.ignoreCase === true)
        flags.add("i");
      this._regex = new RegExp(expected.regexSource, [...flags].join(""));
    }
  }
  matches(text) {
    if (!this._regex)
      text = this.normalize(text);
    if (this._string !== void 0)
      return text === this._string;
    if (this._substring !== void 0)
      return text.includes(this._substring);
    if (this._regex)
      return !!this._regex.test(text);
    return false;
  }
  matchesClassList(injectedScript, classList, partial) {
    if (partial) {
      if (this._regex)
        throw injectedScript.createStacklessError("Partial matching does not support regular expressions. Please provide a string value.");
      return this._string.split(/\\s+/g).filter(Boolean).every((className) => classList.contains(className));
    }
    return this.matches(classList.toString());
  }
  normalize(s) {
    if (!s)
      return s;
    if (this._normalizeWhiteSpace)
      s = normalizeWhiteSpace(s);
    if (this._ignoreCase)
      s = s.toLocaleLowerCase();
    return s;
  }
};
function deepEquals(a, b) {
  if (a === b)
    return true;
  if (a && b && typeof a === "object" && typeof b === "object") {
    if (a.constructor !== b.constructor)
      return false;
    if (Array.isArray(a)) {
      if (a.length !== b.length)
        return false;
      for (let i = 0; i < a.length; ++i) {
        if (!deepEquals(a[i], b[i]))
          return false;
      }
      return true;
    }
    if (a instanceof RegExp)
      return a.source === b.source && a.flags === b.flags;
    if (a.valueOf !== Object.prototype.valueOf)
      return a.valueOf() === b.valueOf();
    if (a.toString !== Object.prototype.toString)
      return a.toString() === b.toString();
    const keys = Object.keys(a);
    if (keys.length !== Object.keys(b).length)
      return false;
    for (let i = 0; i < keys.length; ++i) {
      if (!b.hasOwnProperty(keys[i]))
        return false;
    }
    for (const key of keys) {
      if (!deepEquals(a[key], b[key]))
        return false;
    }
    return true;
  }
  if (typeof a === "number" && typeof b === "number")
    return isNaN(a) && isNaN(b);
  return false;
}
`;return Gl}var Jl,y_;function hi(){if(y_)return Jl;y_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(p,O)=>{for(var z in O)r(p,z,{get:O[z],enumerable:!0})},P=(p,O,z,$)=>{if(O&&typeof O=="object"||typeof O=="function")for(let q of E(O))!V.call(p,q)&&q!==z&&r(p,q,{get:()=>O[q],enumerable:!($=i(O,q))||$.enumerable});return p},e=(p,O,z)=>(z=p!=null?t(R(p)):{},P(!p||!p.__esModule?r(z,"default",{value:p,enumerable:!0}):z,p)),U=p=>P(r({},"__esModule",{value:!0}),p),C={};te(C,{ElementHandle:()=>s,FrameExecutionContext:()=>a,NonRecoverableDOMError:()=>d,assertDone:()=>h,isNonRecoverableDOMError:()=>v,kUnableToAdoptErrorMessage:()=>b,throwElementIsNotAttached:()=>o,throwRetargetableDOMError:()=>n}),Jl=U(C);var w=e(Je),g=e(Oi()),u=nr(),_=ny(),f=e(_O());class d extends Error{}function v(p){return p instanceof d}class a extends g.ExecutionContext{constructor(O,z,$){super(z,O,$||"content-script"),this.frame=z,this.world=$}adoptIfNeeded(O){return O instanceof s&&O._context!==this?this.frame._page.delegate.adoptElementHandle(O,this):null}async evaluate(O,z){return g.evaluate(this,!0,O,z)}async evaluateHandle(O,z){return g.evaluate(this,!1,O,z)}async evaluateExpression(O,z,$){return g.evaluateExpression(this,O,{...z,returnByValue:!0},$)}async evaluateExpressionHandle(O,z,$){return g.evaluateExpression(this,O,{...z,returnByValue:!1},$)}injectedScript(){if(!this._injectedScriptPromise){const O=[],z=this.frame._page.browserContext.selectors();for(const[le,{source:_e}]of z._engines)O.push({name:le,source:`(${_e})`});const $=this.frame._page.browserContext._browser.sdkLanguage(),q={isUnderTest:(0,u.isUnderTest)(),sdkLanguage:$,testIdAttributeName:z.testIdAttributeName(),stableRafCount:this.frame._page.delegate.rafCountForStablePosition(),browserName:this.frame._page.browserContext._browser.options.name,customEngines:O},J=`
        (() => {
        const module = {};
        ${f.source}
        return new (module.exports.InjectedScript())(globalThis, ${JSON.stringify(q)});
        })();
      `;this._injectedScriptPromise=this.rawEvaluateHandle(J).then(le=>(le._setPreview("InjectedScript"),le))}return this._injectedScriptPromise}}class s extends g.JSHandle{constructor(O,z){super(O,"node",void 0,z),this.__elementhandle=!0,this._page=O.frame._page,this._frame=O.frame,this._initializePreview().catch($=>{})}async _initializePreview(){const O=await this._context.injectedScript();this._setPreview(await O.evaluate((z,$)=>"JSHandle@"+z.previewNode($),this))}asElement(){return this}async evaluateInUtility(O,z){try{const $=await this._frame._utilityContext();return await $.evaluate(O,[await $.injectedScript(),this,z])}catch($){if(this._frame.isNonRetriableError($))throw $;return"error:notconnected"}}async evaluateHandleInUtility(O,z){try{const $=await this._frame._utilityContext();return await $.evaluateHandle(O,[await $.injectedScript(),this,z])}catch($){if(this._frame.isNonRetriableError($))throw $;return"error:notconnected"}}async ownerFrame(){const O=await this._page.delegate.getOwnerFrame(this);if(!O)return null;const z=this._page.frameManager.frame(O);if(z)return z;for(const $ of this._page.browserContext.pages()){const q=$.frameManager.frame(O);if(q)return q}return null}async isIframeElement(){return this.evaluateInUtility(([O,z])=>z&&(z.nodeName==="IFRAME"||z.nodeName==="FRAME"),{})}async contentFrame(){return n(await this.isIframeElement())?this._page.delegate.getContentFrame(this):null}async getAttribute(O,z){return this._frame.getAttribute(O,":scope",z,{},this)}async inputValue(O){return this._frame.inputValue(O,":scope",{},this)}async textContent(O){return this._frame.textContent(O,":scope",{},this)}async innerText(O){return this._frame.innerText(O,":scope",{},this)}async innerHTML(O){return this._frame.innerHTML(O,":scope",{},this)}async dispatchEvent(O,z,$={}){return this._frame.dispatchEvent(O,":scope",z,$,{},this)}async _scrollRectIntoViewIfNeeded(O,z){return await O.race(this._page.delegate.scrollRectIntoViewIfNeeded(this,z))}async _waitAndScrollIntoViewIfNeeded(O,z){const $=await this._retryAction(O,"scroll into view",async()=>{O.log("  waiting for element to be stable");const q=await O.race(this.evaluateInUtility(async([J,le,{waitForVisible:_e}])=>await J.checkElementStates(le,_e?["visible","stable"]:["stable"]),{waitForVisible:z}));return q||await this._scrollRectIntoViewIfNeeded(O)},{});n($)}async scrollIntoViewIfNeeded(O){await this._waitAndScrollIntoViewIfNeeded(O,!1)}async _clickablePoint(){const O=le=>le.map(_e=>({x:Math.min(Math.max(_e.x,0),q.width),y:Math.min(Math.max(_e.y,0),q.height)})),z=le=>{let _e=0;for(let ge=0;ge<le.length;++ge){const ne=le[ge],S=le[(ge+1)%le.length];_e+=(ne.x*S.y-S.x*ne.y)/2}return Math.abs(_e)},[$,q]=await Promise.all([this._page.delegate.getContentQuads(this),this._page.mainFrame()._utilityContext().then(le=>le.evaluate(()=>({width:innerWidth,height:innerHeight})))]);if($==="error:notconnected")return $;if(!$||!$.length)return"error:notvisible";const J=$.map(le=>O(le)).filter(le=>z(le)>.99);if(!J.length)return"error:notinviewport";if(this._page.browserContext._browser.options.name==="firefox")for(const le of J){const _e=T(le);if(_e)return _e}return c(J[0])}async _offsetPoint(O){const[z,$]=await Promise.all([this.boundingBox(),this.evaluateInUtility(([q,J])=>q.getElementBorderWidth(J),{}).catch(q=>{})]);return!z||!$?"error:notvisible":$==="error:notconnected"?$:{x:z.x+$.left+O.x,y:z.y+$.top+O.y}}async _retryAction(O,z,$,q){let J=0;const le=[0,20,100,100,500];for(;;){if(J){O.log(`retrying ${z} action${q.trial?" (trial run)":""}`);const ge=le[Math.min(J-1,le.length-1)];if(ge){O.log(`  waiting ${ge}ms`);const ne=await O.race(this.evaluateInUtility(([S,j,y])=>new Promise(I=>setTimeout(I,y)),ge));if(ne==="error:notconnected")return ne}}else O.log(`attempting ${z} action${q.trial?" (trial run)":""}`);!q.skipActionPreChecks&&!q.force&&await this._frame._page.performActionPreChecks(O);const _e=await $(J);if(++J,_e==="error:notvisible"){if(q.force)throw new d("Element is not visible");O.log("  element is not visible");continue}if(_e==="error:notinviewport"){if(q.force)throw new d("Element is outside of the viewport");O.log("  element is outside of the viewport");continue}if(_e==="error:optionsnotfound"){O.log("  did not find some options");continue}if(_e==="error:optionnotenabled"){O.log("  option being selected is not enabled");continue}if(typeof _e=="object"&&"hitTargetDescription"in _e){O.log(`  ${_e.hitTargetDescription} intercepts pointer events`);continue}if(typeof _e=="object"&&"missingState"in _e){O.log(`  element is not ${_e.missingState}`);continue}return _e}}async _retryPointerAction(O,z,$,q,J){const le=z==="move and up";return await this._retryAction(O,z,async _e=>{const ge=[void 0,{block:"end",inline:"end"},{block:"center",inline:"center"},{block:"start",inline:"start"}],ne=ge[_e%ge.length];return await this._performPointerAction(O,z,$,q,ne,J)},{...J,skipActionPreChecks:le})}async _performPointerAction(O,z,$,q,J,le){const{force:_e=!1,position:ge}=le,ne=async()=>J?await this.evaluateInUtility(([ie,he,me])=>(he.nodeType===1&&he.scrollIntoView(me),"done"),J):await this._scrollRectIntoViewIfNeeded(O,ge?{x:ge.x,y:ge.y,width:0,height:0}:void 0);if(this._frame.parentFrame()&&await O.race(ne().catch(()=>{})),le.__testHookBeforeStable&&await O.race(le.__testHookBeforeStable()),!_e){const ie=$?["visible","enabled","stable"]:["visible","stable"];O.log(`  waiting for element to be ${$?"visible, enabled and stable":"visible and stable"}`);const he=await O.race(this.evaluateInUtility(async([me,ye,{elementStates:Se}])=>await me.checkElementStates(ye,Se),{elementStates:ie}));if(he)return he;O.log(`  element is ${$?"visible, enabled and stable":"visible and stable"}`)}le.__testHookAfterStable&&await O.race(le.__testHookAfterStable()),O.log("  scrolling into view if needed");const S=await O.race(ne());if(S!=="done")return S;O.log("  done scrolling");const j=ge?await O.race(this._offsetPoint(ge)):await O.race(this._clickablePoint());if(typeof j=="string")return j;const y=m(j);O.metadata.point=y,await O.race(this.instrumentation.onBeforeInputAction(this,O.metadata));let I;if(_e)O.log("  forcing action");else{le.__testHookBeforeHitTarget&&await O.race(le.__testHookBeforeHitTarget());const ie=await O.race(this._checkFrameIsHitTarget(y));if(ie==="error:notconnected"||"hitTargetDescription"in ie)return ie;const he=ie.framePoint,me=z==="move and up"?"drag":z==="hover"||z==="tap"?z:"mouse",ye=await O.race(this.evaluateHandleInUtility(([Se,Oe,{actionType:Pe,hitPoint:Ne,trial:Le}])=>Se.setupHitTargetInterceptor(Oe,Pe,Ne,Le),{actionType:me,hitPoint:he,trial:!!le.trial}));if(ye==="error:notconnected")return ye;if(!ye._objectId){const Se=ye.rawValue();return Se==="error:notconnected"?Se:{hitTargetDescription:Se}}I=ye,O.cleanupWhenAborted(()=>{I.evaluate(Se=>Se.stop()).catch(Se=>{}),I.dispose()})}const D=await this._page.frameManager.waitForSignalsCreatedBy(O,le.waitAfter===!0,async()=>{le.__testHookBeforePointerAction&&await O.race(le.__testHookBeforePointerAction());let ie;if(le&&le.modifiers&&(ie=await this._page.keyboard.ensureModifiers(O,le.modifiers)),O.log(`  performing ${z} action`),await q(y),ie&&await this._page.keyboard.ensureModifiers(O,ie),I){const he=this._frame.raceAgainstEvaluationStallingEvents(()=>I.evaluate(me=>me.stop())).catch(me=>"done").finally(()=>{I==null||I.dispose()});if(le.waitAfter!==!1){const me=await O.race(he);if(me!=="done")return me}}return O.log(`  ${le.trial?"trial ":""}${z} action done`),O.log("  waiting for scheduled navigations to finish"),le.__testHookAfterPointerAction&&await O.race(le.__testHookAfterPointerAction()),"done"});return D!=="done"?D:(O.log("  navigations have finished"),"done")}async _markAsTargetElement(O){O.metadata.id&&await O.race(this.evaluateInUtility(([z,$,q])=>{$.nodeType===1&&z.markTargetElements(new Set([$]),q)},O.metadata.id))}async hover(O,z){await this._markAsTargetElement(O);const $=await this._hover(O,z);return n($),void 0}_hover(O,z){return this._retryPointerAction(O,"hover",!1,$=>this._page.mouse.move(O,$.x,$.y),{...z,waitAfter:"disabled"})}async click(O,z){await this._markAsTargetElement(O);const $=await this._click(O,{...z,waitAfter:!z.noWaitAfter});return n($),void 0}_click(O,z){return this._retryPointerAction(O,"click",!0,$=>this._page.mouse.click(O,$.x,$.y,z),z)}async dblclick(O,z){await this._markAsTargetElement(O);const $=await this._dblclick(O,z);return n($),void 0}_dblclick(O,z){return this._retryPointerAction(O,"dblclick",!0,$=>this._page.mouse.click(O,$.x,$.y,{...z,clickCount:2}),{...z,waitAfter:"disabled"})}async tap(O,z){await this._markAsTargetElement(O);const $=await this._tap(O,z);return n($),void 0}_tap(O,z){return this._retryPointerAction(O,"tap",!0,$=>this._page.touchscreen.tap(O,$.x,$.y),{...z,waitAfter:"disabled"})}async selectOption(O,z,$,q){await this._markAsTargetElement(O);const J=await this._selectOption(O,z,$,q);return n(J)}async _selectOption(O,z,$,q){let J=[];const le=await this._retryAction(O,"select option",async()=>{await O.race(this.instrumentation.onBeforeInputAction(this,O.metadata)),q.force||O.log("  waiting for element to be visible and enabled");const _e=[...z,...$],ge=await O.race(this.evaluateInUtility(async([ne,S,{optionsToSelect:j,force:y}])=>{if(!y){const I=await ne.checkElementStates(S,["visible","enabled"]);if(I)return I}return ne.selectOptions(S,j)},{optionsToSelect:_e,force:q.force}));return Array.isArray(ge)?(O.log("  selected specified option(s)"),J=ge,"done"):ge},q);return le==="error:notconnected"?le:J}async fill(O,z,$){await this._markAsTargetElement(O);const q=await this._fill(O,z,$);n(q)}async _fill(O,z,$){return O.log(`  fill("${z}")`),await this._retryAction(O,"fill",async()=>{await O.race(this.instrumentation.onBeforeInputAction(this,O.metadata)),$.force||O.log("  waiting for element to be visible, enabled and editable");const q=await O.race(this.evaluateInUtility(async([J,le,{value:_e,force:ge}])=>{if(!ge){const ne=await J.checkElementStates(le,["visible","enabled","editable"]);if(ne)return ne}return J.fill(le,_e)},{value:z,force:$.force}));return q==="needsinput"?(z?await this._page.keyboard.insertText(O,z):await this._page.keyboard.press(O,"Delete"),"done"):q},$)}async selectText(O,z){const $=await this._retryAction(O,"selectText",async()=>(z.force||O.log("  waiting for element to be visible"),await O.race(this.evaluateInUtility(async([q,J,{force:le}])=>{if(!le){const _e=await q.checkElementStates(J,["visible"]);if(_e)return _e}return q.selectText(J)},{force:z.force}))),z);n($)}async setInputFiles(O,z){const $=await O.race((0,_.prepareFilesForUpload)(this._frame,z));await this._markAsTargetElement(O);const q=await this._setInputFiles(O,$);return n(q),void 0}async _setInputFiles(O,z){const{filePayloads:$,localPaths:q,localDirectory:J}=z,le=$&&$.length>1||q&&q.length>1,_e=await O.race(this.evaluateHandleInUtility(([ne,S,{multiple:j,directoryUpload:y}])=>{const I=ne.retarget(S,"follow-label");if(!I)return;if(I.tagName!=="INPUT")throw ne.createStacklessError("Node is not an HTMLInputElement");const D=I;if(j&&!D.multiple&&!D.webkitdirectory)throw ne.createStacklessError("Non-multiple file input can only accept single file");if(y&&!D.webkitdirectory)throw ne.createStacklessError("File input does not support directories, pass individual files instead");if(!y&&D.webkitdirectory)throw ne.createStacklessError("[webkitdirectory] input requires passing a path to a directory");return D},{multiple:le,directoryUpload:!!J}));if(_e==="error:notconnected"||!_e.asElement())return"error:notconnected";const ge=_e.asElement();if(await O.race(this.instrumentation.onBeforeInputAction(this,O.metadata)),q||J){const ne=J?[J]:q;await O.race(Promise.all(ne.map(j=>w.default.promises.access(j,w.default.constants.F_OK))));const S=J?this.evaluate(j=>new Promise(y=>{j.addEventListener("input",y,{once:!0})})).catch(()=>{}):Promise.resolve();await O.race(this._page.delegate.setInputFilePaths(ge,ne)),await O.race(S)}else await O.race(ge.evaluateInUtility(([ne,S,j])=>ne.setInputFiles(S,j),$));return"done"}async focus(O){await this._markAsTargetElement(O);const z=await this._focus(O);return n(z),void 0}async _focus(O,z){return await O.race(this.evaluateInUtility(([$,q,J])=>$.focusNode(q,J),z))}async _blur(O){return await O.race(this.evaluateInUtility(([z,$])=>z.blurNode($),{}))}async type(O,z,$){await this._markAsTargetElement(O);const q=await this._type(O,z,$);return n(q),void 0}async _type(O,z,$){O.log(`elementHandle.type("${z}")`),await O.race(this.instrumentation.onBeforeInputAction(this,O.metadata));const q=await this._focus(O,!0);return q!=="done"?q:(await this._page.keyboard.type(O,z,$),"done")}async press(O,z,$){await this._markAsTargetElement(O);const q=await this._press(O,z,$);return n(q),void 0}async _press(O,z,$){return O.log(`elementHandle.press("${z}")`),await O.race(this.instrumentation.onBeforeInputAction(this,O.metadata)),this._page.frameManager.waitForSignalsCreatedBy(O,!$.noWaitAfter,async()=>{const q=await this._focus(O,!0);return q!=="done"?q:(await this._page.keyboard.press(O,z,$),"done")})}async check(O,z){const $=await this._setChecked(O,!0,z);return n($),void 0}async uncheck(O,z){const $=await this._setChecked(O,!1,z);return n($),void 0}async _setChecked(O,z,$){const q=async()=>{const le=await O.race(this.evaluateInUtility(([_e,ge])=>_e.elementState(ge,"checked"),{}));return(le==="error:notconnected"||le.received==="error:notconnected")&&o(),le.matches};if(await this._markAsTargetElement(O),await q()===z)return"done";const J=await this._click(O,{...$,waitAfter:"disabled"});if(J!=="done")return J;if($.trial)return"done";if(await q()!==z)throw new d("Clicking the checkbox did not change its state");return"done"}async boundingBox(){return this._page.delegate.getBoundingBox(this)}async ariaSnapshot(O){return await this.evaluateInUtility(([z,$,q])=>z.ariaSnapshot($,q),O)}async screenshot(O,z){return await this._page.screenshotter.screenshotElement(O,this,z)}async querySelector(O,z){return this._frame.selectors.query(O,z,this)}async querySelectorAll(O){return this._frame.selectors.queryAll(O,this)}async evalOnSelector(O,z,$,q,J){return this._frame.evalOnSelector(O,z,$,q,J,this)}async evalOnSelectorAll(O,z,$,q){return this._frame.evalOnSelectorAll(O,z,$,q,this)}async isVisible(O){return this._frame.isVisible(O,":scope",{},this)}async isHidden(O){return this._frame.isHidden(O,":scope",{},this)}async isEnabled(O){return this._frame.isEnabled(O,":scope",{},this)}async isDisabled(O){return this._frame.isDisabled(O,":scope",{},this)}async isEditable(O){return this._frame.isEditable(O,":scope",{},this)}async isChecked(O){return this._frame.isChecked(O,":scope",{},this)}async waitForElementState(O,z){const $=`wait for ${z}`,q=await this._retryAction(O,$,async()=>await O.race(this.evaluateInUtility(async([J,le,_e])=>await J.checkElementStates(le,[_e])||"done",z)),{});n(q)}async waitForSelector(O,z,$){return await this._frame.waitForSelector(O,z,!0,$,this)}async _adoptTo(O){if(this._context!==O){const z=await this._page.delegate.adoptElementHandle(this,O);return this.dispose(),z}return this}async _checkFrameIsHitTarget(O){let z=this._frame;const $=[];for(;z.parentFrame();){const q=await z.frameElement(),J=await q.boundingBox(),le=await q.evaluateInUtility(([ge,ne])=>ge.describeIFrameStyle(ne),{}).catch(ge=>"error:notconnected");if(!J||le==="error:notconnected")return"error:notconnected";if(le==="transformed")return{framePoint:void 0};const _e={x:O.x-J.x-le.left,y:O.y-J.y-le.top};$.push({frame:z,frameElement:q,pointInFrame:_e}),z=z.parentFrame()}$.push({frame:z,frameElement:null,pointInFrame:O});for(let q=$.length-1;q>0;q--){const J=$[q-1].frameElement,le=$[q].pointInFrame,_e=await J.evaluateInUtility(([ge,ne,S])=>ge.expectHitTarget(S,ne),le);if(_e!=="done")return _e}return{framePoint:$[0].pointInFrame}}}function n(p){return p==="error:notconnected"&&o(),p}function o(){throw new Error("Element is not attached to the DOM")}function h(p){}function m(p){return{x:(p.x*100|0)/100,y:(p.y*100|0)/100}}function c(p){const O={x:0,y:0};for(const z of p)O.x+=z.x/4,O.y+=z.y/4;return O}function l(p,O,z){return Math.abs(p.x*(O.y-z.y)+O.x*(z.y-p.y)+z.x*(p.y-O.y))/2}function x(p,O){const z=l(p,O[0],O[1])+l(p,O[1],O[2])+l(p,O[2],O[3])+l(p,O[3],O[0]),$=l(O[0],O[1],O[2])+l(O[1],O[2],O[3]);return Math.abs(z-$)>.1?!1:p.x<Math.max(O[0].x,O[1].x,O[2].x,O[3].x)&&p.y<Math.max(O[0].y,O[1].y,O[2].y,O[3].y)}function T(p){const O=c(p);if(O.x=Math.floor(O.x),O.y=Math.floor(O.y),x(O,p)||(O.x+=1,x(O,p))||(O.y+=1,x(O,p))||(O.x-=1,x(O,p)))return O}const b="Unable to adopt element handle from a different document";return Jl}var Yl,S_;function bO(){if(S_)return Yl;S_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{FrameSelectors:()=>C}),Yl=te(P);var e=nr(),U=Vi();class C{constructor(u){this.frame=u}_parseSelector(u,_){const f=typeof(_==null?void 0:_.strict)=="boolean"?_.strict:!!this.frame._page.browserContext._options.strictSelectors;return this.frame._page.browserContext.selectors().parseSelector(u,f)}async query(u,_,f){const d=await this.resolveInjectedForSelector(u,_,f);if(!d)return null;const v=await d.injected.evaluateHandle((s,{info:n,scope:o})=>s.querySelector(n.parsed,o||document,n.strict),{info:d.info,scope:d.scope}),a=v.asElement();return a?w(a,await d.frame._mainContext()):(v.dispose(),null)}async queryArrayInMainWorld(u,_){const f=await this.resolveInjectedForSelector(u,{mainWorld:!0},_);if(!f)throw new Error(`Failed to find frame for selector "${u}"`);return await f.injected.evaluateHandle((d,{info:v,scope:a})=>d.querySelectorAll(v.parsed,a||document),{info:f.info,scope:f.scope})}async queryCount(u){const _=await this.resolveInjectedForSelector(u);if(!_)throw new Error(`Failed to find frame for selector "${u}"`);return await _.injected.evaluate((f,{info:d})=>f.querySelectorAll(d.parsed,document).length,{info:_.info})}async queryAll(u,_){const f=await this.resolveInjectedForSelector(u,{},_);if(!f)return[];const d=await f.injected.evaluateHandle((n,{info:o,scope:h})=>n.querySelectorAll(o.parsed,h||document),{info:f.info,scope:f.scope}),v=await d.getProperties();d.dispose();const a=await f.frame._mainContext(),s=[];for(const n of v.values()){const o=n.asElement();o?s.push(w(o,a)):n.dispose()}return Promise.all(s)}_jumpToAriaRefFrameIfNeeded(u,_,f){if(_.parsed.parts[0].name!=="aria-ref")return f;const v=_.parsed.parts[0].body.match(/^f(\d+)e\d+$/);if(!v)return f;const a=+v[1],s=this.frame._page,n=s.lastSnapshotFrameIds[a-1],o=n?s.frameManager.frame(n):null;if(!o)throw new U.InvalidSelectorError(`Invalid frame in aria-ref selector "${u}"`);return o}async resolveFrameForSelector(u,_={},f){let d=this.frame;const v=(0,U.splitSelectorByFrame)(u);for(const s of v)(0,U.visitAllSelectorParts)(s,(n,o)=>{if(o&&n.name==="internal:control"&&n.body==="enter-frame"){const h=(0,e.asLocator)(this.frame._page.browserContext._browser.sdkLanguage(),u);throw new U.InvalidSelectorError(`Frame locators are not allowed inside composite locators, while querying "${h}"`)}});for(let s=0;s<v.length-1;++s){const n=this._parseSelector(v[s],_);d=this._jumpToAriaRefFrameIfNeeded(u,n,d);const c=(await(await(await d._context(n.world)).injectedScript()).evaluateHandle((x,{info:T,scope:b,selectorString:p})=>{const O=x.querySelector(T.parsed,b||document,T.strict);if(O&&O.nodeName!=="IFRAME"&&O.nodeName!=="FRAME")throw x.createStacklessError(`Selector "${p}" resolved to ${x.previewNode(O)}, <iframe> was expected`);return O},{info:n,scope:s===0?f:void 0,selectorString:(0,U.stringifySelector)(n.parsed)})).asElement();if(!c)return null;const l=await d._page.delegate.getContentFrame(c);if(c.dispose(),!l)return null;d=l}d!==this.frame&&(f=void 0);const a=d.selectors._parseSelector(v[v.length-1],_);return d=this._jumpToAriaRefFrameIfNeeded(u,a,d),{frame:d,info:a,scope:f}}async resolveInjectedForSelector(u,_,f){const d=await this.resolveFrameForSelector(u,_,f);return d?{injected:await(await d.frame._context(_!=null&&_.mainWorld?"main":d.info.world)).injectedScript(),info:d.info,frame:d.frame,scope:d.scope}:void 0}}async function w(g,u){if(g._context===u)return g;const _=await g._page.delegate.adoptElementHandle(g,u);return g.dispose(),_}return Yl}var Xl,x_;function hn(){if(x_)return Xl;x_=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(_,f)=>{for(var d in f)r(_,d,{get:f[d],enumerable:!0})},te=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of E(f))!R.call(_,a)&&a!==d&&r(_,a,{get:()=>f[a],enumerable:!(v=i(f,a))||v.enumerable});return _},P=_=>te(r({},"__esModule",{value:!0}),_),e={};V(e,{helper:()=>u}),Xl=P(e);var U=Mr(),C=qr();const w=t.MAX_LOG_LENGTH?+t.MAX_LOG_LENGTH:1/0;class g{static completeUserURL(f){return(f.startsWith("localhost")||f.startsWith("127.0.0.1"))&&(f="http://"+f),f}static enclosingIntRect(f){const d=Math.floor(f.x+.001),v=Math.floor(f.y+.001),a=Math.ceil(f.x+f.width-.001),s=Math.ceil(f.y+f.height-.001);return{x:d,y:v,width:a-d,height:s-v}}static enclosingIntSize(f){return{width:Math.floor(f.width+.001),height:Math.floor(f.height+.001)}}static getViewportSizeFromWindowFeatures(f){const d=f.find(n=>n.startsWith("width=")),v=f.find(n=>n.startsWith("height=")),a=d?parseInt(d.substring(6),10):NaN,s=v?parseInt(v.substring(7),10):NaN;return!Number.isNaN(a)&&!Number.isNaN(s)?{width:a,height:s}:null}static waitForEvent(f,d,v,a){const s=[],n=new Promise((h,m)=>{s.push(C.eventsHelper.addEventListener(d,v,c=>{try{if(a&&!a(c))return;C.eventsHelper.removeEventListeners(s),h(c)}catch(l){C.eventsHelper.removeEventListeners(s),m(l)}}))}),o=()=>C.eventsHelper.removeEventListeners(s);return f.cleanupWhenAborted(o),{promise:f.race(n),dispose:o}}static secondsToRoundishMillis(f){return(f*1e6|0)/1e3}static millisToRoundishMillis(f){return(f*1e3|0)/1e3}static debugProtocolLogger(f){return(d,v)=>{if(f&&f(d,v),U.debugLogger.isEnabled("protocol")){let a=JSON.stringify(v);a.length>w&&(a=a.substring(0,w/2)+" <<<<<( LOG TRUNCATED )>>>>> "+a.substring(a.length-w/2)),U.debugLogger.log("protocol",(d==="send"?"SEND ► ":"◀ RECV ")+a)}}}static formatBrowserLogs(f,d){return!d&&!f.length?"":`
`+(d?d+`
`:"")+f.join(`
`)}}const u=g;return Xl}var Ql,E_;function fn(){if(E_)return Ql;E_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(b,p)=>{for(var O in p)t(b,O,{get:p[O],enumerable:!0})},V=(b,p,O,z)=>{if(p&&typeof p=="object"||typeof p=="function")for(let $ of i(p))!E.call(b,$)&&$!==O&&t(b,$,{get:()=>p[$],enumerable:!(z=r(p,$))||z.enumerable});return b},te=b=>V(t({},"__esModule",{value:!0}),b),P={};R(P,{Request:()=>s,Response:()=>o,Route:()=>n,WebSocket:()=>h,filterCookies:()=>u,isLocalHostname:()=>_,kMaxCookieExpiresDateInSeconds:()=>f,mergeHeaders:()=>x,parseURL:()=>v,rewriteCookies:()=>d,singleHeader:()=>l,statusText:()=>c,stripFragmentFromUrl:()=>a}),Ql=te(P);var e=nr(),U=Ir(),C=Fo(),w=Tr(),g=Fr();function u(b,p){const O=p.map(z=>new URL(z));return b.filter(z=>{if(!O.length)return!0;for(const $ of O){let q=z.domain;if(q.startsWith(".")||(q="."+q),!!("."+$.hostname).endsWith(q)&&$.pathname.startsWith(z.path)&&!($.protocol!=="https:"&&!_($.hostname)&&z.secure))return!0}return!1})}function _(b){return b==="localhost"||b.endsWith(".localhost")}const f=253402300799;function d(b){return b.map(p=>{(0,e.assert)(p.url||p.domain&&p.path,"Cookie should have a url or a domain/path pair"),(0,e.assert)(!(p.url&&p.domain),"Cookie should have either url or domain"),(0,e.assert)(!(p.url&&p.path),"Cookie should have either url or path"),(0,e.assert)(!(p.expires&&p.expires<0&&p.expires!==-1),"Cookie should have a valid expires, only -1 or a positive number for the unix timestamp in seconds is allowed"),(0,e.assert)(!(p.expires&&p.expires>0&&p.expires>f),"Cookie should have a valid expires, only -1 or a positive number for the unix timestamp in seconds is allowed");const O={...p};if(O.url){(0,e.assert)(O.url!=="about:blank",`Blank page can not have cookie "${p.name}"`),(0,e.assert)(!O.url.startsWith("data:"),`Data URL page can not have cookie "${p.name}"`);const z=new URL(O.url);O.domain=z.hostname,O.path=z.pathname.substring(0,z.pathname.lastIndexOf("/")+1),O.secure=z.protocol==="https:"}return O})}function v(b){try{return new URL(b)}catch{return null}}function a(b){return b.includes("#")?b.substring(0,b.indexOf("#")):b}class s extends w.SdkObject{constructor(p,O,z,$,q,J,le,_e,ge,ne){super(O||p,"request"),this._response=null,this._redirectedTo=null,this._failureText=null,this._headersMap=new Map,this._frame=null,this._serviceWorker=null,this._rawRequestHeadersPromise=new g.ManualPromise,this._waitForResponsePromise=new g.ManualPromise,this._responseEndTiming=-1,(0,e.assert)(!J.startsWith("data:"),"Data urls should not fire requests"),this._context=p,this._frame=O,this._serviceWorker=z,this._redirectedFrom=$,$&&($._redirectedTo=this),this._documentId=q,this._url=a(J),this._resourceType=le,this._method=_e,this._postData=ge,this._headers=ne,this._updateHeadersMap(),this._isFavicon=J.endsWith("/favicon.ico")||!!($!=null&&$._isFavicon)}_setFailureText(p){this._failureText=p,this._waitForResponsePromise.resolve(null)}_applyOverrides(p){return this._overrides={...this._overrides,...p},this._updateHeadersMap(),this._overrides}_updateHeadersMap(){for(const{name:p,value:O}of this.headers())this._headersMap.set(p.toLowerCase(),O)}overrides(){return this._overrides}url(){var p;return((p=this._overrides)==null?void 0:p.url)||this._url}resourceType(){return this._resourceType}method(){var p;return((p=this._overrides)==null?void 0:p.method)||this._method}postDataBuffer(){var p;return((p=this._overrides)==null?void 0:p.postData)||this._postData}headers(){var p;return((p=this._overrides)==null?void 0:p.headers)||this._headers}headerValue(p){return this._headersMap.get(p)}setRawRequestHeaders(p){this._rawRequestHeadersPromise.isDone()||this._rawRequestHeadersPromise.resolve(p||this._headers)}async rawRequestHeaders(){var p;return((p=this._overrides)==null?void 0:p.headers)||this._rawRequestHeadersPromise}response(){return this._waitForResponsePromise}_existingResponse(){return this._response}_setResponse(p){this._response=p,this._waitForResponsePromise.resolve(p)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}frame(){return this._frame}serviceWorker(){return this._serviceWorker}isNavigationRequest(){return!!this._documentId}redirectedFrom(){return this._redirectedFrom}failure(){return this._failureText===null?null:{errorText:this._failureText}}_setBodySize(p){this._bodySize=p}bodySize(){var p;return this._bodySize||((p=this.postDataBuffer())==null?void 0:p.length)||0}async requestHeadersSize(){let p=4;p+=this.method().length,p+=new URL(this.url()).pathname.length,p+=8;const O=await this.rawRequestHeaders();for(const z of O)p+=z.name.length+z.value.length+4;return p}}class n extends w.SdkObject{constructor(p,O){super(p._frame||p._context,"route"),this._handled=!1,this._futureHandlers=[],this._request=p,this._delegate=O,this._request._context.addRouteInFlight(this)}handle(p){this._futureHandlers=[...p],this.continue({isFallback:!0}).catch(()=>{})}async removeHandler(p){if(this._futureHandlers=this._futureHandlers.filter(O=>O!==p),p===this._currentHandler){await this.continue({isFallback:!0}).catch(()=>{});return}}request(){return this._request}async abort(p="failed"){this._startHandling(),this._request._context.emit(U.BrowserContext.Events.RequestAborted,this._request),await this._delegate.abort(p),this._endHandling()}redirectNavigationRequest(p){this._startHandling(),(0,e.assert)(this._request.isNavigationRequest()),this._request.frame().redirectNavigation(p,this._request._documentId,this._request.headerValue("referer")),this._endHandling()}async fulfill(p){this._startHandling();let O=p.body,z=p.isBase64||!1;if(O===void 0)if(p.fetchResponseUid){const q=this._request._context.fetchRequest.fetchResponses.get(p.fetchResponseUid)||C.APIRequestContext.findResponseBody(p.fetchResponseUid);(0,e.assert)(q,"Fetch response has been disposed"),O=q.toString("base64"),z=!0}else O="",z=!1;const $=[...p.headers||[]];this._maybeAddCorsHeaders($),this._request._context.emit(U.BrowserContext.Events.RequestFulfilled,this._request),await this._delegate.fulfill({status:p.status||200,headers:$,body:O,isBase64:z}),this._endHandling()}_maybeAddCorsHeaders(p){const O=this._request.headerValue("origin");if(!O)return;const z=new URL(this._request.url());!z.protocol.startsWith("http")||z.origin===O.trim()||p.find(({name:q})=>q==="access-control-allow-origin")||(p.push({name:"access-control-allow-origin",value:O}),p.push({name:"access-control-allow-credentials",value:"true"}),p.push({name:"vary",value:"Origin"}))}async continue(p){var z;if(p.url){const $=new URL(p.url);if(new URL(this._request.url()).protocol!==$.protocol)throw new Error("New URL must have same protocol as overridden URL")}p.headers&&(p.headers=(z=p.headers)==null?void 0:z.filter($=>$.name.toLowerCase()!=="cookie")),p=this._request._applyOverrides(p);const O=this._futureHandlers.shift();if(O){this._currentHandler=O,O(this,this._request);return}p.isFallback||this._request._context.emit(U.BrowserContext.Events.RequestContinued,this._request),this._startHandling(),await this._delegate.continue(p),this._endHandling()}_startHandling(){(0,e.assert)(!this._handled,"Route is already handled!"),this._handled=!0,this._currentHandler=void 0}_endHandling(){this._futureHandlers=[],this._currentHandler=void 0,this._request._context.removeRouteInFlight(this)}}class o extends w.SdkObject{constructor(p,O,z,$,q,J,le,_e){super(p.frame()||p._context,"response"),this._contentPromise=null,this._finishedPromise=new g.ManualPromise,this._headersMap=new Map,this._serverAddrPromise=new g.ManualPromise,this._securityDetailsPromise=new g.ManualPromise,this._rawResponseHeadersPromise=new g.ManualPromise,this._encodedBodySizePromise=new g.ManualPromise,this._transferSizePromise=new g.ManualPromise,this._responseHeadersSizePromise=new g.ManualPromise,this._request=p,this._timing=q,this._status=O,this._statusText=z,this._url=p.url(),this._headers=$;for(const{name:ge,value:ne}of this._headers)this._headersMap.set(ge.toLowerCase(),ne);this._getResponseBodyCallback=J,this._request._setResponse(this),this._httpVersion=_e,this._fromServiceWorker=le}_serverAddrFinished(p){this._serverAddrPromise.resolve(p)}_securityDetailsFinished(p){this._securityDetailsPromise.resolve(p)}_requestFinished(p){this._request._responseEndTiming=Math.max(p,this._timing.responseStart),this._timing.requestStart===-1&&(this._timing.requestStart=this._request._responseEndTiming),this._finishedPromise.resolve()}_setHttpVersion(p){this._httpVersion=p}url(){return this._url}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}headerValue(p){return this._headersMap.get(p)}async rawResponseHeaders(){return this._rawResponseHeadersPromise}setRawResponseHeaders(p){this._rawResponseHeadersPromise.isDone()||this._rawResponseHeadersPromise.resolve(p||this._headers)}setTransferSize(p){this._transferSizePromise.resolve(p)}setEncodedBodySize(p){this._encodedBodySizePromise.resolve(p)}setResponseHeadersSize(p){this._responseHeadersSizePromise.resolve(p)}timing(){return this._timing}async serverAddr(){return await this._serverAddrPromise||null}async securityDetails(){return await this._securityDetailsPromise||null}body(){return this._contentPromise||(this._contentPromise=this._finishedPromise.then(async()=>{if(this._status>=300&&this._status<=399)throw new Error("Response body is unavailable for redirect responses");return this._getResponseBodyCallback()})),this._contentPromise}request(){return this._request}frame(){return this._request.frame()}httpVersion(){return!this._httpVersion||this._httpVersion==="http/1.1"?"HTTP/1.1":this._httpVersion==="h2"?"HTTP/2.0":this._httpVersion}fromServiceWorker(){return this._fromServiceWorker}async responseHeadersSize(){const p=await this._responseHeadersSizePromise;if(p!==null)return p;let O=4;O+=8,O+=3,O+=this.statusText().length;const z=await this._rawResponseHeadersPromise;for(const $ of z)O+=$.name.length+$.value.length+4;return O+=2,O}async sizes(){var q;const p=await this._request.requestHeadersSize(),O=await this.responseHeadersSize();let z=await this._encodedBodySizePromise;if(z===null){const le=(q=(await this._rawResponseHeadersPromise).find(_e=>_e.name.toLowerCase()==="content-length"))==null?void 0:q.value;z=le?+le:0}let $=await this._transferSizePromise;return $===null&&($=O+z),{requestBodySize:this._request.bodySize(),requestHeadersSize:p,responseBodySize:z,responseHeadersSize:O,transferSize:$}}}const T=class T extends w.SdkObject{constructor(p,O){super(p,"ws"),this._notified=!1,this._url=O}markAsNotified(){return this._notified?!1:(this._notified=!0,!0)}url(){return this._url}frameSent(p,O){this.emit(T.Events.FrameSent,{opcode:p,data:O})}frameReceived(p,O){this.emit(T.Events.FrameReceived,{opcode:p,data:O})}error(p){this.emit(T.Events.SocketError,p)}closed(){this.emit(T.Events.Close)}};T.Events={Close:"close",SocketError:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"};let h=T;const m={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function c(b){return m[String(b)]||"Unknown"}function l(b,p){return[{name:b,value:p}]}function x(b){const p=new Map,O=new Map;for(const $ of b)if($)for(const{name:q,value:J}of $){const le=q.toLowerCase();O.set(le,q),p.set(le,J)}const z=[];for(const[$,q]of p)z.push({name:O.get($),value:q});return z}return Ql}var Zl,O_;function vO(){if(O_)return Zl;O_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Accessibility:()=>e}),Zl=te(P);class e{constructor(g){this._getAXTree=g}async snapshot(g={}){const{interestingOnly:u=!0,root:_=null}=g,{tree:f,needle:d}=await this._getAXTree(_||void 0);if(!u)return _?d&&C(d)[0]:C(f)[0];const v=new Set;return U(v,f,!1),_&&(!d||!v.has(d))?null:C(d||f,v)[0]}}function U(w,g,u){if(g.isInteresting(u)&&w.add(g),!g.isLeafNode()){u=u||g.isControl();for(const _ of g.children())U(w,_,u)}}function C(w,g){const u=[];for(const f of w.children())u.push(...C(f,g));if(g&&!g.has(w))return u;const _=w.serialize();return u.length&&(_.children=u),[_]}return Zl}var eu,T_;function iy(){if(T_)return eu;T_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{ConsoleMessage:()=>e}),eu=te(P);class e{constructor(C,w,g,u,_){this._page=C,this._type=w,this._text=g,this._args=u,this._location=_||{url:"",lineNumber:0,columnNumber:0}}page(){return this._page}type(){return this._type}text(){return this._text===void 0&&(this._text=this._args.map(C=>C.preview()).join(" ")),this._text}args(){return this._args}location(){return this._location}}return eu}var tu,C_;function wO(){if(C_)return tu;C_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{FileChooser:()=>e}),tu=te(P);class e{constructor(C,w,g){this._page=C,this._elementHandle=w,this._isMultiple=g}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}}return tu}var ru,P_;function yO(){if(P_)return ru;P_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{USKeyboardLayout:()=>U,keypadLocation:()=>e}),ru=te(P);const e=3,U={Escape:{keyCode:27,key:"Escape"},F1:{keyCode:112,key:"F1"},F2:{keyCode:113,key:"F2"},F3:{keyCode:114,key:"F3"},F4:{keyCode:115,key:"F4"},F5:{keyCode:116,key:"F5"},F6:{keyCode:117,key:"F6"},F7:{keyCode:118,key:"F7"},F8:{keyCode:119,key:"F8"},F9:{keyCode:120,key:"F9"},F10:{keyCode:121,key:"F10"},F11:{keyCode:122,key:"F11"},F12:{keyCode:123,key:"F12"},Backquote:{keyCode:192,shiftKey:"~",key:"`"},Digit1:{keyCode:49,shiftKey:"!",key:"1"},Digit2:{keyCode:50,shiftKey:"@",key:"2"},Digit3:{keyCode:51,shiftKey:"#",key:"3"},Digit4:{keyCode:52,shiftKey:"$",key:"4"},Digit5:{keyCode:53,shiftKey:"%",key:"5"},Digit6:{keyCode:54,shiftKey:"^",key:"6"},Digit7:{keyCode:55,shiftKey:"&",key:"7"},Digit8:{keyCode:56,shiftKey:"*",key:"8"},Digit9:{keyCode:57,shiftKey:"(",key:"9"},Digit0:{keyCode:48,shiftKey:")",key:"0"},Minus:{keyCode:189,shiftKey:"_",key:"-"},Equal:{keyCode:187,shiftKey:"+",key:"="},Backslash:{keyCode:220,shiftKey:"|",key:"\\"},Backspace:{keyCode:8,key:"Backspace"},Tab:{keyCode:9,key:"Tab"},KeyQ:{keyCode:81,shiftKey:"Q",key:"q"},KeyW:{keyCode:87,shiftKey:"W",key:"w"},KeyE:{keyCode:69,shiftKey:"E",key:"e"},KeyR:{keyCode:82,shiftKey:"R",key:"r"},KeyT:{keyCode:84,shiftKey:"T",key:"t"},KeyY:{keyCode:89,shiftKey:"Y",key:"y"},KeyU:{keyCode:85,shiftKey:"U",key:"u"},KeyI:{keyCode:73,shiftKey:"I",key:"i"},KeyO:{keyCode:79,shiftKey:"O",key:"o"},KeyP:{keyCode:80,shiftKey:"P",key:"p"},BracketLeft:{keyCode:219,shiftKey:"{",key:"["},BracketRight:{keyCode:221,shiftKey:"}",key:"]"},CapsLock:{keyCode:20,key:"CapsLock"},KeyA:{keyCode:65,shiftKey:"A",key:"a"},KeyS:{keyCode:83,shiftKey:"S",key:"s"},KeyD:{keyCode:68,shiftKey:"D",key:"d"},KeyF:{keyCode:70,shiftKey:"F",key:"f"},KeyG:{keyCode:71,shiftKey:"G",key:"g"},KeyH:{keyCode:72,shiftKey:"H",key:"h"},KeyJ:{keyCode:74,shiftKey:"J",key:"j"},KeyK:{keyCode:75,shiftKey:"K",key:"k"},KeyL:{keyCode:76,shiftKey:"L",key:"l"},Semicolon:{keyCode:186,shiftKey:":",key:";"},Quote:{keyCode:222,shiftKey:'"',key:"'"},Enter:{keyCode:13,key:"Enter",text:"\r"},ShiftLeft:{keyCode:160,keyCodeWithoutLocation:16,key:"Shift",location:1},KeyZ:{keyCode:90,shiftKey:"Z",key:"z"},KeyX:{keyCode:88,shiftKey:"X",key:"x"},KeyC:{keyCode:67,shiftKey:"C",key:"c"},KeyV:{keyCode:86,shiftKey:"V",key:"v"},KeyB:{keyCode:66,shiftKey:"B",key:"b"},KeyN:{keyCode:78,shiftKey:"N",key:"n"},KeyM:{keyCode:77,shiftKey:"M",key:"m"},Comma:{keyCode:188,shiftKey:"<",key:","},Period:{keyCode:190,shiftKey:">",key:"."},Slash:{keyCode:191,shiftKey:"?",key:"/"},ShiftRight:{keyCode:161,keyCodeWithoutLocation:16,key:"Shift",location:2},ControlLeft:{keyCode:162,keyCodeWithoutLocation:17,key:"Control",location:1},MetaLeft:{keyCode:91,key:"Meta",location:1},AltLeft:{keyCode:164,keyCodeWithoutLocation:18,key:"Alt",location:1},Space:{keyCode:32,key:" "},AltRight:{keyCode:165,keyCodeWithoutLocation:18,key:"Alt",location:2},AltGraph:{keyCode:225,key:"AltGraph"},MetaRight:{keyCode:92,key:"Meta",location:2},ContextMenu:{keyCode:93,key:"ContextMenu"},ControlRight:{keyCode:163,keyCodeWithoutLocation:17,key:"Control",location:2},PrintScreen:{keyCode:44,key:"PrintScreen"},ScrollLock:{keyCode:145,key:"ScrollLock"},Pause:{keyCode:19,key:"Pause"},PageUp:{keyCode:33,key:"PageUp"},PageDown:{keyCode:34,key:"PageDown"},Insert:{keyCode:45,key:"Insert"},Delete:{keyCode:46,key:"Delete"},Home:{keyCode:36,key:"Home"},End:{keyCode:35,key:"End"},ArrowLeft:{keyCode:37,key:"ArrowLeft"},ArrowUp:{keyCode:38,key:"ArrowUp"},ArrowRight:{keyCode:39,key:"ArrowRight"},ArrowDown:{keyCode:40,key:"ArrowDown"},NumLock:{keyCode:144,key:"NumLock"},NumpadDivide:{keyCode:111,key:"/",location:3},NumpadMultiply:{keyCode:106,key:"*",location:3},NumpadSubtract:{keyCode:109,key:"-",location:3},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",shiftKey:"7",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",shiftKey:"8",location:3},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",shiftKey:"9",location:3},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",shiftKey:"4",location:3},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",shiftKey:"5",location:3},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",shiftKey:"6",location:3},NumpadAdd:{keyCode:107,key:"+",location:3},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",shiftKey:"1",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",shiftKey:"2",location:3},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",shiftKey:"3",location:3},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",shiftKey:"0",location:3},NumpadDecimal:{keyCode:46,shiftKeyCode:110,key:"\0",shiftKey:".",location:3},NumpadEnter:{keyCode:13,key:"Enter",text:"\r",location:3}};return ru}var nu,k_;function Ro(){if(k_)return nu;k_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{Keyboard:()=>f,Mouse:()=>a,Touchscreen:()=>h,keypadLocation:()=>u,resolveSmartModifier:()=>v,resolveSmartModifierString:()=>d}),nu=U(C);var w=nr(),g=e(yO());const u=g.keypadLocation,_=["Alt","Control","Meta","Shift"];class f{constructor(c,l){this._pressedModifiers=new Set,this._pressedKeys=new Set,this._raw=c,this._page=l}async down(c,l){const x=this._keyDescriptionForString(l),T=this._pressedKeys.has(x.code);this._pressedKeys.add(x.code),_.includes(x.key)&&this._pressedModifiers.add(x.key),await this._raw.keydown(c,this._pressedModifiers,l,x,T)}_keyDescriptionForString(c){const l=d(c);let x=n.get(l);return(0,w.assert)(x,`Unknown key: "${l}"`),x=this._pressedModifiers.has("Shift")&&x.shifted?x.shifted:x,this._pressedModifiers.size>1||!this._pressedModifiers.has("Shift")&&this._pressedModifiers.size===1?{...x,text:""}:x}async up(c,l){const x=this._keyDescriptionForString(l);_.includes(x.key)&&this._pressedModifiers.delete(x.key),this._pressedKeys.delete(x.code),await this._raw.keyup(c,this._pressedModifiers,l,x)}async insertText(c,l){await this._raw.sendText(c,l)}async type(c,l,x){const T=x&&x.delay||void 0;for(const b of l)n.has(b)?await this.press(c,b,{delay:T}):(T&&await c.wait(T),await this.insertText(c,b))}async press(c,l,x={}){function T(p){const O=[];let z="";for(const $ of p)$==="+"&&z?(O.push(z),z=""):z+=$;return O.push(z),O}const b=T(l);l=b[b.length-1];for(let p=0;p<b.length-1;++p)await this.down(c,b[p]);await this.down(c,l),x.delay&&await c.wait(x.delay),await this.up(c,l);for(let p=b.length-2;p>=0;--p)await this.up(c,b[p])}async ensureModifiers(c,l){const x=l.map(v);for(const b of x)if(!_.includes(b))throw new Error("Unknown modifier "+b);const T=Array.from(this._pressedModifiers);for(const b of _){const p=x.includes(b),O=this._pressedModifiers.has(b);p&&!O?await this.down(c,b):!p&&O&&await this.up(c,b)}return T}_modifiers(){return this._pressedModifiers}}function d(m){return m==="ControlOrMeta"?process.platform==="darwin"?"Meta":"Control":m}function v(m){return d(m)}class a{constructor(c,l){this._x=0,this._y=0,this._lastButton="none",this._buttons=new Set,this._raw=c,this._page=l,this._keyboard=this._page.keyboard}currentPoint(){return{x:this._x,y:this._y}}async move(c,l,x,T={}){const{steps:b=1}=T,p=this._x,O=this._y;this._x=l,this._y=x;for(let z=1;z<=b;z++){const $=p+(l-p)*(z/b),q=O+(x-O)*(z/b);await this._raw.move(c,$,q,this._lastButton,this._buttons,this._keyboard._modifiers(),!!T.forClick)}}async down(c,l={}){const{button:x="left",clickCount:T=1}=l;this._lastButton=x,this._buttons.add(x),await this._raw.down(c,this._x,this._y,this._lastButton,this._buttons,this._keyboard._modifiers(),T)}async up(c,l={}){const{button:x="left",clickCount:T=1}=l;this._lastButton="none",this._buttons.delete(x),await this._raw.up(c,this._x,this._y,x,this._buttons,this._keyboard._modifiers(),T)}async click(c,l,x,T={}){const{delay:b=null,clickCount:p=1}=T;if(b){this.move(c,l,x,{forClick:!0});for(let O=1;O<=p;++O)await this.down(c,{...T,clickCount:O}),await c.wait(b),await this.up(c,{...T,clickCount:O}),O<p&&await c.wait(b)}else{const O=[];O.push(this.move(c,l,x,{forClick:!0}));for(let z=1;z<=p;++z)O.push(this.down(c,{...T,clickCount:z})),O.push(this.up(c,{...T,clickCount:z}));await Promise.all(O)}}async wheel(c,l,x){await this._raw.wheel(c,this._x,this._y,this._buttons,this._keyboard._modifiers(),l,x)}}const s=new Map([["ShiftLeft",["Shift"]],["ControlLeft",["Control"]],["AltLeft",["Alt"]],["MetaLeft",["Meta"]],["Enter",[`
`,"\r"]]]),n=o(g.USKeyboardLayout);function o(m){const c=new Map;for(const l in m){const x=m[l],T={key:x.key||"",keyCode:x.keyCode||0,keyCodeWithoutLocation:x.keyCodeWithoutLocation||x.keyCode||0,code:l,text:x.text||"",location:x.location||0};x.key.length===1&&(T.text=T.key);let b;if(x.shiftKey&&((0,w.assert)(x.shiftKey.length===1),b={...T},b.key=x.shiftKey,b.text=x.shiftKey,x.shiftKeyCode&&(b.keyCode=x.shiftKeyCode)),c.set(l,{...T,shifted:b}),s.has(l))for(const p of s.get(l))c.set(p,T);x.location||(T.key.length===1&&c.set(T.key,T),b&&c.set(b.key,{...b,shifted:void 0}))}return c}class h{constructor(c,l){this._raw=c,this._page=l}async tap(c,l,x){if(!this._page.browserContext._options.hasTouch)throw new Error("hasTouch must be enabled on the browser context before using the touchscreen.");await this._raw.tap(c,l,x,this._page.keyboard._modifiers())}}return nu}var iu,A_;function SO(){if(A_)return iu;A_=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(v,a)=>{for(var s in a)r(v,s,{get:a[s],enumerable:!0})},te=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of E(a))!R.call(v,o)&&o!==s&&r(v,o,{get:()=>a[o],enumerable:!(n=i(a,o))||n.enumerable});return v},P=v=>te(r({},"__esModule",{value:!0}),v),e={};V(e,{Screenshotter:()=>u,validateScreenshotOptions:()=>d}),iu=P(e);var U=hn(),C=nr(),w=af();function g(v,a,s,n){if(n){const c=document.createElement("style");c.textContent="body {}",document.head.appendChild(c),document.documentElement.getBoundingClientRect(),c.remove()}if(!v&&!a&&!s)return;const o=(c,l=[])=>{l.push(c);const x=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT);do{const T=x.currentNode,b=T instanceof Element?T.shadowRoot:null;b&&o(b,l)}while(x.nextNode());return l},h=o(document),m=[];if(v)for(const c of h){const l=document.createElement("style");l.textContent=v,c===document?document.documentElement.append(l):c.append(l),m.push(()=>{l.remove()})}if(a){const c=new Map;for(const l of h)l.querySelectorAll("input,textarea,[contenteditable]").forEach(x=>{c.set(x,{value:x.style.getPropertyValue("caret-color"),priority:x.style.getPropertyPriority("caret-color")}),x.style.setProperty("caret-color","transparent","important")});m.push(()=>{for(const[l,x]of c)l.style.setProperty("caret-color",x.value,x.priority)})}if(s){const c=new Set,l=x=>{for(const T of x.getAnimations()){if(!T.effect||T.playbackRate===0||c.has(T))continue;const b=T.effect.getComputedTiming().endTime;if(Number.isFinite(b))try{T.finish()}catch{}else try{T.cancel(),c.add(T)}catch{}}};for(const x of h){const T=l.bind(null,x);T(),x.addEventListener("transitionrun",T),x.addEventListener("animationstart",T),m.push(()=>{x.removeEventListener("transitionrun",T),x.removeEventListener("animationstart",T)})}m.push(()=>{for(const x of c)try{x.play()}catch{}})}window.__pwCleanupScreenshot=()=>{for(const c of m)c();delete window.__pwCleanupScreenshot}}class u{constructor(a){this._queue=new _,this._page=a,this._queue=new _}async _originalViewportSize(a){var n;let s=(n=this._page.emulatedSize())==null?void 0:n.viewport;return s||(s=await this._page.mainFrame().waitForFunctionValueInUtility(a,()=>({width:window.innerWidth,height:window.innerHeight}))),s}async _fullPageSize(a){return await this._page.mainFrame().waitForFunctionValueInUtility(a,()=>!document.body||!document.documentElement?null:{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)})}async screenshotPage(a,s){const n=d(s);return this._queue.postTask(async()=>{a.log("taking page screenshot");const o=await this._originalViewportSize(a);if(await this._preparePageForScreenshot(a,this._page.mainFrame(),s.style,s.caret!=="initial",s.animations==="disabled"),s.fullPage){const c=await this._fullPageSize(a);let l={x:0,y:0,width:c.width,height:c.height};const x=c.width<=o.width&&c.height<=o.height;s.clip&&(l=f(s.clip,l));const T=await this._screenshot(a,n,l,void 0,x,s);return await this._restorePageAfterScreenshot(),T}const h=s.clip?f(s.clip,o):{x:0,y:0,...o},m=await this._screenshot(a,n,void 0,h,!0,s);return await this._restorePageAfterScreenshot(),m})}async screenshotElement(a,s,n){const o=d(n);return this._queue.postTask(async()=>{a.log("taking element screenshot");const h=await this._originalViewportSize(a);await this._preparePageForScreenshot(a,s._frame,n.style,n.caret!=="initial",n.animations==="disabled"),await s._waitAndScrollIntoViewIfNeeded(a,!0);const m=await a.race(s.boundingBox());(0,C.assert)(m,"Node is either not visible or not an HTMLElement"),(0,C.assert)(m.width!==0,"Node has 0 width."),(0,C.assert)(m.height!==0,"Node has 0 height.");const c=m.width<=h.width&&m.height<=h.height,l=await this._page.mainFrame().waitForFunctionValueInUtility(a,()=>({x:window.scrollX,y:window.scrollY})),x={...m};x.x+=l.x,x.y+=l.y;const T=await this._screenshot(a,o,U.helper.enclosingIntRect(x),void 0,c,n);return await this._restorePageAfterScreenshot(),T})}async _preparePageForScreenshot(a,s,n,o,h){h&&a.log("  disabled all CSS animations");const m=this._page.delegate.shouldToggleStyleSheetToSyncAnimations();a.cleanupWhenAborted(()=>this._restorePageAfterScreenshot()),await a.race(this._page.safeNonStallingEvaluateInAllFrames("("+g.toString()+`)(${JSON.stringify(n)}, ${o}, ${h}, ${m})`,"utility")),t.PW_TEST_SCREENSHOT_NO_FONTS_READY||(a.log("waiting for fonts to load..."),await a.race(s.nonStallingEvaluateInExistingContext("document.fonts.ready","utility").catch(()=>{})),a.log("fonts loaded"))}async _restorePageAfterScreenshot(){await this._page.safeNonStallingEvaluateInAllFrames("window.__pwCleanupScreenshot && window.__pwCleanupScreenshot()","utility")}async _maskElements(a,s){if(!s.mask||!s.mask.length)return()=>Promise.resolve();const n=new w.MultiMap,o=async()=>{await Promise.all([...n.keys()].map(async h=>{await h.hideHighlight()}))};return a.cleanupWhenAborted(o),await a.race(Promise.all((s.mask||[]).map(async({frame:h,selector:m})=>{const c=await h.selectors.resolveFrameForSelector(m);c&&n.set(c.frame,c.info.parsed)}))),await a.race(Promise.all([...n.keys()].map(async h=>{await h.maskSelectors(n.get(h),s.maskColor||"#F0F")}))),o}async _screenshot(a,s,n,o,h,m){m.__testHookBeforeScreenshot&&await a.race(m.__testHookBeforeScreenshot());const c=m.omitBackground&&s==="png";c&&(a.cleanupWhenAborted(()=>this._page.delegate.setBackgroundColor()),await a.race(this._page.delegate.setBackgroundColor({r:0,g:0,b:0,a:0})));const l=await this._maskElements(a,m),x=s==="jpeg"?m.quality??80:void 0,T=await this._page.delegate.takeScreenshot(a,s,n,o,x,h,m.scale||"device");return await l(),c&&await a.race(this._page.delegate.setBackgroundColor()),m.__testHookAfterScreenshot&&await a.race(m.__testHookAfterScreenshot()),T}}class _{constructor(){this._chain=Promise.resolve()}postTask(a){const s=this._chain.then(a);return this._chain=s.catch(()=>{}),s}}function f(v,a){const s={x:Math.max(0,Math.min(v.x,a.width)),y:Math.max(0,Math.min(v.y,a.height))},n={x:Math.max(0,Math.min(v.x+v.width,a.width)),y:Math.max(0,Math.min(v.y+v.height,a.height))},o={x:s.x,y:s.y,width:n.x-s.x,height:n.y-s.y};return(0,C.assert)(o.width&&o.height,"Clipped area is either empty or outside the resulting image"),o}function d(v){let a=null;return v.type&&((0,C.assert)(v.type==="png"||v.type==="jpeg","Unknown options.type value: "+v.type),a=v.type),a||(a="png"),v.quality!==void 0&&((0,C.assert)(a==="jpeg","options.quality is unsupported for the "+a+" screenshots"),(0,C.assert)(typeof v.quality=="number","Expected options.quality to be a number but found "+typeof v.quality),(0,C.assert)(Number.isInteger(v.quality),"Expected options.quality to be an integer"),(0,C.assert)(v.quality>=0&&v.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+v.quality)),v.clip&&((0,C.assert)(typeof v.clip.x=="number","Expected options.clip.x to be a number but found "+typeof v.clip.x),(0,C.assert)(typeof v.clip.y=="number","Expected options.clip.y to be a number but found "+typeof v.clip.y),(0,C.assert)(typeof v.clip.width=="number","Expected options.clip.width to be a number but found "+typeof v.clip.width),(0,C.assert)(typeof v.clip.height=="number","Expected options.clip.height to be a number but found "+typeof v.clip.height),(0,C.assert)(v.clip.width!==0,"Expected options.clip.width not to be 0."),(0,C.assert)(v.clip.height!==0,"Expected options.clip.height not to be 0.")),a}return iu}var su,I_;function xO(){if(I_)return su;I_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),su=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/bindingsController.ts
var bindingsController_exports = {};
__export(bindingsController_exports, {
  BindingsController: () => BindingsController
});
module.exports = __toCommonJS(bindingsController_exports);

// packages/playwright-core/src/utils/isomorphic/utilityScriptSerializers.ts
function isRegExp(obj) {
  try {
    return obj instanceof RegExp || Object.prototype.toString.call(obj) === "[object RegExp]";
  } catch (error) {
    return false;
  }
}
function isDate(obj) {
  try {
    return obj instanceof Date || Object.prototype.toString.call(obj) === "[object Date]";
  } catch (error) {
    return false;
  }
}
function isURL(obj) {
  try {
    return obj instanceof URL || Object.prototype.toString.call(obj) === "[object URL]";
  } catch (error) {
    return false;
  }
}
function isError(obj) {
  var _a;
  try {
    return obj instanceof Error || obj && ((_a = Object.getPrototypeOf(obj)) == null ? void 0 : _a.name) === "Error";
  } catch (error) {
    return false;
  }
}
function isTypedArray(obj, constructor) {
  try {
    return obj instanceof constructor || Object.prototype.toString.call(obj) === \`[object \${constructor.name}]\`;
  } catch (error) {
    return false;
  }
}
var typedArrayConstructors = {
  i8: Int8Array,
  ui8: Uint8Array,
  ui8c: Uint8ClampedArray,
  i16: Int16Array,
  ui16: Uint16Array,
  i32: Int32Array,
  ui32: Uint32Array,
  // TODO: add Float16Array once it's in baseline
  f32: Float32Array,
  f64: Float64Array,
  bi64: BigInt64Array,
  bui64: BigUint64Array
};
function typedArrayToBase64(array) {
  if ("toBase64" in array)
    return array.toBase64();
  const binary = Array.from(new Uint8Array(array.buffer, array.byteOffset, array.byteLength)).map((b) => String.fromCharCode(b)).join("");
  return btoa(binary);
}
function serializeAsCallArgument(value, handleSerializer) {
  return serialize(value, handleSerializer, { visited: /* @__PURE__ */ new Map(), lastId: 0 });
}
function serialize(value, handleSerializer, visitorInfo) {
  if (value && typeof value === "object") {
    if (typeof globalThis.Window === "function" && value instanceof globalThis.Window)
      return "ref: <Window>";
    if (typeof globalThis.Document === "function" && value instanceof globalThis.Document)
      return "ref: <Document>";
    if (typeof globalThis.Node === "function" && value instanceof globalThis.Node)
      return "ref: <Node>";
  }
  return innerSerialize(value, handleSerializer, visitorInfo);
}
function innerSerialize(value, handleSerializer, visitorInfo) {
  var _a;
  const result = handleSerializer(value);
  if ("fallThrough" in result)
    value = result.fallThrough;
  else
    return result;
  if (typeof value === "symbol")
    return { v: "undefined" };
  if (Object.is(value, void 0))
    return { v: "undefined" };
  if (Object.is(value, null))
    return { v: "null" };
  if (Object.is(value, NaN))
    return { v: "NaN" };
  if (Object.is(value, Infinity))
    return { v: "Infinity" };
  if (Object.is(value, -Infinity))
    return { v: "-Infinity" };
  if (Object.is(value, -0))
    return { v: "-0" };
  if (typeof value === "boolean")
    return value;
  if (typeof value === "number")
    return value;
  if (typeof value === "string")
    return value;
  if (typeof value === "bigint")
    return { bi: value.toString() };
  if (isError(value)) {
    let stack;
    if ((_a = value.stack) == null ? void 0 : _a.startsWith(value.name + ": " + value.message)) {
      stack = value.stack;
    } else {
      stack = \`\${value.name}: \${value.message}
\${value.stack}\`;
    }
    return { e: { n: value.name, m: value.message, s: stack } };
  }
  if (isDate(value))
    return { d: value.toJSON() };
  if (isURL(value))
    return { u: value.toJSON() };
  if (isRegExp(value))
    return { r: { p: value.source, f: value.flags } };
  for (const [k, ctor] of Object.entries(typedArrayConstructors)) {
    if (isTypedArray(value, ctor))
      return { ta: { b: typedArrayToBase64(value), k } };
  }
  const id = visitorInfo.visited.get(value);
  if (id)
    return { ref: id };
  if (Array.isArray(value)) {
    const a = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (let i = 0; i < value.length; ++i)
      a.push(serialize(value[i], handleSerializer, visitorInfo));
    return { a, id: id2 };
  }
  if (typeof value === "object") {
    const o = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (const name of Object.keys(value)) {
      let item;
      try {
        item = value[name];
      } catch (e) {
        continue;
      }
      if (name === "toJSON" && typeof item === "function")
        o.push({ k: name, v: { o: [], id: 0 } });
      else
        o.push({ k: name, v: serialize(item, handleSerializer, visitorInfo) });
    }
    let jsonWrapper;
    try {
      if (o.length === 0 && value.toJSON && typeof value.toJSON === "function")
        jsonWrapper = { value: value.toJSON() };
    } catch (e) {
    }
    if (jsonWrapper)
      return innerSerialize(jsonWrapper.value, handleSerializer, visitorInfo);
    return { o, id: id2 };
  }
}

// packages/injected/src/bindingsController.ts
var BindingsController = class {
  // eslint-disable-next-line no-restricted-globals
  constructor(global, globalBindingName) {
    this._bindings = /* @__PURE__ */ new Map();
    this._global = global;
    this._globalBindingName = globalBindingName;
  }
  addBinding(bindingName, needsHandle) {
    const data = {
      callbacks: /* @__PURE__ */ new Map(),
      lastSeq: 0,
      handles: /* @__PURE__ */ new Map(),
      removed: false
    };
    this._bindings.set(bindingName, data);
    this._global[bindingName] = (...args) => {
      if (data.removed)
        throw new Error(\`binding "\${bindingName}" has been removed\`);
      if (needsHandle && args.slice(1).some((arg) => arg !== void 0))
        throw new Error(\`exposeBindingHandle supports a single argument, \${args.length} received\`);
      const seq = ++data.lastSeq;
      const promise = new Promise((resolve, reject) => data.callbacks.set(seq, { resolve, reject }));
      let payload;
      if (needsHandle) {
        data.handles.set(seq, args[0]);
        payload = { name: bindingName, seq };
      } else {
        const serializedArgs = [];
        for (let i = 0; i < args.length; i++) {
          serializedArgs[i] = serializeAsCallArgument(args[i], (v) => {
            return { fallThrough: v };
          });
        }
        payload = { name: bindingName, seq, serializedArgs };
      }
      this._global[this._globalBindingName](JSON.stringify(payload));
      return promise;
    };
  }
  removeBinding(bindingName) {
    const data = this._bindings.get(bindingName);
    if (data)
      data.removed = true;
    this._bindings.delete(bindingName);
    delete this._global[bindingName];
  }
  takeBindingHandle(arg) {
    const handles = this._bindings.get(arg.name).handles;
    const handle = handles.get(arg.seq);
    handles.delete(arg.seq);
    return handle;
  }
  deliverBindingResult(arg) {
    const callbacks = this._bindings.get(arg.name).callbacks;
    if ("error" in arg)
      callbacks.get(arg.seq).reject(arg.error);
    else
      callbacks.get(arg.seq).resolve(arg.result);
    callbacks.delete(arg.seq);
  }
};
`;return su}var au,N_;function Kr(){if(N_)return au;N_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(j,y)=>{for(var I in y)r(j,I,{get:y[I],enumerable:!0})},P=(j,y,I,D)=>{if(y&&typeof y=="object"||typeof y=="function")for(let ie of E(y))!V.call(j,ie)&&ie!==I&&r(j,ie,{get:()=>y[ie],enumerable:!(D=i(y,ie))||D.enumerable});return j},e=(j,y,I)=>(I=j!=null?t(R(j)):{},P(!j||!j.__esModule?r(I,"default",{value:j,enumerable:!0}):I,j)),U=j=>P(r({},"__esModule",{value:!0}),j),C={};te(C,{InitScript:()=>J,Page:()=>z,PageBinding:()=>q,Worker:()=>$}),au=U(C);var w=e(vO()),g=Ir(),u=iy(),_=Pn(),f=wO(),d=e(hs()),v=hn(),a=e(Ro()),s=Tr(),n=e(Oi()),o=SO(),h=nr(),m=nr(),c=Jw(),l=Mr(),x=Vi(),T=Fr(),b=ds(),p=lf(),O=e(xO());const ge=class ge extends s.SdkObject{constructor(y,I){super(I,"page"),this._closedState="open",this._closedPromise=new T.ManualPromise,this._initializedPromise=new T.ManualPromise,this._eventsToEmitAfterInitialized=[],this._crashed=!1,this.openScope=new h.LongStandingScope,this._emulatedMedia={},this._fileChooserInterceptedBy=new Set,this._pageBindings=new Map,this.initScripts=[],this._workers=new Map,this.requestInterceptors=[],this.video=null,this._isServerSideOnly=!1,this._locatorHandlers=new Map,this._lastLocatorHandlerUid=0,this._locatorHandlerRunningCounter=0,this._frameThrottler=new le(10,35,200),this.lastSnapshotFrameIds=[],this.attribution.page=this,this.delegate=y,this.browserContext=I,this.accessibility=new w.Accessibility(y.getAccessibilityTree.bind(y)),this.keyboard=new a.Keyboard(y.rawKeyboard,this),this.mouse=new a.Mouse(y.rawMouse,this),this.touchscreen=new a.Touchscreen(y.rawTouchscreen,this),this.screenshotter=new o.Screenshotter(this),this.frameManager=new d.FrameManager(this),y.pdf&&(this.pdf=y.pdf.bind(y)),this.coverage=y.coverage?y.coverage():null}async reportAsNew(y,I=void 0,D=g.BrowserContext.Events.Page){if(y){const ie=await y.waitForInitializedOrError();ie instanceof ge&&!ie.isClosed()&&(this._opener=ie)}this._markInitialized(I,D)}_markInitialized(y=void 0,I=g.BrowserContext.Events.Page){if(y){if(this.browserContext.isClosingOrClosed())return;this.frameManager.createDummyMainFrameIfNeeded()}this._initialized=y||this,this.emitOnContext(I,this);for(const{event:D,args:ie}of this._eventsToEmitAfterInitialized)this.browserContext.emit(D,...ie);this._eventsToEmitAfterInitialized=[],this.isClosed()?this.emit(ge.Events.Close):this.instrumentation.onPageOpen(this),this._initializedPromise.resolve(this._initialized)}initializedOrUndefined(){return this._initialized?this:void 0}waitForInitializedOrError(){return this._initializedPromise}emitOnContext(y,...I){this._isServerSideOnly||this.browserContext.emit(y,...I)}emitOnContextOnceInitialized(y,...I){this._isServerSideOnly||(this._initialized?this.browserContext.emit(y,...I):this._eventsToEmitAfterInitialized.push({event:y,args:I}))}async resetForReuse(y){await this.mainFrame().gotoImpl(y,"about:blank",{}),this._emulatedSize=void 0,this._emulatedMedia={},this._extraHTTPHeaders=void 0,await Promise.all([this.delegate.updateEmulatedViewportSize(),this.delegate.updateEmulateMedia(),this.delegate.updateExtraHTTPHeaders()]),await this.delegate.resetForReuse(y)}_didClose(){this.frameManager.dispose(),this._frameThrottler.dispose(),(0,h.assert)(this._closedState!=="closed","Page closed twice"),this._closedState="closed",this.emit(ge.Events.Close),this._closedPromise.resolve(),this.instrumentation.onPageClose(this),this.openScope.close(new _.TargetClosedError)}_didCrash(){this.frameManager.dispose(),this._frameThrottler.dispose(),this.emit(ge.Events.Crash),this._crashed=!0,this.instrumentation.onPageClose(this),this.openScope.close(new Error("Page crashed"))}async _onFileChooserOpened(y){let I;try{I=await y.evaluate(ie=>!!ie.multiple)}catch{return}if(!this.listenerCount(ge.Events.FileChooser)){y.dispose();return}const D=new f.FileChooser(this,y,I);this.emit(ge.Events.FileChooser,D)}opener(){return this._opener}mainFrame(){return this.frameManager.mainFrame()}frames(){return this.frameManager.frames()}async exposeBinding(y,I,D,ie){if(this._pageBindings.has(I))throw new Error(`Function "${I}" has been already registered`);if(this.browserContext._pageBindings.has(I))throw new Error(`Function "${I}" has been already registered in the browser context`);await y.race(this.browserContext.exposePlaywrightBindingIfNeeded());const he=new q(I,ie,D);return this._pageBindings.set(I,he),y.cleanupWhenAborted(()=>this._pageBindings.delete(I)),await y.race(this.delegate.addInitScript(he.initScript)),await y.race(this.safeNonStallingEvaluateInAllFrames(he.initScript.source,"main")),he}async removeExposedBindings(y){y=y.filter(D=>this._pageBindings.get(D.name)===D);for(const D of y)this._pageBindings.delete(D.name);await this.delegate.removeInitScripts(y.map(D=>D.initScript));const I=y.map(D=>`{ ${D.cleanupScript} };
`).join("");await this.safeNonStallingEvaluateInAllFrames(I,"main")}async setExtraHTTPHeaders(y,I){const D=this._extraHTTPHeaders;this._extraHTTPHeaders=I,y.cleanupWhenAborted(async()=>{this._extraHTTPHeaders=D,await this.delegate.updateExtraHTTPHeaders()}),await y.race(this.delegate.updateExtraHTTPHeaders())}extraHTTPHeaders(){return this._extraHTTPHeaders}async onBindingCalled(y,I){this._closedState!=="closed"&&await q.dispatch(this,y,I)}addConsoleMessage(y,I,D,ie){const he=new u.ConsoleMessage(this,y,ie,I,D);if(this.frameManager.interceptConsoleMessage(he)){I.forEach(ye=>ye.dispose());return}this.emitOnContextOnceInitialized(g.BrowserContext.Events.Console,he)}async reload(y,I){return this.mainFrame().raceNavigationAction(y,async()=>{const[D]=await Promise.all([this.mainFrame()._waitForNavigation(y,!0,I),y.race(this.delegate.reload())]);return D})}async goBack(y,I){return this.mainFrame().raceNavigationAction(y,async()=>{let D;const ie=this.mainFrame()._waitForNavigation(y,!1,I).catch(ye=>(D=ye,null));if(!await y.race(this.delegate.goBack()))return ie.catch(()=>{}),null;const me=await ie;if(D)throw D;return me})}async goForward(y,I){return this.mainFrame().raceNavigationAction(y,async()=>{let D;const ie=this.mainFrame()._waitForNavigation(y,!1,I).catch(ye=>(D=ye,null));if(!await y.race(this.delegate.goForward()))return ie.catch(()=>{}),null;const me=await ie;if(D)throw D;return me})}requestGC(){return this.delegate.requestGC()}registerLocatorHandler(y,I){const D=++this._lastLocatorHandlerUid;return this._locatorHandlers.set(D,{selector:y,noWaitAfter:I}),D}resolveLocatorHandler(y,I){var ie;const D=this._locatorHandlers.get(y);I&&this._locatorHandlers.delete(y),D&&((ie=D.resolved)==null||ie.resolve(),D.resolved=void 0)}unregisterLocatorHandler(y){this._locatorHandlers.delete(y)}async performActionPreChecks(y){await this._performWaitForNavigationCheck(y),await this._performLocatorHandlersCheckpoint(y),await this._performWaitForNavigationCheck(y)}async _performWaitForNavigationCheck(y){var he,me;const I=this.frameManager.mainFrame();if(!I||!I.pendingDocument())return;const D=(me=(he=I.pendingDocument())==null?void 0:he.request)==null?void 0:me.url(),ie=D?`" ${(0,h.trimStringWithEllipsis)(D,200)}"`:"";y.log(`  waiting for${ie} navigation to finish...`),await v.helper.waitForEvent(y,I,d.Frame.Events.InternalNavigation,ye=>ye.isPublic?(ye.error||y.log(`  navigated to "${(0,h.trimStringWithEllipsis)(I.url(),200)}"`),!0):!1).promise}async _performLocatorHandlersCheckpoint(y){if(!this._locatorHandlerRunningCounter){for(const[I,D]of this._locatorHandlers)if(D.resolved||await this.mainFrame().isVisibleInternal(y,D.selector,{strict:!0})&&(D.resolved=new T.ManualPromise,this.emit(ge.Events.LocatorHandlerTriggered,I)),D.resolved){++this._locatorHandlerRunningCounter,y.log(`  found ${(0,m.asLocator)(this.browserContext._browser.sdkLanguage(),D.selector)}, intercepting action to run the handler`);const ie=D.resolved.then(async()=>{D.noWaitAfter?y.log("  locator handler has finished"):(y.log(`  locator handler has finished, waiting for ${(0,m.asLocator)(this.browserContext._browser.sdkLanguage(),D.selector)} to be hidden`),await this.mainFrame().waitForSelector(y,D.selector,!1,{state:"hidden"}))});await y.race(this.openScope.race(ie)).finally(()=>--this._locatorHandlerRunningCounter),y.log("  interception handler has finished, continuing")}}}async emulateMedia(y,I){const D={...this._emulatedMedia};y.cleanupWhenAborted(async()=>{this._emulatedMedia=D,await this.delegate.updateEmulateMedia()}),I.media!==void 0&&(this._emulatedMedia.media=I.media),I.colorScheme!==void 0&&(this._emulatedMedia.colorScheme=I.colorScheme),I.reducedMotion!==void 0&&(this._emulatedMedia.reducedMotion=I.reducedMotion),I.forcedColors!==void 0&&(this._emulatedMedia.forcedColors=I.forcedColors),I.contrast!==void 0&&(this._emulatedMedia.contrast=I.contrast),await y.race(this.delegate.updateEmulateMedia())}emulatedMedia(){const y=this.browserContext._options;return{media:this._emulatedMedia.media||"no-override",colorScheme:this._emulatedMedia.colorScheme!==void 0?this._emulatedMedia.colorScheme:y.colorScheme??"light",reducedMotion:this._emulatedMedia.reducedMotion!==void 0?this._emulatedMedia.reducedMotion:y.reducedMotion??"no-preference",forcedColors:this._emulatedMedia.forcedColors!==void 0?this._emulatedMedia.forcedColors:y.forcedColors??"none",contrast:this._emulatedMedia.contrast!==void 0?this._emulatedMedia.contrast:y.contrast??"no-preference"}}async setViewportSize(y,I){const D=this._emulatedSize;y.cleanupWhenAborted(async()=>{this._emulatedSize=D,await this.delegate.updateEmulatedViewportSize()}),this._setEmulatedSize({viewport:{...I},screen:{...I}}),await y.race(this.delegate.updateEmulatedViewportSize())}setEmulatedSizeFromWindowOpen(y){this._setEmulatedSize(y)}_setEmulatedSize(y){this._emulatedSize=y,this.emit(ge.Events.EmulatedSizeChanged)}emulatedSize(){if(this._emulatedSize)return this._emulatedSize;const y=this.browserContext._options;return y.viewport?{viewport:y.viewport,screen:y.screen||y.viewport}:void 0}async bringToFront(){await this.delegate.bringToFront()}async addInitScript(y,I){const D=new J(I);return this.initScripts.push(D),y.cleanupWhenAborted(()=>this.removeInitScripts([D])),await y.race(this.delegate.addInitScript(D)),D}async removeInitScripts(y){const I=new Set(y);this.initScripts=this.initScripts.filter(D=>!I.has(D)),await this.delegate.removeInitScripts(y)}needsRequestInterception(){return this.requestInterceptors.length>0||this.browserContext.requestInterceptors.length>0}async addRequestInterceptor(y,I,D){D?this.requestInterceptors.unshift(I):this.requestInterceptors.push(I),await this.delegate.updateRequestInterception()}async removeRequestInterceptor(y){const I=this.requestInterceptors.indexOf(y);I!==-1&&(this.requestInterceptors.splice(I,1),await this.browserContext.notifyRoutesInFlightAboutRemovedHandler(y),await this.delegate.updateRequestInterception())}async expectScreenshot(y,I){const D=I.locator,ie=D?async Oe=>await D.frame.rafrafTimeoutScreenshotElementWithProgress(y,D.selector,Oe,I||{}):async Oe=>(await this.performActionPreChecks(y),await this.mainFrame().rafrafTimeout(y,Oe),await this.screenshotter.screenshotPage(y,I||{})),he=(0,c.getComparator)("image/png");if(!I.expected&&I.isNot)return{errorMessage:'"not" matcher requires expected result'};try{if((0,o.validateScreenshotOptions)(I||{})!=="png")throw new Error("Only PNG screenshots are supported")}catch(Oe){return{errorMessage:Oe.message}}let me;const ye=(Oe,Pe,Ne)=>{const Le=Oe&&Pe?he(Oe,Pe,I):void 0;return Le!==void 0&&!!Le==!!I.isNot?!0:(Le&&(me={errorMessage:Le.errorMessage,diff:Le.diff,actual:Oe,previous:Ne}),!1)},Se=Oe=>{if(n.isJavaScriptErrorInEvaluate(Oe)||(0,x.isInvalidSelectorError)(Oe))throw Oe;let Pe=Oe.message;return Oe instanceof _.TimeoutError&&(me!=null&&me.previous)&&(Pe="Failed to take two consecutive stable screenshots."),{log:(0,p.compressCallLog)(Oe.message?[...y.metadata.log,Oe.message]:y.metadata.log),...me,errorMessage:Pe,timedOut:Oe instanceof _.TimeoutError}};y.legacySetErrorHandler(Se);try{let Oe,Pe;const Ne=[0,100,250,500];y.log(`${(0,h.renderTitleForCall)(y.metadata)}${I.timeout?` with timeout ${I.timeout}ms`:""}`),I.expected?y.log("  verifying given screenshot expectation"):y.log("  generating new stable screenshot expectation");let Le=!0;for(;;){if(this.isClosed())throw new Error("The page has closed");const qe=Ne.shift()??1e3;if(qe&&y.log(`waiting ${qe}ms before taking screenshot`),Pe=Oe,Oe=await ie(qe).catch(ot=>{if(this.mainFrame().isNonRetriableError(ot))throw ot;y.log("failed to take screenshot - "+ot.message)}),!Oe)continue;const Ge=I.expected&&Le?I.expected:Pe;if(ye(Oe,Ge,Pe))break;me&&y.log(me.errorMessage),Le=!1}if(Le||y.log("captured a stable screenshot"),!I.expected)return{actual:Oe};if(Le)return y.log("screenshot matched expectation"),{};if(ye(Oe,I.expected,void 0))return y.log("screenshot matched expectation"),{};throw new Error(me.errorMessage)}catch(Oe){return Se(Oe)}}async screenshot(y,I){return await this.screenshotter.screenshotPage(y,I)}async close(y={}){if(this._closedState==="closed")return;y.reason&&(this.closeReason=y.reason);const I=!!y.runBeforeUnload;this._closedState!=="closing"&&(this._closedState="closing",await this.delegate.closePage(I).catch(D=>l.debugLogger.log("error",D))),I||await this._closedPromise}isClosed(){return this._closedState==="closed"}hasCrashed(){return this._crashed}isClosedOrClosingOrCrashed(){return this._closedState!=="open"||this._crashed}addWorker(y,I){this._workers.set(y,I),this.emit(ge.Events.Worker,I)}removeWorker(y){const I=this._workers.get(y);I&&(I.didClose(),this._workers.delete(y))}clearWorkers(){for(const[y,I]of this._workers)I.didClose(),this._workers.delete(y)}async setFileChooserInterceptedBy(y,I){const D=this.fileChooserIntercepted();y?this._fileChooserInterceptedBy.add(I):this._fileChooserInterceptedBy.delete(I),D!==this.fileChooserIntercepted()&&await this.delegate.updateFileChooserInterception()}fileChooserIntercepted(){return this._fileChooserInterceptedBy.size>0}frameNavigatedToNewDocument(y){this.emit(ge.Events.InternalFrameNavigatedToNewDocument,y);const I=y.origin();I&&this.browserContext.addVisitedOrigin(I)}allInitScripts(){const y=[...this.browserContext._pageBindings.values(),...this._pageBindings.values()].map(I=>I.initScript);return this.browserContext.bindingsInitScript&&y.unshift(this.browserContext.bindingsInitScript),[...y,...this.browserContext.initScripts,...this.initScripts]}getBinding(y){return this._pageBindings.get(y)||this.browserContext._pageBindings.get(y)}setScreencastOptions(y){this.delegate.setScreencastOptions(y).catch(I=>l.debugLogger.log("error",I)),this._frameThrottler.setThrottlingEnabled(!!y)}throttleScreencastFrameAck(y){this._frameThrottler.ack(y)}temporarilyDisableTracingScreencastThrottling(){this._frameThrottler.recharge()}async safeNonStallingEvaluateInAllFrames(y,I,D={}){await Promise.all(this.frames().map(async ie=>{try{await ie.nonStallingEvaluateInExistingContext(y,I)}catch(he){if(D.throwOnJSErrors&&n.isJavaScriptErrorInEvaluate(he))throw he}}))}async hideHighlight(){await Promise.all(this.frames().map(y=>y.hideHighlight().catch(()=>{})))}markAsServerSideOnly(){this._isServerSideOnly=!0}async snapshotForAI(y){return this.lastSnapshotFrameIds=[],(await _e(y,this.mainFrame(),0,this.lastSnapshotFrameIds)).join(`
`)}};ge.Events={Close:"close",Crash:"crash",Download:"download",EmulatedSizeChanged:"emulatedsizechanged",FileChooser:"filechooser",FrameAttached:"frameattached",FrameDetached:"framedetached",InternalFrameNavigatedToNewDocument:"internalframenavigatedtonewdocument",LocatorHandlerTriggered:"locatorhandlertriggered",ScreencastFrame:"screencastframe",Video:"video",WebSocket:"websocket",Worker:"worker"};let z=ge;const ne=class ne extends s.SdkObject{constructor(y,I){super(y,"worker"),this.existingExecutionContext=null,this.openScope=new h.LongStandingScope,this.url=I,this._executionContextCallback=()=>{},this._executionContextPromise=new Promise(D=>this._executionContextCallback=D)}createExecutionContext(y){return this.existingExecutionContext=new n.ExecutionContext(this,y,"worker"),this._executionContextCallback(this.existingExecutionContext),this.existingExecutionContext}didClose(){this.existingExecutionContext&&this.existingExecutionContext.contextDestroyed("Worker was closed"),this.emit(ne.Events.Close,this),this.openScope.close(new Error("Worker closed"))}async evaluateExpression(y,I,D){return n.evaluateExpression(await this._executionContextPromise,y,{returnByValue:!0,isFunction:I},D)}async evaluateExpressionHandle(y,I,D){return n.evaluateExpression(await this._executionContextPromise,y,{returnByValue:!1,isFunction:I},D)}};ne.Events={Close:"close"};let $=ne;const S=class S{static createInitScript(){return new J(`
      (() => {
        const module = {};
        ${O.source}
        const property = '${S.kController}';
        if (!globalThis[property])
          globalThis[property] = new (module.exports.BindingsController())(globalThis, '${S.kBindingName}');
      })();
    `)}constructor(y,I,D){this.name=y,this.playwrightFunction=I,this.initScript=new J(`globalThis['${S.kController}'].addBinding(${JSON.stringify(y)}, ${D})`),this.needsHandle=D,this.cleanupScript=`globalThis['${S.kController}'].removeBinding(${JSON.stringify(y)})`}static async dispatch(y,I,D){const{name:ie,seq:he,serializedArgs:me}=JSON.parse(I);try{(0,h.assert)(D.world);const ye=y.getBinding(ie);if(!ye)throw new Error(`Function "${ie}" is not exposed`);let Se;if(ye.needsHandle){const Oe=await D.evaluateExpressionHandle(`arg => globalThis['${S.kController}'].takeBindingHandle(arg)`,{isFunction:!0},{name:ie,seq:he}).catch(Pe=>null);Se=await ye.playwrightFunction({frame:D.frame,page:y,context:y.browserContext},Oe)}else{if(!Array.isArray(me))throw new Error("serializedArgs is not an array. This can happen when Array.prototype.toJSON is defined incorrectly");const Oe=me.map(Pe=>(0,b.parseEvaluationResultValue)(Pe));Se=await ye.playwrightFunction({frame:D.frame,page:y,context:y.browserContext},...Oe)}D.evaluateExpressionHandle(`arg => globalThis['${S.kController}'].deliverBindingResult(arg)`,{isFunction:!0},{name:ie,seq:he,result:Se}).catch(Oe=>l.debugLogger.log("error",Oe))}catch(ye){D.evaluateExpressionHandle(`arg => globalThis['${S.kController}'].deliverBindingResult(arg)`,{isFunction:!0},{name:ie,seq:he,error:ye}).catch(Se=>l.debugLogger.log("error",Se))}}};S.kController="__playwright__binding__controller__",S.kBindingName="__playwright__binding__";let q=S;class J{constructor(y){this.source=`(() => {
      ${y}
    })();`}}class le{constructor(y,I,D){this._acks=[],this._throttlingEnabled=!1,this._nonThrottledFrames=y,this._budget=y,this._defaultInterval=I,this._throttlingInterval=D,this._tick()}dispose(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}setThrottlingEnabled(y){this._throttlingEnabled=y}recharge(){for(const y of this._acks)y();this._acks=[],this._budget=this._nonThrottledFrames,this._timeoutId&&(clearTimeout(this._timeoutId),this._tick())}ack(y){if(!this._timeoutId){y();return}this._acks.push(y)}_tick(){const y=this._acks.shift();y&&(--this._budget,y()),this._throttlingEnabled&&this._budget<=0?this._timeoutId=setTimeout(()=>this._tick(),this._throttlingInterval):this._timeoutId=setTimeout(()=>this._tick(),this._defaultInterval)}}async function _e(j,y,I,D){const he=(await y.retryWithProgressAndTimeouts(j,[1e3,2e3,4e3,8e3],async ye=>{try{const Se=await j.race(y._utilityContext()),Oe=await j.race(Se.injectedScript()),Pe=await j.race(Oe.evaluate((Ne,Le)=>{const qe=Ne.document.body;return qe?Ne.ariaSnapshot(qe,{forAI:!0,refPrefix:Le}):!0},I?"f"+I:""));return Pe===!0?ye:Pe}catch(Se){if(y.isNonRetriableError(Se))throw Se;return ye}})).split(`
`),me=[];for(const ye of he){const Se=ye.match(/^(\s*)- iframe (?:\[active\] )?\[ref=(.*)\]/);if(!Se){me.push(ye);continue}const Oe=Se[1],Le=`${`aria-ref=${Se[2]} >> internal:control=enter-frame`} >> body`,qe=await j.race(y.selectors.resolveFrameForSelector(Le,{strict:!0}));if(!qe){me.push(ye);continue}const Ge=D.length+1;D.push(qe.frame._id);try{const ot=await _e(j,qe.frame,Ge,D);me.push(ye+":",...ot.map(dt=>Oe+"  "+dt))}catch{me.push(ye)}}return me}return au}var ou,R_;function EO(){if(R_)return ou;R_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{kLifecycleEvents:()=>e}),ou=te(P);const e=new Set(["load","domcontentloaded","networkidle","commit"]);return ou}var cu,L_;function hs(){if(L_)return cu;L_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(ne,S)=>{for(var j in S)r(ne,j,{get:S[j],enumerable:!0})},P=(ne,S,j,y)=>{if(S&&typeof S=="object"||typeof S=="function")for(let I of E(S))!V.call(ne,I)&&I!==j&&r(ne,I,{get:()=>S[I],enumerable:!(y=i(S,I))||y.enumerable});return ne},e=(ne,S,j)=>(j=ne!=null?t(R(ne)):{},P(!ne||!ne.__esModule?r(j,"default",{value:ne,enumerable:!0}):j,ne)),U=ne=>P(r({},"__esModule",{value:!0}),ne),C={};te(C,{Frame:()=>q,FrameManager:()=>$,NavigationAbortedError:()=>O}),cu=U(C);var w=Ir(),g=e(hi()),u=Pn(),_=ny(),f=bO(),d=hn(),v=Tr(),a=e(Oi()),s=e(fn()),n=Kr(),o=bn(),h=e(EO()),m=nr(),c=Dn(),l=Mr(),x=qr(),T=Vi(),b=Fr(),p=lf();class O extends Error{constructor(S,j){super(j),this.documentId=S}}const z="<dummy>";class ${constructor(S){this._frames=new Map,this._consoleMessageTags=new Map,this._signalBarriers=new Set,this._webSockets=new Map,this._page=S,this._mainFrame=void 0}createDummyMainFrameIfNeeded(){this._mainFrame||this.frameAttached(z,null)}dispose(){for(const S of this._frames.values())S._stopNetworkIdleTimer(),S._invalidateNonStallingEvaluations("Target crashed")}mainFrame(){return this._mainFrame}frames(){const S=[];return j(this._mainFrame),S;function j(y){S.push(y);for(const I of y.childFrames())j(I)}}frame(S){return this._frames.get(S)||null}frameAttached(S,j){const y=j?this._frames.get(j):null;if(y){(0,m.assert)(!this._frames.has(S));const I=new q(this._page,S,y);return this._frames.set(S,I),this._page.emit(n.Page.Events.FrameAttached,I),I}else return this._mainFrame?(this._frames.delete(this._mainFrame._id),this._mainFrame._id=S):((0,m.assert)(!this._frames.has(S)),this._mainFrame=new q(this._page,S,y)),this._frames.set(S,this._mainFrame),this._mainFrame}async waitForSignalsCreatedBy(S,j,y){if(!j)return y();const I=new J(S);this._signalBarriers.add(I),S.cleanupWhenAborted(()=>this._signalBarriers.delete(I));const D=await y();return await S.race(this._page.delegate.inputActionEpilogue()),await I.waitFor(),this._signalBarriers.delete(I),await new Promise((0,m.makeWaitForNextTask)()),D}frameWillPotentiallyRequestNavigation(){for(const S of this._signalBarriers)S.retain()}frameDidPotentiallyRequestNavigation(){for(const S of this._signalBarriers)S.release()}frameRequestedNavigation(S,j){const y=this._frames.get(S);if(!y)return;for(const D of this._signalBarriers)D.addFrameNavigation(y);if(y.pendingDocument()&&y.pendingDocument().documentId===j)return;const I=j?Array.from(y._inflightRequests).find(D=>D._documentId===j):void 0;y.setPendingDocument({documentId:j,request:I})}frameCommittedNewDocumentNavigation(S,j,y,I,D){const ie=this._frames.get(S);this.removeChildFramesRecursively(ie),this.clearWebSockets(ie),ie._url=j,ie._name=y;let he;const me=ie.pendingDocument();me?(me.documentId===void 0&&(me.documentId=I),me.documentId===I?ie._currentDocument=me:(he=me,ie._currentDocument={documentId:I,request:void 0}),ie.setPendingDocument(void 0)):ie._currentDocument={documentId:I,request:void 0},ie._onClearLifecycle();const ye={url:j,name:y,newDocument:ie._currentDocument,isPublic:!0};this._fireInternalFrameNavigation(ie,ye),D||(l.debugLogger.log("api",`  navigated to "${j}"`),this._page.frameNavigatedToNewDocument(ie)),ie.setPendingDocument(he)}frameCommittedSameDocumentNavigation(S,j){const y=this._frames.get(S);if(!y)return;const I=y.pendingDocument();I&&I.documentId===void 0&&I.request===void 0&&y.setPendingDocument(void 0),y._url=j;const D={url:j,name:y._name,isPublic:!0};this._fireInternalFrameNavigation(y,D),l.debugLogger.log("api",`  navigated to "${j}"`)}frameAbortedNavigation(S,j,y){const I=this._frames.get(S);if(!I||!I.pendingDocument()||y!==void 0&&I.pendingDocument().documentId!==y)return;const D={url:I._url,name:I._name,newDocument:I.pendingDocument(),error:new O(y,j),isPublic:!(y&&I._redirectedNavigations.has(y))};I.setPendingDocument(void 0),this._fireInternalFrameNavigation(I,D)}frameDetached(S){const j=this._frames.get(S);j&&(this._removeFramesRecursively(j),this._page.mainFrame()._recalculateNetworkIdle())}frameLifecycleEvent(S,j){const y=this._frames.get(S);y&&y._onLifecycleEvent(j)}requestStarted(S,j){const y=S.frame();if(this._inflightRequestStarted(S),S._documentId&&y.setPendingDocument({documentId:S._documentId,request:S}),S._isFavicon){j==null||j.abort("aborted").catch(()=>{});return}this._page.emitOnContext(w.BrowserContext.Events.Request,S),j&&new s.Route(S,j).handle([...this._page.requestInterceptors,...this._page.browserContext.requestInterceptors])}requestReceivedResponse(S){S.request()._isFavicon||this._page.emitOnContext(w.BrowserContext.Events.Response,S)}reportRequestFinished(S,j){this._inflightRequestFinished(S),!S._isFavicon&&this._page.emitOnContext(w.BrowserContext.Events.RequestFinished,{request:S,response:j})}requestFailed(S,j){const y=S.frame();if(this._inflightRequestFinished(S),y.pendingDocument()&&y.pendingDocument().request===S){let I=S.failure().errorText;j&&(I+="; maybe frame was detached?"),this.frameAbortedNavigation(y._id,I,y.pendingDocument().documentId)}S._isFavicon||this._page.emitOnContext(w.BrowserContext.Events.RequestFailed,S)}removeChildFramesRecursively(S){for(const j of S.childFrames())this._removeFramesRecursively(j)}_removeFramesRecursively(S){this.removeChildFramesRecursively(S),S._onDetached(),this._frames.delete(S._id),this._page.isClosed()||this._page.emit(n.Page.Events.FrameDetached,S)}_inflightRequestFinished(S){const j=S.frame();S._isFavicon||j._inflightRequests.has(S)&&(j._inflightRequests.delete(S),j._inflightRequests.size===0&&j._startNetworkIdleTimer())}_inflightRequestStarted(S){const j=S.frame();S._isFavicon||(j._inflightRequests.add(S),j._inflightRequests.size===1&&j._stopNetworkIdleTimer())}interceptConsoleMessage(S){if(S.type()!=="debug")return!1;const j=S.text(),y=this._consoleMessageTags.get(j);return y?(this._consoleMessageTags.delete(j),y(),!0):!1}clearWebSockets(S){S.parentFrame()||this._webSockets.clear()}onWebSocketCreated(S,j){const y=new s.WebSocket(this._page,j);this._webSockets.set(S,y)}onWebSocketRequest(S){const j=this._webSockets.get(S);j&&j.markAsNotified()&&this._page.emit(n.Page.Events.WebSocket,j)}onWebSocketResponse(S,j,y){const I=this._webSockets.get(S);j<400||I&&I.error(`${y}: ${j}`)}onWebSocketFrameSent(S,j,y){const I=this._webSockets.get(S);I&&I.frameSent(j,y)}webSocketFrameReceived(S,j,y){const I=this._webSockets.get(S);I&&I.frameReceived(j,y)}webSocketClosed(S){const j=this._webSockets.get(S);j&&j.closed(),this._webSockets.delete(S)}webSocketError(S,j){const y=this._webSockets.get(S);y&&y.error(j)}_fireInternalFrameNavigation(S,j){S.emit(q.Events.InternalNavigation,j)}}const ge=class ge extends v.SdkObject{constructor(S,j,y){super(S,"frame"),this._firedLifecycleEvents=new Set,this._firedNetworkIdleSelf=!1,this._url="",this._contextData=new Map,this._childFrames=new Set,this._name="",this._inflightRequests=new Set,this._setContentCounter=0,this._detachedScope=new m.LongStandingScope,this._raceAgainstEvaluationStallingEventsPromises=new Set,this._redirectedNavigations=new Map,this.attribution.frame=this,this._id=j,this._page=S,this._parentFrame=y,this._currentDocument={documentId:void 0,request:void 0},this.selectors=new f.FrameSelectors(this),this._contextData.set("main",{contextPromise:new b.ManualPromise,context:null}),this._contextData.set("utility",{contextPromise:new b.ManualPromise,context:null}),this._setContext("main",null),this._setContext("utility",null),this._parentFrame&&this._parentFrame._childFrames.add(this),this._firedLifecycleEvents.add("commit"),j!==z&&this._startNetworkIdleTimer()}isDetached(){return this._detachedScope.isClosed()}_onLifecycleEvent(S){this._firedLifecycleEvents.has(S)||(this._firedLifecycleEvents.add(S),this.emit(ge.Events.AddLifecycle,S),this===this._page.mainFrame()&&this._url!=="about:blank"&&l.debugLogger.log("api",`  "${S}" event fired`),this._page.mainFrame()._recalculateNetworkIdle())}_onClearLifecycle(){for(const S of this._firedLifecycleEvents)this.emit(ge.Events.RemoveLifecycle,S);this._firedLifecycleEvents.clear(),this._inflightRequests=new Set(Array.from(this._inflightRequests).filter(S=>S===this._currentDocument.request)),this._stopNetworkIdleTimer(),this._inflightRequests.size===0&&this._startNetworkIdleTimer(),this._page.mainFrame()._recalculateNetworkIdle(this),this._onLifecycleEvent("commit")}setPendingDocument(S){this._pendingDocument=S,S&&this._invalidateNonStallingEvaluations("Navigation interrupted the evaluation")}pendingDocument(){return this._pendingDocument}_invalidateNonStallingEvaluations(S){if(!this._raceAgainstEvaluationStallingEventsPromises.size)return;const j=new Error(S);for(const y of this._raceAgainstEvaluationStallingEventsPromises)y.reject(j)}async raceAgainstEvaluationStallingEvents(S){if(this._pendingDocument)throw new Error("Frame is currently attempting a navigation");if(this._page.browserContext.dialogManager.hasOpenDialogsForPage(this._page))throw new Error("Open JavaScript dialog prevents evaluation");const j=new b.ManualPromise;this._raceAgainstEvaluationStallingEventsPromises.add(j);try{return await Promise.race([S(),j])}finally{this._raceAgainstEvaluationStallingEventsPromises.delete(j)}}nonStallingRawEvaluateInExistingMainContext(S){return this.raceAgainstEvaluationStallingEvents(()=>{const j=this._existingMainContext();if(!j)throw new Error("Frame does not yet have a main execution context");return j.rawEvaluateJSON(S)})}nonStallingEvaluateInExistingContext(S,j){return this.raceAgainstEvaluationStallingEvents(()=>{var I;const y=(I=this._contextData.get(j))==null?void 0:I.context;if(!y)throw new Error("Frame does not yet have the execution context");return y.evaluateExpression(S,{isFunction:!1})})}_recalculateNetworkIdle(S){let j=this._firedNetworkIdleSelf;for(const y of this._childFrames)y._recalculateNetworkIdle(S),y._firedLifecycleEvents.has("networkidle")||(j=!1);j&&!this._firedLifecycleEvents.has("networkidle")&&(this._firedLifecycleEvents.add("networkidle"),this.emit(ge.Events.AddLifecycle,"networkidle"),this===this._page.mainFrame()&&this._url!=="about:blank"&&l.debugLogger.log("api",'  "networkidle" event fired')),S!==this&&this._firedLifecycleEvents.has("networkidle")&&!j&&(this._firedLifecycleEvents.delete("networkidle"),this.emit(ge.Events.RemoveLifecycle,"networkidle"))}async raceNavigationAction(S,j){return m.LongStandingScope.raceMultiple([this._detachedScope,this._page.openScope],j().catch(y=>{if(y instanceof O&&y.documentId){const I=this._redirectedNavigations.get(y.documentId);if(I)return S.log(`waiting for redirected navigation to "${I.url}"`),S.race(I.gotoPromise)}throw y}))}redirectNavigation(S,j,y){const I=new o.ProgressController((0,v.serverSideCallMetadata)(),this),D={url:S,gotoPromise:I.run(ie=>this.gotoImpl(ie,S,{referer:y}),0)};this._redirectedNavigations.set(j,D),D.gotoPromise.finally(()=>this._redirectedNavigations.delete(j))}async goto(S,j,y={}){const I=(0,m.constructURLBasedOnBaseURL)(this._page.browserContext._options.baseURL,j);return this.raceNavigationAction(S,async()=>this.gotoImpl(S,I,y))}async gotoImpl(S,j,y){const I=le("waitUntil",y.waitUntil===void 0?"load":y.waitUntil);S.log(`navigating to "${j}", waiting until "${I}"`);const ie=(this._page.extraHTTPHeaders()||[]).find(Le=>Le.name.toLowerCase()==="referer");let he=ie?ie.value:void 0;if(y.referer!==void 0){if(he!==void 0&&he!==y.referer)throw new Error('"referer" is already specified as extra HTTP header');he=y.referer}j=d.helper.completeUserURL(j);const me=[],ye=Le=>me.push(Le);this.on(ge.Events.InternalNavigation,ye);const Se=await S.race(this._page.delegate.navigateFrame(this,j,he)).finally(()=>this.off(ge.Events.InternalNavigation,ye));let Oe;if(Se.newDocumentId){const Le=Ge=>Ge.newDocument&&(Ge.newDocument.documentId===Se.newDocumentId||!Ge.error),qe=me.filter(Le);if(qe.length?Oe=qe[0]:Oe=await d.helper.waitForEvent(S,this,ge.Events.InternalNavigation,Le).promise,Oe.newDocument.documentId!==Se.newDocumentId)throw new O(Se.newDocumentId,`Navigation to "${j}" is interrupted by another navigation to "${Oe.url}"`);if(Oe.error)throw Oe.error}else{const Le=Ge=>!Ge.newDocument,qe=me.filter(Le);qe.length?Oe=qe[0]:Oe=await d.helper.waitForEvent(S,this,ge.Events.InternalNavigation,Le).promise}this._firedLifecycleEvents.has(I)||await d.helper.waitForEvent(S,this,ge.Events.AddLifecycle,Le=>Le===I).promise;const Pe=Oe.newDocument?Oe.newDocument.request:void 0;return Pe?S.race(Pe._finalRequest().response()):null}async _waitForNavigation(S,j,y){const I=le("waitUntil",y.waitUntil===void 0?"load":y.waitUntil);S.log(`waiting for navigation until "${I}"`);const D=await d.helper.waitForEvent(S,this,ge.Events.InternalNavigation,he=>he.error?!0:j&&!he.newDocument?!1:(S.log(`  navigated to "${this._url}"`),!0)).promise;if(D.error)throw D.error;this._firedLifecycleEvents.has(I)||await d.helper.waitForEvent(S,this,ge.Events.AddLifecycle,he=>he===I).promise;const ie=D.newDocument?D.newDocument.request:void 0;return ie?S.race(ie._finalRequest().response()):null}async _waitForLoadState(S,j){const y=le("state",j);this._firedLifecycleEvents.has(y)||await d.helper.waitForEvent(S,this,ge.Events.AddLifecycle,I=>I===y).promise}async frameElement(){return this._page.delegate.getFrameElement(this)}_context(S){return this._contextData.get(S).contextPromise.then(j=>{if(j instanceof a.ExecutionContext)return j;throw new Error(j.destroyedReason)})}_mainContext(){return this._context("main")}_existingMainContext(){var S;return((S=this._contextData.get("main"))==null?void 0:S.context)||null}_utilityContext(){return this._context("utility")}async evaluateExpression(S,j={},y){return await(await this._context(j.world??"main")).evaluateExpression(S,j,y)}async evaluateExpressionHandle(S,j={},y){return await(await this._context(j.world??"main")).evaluateExpressionHandle(S,j,y)}async querySelector(S,j){return l.debugLogger.log("api",`    finding element using the selector "${S}"`),this.selectors.query(S,j)}async waitForSelector(S,j,y,I,D){if(I.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(I.waitFor&&I.waitFor!=="visible")throw new Error("options.waitFor is not supported, did you mean options.state?");const{state:ie="visible"}=I;if(!["attached","detached","visible","hidden"].includes(ie))throw new Error("state: expected one of (attached|detached|visible|hidden)");y&&S.log(`waiting for ${this._asLocator(j)}${ie==="attached"?"":" to be "+ie}`);const he=this.retryWithProgressAndTimeouts(S,[0,20,50,100,100,500],async me=>{y&&await this._page.performActionPreChecks(S);const ye=await S.race(this.selectors.resolveInjectedForSelector(j,I,D));if(!ye)return ie==="hidden"||ie==="detached"?null:me;const Se=await S.raceWithCleanup(ye.injected.evaluateHandle((Ge,{info:ot,root:dt})=>{if(dt&&!dt.isConnected)throw Ge.createStacklessError("Element is not attached to the DOM");const yt=Ge.querySelectorAll(ot.parsed,dt||document),nt=yt[0],gt=nt?Ge.utils.isElementVisible(nt):!1;let Ut="";if(yt.length>1){if(ot.strict)throw Ge.strictModeViolationError(ot.parsed,yt);Ut=`  locator resolved to ${yt.length} elements. Proceeding with the first one: ${Ge.previewNode(yt[0])}`}else nt&&(Ut=`  locator resolved to ${gt?"visible":"hidden"} ${Ge.previewNode(nt)}`);return{log:Ut,element:nt,visible:gt,attached:!!nt}},{info:ye.info,root:ye.frame===this?D:void 0}),Ge=>Ge.dispose()),{log:Oe,visible:Pe,attached:Ne}=await S.race(Se.evaluate(Ge=>({log:Ge.log,visible:Ge.visible,attached:Ge.attached})));if(Oe&&S.log(Oe),!{attached:Ne,detached:!Ne,visible:Pe,hidden:!Pe}[ie])return Se.dispose(),me;if(I.omitReturnValue)return Se.dispose(),null;const qe=ie==="attached"||ie==="visible"?await S.race(Se.evaluateHandle(Ge=>Ge.element)):null;if(Se.dispose(),!qe)return null;I.__testHookBeforeAdoptNode&&await S.race(I.__testHookBeforeAdoptNode());try{const Ge=await S.race(ye.frame._mainContext());return await S.race(qe._adoptTo(Ge))}catch{return me}});return D?D._context._raceAgainstContextDestroyed(he):he}async dispatchEvent(S,j,y,I={},D,ie){await this._callOnElementOnceMatches(S,j,(he,me,ye)=>{he.dispatchEvent(me,ye.type,ye.eventInit)},{type:y,eventInit:I},{mainWorld:!0,...D},ie)}async evalOnSelector(S,j,y,I,D,ie){const he=await this.selectors.query(S,{strict:j},ie);if(!he)throw new Error(`Failed to find element matching selector "${S}"`);const me=await he.evaluateExpression(y,{isFunction:I},D);return he.dispose(),me}async evalOnSelectorAll(S,j,y,I,D){const ie=await this.selectors.queryArrayInMainWorld(S,D),he=await ie.evaluateExpression(j,{isFunction:y},I);return ie.dispose(),he}async maskSelectors(S,j){await(await(await this._utilityContext()).injectedScript()).evaluate((D,{parsed:ie,color:he})=>{D.maskSelectors(ie,he)},{parsed:S,color:j})}async querySelectorAll(S){return this.selectors.queryAll(S)}async queryCount(S){return await this.selectors.queryCount(S)}async content(){try{return await(await this._utilityContext()).evaluate(()=>{let j="";return document.doctype&&(j=new XMLSerializer().serializeToString(document.doctype)),document.documentElement&&(j+=document.documentElement.outerHTML),j})}catch(S){throw this.isNonRetriableError(S)?S:new Error("Unable to retrieve content because the page is navigating and changing the content.")}}async setContent(S,j,y){await this.raceNavigationAction(S,async()=>{const I=y.waitUntil===void 0?"load":y.waitUntil;S.log(`setting frame content, waiting until "${I}"`);const D=`--playwright--set--content--${this._id}--${++this._setContentCounter}--`,ie=await S.race(this._utilityContext()),he=new b.ManualPromise;this._page.frameManager._consoleMessageTags.set(D,()=>{this._onClearLifecycle(),he.resolve()}),S.cleanupWhenAborted(()=>this._page.frameManager._consoleMessageTags.delete(D));const me=S.race(he).then(()=>this._waitForLoadState(S,I)),ye=S.race(ie.evaluate(({html:Se,tag:Oe})=>{document.open(),console.debug(Oe),document.write(Se),document.close()},{html:j,tag:D}));return await Promise.all([ye,me]),null})}name(){return this._name||""}url(){return this._url}origin(){var S;if(this._url.startsWith("http"))return(S=s.parseURL(this._url))==null?void 0:S.origin}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}async addScriptTag(S){const{url:j=null,content:y=null,type:I=""}=S;if(!j&&!y)throw new Error("Provide an object with a `url`, `path` or `content` property");const D=await this._mainContext();return this._raceWithCSPError(async()=>{if(j!==null)return(await D.evaluateHandle(ie,{url:j,type:I})).asElement();const me=(await D.evaluateHandle(he,{content:y,type:I})).asElement();return this._page.delegate.cspErrorsAsynchronousForInlineScripts&&await D.evaluate(()=>!0),me});async function ie(me){const ye=document.createElement("script");ye.src=me.url,me.type&&(ye.type=me.type);const Se=new Promise((Oe,Pe)=>{ye.onload=Oe,ye.onerror=Ne=>Pe(typeof Ne=="string"?new Error(Ne):new Error(`Failed to load script at ${ye.src}`))});return document.head.appendChild(ye),await Se,ye}function he(me){const ye=document.createElement("script");ye.type=me.type||"text/javascript",ye.text=me.content;let Se=null;if(ye.onerror=Oe=>Se=Oe,document.head.appendChild(ye),Se)throw Se;return ye}}async addStyleTag(S){const{url:j=null,content:y=null}=S;if(!j&&!y)throw new Error("Provide an object with a `url`, `path` or `content` property");const I=await this._mainContext();return this._raceWithCSPError(async()=>j!==null?(await I.evaluateHandle(D,j)).asElement():(await I.evaluateHandle(ie,y)).asElement());async function D(he){const me=document.createElement("link");me.rel="stylesheet",me.href=he;const ye=new Promise((Se,Oe)=>{me.onload=Se,me.onerror=Oe});return document.head.appendChild(me),await ye,me}async function ie(he){const me=document.createElement("style");me.type="text/css",me.appendChild(document.createTextNode(he));const ye=new Promise((Se,Oe)=>{me.onload=Se,me.onerror=Oe});return document.head.appendChild(me),await ye,me}}async _raceWithCSPError(S){const j=[];let y,I,D;const ie=S().then(me=>y=me).catch(me=>I=me),he=new Promise(me=>{j.push(x.eventsHelper.addEventListener(this._page.browserContext,w.BrowserContext.Events.Console,ye=>{ye.page()!==this._page||ye.type()!=="error"||(ye.text().includes("Content-Security-Policy")||ye.text().includes("Content Security Policy"))&&(D=ye,me())}))});if(await Promise.race([ie,he]),x.eventsHelper.removeEventListeners(j),D)throw new Error(D.text());if(I)throw I;return y}async retryWithProgressAndTimeouts(S,j,y){const I=Symbol("continuePolling");j=[0,...j];let D=0;for(;;){const ie=j[Math.min(D++,j.length-1)];if(ie){const he=new Promise(me=>setTimeout(me,ie));await S.race(m.LongStandingScope.raceMultiple([this._page.openScope,this._detachedScope],he))}try{const he=await y(I);if(he===I)continue;return he}catch(he){if(this.isNonRetriableError(he))throw he;continue}}}isNonRetriableError(S){return!!((0,o.isAbortError)(S)||a.isJavaScriptErrorInEvaluate(S)||(0,c.isSessionClosedError)(S)||g.isNonRecoverableDOMError(S)||(0,T.isInvalidSelectorError)(S)||this.isDetached())}async _retryWithProgressIfNotConnected(S,j,y,I,D){return S.log(`waiting for ${this._asLocator(j)}`),this.retryWithProgressAndTimeouts(S,[0,20,50,100,100,500],async ie=>{I&&await this._page.performActionPreChecks(S);const he=await S.race(this.selectors.resolveInjectedForSelector(j,{strict:y}));if(!he)return ie;const me=await S.raceWithCleanup(he.injected.evaluateHandle((Pe,{info:Ne,callId:Le})=>{const qe=Pe.querySelectorAll(Ne.parsed,document);Le&&Pe.markTargetElements(new Set(qe),Le);const Ge=qe[0];let ot="";if(qe.length>1){if(Ne.strict)throw Pe.strictModeViolationError(Ne.parsed,qe);ot=`  locator resolved to ${qe.length} elements. Proceeding with the first one: ${Pe.previewNode(qe[0])}`}else Ge&&(ot=`  locator resolved to ${Pe.previewNode(Ge)}`);return{log:ot,success:!!Ge,element:Ge}},{info:he.info,callId:S.metadata.id}),Pe=>Pe.dispose()),{log:ye,success:Se}=await S.race(me.evaluate(Pe=>({log:Pe.log,success:Pe.success})));if(ye&&S.log(ye),!Se)return me.dispose(),ie;const Oe=await S.race(me.evaluateHandle(Pe=>Pe.element));me.dispose();try{const Pe=await D(Oe);return Pe==="error:notconnected"?(S.log("element was detached from the DOM, retrying"),ie):Pe}finally{Oe==null||Oe.dispose()}})}async rafrafTimeoutScreenshotElementWithProgress(S,j,y,I){return await this._retryWithProgressIfNotConnected(S,j,!0,!0,async D=>(await D._frame.rafrafTimeout(S,y),await this._page.screenshotter.screenshotElement(S,D,I)))}async click(S,j,y){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!y.force,I=>I._click(S,{...y,waitAfter:!y.noWaitAfter})))}async dblclick(S,j,y){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!y.force,I=>I._dblclick(S,y)))}async dragAndDrop(S,j,y,I){g.assertDone(await this._retryWithProgressIfNotConnected(S,j,I.strict,!I.force,async D=>D._retryPointerAction(S,"move and down",!1,async ie=>{await this._page.mouse.move(S,ie.x,ie.y),await this._page.mouse.down(S)},{...I,waitAfter:"disabled",position:I.sourcePosition}))),g.assertDone(await this._retryWithProgressIfNotConnected(S,y,I.strict,!1,async D=>D._retryPointerAction(S,"move and up",!1,async ie=>{await this._page.mouse.move(S,ie.x,ie.y),await this._page.mouse.up(S)},{...I,waitAfter:"disabled",position:I.targetPosition})))}async tap(S,j,y){if(!this._page.browserContext._options.hasTouch)throw new Error("The page does not support tap. Use hasTouch context option to enable touch support.");return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!y.force,I=>I._tap(S,y)))}async fill(S,j,y,I){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,I.strict,!I.force,D=>D._fill(S,y,I)))}async focus(S,j,y){g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!0,I=>I._focus(S)))}async blur(S,j,y){g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!0,I=>I._blur(S)))}async generateLocatorString(S,j){const y=await S.race(this.selectors.query(j));if(!y)throw new Error(`No element matching ${this._asLocator(j)}`);const I=await S.race(y.evaluateInUtility(async([he,me])=>he.generateSelectorSimple(me),{}));if(!I)throw new Error(`Unable to generate locator for ${this._asLocator(j)}`);let D=y._frame;const ie=[I];for(;D!=null&&D.parentFrame();){const he=await S.race(D.frameElement());if(he){const me=await S.race(he.evaluateInUtility(async([ye,Se])=>ye.generateSelectorSimple(Se),{}));if(he.dispose(),me==="error:notconnected"||!me)throw new Error(`Unable to generate locator for ${this._asLocator(j)}`);ie.push(me)}D=D.parentFrame()}return(0,m.asLocator)(this._page.browserContext._browser.sdkLanguage(),ie.reverse().join(" >> internal:control=enter-frame >> "))}async textContent(S,j,y,I){return this._callOnElementOnceMatches(S,j,(D,ie)=>ie.textContent,void 0,y,I)}async innerText(S,j,y,I){return this._callOnElementOnceMatches(S,j,(D,ie)=>{if(ie.namespaceURI!=="http://www.w3.org/1999/xhtml")throw D.createStacklessError("Node is not an HTMLElement");return ie.innerText},void 0,y,I)}async innerHTML(S,j,y,I){return this._callOnElementOnceMatches(S,j,(D,ie)=>ie.innerHTML,void 0,y,I)}async getAttribute(S,j,y,I,D){return this._callOnElementOnceMatches(S,j,(ie,he,me)=>he.getAttribute(me.name),{name:y},I,D)}async inputValue(S,j,y,I){return this._callOnElementOnceMatches(S,j,(D,ie)=>{const he=D.retarget(ie,"follow-label");if(!he||he.nodeName!=="INPUT"&&he.nodeName!=="TEXTAREA"&&he.nodeName!=="SELECT")throw D.createStacklessError("Node is not an <input>, <textarea> or <select> element");return he.value},void 0,y,I)}async highlight(S,j){const y=await S.race(this.selectors.resolveInjectedForSelector(j));if(y)return await S.race(y.injected.evaluate((I,{info:D})=>I.highlight(D.parsed),{info:y.info}))}async hideHighlight(){return this.raceAgainstEvaluationStallingEvents(async()=>await(await(await this._utilityContext()).injectedScript()).evaluate(y=>y.hideHighlight()))}async _elementState(S,j,y,I,D){const ie=await this._callOnElementOnceMatches(S,j,(he,me,ye)=>he.elementState(me,ye.state),{state:y},I,D);return ie.received==="error:notconnected"&&g.throwElementIsNotAttached(),ie.matches}async isVisible(S,j,y={},I){return S.log(`  checking visibility of ${this._asLocator(j)}`),await this.isVisibleInternal(S,j,y,I)}async isVisibleInternal(S,j,y={},I){try{const D=await S.race(this.selectors.resolveInjectedForSelector(j,y,I));return D?await S.race(D.injected.evaluate((ie,{info:he,root:me})=>{const ye=ie.querySelector(he.parsed,me||document,he.strict);return(ye?ie.elementState(ye,"visible"):{matches:!1,received:"error:notconnected"}).matches},{info:D.info,root:D.frame===this?I:void 0})):!1}catch(D){if(this.isNonRetriableError(D))throw D;return!1}}async isHidden(S,j,y={},I){return!await this.isVisible(S,j,y,I)}async isDisabled(S,j,y,I){return this._elementState(S,j,"disabled",y,I)}async isEnabled(S,j,y,I){return this._elementState(S,j,"enabled",y,I)}async isEditable(S,j,y,I){return this._elementState(S,j,"editable",y,I)}async isChecked(S,j,y,I){return this._elementState(S,j,"checked",y,I)}async hover(S,j,y){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!y.force,I=>I._hover(S,y)))}async selectOption(S,j,y,I,D){return await this._retryWithProgressIfNotConnected(S,j,D.strict,!D.force,ie=>ie._selectOption(S,y,I,D))}async setInputFiles(S,j,y){const I=await(0,_.prepareFilesForUpload)(this,y);return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!0,D=>D._setInputFiles(S,I)))}async type(S,j,y,I){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,I.strict,!0,D=>D._type(S,y,I)))}async press(S,j,y,I){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,I.strict,!0,D=>D._press(S,y,I)))}async check(S,j,y){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!y.force,I=>I._setChecked(S,!0,y)))}async uncheck(S,j,y){return g.assertDone(await this._retryWithProgressIfNotConnected(S,j,y.strict,!y.force,I=>I._setChecked(S,!1,y)))}async waitForTimeout(S,j){return S.wait(j)}async ariaSnapshot(S,j,y){return await this._retryWithProgressIfNotConnected(S,j,!0,!0,I=>S.race(I.ariaSnapshot(y)))}async expect(S,j,y,I,D){return S.log(`${(0,m.renderTitleForCall)(S.metadata)}${I?` with timeout ${I}ms`:""}`),await this._expectImpl(S,j,y,D)}async _expectImpl(S,j,y,I){const D={isSet:!1},ie=me=>{me.matches===y.isNot&&(S.metadata.error={error:{name:"Expect",message:"Expect failed"}})},he=(me,ye)=>{if(a.isJavaScriptErrorInEvaluate(me)||(0,T.isInvalidSelectorError)(me))throw me;const Se={matches:y.isNot,log:(0,p.compressCallLog)(S.metadata.log)};return D.isSet&&(Se.received=D.received),me instanceof u.TimeoutError&&(Se.timedOut=!0),ie(Se),ye&&I?I(Se):Se};S.legacySetErrorHandler(me=>he(me,!0));try{j&&S.log(`waiting for ${this._asLocator(j)}`),await this._page.performActionPreChecks(S),S.legacyDisableTimeout();try{const ye=await this._expectInternal(S,j,y,D,!0);if(ye.matches!==y.isNot)return ye}catch(ye){if(this.isNonRetriableError(ye))throw ye}S.legacyEnableTimeout();const me=await this.retryWithProgressAndTimeouts(S,[100,250,500,1e3],async ye=>{await this._page.performActionPreChecks(S);const{matches:Se,received:Oe}=await this._expectInternal(S,j,y,D,!1);return Se===y.isNot?ye:{matches:Se,received:Oe}});return ie(me),me}catch(me){return he(me,!1)}}async _expectInternal(S,j,y,I,D){const ie=ot=>D?ot:S.race(ot),he=j?await ie(this.selectors.resolveFrameForSelector(j,{strict:!0})):void 0,{frame:me,info:ye}=he||{frame:this,info:void 0},Se=y.expression==="to.have.property"?"main":(ye==null?void 0:ye.world)??"utility",Oe=await ie(me._context(Se)),Pe=await ie(Oe.injectedScript()),{log:Ne,matches:Le,received:qe,missingReceived:Ge}=await ie(Pe.evaluate(async(ot,{info:dt,options:yt,callId:nt})=>{const gt=dt?ot.querySelectorAll(dt.parsed,document):[];nt&&ot.markTargetElements(new Set(gt),nt);const Ut=yt.expression==="to.have.count"||yt.expression.endsWith(".array");let Xt="";if(Ut)Xt=`  locator resolved to ${gt.length} element${gt.length===1?"":"s"}`;else{if(gt.length>1)throw ot.strictModeViolationError(dt.parsed,gt);gt.length&&(Xt=`  locator resolved to ${ot.previewNode(gt[0])}`)}return{log:Xt,...await ot.expect(gt[0],yt,gt)}},{info:ye,options:y,callId:S.metadata.id}));return Ne&&S.log(Ne),Le===y.isNot&&(I.received=Ge?"<element(s) not found>":qe,I.isSet=!0,!Ge&&!Array.isArray(qe)&&S.log(`  unexpected value "${_e(y.expression,qe)}"`)),{matches:Le,received:qe}}async waitForFunctionExpression(S,j,y,I,D,ie="main"){return typeof D.pollingInterval=="number"&&(0,m.assert)(D.pollingInterval>0,"Cannot poll with non-positive interval: "+D.pollingInterval),j=a.normalizeEvaluationExpression(j,y),this.retryWithProgressAndTimeouts(S,[100],async()=>{const he=ie==="main"?await S.race(this._mainContext()):await S.race(this._utilityContext()),me=await S.race(he.injectedScript()),ye=await S.race(me.evaluateHandle((Oe,{expression:Pe,isFunction:Ne,polling:Le,arg:qe})=>{const Ge=()=>{let Ut=globalThis.eval(Pe);return Ne===!0?Ut=Ut(qe):Ne===!1?Ut=Ut:typeof Ut=="function"&&(Ut=Ut(qe)),Ut};let ot,dt,yt=!1;const nt=new Promise((Ut,Xt)=>{ot=Ut,dt=Xt}),gt=()=>{if(!yt)try{const Ut=Ge();if(Ut){ot(Ut);return}typeof Le!="number"?Oe.utils.builtins.requestAnimationFrame(gt):Oe.utils.builtins.setTimeout(gt,Le)}catch(Ut){dt(Ut)}};return gt(),{result:nt,abort:()=>yt=!0}},{expression:j,isFunction:y,polling:D.pollingInterval,arg:I}));S.cleanupWhenAborted(()=>ye.evaluate(Oe=>Oe.abort()).finally(()=>ye.dispose()));const Se=await S.race(ye.evaluateHandle(Oe=>Oe.result));return ye.dispose(),Se})}async waitForFunctionValueInUtility(S,j){const y=`() => {
      const result = (${j})();
      if (!result)
        return result;
      return JSON.stringify(result);
    }`,I=await this.waitForFunctionExpression(S,y,!0,void 0,{},"utility");return JSON.parse(I.rawValue())}async title(){return(await this._utilityContext()).evaluate(()=>document.title)}async rafrafTimeout(S,j){if(j===0)return;const y=await S.race(this._utilityContext());await Promise.all([S.race(y.evaluate(()=>new Promise(I=>{requestAnimationFrame(()=>{requestAnimationFrame(I)})}))),S.wait(j)])}_onDetached(){this._stopNetworkIdleTimer(),this._detachedScope.close(new Error("Frame was detached"));for(const S of this._contextData.values())S.context&&S.context.contextDestroyed("Frame was detached"),S.contextPromise.resolve({destroyedReason:"Frame was detached"});this._parentFrame&&this._parentFrame._childFrames.delete(this),this._parentFrame=null}async _callOnElementOnceMatches(S,j,y,I,D,ie){const he=y.toString();S.log(`waiting for ${this._asLocator(j)}`);const me=this.retryWithProgressAndTimeouts(S,[0,20,50,100,100,500],async ye=>{const Se=await S.race(this.selectors.resolveInjectedForSelector(j,D,ie));if(!Se)return ye;const{log:Oe,success:Pe,value:Ne}=await S.race(Se.injected.evaluate((Le,{info:qe,callbackText:Ge,taskData:ot,callId:dt,root:yt})=>{const nt=Le.eval(Ge),gt=Le.querySelector(qe.parsed,yt||document,qe.strict);if(!gt)return{success:!1};const Ut=`  locator resolved to ${Le.previewNode(gt)}`;return dt&&Le.markTargetElements(new Set([gt]),dt),{log:Ut,success:!0,value:nt(Le,gt,ot)}},{info:Se.info,callbackText:he,taskData:I,callId:S.metadata.id,root:Se.frame===this?ie:void 0}));return Oe&&S.log(Oe),Pe?Ne:ye});return ie?ie._context._raceAgainstContextDestroyed(me):me}_setContext(S,j){const y=this._contextData.get(S);y.context=j,j?y.contextPromise.resolve(j):y.contextPromise=new b.ManualPromise}_contextCreated(S,j){const y=this._contextData.get(S);y.context&&(y.context.contextDestroyed("Execution context was destroyed, most likely because of a navigation"),this._setContext(S,null)),this._setContext(S,j)}_contextDestroyed(S){if(!this._detachedScope.isClosed()){S.contextDestroyed("Execution context was destroyed, most likely because of a navigation");for(const[j,y]of this._contextData)y.context===S&&this._setContext(j,null)}}_startNetworkIdleTimer(){(0,m.assert)(!this._networkIdleTimer),!(this._firedLifecycleEvents.has("networkidle")||this._detachedScope.isClosed())&&(this._networkIdleTimer=setTimeout(()=>{this._firedNetworkIdleSelf=!0,this._page.mainFrame()._recalculateNetworkIdle()},500))}_stopNetworkIdleTimer(){this._networkIdleTimer&&clearTimeout(this._networkIdleTimer),this._networkIdleTimer=void 0,this._firedNetworkIdleSelf=!1}async extendInjectedScript(S,j){return(await(await this._context("main")).injectedScript()).evaluateHandle((D,{source:ie,arg:he})=>D.extend(ie,he),{source:S,arg:j})}async resetStorageForCurrentOriginBestEffort(S){await(await this._utilityContext()).evaluate(async({ls:y})=>{var D;sessionStorage.clear(),localStorage.clear();for(const ie of y||[])localStorage[ie.name]=ie.value;const I=navigator.serviceWorker?await navigator.serviceWorker.getRegistrations():[];await Promise.all(I.map(async ie=>{!ie.installing&&!ie.waiting&&!ie.active?ie.unregister().catch(()=>{}):await ie.unregister().catch(()=>{})}));for(const ie of await((D=indexedDB.databases)==null?void 0:D.call(indexedDB))||[])ie.name&&indexedDB.deleteDatabase(ie.name)},{ls:S==null?void 0:S.localStorage}).catch(()=>{})}_asLocator(S){return(0,m.asLocator)(this._page.browserContext._browser.sdkLanguage(),S)}};ge.Events={InternalNavigation:"internalnavigation",AddLifecycle:"addlifecycle",RemoveLifecycle:"removelifecycle"};let q=ge;class J{constructor(S){this._protectCount=0,this._promise=new b.ManualPromise,this._progress=S,this.retain()}waitFor(){return this.release(),this._progress.race(this._promise)}addFrameNavigation(S){if(S.parentFrame())return;this.retain();const j=d.helper.waitForEvent(this._progress,S,q.Events.InternalNavigation,y=>y.isPublic?(!y.error&&this._progress&&this._progress.log(`  navigated to "${S._url}"`),!0):!1);m.LongStandingScope.raceMultiple([S._page.openScope,S._detachedScope],j.promise).catch(()=>{}).finally(()=>{j.dispose(),this.release()})}retain(){++this._protectCount}release(){--this._protectCount,this._protectCount||this._promise.resolve()}}function le(ne,S){if(S==="networkidle0"&&(S="networkidle"),!h.kLifecycleEvents.has(S))throw new Error(`${ne}: expected one of (load|domcontentloaded|networkidle|commit)`);return S}function _e(ne,S){return ne==="to.match.aria"?S&&S.raw:S}return cu}var lu,D_;function sy(){if(D_)return lu;D_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(T,b)=>{for(var p in b)r(T,p,{get:b[p],enumerable:!0})},P=(T,b,p,O)=>{if(b&&typeof b=="object"||typeof b=="function")for(let z of E(b))!V.call(T,z)&&z!==p&&r(T,z,{get:()=>b[z],enumerable:!(O=i(b,z))||O.enumerable});return T},e=(T,b,p)=>(p=T!=null?t(R(T)):{},P(!T||!T.__esModule?r(p,"default",{value:T,enumerable:!0}):p,T)),U=T=>P(r({},"__esModule",{value:!0}),T),C={};te(C,{HarTracer:()=>h}),lu=U(C);var w=nr(),g=nr(),u=qr(),_=Fr(),f=Ar(),d=Ir(),v=Fo(),a=hs(),s=hn(),n=e(fn());const o="HTTP/1.1";class h{constructor(b,p,O,z){this._barrierPromises=new Set,this._pageEntries=new Map,this._eventListeners=[],this._started=!1,this._context=b,this._page=p,this._delegate=O,this._options=z,z.slimMode&&(z.omitSecurityDetails=!0,z.omitCookies=!0,z.omitTiming=!0,z.omitServerIP=!0,z.omitSizes=!0,z.omitPages=!0),this._entrySymbol=Symbol("requestHarEntry"),this._baseURL=b instanceof v.APIRequestContext?b._defaultOptions().baseURL:b._options.baseURL}start(b){if(this._started)return;this._options.omitScripts=b.omitScripts,this._started=!0;const p=this._context instanceof v.APIRequestContext?this._context:this._context.fetchRequest;if(this._eventListeners=[u.eventsHelper.addEventListener(p,v.APIRequestContext.Events.Request,O=>this._onAPIRequest(O)),u.eventsHelper.addEventListener(p,v.APIRequestContext.Events.RequestFinished,O=>this._onAPIRequestFinished(O))],this._context instanceof d.BrowserContext){this._eventListeners.push(u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.Page,O=>this._createPageEntryIfNeeded(O)),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.Request,O=>this._onRequest(O)),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.RequestFinished,({request:O,response:z})=>this._onRequestFinished(O,z).catch(()=>{})),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.RequestFailed,O=>this._onRequestFailed(O)),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.Response,O=>this._onResponse(O)),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.RequestAborted,O=>this._onRequestAborted(O)),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.RequestFulfilled,O=>this._onRequestFulfilled(O)),u.eventsHelper.addEventListener(this._context,d.BrowserContext.Events.RequestContinued,O=>this._onRequestContinued(O)));for(const O of this._context.pages())this._createPageEntryIfNeeded(O)}}_shouldIncludeEntryWithUrl(b){return!this._options.urlFilter||(0,g.urlMatches)(this._baseURL,b,this._options.urlFilter)}_entryForRequest(b){return b[this._entrySymbol]}_createPageEntryIfNeeded(b){if(!b||this._options.omitPages||this._page&&b!==this._page)return;let p=this._pageEntries.get(b);if(!p){const O=new Date;p={startedDateTime:O.toISOString(),id:b.guid,title:"",pageTimings:this._options.omitTiming?{}:{onContentLoad:-1,onLoad:-1}},p[x]=O,b.mainFrame().on(a.Frame.Events.AddLifecycle,z=>{z==="load"&&this._onLoad(b,p),z==="domcontentloaded"&&this._onDOMContentLoaded(b,p)}),this._pageEntries.set(b,p)}return p}_onDOMContentLoaded(b,p){const O=b.mainFrame().evaluateExpression(String(()=>({title:document.title,domContentLoaded:performance.timing.domContentLoadedEventStart})),{isFunction:!0,world:"utility"}).then(z=>{p.title=z.title,this._options.omitTiming||(p.pageTimings.onContentLoad=z.domContentLoaded)}).catch(()=>{});this._addBarrier(b,O)}_onLoad(b,p){const O=b.mainFrame().evaluateExpression(String(()=>({title:document.title,loaded:performance.timing.loadEventStart})),{isFunction:!0,world:"utility"}).then(z=>{p.title=z.title,this._options.omitTiming||(p.pageTimings.onLoad=z.loaded)}).catch(()=>{});this._addBarrier(b,O)}_addBarrier(b,p){if(!b)return null;if(!this._options.waitForContentOnStop)return;const O=b.openScope.safeRace(p);this._barrierPromises.add(O),O.then(()=>this._barrierPromises.delete(O))}_onAPIRequest(b){var O;if(!this._shouldIncludeEntryWithUrl(b.url.toString()))return;const p=m(b.method,b.url,void 0,this._options);p._apiRequest=!0,this._options.omitCookies||(p.request.cookies=b.cookies),p.request.headers=Object.entries(b.headers).map(([z,$])=>({name:z,value:$})),p.request.postData=this._postDataForBuffer(b.postData||null,b.headers["content-type"],this._options.content),this._options.omitSizes||(p.request.bodySize=((O=b.postData)==null?void 0:O.length)||0),b[this._entrySymbol]=p,this._started&&this._delegate.onEntryStarted(p)}_onAPIRequestFinished(b){var $;const p=this._entryForRequest(b.requestEvent);if(!p)return;p.response.status=b.statusCode,p.response.statusText=b.statusMessage,p.response.httpVersion=b.httpVersion,p.response.redirectURL=b.headers.location||"",this._options.omitServerIP||(p.serverIPAddress=b.serverIPAddress,p._serverPort=b.serverPort),this._options.omitTiming||(p.timings=b.timings,this._computeHarEntryTotalTime(p)),this._options.omitSecurityDetails||(p._securityDetails=b.securityDetails);for(let q=0;q<b.rawHeaders.length;q+=2)p.response.headers.push({name:b.rawHeaders[q],value:b.rawHeaders[q+1]});p.response.cookies=this._options.omitCookies?[]:b.cookies.map(q=>({...q,expires:q.expires===-1?void 0:l(q.expires)}));const O=p.response.content,z=b.headers["content-type"];z&&(O.mimeType=z),this._storeResponseContent(b.body,O,"other"),this._options.omitSizes||(p.response.bodySize=(($=b.body)==null?void 0:$.length)??0),this._started&&this._delegate.onEntryFinished(p)}_onRequest(b){var q,J;if(!this._shouldIncludeEntryWithUrl(b.url()))return;const p=(q=b.frame())==null?void 0:q._page;if(this._page&&p!==this._page)return;const O=n.parseURL(b.url());if(!O)return;const z=this._createPageEntryIfNeeded(p),$=m(b.method(),O,(J=b.frame())==null?void 0:J.guid,this._options);if(z&&($.pageref=z.id),this._recordRequestHeadersAndCookies($,b.headers()),$.request.postData=this._postDataForRequest(b,this._options.content),this._options.omitSizes||($.request.bodySize=b.bodySize()),b.redirectedFrom()){const le=this._entryForRequest(b.redirectedFrom());le&&(le.response.redirectURL=b.url())}b[this._entrySymbol]=$,(0,w.assert)(this._started),this._delegate.onEntryStarted($)}_recordRequestHeadersAndCookies(b,p){if(!this._options.omitCookies){b.request.cookies=[];for(const O of p.filter(z=>z.name.toLowerCase()==="cookie"))b.request.cookies.push(...O.value.split(";").map(c))}b.request.headers=p}_recordRequestOverrides(b,p){!p.overrides()||!this._options.recordRequestOverrides||(b.request.method=p.method(),b.request.url=p.url(),b.request.postData=this._postDataForRequest(p,this._options.content),this._recordRequestHeadersAndCookies(b,p.headers()))}async _onRequestFinished(b,p){var _e;if(!p)return;const O=this._entryForRequest(b);if(!O)return;const z=(_e=b.frame())==null?void 0:_e._page;this._options.omitServerIP||this._addBarrier(z||b.serviceWorker(),p.serverAddr().then(ge=>{ge!=null&&ge.ipAddress&&(O.serverIPAddress=ge.ipAddress),ge!=null&&ge.port&&(O._serverPort=ge.port)})),this._options.omitSecurityDetails||this._addBarrier(z||b.serviceWorker(),p.securityDetails().then(ge=>{ge&&(O._securityDetails=ge)}));const $=p.httpVersion();O.request.httpVersion=$,O.response.httpVersion=$;const q=this._options.omitSizes?void 0:{_encodedBodySize:-1,_decodedBodySize:-1,barrier:new _.ManualPromise,_check:function(){this._encodedBodySize!==-1&&this._decodedBodySize!==-1&&(O.response.content.compression=Math.max(0,this._decodedBodySize-this._encodedBodySize),this.barrier.resolve())},setEncodedBodySize:function(ge){this._encodedBodySize=ge,this._check()},setDecodedBodySize:function(ge){this._decodedBodySize=ge,this._check()}};q&&this._addBarrier(z||b.serviceWorker(),q.barrier);const J=p.body().then(ge=>{if(this._options.omitScripts&&b.resourceType()==="script"){q==null||q.setDecodedBodySize(0);return}const ne=O.response.content;q==null||q.setDecodedBodySize(ge.length),this._storeResponseContent(ge,ne,b.resourceType())}).catch(()=>{q==null||q.setDecodedBodySize(0)}).then(()=>{this._started&&this._delegate.onEntryFinished(O)});this._addBarrier(z||b.serviceWorker(),J);const le=p.timing();O.timings.receive=p.request()._responseEndTiming!==-1?s.helper.millisToRoundishMillis(p.request()._responseEndTiming-le.responseStart):-1,this._computeHarEntryTotalTime(O),this._options.omitSizes||this._addBarrier(z||b.serviceWorker(),p.sizes().then(ge=>{O.response.bodySize=ge.responseBodySize,O.response.headersSize=ge.responseHeadersSize,O.response._transferSize=ge.transferSize,O.request.headersSize=ge.requestHeadersSize,q==null||q.setEncodedBodySize(ge.responseBodySize)}))}async _onRequestFailed(b){const p=this._entryForRequest(b);p&&(b._failureText!==null&&(p.response._failureText=b._failureText),this._recordRequestOverrides(p,b),this._started&&this._delegate.onEntryFinished(p))}_onRequestAborted(b){const p=this._entryForRequest(b);p&&(p._wasAborted=!0)}_onRequestFulfilled(b){const p=this._entryForRequest(b);p&&(p._wasFulfilled=!0)}_onRequestContinued(b){const p=this._entryForRequest(b);p&&(p._wasContinued=!0)}_storeResponseContent(b,p,O){if(!b){p.size=0;return}if(this._options.omitSizes||(p.size=b.length),this._options.content==="embed")(0,g.isTextualMimeType)(p.mimeType)&&O!=="font"?p.text=b.toString():(p.text=b.toString("base64"),p.encoding="base64");else if(this._options.content==="attach"){const z=(0,w.calculateSha1)(b)+"."+(f.mime.getExtension(p.mimeType)||"dat");this._options.includeTraceInfo?p._sha1=z:p._file=z,this._started&&this._delegate.onContentBlob(z,b)}}_onResponse(b){var q;const p=this._entryForRequest(b.request());if(!p)return;const O=(q=b.frame())==null?void 0:q._page,z=this._createPageEntryIfNeeded(O),$=b.request();if(p.response={status:b.status(),statusText:b.statusText(),httpVersion:b.httpVersion(),cookies:[],headers:[],content:{size:-1,mimeType:"x-unknown"},headersSize:-1,bodySize:-1,redirectURL:"",_transferSize:this._options.omitSizes?void 0:-1},!this._options.omitTiming){const J=z?z[x].valueOf():0,le=b.timing();z&&J>le.startTime&&(z.startedDateTime=new Date(le.startTime).toISOString());const _e=le.domainLookupEnd!==-1?s.helper.millisToRoundishMillis(le.domainLookupEnd-le.domainLookupStart):-1,ge=le.connectEnd!==-1?s.helper.millisToRoundishMillis(le.connectEnd-le.connectStart):-1,ne=le.connectEnd!==-1?s.helper.millisToRoundishMillis(le.connectEnd-le.secureConnectionStart):-1,S=le.responseStart!==-1?s.helper.millisToRoundishMillis(le.responseStart-le.requestStart):-1,j=-1;p.timings={dns:_e,connect:ge,ssl:ne,send:0,wait:S,receive:j},this._computeHarEntryTotalTime(p)}this._recordRequestOverrides(p,$),this._addBarrier(O||$.serviceWorker(),$.rawRequestHeaders().then(J=>{this._recordRequestHeadersAndCookies(p,J)})),this._recordResponseHeaders(p,b.headers()),this._addBarrier(O||$.serviceWorker(),b.rawResponseHeaders().then(J=>{this._recordResponseHeaders(p,J)}))}_recordResponseHeaders(b,p){this._options.omitCookies||(b.response.cookies=p.filter(z=>z.name.toLowerCase()==="set-cookie").map(z=>c(z.value))),b.response.headers=p;const O=p.find(z=>z.name.toLowerCase()==="content-type");O&&(b.response.content.mimeType=O.value)}_computeHarEntryTotalTime(b){b.time=[b.timings.dns,b.timings.connect,b.timings.ssl,b.timings.wait,b.timings.receive].reduce((p,O)=>(O||-1)>0?O+p:p,0)}async flush(){await Promise.all(this._barrierPromises)}stop(){this._started=!1,u.eventsHelper.removeEventListeners(this._eventListeners),this._barrierPromises.clear();const b=this._context instanceof d.BrowserContext?this._context:void 0,p={version:"1.2",creator:{name:"Playwright",version:(0,g.getPlaywrightVersion)()},browser:{name:(b==null?void 0:b._browser.options.name)||"",version:(b==null?void 0:b._browser.version())||""},pages:this._pageEntries.size?Array.from(this._pageEntries.values()):void 0,entries:[]};if(!this._options.omitTiming)for(const O of p.pages||[]){const z=O[x].valueOf();typeof O.pageTimings.onContentLoad=="number"&&O.pageTimings.onContentLoad>=0?O.pageTimings.onContentLoad-=z:O.pageTimings.onContentLoad=-1,typeof O.pageTimings.onLoad=="number"&&O.pageTimings.onLoad>=0?O.pageTimings.onLoad-=z:O.pageTimings.onLoad=-1}return this._pageEntries.clear(),p}_postDataForRequest(b,p){const O=b.postDataBuffer();if(!O)return;const z=b.headerValue("content-type");return this._postDataForBuffer(O,z,p)}_postDataForBuffer(b,p,O){if(!b)return;p??(p="application/octet-stream");const z={mimeType:p,text:"",params:[]};if(O==="embed"&&p!=="application/octet-stream"&&(z.text=b.toString()),O==="attach"){const $=(0,w.calculateSha1)(b)+"."+(f.mime.getExtension(p)||"dat");this._options.includeTraceInfo?z._sha1=$:z._file=$,this._delegate.onContentBlob($,b)}if(p==="application/x-www-form-urlencoded"){const $=new URLSearchParams(b.toString());for(const[q,J]of $.entries())z.params.push({name:q,value:J})}return z}}function m(T,b,p,O){return{_frameref:O.includeTraceInfo?p:void 0,_monotonicTime:O.includeTraceInfo?(0,w.monotonicTime)():void 0,startedDateTime:new Date().toISOString(),time:-1,request:{method:T,url:b.toString(),httpVersion:o,cookies:[],headers:[],queryString:[...b.searchParams].map($=>({name:$[0],value:$[1]})),headersSize:-1,bodySize:-1},response:{status:-1,statusText:"",httpVersion:o,cookies:[],headers:[],content:{size:-1,mimeType:"x-unknown"},headersSize:-1,bodySize:-1,redirectURL:"",_transferSize:O.omitSizes?void 0:-1},cache:{},timings:{send:-1,wait:-1,receive:-1}}}function c(T){const b={name:"",value:""};let p=!0;for(const O of T.split(/; */)){const z=O.indexOf("="),$=z!==-1?O.substr(0,z).trim():O.trim(),q=z!==-1?O.substr(z+1,O.length).trim():"";if(p){p=!1,b.name=$,b.value=q;continue}$==="Domain"&&(b.domain=q),$==="Expires"&&(b.expires=l(q)),$==="HttpOnly"&&(b.httpOnly=!0),$==="Max-Age"&&(b.expires=l(Date.now()+ +q*1e3)),$==="Path"&&(b.path=q),$==="SameSite"&&(b.sameSite=q),$==="Secure"&&(b.secure=!0)}return b}function l(T){try{return new Date(T).toISOString()}catch{}}const x=Symbol("startedDate");return lu}var uu,M_;function OO(){if(M_)return uu;M_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(o,h)=>{for(var m in h)r(o,m,{get:h[m],enumerable:!0})},P=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of E(h))!V.call(o,l)&&l!==m&&r(o,l,{get:()=>h[l],enumerable:!(c=i(h,l))||c.enumerable});return o},e=(o,h,m)=>(m=o!=null?t(R(o)):{},P(!o||!o.__esModule?r(m,"default",{value:o,enumerable:!0}):m,o)),U=o=>P(r({},"__esModule",{value:!0}),o),C={};te(C,{HarRecorder:()=>a}),uu=U(C);var w=e(Je),g=e(Je),u=Gs(),_=sy(),f=tn(),d=Fr(),v=Po();class a{constructor(h,m,c){this._isFlushed=!1,this._entries=[],this._zipFile=null,this._writtenZipEntries=new Set,this._artifact=new u.Artifact(h,g.default.join(h._browser.options.artifactsDir,`${(0,f.createGuid)()}.har`));const l=c.urlRegexSource!==void 0&&c.urlRegexFlags!==void 0?new RegExp(c.urlRegexSource,c.urlRegexFlags):void 0,x=!!c.zip,T=c.content||(x?"attach":"embed");this._tracer=new _.HarTracer(h,m,this,{content:T,slimMode:c.mode==="minimal",includeTraceInfo:!1,recordRequestOverrides:!0,waitForContentOnStop:!0,urlFilter:l??c.urlGlob}),this._zipFile=T==="attach"||x?new v.yazl.ZipFile:null,this._tracer.start({omitScripts:!1})}onEntryStarted(h){this._entries.push(h)}onEntryFinished(h){}onContentBlob(h,m){!this._zipFile||this._writtenZipEntries.has(h)||(this._writtenZipEntries.add(h),this._zipFile.addBuffer(m,h))}async flush(){if(this._isFlushed)return;this._isFlushed=!0,await this._tracer.flush();const h=this._tracer.stop();h.entries=this._entries;const m=s({log:h});if(this._zipFile){const c=new d.ManualPromise;this._zipFile.on("error",l=>c.reject(l)),this._zipFile.addBuffer(Buffer.from(m,"utf-8"),"har.har"),this._zipFile.end(),this._zipFile.outputStream.pipe(w.default.createWriteStream(this._artifact.localPath())).on("close",()=>{c.resolve()}),await c}else await w.default.promises.writeFile(this._artifact.localPath(),m)}async export(){return await this.flush(),this._artifact.reportFinished(),this._artifact}}function s(o){const h=[];return n(o,h,"",!1,void 0),h.join("")}function n(o,h,m,c,l){if(typeof o!="object"||o===null){h.push(JSON.stringify(o));return}const x=Array.isArray(o);if(!x&&o.constructor.name!=="Object"){h.push(JSON.stringify(o));return}const T=x?o:Object.entries(o).filter(O=>O[1]!==void 0);if(!T.length){h.push(x?"[]":"{}");return}const b=`${m}  `;let p;x?p=c?{open:"[",close:"]"}:{open:`[
${b}`,close:`
${m}]`}:p=c?{open:"{ ",close:" }"}:{open:`{
${b}`,close:`
${m}}`},h.push(p.open);for(let O=0;O<T.length;++O){const z=T[O];O&&h.push(c?", ":`,
${b}`),x||h.push(`${JSON.stringify(z[0])}: `);const $=x?void 0:z[0],q=c||$==="timings"||l==="headers";n(x?z:z[1],h,b,q,$)}h.push(p.close)}return uu}var du,F_;function po(){if(F_)return du;F_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(o,h)=>{for(var m in h)r(o,m,{get:h[m],enumerable:!0})},P=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of E(h))!V.call(o,l)&&l!==m&&r(o,l,{get:()=>h[l],enumerable:!(c=i(h,l))||c.enumerable});return o},e=(o,h,m)=>(m=o!=null?t(R(o)):{},P(!o||!o.__esModule?r(m,"default",{value:o,enumerable:!0}):m,o)),U=o=>P(r({},"__esModule",{value:!0}),o),C={};te(C,{launchApp:()=>a,syncLocalStorageWithSettings:()=>n}),du=U(C);var w=e(Je),g=e(Je),u=nr(),_=Tr(),f=ui(),d=ui(),v=bn();async function a(o,h){var b,p,O;const m=[...((b=h.persistentContextOptions)==null?void 0:b.args)??[]];let c=(p=h.persistentContextOptions)==null?void 0:p.channel;o.name()==="chromium"&&(m.push("--app=data:text/html,",`--window-size=${h.windowSize.width},${h.windowSize.height}`,...h.windowPosition?[`--window-position=${h.windowPosition.x},${h.windowPosition.y}`]:[],"--test-type="),!c&&!((O=h.persistentContextOptions)!=null&&O.executablePath)&&(c=(0,f.findChromiumChannel)(h.sdkLanguage)));const x=await new v.ProgressController((0,_.serverSideCallMetadata)(),o).run(z=>{var $,q,J;return o.launchPersistentContext(z,"",{ignoreDefaultArgs:["--enable-automation"],...h==null?void 0:h.persistentContextOptions,channel:c,noDefaultViewport:(($=h.persistentContextOptions)==null?void 0:$.noDefaultViewport)??!0,acceptDownloads:((q=h==null?void 0:h.persistentContextOptions)==null?void 0:q.acceptDownloads)??((0,u.isUnderTest)()?"accept":"internal-browser-default"),colorScheme:((J=h==null?void 0:h.persistentContextOptions)==null?void 0:J.colorScheme)??"no-override",args:m})},0),[T]=x.pages();return o.name()==="chromium"&&process.platform==="darwin"&&x.on("page",async z=>{z.mainFrame().url()==="chrome://new-tab-page/"&&(await T.bringToFront(),await z.close())}),o.name()==="chromium"&&await s(T),{context:x,page:T}}async function s(o){const h=await w.default.promises.readFile(require.resolve("./chromium/appIcon.png"));await o.delegate._mainFrameSession._client.send("Browser.setDockTile",{image:h.toString("base64")})}async function n(o,h){if((0,u.isUnderTest)())return;const m=g.default.join(d.registryDirectory,".settings",`${h}.json`);await new v.ProgressController((0,_.serverSideCallMetadata)(),o).run(async l=>{await o.exposeBinding(l,"_saveSerializedSettings",!1,(T,b)=>{w.default.mkdirSync(g.default.dirname(m),{recursive:!0}),w.default.writeFileSync(m,b)});const x=await w.default.promises.readFile(m,"utf-8").catch(()=>"{}");await o.addInitScript(l,`(${String(T=>{location&&location.protocol==="data:"||window.top===window&&(Object.entries(T).map(([b,p])=>localStorage[b]=p),window.saveSettings=()=>{window._saveSerializedSettings(JSON.stringify({...localStorage}))})})})(${x});
    `)})}return du}var hu,B_;function TO(){if(B_)return hu;B_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(u,_)=>{for(var f in _)r(u,f,{get:_[f],enumerable:!0})},P=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of E(_))!V.call(u,v)&&v!==f&&r(u,v,{get:()=>_[v],enumerable:!(d=i(_,v))||d.enumerable});return u},e=(u,_,f)=>(f=u!=null?t(R(u)):{},P(!u||!u.__esModule?r(f,"default",{value:u,enumerable:!0}):f,u)),U=u=>P(r({},"__esModule",{value:!0}),u),C={};te(C,{ThrottledFile:()=>g}),hu=U(C);var w=e(Je);class g{constructor(_){this._file=_}setContent(_){this._text=_,this._timer||(this._timer=setTimeout(()=>this.flush(),250))}flush(){this._timer&&(clearTimeout(this._timer),this._timer=void 0),this._text&&w.default.writeFileSync(this._file,this._text),this._text=void 0}}return hu}var pu,j_;function Ji(){if(j_)return pu;j_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{fromKeyboardModifiers:()=>g,generateCode:()=>e,sanitizeDeviceOptions:()=>U,toClickOptionsForSourceCode:()=>u,toKeyboardModifiers:()=>w,toSignalMap:()=>C}),pu=te(P);function e(_,f,d){const v=f.generateHeader(d),a=f.generateFooter(d.saveStorage),s=_.map(o=>f.generateAction(o)).filter(Boolean),n=[v,...s,a].join(`
`);return{header:v,footer:a,actionTexts:s,text:n}}function U(_,f){const d={};for(const v in f)JSON.stringify(_[v])!==JSON.stringify(f[v])&&(d[v]=f[v]);return d}function C(_){let f,d,v;for(const a of _.signals)a.name==="popup"?f=a:a.name==="download"?d=a:a.name==="dialog"&&(v=a);return{popup:f,download:d,dialog:v}}function w(_){const f=[];return _&1&&f.push("Alt"),_&2&&f.push("ControlOrMeta"),_&4&&f.push("ControlOrMeta"),_&8&&f.push("Shift"),f}function g(_){let f=0;return _&&(_.includes("Alt")&&(f|=1),_.includes("Control")&&(f|=2),_.includes("ControlOrMeta")&&(f|=2),_.includes("Meta")&&(f|=4),_.includes("Shift")&&(f|=8)),f}function u(_){const f=w(_.modifiers),d={};return _.button!=="left"&&(d.button=_.button),f.length&&(d.modifiers=f),_.clickCount>2&&(d.clickCount=_.clickCount),_.position&&(d.position=_.position),d}return pu}const CO={"Blackberry PlayBook":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/26.0 Safari/536.2+",viewport:{width:600,height:1024},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Blackberry PlayBook landscape":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/26.0 Safari/536.2+",viewport:{width:1024,height:600},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/26.0 Mobile Safari/537.10+",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30 landscape":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/26.0 Mobile Safari/537.10+",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/26.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/26.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/26.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/26.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/26.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/26.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S5":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S8":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:360,height:740},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S8 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:740,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S9+":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:320,height:658},deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S9+ landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:658,height:320},deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S24":{userAgent:"Mozilla/5.0 (Linux; Android 14; SM-S921U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:480,height:1040},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S24 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 14; SM-S921U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:1040,height:480},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy A55":{userAgent:"Mozilla/5.0 (Linux; Android 14; SM-A556B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:480,height:1040},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy A55 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 14; SM-A556B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:1040,height:480},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S4":{userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:712,height:1138},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:1138,height:712},deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S9":{userAgent:"Mozilla/5.0 (Linux; Android 14; SM-X710) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:640,height:1024},deviceScaleFactor:2.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy Tab S9 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 14; SM-X710) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:1024,height:640},deviceScaleFactor:2.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"iPad (gen 5)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 5) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 6)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 6) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 11)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/19E241 Safari/604.1",viewport:{width:656,height:944},deviceScaleFactor:2.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 11) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/19E241 Safari/604.1",viewport:{width:944,height:656},deviceScaleFactor:2.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11 landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/26.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/26.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE (3rd gen)":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/26.0 Mobile/19E241 Safari/602.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE (3rd gen) landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/26.0 Mobile/19E241 Safari/602.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/26.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:414,height:715},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:800,height:364},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:375,height:635},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:724,height:325},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:414,height:715},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:414,height:896},viewport:{width:808,height:364},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:428,height:746},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:832,height:378},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Mini":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:375,height:629},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 12 Mini landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:712,height:325},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:342},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:342},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:428,height:746},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:832,height:380},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Mini":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:375,height:629},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 13 Mini landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:375,height:812},viewport:{width:712,height:327},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:390,height:664},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:390,height:844},viewport:{width:750,height:340},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:428,height:746},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:428,height:926},viewport:{width:832,height:378},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:393,height:852},viewport:{width:393,height:660},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:393,height:852},viewport:{width:734,height:343},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:430,height:932},viewport:{width:430,height:740},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 14 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:430,height:932},viewport:{width:814,height:380},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:393,height:852},viewport:{width:393,height:659},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:393,height:852},viewport:{width:734,height:343},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:430,height:932},viewport:{width:430,height:739},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:430,height:932},viewport:{width:814,height:380},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:393,height:852},viewport:{width:393,height:659},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:393,height:852},viewport:{width:734,height:343},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:430,height:932},viewport:{width:430,height:739},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 15 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Mobile/15E148 Safari/604.1",screen:{width:430,height:932},viewport:{width:814,height:380},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Kindle Fire HDX":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Kindle Fire HDX landscape":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"LG Optimus L70":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"LG Optimus L70 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:600,height:960},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",viewport:{width:960,height:600},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520 landscape":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia N9":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Nokia N9 landscape":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Pixel 2":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:411,height:731},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:731,height:411},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:411,height:823},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:823,height:411},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 3":{userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:393,height:786},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 3 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:786,height:393},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4":{userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:353,height:745},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:745,height:353},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4a (5G)":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",screen:{width:412,height:892},viewport:{width:412,height:765},deviceScaleFactor:2.63,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 4a (5G) landscape":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",screen:{height:892,width:412},viewport:{width:840,height:312},deviceScaleFactor:2.63,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 5":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",screen:{width:393,height:851},viewport:{width:393,height:727},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",screen:{width:851,height:393},viewport:{width:802,height:293},deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 7":{userAgent:"Mozilla/5.0 (Linux; Android 14; Pixel 7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",screen:{width:412,height:915},viewport:{width:412,height:839},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 7 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 14; Pixel 7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",screen:{width:915,height:412},viewport:{width:863,height:360},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Moto G4":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Moto G4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Desktop Chrome HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Edge HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36 Edg/139.0.7258.5",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Firefox HiDPI":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:140.0.2) Gecko/20100101 Firefox/140.0.2",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"firefox"},"Desktop Safari":{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.0 Safari/605.1.15",screen:{width:1792,height:1120},viewport:{width:1280,height:720},deviceScaleFactor:2,isMobile:!1,hasTouch:!1,defaultBrowserType:"webkit"},"Desktop Chrome":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Edge":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.7258.5 Safari/537.36 Edg/139.0.7258.5",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"chromium"},"Desktop Firefox":{userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:140.0.2) Gecko/20100101 Firefox/140.0.2",screen:{width:1920,height:1080},viewport:{width:1280,height:720},deviceScaleFactor:1,isMobile:!1,hasTouch:!1,defaultBrowserType:"firefox"}};var fu,H_;function Js(){if(H_)return fu;H_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(u,_)=>{for(var f in _)r(u,f,{get:_[f],enumerable:!0})},P=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of E(_))!V.call(u,v)&&v!==f&&r(u,v,{get:()=>_[v],enumerable:!(d=i(_,v))||d.enumerable});return u},e=(u,_,f)=>(f=u!=null?t(R(u)):{},P(!u||!u.__esModule?r(f,"default",{value:u,enumerable:!0}):f,u)),U=u=>P(r({},"__esModule",{value:!0}),u),C={};te(C,{deviceDescriptors:()=>g}),fu=U(C);var w=e(CO);const g=w.default;return fu}var mu,U_;function PO(){if(U_)return mu;U_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{CSharpLanguageGenerator:()=>w}),mu=te(P);var e=Ji(),U=nr(),C=Js();class w{constructor(n){if(this.groupName=".NET C#",this.highlighter="csharp",n==="library")this.name="Library",this.id="csharp";else if(n==="mstest")this.name="MSTest",this.id="csharp-mstest";else if(n==="nunit")this.name="NUnit",this.id="csharp-nunit";else throw new Error(`Unknown C# language mode: ${n}`);this._mode=n}generateAction(n){const o=this._generateActionInner(n);return o||""}_generateActionInner(n){const o=n.action;if(this._mode!=="library"&&(o.name==="openPage"||o.name==="closePage"))return"";const h=this._formatPageAlias(n.frame.pageAlias),m=new v(this._mode==="library"?0:8);if(o.name==="openPage")return m.add(`var ${h} = await context.NewPageAsync();`),o.url&&o.url!=="about:blank"&&o.url!=="chrome://newtab/"&&m.add(`await ${h}.GotoAsync(${a(o.url)});`),m.format();const c=n.frame.framePath.map(b=>`.${this._asLocator(b)}.ContentFrame`),l=`${h}${c.join("")}`,x=(0,e.toSignalMap)(o);x.dialog&&m.add(`    void ${h}_Dialog${x.dialog.dialogAlias}_EventHandler(object sender, IDialog dialog)
      {
          Console.WriteLine($"Dialog message: {dialog.Message}");
          dialog.DismissAsync();
          ${h}.Dialog -= ${h}_Dialog${x.dialog.dialogAlias}_EventHandler;
      }
      ${h}.Dialog += ${h}_Dialog${x.dialog.dialogAlias}_EventHandler;`);const T=[];T.push(this._generateActionCall(l,n)),x.download&&(T.unshift(`var download${x.download.downloadAlias} = await ${h}.RunAndWaitForDownloadAsync(async () =>
{`),T.push("});")),x.popup&&(T.unshift(`var ${this._formatPageAlias(x.popup.popupAlias)} = await ${h}.RunAndWaitForPopupAsync(async () =>
{`),T.push("});"));for(const b of T)m.add(b);return m.format()}_formatPageAlias(n){return this._mode==="library"?n:n==="page"?"Page":n}_generateActionCall(n,o){const h=o.action;switch(h.name){case"openPage":throw Error("Not reached");case"closePage":return`await ${n}.CloseAsync();`;case"click":{let m="Click";h.clickCount===2&&(m="DblClick");const c=(0,e.toClickOptionsForSourceCode)(h);if(!Object.entries(c).length)return`await ${n}.${this._asLocator(h.selector)}.${m}Async();`;const l=g(c,"    ","Locator"+m+"Options");return`await ${n}.${this._asLocator(h.selector)}.${m}Async(${l});`}case"check":return`await ${n}.${this._asLocator(h.selector)}.CheckAsync();`;case"uncheck":return`await ${n}.${this._asLocator(h.selector)}.UncheckAsync();`;case"fill":return`await ${n}.${this._asLocator(h.selector)}.FillAsync(${a(h.text)});`;case"setInputFiles":return`await ${n}.${this._asLocator(h.selector)}.SetInputFilesAsync(${g(h.files)});`;case"press":{const c=[...(0,e.toKeyboardModifiers)(h.modifiers),h.key].join("+");return`await ${n}.${this._asLocator(h.selector)}.PressAsync(${a(c)});`}case"navigate":return`await ${n}.GotoAsync(${a(h.url)});`;case"select":return`await ${n}.${this._asLocator(h.selector)}.SelectOptionAsync(${g(h.options)});`;case"assertText":return`await Expect(${n}.${this._asLocator(h.selector)}).${h.substring?"ToContainTextAsync":"ToHaveTextAsync"}(${a(h.text)});`;case"assertChecked":return`await Expect(${n}.${this._asLocator(h.selector)})${h.checked?"":".Not"}.ToBeCheckedAsync();`;case"assertVisible":return`await Expect(${n}.${this._asLocator(h.selector)}).ToBeVisibleAsync();`;case"assertValue":{const m=h.value?`ToHaveValueAsync(${a(h.value)})`:"ToBeEmptyAsync()";return`await Expect(${n}.${this._asLocator(h.selector)}).${m};`}case"assertSnapshot":return`await Expect(${n}.${this._asLocator(h.selector)}).ToMatchAriaSnapshotAsync(${a(h.ariaSnapshot)});`}}_asLocator(n){return(0,U.asLocator)("csharp",n)}generateHeader(n){return this._mode==="library"?this.generateStandaloneHeader(n):this.generateTestRunnerHeader(n)}generateStandaloneHeader(n){const o=new v(0);if(o.add(`
      using Microsoft.Playwright;
      using System;
      using System.Threading.Tasks;

      using var playwright = await Playwright.CreateAsync();
      await using var browser = await playwright.${f(n.browserName)}.LaunchAsync(${g(n.launchOptions,"    ","BrowserTypeLaunchOptions")});
      var context = await browser.NewContextAsync(${d(n.contextOptions,n.deviceName)});`),n.contextOptions.recordHar){const h=n.contextOptions.recordHar.urlFilter;o.add(`      await context.RouteFromHARAsync(${a(n.contextOptions.recordHar.path)}${h?`, ${g({url:h},"    ","BrowserContextRouteFromHAROptions")}`:""});`)}return o.newLine(),o.format()}generateTestRunnerHeader(n){const o=new v(0);o.add(`
      using Microsoft.Playwright.${this._mode==="nunit"?"NUnit":"MSTest"};
      using Microsoft.Playwright;

      ${this._mode==="nunit"?`[Parallelizable(ParallelScope.Self)]
      [TestFixture]`:"[TestClass]"}
      public class Tests : PageTest
      {`);const h=d(n.contextOptions,n.deviceName);if(h&&(o.add(`public override BrowserNewContextOptions ContextOptions()
      {
          return ${h};
      }`),o.newLine()),o.add(`    [${this._mode==="nunit"?"Test":"TestMethod"}]
    public async Task MyTest()
    {`),n.contextOptions.recordHar){const m=n.contextOptions.recordHar.urlFilter;o.add(`    await Context.RouteFromHARAsync(${a(n.contextOptions.recordHar.path)}${m?`, ${g({url:m},"    ","BrowserContextRouteFromHAROptions")}`:""});`)}return o.format()}generateFooter(n){const o=this._mode==="library"?"":"        ";let h=n?`
${o}await context.StorageStateAsync(new BrowserContextStorageStateOptions
${o}{
${o}    Path = ${a(n)}
${o}});
`:"";return this._mode!=="library"&&(h+=`    }
}
`),h}}function g(s,n="    ",o=""){if(typeof s=="string")return["permissions","colorScheme","modifiers","button","recordHarContent","recordHarMode","serviceWorkers"].includes(o)?`${u(o)}.${f(s)}`:a(s);if(Array.isArray(s))return`new[] { ${s.map(h=>g(h,n,o)).join(", ")} }`;if(typeof s=="object"){const h=Object.keys(s).filter(c=>s[c]!==void 0).sort();if(!h.length)return o?`new ${u(o)}`:"";const m=[];for(const c of h){const l=_(c);m.push(`${l} = ${g(s[c],n,c)},`)}return o?`new ${u(o)}
{
${n}${m.join(`
${n}`)}
${n}}`:`{
${n}${m.join(`
${n}`)}
${n}}`}return o==="latitude"||o==="longitude"?String(s)+"m":String(s)}function u(s){switch(s){case"viewport":return"ViewportSize";case"proxy":return"ProxySettings";case"permissions":return"ContextPermission";case"modifiers":return"KeyboardModifier";case"button":return"MouseButton";case"recordHarMode":return"HarMode";case"recordHarContent":return"HarContentPolicy";case"serviceWorkers":return"ServiceWorkerPolicy";default:return f(s)}}function _(s){switch(s){case"storageState":return"StorageStatePath";case"viewport":return"ViewportSize";default:return f(s)}}function f(s){return s[0].toUpperCase()+s.slice(1)}function d(s,n){let o={...s};delete o.recordHar;const h=n&&C.deviceDescriptors[n];return h?(o=(0,e.sanitizeDeviceOptions)(h,o),Object.entries(o).length?g(o,"    ",`BrowserNewContextOptions(playwright.Devices[${a(n)}])`):`playwright.Devices[${a(n)}]`):Object.entries(o).length?g(o,"    ","BrowserNewContextOptions"):""}class v{constructor(n=0){this._lines=[],this._baseIndent=" ".repeat(4),this._baseOffset=" ".repeat(n)}prepend(n){this._lines=n.trim().split(`
`).map(o=>o.trim()).concat(this._lines)}add(n){this._lines.push(...n.trim().split(`
`).map(o=>o.trim()))}newLine(){this._lines.push("")}format(){let n="",o="";return this._lines.map(h=>{if(h==="")return h;(h.startsWith("}")||h.startsWith("]")||h.includes("});")||h===");")&&(n=n.substring(this._baseIndent.length));const m=/^(for|while|if).*\(.*\)$/.test(o)?this._baseIndent:"";return o=h,h=n+m+h,(h.endsWith("{")||h.endsWith("[")||h.endsWith("("))&&(n+=this._baseIndent),h.endsWith("));")&&(n=n.substring(this._baseIndent.length)),this._baseOffset+h}).join(`
`)}}function a(s){return(0,U.escapeWithQuotes)(s,'"')}return mu}var gu,q_;function uf(){if(q_)return gu;q_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(o,h)=>{for(var m in h)t(o,m,{get:h[m],enumerable:!0})},V=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of i(h))!E.call(o,l)&&l!==m&&t(o,l,{get:()=>h[l],enumerable:!(c=r(h,l))||c.enumerable});return o},te=o=>V(t({},"__esModule",{value:!0}),o),P={};R(P,{JavaScriptFormatter:()=>d,JavaScriptLanguageGenerator:()=>w,quoteMultiline:()=>s}),gu=te(P);var e=Ji(),U=nr(),C=Js();class w{constructor(h){this.groupName="Node.js",this.highlighter="javascript",this.id=h?"playwright-test":"javascript",this.name=h?"Test Runner":"Library",this._isTest=h}generateAction(h){const m=h.action;if(this._isTest&&(m.name==="openPage"||m.name==="closePage"))return"";const c=h.frame.pageAlias,l=new d(2);if(m.name==="openPage")return l.add(`const ${c} = await context.newPage();`),m.url&&m.url!=="about:blank"&&m.url!=="chrome://newtab/"&&l.add(`await ${c}.goto(${v(m.url)});`),l.format();const x=h.frame.framePath.map(p=>`.${this._asLocator(p)}.contentFrame()`),T=`${c}${x.join("")}`,b=(0,e.toSignalMap)(m);return b.dialog&&l.add(`  ${c}.once('dialog', dialog => {
    console.log(\`Dialog message: \${dialog.message()}\`);
    dialog.dismiss().catch(() => {});
  });`),b.popup&&l.add(`const ${b.popup.popupAlias}Promise = ${c}.waitForEvent('popup');`),b.download&&l.add(`const download${b.download.downloadAlias}Promise = ${c}.waitForEvent('download');`),l.add(a(h.description,this._generateActionCall(T,h))),b.popup&&l.add(`const ${b.popup.popupAlias} = await ${b.popup.popupAlias}Promise;`),b.download&&l.add(`const download${b.download.downloadAlias} = await download${b.download.downloadAlias}Promise;`),l.format()}_generateActionCall(h,m){const c=m.action;switch(c.name){case"openPage":throw Error("Not reached");case"closePage":return`await ${h}.close();`;case"click":{let l="click";c.clickCount===2&&(l="dblclick");const x=(0,e.toClickOptionsForSourceCode)(c),T=g(x);return`await ${h}.${this._asLocator(c.selector)}.${l}(${T});`}case"check":return`await ${h}.${this._asLocator(c.selector)}.check();`;case"uncheck":return`await ${h}.${this._asLocator(c.selector)}.uncheck();`;case"fill":return`await ${h}.${this._asLocator(c.selector)}.fill(${v(c.text)});`;case"setInputFiles":return`await ${h}.${this._asLocator(c.selector)}.setInputFiles(${u(c.files.length===1?c.files[0]:c.files)});`;case"press":{const x=[...(0,e.toKeyboardModifiers)(c.modifiers),c.key].join("+");return`await ${h}.${this._asLocator(c.selector)}.press(${v(x)});`}case"navigate":return`await ${h}.goto(${v(c.url)});`;case"select":return`await ${h}.${this._asLocator(c.selector)}.selectOption(${u(c.options.length===1?c.options[0]:c.options)});`;case"assertText":return`${this._isTest?"":"// "}await expect(${h}.${this._asLocator(c.selector)}).${c.substring?"toContainText":"toHaveText"}(${v(c.text)});`;case"assertChecked":return`${this._isTest?"":"// "}await expect(${h}.${this._asLocator(c.selector)})${c.checked?"":".not"}.toBeChecked();`;case"assertVisible":return`${this._isTest?"":"// "}await expect(${h}.${this._asLocator(c.selector)}).toBeVisible();`;case"assertValue":{const l=c.value?`toHaveValue(${v(c.value)})`:"toBeEmpty()";return`${this._isTest?"":"// "}await expect(${h}.${this._asLocator(c.selector)}).${l};`}case"assertSnapshot":{const l=this._isTest?"":"// ";return`${l}await expect(${h}.${this._asLocator(c.selector)}).toMatchAriaSnapshot(${s(c.ariaSnapshot,`${l}  `)});`}}}_asLocator(h){return(0,U.asLocator)("javascript",h)}generateHeader(h){return this._isTest?this.generateTestHeader(h):this.generateStandaloneHeader(h)}generateFooter(h){return this._isTest?this.generateTestFooter(h):this.generateStandaloneFooter(h)}generateTestHeader(h){const m=new d,c=f(h.contextOptions,h.deviceName,this._isTest);if(m.add(`
      import { test, expect${h.deviceName?", devices":""} } from '@playwright/test';
${c?`
test.use(`+c+`);
`:""}
      test('test', async ({ page }) => {`),h.contextOptions.recordHar){const l=h.contextOptions.recordHar.urlFilter;m.add(`  await page.routeFromHAR(${v(h.contextOptions.recordHar.path)}${l?`, ${g({url:l})}`:""});`)}return m.format()}generateTestFooter(h){return"});"}generateStandaloneHeader(h){const m=new d;return m.add(`
      const { ${h.browserName}${h.deviceName?", devices":""} } = require('playwright');

      (async () => {
        const browser = await ${h.browserName}.launch(${_(h.launchOptions)});
        const context = await browser.newContext(${f(h.contextOptions,h.deviceName)});`),h.contextOptions.recordHar&&m.add(`        await context.routeFromHAR(${v(h.contextOptions.recordHar.path)});`),m.format()}generateStandaloneFooter(h){return`
  // ---------------------${h?`
  await context.storageState({ path: ${v(h)} });`:""}
  await context.close();
  await browser.close();
})();`}}function g(o,h){return Object.keys(o).length?""+u(o):""}function u(o,h="  "){if(typeof o=="string")return v(o);if(Array.isArray(o))return`[${o.map(m=>u(m)).join(", ")}]`;if(typeof o=="object"){const m=Object.keys(o).filter(l=>o[l]!==void 0).sort();if(!m.length)return"{}";const c=[];for(const l of m)c.push(`${l}: ${u(o[l])}`);return`{
${h}${c.join(`,
${h}`)}
}`}return String(o)}function _(o,h="  "){const m=u(o,h);return m==="{}"?"":m}function f(o,h,m){const c=h&&C.deviceDescriptors[h];if(o={...o,recordHar:void 0},!c)return _(o);let l=_((0,e.sanitizeDeviceOptions)(c,o));l||(l=`{
}`);const x=l.split(`
`);return x.splice(1,0,`...devices[${v(h)}],`),x.join(`
`)}class d{constructor(h=0){this._lines=[],this._baseIndent=" ".repeat(2),this._baseOffset=" ".repeat(h)}prepend(h){const m=n(h)?c=>c:c=>c.trim();this._lines=h.trim().split(`
`).map(m).concat(this._lines)}add(h){const m=n(h)?c=>c:c=>c.trim();this._lines.push(...h.trim().split(`
`).map(m))}newLine(){this._lines.push("")}format(){let h="",m="";return this._lines.map(c=>{if(c==="")return c;(c.startsWith("}")||c.startsWith("]"))&&(h=h.substring(this._baseIndent.length));const l=/^(for|while|if|try).*\(.*\)$/.test(m)?this._baseIndent:"";m=c;const x=c.startsWith(".set");return c=h+l+(x?this._baseIndent:"")+c,(c.endsWith("{")||c.endsWith("["))&&(h+=this._baseIndent),this._baseOffset+c}).join(`
`)}}function v(o){return(0,U.escapeWithQuotes)(o,"'")}function a(o,h){return o?`await test.step(\`${o}\`, async () => {
${h}
});`:h}function s(o,h="  "){const m=l=>l.replace(/\\/g,"\\\\").replace(/`/g,"\\`").replace(/\$\{/g,"\\${"),c=o.split(`
`);return c.length===1?"`"+m(o)+"`":"`\n"+c.map(l=>h+m(l).replace(/\${/g,"\\${")).join(`
`)+`
${h}\``}function n(o){var h;return(h=o.match(/`[\S\s]*`/))==null?void 0:h[0].includes(`
`)}return gu}var _u,$_;function kO(){if($_)return _u;$_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{JavaLanguageGenerator:()=>g}),_u=te(P);var e=Ji(),U=Js(),C=uf(),w=nr();class g{constructor(n){if(this.groupName="Java",this.highlighter="java",n==="library")this.name="Library",this.id="java";else if(n==="junit")this.name="JUnit",this.id="java-junit";else throw new Error(`Unknown Java language mode: ${n}`);this._mode=n}generateAction(n){const o=n.action,h=n.frame.pageAlias,m=this._mode==="junit"?4:6,c=new C.JavaScriptFormatter(m);if(this._mode!=="library"&&(o.name==="openPage"||o.name==="closePage"))return"";if(o.name==="openPage")return c.add(`Page ${h} = context.newPage();`),o.url&&o.url!=="about:blank"&&o.url!=="chrome://newtab/"&&c.add(`${h}.navigate(${a(o.url)});`),c.format();const l=n.frame.framePath.map(p=>`.${this._asLocator(p,!1)}.contentFrame()`),x=`${h}${l.join("")}`,T=(0,e.toSignalMap)(o);T.dialog&&c.add(`  ${h}.onceDialog(dialog -> {
        System.out.println(String.format("Dialog message: %s", dialog.message()));
        dialog.dismiss();
      });`);let b=this._generateActionCall(x,n,!!n.frame.framePath.length);return T.popup&&(b=`Page ${T.popup.popupAlias} = ${h}.waitForPopup(() -> {
        ${b}
      });`),T.download&&(b=`Download download${T.download.downloadAlias} = ${h}.waitForDownload(() -> {
        ${b}
      });`),c.add(b),c.format()}_generateActionCall(n,o,h){const m=o.action;switch(m.name){case"openPage":throw Error("Not reached");case"closePage":return`${n}.close();`;case"click":{let c="click";m.clickCount===2&&(c="dblclick");const l=(0,e.toClickOptionsForSourceCode)(m),x=v(l);return`${n}.${this._asLocator(m.selector,h)}.${c}(${x});`}case"check":return`${n}.${this._asLocator(m.selector,h)}.check();`;case"uncheck":return`${n}.${this._asLocator(m.selector,h)}.uncheck();`;case"fill":return`${n}.${this._asLocator(m.selector,h)}.fill(${a(m.text)});`;case"setInputFiles":return`${n}.${this._asLocator(m.selector,h)}.setInputFiles(${u(m.files.length===1?m.files[0]:m.files)});`;case"press":{const l=[...(0,e.toKeyboardModifiers)(m.modifiers),m.key].join("+");return`${n}.${this._asLocator(m.selector,h)}.press(${a(l)});`}case"navigate":return`${n}.navigate(${a(m.url)});`;case"select":return`${n}.${this._asLocator(m.selector,h)}.selectOption(${_(m.options.length===1?m.options[0]:m.options)});`;case"assertText":return`assertThat(${n}.${this._asLocator(m.selector,h)}).${m.substring?"containsText":"hasText"}(${a(m.text)});`;case"assertChecked":return`assertThat(${n}.${this._asLocator(m.selector,h)})${m.checked?"":".not()"}.isChecked();`;case"assertVisible":return`assertThat(${n}.${this._asLocator(m.selector,h)}).isVisible();`;case"assertValue":{const c=m.value?`hasValue(${a(m.value)})`:"isEmpty()";return`assertThat(${n}.${this._asLocator(m.selector,h)}).${c};`}case"assertSnapshot":return`assertThat(${n}.${this._asLocator(m.selector,h)}).matchesAriaSnapshot(${a(m.ariaSnapshot)});`}}_asLocator(n,o){return(0,w.asLocator)("java",n,o)}generateHeader(n){const o=new C.JavaScriptFormatter;if(this._mode==="junit"){if(o.add(`
      import com.microsoft.playwright.junit.UsePlaywright;
      import com.microsoft.playwright.Page;
      import com.microsoft.playwright.options.*;

      ${n.contextOptions.recordHar?`import java.nio.file.Paths;
`:""}import org.junit.jupiter.api.*;
      import static com.microsoft.playwright.assertions.PlaywrightAssertions.*;

      @UsePlaywright
      public class TestExample {
        @Test
        void test(Page page) {`),n.contextOptions.recordHar){const h=n.contextOptions.recordHar.urlFilter,m=typeof h=="string"?`, new Page.RouteFromHAROptions()
            .setUrl(${a(h)})`:"";o.add(`          page.routeFromHAR(Paths.get(${a(n.contextOptions.recordHar.path)})${m});`)}return o.format()}if(o.add(`
    import com.microsoft.playwright.*;
    import com.microsoft.playwright.options.*;
    import static com.microsoft.playwright.assertions.PlaywrightAssertions.assertThat;
    ${n.contextOptions.recordHar?`import java.nio.file.Paths;
`:""}import java.util.*;

    public class Example {
      public static void main(String[] args) {
        try (Playwright playwright = Playwright.create()) {
          Browser browser = playwright.${n.browserName}().launch(${f(n.launchOptions)});
          BrowserContext context = browser.newContext(${d(n.contextOptions,n.deviceName)});`),n.contextOptions.recordHar){const h=n.contextOptions.recordHar.urlFilter,m=typeof h=="string"?`, new BrowserContext.RouteFromHAROptions()
          .setUrl(${a(h)})`:"";o.add(`          context.routeFromHAR(Paths.get(${a(n.contextOptions.recordHar.path)})${m});`)}return o.format()}generateFooter(n){const o=n?`
      context.storageState(new BrowserContext.StorageStateOptions().setPath(${a(n)}));
`:"";return this._mode==="junit"?`${o}  }
}`:`${o}    }
  }
}`}}function u(s){return Array.isArray(s)?s.length===0?"new Path[0]":`new Path[] {${s.map(n=>"Paths.get("+a(n)+")").join(", ")}}`:`Paths.get(${a(s)})`}function _(s){return Array.isArray(s)?s.length===0?"new String[0]":`new String[] {${s.map(n=>a(n)).join(", ")}}`:a(s)}function f(s){const n=[];return Object.keys(s).filter(o=>s[o]!==void 0).length?(n.push("new BrowserType.LaunchOptions()"),s.channel&&n.push(`  .setChannel(${a(s.channel)})`),typeof s.headless=="boolean"&&n.push("  .setHeadless(false)"),n.join(`
`)):""}function d(s,n){const o=[];if(!Object.keys(s).length&&!n)return"";const m={...n?U.deviceDescriptors[n]:{},...s};return o.push("new Browser.NewContextOptions()"),m.acceptDownloads&&o.push("  .setAcceptDownloads(true)"),m.bypassCSP&&o.push("  .setBypassCSP(true)"),m.colorScheme&&o.push(`  .setColorScheme(ColorScheme.${m.colorScheme.toUpperCase()})`),m.deviceScaleFactor&&o.push(`  .setDeviceScaleFactor(${m.deviceScaleFactor})`),m.geolocation&&o.push(`  .setGeolocation(${m.geolocation.latitude}, ${m.geolocation.longitude})`),m.hasTouch&&o.push(`  .setHasTouch(${m.hasTouch})`),m.isMobile&&o.push(`  .setIsMobile(${m.isMobile})`),m.locale&&o.push(`  .setLocale(${a(m.locale)})`),m.proxy&&o.push(`  .setProxy(new Proxy(${a(m.proxy.server)}))`),m.serviceWorkers&&o.push(`  .setServiceWorkers(ServiceWorkerPolicy.${m.serviceWorkers.toUpperCase()})`),m.storageState&&o.push(`  .setStorageStatePath(Paths.get(${a(m.storageState)}))`),m.timezoneId&&o.push(`  .setTimezoneId(${a(m.timezoneId)})`),m.userAgent&&o.push(`  .setUserAgent(${a(m.userAgent)})`),m.viewport&&o.push(`  .setViewportSize(${m.viewport.width}, ${m.viewport.height})`),o.join(`
`)}function v(s){const n=[];return s.button&&n.push(`  .setButton(MouseButton.${s.button.toUpperCase()})`),s.modifiers&&n.push(`  .setModifiers(Arrays.asList(${s.modifiers.map(o=>`KeyboardModifier.${o.toUpperCase()}`).join(", ")}))`),s.clickCount&&n.push(`  .setClickCount(${s.clickCount})`),s.position&&n.push(`  .setPosition(${s.position.x}, ${s.position.y})`),n.length?(n.unshift("new Locator.ClickOptions()"),n.join(`
`)):""}function a(s){return(0,w.escapeWithQuotes)(s,'"')}return _u}var bu,W_;function AO(){if(W_)return bu;W_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{JsonlLanguageGenerator:()=>U}),bu=te(P);var e=nr();class U{constructor(){this.id="jsonl",this.groupName="",this.name="JSONL",this.highlighter="javascript"}generateAction(w){const g=w.action.selector?JSON.parse((0,e.asLocator)("jsonl",w.action.selector)):void 0,u={...w.action,...w.frame,locator:g};return JSON.stringify(u)}generateHeader(w){return JSON.stringify(w)}generateFooter(w){return""}}return bu}var vu,z_;function IO(){if(z_)return vu;z_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{PythonLanguageGenerator:()=>w}),vu=te(P);var e=Ji(),U=nr(),C=Js();class w{constructor(a,s){this.groupName="Python",this.highlighter="python",this.id=s?"python-pytest":a?"python-async":"python",this.name=s?"Pytest":a?"Library Async":"Library",this._isAsync=a,this._isPyTest=s,this._awaitPrefix=a?"await ":"",this._asyncPrefix=a?"async ":""}generateAction(a){const s=a.action;if(this._isPyTest&&(s.name==="openPage"||s.name==="closePage"))return"";const n=a.frame.pageAlias,o=new f(4);if(s.name==="openPage")return o.add(`${n} = ${this._awaitPrefix}context.new_page()`),s.url&&s.url!=="about:blank"&&s.url!=="chrome://newtab/"&&o.add(`${this._awaitPrefix}${n}.goto(${d(s.url)})`),o.format();const h=a.frame.framePath.map(x=>`.${this._asLocator(x)}.content_frame`),m=`${n}${h.join("")}`,c=(0,e.toSignalMap)(s);c.dialog&&o.add(`  ${n}.once("dialog", lambda dialog: dialog.dismiss())`);let l=`${this._awaitPrefix}${this._generateActionCall(m,a)}`;return c.popup&&(l=`${this._asyncPrefix}with ${n}.expect_popup() as ${c.popup.popupAlias}_info {
        ${l}
      }
      ${c.popup.popupAlias} = ${this._awaitPrefix}${c.popup.popupAlias}_info.value`),c.download&&(l=`${this._asyncPrefix}with ${n}.expect_download() as download${c.download.downloadAlias}_info {
        ${l}
      }
      download${c.download.downloadAlias} = ${this._awaitPrefix}download${c.download.downloadAlias}_info.value`),o.add(l),o.format()}_generateActionCall(a,s){const n=s.action;switch(n.name){case"openPage":throw Error("Not reached");case"closePage":return`${a}.close()`;case"click":{let o="click";n.clickCount===2&&(o="dblclick");const h=(0,e.toClickOptionsForSourceCode)(n),m=u(h,!1);return`${a}.${this._asLocator(n.selector)}.${o}(${m})`}case"check":return`${a}.${this._asLocator(n.selector)}.check()`;case"uncheck":return`${a}.${this._asLocator(n.selector)}.uncheck()`;case"fill":return`${a}.${this._asLocator(n.selector)}.fill(${d(n.text)})`;case"setInputFiles":return`${a}.${this._asLocator(n.selector)}.set_input_files(${g(n.files.length===1?n.files[0]:n.files)})`;case"press":{const h=[...(0,e.toKeyboardModifiers)(n.modifiers),n.key].join("+");return`${a}.${this._asLocator(n.selector)}.press(${d(h)})`}case"navigate":return`${a}.goto(${d(n.url)})`;case"select":return`${a}.${this._asLocator(n.selector)}.select_option(${g(n.options.length===1?n.options[0]:n.options)})`;case"assertText":return`expect(${a}.${this._asLocator(n.selector)}).${n.substring?"to_contain_text":"to_have_text"}(${d(n.text)})`;case"assertChecked":return`expect(${a}.${this._asLocator(n.selector)}).${n.checked?"to_be_checked()":"not_to_be_checked()"}`;case"assertVisible":return`expect(${a}.${this._asLocator(n.selector)}).to_be_visible()`;case"assertValue":{const o=n.value?`to_have_value(${d(n.value)})`:"to_be_empty()";return`expect(${a}.${this._asLocator(n.selector)}).${o};`}case"assertSnapshot":return`expect(${a}.${this._asLocator(n.selector)}).to_match_aria_snapshot(${d(n.ariaSnapshot)})`}}_asLocator(a){return(0,U.asLocator)("python",a)}generateHeader(a){const s=new f,n=a.contextOptions.recordHar;if(this._isPyTest){const o=_(a.contextOptions,a.deviceName,!0),h=o?`

@pytest.fixture(scope="session")
def browser_context_args(browser_context_args, playwright) {
    return {${o}}
}
`:"";s.add(`${a.deviceName||o?`import pytest
`:""}import re
from playwright.sync_api import Page, expect
${h}

def test_example(page: Page) -> None {`),n&&s.add(`    page.route_from_har(${d(n.path)}${typeof n.urlFilter=="string"?`, url=${d(n.urlFilter)}`:""})`)}else this._isAsync?(s.add(`
import asyncio
import re
from playwright.async_api import Playwright, async_playwright, expect


async def run(playwright: Playwright) -> None {
    browser = await playwright.${a.browserName}.launch(${u(a.launchOptions,!1)})
    context = await browser.new_context(${_(a.contextOptions,a.deviceName)})`),n&&s.add(`    await context.route_from_har(${d(n.path)}${typeof n.urlFilter=="string"?`, url=${d(n.urlFilter)}`:""})`)):(s.add(`
import re
from playwright.sync_api import Playwright, sync_playwright, expect


def run(playwright: Playwright) -> None {
    browser = playwright.${a.browserName}.launch(${u(a.launchOptions,!1)})
    context = browser.new_context(${_(a.contextOptions,a.deviceName)})`),n&&s.add(`    context.route_from_har(${d(n.path)}${typeof n.urlFilter=="string"?`, url=${d(n.urlFilter)}`:""})`));return s.format()}generateFooter(a){return this._isPyTest?"":this._isAsync?`
    # ---------------------${a?`
    await context.storage_state(path=${d(a)})`:""}
    await context.close()
    await browser.close()


async def main() -> None:
    async with async_playwright() as playwright:
        await run(playwright)


asyncio.run(main())
`:`
    # ---------------------${a?`
    context.storage_state(path=${d(a)})`:""}
    context.close()
    browser.close()


with sync_playwright() as playwright:
    run(playwright)
`}}function g(v){return v===!1?"False":v===!0?"True":v===void 0?"None":Array.isArray(v)?`[${v.map(g).join(", ")}]`:typeof v=="string"?d(v):typeof v=="object"?JSON.stringify(v):String(v)}function u(v,a,s){const n=Object.keys(v).filter(o=>v[o]!==void 0).sort();return n.length?(a?", ":"")+n.map(o=>s?`"${(0,U.toSnakeCase)(o)}": ${g(v[o])}`:`${(0,U.toSnakeCase)(o)}=${g(v[o])}`).join(", "):""}function _(v,a,s){v={...v,recordHar:void 0};const n=a&&C.deviceDescriptors[a];return n?`**playwright.devices[${d(a)}]`+u((0,e.sanitizeDeviceOptions)(n,v),!0,s):u(v,!1,s)}class f{constructor(a=0){this._lines=[],this._baseIndent=" ".repeat(4),this._baseOffset=" ".repeat(a)}prepend(a){this._lines=a.trim().split(`
`).map(s=>s.trim()).concat(this._lines)}add(a){this._lines.push(...a.trim().split(`
`).map(s=>s.trim()))}newLine(){this._lines.push("")}format(){let a="";const s=[];return this._lines.forEach(n=>{if(n==="")return s.push(n);if(n==="}"){a=a.substring(this._baseIndent.length);return}return n=a+n,n.endsWith("{")&&(a+=this._baseIndent,n=n.substring(0,n.length-1).trimEnd()+":"),s.push(this._baseOffset+n)}),s.join(`
`)}}function d(v){return(0,U.escapeWithQuotes)(v,'"')}return vu}var wu,V_;function NO(){if(V_)return wu;V_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{languageSet:()=>u}),wu=te(P);var e=PO(),U=kO(),C=uf(),w=AO(),g=IO();function u(){return new Set([new C.JavaScriptLanguageGenerator(!0),new C.JavaScriptLanguageGenerator(!1),new g.PythonLanguageGenerator(!1,!0),new g.PythonLanguageGenerator(!1,!1),new g.PythonLanguageGenerator(!0,!1),new e.CSharpLanguageGenerator("mstest"),new e.CSharpLanguageGenerator("nunit"),new e.CSharpLanguageGenerator("library"),new U.JavaLanguageGenerator("junit"),new U.JavaLanguageGenerator("library"),new w.JsonlLanguageGenerator])}return wu}var yu,K_;function Ys(){if(K_)return yu;K_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(o,h)=>{for(var m in h)t(o,m,{get:h[m],enumerable:!0})},V=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of i(h))!E.call(o,l)&&l!==m&&t(o,l,{get:()=>h[l],enumerable:!(c=r(h,l))||c.enumerable});return o},te=o=>V(t({},"__esModule",{value:!0}),o),P={};R(P,{buildFullSelector:()=>w,collapseActions:()=>a,frameForAction:()=>_,generateFrameSelector:()=>s,mainFrameForAction:()=>u,metadataToCallLog:()=>g,shouldMergeAction:()=>v}),yu=te(P);var e=Vw(),U=nr(),C=Ao();function w(o,h){return[...o,h].join(" >> internal:control=enter-frame >> ")}function g(o,h){var T,b,p,O;const m=(0,e.renderTitleForCall)(o);o.error&&(h="error");const c={url:(T=o.params)==null?void 0:T.url,selector:(b=o.params)==null?void 0:b.selector};let l=o.endTime?o.endTime-o.startTime:void 0;return typeof l=="number"&&o.pauseStartTime&&o.pauseEndTime&&(l-=o.pauseEndTime-o.pauseStartTime,l=Math.max(l,0)),{id:o.id,messages:o.log,title:m??"",status:h,error:(O=(p=o.error)==null?void 0:p.error)==null?void 0:O.message,params:c,duration:l}}function u(o,h){var l;const m=h.frame.pageAlias,c=(l=[...o.entries()].find(([,x])=>m===x))==null?void 0:l[0];if(!c)throw new Error(`Internal error: page ${m} not found in [${[...o.values()]}]`);return c.mainFrame()}async function _(o,h,m){var b;const c=h.frame.pageAlias,l=(b=[...o.entries()].find(([,p])=>c===p))==null?void 0:b[0];if(!l)throw new Error("Internal error: page not found");const x=w(h.frame.framePath,m.selector),T=await l.mainFrame().selectors.resolveFrameForSelector(x);if(!T)throw new Error("Internal error: frame not found");return T.frame}function f(o,h){return o.action.name===h.action.name&&o.frame.pageAlias===h.frame.pageAlias&&o.frame.framePath.join("|")===h.frame.framePath.join("|")}function d(o,h){return"selector"in o.action&&"selector"in h.action&&o.action.selector===h.action.selector}function v(o,h){return h?f(o,h)&&(o.action.name==="navigate"||o.action.name==="fill"&&d(o,h)):!1}function a(o){const h=[];for(const m of o){const c=h[h.length-1];if(!v(m,c)){h.push(m);continue}const x=h[h.length-1].startTime;h[h.length-1]=m,h[h.length-1].startTime=x}return h}async function s(o){const h=[];for(;o;){const c=o.parentFrame();if(!c)break;h.push(n(c,o)),o=c}return(await Promise.all(h)).reverse()}async function n(o,h){const m=await(0,C.raceAgainstDeadline)(async()=>{try{const c=await h.frameElement();return!c||!o?void 0:await(await(await o._utilityContext()).injectedScript()).evaluate((b,p)=>b.generateSelectorSimple(p),c)}catch{}},(0,U.monotonicTime)()+2e3);return!m.timedOut&&m.result?m.result:h.name()?`iframe[name=${(0,U.quoteCSSAttributeValue)(h.name())}]`:`iframe[src=${(0,U.quoteCSSAttributeValue)(h.url())}]`}return yu}var Su,G_;function ay(){if(G_)return Su;G_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(a,s)=>{for(var n in s)t(a,n,{get:s[n],enumerable:!0})},V=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of i(s))!E.call(a,h)&&h!==n&&t(a,h,{get:()=>s[h],enumerable:!(o=r(s,h))||o.enumerable});return a},te=a=>V(t({},"__esModule",{value:!0}),a),P={};R(P,{locatorOrSelectorAsSelector:()=>f,unsafeLocatorOrSelectorAsSelector:()=>d}),Su=te(P);var e=nf(),U=Vi(),C=Ei();function w(a,s){a=a.replace(/AriaRole\s*\.\s*([\w]+)/g,(m,c)=>c.toLowerCase()).replace(/(get_by_role|getByRole)\s*\(\s*(?:["'`])([^'"`]+)['"`]/g,(m,c,l)=>`${c}(${l.toLowerCase()}`);const n=[];let o="";for(let m=0;m<a.length;++m){const c=a[m];if(c!=='"'&&c!=="'"&&c!=="`"&&c!=="/"){o+=c;continue}const l=a[m-1]==="r"||a[m]==="/";++m;let x="";for(;m<a.length;){if(a[m]==="\\"){l?(a[m+1]!==c&&(x+=a[m]),++m,x+=a[m]):(++m,a[m]==="n"?x+=`
`:a[m]==="r"?x+="\r":a[m]==="t"?x+="	":x+=a[m]),++m;continue}if(a[m]!==c){x+=a[m++];continue}break}n.push({quote:c,text:x}),o+=(c==="/"?"r":"")+"$"+n.length}o=o.toLowerCase().replace(/get_by_alt_text/g,"getbyalttext").replace(/get_by_test_id/g,"getbytestid").replace(/get_by_([\w]+)/g,"getby$1").replace(/has_not_text/g,"hasnottext").replace(/has_text/g,"hastext").replace(/has_not/g,"hasnot").replace(/frame_locator/g,"framelocator").replace(/content_frame/g,"contentframe").replace(/[{}\s]/g,"").replace(/new\(\)/g,"").replace(/new[\w]+\.[\w]+options\(\)/g,"").replace(/\.set/g,",set").replace(/\.or_\(/g,"or(").replace(/\.and_\(/g,"and(").replace(/:/g,"=").replace(/,re\.ignorecase/g,"i").replace(/,pattern.case_insensitive/g,"i").replace(/,regexoptions.ignorecase/g,"i").replace(/re.compile\(([^)]+)\)/g,"$1").replace(/pattern.compile\(([^)]+)\)/g,"r$1").replace(/newregex\(([^)]+)\)/g,"r$1").replace(/string=/g,"=").replace(/regex=/g,"=").replace(/,,/g,",").replace(/,\)/g,")");const h=n.map(m=>m.quote).filter(m=>"'\"`".includes(m))[0];return{selector:_(o,n,s),preferredQuote:h}}function g(a){return[...a.matchAll(/\$\d+/g)].length}function u(a,s){return a.replace(/\$(\d+)/g,(n,o)=>`$${o-s}`)}function _(a,s,n){for(;;){const h=a.match(/filter\(,?(has=|hasnot=|sethas\(|sethasnot\()/);if(!h)break;const m=h.index+h[0].length;let c=0,l=m;for(;l<a.length&&(a[l]==="("?c++:a[l]===")"&&c--,!(c<0));l++);let x=a.substring(0,m),T=0;["sethas(","sethasnot("].includes(h[1])&&(T=1,x=x.replace(/sethas\($/,"has=").replace(/sethasnot\($/,"hasnot="));const b=g(a.substring(0,m)),p=u(a.substring(m,l),b),O=g(p),z=s.slice(b,b+O),$=JSON.stringify(_(p,z,n));a=x.replace(/=$/,"2=")+`$${b+1}`+u(a.substring(l+T),O-1);const q=s.slice(0,b),J=s.slice(b+O);s=q.concat([{quote:'"',text:$}]).concat(J)}a=a.replace(/\,set([\w]+)\(([^)]+)\)/g,(h,m,c)=>","+m.toLowerCase()+"="+c.toLowerCase()).replace(/framelocator\(([^)]+)\)/g,"$1.internal:control=enter-frame").replace(/contentframe(\(\))?/g,"internal:control=enter-frame").replace(/locator\(([^)]+),hastext=([^),]+)\)/g,"locator($1).internal:has-text=$2").replace(/locator\(([^)]+),hasnottext=([^),]+)\)/g,"locator($1).internal:has-not-text=$2").replace(/locator\(([^)]+),hastext=([^),]+)\)/g,"locator($1).internal:has-text=$2").replace(/locator\(([^)]+)\)/g,"$1").replace(/getbyrole\(([^)]+)\)/g,"internal:role=$1").replace(/getbytext\(([^)]+)\)/g,"internal:text=$1").replace(/getbylabel\(([^)]+)\)/g,"internal:label=$1").replace(/getbytestid\(([^)]+)\)/g,`internal:testid=[${n}=$1]`).replace(/getby(placeholder|alt|title)(?:text)?\(([^)]+)\)/g,"internal:attr=[$1=$2]").replace(/first(\(\))?/g,"nth=0").replace(/last(\(\))?/g,"nth=-1").replace(/nth\(([^)]+)\)/g,"nth=$1").replace(/filter\(,?visible=true\)/g,"visible=true").replace(/filter\(,?visible=false\)/g,"visible=false").replace(/filter\(,?hastext=([^)]+)\)/g,"internal:has-text=$1").replace(/filter\(,?hasnottext=([^)]+)\)/g,"internal:has-not-text=$1").replace(/filter\(,?has2=([^)]+)\)/g,"internal:has=$1").replace(/filter\(,?hasnot2=([^)]+)\)/g,"internal:has-not=$1").replace(/,exact=false/g,"").replace(/,exact=true/g,"s").replace(/,includehidden=/g,",include-hidden=").replace(/\,/g,"][");const o=a.split(".");for(let h=0;h<o.length-1;h++)if(o[h]==="internal:control=enter-frame"&&o[h+1].startsWith("nth=")){const[m]=o.splice(h,1);o.splice(h+1,0,m)}return o.map(h=>!h.startsWith("internal:")||h==="internal:control"?h.replace(/\$(\d+)/g,(m,c)=>s[+c-1].text):(h=h.includes("[")?h.replace(/\]/,"")+"]":h,h=h.replace(/(?:r)\$(\d+)(i)?/g,(m,c,l)=>{const x=s[+c-1];return h.startsWith("internal:attr")||h.startsWith("internal:testid")||h.startsWith("internal:role")?(0,C.escapeForAttributeSelector)(new RegExp(x.text),!1)+(l||""):(0,C.escapeForTextSelector)(new RegExp(x.text,l),!1)}).replace(/\$(\d+)(i|s)?/g,(m,c,l)=>{const x=s[+c-1];return h.startsWith("internal:has=")||h.startsWith("internal:has-not=")?x.text:h.startsWith("internal:testid")?(0,C.escapeForAttributeSelector)(x.text,!0):h.startsWith("internal:attr")||h.startsWith("internal:role")?(0,C.escapeForAttributeSelector)(x.text,l==="s"):(0,C.escapeForTextSelector)(x.text,l==="s")}),h)).join(" >> ")}function f(a,s,n){try{return d(a,s,n)}catch{return""}}function d(a,s,n){try{return(0,U.parseSelector)(s),s}catch{}const{selector:o,preferredQuote:h}=w(s,n),m=(0,e.asLocators)(a,o,void 0,void 0,h),c=v(a,s);return m.some(l=>v(a,l)===c)?o:""}function v(a,s){return s=s.replace(/\s/g,""),a==="javascript"&&(s=s.replace(/\\?["`]/g,"'").replace(/,{}/g,"")),s}return Su}var xu,J_;function RO(){if(J_)return xu;J_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{RecorderSignalProcessor:()=>w}),xu=te(P);var e=Xn(),U=En(),C=Ys();class w{constructor(u){this._lastAction=null,this._delegate=u}addAction(u){this._lastAction=u,this._delegate.addAction(u)}signal(u,_,f){const d=(0,U.monotonicTime)();if(f.name==="navigation"&&_._page.mainFrame()===_){const v=this._lastAction,a=(0,e.isUnderTest)()?500:5e3;let s=!1;v?(v.action.name!=="click"&&v.action.name!=="press"&&v.action.name!=="fill"||d-v.startTime>a)&&(s=!0):s=!0,s&&this.addAction({frame:{pageGuid:_._page.guid,pageAlias:u,framePath:[]},action:{name:"navigate",url:_.url(),signals:[]},startTime:d,endTime:d});return}(0,C.generateFrameSelector)(_).then(v=>{const a={frame:{pageGuid:_._page.guid,pageAlias:u,framePath:v},signal:f,timestamp:d};this._delegate.addSignal(a)})}}return xu}var Eu,Y_;function LO(){if(Y_)return Eu;Y_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),Eu=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/recorder/pollingRecorder.ts
var pollingRecorder_exports = {};
__export(pollingRecorder_exports, {
  PollingRecorder: () => PollingRecorder,
  default: () => pollingRecorder_default
});
module.exports = __toCommonJS(pollingRecorder_exports);

// packages/injected/src/recorder/clipPaths.ts
var svgJson = { "tagName": "svg", "children": [{ "tagName": "defs", "children": [{ "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-gripper" }, "children": [{ "tagName": "path", "attrs": { "d": "M5 3h2v2H5zm0 4h2v2H5zm0 4h2v2H5zm4-8h2v2H9zm0 4h2v2H9zm0 4h2v2H9z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-circle-large-filled" }, "children": [{ "tagName": "path", "attrs": { "d": "M8 1a6.8 6.8 0 0 1 1.86.253 6.899 6.899 0 0 1 3.083 1.805 6.903 6.903 0 0 1 1.804 3.083C14.916 6.738 15 7.357 15 8s-.084 1.262-.253 1.86a6.9 6.9 0 0 1-.704 1.674 7.157 7.157 0 0 1-2.516 2.509 6.966 6.966 0 0 1-1.668.71A6.984 6.984 0 0 1 8 15a6.984 6.984 0 0 1-1.86-.246 7.098 7.098 0 0 1-1.674-.711 7.3 7.3 0 0 1-1.415-1.094 7.295 7.295 0 0 1-1.094-1.415 7.098 7.098 0 0 1-.71-1.675A6.985 6.985 0 0 1 1 8c0-.643.082-1.262.246-1.86a6.968 6.968 0 0 1 .711-1.667 7.156 7.156 0 0 1 2.509-2.516 6.895 6.895 0 0 1 1.675-.704A6.808 6.808 0 0 1 8 1z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-inspect" }, "children": [{ "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M1 3l1-1h12l1 1v6h-1V3H2v8h5v1H2l-1-1V3zm14.707 9.707L9 6v9.414l2.707-2.707h4zM10 13V8.414l3.293 3.293h-2L10 13z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-whole-word" }, "children": [{ "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M0 11H1V13H15V11H16V14H15H1H0V11Z" } }, { "tagName": "path", "attrs": { "d": "M6.84048 11H5.95963V10.1406H5.93814C5.555 10.7995 4.99104 11.1289 4.24625 11.1289C3.69839 11.1289 3.26871 10.9839 2.95718 10.6938C2.64924 10.4038 2.49527 10.0189 2.49527 9.53906C2.49527 8.51139 3.10041 7.91341 4.3107 7.74512L5.95963 7.51416C5.95963 6.57959 5.58186 6.1123 4.82632 6.1123C4.16389 6.1123 3.56591 6.33789 3.03238 6.78906V5.88672C3.57307 5.54297 4.19612 5.37109 4.90152 5.37109C6.19416 5.37109 6.84048 6.05501 6.84048 7.42285V11ZM5.95963 8.21777L4.63297 8.40039C4.22476 8.45768 3.91682 8.55973 3.70914 8.70654C3.50145 8.84977 3.39761 9.10579 3.39761 9.47461C3.39761 9.74316 3.4925 9.96338 3.68228 10.1353C3.87564 10.3035 4.13166 10.3877 4.45035 10.3877C4.8872 10.3877 5.24706 10.2355 5.52994 9.93115C5.8164 9.62321 5.95963 9.2347 5.95963 8.76562V8.21777Z" } }, { "tagName": "path", "attrs": { "d": "M9.3475 10.2051H9.32601V11H8.44515V2.85742H9.32601V6.4668H9.3475C9.78076 5.73633 10.4146 5.37109 11.2489 5.37109C11.9543 5.37109 12.5057 5.61816 12.9032 6.1123C13.3042 6.60286 13.5047 7.26172 13.5047 8.08887C13.5047 9.00911 13.2809 9.74674 12.8333 10.3018C12.3857 10.8532 11.7734 11.1289 10.9964 11.1289C10.2695 11.1289 9.71989 10.821 9.3475 10.2051ZM9.32601 7.98682V8.75488C9.32601 9.20964 9.47282 9.59635 9.76644 9.91504C10.0636 10.2301 10.4396 10.3877 10.8944 10.3877C11.4279 10.3877 11.8451 10.1836 12.1458 9.77539C12.4502 9.36719 12.6024 8.79964 12.6024 8.07275C12.6024 7.46045 12.4609 6.98063 12.1781 6.6333C11.8952 6.28597 11.512 6.1123 11.0286 6.1123C10.5166 6.1123 10.1048 6.29134 9.7933 6.64941C9.48177 7.00391 9.32601 7.44971 9.32601 7.98682Z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-eye" }, "children": [{ "tagName": "path", "attrs": { "d": "M7.99993 6.00316C9.47266 6.00316 10.6666 7.19708 10.6666 8.66981C10.6666 10.1426 9.47266 11.3365 7.99993 11.3365C6.52715 11.3365 5.33324 10.1426 5.33324 8.66981C5.33324 7.19708 6.52715 6.00316 7.99993 6.00316ZM7.99993 7.00315C7.07946 7.00315 6.33324 7.74935 6.33324 8.66981C6.33324 9.59028 7.07946 10.3365 7.99993 10.3365C8.9204 10.3365 9.6666 9.59028 9.6666 8.66981C9.6666 7.74935 8.9204 7.00315 7.99993 7.00315ZM7.99993 3.66675C11.0756 3.66675 13.7307 5.76675 14.4673 8.70968C14.5344 8.97755 14.3716 9.24908 14.1037 9.31615C13.8358 9.38315 13.5643 9.22041 13.4973 8.95248C12.8713 6.45205 10.6141 4.66675 7.99993 4.66675C5.38454 4.66675 3.12664 6.45359 2.50182 8.95555C2.43491 9.22341 2.16348 9.38635 1.89557 9.31948C1.62766 9.25255 1.46471 8.98115 1.53162 8.71321C2.26701 5.76856 4.9229 3.66675 7.99993 3.66675Z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-symbol-constant" }, "children": [{ "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M4 6h8v1H4V6zm8 3H4v1h8V9z" } }, { "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M1 4l1-1h12l1 1v8l-1 1H2l-1-1V4zm1 0v8h12V4H2z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-check" }, "children": [{ "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-close" }, "children": [{ "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M8 8.707l3.646 3.647.708-.707L8.707 8l3.647-3.646-.707-.708L8 7.293 4.354 3.646l-.707.708L7.293 8l-3.646 3.646.707.708L8 8.707z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-pass" }, "children": [{ "tagName": "path", "attrs": { "d": "M6.27 10.87h.71l4.56-4.56-.71-.71-4.2 4.21-1.92-1.92L4 8.6l2.27 2.27z" } }, { "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M8.6 1c1.6.1 3.1.9 4.2 2 1.3 1.4 2 3.1 2 5.1 0 1.6-.6 3.1-1.6 4.4-1 1.2-2.4 2.1-4 2.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9 9.2.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1zm.5 12.9c1.3-.3 2.5-1 3.4-2.1.8-1.1 1.3-2.4 1.2-3.8 0-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8 1-1.1.8-1.9 1.9-2.3 3.3-.4 1.3-.4 2.7.2 4 .6 1.3 1.5 2.3 2.7 3 1.2.7 2.6.9 3.9.6z" } }] }, { "tagName": "clipPath", "attrs": { "width": "16", "height": "16", "viewBox": "0 0 16 16", "fill": "currentColor", "id": "icon-gist" }, "children": [{ "tagName": "path", "attrs": { "fill-rule": "evenodd", "clip-rule": "evenodd", "d": "M10.57 1.14l3.28 3.3.15.36v9.7l-.5.5h-11l-.5-.5v-13l.5-.5h7.72l.35.14zM10 5h3l-3-3v3zM3 2v12h10V6H9.5L9 5.5V2H3zm2.062 7.533l1.817-1.828L6.17 7 4 9.179v.707l2.171 2.174.707-.707-1.816-1.82zM8.8 7.714l.7-.709 2.189 2.175v.709L9.5 12.062l-.705-.709 1.831-1.82L8.8 7.714z" } }] }] }] };
var clipPaths_default = svgJson;

// packages/injected/src/recorder/recorder.ts
var HighlightColors = {
  multiple: "#f6b26b7f",
  single: "#6fa8dc7f",
  assert: "#8acae480",
  action: "#dc6f6f7f"
};
var NoneTool = class {
  cursor() {
    return "default";
  }
};
var InspectTool = class {
  constructor(recorder, assertVisibility) {
    this._hoveredModel = null;
    this._hoveredElement = null;
    this._recorder = recorder;
    this._assertVisibility = assertVisibility;
  }
  cursor() {
    return "pointer";
  }
  uninstall() {
    this._hoveredModel = null;
    this._hoveredElement = null;
  }
  onClick(event) {
    var _a;
    consumeEvent(event);
    if (event.button !== 0)
      return;
    if ((_a = this._hoveredModel) == null ? void 0 : _a.selector)
      this._commit(this._hoveredModel.selector, this._hoveredModel);
  }
  onPointerDown(event) {
    consumeEvent(event);
  }
  onPointerUp(event) {
    consumeEvent(event);
  }
  onMouseDown(event) {
    consumeEvent(event);
  }
  onMouseUp(event) {
    consumeEvent(event);
  }
  onMouseMove(event) {
    var _a;
    consumeEvent(event);
    let target = this._recorder.deepEventTarget(event);
    if (!target.isConnected)
      target = null;
    if (this._hoveredElement === target)
      return;
    this._hoveredElement = target;
    let model = null;
    if (this._hoveredElement) {
      const generated = this._recorder.injectedScript.generateSelector(this._hoveredElement, { testIdAttributeName: this._recorder.state.testIdAttributeName, multiple: false });
      model = {
        selector: generated.selector,
        elements: generated.elements,
        tooltipText: this._recorder.injectedScript.utils.asLocator(this._recorder.state.language, generated.selector),
        color: this._assertVisibility ? HighlightColors.assert : HighlightColors.single
      };
    }
    if (((_a = this._hoveredModel) == null ? void 0 : _a.selector) === (model == null ? void 0 : model.selector))
      return;
    this._hoveredModel = model;
    this._recorder.updateHighlight(model, true);
  }
  onMouseEnter(event) {
    consumeEvent(event);
  }
  onMouseLeave(event) {
    consumeEvent(event);
    const window = this._recorder.injectedScript.window;
    if (window.top !== window && this._recorder.deepEventTarget(event).nodeType === Node.DOCUMENT_NODE)
      this._reset(true);
  }
  onKeyDown(event) {
    consumeEvent(event);
    if (event.key === "Escape") {
      if (this._assertVisibility)
        this._recorder.setMode("recording");
    }
  }
  onKeyUp(event) {
    consumeEvent(event);
  }
  onScroll(event) {
    this._reset(false);
  }
  _commit(selector, model) {
    var _a;
    if (this._assertVisibility) {
      this._recorder.recordAction({
        name: "assertVisible",
        selector,
        signals: []
      });
      this._recorder.setMode("recording");
      (_a = this._recorder.overlay) == null ? void 0 : _a.flashToolSucceeded("assertingVisibility");
    } else {
      this._recorder.elementPicked(selector, model);
    }
  }
  _reset(userGesture) {
    this._hoveredElement = null;
    this._hoveredModel = null;
    this._recorder.updateHighlight(null, userGesture);
  }
};
var RecordActionTool = class {
  constructor(recorder) {
    this._hoveredModel = null;
    this._hoveredElement = null;
    this._activeModel = null;
    this._expectProgrammaticKeyUp = false;
    this._observer = null;
    this._recorder = recorder;
    this._performingActions = /* @__PURE__ */ new Set();
  }
  cursor() {
    return "pointer";
  }
  _installObserverIfNeeded() {
    var _a;
    if (this._observer)
      return;
    if (!((_a = this._recorder.injectedScript.document) == null ? void 0 : _a.body))
      return;
    this._observer = new MutationObserver((mutations) => {
      if (!this._hoveredElement)
        return;
      for (const mutation of mutations) {
        for (const node of mutation.removedNodes) {
          if (node === this._hoveredElement || node.contains(this._hoveredElement))
            this._resetHoveredModel();
        }
      }
    });
    this._observer.observe(this._recorder.injectedScript.document.body, { childList: true, subtree: true });
  }
  uninstall() {
    var _a;
    (_a = this._observer) == null ? void 0 : _a.disconnect();
    this._observer = null;
    this._hoveredModel = null;
    this._hoveredElement = null;
    this._activeModel = null;
    this._expectProgrammaticKeyUp = false;
  }
  onClick(event) {
    if (isRangeInput(this._hoveredElement))
      return;
    if (event.button === 2 && event.type === "auxclick")
      return;
    if (this._shouldIgnoreMouseEvent(event))
      return;
    if (this._actionInProgress(event))
      return;
    if (this._consumedDueToNoModel(event, this._hoveredModel))
      return;
    const checkbox = asCheckbox(this._recorder.deepEventTarget(event));
    if (checkbox && event.detail === 1) {
      this._performAction({
        name: checkbox.checked ? "check" : "uncheck",
        selector: this._hoveredModel.selector,
        signals: []
      });
      return;
    }
    this._cancelPendingClickAction();
    if (event.detail === 1) {
      this._pendingClickAction = {
        action: {
          name: "click",
          selector: this._hoveredModel.selector,
          position: positionForEvent(event),
          signals: [],
          button: buttonForEvent(event),
          modifiers: modifiersForEvent(event),
          clickCount: event.detail
        },
        timeout: this._recorder.injectedScript.utils.builtins.setTimeout(() => this._commitPendingClickAction(), 200)
      };
    }
  }
  onDblClick(event) {
    if (isRangeInput(this._hoveredElement))
      return;
    if (this._shouldIgnoreMouseEvent(event))
      return;
    if (this._actionInProgress(event))
      return;
    if (this._consumedDueToNoModel(event, this._hoveredModel))
      return;
    this._cancelPendingClickAction();
    this._performAction({
      name: "click",
      selector: this._hoveredModel.selector,
      position: positionForEvent(event),
      signals: [],
      button: buttonForEvent(event),
      modifiers: modifiersForEvent(event),
      clickCount: event.detail
    });
  }
  _commitPendingClickAction() {
    if (this._pendingClickAction)
      this._performAction(this._pendingClickAction.action);
    this._cancelPendingClickAction();
  }
  _cancelPendingClickAction() {
    if (this._pendingClickAction)
      this._recorder.injectedScript.utils.builtins.clearTimeout(this._pendingClickAction.timeout);
    this._pendingClickAction = void 0;
  }
  onContextMenu(event) {
    if (this._shouldIgnoreMouseEvent(event))
      return;
    if (this._actionInProgress(event))
      return;
    if (this._consumedDueToNoModel(event, this._hoveredModel))
      return;
    this._performAction({
      name: "click",
      selector: this._hoveredModel.selector,
      position: positionForEvent(event),
      signals: [],
      button: "right",
      modifiers: 0,
      clickCount: 0
    });
  }
  onPointerDown(event) {
    if (this._shouldIgnoreMouseEvent(event))
      return;
    this._consumeWhenAboutToPerform(event);
  }
  onPointerUp(event) {
    if (this._shouldIgnoreMouseEvent(event))
      return;
    this._consumeWhenAboutToPerform(event);
  }
  onMouseDown(event) {
    if (this._shouldIgnoreMouseEvent(event))
      return;
    this._consumeWhenAboutToPerform(event);
    this._activeModel = this._hoveredModel;
  }
  onMouseUp(event) {
    if (this._shouldIgnoreMouseEvent(event))
      return;
    this._consumeWhenAboutToPerform(event);
  }
  onMouseMove(event) {
    const target = this._recorder.deepEventTarget(event);
    if (this._hoveredElement === target)
      return;
    this._hoveredElement = target;
    this._updateModelForHoveredElement();
  }
  onMouseLeave(event) {
    const window = this._recorder.injectedScript.window;
    if (window.top !== window && this._recorder.deepEventTarget(event).nodeType === Node.DOCUMENT_NODE) {
      this._hoveredElement = null;
      this._updateModelForHoveredElement();
    }
  }
  onFocus(event) {
    this._onFocus(true);
  }
  onInput(event) {
    const target = this._recorder.deepEventTarget(event);
    if (target.nodeName === "INPUT" && target.type.toLowerCase() === "file") {
      this._recorder.recordAction({
        name: "setInputFiles",
        selector: this._activeModel.selector,
        signals: [],
        files: [...target.files || []].map((file) => file.name)
      });
      return;
    }
    if (isRangeInput(target)) {
      this._recorder.recordAction({
        name: "fill",
        // must use hoveredModel instead of activeModel for it to work in webkit
        selector: this._hoveredModel.selector,
        signals: [],
        text: target.value
      });
      return;
    }
    if (["INPUT", "TEXTAREA"].includes(target.nodeName) || target.isContentEditable) {
      if (target.nodeName === "INPUT" && ["checkbox", "radio"].includes(target.type.toLowerCase())) {
        return;
      }
      if (this._consumedDueWrongTarget(event))
        return;
      this._recorder.recordAction({
        name: "fill",
        selector: this._activeModel.selector,
        signals: [],
        text: target.isContentEditable ? target.innerText : target.value
      });
    }
    if (target.nodeName === "SELECT") {
      const selectElement = target;
      if (this._actionInProgress(event))
        return;
      this._performAction({
        name: "select",
        selector: this._activeModel.selector,
        options: [...selectElement.selectedOptions].map((option) => option.value),
        signals: []
      });
    }
  }
  onKeyDown(event) {
    if (!this._shouldGenerateKeyPressFor(event))
      return;
    if (this._actionInProgress(event)) {
      this._expectProgrammaticKeyUp = true;
      return;
    }
    if (this._consumedDueWrongTarget(event))
      return;
    if (event.key === " ") {
      const checkbox = asCheckbox(this._recorder.deepEventTarget(event));
      if (checkbox && event.detail === 0) {
        this._performAction({
          name: checkbox.checked ? "uncheck" : "check",
          selector: this._activeModel.selector,
          signals: []
        });
        return;
      }
    }
    this._performAction({
      name: "press",
      selector: this._activeModel.selector,
      signals: [],
      key: event.key,
      modifiers: modifiersForEvent(event)
    });
  }
  onKeyUp(event) {
    if (!this._shouldGenerateKeyPressFor(event))
      return;
    if (!this._expectProgrammaticKeyUp) {
      consumeEvent(event);
      return;
    }
    this._expectProgrammaticKeyUp = false;
  }
  onScroll(event) {
    this._resetHoveredModel();
  }
  _resetHoveredModel() {
    this._hoveredModel = null;
    this._hoveredElement = null;
    this._updateHighlight(false);
  }
  _onFocus(userGesture) {
    const activeElement = deepActiveElement(this._recorder.document);
    if (userGesture && activeElement === this._recorder.document.body)
      return;
    const result = activeElement ? this._recorder.injectedScript.generateSelector(activeElement, { testIdAttributeName: this._recorder.state.testIdAttributeName }) : null;
    this._activeModel = result && result.selector ? { ...result, color: HighlightColors.action } : null;
    if (userGesture) {
      this._hoveredElement = activeElement;
      this._updateModelForHoveredElement();
    }
  }
  _shouldIgnoreMouseEvent(event) {
    const target = this._recorder.deepEventTarget(event);
    const nodeName = target.nodeName;
    if (nodeName === "SELECT" || nodeName === "OPTION")
      return true;
    if (nodeName === "INPUT" && ["date", "range"].includes(target.type))
      return true;
    return false;
  }
  _actionInProgress(event) {
    const isKeyEvent = event instanceof KeyboardEvent;
    const isMouseOrPointerEvent = event instanceof MouseEvent || event instanceof PointerEvent;
    for (const action of this._performingActions) {
      if (isKeyEvent && action.name === "press" && event.key === action.key)
        return true;
      if (isMouseOrPointerEvent && (action.name === "click" || action.name === "check" || action.name === "uncheck"))
        return true;
    }
    consumeEvent(event);
    return false;
  }
  _consumedDueToNoModel(event, model) {
    if (model)
      return false;
    consumeEvent(event);
    return true;
  }
  _consumedDueWrongTarget(event) {
    if (this._activeModel && this._activeModel.elements[0] === this._recorder.deepEventTarget(event))
      return false;
    consumeEvent(event);
    return true;
  }
  _consumeWhenAboutToPerform(event) {
    if (!this._performingActions.size)
      consumeEvent(event);
  }
  _performAction(action) {
    this._recorder.updateHighlight(null, false);
    this._performingActions.add(action);
    const promise = this._recorder.performAction(action).then(() => {
      this._performingActions.delete(action);
      this._onFocus(false);
    });
    if (!this._recorder.injectedScript.isUnderTest)
      return;
    void promise.then(() => {
      console.error("Action performed for test: " + JSON.stringify({
        // eslint-disable-line no-console
        hovered: this._hoveredModel ? this._hoveredModel.selector : null,
        active: this._activeModel ? this._activeModel.selector : null
      }));
    });
  }
  _shouldGenerateKeyPressFor(event) {
    if (typeof event.key !== "string")
      return false;
    if (event.key === "Enter" && (this._recorder.deepEventTarget(event).nodeName === "TEXTAREA" || this._recorder.deepEventTarget(event).isContentEditable))
      return false;
    if (["Backspace", "Delete", "AltGraph"].includes(event.key))
      return false;
    if (event.key === "@" && event.code === "KeyL")
      return false;
    if (navigator.platform.includes("Mac")) {
      if (event.key === "v" && event.metaKey)
        return false;
    } else {
      if (event.key === "v" && event.ctrlKey)
        return false;
      if (event.key === "Insert" && event.shiftKey)
        return false;
    }
    if (["Shift", "Control", "Meta", "Alt", "Process"].includes(event.key))
      return false;
    const hasModifier = event.ctrlKey || event.altKey || event.metaKey;
    if (event.key.length === 1 && !hasModifier)
      return !!asCheckbox(this._recorder.deepEventTarget(event));
    return true;
  }
  _updateModelForHoveredElement() {
    this._installObserverIfNeeded();
    if (this._performingActions.size)
      return;
    if (!this._hoveredElement || !this._hoveredElement.isConnected) {
      this._hoveredModel = null;
      this._hoveredElement = null;
      this._updateHighlight(true);
      return;
    }
    const { selector, elements } = this._recorder.injectedScript.generateSelector(this._hoveredElement, { testIdAttributeName: this._recorder.state.testIdAttributeName });
    if (this._hoveredModel && this._hoveredModel.selector === selector)
      return;
    this._hoveredModel = selector ? { selector, elements, color: HighlightColors.action } : null;
    this._updateHighlight(true);
  }
  _updateHighlight(userGesture) {
    this._recorder.updateHighlight(this._hoveredModel, userGesture);
  }
};
var JsonRecordActionTool = class {
  constructor(recorder) {
    this._recorder = recorder;
  }
  cursor() {
    return "pointer";
  }
  onClick(event) {
    const element = this._recorder.deepEventTarget(event);
    if (isRangeInput(element))
      return;
    if (event.button === 2 && event.type === "auxclick")
      return;
    if (this._shouldIgnoreMouseEvent(event))
      return;
    const checkbox = asCheckbox(element);
    const { ariaSnapshot, selector } = this._ariaSnapshot(element);
    if (checkbox && event.detail === 1) {
      this._recorder.recordAction({
        name: checkbox.checked ? "check" : "uncheck",
        selector,
        signals: [],
        ariaSnapshot
      });
      return;
    }
    this._recorder.recordAction({
      name: "click",
      selector,
      ariaSnapshot,
      position: positionForEvent(event),
      signals: [],
      button: buttonForEvent(event),
      modifiers: modifiersForEvent(event),
      clickCount: event.detail
    });
  }
  onDblClick(event) {
    const element = this._recorder.deepEventTarget(event);
    if (isRangeInput(element))
      return;
    if (this._shouldIgnoreMouseEvent(event))
      return;
    const { ariaSnapshot, selector } = this._ariaSnapshot(element);
    this._recorder.recordAction({
      name: "click",
      selector,
      ariaSnapshot,
      position: positionForEvent(event),
      signals: [],
      button: buttonForEvent(event),
      modifiers: modifiersForEvent(event),
      clickCount: event.detail
    });
  }
  onInput(event) {
    const element = this._recorder.deepEventTarget(event);
    const { ariaSnapshot, selector } = this._ariaSnapshot(element);
    if (isRangeInput(element)) {
      this._recorder.recordAction({
        name: "fill",
        selector,
        ariaSnapshot,
        signals: [],
        text: element.value
      });
      return;
    }
    if (["INPUT", "TEXTAREA"].includes(element.nodeName) || element.isContentEditable) {
      if (element.nodeName === "INPUT" && ["checkbox", "radio"].includes(element.type.toLowerCase())) {
        return;
      }
      this._recorder.recordAction({
        name: "fill",
        selector,
        ariaSnapshot,
        signals: [],
        text: element.isContentEditable ? element.innerText : element.value
      });
      return;
    }
    if (element.nodeName === "SELECT") {
      const selectElement = element;
      this._recorder.recordAction({
        name: "select",
        selector,
        ariaSnapshot,
        options: [...selectElement.selectedOptions].map((option) => option.value),
        signals: []
      });
      return;
    }
  }
  onKeyDown(event) {
    if (!this._shouldGenerateKeyPressFor(event))
      return;
    const element = this._recorder.deepEventTarget(event);
    const { ariaSnapshot, selector } = this._ariaSnapshot(element);
    if (event.key === " ") {
      const checkbox = asCheckbox(element);
      if (checkbox && event.detail === 0) {
        this._recorder.recordAction({
          name: checkbox.checked ? "uncheck" : "check",
          selector,
          ariaSnapshot,
          signals: []
        });
        return;
      }
    }
    this._recorder.recordAction({
      name: "press",
      selector,
      ariaSnapshot,
      signals: [],
      key: event.key,
      modifiers: modifiersForEvent(event)
    });
  }
  _shouldIgnoreMouseEvent(event) {
    const target = this._recorder.deepEventTarget(event);
    const nodeName = target.nodeName;
    if (nodeName === "SELECT" || nodeName === "OPTION")
      return true;
    if (nodeName === "INPUT" && ["date", "range"].includes(target.type))
      return true;
    return false;
  }
  _shouldGenerateKeyPressFor(event) {
    if (typeof event.key !== "string")
      return false;
    if (event.key === "Enter" && (this._recorder.deepEventTarget(event).nodeName === "TEXTAREA" || this._recorder.deepEventTarget(event).isContentEditable))
      return false;
    if (["Backspace", "Delete", "AltGraph"].includes(event.key))
      return false;
    if (event.key === "@" && event.code === "KeyL")
      return false;
    if (navigator.platform.includes("Mac")) {
      if (event.key === "v" && event.metaKey)
        return false;
    } else {
      if (event.key === "v" && event.ctrlKey)
        return false;
      if (event.key === "Insert" && event.shiftKey)
        return false;
    }
    if (["Shift", "Control", "Meta", "Alt", "Process"].includes(event.key))
      return false;
    const hasModifier = event.ctrlKey || event.altKey || event.metaKey;
    if (event.key.length === 1 && !hasModifier)
      return !this._isEditable(this._recorder.deepEventTarget(event));
    return true;
  }
  _isEditable(element) {
    if (element.nodeName === "TEXTAREA" || element.nodeName === "INPUT")
      return true;
    if (element.isContentEditable)
      return true;
    return false;
  }
  _ariaSnapshot(element) {
    const { ariaSnapshot, refs } = this._recorder.injectedScript.ariaSnapshotForRecorder();
    const ref = element ? refs.get(element) : void 0;
    const selector = ref ? \`aria-ref=\${ref}\` : void 0;
    return { ariaSnapshot, selector };
  }
};
var TextAssertionTool = class {
  constructor(recorder, kind) {
    this._hoverHighlight = null;
    this._action = null;
    this._recorder = recorder;
    this._textCache = /* @__PURE__ */ new Map();
    this._kind = kind;
    this._dialog = new Dialog(recorder);
  }
  cursor() {
    return "pointer";
  }
  uninstall() {
    this._dialog.close();
    this._hoverHighlight = null;
  }
  onClick(event) {
    consumeEvent(event);
    if (this._kind === "value") {
      this._commitAssertValue();
    } else {
      if (!this._dialog.isShowing())
        this._showDialog();
    }
  }
  onMouseDown(event) {
    const target = this._recorder.deepEventTarget(event);
    if (this._elementHasValue(target))
      event.preventDefault();
  }
  onPointerUp(event) {
    var _a;
    const target = (_a = this._hoverHighlight) == null ? void 0 : _a.elements[0];
    if (this._kind === "value" && target && (target.nodeName === "INPUT" || target.nodeName === "SELECT") && target.disabled) {
      this._commitAssertValue();
    }
  }
  onMouseMove(event) {
    var _a;
    if (this._dialog.isShowing())
      return;
    const target = this._recorder.deepEventTarget(event);
    if (((_a = this._hoverHighlight) == null ? void 0 : _a.elements[0]) === target)
      return;
    if (this._kind === "text" || this._kind === "snapshot") {
      this._hoverHighlight = this._recorder.injectedScript.utils.elementText(this._textCache, target).full ? { elements: [target], selector: "", color: HighlightColors.assert } : null;
    } else if (this._elementHasValue(target)) {
      const generated = this._recorder.injectedScript.generateSelector(target, { testIdAttributeName: this._recorder.state.testIdAttributeName });
      this._hoverHighlight = { selector: generated.selector, elements: generated.elements, color: HighlightColors.assert };
    } else {
      this._hoverHighlight = null;
    }
    this._recorder.updateHighlight(this._hoverHighlight, true);
  }
  onKeyDown(event) {
    if (event.key === "Escape")
      this._recorder.setMode("recording");
    consumeEvent(event);
  }
  onScroll(event) {
    this._recorder.updateHighlight(this._hoverHighlight, false);
  }
  _elementHasValue(element) {
    return element.nodeName === "TEXTAREA" || element.nodeName === "SELECT" || element.nodeName === "INPUT" && !["button", "image", "reset", "submit"].includes(element.type);
  }
  _generateAction() {
    var _a;
    this._textCache.clear();
    const target = (_a = this._hoverHighlight) == null ? void 0 : _a.elements[0];
    if (!target)
      return null;
    if (this._kind === "value") {
      if (!this._elementHasValue(target))
        return null;
      const { selector } = this._recorder.injectedScript.generateSelector(target, { testIdAttributeName: this._recorder.state.testIdAttributeName });
      if (target.nodeName === "INPUT" && ["checkbox", "radio"].includes(target.type.toLowerCase())) {
        return {
          name: "assertChecked",
          selector,
          signals: [],
          // Interestingly, inputElement.checked is reversed inside this event handler.
          checked: !target.checked
        };
      } else {
        return {
          name: "assertValue",
          selector,
          signals: [],
          value: target.value
        };
      }
    } else if (this._kind === "snapshot") {
      const generated = this._recorder.injectedScript.generateSelector(target, { testIdAttributeName: this._recorder.state.testIdAttributeName, forTextExpect: true });
      this._hoverHighlight = { selector: generated.selector, elements: generated.elements, color: HighlightColors.assert };
      this._recorder.updateHighlight(this._hoverHighlight, true);
      return {
        name: "assertSnapshot",
        selector: this._hoverHighlight.selector,
        signals: [],
        ariaSnapshot: this._recorder.injectedScript.ariaSnapshot(target, { mode: "regex" })
      };
    } else {
      const generated = this._recorder.injectedScript.generateSelector(target, { testIdAttributeName: this._recorder.state.testIdAttributeName, forTextExpect: true });
      this._hoverHighlight = { selector: generated.selector, elements: generated.elements, color: HighlightColors.assert };
      this._recorder.updateHighlight(this._hoverHighlight, true);
      return {
        name: "assertText",
        selector: this._hoverHighlight.selector,
        signals: [],
        text: this._recorder.injectedScript.utils.elementText(this._textCache, target).normalized,
        substring: true
      };
    }
  }
  _renderValue(action) {
    if ((action == null ? void 0 : action.name) === "assertText")
      return this._recorder.injectedScript.utils.normalizeWhiteSpace(action.text);
    if ((action == null ? void 0 : action.name) === "assertChecked")
      return String(action.checked);
    if ((action == null ? void 0 : action.name) === "assertValue")
      return action.value;
    if ((action == null ? void 0 : action.name) === "assertSnapshot")
      return action.ariaSnapshot;
    return "";
  }
  _commit() {
    if (!this._action || !this._dialog.isShowing())
      return;
    this._dialog.close();
    this._recorder.recordAction(this._action);
    this._recorder.setMode("recording");
  }
  _showDialog() {
    var _a, _b, _c, _d;
    if (!((_a = this._hoverHighlight) == null ? void 0 : _a.elements[0]))
      return;
    this._action = this._generateAction();
    if (((_b = this._action) == null ? void 0 : _b.name) === "assertText") {
      this._showTextDialog(this._action);
    } else if (((_c = this._action) == null ? void 0 : _c.name) === "assertSnapshot") {
      this._recorder.recordAction(this._action);
      this._recorder.setMode("recording");
      (_d = this._recorder.overlay) == null ? void 0 : _d.flashToolSucceeded("assertingSnapshot");
    }
  }
  _showTextDialog(action) {
    const textElement = this._recorder.document.createElement("textarea");
    textElement.setAttribute("spellcheck", "false");
    textElement.value = this._renderValue(action);
    textElement.classList.add("text-editor");
    const updateAndValidate = () => {
      var _a;
      const newValue = this._recorder.injectedScript.utils.normalizeWhiteSpace(textElement.value);
      const target = (_a = this._hoverHighlight) == null ? void 0 : _a.elements[0];
      if (!target)
        return;
      action.text = newValue;
      const targetText = this._recorder.injectedScript.utils.elementText(this._textCache, target).normalized;
      const matches = newValue && targetText.includes(newValue);
      textElement.classList.toggle("does-not-match", !matches);
    };
    textElement.addEventListener("input", updateAndValidate);
    const label = "Assert that element contains text";
    const dialogElement = this._dialog.show({
      label,
      body: textElement,
      onCommit: () => this._commit()
    });
    const position = this._recorder.highlight.tooltipPosition(this._recorder.highlight.firstBox(), dialogElement);
    this._dialog.moveTo(position.anchorTop, position.anchorLeft);
    textElement.focus();
  }
  _commitAssertValue() {
    var _a;
    if (this._kind !== "value")
      return;
    const action = this._generateAction();
    if (!action)
      return;
    this._recorder.recordAction(action);
    this._recorder.setMode("recording");
    (_a = this._recorder.overlay) == null ? void 0 : _a.flashToolSucceeded("assertingValue");
  }
};
var Overlay = class {
  constructor(recorder) {
    this._listeners = [];
    this._offsetX = 0;
    this._measure = { width: 0, height: 0 };
    this._recorder = recorder;
    const document = this._recorder.document;
    this._overlayElement = document.createElement("x-pw-overlay");
    const toolsListElement = document.createElement("x-pw-tools-list");
    this._overlayElement.appendChild(toolsListElement);
    this._dragHandle = document.createElement("x-pw-tool-gripper");
    this._dragHandle.appendChild(document.createElement("x-div"));
    toolsListElement.appendChild(this._dragHandle);
    this._recordToggle = this._recorder.document.createElement("x-pw-tool-item");
    this._recordToggle.title = "Record";
    this._recordToggle.classList.add("record");
    this._recordToggle.appendChild(this._recorder.document.createElement("x-div"));
    toolsListElement.appendChild(this._recordToggle);
    this._pickLocatorToggle = this._recorder.document.createElement("x-pw-tool-item");
    this._pickLocatorToggle.title = "Pick locator";
    this._pickLocatorToggle.classList.add("pick-locator");
    this._pickLocatorToggle.appendChild(this._recorder.document.createElement("x-div"));
    toolsListElement.appendChild(this._pickLocatorToggle);
    this._assertVisibilityToggle = this._recorder.document.createElement("x-pw-tool-item");
    this._assertVisibilityToggle.title = "Assert visibility";
    this._assertVisibilityToggle.classList.add("visibility");
    this._assertVisibilityToggle.appendChild(this._recorder.document.createElement("x-div"));
    toolsListElement.appendChild(this._assertVisibilityToggle);
    this._assertTextToggle = this._recorder.document.createElement("x-pw-tool-item");
    this._assertTextToggle.title = "Assert text";
    this._assertTextToggle.classList.add("text");
    this._assertTextToggle.appendChild(this._recorder.document.createElement("x-div"));
    toolsListElement.appendChild(this._assertTextToggle);
    this._assertValuesToggle = this._recorder.document.createElement("x-pw-tool-item");
    this._assertValuesToggle.title = "Assert value";
    this._assertValuesToggle.classList.add("value");
    this._assertValuesToggle.appendChild(this._recorder.document.createElement("x-div"));
    toolsListElement.appendChild(this._assertValuesToggle);
    this._assertSnapshotToggle = this._recorder.document.createElement("x-pw-tool-item");
    this._assertSnapshotToggle.title = "Assert snapshot";
    this._assertSnapshotToggle.classList.add("snapshot");
    this._assertSnapshotToggle.appendChild(this._recorder.document.createElement("x-div"));
    toolsListElement.appendChild(this._assertSnapshotToggle);
    this._updateVisualPosition();
    this._refreshListeners();
  }
  _refreshListeners() {
    removeEventListeners(this._listeners);
    this._listeners = [
      addEventListener(this._dragHandle, "mousedown", (event) => {
        this._dragState = { offsetX: this._offsetX, dragStart: { x: event.clientX, y: 0 } };
      }),
      addEventListener(this._recordToggle, "click", () => {
        if (this._recordToggle.classList.contains("disabled"))
          return;
        this._recorder.setMode(this._recorder.state.mode === "none" || this._recorder.state.mode === "standby" || this._recorder.state.mode === "inspecting" ? "recording" : "standby");
      }),
      addEventListener(this._pickLocatorToggle, "click", () => {
        if (this._pickLocatorToggle.classList.contains("disabled"))
          return;
        const newMode = {
          "inspecting": "standby",
          "none": "inspecting",
          "standby": "inspecting",
          "recording": "recording-inspecting",
          "recording-inspecting": "recording",
          "assertingText": "recording-inspecting",
          "assertingVisibility": "recording-inspecting",
          "assertingValue": "recording-inspecting",
          "assertingSnapshot": "recording-inspecting"
        };
        this._recorder.setMode(newMode[this._recorder.state.mode]);
      }),
      addEventListener(this._assertVisibilityToggle, "click", () => {
        if (!this._assertVisibilityToggle.classList.contains("disabled"))
          this._recorder.setMode(this._recorder.state.mode === "assertingVisibility" ? "recording" : "assertingVisibility");
      }),
      addEventListener(this._assertTextToggle, "click", () => {
        if (!this._assertTextToggle.classList.contains("disabled"))
          this._recorder.setMode(this._recorder.state.mode === "assertingText" ? "recording" : "assertingText");
      }),
      addEventListener(this._assertValuesToggle, "click", () => {
        if (!this._assertValuesToggle.classList.contains("disabled"))
          this._recorder.setMode(this._recorder.state.mode === "assertingValue" ? "recording" : "assertingValue");
      }),
      addEventListener(this._assertSnapshotToggle, "click", () => {
        if (!this._assertSnapshotToggle.classList.contains("disabled"))
          this._recorder.setMode(this._recorder.state.mode === "assertingSnapshot" ? "recording" : "assertingSnapshot");
      })
    ];
  }
  install() {
    this._recorder.highlight.appendChild(this._overlayElement);
    this._refreshListeners();
    this._updateVisualPosition();
  }
  contains(element) {
    return this._recorder.injectedScript.utils.isInsideScope(this._overlayElement, element);
  }
  setUIState(state) {
    this._recordToggle.classList.toggle("toggled", state.mode === "recording" || state.mode === "assertingText" || state.mode === "assertingVisibility" || state.mode === "assertingValue" || state.mode === "assertingSnapshot" || state.mode === "recording-inspecting");
    this._pickLocatorToggle.classList.toggle("toggled", state.mode === "inspecting" || state.mode === "recording-inspecting");
    this._assertVisibilityToggle.classList.toggle("toggled", state.mode === "assertingVisibility");
    this._assertVisibilityToggle.classList.toggle("disabled", state.mode === "none" || state.mode === "standby" || state.mode === "inspecting");
    this._assertTextToggle.classList.toggle("toggled", state.mode === "assertingText");
    this._assertTextToggle.classList.toggle("disabled", state.mode === "none" || state.mode === "standby" || state.mode === "inspecting");
    this._assertValuesToggle.classList.toggle("toggled", state.mode === "assertingValue");
    this._assertValuesToggle.classList.toggle("disabled", state.mode === "none" || state.mode === "standby" || state.mode === "inspecting");
    this._assertSnapshotToggle.classList.toggle("toggled", state.mode === "assertingSnapshot");
    this._assertSnapshotToggle.classList.toggle("disabled", state.mode === "none" || state.mode === "standby" || state.mode === "inspecting");
    if (this._offsetX !== state.overlay.offsetX) {
      this._offsetX = state.overlay.offsetX;
      this._updateVisualPosition();
    }
    if (state.mode === "none")
      this._hideOverlay();
    else
      this._showOverlay();
  }
  flashToolSucceeded(tool) {
    let element;
    if (tool === "assertingVisibility")
      element = this._assertVisibilityToggle;
    else if (tool === "assertingSnapshot")
      element = this._assertSnapshotToggle;
    else
      element = this._assertValuesToggle;
    element.classList.add("succeeded");
    this._recorder.injectedScript.utils.builtins.setTimeout(() => element.classList.remove("succeeded"), 2e3);
  }
  _hideOverlay() {
    this._overlayElement.setAttribute("hidden", "true");
  }
  _showOverlay() {
    if (!this._overlayElement.hasAttribute("hidden"))
      return;
    this._overlayElement.removeAttribute("hidden");
    this._updateVisualPosition();
  }
  _updateVisualPosition() {
    this._measure = this._overlayElement.getBoundingClientRect();
    this._overlayElement.style.left = (this._recorder.injectedScript.window.innerWidth - this._measure.width) / 2 + this._offsetX + "px";
  }
  onMouseMove(event) {
    if (!event.buttons) {
      this._dragState = void 0;
      return false;
    }
    if (this._dragState) {
      this._offsetX = this._dragState.offsetX + event.clientX - this._dragState.dragStart.x;
      const halfGapSize = (this._recorder.injectedScript.window.innerWidth - this._measure.width) / 2 - 10;
      this._offsetX = Math.max(-halfGapSize, Math.min(halfGapSize, this._offsetX));
      this._updateVisualPosition();
      this._recorder.setOverlayState({ offsetX: this._offsetX });
      consumeEvent(event);
      return true;
    }
    return false;
  }
  onMouseUp(event) {
    if (this._dragState) {
      consumeEvent(event);
      return true;
    }
    return false;
  }
  onClick(event) {
    if (this._dragState) {
      this._dragState = void 0;
      consumeEvent(event);
      return true;
    }
    return false;
  }
  onDblClick(event) {
    return false;
  }
};
var Recorder = class {
  constructor(injectedScript, options) {
    this._listeners = [];
    this._lastHighlightedSelector = void 0;
    this._lastHighlightedAriaTemplateJSON = "undefined";
    this.state = {
      mode: "none",
      testIdAttributeName: "data-testid",
      language: "javascript",
      overlay: { offsetX: 0 }
    };
    this._delegate = {};
    var _a, _b;
    this.document = injectedScript.document;
    this.injectedScript = injectedScript;
    this.highlight = injectedScript.createHighlight();
    this._tools = {
      "none": new NoneTool(),
      "standby": new NoneTool(),
      "inspecting": new InspectTool(this, false),
      "recording": (options == null ? void 0 : options.recorderMode) === "api" ? new JsonRecordActionTool(this) : new RecordActionTool(this),
      "recording-inspecting": new InspectTool(this, false),
      "assertingText": new TextAssertionTool(this, "text"),
      "assertingVisibility": new InspectTool(this, true),
      "assertingValue": new TextAssertionTool(this, "value"),
      "assertingSnapshot": new TextAssertionTool(this, "snapshot")
    };
    this._currentTool = this._tools.none;
    (_b = (_a = this._currentTool).install) == null ? void 0 : _b.call(_a);
    if (injectedScript.window.top === injectedScript.window) {
      this.overlay = new Overlay(this);
      this.overlay.setUIState(this.state);
    }
    this._stylesheet = new injectedScript.window.CSSStyleSheet();
    this._stylesheet.replaceSync(\`
      body[data-pw-cursor=pointer] *, body[data-pw-cursor=pointer] *::after { cursor: pointer !important; }
      body[data-pw-cursor=text] *, body[data-pw-cursor=text] *::after { cursor: text !important; }
    \`);
    this.installListeners();
    injectedScript.utils.cacheNormalizedWhitespaces();
    if (injectedScript.isUnderTest)
      console.error("Recorder script ready for test");
    injectedScript.consoleApi.install();
  }
  installListeners() {
    var _a, _b, _c;
    removeEventListeners(this._listeners);
    this._listeners = [
      addEventListener(this.document, "click", (event) => this._onClick(event), true),
      addEventListener(this.document, "auxclick", (event) => this._onClick(event), true),
      addEventListener(this.document, "dblclick", (event) => this._onDblClick(event), true),
      addEventListener(this.document, "contextmenu", (event) => this._onContextMenu(event), true),
      addEventListener(this.document, "dragstart", (event) => this._onDragStart(event), true),
      addEventListener(this.document, "input", (event) => this._onInput(event), true),
      addEventListener(this.document, "keydown", (event) => this._onKeyDown(event), true),
      addEventListener(this.document, "keyup", (event) => this._onKeyUp(event), true),
      addEventListener(this.document, "pointerdown", (event) => this._onPointerDown(event), true),
      addEventListener(this.document, "pointerup", (event) => this._onPointerUp(event), true),
      addEventListener(this.document, "mousedown", (event) => this._onMouseDown(event), true),
      addEventListener(this.document, "mouseup", (event) => this._onMouseUp(event), true),
      addEventListener(this.document, "mousemove", (event) => this._onMouseMove(event), true),
      addEventListener(this.document, "mouseleave", (event) => this._onMouseLeave(event), true),
      addEventListener(this.document, "mouseenter", (event) => this._onMouseEnter(event), true),
      addEventListener(this.document, "focus", (event) => this._onFocus(event), true),
      addEventListener(this.document, "scroll", (event) => this._onScroll(event), true)
    ];
    this.highlight.install();
    let recreationInterval;
    const recreate = () => {
      this.highlight.install();
      recreationInterval = this.injectedScript.utils.builtins.setTimeout(recreate, 500);
    };
    recreationInterval = this.injectedScript.utils.builtins.setTimeout(recreate, 500);
    this._listeners.push(() => this.injectedScript.utils.builtins.clearTimeout(recreationInterval));
    this.highlight.appendChild(createSvgElement(this.document, clipPaths_default));
    (_a = this.overlay) == null ? void 0 : _a.install();
    (_c = (_b = this._currentTool) == null ? void 0 : _b.install) == null ? void 0 : _c.call(_b);
    this.document.adoptedStyleSheets.push(this._stylesheet);
  }
  _switchCurrentTool() {
    var _a, _b, _c, _d, _e;
    const newTool = this._tools[this.state.mode];
    if (newTool === this._currentTool)
      return;
    (_b = (_a = this._currentTool).uninstall) == null ? void 0 : _b.call(_a);
    this.clearHighlight();
    this._currentTool = newTool;
    (_d = (_c = this._currentTool).install) == null ? void 0 : _d.call(_c);
    (_e = this.injectedScript.document.body) == null ? void 0 : _e.setAttribute("data-pw-cursor", newTool.cursor());
  }
  setUIState(state, delegate) {
    var _a;
    this._delegate = delegate;
    if (state.actionPoint && this.state.actionPoint && state.actionPoint.x === this.state.actionPoint.x && state.actionPoint.y === this.state.actionPoint.y) {
    } else if (!state.actionPoint && !this.state.actionPoint) {
    } else {
      if (state.actionPoint)
        this.highlight.showActionPoint(state.actionPoint.x, state.actionPoint.y);
      else
        this.highlight.hideActionPoint();
    }
    this.state = state;
    this.highlight.setLanguage(state.language);
    this._switchCurrentTool();
    (_a = this.overlay) == null ? void 0 : _a.setUIState(state);
    let highlight = "noop";
    if (state.actionSelector !== this._lastHighlightedSelector) {
      const entries = state.actionSelector ? entriesForSelectorHighlight(this.injectedScript, state.language, state.actionSelector, this.document) : null;
      highlight = (entries == null ? void 0 : entries.length) ? entries : "clear";
      this._lastHighlightedSelector = (entries == null ? void 0 : entries.length) ? state.actionSelector : void 0;
    }
    const ariaTemplateJSON = JSON.stringify(state.ariaTemplate);
    if (this._lastHighlightedAriaTemplateJSON !== ariaTemplateJSON) {
      const elements = state.ariaTemplate ? this.injectedScript.getAllByAria(this.document, state.ariaTemplate) : [];
      if (elements.length) {
        const color = elements.length > 1 ? HighlightColors.multiple : HighlightColors.single;
        highlight = elements.map((element) => ({ element, color }));
        this._lastHighlightedAriaTemplateJSON = ariaTemplateJSON;
      } else {
        if (!this._lastHighlightedSelector)
          highlight = "clear";
        this._lastHighlightedAriaTemplateJSON = "undefined";
      }
    }
    if (highlight === "clear")
      this.highlight.clearHighlight();
    else if (highlight !== "noop")
      this.highlight.updateHighlight(highlight);
  }
  clearHighlight() {
    this.updateHighlight(null, false);
  }
  _onClick(event) {
    var _a, _b, _c;
    if (!event.isTrusted)
      return;
    if ((_a = this.overlay) == null ? void 0 : _a.onClick(event))
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_c = (_b = this._currentTool).onClick) == null ? void 0 : _c.call(_b, event);
  }
  _onDblClick(event) {
    var _a, _b, _c;
    if (!event.isTrusted)
      return;
    if ((_a = this.overlay) == null ? void 0 : _a.onDblClick(event))
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_c = (_b = this._currentTool).onDblClick) == null ? void 0 : _c.call(_b, event);
  }
  _onContextMenu(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onContextMenu) == null ? void 0 : _b.call(_a, event);
  }
  _onDragStart(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onDragStart) == null ? void 0 : _b.call(_a, event);
  }
  _onPointerDown(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onPointerDown) == null ? void 0 : _b.call(_a, event);
  }
  _onPointerUp(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onPointerUp) == null ? void 0 : _b.call(_a, event);
  }
  _onMouseDown(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onMouseDown) == null ? void 0 : _b.call(_a, event);
  }
  _onMouseUp(event) {
    var _a, _b, _c;
    if (!event.isTrusted)
      return;
    if ((_a = this.overlay) == null ? void 0 : _a.onMouseUp(event))
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_c = (_b = this._currentTool).onMouseUp) == null ? void 0 : _c.call(_b, event);
  }
  _onMouseMove(event) {
    var _a, _b, _c;
    if (!event.isTrusted)
      return;
    if ((_a = this.overlay) == null ? void 0 : _a.onMouseMove(event))
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_c = (_b = this._currentTool).onMouseMove) == null ? void 0 : _c.call(_b, event);
  }
  _onMouseEnter(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onMouseEnter) == null ? void 0 : _b.call(_a, event);
  }
  _onMouseLeave(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onMouseLeave) == null ? void 0 : _b.call(_a, event);
  }
  _onFocus(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onFocus) == null ? void 0 : _b.call(_a, event);
  }
  _onScroll(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    this._lastHighlightedSelector = void 0;
    this._lastHighlightedAriaTemplateJSON = "undefined";
    this.highlight.hideActionPoint();
    (_b = (_a = this._currentTool).onScroll) == null ? void 0 : _b.call(_a, event);
  }
  _onInput(event) {
    var _a, _b;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onInput) == null ? void 0 : _b.call(_a, event);
  }
  _onKeyDown(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onKeyDown) == null ? void 0 : _b.call(_a, event);
  }
  _onKeyUp(event) {
    var _a, _b;
    if (!event.isTrusted)
      return;
    if (this._ignoreOverlayEvent(event))
      return;
    (_b = (_a = this._currentTool).onKeyUp) == null ? void 0 : _b.call(_a, event);
  }
  updateHighlight(model, userGesture) {
    this._lastHighlightedSelector = void 0;
    this._lastHighlightedAriaTemplateJSON = "undefined";
    this._updateHighlight(model, userGesture);
  }
  _updateHighlight(model, userGesture) {
    var _a, _b;
    let tooltipText = model == null ? void 0 : model.tooltipText;
    if (tooltipText === void 0 && (model == null ? void 0 : model.selector))
      tooltipText = this.injectedScript.utils.asLocator(this.state.language, model.selector);
    if (model)
      this.highlight.updateHighlight(model.elements.map((element) => ({ element, color: model.color, tooltipText })));
    else
      this.highlight.clearHighlight();
    if (userGesture)
      (_b = (_a = this._delegate).highlightUpdated) == null ? void 0 : _b.call(_a);
  }
  _ignoreOverlayEvent(event) {
    return event.composedPath().some((e) => {
      const nodeName = e.nodeName || "";
      return nodeName.toLowerCase() === "x-pw-glass";
    });
  }
  deepEventTarget(event) {
    var _a;
    for (const element of event.composedPath()) {
      if (!((_a = this.overlay) == null ? void 0 : _a.contains(element)))
        return element;
    }
    return event.composedPath()[0];
  }
  setMode(mode) {
    var _a, _b;
    void ((_b = (_a = this._delegate).setMode) == null ? void 0 : _b.call(_a, mode));
  }
  async performAction(action) {
    var _a, _b;
    await ((_b = (_a = this._delegate).performAction) == null ? void 0 : _b.call(_a, action).catch(() => {
    }));
  }
  recordAction(action) {
    var _a, _b;
    void ((_b = (_a = this._delegate).recordAction) == null ? void 0 : _b.call(_a, action));
  }
  setOverlayState(state) {
    var _a, _b;
    void ((_b = (_a = this._delegate).setOverlayState) == null ? void 0 : _b.call(_a, state));
  }
  elementPicked(selector, model) {
    var _a, _b;
    const ariaSnapshot = this.injectedScript.ariaSnapshot(model.elements[0]);
    void ((_b = (_a = this._delegate).elementPicked) == null ? void 0 : _b.call(_a, { selector, ariaSnapshot }));
  }
};
var Dialog = class {
  constructor(recorder) {
    this._dialogElement = null;
    this._recorder = recorder;
  }
  isShowing() {
    return !!this._dialogElement;
  }
  show(options) {
    const acceptButton = this._recorder.document.createElement("x-pw-tool-item");
    acceptButton.title = "Accept";
    acceptButton.classList.add("accept");
    acceptButton.appendChild(this._recorder.document.createElement("x-div"));
    acceptButton.addEventListener("click", () => options.onCommit());
    const cancelButton = this._recorder.document.createElement("x-pw-tool-item");
    cancelButton.title = "Close";
    cancelButton.classList.add("cancel");
    cancelButton.appendChild(this._recorder.document.createElement("x-div"));
    cancelButton.addEventListener("click", () => {
      var _a;
      this.close();
      (_a = options.onCancel) == null ? void 0 : _a.call(options);
    });
    this._dialogElement = this._recorder.document.createElement("x-pw-dialog");
    this._keyboardListener = (event) => {
      var _a;
      if (event.key === "Escape") {
        this.close();
        (_a = options.onCancel) == null ? void 0 : _a.call(options);
        return;
      }
      if (event.key === "Enter" && (event.ctrlKey || event.metaKey)) {
        if (this._dialogElement)
          options.onCommit();
        return;
      }
    };
    this._recorder.document.addEventListener("keydown", this._keyboardListener, true);
    const toolbarElement = this._recorder.document.createElement("x-pw-tools-list");
    const labelElement = this._recorder.document.createElement("label");
    labelElement.textContent = options.label;
    toolbarElement.appendChild(labelElement);
    toolbarElement.appendChild(this._recorder.document.createElement("x-spacer"));
    toolbarElement.appendChild(acceptButton);
    toolbarElement.appendChild(cancelButton);
    this._dialogElement.appendChild(toolbarElement);
    const bodyElement = this._recorder.document.createElement("x-pw-dialog-body");
    bodyElement.appendChild(options.body);
    this._dialogElement.appendChild(bodyElement);
    this._recorder.highlight.appendChild(this._dialogElement);
    return this._dialogElement;
  }
  moveTo(top, left) {
    if (!this._dialogElement)
      return;
    this._dialogElement.style.top = top + "px";
    this._dialogElement.style.left = left + "px";
  }
  close() {
    if (!this._dialogElement)
      return;
    this._dialogElement.remove();
    this._recorder.document.removeEventListener("keydown", this._keyboardListener);
    this._dialogElement = null;
  }
};
function deepActiveElement(document) {
  let activeElement = document.activeElement;
  while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)
    activeElement = activeElement.shadowRoot.activeElement;
  return activeElement;
}
function modifiersForEvent(event) {
  return (event.altKey ? 1 : 0) | (event.ctrlKey ? 2 : 0) | (event.metaKey ? 4 : 0) | (event.shiftKey ? 8 : 0);
}
function buttonForEvent(event) {
  switch (event.which) {
    case 1:
      return "left";
    case 2:
      return "middle";
    case 3:
      return "right";
  }
  return "left";
}
function positionForEvent(event) {
  const targetElement = event.target;
  if (targetElement.nodeName !== "CANVAS")
    return;
  return {
    x: event.offsetX,
    y: event.offsetY
  };
}
function consumeEvent(e) {
  e.preventDefault();
  e.stopPropagation();
  e.stopImmediatePropagation();
}
function asCheckbox(node) {
  if (!node || node.nodeName !== "INPUT")
    return null;
  const inputElement = node;
  return ["checkbox", "radio"].includes(inputElement.type) ? inputElement : null;
}
function isRangeInput(node) {
  if (!node || node.nodeName !== "INPUT")
    return false;
  const inputElement = node;
  return inputElement.type.toLowerCase() === "range";
}
function addEventListener(target, eventName, listener, useCapture) {
  target.addEventListener(eventName, listener, useCapture);
  const remove = () => {
    target.removeEventListener(eventName, listener, useCapture);
  };
  return remove;
}
function removeEventListeners(listeners) {
  for (const listener of listeners)
    listener();
  listeners.splice(0, listeners.length);
}
function entriesForSelectorHighlight(injectedScript, language, selector, ownerDocument) {
  try {
    const parsedSelector = injectedScript.parseSelector(selector);
    const elements = injectedScript.querySelectorAll(parsedSelector, ownerDocument);
    const color = elements.length > 1 ? HighlightColors.multiple : HighlightColors.single;
    const locator = injectedScript.utils.asLocator(language, selector);
    return elements.map((element, index) => {
      const suffix = elements.length > 1 ? \` [\${index + 1} of \${elements.length}]\` : "";
      return { element, color, tooltipText: locator + suffix };
    });
  } catch (e) {
    return [];
  }
}
function createSvgElement(doc, { tagName, attrs, children }) {
  const elem = doc.createElementNS("http://www.w3.org/2000/svg", tagName);
  if (attrs) {
    for (const [k, v] of Object.entries(attrs))
      elem.setAttribute(k, v);
  }
  if (children) {
    for (const c of children)
      elem.appendChild(createSvgElement(doc, c));
  }
  return elem;
}

// packages/injected/src/recorder/pollingRecorder.ts
var PollingRecorder = class {
  constructor(injectedScript, options) {
    this._recorder = new Recorder(injectedScript, options);
    this._embedder = injectedScript.window;
    injectedScript.onGlobalListenersRemoved.add(() => this._recorder.installListeners());
    const refreshOverlay = () => {
      this._lastStateJSON = void 0;
      this._pollRecorderMode().catch((e) => console.log(e));
    };
    this._embedder.__pw_refreshOverlay = refreshOverlay;
    refreshOverlay();
  }
  async _pollRecorderMode() {
    const pollPeriod = 1e3;
    if (this._pollRecorderModeTimer)
      this._recorder.injectedScript.utils.builtins.clearTimeout(this._pollRecorderModeTimer);
    const state = await this._embedder.__pw_recorderState().catch(() => null);
    if (!state) {
      this._pollRecorderModeTimer = this._recorder.injectedScript.utils.builtins.setTimeout(() => this._pollRecorderMode(), pollPeriod);
      return;
    }
    const stringifiedState = JSON.stringify(state);
    if (this._lastStateJSON !== stringifiedState) {
      this._lastStateJSON = stringifiedState;
      const win = this._recorder.document.defaultView;
      if (win.top !== win) {
        state.actionPoint = void 0;
      }
      this._recorder.setUIState(state, this);
    }
    this._pollRecorderModeTimer = this._recorder.injectedScript.utils.builtins.setTimeout(() => this._pollRecorderMode(), pollPeriod);
  }
  async performAction(action) {
    await this._embedder.__pw_recorderPerformAction(action);
  }
  async recordAction(action) {
    await this._embedder.__pw_recorderRecordAction(action);
  }
  async elementPicked(elementInfo) {
    await this._embedder.__pw_recorderElementPicked(elementInfo);
  }
  async setMode(mode) {
    await this._embedder.__pw_recorderSetMode(mode);
  }
  async setOverlayState(state) {
    await this._embedder.__pw_recorderSetOverlayState(state);
  }
};
var pollingRecorder_default = PollingRecorder;
`;return Eu}var Ou,X_;function DO(){if(X_)return Ou;X_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(d,v)=>{for(var a in v)t(d,a,{get:v[a],enumerable:!0})},V=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of i(v))!E.call(d,n)&&n!==a&&t(d,n,{get:()=>v[n],enumerable:!(s=r(v,n))||s.enumerable});return d},te=d=>V(t({},"__esModule",{value:!0}),d),P={};R(P,{performAction:()=>u,toClickOptions:()=>f}),Ou=te(P);var e=nr(),U=Ji(),C=Tr(),w=Ys(),g=bn();async function u(d,v){const a=(0,C.serverSideCallMetadata)(),s=(0,w.mainFrameForAction)(d,v);return await new g.ProgressController(a,s).run(h=>_(h,s,v),5e3)}async function _(d,v,a){const{action:s}=a;if(s.name==="navigate"){await v.goto(d,s.url);return}if(s.name==="openPage")throw Error("Not reached");if(s.name==="closePage"){await v._page.close();return}const n=(0,w.buildFullSelector)(a.frame.framePath,s.selector);if(s.name==="click"){const o=f(s);await v.click(d,n,{...o,strict:!0});return}if(s.name==="press"){const h=[...(0,U.toKeyboardModifiers)(s.modifiers),s.key].join("+");await v.press(d,n,h,{strict:!0});return}if(s.name==="fill"){await v.fill(d,n,s.text,{strict:!0});return}if(s.name==="setInputFiles"){await v.setInputFiles(d,n,{selector:n,payloads:[],strict:!0});return}if(s.name==="check"){await v.check(d,n,{strict:!0});return}if(s.name==="uncheck"){await v.uncheck(d,n,{strict:!0});return}if(s.name==="select"){const o=s.options.map(h=>({value:h}));await v.selectOption(d,n,[],o,{strict:!0});return}if(s.name==="assertChecked"){await v.expect(d,n,{selector:n,expression:"to.be.checked",expectedValue:{checked:s.checked},isNot:!s.checked});return}if(s.name==="assertText"){await v.expect(d,n,{selector:n,expression:"to.have.text",expectedText:(0,e.serializeExpectedTextValues)([s.text],{matchSubstring:!0,normalizeWhiteSpace:!0}),isNot:!1});return}if(s.name==="assertValue"){await v.expect(d,n,{selector:n,expression:"to.have.value",expectedValue:s.value,isNot:!1});return}if(s.name==="assertVisible"){await v.expect(d,n,{selector:n,expression:"to.be.visible",isNot:!1});return}throw new Error("Internal error: unexpected action "+s.name)}function f(d){const v=(0,U.toKeyboardModifiers)(d.modifiers),a={};return d.button!=="left"&&(a.button=d.button),v.length&&(a.modifiers=v),d.clickCount>1&&(a.clickCount=d.clickCount),d.position&&(a.position=d.position),a}return Ou}var Tu,Q_;function df(){if(Q_)return Tu;Q_=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=($,q)=>{for(var J in q)r($,J,{get:q[J],enumerable:!0})},P=($,q,J,le)=>{if(q&&typeof q=="object"||typeof q=="function")for(let _e of E(q))!V.call($,_e)&&_e!==J&&r($,_e,{get:()=>q[_e],enumerable:!(le=i(q,_e))||le.enumerable});return $},e=($,q,J)=>(J=$!=null?t(R($)):{},P(!$||!$.__esModule?r(J,"default",{value:$,enumerable:!0}):J,$)),U=$=>P(r({},"__esModule",{value:!0}),$),C={};te(C,{Recorder:()=>p,RecorderEvent:()=>b}),Tu=U(C);var w=e(Vr()),g=e(Je),u=nr(),_=Ir(),f=ry(),d=Ys(),v=ay(),a=Vi(),s=bn(),n=Tr(),o=RO(),h=e(LO()),m=nr(),c=hs(),l=Kr(),x=DO();const T=Symbol("recorderSymbol"),b={PausedStateChanged:"pausedStateChanged",ModeChanged:"modeChanged",ElementPicked:"elementPicked",CallLogsUpdated:"callLogsUpdated",UserSourcesChanged:"userSourcesChanged",ActionAdded:"actionAdded",SignalAdded:"signalAdded",PageNavigated:"pageNavigated",ContextClosed:"contextClosed"};class p extends w.default{constructor(q,J){super(),this._highlightedElement={},this._overlayState={offsetX:0},this._currentCallsMetadata=new Map,this._userSources=new Map,this._omitCallTracking=!1,this._currentLanguage="javascript",this._pageAliases=new Map,this._lastPopupOrdinal=0,this._lastDialogOrdinal=-1,this._lastDownloadOrdinal=-1,this._listeners=[],this._enabled=!1,this._callLogs=[],this._context=q,this._params=J,this._mode=J.mode||"none",this._recorderMode=J.recorderMode??"default",this.handleSIGINT=J.handleSIGINT,this._signalProcessor=new o.RecorderSignalProcessor({addAction:le=>{this._enabled&&this.emit(b.ActionAdded,le)},addSignal:le=>{this._enabled&&this.emit(b.SignalAdded,le)}}),q.on(_.BrowserContext.Events.BeforeClose,()=>{this.emit(b.ContextClosed)}),this._listeners.push(m.eventsHelper.addEventListener(process,"exit",()=>{this.emit(b.ContextClosed)})),this._setEnabled(J.mode==="recording"),this._omitCallTracking=!!J.omitCallTracking,this._debugger=q.debugger(),q.instrumentation.addListener(this,q),(0,u.isUnderTest)()&&(this._overlayState.offsetX=200)}static forContext(q,J){let le=q[T];return le||(le=p._create(q,J),q[T]=le),le}static existingForContext(q){return q[T]}static async _create(q,J={}){const le=new p(q,J);return await le._install(),le}async _install(){this.emit(b.ModeChanged,this._mode),this.emit(b.PausedStateChanged,this._debugger.isPaused()),this._context.once(_.BrowserContext.Events.Close,()=>{m.eventsHelper.removeEventListeners(this._listeners),this._context.instrumentation.removeListener(this),this.emit(b.ContextClosed)}),await new s.ProgressController((0,n.serverSideCallMetadata)(),this._context).run(async J=>{await this._context.exposeBinding(J,"__pw_recorderState",!1,async le=>{let _e,ge;if(![...this._currentCallsMetadata.keys()].some(O)){_e=await this._scopeHighlightedSelectorToFrame(le.frame);for(const[j,y]of this._currentCallsMetadata)le.page===y.attribution.page&&(ge=j.point||ge,_e=_e||j.params.selector)}return{mode:this._mode,actionPoint:ge,actionSelector:_e,ariaTemplate:this._highlightedElement.ariaTemplate,language:this._currentLanguage,testIdAttributeName:this._testIdAttributeName(),overlay:this._overlayState}}),await this._context.exposeBinding(J,"__pw_recorderElementPicked",!1,async({frame:le},_e)=>{const ge=await(0,d.generateFrameSelector)(le);this.emit(b.ElementPicked,{selector:(0,d.buildFullSelector)(ge,_e.selector),ariaSnapshot:_e.ariaSnapshot},!0)}),await this._context.exposeBinding(J,"__pw_recorderSetMode",!1,async({frame:le},_e)=>{le.parentFrame()||this.setMode(_e)}),await this._context.exposeBinding(J,"__pw_recorderSetOverlayState",!1,async({frame:le},_e)=>{le.parentFrame()||(this._overlayState=_e)}),await this._context.exposeBinding(J,"__pw_resume",!1,()=>{this._debugger.resume(!1)}),this._context.on(_.BrowserContext.Events.Page,le=>this._onPage(le));for(const le of this._context.pages())this._onPage(le);this._context.dialogManager.addDialogHandler(le=>(this._onDialog(le.page()),!1)),await this._context.exposeBinding(J,"__pw_recorderPerformAction",!1,(le,_e)=>this._performAction(le.frame,_e)),await this._context.exposeBinding(J,"__pw_recorderRecordAction",!1,(le,_e)=>this._recordAction(le.frame,_e)),await this._context.extendInjectedScript(h.source,{recorderMode:this._recorderMode})}),this._debugger.isPaused()&&this._pausedStateChanged(),this._debugger.on(f.Debugger.Events.PausedStateChanged,()=>this._pausedStateChanged())}_pausedStateChanged(){for(const{metadata:q,sdkObject:J}of this._debugger.pausedDetails())this._currentCallsMetadata.has(q)||this.onBeforeCall(J,q);this.emit(b.PausedStateChanged,this._debugger.isPaused()),this._updateUserSources(),this.updateCallLog([...this._currentCallsMetadata.keys()])}mode(){return this._mode}setMode(q){this._mode!==q&&(this._highlightedElement={},this._mode=q,this.emit(b.ModeChanged,this._mode),this._setEnabled(this._isRecording()),this._debugger.setMuted(this._isRecording()),this._mode!=="none"&&this._mode!=="standby"&&this._context.pages().length===1&&this._context.pages()[0].bringToFront().catch(()=>{}),this._refreshOverlay())}url(){const q=this._context.pages()[0];return q==null?void 0:q.mainFrame().url()}setHighlightedSelector(q){this._highlightedElement={selector:(0,v.locatorOrSelectorAsSelector)(this._currentLanguage,q,this._context.selectors().testIdAttributeName())},this._refreshOverlay()}setHighlightedAriaTemplate(q){this._highlightedElement={ariaTemplate:q},this._refreshOverlay()}step(){this._debugger.resume(!0)}setLanguage(q){this._currentLanguage=q,this._refreshOverlay()}resume(){this._debugger.resume(!1)}pause(){this._debugger.pauseOnNextStatement()}paused(){return this._debugger.isPaused()}close(){this._debugger.resume(!1)}hideHighlightedSelector(){this._highlightedElement={},this._refreshOverlay()}userSources(){return[...this._userSources.values()]}callLog(){return this._callLogs}async _scopeHighlightedSelectorToFrame(q){if(this._highlightedElement.selector)try{const J=q._page.mainFrame(),le=await J.selectors.resolveFrameForSelector(this._highlightedElement.selector);return le&&((le==null?void 0:le.frame)===J||(le==null?void 0:le.frame)===q)?(0,a.stringifySelector)(le.info.parsed):""}catch{return""}}_refreshOverlay(){for(const q of this._context.pages())for(const J of q.frames())J.evaluateExpression("window.__pw_refreshOverlay()").catch(()=>{})}async onBeforeCall(q,J){this._omitCallTracking||this._isRecording()||(this._currentCallsMetadata.set(J,q),this._updateUserSources(),this.updateCallLog([J]),O(J)?this.hideHighlightedSelector():J.params&&J.params.selector&&(this._highlightedElement={selector:J.params.selector}))}async onAfterCall(q,J){this._omitCallTracking||this._isRecording()||(J.error||this._currentCallsMetadata.delete(J),this._updateUserSources(),this.updateCallLog([J]))}_updateUserSources(){const q=(0,m.monotonicTime)();for(const J of this._userSources.values())J.highlight=[],J.revealLine=void 0;for(const J of this._currentCallsMetadata.keys()){if(!J.location)continue;const{file:le,line:_e}=J.location;let ge=this._userSources.get(le);if(ge||(ge={isPrimary:!1,isRecorded:!1,label:le,id:le,text:this._readSource(le),highlight:[],language:z(le),timestamp:q},this._userSources.set(le,ge)),_e){const ne=this._debugger.isPaused(J);ge.highlight.push({line:_e,type:J.error?"error":ne?"paused":"running"}),ge.revealLine=_e}}this.emit(b.UserSourcesChanged,this.userSources())}async onBeforeInputAction(q,J){}async onCallLog(q,J,le,_e){this.updateCallLog([J])}updateCallLog(q){if(this._isRecording())return;const J=[];for(const le of q){if(!le.method||le.internal)continue;let _e="done";this._currentCallsMetadata.has(le)&&(_e="in-progress"),this._debugger.isPaused(le)&&(_e="paused"),J.push((0,d.metadataToCallLog)(le,_e))}this._callLogs=J,this.emit(b.CallLogsUpdated,J)}_isRecording(){return["recording","assertingText","assertingVisibility","assertingValue","assertingSnapshot"].includes(this._mode)}_readSource(q){try{return g.default.readFileSync(q,"utf-8")}catch{return"// No source available"}}_setEnabled(q){this._enabled=q}async _onPage(q){const J=q.mainFrame();q.on(l.Page.Events.Close,()=>{this._signalProcessor.addAction({frame:this._describeMainFrame(q),action:{name:"closePage",signals:[]},startTime:(0,m.monotonicTime)()}),this._pageAliases.delete(q),this._filePrimaryURLChanged()}),J.on(c.Frame.Events.InternalNavigation,ge=>{ge.isPublic&&(this._onFrameNavigated(J,q),this._filePrimaryURLChanged())}),q.on(l.Page.Events.Download,()=>this._onDownload(q));const _e="page"+(this._pageAliases.size?String(++this._lastPopupOrdinal):"");this._pageAliases.set(q,_e),q.opener()?this._onPopup(q.opener(),q):this._signalProcessor.addAction({frame:this._describeMainFrame(q),action:{name:"openPage",url:q.mainFrame().url(),signals:[]},startTime:(0,m.monotonicTime)()}),this._filePrimaryURLChanged()}_filePrimaryURLChanged(){const q=this._context.pages()[0];this.emit(b.PageNavigated,q==null?void 0:q.mainFrame().url())}clear(){if(this._params.mode==="recording")for(const q of this._context.pages())this._onFrameNavigated(q.mainFrame(),q)}_describeMainFrame(q){return{pageGuid:q.guid,pageAlias:this._pageAliases.get(q),framePath:[]}}async _describeFrame(q){return{pageGuid:q._page.guid,pageAlias:this._pageAliases.get(q._page),framePath:await(0,d.generateFrameSelector)(q)}}_testIdAttributeName(){return this._params.testIdAttributeName||this._context.selectors().testIdAttributeName()||"data-testid"}async _createActionInContext(q,J){return{frame:await this._describeFrame(q),action:J,description:void 0,startTime:(0,m.monotonicTime)()}}async _performAction(q,J){const le=await this._createActionInContext(q,J);this._signalProcessor.addAction(le),le.action.name!=="openPage"&&le.action.name!=="closePage"&&await(0,x.performAction)(this._pageAliases,le),le.endTime=(0,m.monotonicTime)()}async _recordAction(q,J){this._signalProcessor.addAction(await this._createActionInContext(q,J))}_onFrameNavigated(q,J){const le=this._pageAliases.get(J);this._signalProcessor.signal(le,q,{name:"navigation",url:q.url()})}_onPopup(q,J){const le=this._pageAliases.get(q),_e=this._pageAliases.get(J);this._signalProcessor.signal(le,q.mainFrame(),{name:"popup",popupAlias:_e})}_onDownload(q){const J=this._pageAliases.get(q);++this._lastDownloadOrdinal,this._signalProcessor.signal(J,q.mainFrame(),{name:"download",downloadAlias:this._lastDownloadOrdinal?String(this._lastDownloadOrdinal):""})}_onDialog(q){const J=this._pageAliases.get(q);++this._lastDialogOrdinal,this._signalProcessor.signal(J,q.mainFrame(),{name:"dialog",dialogAlias:this._lastDialogOrdinal?String(this._lastDialogOrdinal):""})}}function O($){return $.method.toLowerCase().includes("screenshot")}function z($){return $.endsWith(".py")?"python":$.endsWith(".java")?"java":$.endsWith(".cs")?"csharp":"javascript"}return Tu}var Cu,Z_;function MO(){if(Z_)return Cu;Z_=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{PipeTransport:()=>U}),Cu=te(P);var e=cf();class U{constructor(w,g,u,_="le"){this._data=Buffer.from([]),this._waitForNextTask=(0,e.makeWaitForNextTask)(),this._closed=!1,this._bytesLeft=0,this._pipeWrite=w,this._endian=_,this._closeableStream=u,g.on("data",f=>this._dispatch(f)),g.on("close",()=>{this._closed=!0,this.onclose&&this.onclose()}),this.onmessage=void 0,this.onclose=void 0}send(w){if(this._closed)throw new Error("Pipe has been closed");const g=Buffer.from(w,"utf-8"),u=Buffer.alloc(4);this._endian==="be"?u.writeUInt32BE(g.length,0):u.writeUInt32LE(g.length,0),this._pipeWrite.write(u),this._pipeWrite.write(g)}close(){this._closeableStream.close()}_dispatch(w){for(this._data=Buffer.concat([this._data,w]);!(!this._bytesLeft&&this._data.length<4||(this._bytesLeft||(this._bytesLeft=this._endian==="be"?this._data.readUInt32BE(0):this._data.readUInt32LE(0),this._data=this._data.slice(4)),!this._bytesLeft||this._data.length<this._bytesLeft));){const g=this._data.slice(0,this._bytesLeft);this._data=this._data.slice(this._bytesLeft),this._bytesLeft=0,this._waitForNextTask(()=>{this.onmessage&&this.onmessage(g.toString("utf-8"))})}}}return Cu}var Pu,e0;function hf(){if(e0)return Pu;e0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{chromiumSwitches:()=>U}),Pu=te(P);const e=C=>["AcceptCHFrame","AutoExpandDetailsElement","AvoidUnnecessaryBeforeUnloadCheckSync","CertificateTransparencyComponentUpdater","DestroyProfileOnBrowserClose","DialMediaRouteProvider","ExtensionManifestV2Disabled","GlobalMediaControls","HttpsUpgrades","ImprovedCookieControls","LazyFrameLoading","LensOverlay","MediaRouter","PaintHolding","ThirdPartyStoragePartitioning","Translate",C?"AutomationControlled":""].filter(Boolean),U=(C,w)=>["--disable-field-trial-config","--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-back-forward-cache","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-component-update","--no-default-browser-check","--disable-default-apps","--disable-dev-shm-usage","--disable-extensions","--disable-features="+e(C).join(","),w==="chromium-tip-of-tree"?"--enable-features=CDPScreenshotNewSurface":"","--allow-pre-commit-input","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--force-color-profile=srgb","--metrics-recording-only","--no-first-run","--password-store=basic","--use-mock-keychain","--no-service-autorun","--export-tagged-pdf","--disable-search-engine-choice-screen","--unsafely-disable-devtools-self-xss-warnings","--edge-skip-compat-layer-relaunch",C?"":"--enable-automation"].filter(Boolean);return Pu}var ku,t0;function FO(){if(t0)return ku;t0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},P=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!V.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},e=(d,v,a)=>(a=d!=null?t(R(d)):{},P(!d||!d.__esModule?r(a,"default",{value:d,enumerable:!0}):a,d)),U=d=>P(r({},"__esModule",{value:!0}),d),C={};te(C,{Download:()=>f}),ku=U(C);var w=e(Je),g=Kr(),u=nr(),_=Gs();class f{constructor(v,a,s,n,o){const h=v.browserContext._options.acceptDownloads==="deny"?"Pass { acceptDownloads: true } when you are creating your browser context.":void 0;this.artifact=new _.Artifact(v,w.default.join(a,s),h,()=>this._page.browserContext.cancelDownload(s)),this._page=v,this.url=n,this._suggestedFilename=o,v.browserContext._downloads.add(this),o!==void 0&&this._fireDownloadEvent()}page(){return this._page}_filenameSuggested(v){(0,u.assert)(this._suggestedFilename===void 0),this._suggestedFilename=v,this._fireDownloadEvent()}suggestedFilename(){return this._suggestedFilename}_fireDownloadEvent(){this._page.instrumentation.onDownload(this._page,this),this._page.emit(g.Page.Events.Download,this)}}return ku}var Au,r0;function pf(){if(r0)return Au;r0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=($,q)=>{for(var J in q)r($,J,{get:q[J],enumerable:!0})},P=($,q,J,le)=>{if(q&&typeof q=="object"||typeof q=="function")for(let _e of E(q))!V.call($,_e)&&_e!==J&&r($,_e,{get:()=>q[_e],enumerable:!(le=i(q,_e))||le.enumerable});return $},e=($,q,J)=>(J=$!=null?t(R($)):{},P(!$||!$.__esModule?r(J,"default",{value:$,enumerable:!0}):J,$)),U=$=>P(r({},"__esModule",{value:!0}),$),C={};te(C,{ClientCertificatesProxy:()=>x,getMatchingTLSOptionsForOrigin:()=>p,rewriteOpenSSLErrorIfNeeded:()=>z}),Au=U(C);var w=Vr(),g=e(Je),u=e(Je),_=e(Je),f=e(Je),d=Vs(),v=nr(),a=Ir(),s=Ki(),n=Mr(),o=zs();let h;function m(){if(h)return;const{cert:$,key:q}=(0,v.generateSelfSignedCertificate)();h={key:q,cert:$}}class c{constructor(){this._cache=new Map}get(q,J,le){const _e=`${q}:${J}`;{const ne=this._cache.get(_e);if(ne){ne.then(le);return}}const ge=new v.ManualPromise;this._cache.set(_e,ge),ge.then(le),(0,o.createTLSSocket)({host:q,port:J,servername:u.default.isIP(q)?void 0:q,ALPNProtocols:["h2","http/1.1"],rejectUnauthorized:!1}).then(ne=>{ge.resolve(ne.alpnProtocol||"http/1.1"),ne.end()}).catch(ne=>{n.debugLogger.log("client-certificates",`ALPN error: ${ne.message}`),ge.resolve("http/1.1")})}}class l{constructor(q,J,le,_e){this.firstPackageReceived=!1,this._closed=!1,this.socksProxy=q,this.uid=J,this.host=le,this.port=_e,this._targetCloseEventListener=()=>{var ge,ne;this.socksProxy._socksProxy.sendSocketEnd({uid:this.uid}),(ge=this.internalTLS)==null||ge.destroy(),(ne=this._dummyServer)==null||ne.close()}}async connect(){if(this.socksProxy.proxyAgentFromOptions?this.target=await this.socksProxy.proxyAgentFromOptions.callback(new w.EventEmitter,{host:O(this.host),port:this.port,secureEndpoint:!1}):this.target=await(0,o.createSocket)(O(this.host),this.port),this.target.once("close",this._targetCloseEventListener),this.target.once("error",q=>this.socksProxy._socksProxy.sendSocketError({uid:this.uid,error:q.message})),this._closed){this.target.destroy();return}this.socksProxy._socksProxy.socketConnected({uid:this.uid,host:this.target.localAddress,port:this.target.localPort})}onClose(){var q,J;this.target.destroy(),(q=this.internalTLS)==null||q.destroy(),(J=this._dummyServer)==null||J.close(),this._closed=!0}onData(q){this.firstPackageReceived||(this.firstPackageReceived=!0,q[0]===22?this._attachTLSListeners():this.target.on("data",J=>this.socksProxy._socksProxy.sendSocketData({uid:this.uid,data:J}))),this.internal?this.internal.push(q):this.target.write(q)}_attachTLSListeners(){this.internal=new _.default.Duplex({read:()=>{},write:(q,J,le)=>{this.socksProxy._socksProxy.sendSocketData({uid:this.uid,data:q}),le()}}),this.socksProxy.alpnCache.get(O(this.host),this.port,q=>{n.debugLogger.log("client-certificates",`Proxy->Target ${this.host}:${this.port} chooses ALPN ${q}`),!this._closed&&(this._dummyServer=f.default.createServer({...h,ALPNProtocols:q==="h2"?["h2","http/1.1"]:["http/1.1"]}),this._dummyServer.emit("connection",this.internal),this._dummyServer.once("secureConnection",J=>{this.internalTLS=J,n.debugLogger.log("client-certificates",`Browser->Proxy ${this.host}:${this.port} chooses ALPN ${J.alpnProtocol}`);let le;const _e=ge=>{n.debugLogger.log("client-certificates",`error when connecting to target: ${ge.message.replaceAll(`
`," ")}`);const ne=(0,v.escapeHTML)("Playwright client-certificate error: "+ge.message).replaceAll(`
`," <br>");if((J==null?void 0:J.alpnProtocol)==="h2")if("performServerHandshake"in g.default){this.target.removeListener("close",this._targetCloseEventListener);const S=g.default.performServerHandshake(J);S.on("error",()=>{this.target.destroy(),this._targetCloseEventListener()}),S.once("stream",j=>{j.respond({"content-type":"text/html",[g.default.constants.HTTP2_HEADER_STATUS]:503});const y=()=>{S.close(),this.target.destroy(),this._targetCloseEventListener()};j.end(ne,y),j.once("error",y)})}else this.target.destroy();else J.end(["HTTP/1.1 503 Internal Server Error","Content-Type: text/html; charset=utf-8","Content-Length: "+Buffer.byteLength(ne),"",ne].join(`\r
`)),this.target.destroy()};if(this._closed){J.destroy();return}le=f.default.connect({socket:this.target,host:this.host,port:this.port,rejectUnauthorized:!this.socksProxy.ignoreHTTPSErrors,ALPNProtocols:[J.alpnProtocol||"http/1.1"],servername:u.default.isIP(this.host)?void 0:this.host,secureContext:this.socksProxy.secureContextMap.get(new URL(`https://${this.host}:${this.port}`).origin)}),le.once("secureConnect",()=>{J.pipe(le),le.pipe(J)}),J.once("error",()=>this.target.destroy()),le.once("error",_e)}))})}}class x{constructor(q){this._connections=new Map,this.secureContextMap=new Map,(0,a.verifyClientCertificates)(q.clientCertificates),this.alpnCache=new c,this.ignoreHTTPSErrors=q.ignoreHTTPSErrors,this.proxyAgentFromOptions=(0,s.createProxyAgent)(q.proxy),this._initSecureContexts(q.clientCertificates),this._socksProxy=new d.SocksProxy,this._socksProxy.setPattern("*"),this._socksProxy.addListener(d.SocksProxy.Events.SocksRequested,async J=>{try{const le=new l(this,J.uid,J.host,J.port);await le.connect(),this._connections.set(J.uid,le)}catch(le){this._socksProxy.socketFailed({uid:J.uid,errorCode:le.code})}}),this._socksProxy.addListener(d.SocksProxy.Events.SocksData,async J=>{var le;(le=this._connections.get(J.uid))==null||le.onData(J.data)}),this._socksProxy.addListener(d.SocksProxy.Events.SocksClosed,J=>{var le;(le=this._connections.get(J.uid))==null||le.onClose(),this._connections.delete(J.uid)}),m()}_initSecureContexts(q){const J=new Map;for(const le of q||[]){const _e=T(le.origin),ge=J.get(_e)||[];ge.push(le),J.set(_e,ge)}for(const[le,_e]of J)try{this.secureContextMap.set(le,f.default.createSecureContext(b(_e)))}catch(ge){throw ge=z(ge),(0,v.rewriteErrorMessage)(ge,`Failed to load client certificate: ${ge.message}`)}}static async create(q){const J=new x(q);return await J._socksProxy.listen(0,"127.0.0.1"),J}proxySettings(){return{server:`socks5://127.0.0.1:${this._socksProxy.port()}`}}async close(){await this._socksProxy.close()}}function T($){try{return new URL($).origin}catch{return $}}function b($){if(!$||!$.length)return;const q={pfx:[],key:[],cert:[]};for(const J of $)J.cert&&q.cert.push(J.cert),J.key&&q.key.push({pem:J.key,passphrase:J.passphrase}),J.pfx&&q.pfx.push({buf:J.pfx,passphrase:J.passphrase});return q}function p($,q){const J=$==null?void 0:$.filter(le=>T(le.origin)===q);return b(J)}function O($){return $==="local.playwright"?"localhost":$}function z($){return $.message!=="unsupported"&&$.code!=="ERR_CRYPTO_UNSUPPORTED_OPERATION"?$:(0,v.rewriteErrorMessage)($,["Unsupported TLS certificate.","Most likely, the security algorithm of the given certificate was deprecated by OpenSSL.","For more details, see https://github.com/openssl/openssl/blob/master/README-PROVIDERS.md#the-legacy-provider","You could probably modernize the certificate by following the steps at https://github.com/nodejs/node/issues/40672#issuecomment-1243648223"].join(`
`))}return Au}var Iu,n0;function Ti(){if(n0)return Iu;n0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{Browser:()=>f}),Iu=te(P);var e=Gs(),U=Ir(),C=FO(),w=Tr(),g=Kr(),u=pf(),_=bn();const d=class d extends w.SdkObject{constructor(a,s){super(a,"browser"),this._downloads=new Map,this._defaultContext=null,this._startedClosing=!1,this._idToVideo=new Map,this._isCollocatedWithServer=!0,this.attribution.browser=this,this.options=s,this.instrumentation.onBrowserOpen(this)}sdkLanguage(){return this.options.sdkLanguage||this.attribution.playwright.options.sdkLanguage}newContextFromMetadata(a,s){return new _.ProgressController(a,this).run(o=>this.newContext(o,s))}async newContext(a,s){var h;(0,U.validateBrowserContextOptions)(s,this.options);let n;(h=s.clientCertificates)!=null&&h.length&&(n=await a.raceWithCleanup(u.ClientCertificatesProxy.create(s),m=>m.close()),s={...s},s.proxyOverride=n.proxySettings(),s.internalIgnoreHTTPSErrors=!0);const o=await a.raceWithCleanup(this.doCreateNewContext(s),m=>m.close({reason:"Failed to create context"}));return o._clientCertificatesProxy=n,s.__testHookBeforeSetStorageState&&await a.race(s.__testHookBeforeSetStorageState()),s.storageState&&await o.setStorageState(a,s.storageState),this.emit(d.Events.Context,o),o}async newContextForReuse(a,s){const n=U.BrowserContext.reusableContextHash(s);return!this._contextForReuse||n!==this._contextForReuse.hash||!this._contextForReuse.context.canResetForReuse()?(this._contextForReuse&&await this._contextForReuse.context.close({reason:"Context reused"}),this._contextForReuse={context:await this.newContext(a,s),hash:n},this._contextForReuse.context):(await this._contextForReuse.context.resetForReuse(a,s),this._contextForReuse.context)}contextForReuse(){var a;return(a=this._contextForReuse)==null?void 0:a.context}_downloadCreated(a,s,n,o){const h=new C.Download(a,this.options.downloadsPath||"",s,n,o);this._downloads.set(s,h)}_downloadFilenameSuggested(a,s){const n=this._downloads.get(a);n&&n._filenameSuggested(s)}_downloadFinished(a,s){const n=this._downloads.get(a);n&&(n.artifact.reportFinished(s?new Error(s):void 0),this._downloads.delete(a))}_videoStarted(a,s,n,o){const h=new e.Artifact(a,n);this._idToVideo.set(s,{context:a,artifact:h}),o.then(m=>{m instanceof g.Page&&(m.video=h,m.emitOnContext(U.BrowserContext.Events.VideoStarted,h),m.emit(g.Page.Events.Video,h))})}_takeVideo(a){const s=this._idToVideo.get(a);return this._idToVideo.delete(a),s==null?void 0:s.artifact}_didClose(){for(const a of this.contexts())a._browserClosed();this._defaultContext&&this._defaultContext._browserClosed(),this.emit(d.Events.Disconnected),this.instrumentation.onBrowserClose(this)}async close(a){this._startedClosing||(a.reason&&(this._closeReason=a.reason),this._startedClosing=!0,await this.options.browserProcess.close()),this.isConnected()&&await new Promise(s=>this.once(d.Events.Disconnected,s))}async killForTests(){await this.options.browserProcess.kill()}};d.Events={Context:"context",Disconnected:"disconnected"};let f=d;return Iu}var Nu,i0;function Lo(){if(i0)return Nu;i0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{CDPSession:()=>v,CRConnection:()=>f,CRSession:()=>d,ConnectionEvents:()=>u,kBrowserCloseMessageId:()=>_}),Nu=te(P);var e=nr(),U=Mr(),C=hn(),w=Dn(),g=Tr();const u={Disconnected:Symbol("ConnectionEvents.Disconnected")},_=-9999;class f extends g.SdkObject{constructor(n,o,h,m){super(n,"cr-connection"),this._lastId=0,this._sessions=new Map,this._closed=!1,this.setMaxListeners(0),this._transport=o,this._protocolLogger=h,this._browserLogsCollector=m,this.rootSession=new d(this,null,""),this._sessions.set("",this.rootSession),this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this)}_rawSend(n,o,h){const m=++this._lastId,c={id:m,method:o,params:h};return n&&(c.sessionId=n),this._protocolLogger("send",c),this._transport.send(c),m}async _onMessage(n){if(this._protocolLogger("receive",n),n.id===_)return;const o=this._sessions.get(n.sessionId||"");o&&o._onMessage(n)}_onClose(n){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this._browserDisconnectedLogs=C.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs(),n),this.rootSession.dispose(),Promise.resolve().then(()=>this.emit(u.Disconnected))}close(){this._closed||this._transport.close()}async createBrowserSession(){const{sessionId:n}=await this.rootSession.send("Target.attachToBrowserTarget");return new v(this.rootSession,n)}}class d extends g.SdkObject{constructor(n,o,h,m){super(n,"cr-session"),this._callbacks=new Map,this._crashed=!1,this._closed=!1,this.setMaxListeners(0),this._connection=n,this._parentSession=o,this._sessionId=h,this._eventListener=m,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}_markAsCrashed(){this._crashed=!0}createChildSession(n,o){const h=new d(this._connection,this,n,o);return this._connection._sessions.set(n,h),h}async send(n,o){if(this._crashed||this._closed||this._connection._closed||this._connection._browserDisconnectedLogs)throw new w.ProtocolError(this._crashed?"crashed":"closed",void 0,this._connection._browserDisconnectedLogs);const h=this._connection._rawSend(this._sessionId,n,o);return new Promise((m,c)=>{this._callbacks.set(h,{resolve:m,reject:c,error:new w.ProtocolError("error",n)})})}_sendMayFail(n,o){return this.send(n,o).catch(h=>U.debugLogger.log("error",h))}_onMessage(n){var o,h;if(n.id&&this._callbacks.has(n.id)){const m=this._callbacks.get(n.id);this._callbacks.delete(n.id),n.error?(m.error.setMessage(n.error.message),m.reject(m.error)):m.resolve(n.result)}else n.id&&((o=n.error)==null?void 0:o.code)===-32001||((0,e.assert)(!n.id,((h=n==null?void 0:n.error)==null?void 0:h.message)||void 0),Promise.resolve().then(()=>{this._eventListener&&this._eventListener(n.method,n.params),this.emit(n.method,n.params)}))}async detach(){if(this._closed)throw new Error("Session already detached. Most likely the page has been closed.");if(!this._parentSession)throw new Error("Root session cannot be closed");await this._sendMayFail("Runtime.runIfWaitingForDebugger"),await this._parentSession.send("Target.detachFromTarget",{sessionId:this._sessionId}),this.dispose()}dispose(){this._closed=!0,this._connection._sessions.delete(this._sessionId);for(const n of this._callbacks.values())n.error.setMessage("Internal server error, session closed."),n.error.type=this._crashed?"crashed":"closed",n.error.logs=this._connection._browserDisconnectedLogs,n.reject(n.error);this._callbacks.clear()}}const a=class a extends g.SdkObject{constructor(n,o){super(n,"cdp-session"),this._listeners=[],this._session=n.createChildSession(o,(h,m)=>this.emit(a.Events.Event,{method:h,params:m})),this._listeners=[e.eventsHelper.addEventListener(n,"Target.detachedFromTarget",h=>{h.sessionId===o&&this._onClose()})]}async send(n,o){return await this._session.send(n,o)}async detach(){return await this._session.detach()}async attachToTarget(n){const{sessionId:o}=await this.send("Target.attachToTarget",{targetId:n,flatten:!0});return new a(this._session,o)}_onClose(){e.eventsHelper.removeEventListeners(this._listeners),this._session.dispose(),this.emit(a.Events.Closed)}};a.Events={Event:"event",Closed:"close"};let v=a;return Nu}var Ru,s0;function BO(){if(s0)return Ru;s0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{getAccessibilityTree:()=>e}),Ru=te(P);async function e(C,w){const{nodes:g}=await C.send("Accessibility.getFullAXTree"),u=U.createTree(C,g);return{tree:u,needle:w?await u._findElement(w):null}}class U{constructor(w,g){this._children=[],this._richlyEditable=!1,this._editable=!1,this._focusable=!1,this._expanded=!1,this._hidden=!1,this._client=w,this._payload=g,this._name=this._payload.name?this._payload.name.value:"",this._role=this._payload.role?this._payload.role.value:"Unknown";for(const u of this._payload.properties||[])u.name==="editable"&&(this._richlyEditable=u.value.value==="richtext",this._editable=!0),u.name==="focusable"&&(this._focusable=u.value.value),u.name==="expanded"&&(this._expanded=u.value.value),u.name==="hidden"&&(this._hidden=u.value.value)}_isPlainTextField(){return this._richlyEditable?!1:this._editable?!0:this._role==="textbox"||this._role==="ComboBox"||this._role==="searchbox"}_isTextOnlyObject(){const w=this._role;return w==="LineBreak"||w==="text"||w==="InlineTextBox"||w==="StaticText"}_hasFocusableChild(){if(this._cachedHasFocusableChild===void 0){this._cachedHasFocusableChild=!1;for(const w of this._children)if(w._focusable||w._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}async _findElement(w){const g=w._objectId,{node:{backendNodeId:u}}=await this._client.send("DOM.describeNode",{objectId:g});return this.find(f=>f._payload.backendDOMNodeId===u)||null}find(w){if(w(this))return this;for(const g of this._children){const u=g.find(w);if(u)return u}return null}isLeafNode(){if(!this._children.length||this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return this._hasFocusableChild()?!1:!!(this._focusable&&this._role!=="WebArea"&&this._role!=="RootWebArea"&&this._name||this._role==="heading"&&this._name)}isControl(){switch(this._role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":return!0;default:return!1}}isInteresting(w){return this._role==="Ignored"||this._hidden?!1:this._focusable||this._richlyEditable||this.isControl()?!0:w?!1:this.isLeafNode()&&!!this._name}normalizedRole(){switch(this._role){case"RootWebArea":return"WebArea";case"StaticText":return"text";default:return this._role}}serialize(){const w=new Map;for(const a of this._payload.properties||[])w.set(a.name.toLowerCase(),a.value.value);this._payload.description&&w.set("description",this._payload.description.value);const g={role:this.normalizedRole(),name:this._payload.name&&this._payload.name.value||""},u=["description","keyshortcuts","roledescription","valuetext"];for(const a of u)w.has(a)&&(g[a]=w.get(a));const _=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const a of _){if(a==="focused"&&(this._role==="WebArea"||this._role==="RootWebArea"))continue;const s=w.get(a);s&&(g[a]=s)}const f=["level","valuemax","valuemin"];for(const a of f)w.has(a)&&(g[a]=w.get(a));const d=["autocomplete","haspopup","invalid","orientation"];for(const a of d){const s=w.get(a);!s||s==="false"||(g[a]=s)}const v=g;return this._payload.value&&(typeof this._payload.value.value=="string"&&(v.valueString=this._payload.value.value),typeof this._payload.value.value=="number"&&(v.valueNumber=this._payload.value.value)),w.has("checked")&&(v.checked=w.get("checked")==="true"?"checked":w.get("checked")==="false"?"unchecked":"mixed"),w.has("pressed")&&(v.pressed=w.get("pressed")==="true"?"pressed":w.get("pressed")==="false"?"released":"mixed"),v}static createTree(w,g){const u=new Map;for(const _ of g)u.set(_.nodeId,new U(w,_));for(const _ of u.values())for(const f of _._payload.childIds||[])_._children.push(u.get(f));return u.values().next().value}}return Ru}var Lu,a0;function jO(){if(a0)return Lu;a0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{CRCoverage:()=>C}),Lu=te(P);var e=nr(),U=qr();class C{constructor(f){this._jsCoverage=new w(f),this._cssCoverage=new g(f)}async startJSCoverage(f,d){f.cleanupWhenAborted(()=>this._jsCoverage.stop()),await f.race(this._jsCoverage.start(d))}async stopJSCoverage(){return await this._jsCoverage.stop()}async startCSSCoverage(f,d){f.cleanupWhenAborted(()=>this._cssCoverage.stop()),await f.race(this._cssCoverage.start(d))}async stopCSSCoverage(){return await this._cssCoverage.stop()}}class w{constructor(f){this._reportAnonymousScripts=!1,this._client=f,this._enabled=!1,this._scriptIds=new Set,this._scriptSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(f){(0,e.assert)(!this._enabled,"JSCoverage is already enabled");const{resetOnNavigation:d=!0,reportAnonymousScripts:v=!1}=f;this._resetOnNavigation=d,this._reportAnonymousScripts=v,this._enabled=!0,this._scriptIds.clear(),this._scriptSources.clear(),this._eventListeners=[U.eventsHelper.addEventListener(this._client,"Debugger.scriptParsed",this._onScriptParsed.bind(this)),U.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this)),U.eventsHelper.addEventListener(this._client,"Debugger.paused",this._onDebuggerPaused.bind(this))],await Promise.all([this._client.send("Profiler.enable"),this._client.send("Profiler.startPreciseCoverage",{callCount:!0,detailed:!0}),this._client.send("Debugger.enable"),this._client.send("Debugger.setSkipAllPauses",{skip:!0})])}_onDebuggerPaused(){this._client.send("Debugger.resume")}_onExecutionContextsCleared(){this._resetOnNavigation&&(this._scriptIds.clear(),this._scriptSources.clear())}async _onScriptParsed(f){if(this._scriptIds.add(f.scriptId),!f.url&&!this._reportAnonymousScripts)return;const d=await this._client._sendMayFail("Debugger.getScriptSource",{scriptId:f.scriptId});d&&this._scriptSources.set(f.scriptId,d.scriptSource)}async stop(){if(!this._enabled)return{entries:[]};const[f]=await Promise.all([this._client.send("Profiler.takePreciseCoverage"),this._client.send("Profiler.stopPreciseCoverage"),this._client.send("Profiler.disable"),this._client.send("Debugger.disable")]);U.eventsHelper.removeEventListeners(this._eventListeners),this._enabled=!1;const d={entries:[]};for(const v of f.result){if(!this._scriptIds.has(v.scriptId)||!v.url&&!this._reportAnonymousScripts)continue;const a=this._scriptSources.get(v.scriptId);a?d.entries.push({...v,source:a}):d.entries.push(v)}return d}}class g{constructor(f){this._client=f,this._enabled=!1,this._stylesheetURLs=new Map,this._stylesheetSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(f){(0,e.assert)(!this._enabled,"CSSCoverage is already enabled");const{resetOnNavigation:d=!0}=f;this._resetOnNavigation=d,this._enabled=!0,this._stylesheetURLs.clear(),this._stylesheetSources.clear(),this._eventListeners=[U.eventsHelper.addEventListener(this._client,"CSS.styleSheetAdded",this._onStyleSheet.bind(this)),U.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this))],await Promise.all([this._client.send("DOM.enable"),this._client.send("CSS.enable"),this._client.send("CSS.startRuleUsageTracking")])}_onExecutionContextsCleared(){this._resetOnNavigation&&(this._stylesheetURLs.clear(),this._stylesheetSources.clear())}async _onStyleSheet(f){const d=f.header;if(!d.sourceURL)return;const v=await this._client._sendMayFail("CSS.getStyleSheetText",{styleSheetId:d.styleSheetId});v&&(this._stylesheetURLs.set(d.styleSheetId,d.sourceURL),this._stylesheetSources.set(d.styleSheetId,v.text))}async stop(){if(!this._enabled)return{entries:[]};const f=await this._client.send("CSS.stopRuleUsageTracking");await Promise.all([this._client.send("CSS.disable"),this._client.send("DOM.disable")]),U.eventsHelper.removeEventListeners(this._eventListeners),this._enabled=!1;const d=new Map;for(const a of f.ruleUsage){let s=d.get(a.styleSheetId);s||(s=[],d.set(a.styleSheetId,s)),s.push({startOffset:a.startOffset,endOffset:a.endOffset,count:a.used?1:0})}const v={entries:[]};for(const a of this._stylesheetURLs.keys()){const s=this._stylesheetURLs.get(a),n=this._stylesheetSources.get(a),o=u(d.get(a)||[]);v.entries.push({url:s,ranges:o,text:n})}return v}}function u(_){const f=[];for(const s of _)f.push({offset:s.startOffset,type:0,range:s}),f.push({offset:s.endOffset,type:1,range:s});f.sort((s,n)=>{if(s.offset!==n.offset)return s.offset-n.offset;if(s.type!==n.type)return n.type-s.type;const o=s.range.endOffset-s.range.startOffset,h=n.range.endOffset-n.range.startOffset;return s.type===0?h-o:o-h});const d=[],v=[];let a=0;for(const s of f){if(d.length&&a<s.offset&&d[d.length-1]>0){const n=v.length?v[v.length-1]:null;n&&n.end===a?n.end=s.offset:v.push({start:a,end:s.offset})}a=s.offset,s.type===0?d.push(s.range.count):d.pop()}return v.filter(s=>s.end-s.start>1)}return Lu}var Du,o0;function Yi(){if(o0)return Du;o0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(h,m)=>{for(var c in m)r(h,c,{get:m[c],enumerable:!0})},P=(h,m,c,l)=>{if(m&&typeof m=="object"||typeof m=="function")for(let x of E(m))!V.call(h,x)&&x!==c&&r(h,x,{get:()=>m[x],enumerable:!(l=i(m,x))||l.enumerable});return h},e=(h,m,c)=>(c=h!=null?t(R(h)):{},P(!h||!h.__esModule?r(c,"default",{value:h,enumerable:!0}):c,h)),U=h=>P(r({},"__esModule",{value:!0}),h),C={};te(C,{exceptionToError:()=>s,getExceptionMessage:()=>_,readProtocolStream:()=>v,releaseObject:()=>f,saveProtocolStream:()=>d,toButtonsMask:()=>o,toConsoleMessageLocation:()=>a,toModifiersMask:()=>n}),Du=U(C);var w=e(Je),g=pn(),u=Ln();function _(h){if(h.exception)return h.exception.description||String(h.exception.value);let m=h.text;if(h.stackTrace)for(const c of h.stackTrace.callFrames){const l=c.url+":"+c.lineNumber+":"+c.columnNumber,x=c.functionName||"<anonymous>";m+=`
    at ${x} (${l})`}return m}async function f(h,m){await h.send("Runtime.releaseObject",{objectId:m}).catch(c=>{})}async function d(h,m,c){let l=!1;await(0,u.mkdirIfNeeded)(c);const x=await w.default.promises.open(c,"w");for(;!l;){const T=await h.send("IO.read",{handle:m});l=T.eof;const b=Buffer.from(T.data,T.base64Encoded?"base64":void 0);await x.write(b)}await x.close(),await h.send("IO.close",{handle:m})}async function v(h,m){let c=!1;const l=[];for(;!c;){const x=await h.send("IO.read",{handle:m});c=x.eof;const T=Buffer.from(x.data,x.base64Encoded?"base64":void 0);l.push(T)}return await h.send("IO.close",{handle:m}),Buffer.concat(l)}function a(h){return h&&h.callFrames.length?{url:h.callFrames[0].url,lineNumber:h.callFrames[0].lineNumber,columnNumber:h.callFrames[0].columnNumber}:{url:"",lineNumber:0,columnNumber:0}}function s(h){var $,q;const m=_(h),c=m.split(`
`),l=c.findIndex(J=>J.startsWith("    at"));let x="",T="";l===-1?x=m:(x=c.slice(0,l).join(`
`),T=m);const{name:b,message:p}=(0,g.splitErrorMessage)(x),O=new Error(p);O.stack=T;const z=(q=($=h.exception)==null?void 0:$.preview)==null?void 0:q.properties.find(J=>J.name==="name");return O.name=z?z.value??"Error":b,O}function n(h){let m=0;return h.has("Alt")&&(m|=1),h.has("Control")&&(m|=2),h.has("Meta")&&(m|=4),h.has("Shift")&&(m|=8),m}function o(h){let m=0;return h.has("left")&&(m|=1),h.has("right")&&(m|=2),h.has("middle")&&(m|=4),m}return Du}var Mu,c0;function HO(){if(c0)return Mu;c0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{DragManager:()=>C}),Mu=te(P);var e=Yi(),U=nr();class C{constructor(g){this._dragState=null,this._lastPosition={x:0,y:0},this._crPage=g}async cancelDrag(){return this._dragState?(await this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragCancel",x:this._lastPosition.x,y:this._lastPosition.y,data:{items:[],dragOperationsMask:65535}}),this._dragState=null,!0):!1}async interceptDragCausedByMove(g,u,_,f,d,v,a){if(this._lastPosition={x:u,y:_},this._dragState){await g.race(this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragOver",x:u,y:_,data:this._dragState,modifiers:(0,e.toModifiersMask)(v)}));return}if(f!=="left")return a();const s=this._crPage._mainFrameSession._client;let n;const o=new Promise(c=>n=c);function h(){let c=Promise.resolve(!1),l=null;const x=b=>l=b,T=()=>{c=new Promise(b=>{window.addEventListener("dragstart",x,{once:!0,capture:!0}),setTimeout(()=>b(l?!l.defaultPrevented:!1),0)})};window.addEventListener("mousemove",T,{once:!0,capture:!0}),window.__cleanupDrag=async()=>{const b=await c;return window.removeEventListener("mousemove",T,{capture:!0}),window.removeEventListener("dragstart",x,{capture:!0}),delete window.__cleanupDrag,b}}await this._crPage._page.safeNonStallingEvaluateInAllFrames(`(${h.toString()})()`,"utility"),g.cleanupWhenAborted(()=>this._crPage._page.safeNonStallingEvaluateInAllFrames("window.__cleanupDrag && window.__cleanupDrag()","utility")),s.on("Input.dragIntercepted",n);try{await s.send("Input.setInterceptDrags",{enabled:!0})}catch{return s.off("Input.dragIntercepted",n),a()}await a();const m=(await Promise.all(this._crPage._page.frames().map(async c=>c.nonStallingEvaluateInExistingContext("window.__cleanupDrag && window.__cleanupDrag()","utility").catch(()=>!1)))).some(c=>c);this._dragState=m?(await o).data:null,s.off("Input.dragIntercepted",n),await g.race(s.send("Input.setInterceptDrags",{enabled:!1})),this._dragState&&await g.race(this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"dragEnter",x:u,y:_,data:this._dragState,modifiers:(0,e.toModifiersMask)(v)}))}isDragging(){return!!this._dragState}async drop(g,u,_,f){(0,U.assert)(this._dragState,"missing drag state"),await g.race(this._crPage._mainFrameSession._client.send("Input.dispatchDragEvent",{type:"drop",x:u,y:_,data:this._dragState,modifiers:(0,e.toModifiersMask)(f)})),this._dragState=null}}return Mu}var Fu,l0;function ff(){if(l0)return Fu;l0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{CRExecutionContext:()=>a,createHandle:()=>h}),Fu=U(C);var w=Gr(),g=Yi(),u=pn(),_=ds(),f=e(Oi()),d=e(hi()),v=Dn();class a{constructor(c,l){this._client=c,this._contextId=l.id}async rawEvaluateJSON(c){const{exceptionDetails:l,result:x}=await this._client.send("Runtime.evaluate",{expression:c,contextId:this._contextId,returnByValue:!0}).catch(s);if(l)throw new f.JavaScriptErrorInEvaluate((0,g.getExceptionMessage)(l));return x.value}async rawEvaluateHandle(c,l){const{exceptionDetails:x,result:T}=await this._client.send("Runtime.evaluate",{expression:l,contextId:this._contextId}).catch(s);if(x)throw new f.JavaScriptErrorInEvaluate((0,g.getExceptionMessage)(x));return h(c,T)}async evaluateWithArguments(c,l,x,T,b){const{exceptionDetails:p,result:O}=await this._client.send("Runtime.callFunctionOn",{functionDeclaration:c,objectId:x._objectId,arguments:[{objectId:x._objectId},...T.map(z=>({value:z})),...b.map(z=>({objectId:z._objectId}))],returnByValue:l,awaitPromise:!0,userGesture:!0}).catch(s);if(p)throw new f.JavaScriptErrorInEvaluate((0,g.getExceptionMessage)(p));return l?(0,_.parseEvaluationResultValue)(O.value):h(x._context,O)}async getProperties(c){const l=await this._client.send("Runtime.getProperties",{objectId:c._objectId,ownProperties:!0}),x=new Map;for(const T of l.result)!T.enumerable||!T.value||x.set(T.name,h(c._context,T.value));return x}async releaseHandle(c){c._objectId&&await(0,g.releaseObject)(this._client,c._objectId)}}function s(m){if(m.message.includes("Object reference chain is too long"))throw new Error("Cannot serialize result: object reference chain is too long.");if(m.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};throw m instanceof TypeError&&m.message.startsWith("Converting circular structure to JSON")&&(0,u.rewriteErrorMessage)(m,m.message+" Are you passing a nested JSHandle?"),!f.isJavaScriptErrorInEvaluate(m)&&!(0,v.isSessionClosedError)(m)?new Error("Execution context was destroyed, most likely because of a navigation."):m}function n(m){const c=m.value,l=m.unserializableValue;return l?f.parseUnserializableValue(l):c}function o(m){if(m.type==="undefined")return"undefined";if("value"in m)return String(m.value);if(m.unserializableValue)return String(m.unserializableValue);if(m.description==="Object"&&m.preview){const c=[];for(const{name:l,value:x}of m.preview.properties)c.push(`${l}: ${x}`);return`{${c.join(", ")}}`}return m.subtype==="array"&&m.preview?f.sparseArrayToString(m.preview.properties):m.description}function h(m,c){return c.subtype==="node"?((0,w.assert)(m instanceof d.FrameExecutionContext),new d.ElementHandle(m,c.objectId)):new f.JSHandle(m,c.subtype||c.type,o(c),c.objectId,n(c))}return Fu}var Bu,u0;function oy(){if(u0)return Bu;u0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{macEditingCommands:()=>e}),Bu=te(P);const e={Backspace:"deleteBackward:",Enter:"insertNewline:",NumpadEnter:"insertNewline:",Escape:"cancelOperation:",ArrowUp:"moveUp:",ArrowDown:"moveDown:",ArrowLeft:"moveLeft:",ArrowRight:"moveRight:",F5:"complete:",Delete:"deleteForward:",Home:"scrollToBeginningOfDocument:",End:"scrollToEndOfDocument:",PageUp:"scrollPageUp:",PageDown:"scrollPageDown:","Shift+Backspace":"deleteBackward:","Shift+Enter":"insertNewline:","Shift+NumpadEnter":"insertNewline:","Shift+Escape":"cancelOperation:","Shift+ArrowUp":"moveUpAndModifySelection:","Shift+ArrowDown":"moveDownAndModifySelection:","Shift+ArrowLeft":"moveLeftAndModifySelection:","Shift+ArrowRight":"moveRightAndModifySelection:","Shift+F5":"complete:","Shift+Delete":"deleteForward:","Shift+Home":"moveToBeginningOfDocumentAndModifySelection:","Shift+End":"moveToEndOfDocumentAndModifySelection:","Shift+PageUp":"pageUpAndModifySelection:","Shift+PageDown":"pageDownAndModifySelection:","Shift+Numpad5":"delete:","Control+Tab":"selectNextKeyView:","Control+Enter":"insertLineBreak:","Control+NumpadEnter":"insertLineBreak:","Control+Quote":"insertSingleQuoteIgnoringSubstitution:","Control+KeyA":"moveToBeginningOfParagraph:","Control+KeyB":"moveBackward:","Control+KeyD":"deleteForward:","Control+KeyE":"moveToEndOfParagraph:","Control+KeyF":"moveForward:","Control+KeyH":"deleteBackward:","Control+KeyK":"deleteToEndOfParagraph:","Control+KeyL":"centerSelectionInVisibleArea:","Control+KeyN":"moveDown:","Control+KeyO":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"Control+KeyP":"moveUp:","Control+KeyT":"transpose:","Control+KeyV":"pageDown:","Control+KeyY":"yank:","Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Control+ArrowUp":"scrollPageUp:","Control+ArrowDown":"scrollPageDown:","Control+ArrowLeft":"moveToLeftEndOfLine:","Control+ArrowRight":"moveToRightEndOfLine:","Shift+Control+Enter":"insertLineBreak:","Shift+Control+NumpadEnter":"insertLineBreak:","Shift+Control+Tab":"selectPreviousKeyView:","Shift+Control+Quote":"insertDoubleQuoteIgnoringSubstitution:","Shift+Control+KeyA":"moveToBeginningOfParagraphAndModifySelection:","Shift+Control+KeyB":"moveBackwardAndModifySelection:","Shift+Control+KeyE":"moveToEndOfParagraphAndModifySelection:","Shift+Control+KeyF":"moveForwardAndModifySelection:","Shift+Control+KeyN":"moveDownAndModifySelection:","Shift+Control+KeyP":"moveUpAndModifySelection:","Shift+Control+KeyV":"pageDownAndModifySelection:","Shift+Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Shift+Control+ArrowUp":"scrollPageUp:","Shift+Control+ArrowDown":"scrollPageDown:","Shift+Control+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Control+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Alt+Backspace":"deleteWordBackward:","Alt+Enter":"insertNewlineIgnoringFieldEditor:","Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Alt+Escape":"complete:","Alt+ArrowUp":["moveBackward:","moveToBeginningOfParagraph:"],"Alt+ArrowDown":["moveForward:","moveToEndOfParagraph:"],"Alt+ArrowLeft":"moveWordLeft:","Alt+ArrowRight":"moveWordRight:","Alt+Delete":"deleteWordForward:","Alt+PageUp":"pageUp:","Alt+PageDown":"pageDown:","Shift+Alt+Backspace":"deleteWordBackward:","Shift+Alt+Enter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+Escape":"complete:","Shift+Alt+ArrowUp":"moveParagraphBackwardAndModifySelection:","Shift+Alt+ArrowDown":"moveParagraphForwardAndModifySelection:","Shift+Alt+ArrowLeft":"moveWordLeftAndModifySelection:","Shift+Alt+ArrowRight":"moveWordRightAndModifySelection:","Shift+Alt+Delete":"deleteWordForward:","Shift+Alt+PageUp":"pageUp:","Shift+Alt+PageDown":"pageDown:","Control+Alt+KeyB":"moveWordBackward:","Control+Alt+KeyF":"moveWordForward:","Control+Alt+Backspace":"deleteWordBackward:","Shift+Control+Alt+KeyB":"moveWordBackwardAndModifySelection:","Shift+Control+Alt+KeyF":"moveWordForwardAndModifySelection:","Shift+Control+Alt+Backspace":"deleteWordBackward:","Meta+NumpadSubtract":"cancel:","Meta+Backspace":"deleteToBeginningOfLine:","Meta+ArrowUp":"moveToBeginningOfDocument:","Meta+ArrowDown":"moveToEndOfDocument:","Meta+ArrowLeft":"moveToLeftEndOfLine:","Meta+ArrowRight":"moveToRightEndOfLine:","Shift+Meta+NumpadSubtract":"cancel:","Shift+Meta+Backspace":"deleteToBeginningOfLine:","Shift+Meta+ArrowUp":"moveToBeginningOfDocumentAndModifySelection:","Shift+Meta+ArrowDown":"moveToEndOfDocumentAndModifySelection:","Shift+Meta+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Meta+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Meta+KeyA":"selectAll:","Meta+KeyC":"copy:","Meta+KeyX":"cut:","Meta+KeyV":"paste:","Meta+KeyZ":"undo:","Shift+Meta+KeyZ":"redo:"};return Bu}var ju,d0;function UO(){if(d0)return ju;d0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},P=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of E(s))!V.call(a,h)&&h!==n&&r(a,h,{get:()=>s[h],enumerable:!(o=i(s,h))||o.enumerable});return a},e=(a,s,n)=>(n=a!=null?t(R(a)):{},P(!a||!a.__esModule?r(n,"default",{value:a,enumerable:!0}):n,a)),U=a=>P(r({},"__esModule",{value:!0}),a),C={};te(C,{RawKeyboardImpl:()=>f,RawMouseImpl:()=>d,RawTouchscreenImpl:()=>v}),ju=U(C);var w=nr(),g=e(Ro()),u=oy(),_=Yi();class f{constructor(s,n,o){this._client=s,this._isMac=n,this._dragManger=o}_commandsForCode(s,n){if(!this._isMac)return[];const o=[];for(const c of["Shift","Control","Alt","Meta"])n.has(c)&&o.push(c);o.push(s);const h=o.join("+");let m=u.macEditingCommands[h]||[];return(0,w.isString)(m)&&(m=[m]),m=m.filter(c=>!c.startsWith("insert")),m.map(c=>c.substring(0,c.length-1))}async keydown(s,n,o,h,m){const{code:c,key:l,location:x,text:T}=h;if(c==="Escape"&&await s.race(this._dragManger.cancelDrag()))return;const b=this._commandsForCode(c,n);await s.race(this._client.send("Input.dispatchKeyEvent",{type:T?"keyDown":"rawKeyDown",modifiers:(0,_.toModifiersMask)(n),windowsVirtualKeyCode:h.keyCodeWithoutLocation,code:c,commands:b,key:l,text:T,unmodifiedText:T,autoRepeat:m,location:x,isKeypad:x===g.keypadLocation}))}async keyup(s,n,o,h){const{code:m,key:c,location:l}=h;await s.race(this._client.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:(0,_.toModifiersMask)(n),key:c,windowsVirtualKeyCode:h.keyCodeWithoutLocation,code:m,location:l}))}async sendText(s,n){await s.race(this._client.send("Input.insertText",{text:n}))}}class d{constructor(s,n,o){this._page=s,this._client=n,this._dragManager=o}async move(s,n,o,h,m,c,l){const x=async()=>{await s.race(this._client.send("Input.dispatchMouseEvent",{type:"mouseMoved",button:h,buttons:(0,_.toButtonsMask)(m),x:n,y:o,modifiers:(0,_.toModifiersMask)(c),force:m.size>0?.5:0}))};if(l){await x();return}await this._dragManager.interceptDragCausedByMove(s,n,o,h,m,c,x)}async down(s,n,o,h,m,c,l){this._dragManager.isDragging()||await s.race(this._client.send("Input.dispatchMouseEvent",{type:"mousePressed",button:h,buttons:(0,_.toButtonsMask)(m),x:n,y:o,modifiers:(0,_.toModifiersMask)(c),clickCount:l,force:m.size>0?.5:0}))}async up(s,n,o,h,m,c,l){if(this._dragManager.isDragging()){await this._dragManager.drop(s,n,o,c);return}await s.race(this._client.send("Input.dispatchMouseEvent",{type:"mouseReleased",button:h,buttons:(0,_.toButtonsMask)(m),x:n,y:o,modifiers:(0,_.toModifiersMask)(c),clickCount:l}))}async wheel(s,n,o,h,m,c,l){await s.race(this._client.send("Input.dispatchMouseEvent",{type:"mouseWheel",x:n,y:o,modifiers:(0,_.toModifiersMask)(m),deltaX:c,deltaY:l}))}}class v{constructor(s){this._client=s}async tap(s,n,o,h){await s.race(Promise.all([this._client.send("Input.dispatchTouchEvent",{type:"touchStart",modifiers:(0,_.toModifiersMask)(h),touchPoints:[{x:n,y:o}]}),this._client.send("Input.dispatchTouchEvent",{type:"touchEnd",modifiers:(0,_.toModifiersMask)(h),touchPoints:[]})]))}}return ju}var Hu,h0;function cy(){if(h0)return Hu;h0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{CRNetworkManager:()=>d}),Hu=U(C);var w=nr(),g=qr(),u=hn(),_=e(fn()),f=Dn();class d{constructor(c,l){this._requestIdToRequest=new Map,this._requestIdToRequestWillBeSentEvent=new Map,this._credentials=null,this._attemptedAuthentications=new Set,this._userRequestInterceptionEnabled=!1,this._protocolRequestInterceptionEnabled=!1,this._offline=!1,this._extraHTTPHeaders=[],this._requestIdToRequestPausedEvent=new Map,this._responseExtraInfoTracker=new h,this._sessions=new Map,this._page=c,this._serviceWorker=l}async addSession(c,l,x){const T={session:c,isMain:x,workerFrame:l,eventListeners:[]};T.eventListeners=[g.eventsHelper.addEventListener(c,"Fetch.requestPaused",this._onRequestPaused.bind(this,T)),g.eventsHelper.addEventListener(c,"Fetch.authRequired",this._onAuthRequired.bind(this,T)),g.eventsHelper.addEventListener(c,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this,T)),g.eventsHelper.addEventListener(c,"Network.requestWillBeSentExtraInfo",this._onRequestWillBeSentExtraInfo.bind(this)),g.eventsHelper.addEventListener(c,"Network.requestServedFromCache",this._onRequestServedFromCache.bind(this)),g.eventsHelper.addEventListener(c,"Network.responseReceived",this._onResponseReceived.bind(this,T)),g.eventsHelper.addEventListener(c,"Network.responseReceivedExtraInfo",this._onResponseReceivedExtraInfo.bind(this)),g.eventsHelper.addEventListener(c,"Network.loadingFinished",this._onLoadingFinished.bind(this,T)),g.eventsHelper.addEventListener(c,"Network.loadingFailed",this._onLoadingFailed.bind(this,T))],this._page&&T.eventListeners.push(g.eventsHelper.addEventListener(c,"Network.webSocketCreated",b=>this._page.frameManager.onWebSocketCreated(b.requestId,b.url)),g.eventsHelper.addEventListener(c,"Network.webSocketWillSendHandshakeRequest",b=>this._page.frameManager.onWebSocketRequest(b.requestId)),g.eventsHelper.addEventListener(c,"Network.webSocketHandshakeResponseReceived",b=>this._page.frameManager.onWebSocketResponse(b.requestId,b.response.status,b.response.statusText)),g.eventsHelper.addEventListener(c,"Network.webSocketFrameSent",b=>b.response.payloadData&&this._page.frameManager.onWebSocketFrameSent(b.requestId,b.response.opcode,b.response.payloadData)),g.eventsHelper.addEventListener(c,"Network.webSocketFrameReceived",b=>b.response.payloadData&&this._page.frameManager.webSocketFrameReceived(b.requestId,b.response.opcode,b.response.payloadData)),g.eventsHelper.addEventListener(c,"Network.webSocketClosed",b=>this._page.frameManager.webSocketClosed(b.requestId)),g.eventsHelper.addEventListener(c,"Network.webSocketFrameError",b=>this._page.frameManager.webSocketError(b.requestId,b.errorMessage))),this._sessions.set(c,T),await Promise.all([c.send("Network.enable"),this._updateProtocolRequestInterceptionForSession(T,!0),this._setOfflineForSession(T,!0),this._setExtraHTTPHeadersForSession(T,!0)])}removeSession(c){const l=this._sessions.get(c);l&&g.eventsHelper.removeEventListeners(l.eventListeners),this._sessions.delete(c)}async _forEachSession(c){await Promise.all([...this._sessions.values()].map(l=>l.isMain?c(l):c(l).catch(x=>{if(!(0,f.isSessionClosedError)(x))throw x})))}async authenticate(c){this._credentials=c,await this._updateProtocolRequestInterception()}async setOffline(c){c!==this._offline&&(this._offline=c,await this._forEachSession(l=>this._setOfflineForSession(l)))}async _setOfflineForSession(c,l){l&&!this._offline||c.workerFrame||await c.session.send("Network.emulateNetworkConditions",{offline:this._offline,latency:0,downloadThroughput:-1,uploadThroughput:-1})}async setRequestInterception(c){this._userRequestInterceptionEnabled=c,await this._updateProtocolRequestInterception()}async _updateProtocolRequestInterception(){const c=this._userRequestInterceptionEnabled||!!this._credentials;c!==this._protocolRequestInterceptionEnabled&&(this._protocolRequestInterceptionEnabled=c,await this._forEachSession(l=>this._updateProtocolRequestInterceptionForSession(l)))}async _updateProtocolRequestInterceptionForSession(c,l){const x=this._protocolRequestInterceptionEnabled;if(l&&!x)return;const T=c.session.send("Network.setCacheDisabled",{cacheDisabled:x});let b=Promise.resolve(void 0);c.workerFrame||(x?b=c.session.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*",requestStage:"Request"}]}):b=c.session.send("Fetch.disable")),await Promise.all([T,b])}async setExtraHTTPHeaders(c){!this._extraHTTPHeaders.length&&!c.length||(this._extraHTTPHeaders=c,await this._forEachSession(l=>this._setExtraHTTPHeadersForSession(l)))}async _setExtraHTTPHeadersForSession(c,l){l&&!this._extraHTTPHeaders.length||await c.session.send("Network.setExtraHTTPHeaders",{headers:(0,w.headersArrayToObject)(this._extraHTTPHeaders,!1)})}async clearCache(){await this._forEachSession(async c=>{await c.session.send("Network.setCacheDisabled",{cacheDisabled:!0}),this._protocolRequestInterceptionEnabled||await c.session.send("Network.setCacheDisabled",{cacheDisabled:!1}),c.workerFrame||await c.session.send("Network.clearBrowserCache")})}_onRequestWillBeSent(c,l){if(this._protocolRequestInterceptionEnabled&&!l.request.url.startsWith("data:")){const x=l.requestId,T=this._requestIdToRequestPausedEvent.get(x);T?(this._onRequest(c,l,T.sessionInfo,T.event),this._requestIdToRequestPausedEvent.delete(x)):this._requestIdToRequestWillBeSentEvent.set(l.requestId,{sessionInfo:c,event:l})}else this._onRequest(c,l,void 0,void 0)}_onRequestServedFromCache(c){this._responseExtraInfoTracker.requestServedFromCache(c)}_onRequestWillBeSentExtraInfo(c){this._responseExtraInfoTracker.requestWillBeSentExtraInfo(c)}_onAuthRequired(c,l){let x="Default";const T=this._shouldProvideCredentials(l.request.url);this._attemptedAuthentications.has(l.requestId)?x="CancelAuth":T&&(x="ProvideCredentials",this._attemptedAuthentications.add(l.requestId));const{username:b,password:p}=T&&this._credentials?this._credentials:{username:void 0,password:void 0};c.session._sendMayFail("Fetch.continueWithAuth",{requestId:l.requestId,authChallengeResponse:{response:x,username:b,password:p}})}_shouldProvideCredentials(c){return this._credentials?!this._credentials.origin||new URL(c).origin.toLowerCase()===this._credentials.origin.toLowerCase():!1}_onRequestPaused(c,l){var b;if(!l.networkId){c.session._sendMayFail("Fetch.continueRequest",{requestId:l.requestId});return}if(l.request.url.startsWith("data:"))return;const x=l.networkId,T=this._requestIdToRequestWillBeSentEvent.get(x);if(T)this._onRequest(T.sessionInfo,T.event,c,l),this._requestIdToRequestWillBeSentEvent.delete(x);else{const p=this._requestIdToRequest.get(x),O=(b=p==null?void 0:p._route)==null?void 0:b._alreadyContinuedParams;if(O&&!l.redirectedRequestId){c.session._sendMayFail("Fetch.continueRequest",{...O,requestId:l.requestId});return}this._requestIdToRequestPausedEvent.set(x,{sessionInfo:c,event:l})}}_onRequest(c,l,x,T){var _e,ge,ne,S,j;if(l.request.url.startsWith("data:"))return;let b=null;if(l.redirectResponse){const y=this._requestIdToRequest.get(l.requestId);y&&(this._handleRequestRedirect(y,l.redirectResponse,l.timestamp,l.redirectHasExtraInfo),b=y)}let p=l.frameId?(_e=this._page)==null?void 0:_e.frameManager.frame(l.frameId):c.workerFrame;if(!p&&this._page&&T&&T.frameId&&(p=this._page.frameManager.frame(T.frameId)),!p&&this._page&&l.frameId===((ge=this._page)==null?void 0:ge.delegate)._targetId&&(p=this._page.frameManager.frameAttached(l.frameId,null)),!!T&&T.request.method==="OPTIONS"&&l.initiator.type==="preflight"&&(this._page||this._serviceWorker).needsRequestInterception()){const y=T.request.headers,I=[{name:"Access-Control-Allow-Origin",value:y.Origin||"*"},{name:"Access-Control-Allow-Methods",value:y["Access-Control-Request-Method"]||"GET, POST, OPTIONS, DELETE"},{name:"Access-Control-Allow-Credentials",value:"true"}];y["Access-Control-Request-Headers"]&&I.push({name:"Access-Control-Allow-Headers",value:y["Access-Control-Request-Headers"]}),x.session._sendMayFail("Fetch.fulfillRequest",{requestId:T.requestId,responseCode:204,responsePhrase:_.statusText(204),responseHeaders:I,body:""});return}if(!p&&!this._serviceWorker){T&&x.session._sendMayFail("Fetch.continueRequest",{requestId:T.requestId});return}let z=null,$;T&&(b||!this._userRequestInterceptionEnabled&&this._protocolRequestInterceptionEnabled?($=(S=(ne=b==null?void 0:b._originalRequestRoute)==null?void 0:ne._alreadyContinuedParams)==null?void 0:S.headers,x.session._sendMayFail("Fetch.continueRequest",{requestId:T.requestId,headers:$})):z=new a(x.session,T.requestId));const J=l.requestId===l.loaderId&&l.type==="Document"?l.loaderId:void 0,le=new v({session:c.session,context:(this._page||this._serviceWorker).browserContext,frame:p||null,serviceWorker:this._serviceWorker||null,documentId:J,route:z,requestWillBeSentEvent:l,requestPausedEvent:T,redirectedFrom:b,headersOverride:$||null});this._requestIdToRequest.set(l.requestId,le),z&&le.request.setRawRequestHeaders((0,w.headersObjectToArray)(T.request.headers,`
`)),(((j=this._page)==null?void 0:j.frameManager)||this._serviceWorker).requestStarted(le.request,z||void 0)}_createResponse(c,l,x){var z,$,q,J,le;const T=async()=>{var I;const _e=Object.entries(l.headers).find(D=>D[0].toLowerCase()==="content-length"),ge=_e?+_e[1]:void 0,ne=c.session,S=await ne.send("Network.getResponseBody",{requestId:c._requestId});if(S.body||!ge)return Buffer.from(S.body,S.base64Encoded?"base64":"utf8");if((I=c._route)!=null&&I._fulfilled)return Buffer.from("");const j=await ne.send("Network.loadNetworkResource",{url:c.request.url(),frameId:this._serviceWorker?void 0:c.request.frame()._id,options:{disableCache:!1,includeCredentials:!0}}),y=[];for(;j.resource.stream;){const D=await ne.send("IO.read",{handle:j.resource.stream});if(y.push(Buffer.from(D.data,D.base64Encoded?"base64":"utf-8")),D.eof){await ne.send("IO.close",{handle:j.resource.stream});break}}return Buffer.concat(y)},b=l.timing;let p;b&&!this._responseExtraInfoTracker.servedFromCache(c._requestId)?p={startTime:(b.requestTime-c._timestamp+c._wallTime)*1e3,domainLookupStart:b.dnsStart,domainLookupEnd:b.dnsEnd,connectStart:b.connectStart,secureConnectionStart:b.sslStart,connectEnd:b.connectEnd,requestStart:b.sendStart,responseStart:b.receiveHeadersEnd}:p={startTime:c._wallTime*1e3,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1};const O=new _.Response(c.request,l.status,l.statusText,(0,w.headersObjectToArray)(l.headers),p,T,!!l.fromServiceWorker,l.protocol);return l!=null&&l.remoteIPAddress&&typeof(l==null?void 0:l.remotePort)=="number"?O._serverAddrFinished({ipAddress:l.remoteIPAddress,port:l.remotePort}):O._serverAddrFinished(),O._securityDetailsFinished({protocol:(z=l==null?void 0:l.securityDetails)==null?void 0:z.protocol,subjectName:($=l==null?void 0:l.securityDetails)==null?void 0:$.subjectName,issuer:(q=l==null?void 0:l.securityDetails)==null?void 0:q.issuer,validFrom:(J=l==null?void 0:l.securityDetails)==null?void 0:J.validFrom,validTo:(le=l==null?void 0:l.securityDetails)==null?void 0:le.validTo}),this._responseExtraInfoTracker.processResponse(c._requestId,O,x),O}_deleteRequest(c){this._requestIdToRequest.delete(c._requestId),c._interceptionId&&this._attemptedAuthentications.delete(c._interceptionId)}_handleRequestRedirect(c,l,x,T){var p,O;const b=this._createResponse(c,l,T);b.setTransferSize(null),b.setEncodedBodySize(null),b._requestFinished((x-c._timestamp)*1e3),this._deleteRequest(c),(((p=this._page)==null?void 0:p.frameManager)||this._serviceWorker).requestReceivedResponse(b),(((O=this._page)==null?void 0:O.frameManager)||this._serviceWorker).reportRequestFinished(c.request,b)}_onResponseReceivedExtraInfo(c){this._responseExtraInfoTracker.responseReceivedExtraInfo(c)}_onResponseReceived(c,l){var b;let x=this._requestIdToRequest.get(l.requestId);if(!x&&l.response.fromServiceWorker){const p=this._requestIdToRequestWillBeSentEvent.get(l.requestId);p&&(this._requestIdToRequestWillBeSentEvent.delete(l.requestId),this._onRequest(c,p.event,void 0,void 0),x=this._requestIdToRequest.get(l.requestId))}if(!x)return;const T=this._createResponse(x,l.response,l.hasExtraInfo);(((b=this._page)==null?void 0:b.frameManager)||this._serviceWorker).requestReceivedResponse(T)}_onLoadingFinished(c,l){var b;this._responseExtraInfoTracker.loadingFinished(l);const x=this._requestIdToRequest.get(l.requestId);if(!x)return;this._maybeUpdateRequestSession(c,x);const T=x.request._existingResponse();T&&(T.setTransferSize(l.encodedDataLength),T.responseHeadersSize().then(p=>T.setEncodedBodySize(l.encodedDataLength-p)),T._requestFinished(u.helper.secondsToRoundishMillis(l.timestamp-x._timestamp))),this._deleteRequest(x),(((b=this._page)==null?void 0:b.frameManager)||this._serviceWorker).reportRequestFinished(x.request,T)}_onLoadingFailed(c,l){var b;this._responseExtraInfoTracker.loadingFailed(l);let x=this._requestIdToRequest.get(l.requestId);if(!x){const p=this._requestIdToRequestWillBeSentEvent.get(l.requestId);p&&(this._requestIdToRequestWillBeSentEvent.delete(l.requestId),this._onRequest(c,p.event,void 0,void 0),x=this._requestIdToRequest.get(l.requestId))}if(!x)return;this._maybeUpdateRequestSession(c,x);const T=x.request._existingResponse();T?(T.setTransferSize(null),T.setEncodedBodySize(null),T._requestFinished(u.helper.secondsToRoundishMillis(l.timestamp-x._timestamp))):x.request.setRawRequestHeaders(null),this._deleteRequest(x),x.request._setFailureText(l.errorText||l.blockedReason||""),(((b=this._page)==null?void 0:b.frameManager)||this._serviceWorker).requestFailed(x.request,!!l.canceled)}_maybeUpdateRequestSession(c,l){l.session!==c.session&&!c.isMain&&(l._documentId===l._requestId||c.workerFrame)&&(l.session=c.session)}}class v{constructor(c){const{session:l,context:x,frame:T,documentId:b,route:p,requestWillBeSentEvent:O,requestPausedEvent:z,redirectedFrom:$,serviceWorker:q,headersOverride:J}=c;this.session=l,this._timestamp=O.timestamp,this._wallTime=O.wallTime,this._requestId=O.requestId,this._interceptionId=z&&z.requestId,this._documentId=b,this._route=p,this._originalRequestRoute=p??($==null?void 0:$._originalRequestRoute);const{headers:le,method:_e,url:ge,postDataEntries:ne=null}=z?z.request:O.request,S=(O.type||"").toLowerCase();let j=null;const y=ne==null?void 0:ne.filter(I=>I.bytes);y&&y.length&&(j=Buffer.concat(y.map(I=>Buffer.from(I.bytes,"base64")))),this.request=new _.Request(x,T,q,($==null?void 0:$.request)||null,b,ge,S,_e,j,J||(0,w.headersObjectToArray)(le))}}class a{constructor(c,l){this._fulfilled=!1,this._session=c,this._interceptionId=l}async continue(c){this._alreadyContinuedParams={requestId:this._interceptionId,url:c.url,headers:c.headers,method:c.method,postData:c.postData?c.postData.toString("base64"):void 0},await s(async()=>{await this._session.send("Fetch.continueRequest",this._alreadyContinuedParams)})}async fulfill(c){this._fulfilled=!0;const l=c.isBase64?c.body:Buffer.from(c.body).toString("base64"),x=n(c.headers);await s(async()=>{await this._session.send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:c.status,responsePhrase:_.statusText(c.status),responseHeaders:x,body:l})})}async abort(c="failed"){const l=o[c];(0,w.assert)(l,"Unknown error code: "+c),await s(async()=>{await this._session.send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:l})})}}async function s(m){try{return await m()}catch(c){if((0,f.isProtocolError)(c)&&c.message.includes("Invalid http status code or phrase")||(0,f.isProtocolError)(c)&&c.message.includes("Unsafe header"))throw c}}function n(m){const c=m.findIndex(({name:b})=>b.toLowerCase()==="set-cookie");if(c===-1)return m;const l=m[c],x=l.value.split(`
`);if(x.length===1)return m;const T=m.slice();return T.splice(c,1,...x.map(b=>({name:l.name,value:b}))),T}const o={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};class h{constructor(){this._requests=new Map}requestWillBeSentExtraInfo(c){const l=this._getOrCreateEntry(c.requestId);l.requestWillBeSentExtraInfo.push(c),this._patchHeaders(l,l.requestWillBeSentExtraInfo.length-1),this._checkFinished(l)}requestServedFromCache(c){const l=this._getOrCreateEntry(c.requestId);l.servedFromCache=!0}servedFromCache(c){const l=this._requests.get(c);return!!(l!=null&&l.servedFromCache)}responseReceivedExtraInfo(c){const l=this._getOrCreateEntry(c.requestId);l.responseReceivedExtraInfo.push(c),this._patchHeaders(l,l.responseReceivedExtraInfo.length-1),this._checkFinished(l)}processResponse(c,l,x){let T=this._requests.get(c);if(!x||T!=null&&T.servedFromCache){l.request().setRawRequestHeaders(null),l.setResponseHeadersSize(null),l.setRawResponseHeaders(null);return}T=this._getOrCreateEntry(c),T.responses.push(l),this._patchHeaders(T,T.responses.length-1)}loadingFinished(c){const l=this._requests.get(c.requestId);l&&(l.loadingFinished=c,this._checkFinished(l))}loadingFailed(c){const l=this._requests.get(c.requestId);l&&(l.loadingFailed=c,this._checkFinished(l))}_getOrCreateEntry(c){let l=this._requests.get(c);return l||(l={requestId:c,requestWillBeSentExtraInfo:[],responseReceivedExtraInfo:[],responses:[]},this._requests.set(c,l)),l}_patchHeaders(c,l){var p;const x=c.responses[l],T=c.requestWillBeSentExtraInfo[l];x&&T&&(x.request().setRawRequestHeaders((0,w.headersObjectToArray)(T.headers,`
`)),c.requestWillBeSentExtraInfo[l]=void 0);const b=c.responseReceivedExtraInfo[l];x&&b&&(x.setResponseHeadersSize(((p=b.headersText)==null?void 0:p.length)||0),x.setRawResponseHeaders((0,w.headersObjectToArray)(b.headers,`
`)),c.responseReceivedExtraInfo[l]=void 0)}_checkFinished(c){if(!(!c.loadingFinished&&!c.loadingFailed)&&c.responses.length<=c.responseReceivedExtraInfo.length){this._stopTracking(c.requestId);return}}_stopTracking(c){this._requests.delete(c)}}return Hu}var Uu,p0;function qO(){if(p0)return Uu;p0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{CRPDF:()=>u}),Uu=te(P);var e=Yi(),U=nr();const C={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},w={px:1,in:96,cm:37.8,mm:3.78};function g(_){if(_===void 0)return;let f=_.substring(_.length-2).toLowerCase(),d="";w.hasOwnProperty(f)?d=_.substring(0,_.length-2):(f="px",d=_);const v=Number(d);return(0,U.assert)(!isNaN(v),"Failed to parse parameter value: "+_),v*w[f]/96}class u{constructor(f){this._client=f}async generate(f){const{scale:d=1,displayHeaderFooter:v=!1,headerTemplate:a="",footerTemplate:s="",printBackground:n=!1,landscape:o=!1,pageRanges:h="",preferCSSPageSize:m=!1,margin:c={},tagged:l=!1,outline:x=!1}=f;let T=8.5,b=11;if(f.format){const _e=C[f.format.toLowerCase()];(0,U.assert)(_e,"Unknown paper format: "+f.format),T=_e.width,b=_e.height}else T=g(f.width)||T,b=g(f.height)||b;const p=g(c.top)||0,O=g(c.left)||0,z=g(c.bottom)||0,$=g(c.right)||0,q=x,J=l,le=await this._client.send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:o,displayHeaderFooter:v,headerTemplate:a,footerTemplate:s,printBackground:n,scale:d,paperWidth:T,paperHeight:b,marginTop:p,marginBottom:z,marginLeft:O,marginRight:$,pageRanges:h,preferCSSPageSize:m,generateTaggedPDF:J,generateDocumentOutline:q});return await(0,e.readProtocolStream)(this._client,le.stream)}}return Uu}var qu,f0;function $O(){if(f0)return qu;f0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{platformToFontFamilies:()=>e}),qu=te(P);const e={linux:{fontFamilies:{standard:"Times New Roman",fixed:"Monospace",serif:"Times New Roman",sansSerif:"Arial",cursive:"Comic Sans MS",fantasy:"Impact"}},mac:{fontFamilies:{standard:"Times",fixed:"Courier",serif:"Times",sansSerif:"Helvetica",cursive:"Apple Chancery",fantasy:"Papyrus"},forScripts:[{script:"jpan",fontFamilies:{standard:"Hiragino Kaku Gothic ProN",fixed:"Osaka-Mono",serif:"Hiragino Mincho ProN",sansSerif:"Hiragino Kaku Gothic ProN"}},{script:"hang",fontFamilies:{standard:"Apple SD Gothic Neo",serif:"AppleMyungjo",sansSerif:"Apple SD Gothic Neo"}},{script:"hans",fontFamilies:{standard:",PingFang SC,STHeiti",serif:"Songti SC",sansSerif:",PingFang SC,STHeiti",cursive:"Kaiti SC"}},{script:"hant",fontFamilies:{standard:",PingFang TC,Heiti TC",serif:"Songti TC",sansSerif:",PingFang TC,Heiti TC",cursive:"Kaiti TC"}}]},win:{fontFamilies:{standard:"Times New Roman",fixed:"Consolas",serif:"Times New Roman",sansSerif:"Arial",cursive:"Comic Sans MS",fantasy:"Impact"},forScripts:[{script:"cyrl",fontFamilies:{standard:"Times New Roman",fixed:"Courier New",serif:"Times New Roman",sansSerif:"Arial"}},{script:"arab",fontFamilies:{fixed:"Courier New",sansSerif:"Segoe UI"}},{script:"grek",fontFamilies:{standard:"Times New Roman",fixed:"Courier New",serif:"Times New Roman",sansSerif:"Arial"}},{script:"jpan",fontFamilies:{standard:",Meiryo,Yu Gothic",fixed:"MS Gothic",serif:",Yu Mincho,MS PMincho",sansSerif:",Meiryo,Yu Gothic"}},{script:"hang",fontFamilies:{standard:"Malgun Gothic",fixed:"Gulimche",serif:"Batang",sansSerif:"Malgun Gothic",cursive:"Gungsuh"}},{script:"hans",fontFamilies:{standard:"Microsoft YaHei",fixed:"NSimsun",serif:"Simsun",sansSerif:"Microsoft YaHei",cursive:"KaiTi"}},{script:"hant",fontFamilies:{standard:"Microsoft JhengHei",fixed:"MingLiU",serif:"PMingLiU",sansSerif:"Microsoft JhengHei",cursive:"DFKai-SB"}}]}};return qu}var $u,m0;function WO(){if(m0)return $u;m0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{VideoRecorder:()=>_}),$u=te(P);var e=nr(),U=Tr(),C=Kr(),w=Gi(),g=bn();const u=25;class _{constructor(d,v,a){this._process=null,this._gracefullyClose=null,this._lastWritePromise=Promise.resolve(),this._lastFrameTimestamp=0,this._lastFrameBuffer=null,this._lastWriteTimestamp=0,this._frameQueue=[],this._isStopped=!1,this._progress=a,this._ffmpegPath=v,d.on(C.Page.Events.ScreencastFrame,s=>this.writeFrame(s.buffer,s.frameSwapWallTime/1e3))}static async launch(d,v,a){if(!a.outputFile.endsWith(".webm"))throw new Error("File must have .webm extension");const s=new g.ProgressController((0,U.serverSideCallMetadata)(),d);return s.setLogName("browser"),await s.run(async n=>{const o=new _(d,v,n);return n.cleanupWhenAborted(()=>o.stop()),await o._launch(a),o})}async _launch(d){const v=d.width,a=d.height,s=`-loglevel error -f image2pipe -avioflags direct -fpsprobesize 0 -probesize 32 -analyzeduration 0 -c:v mjpeg -i pipe:0 -y -an -r ${u} -c:v vp8 -qmin 0 -qmax 50 -crf 8 -deadline realtime -speed 8 -b:v 1M -threads 1 -vf pad=${v}:${a}:0:0:gray,crop=${v}:${a}:0:0`.split(" ");s.push(d.outputFile);const n=this._progress,{launchedProcess:o,gracefullyClose:h}=await(0,w.launchProcess)({command:this._ffmpegPath,args:s,stdio:"stdin",log:m=>n.log(m),tempDirectories:[],attemptToGracefullyClose:async()=>{n.log("Closing stdin..."),o.stdin.end()},onExit:(m,c)=>{n.log(`ffmpeg onkill exitCode=${m} signal=${c}`)}});o.stdin.on("finish",()=>{n.log("ffmpeg finished input.")}),o.stdin.on("error",()=>{n.log("ffmpeg error.")}),this._process=o,this._gracefullyClose=h}writeFrame(d,v){if((0,e.assert)(this._process),!this._isStopped){if(this._lastFrameBuffer){const a=v-this._lastFrameTimestamp,s=Math.max(1,Math.round(u*a));for(let n=0;n<s;++n)this._frameQueue.push(this._lastFrameBuffer);this._lastWritePromise=this._lastWritePromise.then(()=>this._sendFrames())}this._lastFrameBuffer=d,this._lastFrameTimestamp=v,this._lastWriteTimestamp=(0,e.monotonicTime)()}}async _sendFrames(){for(;this._frameQueue.length;)await this._sendFrame(this._frameQueue.shift())}async _sendFrame(d){return new Promise(v=>this._process.stdin.write(d,v)).then(v=>{v&&this._progress.log(`ffmpeg failed to write: ${String(v)}`)})}async stop(){this._isStopped||(this.writeFrame(Buffer.from([]),this._lastFrameTimestamp+((0,e.monotonicTime)()-this._lastWriteTimestamp)/1e3),this._isStopped=!0,await this._lastWritePromise,await this._gracefullyClose())}}return $u}var Wu,g0;function zO(){if(g0)return Wu;g0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(I,D)=>{for(var ie in D)r(I,ie,{get:D[ie],enumerable:!0})},P=(I,D,ie,he)=>{if(D&&typeof D=="object"||typeof D=="function")for(let me of E(D))!V.call(I,me)&&me!==ie&&r(I,me,{get:()=>D[me],enumerable:!(he=i(D,me))||he.enumerable});return I},e=(I,D,ie)=>(ie=I!=null?t(R(I)):{},P(!I||!I.__esModule?r(ie,"default",{value:I,enumerable:!0}):ie,I)),U=I=>P(r({},"__esModule",{value:!0}),I),C={};te(C,{CRPage:()=>ge}),Wu=U(C);var w=e(Je),g=Gr(),u=tn(),_=qr(),f=pn(),d=e(Ks()),v=e(hi()),a=e(hs()),s=hn(),n=e(fn()),o=Kr(),h=ui(),m=BO(),c=Xs(),l=jO(),x=HO(),T=ff(),b=UO(),p=cy(),O=qO(),z=Yi(),$=$O(),q=WO(),J=Ir(),le=Pn(),_e=Dn();class ge{constructor(D,ie,he,me,ye){this._sessions=new Map,this._nextWindowOpenPopupFeatures=[],this._targetId=ie,this._opener=me,this._isBackgroundPage=ye.isBackgroundPage;const Se=new x.DragManager(this);if(this.rawKeyboard=new b.RawKeyboardImpl(D,he._browser._platform()==="mac",Se),this.rawMouse=new b.RawMouseImpl(this,D,Se),this.rawTouchscreen=new b.RawTouchscreenImpl(D),this._pdf=new O.CRPDF(D),this._coverage=new l.CRCoverage(D),this._browserContext=he,this._page=new o.Page(this,he),this.utilityWorldName=`__playwright_utility_world_${this._page.guid}`,this._networkManager=new p.CRNetworkManager(this._page,null),this.updateOffline(),this.updateExtraHTTPHeaders(),this.updateHttpCredentials(),this.updateRequestInterception(),this._mainFrameSession=new ne(this,D,ie,null),this._sessions.set(ie,this._mainFrameSession),me&&!he._options.noDefaultViewport){const Pe=me._nextWindowOpenPopupFeatures.shift()||[],Ne=s.helper.getViewportSizeFromWindowFeatures(Pe);Ne&&this._page.setEmulatedSizeFromWindowOpen({viewport:Ne,screen:Ne})}const Oe=this._isBackgroundPage?c.CRBrowserContext.CREvents.BackgroundPage:J.BrowserContext.Events.Page;this._mainFrameSession._initialize(ye.hasUIWindow).then(()=>{var Pe;return this._page.reportAsNew((Pe=this._opener)==null?void 0:Pe._page,void 0,Oe)},Pe=>{var Ne;return this._page.reportAsNew((Ne=this._opener)==null?void 0:Ne._page,Pe,Oe)})}static mainFrameSession(D){return D.delegate._mainFrameSession}async _forAllFrameSessions(D){const ie=Array.from(this._sessions.values());await Promise.all(ie.map(he=>he._isMainFrame()?D(he):D(he).catch(me=>{if(!(0,_e.isSessionClosedError)(me))throw me})))}_sessionForFrame(D){for(;!this._sessions.has(D._id);){const ie=D.parentFrame();if(!ie)throw new Error("Frame has been detached.");D=ie}return this._sessions.get(D._id)}_sessionForHandle(D){const ie=D._context.frame;return this._sessionForFrame(ie)}willBeginDownload(){this._mainFrameSession._willBeginDownload()}didClose(){for(const D of this._sessions.values())D.dispose();this._page._didClose()}async navigateFrame(D,ie,he){return this._sessionForFrame(D)._navigate(D,ie,he)}async updateExtraHTTPHeaders(){const D=n.mergeHeaders([this._browserContext._options.extraHTTPHeaders,this._page.extraHTTPHeaders()]);await this._networkManager.setExtraHTTPHeaders(D)}async updateGeolocation(){await this._forAllFrameSessions(D=>D._updateGeolocation(!1))}async updateOffline(){await this._networkManager.setOffline(!!this._browserContext._options.offline)}async updateHttpCredentials(){await this._networkManager.authenticate(this._browserContext._options.httpCredentials||null)}async updateEmulatedViewportSize(D){await this._mainFrameSession._updateViewport(D)}async bringToFront(){await this._mainFrameSession._client.send("Page.bringToFront")}async updateEmulateMedia(){await this._forAllFrameSessions(D=>D._updateEmulateMedia())}async updateUserAgent(){await this._forAllFrameSessions(D=>D._updateUserAgent())}async updateRequestInterception(){await this._networkManager.setRequestInterception(this._page.needsRequestInterception())}async updateFileChooserInterception(){await this._forAllFrameSessions(D=>D._updateFileChooserInterception(!1))}async reload(){await this._mainFrameSession._client.send("Page.reload")}async _go(D){const ie=await this._mainFrameSession._client.send("Page.getNavigationHistory"),he=ie.entries[ie.currentIndex+D];return he?(await this._mainFrameSession._client.send("Page.navigateToHistoryEntry",{entryId:he.id}),!0):!1}goBack(){return this._go(-1)}goForward(){return this._go(1)}async requestGC(){await this._mainFrameSession._client.send("HeapProfiler.collectGarbage")}async addInitScript(D,ie="main"){await this._forAllFrameSessions(he=>he._evaluateOnNewDocument(D,ie))}async exposePlaywrightBinding(){await this._forAllFrameSessions(D=>D.exposePlaywrightBinding())}async removeInitScripts(D){await this._forAllFrameSessions(ie=>ie._removeEvaluatesOnNewDocument(D))}async closePage(D){D?await this._mainFrameSession._client.send("Page.close"):await this._browserContext._browser._closePage(this)}async setBackgroundColor(D){await this._mainFrameSession._client.send("Emulation.setDefaultBackgroundColorOverride",{color:D})}async takeScreenshot(D,ie,he,me,ye,Se,Oe){const{visualViewport:Pe}=await D.race(this._mainFrameSession._client.send("Page.getLayoutMetrics"));he||(he={x:Pe.pageX+me.x,y:Pe.pageY+me.y,...s.helper.enclosingIntSize({width:me.width/Pe.scale,height:me.height/Pe.scale})});const Ne={...he,scale:me?Pe.scale:1};if(Oe==="css"){const qe=this._browserContext._options.deviceScaleFactor||1;Ne.scale/=qe}const Le=await D.race(this._mainFrameSession._client.send("Page.captureScreenshot",{format:ie,quality:ye,clip:Ne,captureBeyondViewport:!Se}));return Buffer.from(Le.data,"base64")}async getContentFrame(D){return this._sessionForHandle(D)._getContentFrame(D)}async getOwnerFrame(D){return this._sessionForHandle(D)._getOwnerFrame(D)}async getBoundingBox(D){return this._sessionForHandle(D)._getBoundingBox(D)}async scrollRectIntoViewIfNeeded(D,ie){return this._sessionForHandle(D)._scrollRectIntoViewIfNeeded(D,ie)}async setScreencastOptions(D){D?await this._mainFrameSession._startScreencast(this,{format:"jpeg",quality:D.quality,maxWidth:D.width,maxHeight:D.height}):await this._mainFrameSession._stopScreencast(this)}rafCountForStablePosition(){return 1}async getContentQuads(D){return this._sessionForHandle(D)._getContentQuads(D)}async setInputFilePaths(D,ie){const he=await D.ownerFrame();if(!he)throw new Error("Cannot set input files to detached input element");await this._sessionForFrame(he)._client.send("DOM.setFileInputFiles",{objectId:D._objectId,files:ie})}async adoptElementHandle(D,ie){return this._sessionForHandle(D)._adoptElementHandle(D,ie)}async getAccessibilityTree(D){return(0,m.getAccessibilityTree)(this._mainFrameSession._client,D)}async inputActionEpilogue(){await this._mainFrameSession._client.send("Page.enable").catch(D=>{})}async resetForReuse(D){await this.rawMouse.move(D,-1,-1,"none",new Set,new Set,!0)}async pdf(D){return this._pdf.generate(D)}coverage(){return this._coverage}async getFrameElement(D){let ie=D.parentFrame();if(!ie)throw new Error("Frame has been detached.");const he=this._sessionForFrame(ie),{backendNodeId:me}=await he._client.send("DOM.getFrameOwner",{frameId:D._id}).catch(ye=>{throw ye instanceof Error&&ye.message.includes("Frame with the given id was not found.")&&(0,f.rewriteErrorMessage)(ye,"Frame has been detached."),ye});if(ie=D.parentFrame(),!ie)throw new Error("Frame has been detached.");return he._adoptBackendNodeId(me,await ie._mainContext())}shouldToggleStyleSheetToSyncAnimations(){return!1}}class ne{constructor(D,ie,he,me){this._childSessions=new Set,this._contextIdToContext=new Map,this._eventListeners=[],this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=ye=>{},this._swappedIn=!1,this._videoRecorder=null,this._screencastId=null,this._screencastClients=new Set,this._workerSessions=new Map,this._initScriptIds=new Map,this._client=ie,this._crPage=D,this._page=D._page,this._targetId=he,this._parentSession=me,me&&me._childSessions.add(this),this._firstNonInitialNavigationCommittedPromise=new Promise((ye,Se)=>{this._firstNonInitialNavigationCommittedFulfill=ye,this._firstNonInitialNavigationCommittedReject=Se}),this._firstNonInitialNavigationCommittedPromise.catch(()=>{})}_isMainFrame(){return this._targetId===this._crPage._targetId}_addRendererListeners(){this._eventListeners.push(_.eventsHelper.addEventListener(this._client,"Log.entryAdded",D=>this._onLogEntryAdded(D)),_.eventsHelper.addEventListener(this._client,"Page.fileChooserOpened",D=>this._onFileChooserOpened(D)),_.eventsHelper.addEventListener(this._client,"Page.frameAttached",D=>this._onFrameAttached(D.frameId,D.parentFrameId)),_.eventsHelper.addEventListener(this._client,"Page.frameDetached",D=>this._onFrameDetached(D.frameId,D.reason)),_.eventsHelper.addEventListener(this._client,"Page.frameNavigated",D=>this._onFrameNavigated(D.frame,!1)),_.eventsHelper.addEventListener(this._client,"Page.frameRequestedNavigation",D=>this._onFrameRequestedNavigation(D)),_.eventsHelper.addEventListener(this._client,"Page.javascriptDialogOpening",D=>this._onDialog(D)),_.eventsHelper.addEventListener(this._client,"Page.navigatedWithinDocument",D=>this._onFrameNavigatedWithinDocument(D.frameId,D.url)),_.eventsHelper.addEventListener(this._client,"Runtime.bindingCalled",D=>this._onBindingCalled(D)),_.eventsHelper.addEventListener(this._client,"Runtime.consoleAPICalled",D=>this._onConsoleAPI(D)),_.eventsHelper.addEventListener(this._client,"Runtime.exceptionThrown",D=>this._handleException(D.exceptionDetails)),_.eventsHelper.addEventListener(this._client,"Runtime.executionContextCreated",D=>this._onExecutionContextCreated(D.context)),_.eventsHelper.addEventListener(this._client,"Runtime.executionContextDestroyed",D=>this._onExecutionContextDestroyed(D.executionContextId)),_.eventsHelper.addEventListener(this._client,"Runtime.executionContextsCleared",D=>this._onExecutionContextsCleared()),_.eventsHelper.addEventListener(this._client,"Target.attachedToTarget",D=>this._onAttachedToTarget(D)),_.eventsHelper.addEventListener(this._client,"Target.detachedFromTarget",D=>this._onDetachedFromTarget(D)))}_addBrowserListeners(){this._eventListeners.push(_.eventsHelper.addEventListener(this._client,"Inspector.targetCrashed",D=>this._onTargetCrashed()),_.eventsHelper.addEventListener(this._client,"Page.screencastFrame",D=>this._onScreencastFrame(D)),_.eventsHelper.addEventListener(this._client,"Page.windowOpen",D=>this._onWindowOpen(D)))}async _initialize(D){const ie=this._page.browserContext.isSettingStorageState();if(!ie&&D&&!this._crPage._browserContext._browser.isClank()&&!this._crPage._browserContext._options.noDefaultViewport){const{windowId:Se}=await this._client.send("Browser.getWindowForTarget");this._windowId=Se}let he;if(!ie&&this._isMainFrame()&&this._crPage._browserContext._options.recordVideo&&D){const Se=(0,u.createGuid)(),Oe=w.default.join(this._crPage._browserContext._options.recordVideo.dir,Se+".webm");he={...this._crPage._browserContext._options.recordVideo.size,outputFile:Oe},await this._crPage._browserContext._ensureVideosPath(),await this._createVideoRecorder(Se,he),this._crPage._page.waitForInitializedOrError().then(Pe=>{Pe instanceof Error&&this._stopVideoRecording().catch(()=>{})})}let me;this._isMainFrame()||this._addRendererListeners(),this._addBrowserListeners();const ye=[this._client.send("Page.enable"),this._client.send("Page.getFrameTree").then(({frameTree:Se})=>{this._isMainFrame()&&(this._handleFrameTree(Se),this._addRendererListeners());const Oe=this._isMainFrame()?this._page.frames():[this._page.frameManager.frame(this._targetId)];for(const Ne of Oe)this._client._sendMayFail("Page.createIsolatedWorld",{frameId:Ne._id,grantUniveralAccess:!0,worldName:this._crPage.utilityWorldName});this._isMainFrame()&&this._page.mainFrame().url()===":"?me.catch(Ne=>{}).then(()=>{this._eventListeners.push(_.eventsHelper.addEventListener(this._client,"Page.lifecycleEvent",Ne=>this._onLifecycleEvent(Ne)))}):(this._firstNonInitialNavigationCommittedFulfill(),this._eventListeners.push(_.eventsHelper.addEventListener(this._client,"Page.lifecycleEvent",Ne=>this._onLifecycleEvent(Ne))))}),this._client.send("Log.enable",{}),me=this._client.send("Page.setLifecycleEventsEnabled",{enabled:!0}),this._client.send("Runtime.enable",{}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:"",worldName:this._crPage.utilityWorldName}),this._crPage._networkManager.addSession(this._client,void 0,this._isMainFrame()),this._client.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0})];if(!ie){this._crPage._browserContext.needsPlaywrightBinding()&&ye.push(this.exposePlaywrightBinding()),this._isMainFrame()&&ye.push(this._client.send("Emulation.setFocusEmulationEnabled",{enabled:!0}));const Se=this._crPage._browserContext._options;Se.bypassCSP&&ye.push(this._client.send("Page.setBypassCSP",{enabled:!0})),(Se.ignoreHTTPSErrors||Se.internalIgnoreHTTPSErrors)&&ye.push(this._client.send("Security.setIgnoreCertificateErrors",{ignore:!0})),this._isMainFrame()&&ye.push(this._updateViewport()),Se.hasTouch&&ye.push(this._client.send("Emulation.setTouchEmulationEnabled",{enabled:!0})),Se.javaScriptEnabled===!1&&ye.push(this._client.send("Emulation.setScriptExecutionDisabled",{value:!0})),(Se.userAgent||Se.locale)&&ye.push(this._updateUserAgent()),Se.locale&&ye.push(S(this._client,Se.locale)),Se.timezoneId&&ye.push(j(this._client,Se.timezoneId)),this._crPage._browserContext._browser.options.headful||ye.push(this._setDefaultFontFamilies(this._client)),ye.push(this._updateGeolocation(!0)),ye.push(this._updateEmulateMedia()),ye.push(this._updateFileChooserInterception(!0));for(const Oe of this._crPage._page.allInitScripts())ye.push(this._evaluateOnNewDocument(Oe,"main",!0));he&&ye.push(this._startVideoRecording(he))}ye.push(this._client.send("Runtime.runIfWaitingForDebugger")),ye.push(this._firstNonInitialNavigationCommittedPromise),await Promise.all(ye)}dispose(){this._firstNonInitialNavigationCommittedReject(new le.TargetClosedError);for(const D of this._childSessions)D.dispose();this._parentSession&&this._parentSession._childSessions.delete(this),_.eventsHelper.removeEventListeners(this._eventListeners),this._crPage._networkManager.removeSession(this._client),this._crPage._sessions.delete(this._targetId),this._client.dispose()}async _navigate(D,ie,he){const me=await this._client.send("Page.navigate",{url:ie,referrer:he,frameId:D._id,referrerPolicy:"unsafeUrl"});if(me.errorText)throw new a.NavigationAbortedError(me.loaderId,`${me.errorText} at ${ie}`);return{newDocumentId:me.loaderId}}_onLifecycleEvent(D){this._eventBelongsToStaleFrame(D.frameId)||(D.name==="load"?this._page.frameManager.frameLifecycleEvent(D.frameId,"load"):D.name==="DOMContentLoaded"&&this._page.frameManager.frameLifecycleEvent(D.frameId,"domcontentloaded"))}_handleFrameTree(D){if(this._onFrameAttached(D.frame.id,D.frame.parentId||null),this._onFrameNavigated(D.frame,!0),!!D.childFrames)for(const ie of D.childFrames)this._handleFrameTree(ie)}_eventBelongsToStaleFrame(D){const ie=this._page.frameManager.frame(D);if(!ie)return!0;const he=this._crPage._sessionForFrame(ie);return he&&he!==this&&!he._swappedIn}_onFrameAttached(D,ie){const he=this._crPage._sessions.get(D);if(he&&D!==this._targetId){he._swappedIn=!0;const me=this._page.frameManager.frame(D);me&&this._page.frameManager.removeChildFramesRecursively(me);return}ie&&!this._page.frameManager.frame(ie)||this._page.frameManager.frameAttached(D,ie)}_onFrameNavigated(D,ie){this._eventBelongsToStaleFrame(D.id)||(this._page.frameManager.frameCommittedNewDocumentNavigation(D.id,D.url+(D.urlFragment||""),D.name||"",D.loaderId,ie),ie||this._firstNonInitialNavigationCommittedFulfill())}_onFrameRequestedNavigation(D){this._eventBelongsToStaleFrame(D.frameId)||D.disposition==="currentTab"&&this._page.frameManager.frameRequestedNavigation(D.frameId)}_onFrameNavigatedWithinDocument(D,ie){this._eventBelongsToStaleFrame(D)||this._page.frameManager.frameCommittedSameDocumentNavigation(D,ie)}_onFrameDetached(D,ie){if(!this._crPage._sessions.has(D)){if(ie==="swap"){const he=this._page.frameManager.frame(D);he&&this._page.frameManager.removeChildFramesRecursively(he);return}this._page.frameManager.frameDetached(D)}}_onExecutionContextCreated(D){const ie=D.auxData?this._page.frameManager.frame(D.auxData.frameId):null;if(!ie||this._eventBelongsToStaleFrame(ie._id))return;const he=new T.CRExecutionContext(this._client,D);let me=null;D.auxData&&D.auxData.isDefault?me="main":D.name===this._crPage.utilityWorldName&&(me="utility");const ye=new v.FrameExecutionContext(he,ie,me);me&&ie._contextCreated(me,ye),this._contextIdToContext.set(D.id,ye)}_onExecutionContextDestroyed(D){const ie=this._contextIdToContext.get(D);ie&&(this._contextIdToContext.delete(D),ie.frame._contextDestroyed(ie))}_onExecutionContextsCleared(){for(const D of Array.from(this._contextIdToContext.keys()))this._onExecutionContextDestroyed(D)}_onAttachedToTarget(D){const ie=this._client.createChildSession(D.sessionId);if(D.targetInfo.type==="iframe"){const ye=D.targetInfo.targetId,Se=this._page.frameManager.frame(ye);if(!Se)return;this._page.frameManager.removeChildFramesRecursively(Se);for(const[Pe,Ne]of this._contextIdToContext)Ne.frame===Se&&this._onExecutionContextDestroyed(Pe);const Oe=new ne(this._crPage,ie,ye,this);this._crPage._sessions.set(ye,Oe),Oe._initialize(!1).catch(Pe=>Pe);return}if(D.targetInfo.type!=="worker"){ie.detach().catch(()=>{});return}const he=D.targetInfo.url,me=new o.Worker(this._page,he);this._page.addWorker(D.sessionId,me),this._workerSessions.set(D.sessionId,ie),ie.once("Runtime.executionContextCreated",async ye=>{me.createExecutionContext(new T.CRExecutionContext(ie,ye.context))}),ie._sendMayFail("Runtime.enable"),this._crPage._networkManager.addSession(ie,this._page.frameManager.frame(this._targetId)??void 0).catch(()=>{}),ie._sendMayFail("Runtime.runIfWaitingForDebugger"),ie._sendMayFail("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),ie.on("Target.attachedToTarget",ye=>this._onAttachedToTarget(ye)),ie.on("Target.detachedFromTarget",ye=>this._onDetachedFromTarget(ye)),ie.on("Runtime.consoleAPICalled",ye=>{const Se=ye.args.map(Oe=>(0,T.createHandle)(me.existingExecutionContext,Oe));this._page.addConsoleMessage(ye.type,Se,(0,z.toConsoleMessageLocation)(ye.stackTrace))}),ie.on("Runtime.exceptionThrown",ye=>this._page.emitOnContextOnceInitialized(J.BrowserContext.Events.PageError,(0,z.exceptionToError)(ye.exceptionDetails),this._page))}_onDetachedFromTarget(D){const ie=this._workerSessions.get(D.sessionId);if(ie){ie.dispose(),this._page.removeWorker(D.sessionId);return}const he=this._crPage._sessions.get(D.targetId);if(he){if(he._swappedIn){he.dispose();return}this._client.send("Page.enable").catch(me=>null).then(()=>{he._swappedIn||this._page.frameManager.frameDetached(D.targetId),he.dispose()})}}_onWindowOpen(D){this._crPage._nextWindowOpenPopupFeatures.push(D.windowFeatures)}async _onConsoleAPI(D){if(D.executionContextId===0)return;const ie=this._contextIdToContext.get(D.executionContextId);if(!ie)return;const he=D.args.map(me=>(0,T.createHandle)(ie,me));this._page.addConsoleMessage(D.type,he,(0,z.toConsoleMessageLocation)(D.stackTrace))}async _onBindingCalled(D){if(!(await this._crPage._page.waitForInitializedOrError()instanceof Error)){const he=this._contextIdToContext.get(D.executionContextId);he&&await this._page.onBindingCalled(D.payload,he)}}_onDialog(D){this._page.frameManager.frame(this._targetId)&&this._page.browserContext.dialogManager.dialogDidOpen(new d.Dialog(this._page,D.type,D.message,async(ie,he)=>{this._isMainFrame()&&D.type==="beforeunload"&&!ie&&this._page.frameManager.frameAbortedNavigation(this._page.mainFrame()._id,"navigation cancelled by beforeunload dialog"),await this._client.send("Page.handleJavaScriptDialog",{accept:ie,promptText:he})},D.defaultPrompt))}_handleException(D){this._page.emitOnContextOnceInitialized(J.BrowserContext.Events.PageError,(0,z.exceptionToError)(D),this._page)}async _onTargetCrashed(){this._client._markAsCrashed(),this._page._didCrash()}_onLogEntryAdded(D){const{level:ie,text:he,args:me,source:ye,url:Se,lineNumber:Oe}=D.entry;if(me&&me.map(Pe=>(0,z.releaseObject)(this._client,Pe.objectId)),ye!=="worker"){const Pe={url:Se||"",lineNumber:Oe||0,columnNumber:0};this._page.addConsoleMessage(ie,[],Pe,he)}}async _onFileChooserOpened(D){if(!D.backendNodeId)return;const ie=this._page.frameManager.frame(D.frameId);if(!ie)return;let he;try{const me=await ie._utilityContext();he=await this._adoptBackendNodeId(D.backendNodeId,me)}catch{return}await this._page._onFileChooserOpened(he)}_willBeginDownload(){this._crPage._page.initializedOrUndefined()||this._firstNonInitialNavigationCommittedReject(new Error("Starting new page download"))}_onScreencastFrame(D){this._page.throttleScreencastFrameAck(()=>{this._client.send("Page.screencastFrameAck",{sessionId:D.sessionId}).catch(()=>{})});const ie=Buffer.from(D.data,"base64");this._page.emit(o.Page.Events.ScreencastFrame,{buffer:ie,frameSwapWallTime:D.metadata.timestamp?D.metadata.timestamp*1e3:void 0,width:D.metadata.deviceWidth,height:D.metadata.deviceHeight})}async _createVideoRecorder(D,ie){(0,g.assert)(!this._screencastId);const he=h.registry.findExecutable("ffmpeg").executablePathOrDie(this._page.browserContext._browser.sdkLanguage());this._videoRecorder=await q.VideoRecorder.launch(this._crPage._page,he,ie),this._screencastId=D}async _startVideoRecording(D){const ie=this._screencastId;(0,g.assert)(ie),this._page.once(o.Page.Events.Close,()=>this._stopVideoRecording().catch(()=>{}));const he=new Promise(me=>this._client.once("Page.screencastFrame",me));await this._startScreencast(this._videoRecorder,{format:"jpeg",quality:90,maxWidth:D.width,maxHeight:D.height}),he.then(()=>{this._crPage._browserContext._browser._videoStarted(this._crPage._browserContext,ie,D.outputFile,this._crPage._page.waitForInitializedOrError())})}async _stopVideoRecording(){if(!this._screencastId)return;const D=this._screencastId;this._screencastId=null;const ie=this._videoRecorder;this._videoRecorder=null,await this._stopScreencast(ie),await ie.stop().catch(()=>{});const he=this._crPage._browserContext._browser._takeVideo(D);he==null||he.reportFinished()}async _startScreencast(D,ie={}){this._screencastClients.add(D),this._screencastClients.size===1&&await this._client.send("Page.startScreencast",ie)}async _stopScreencast(D){this._screencastClients.delete(D),this._screencastClients.size||await this._client._sendMayFail("Page.stopScreencast")}async _updateGeolocation(D){const ie=this._crPage._browserContext._options.geolocation;(!D||ie)&&await this._client.send("Emulation.setGeolocationOverride",ie||{})}async _updateViewport(D){if(this._crPage._browserContext._browser.isClank())return;(0,g.assert)(this._isMainFrame());const ie=this._crPage._browserContext._options,he=this._page.emulatedSize();if(!he)return;const me=he.viewport,ye=he.screen,Se=ye.width>ye.height,Oe={mobile:!!ie.isMobile,width:me.width,height:me.height,screenWidth:ye.width,screenHeight:ye.height,deviceScaleFactor:ie.deviceScaleFactor||1,screenOrientation:ie.isMobile?Se?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"}:{angle:0,type:"landscapePrimary"},dontSetVisibleSize:D};if(JSON.stringify(this._metricsOverride)===JSON.stringify(Oe))return;const Pe=[];if(!D&&this._windowId){let Ne={width:0,height:0};this._crPage._browserContext._browser.options.headful&&(Ne={width:24,height:88},process.platform==="win32"?Ne={width:16,height:88}:process.platform==="linux"?Ne={width:8,height:85}:process.platform==="darwin"&&(Ne={width:2,height:80}),this._crPage._browserContext.isPersistentContext()&&(Ne.height+=46)),Pe.push(this.setWindowBounds({width:me.width+Ne.width,height:me.height+Ne.height}))}Pe.push(this._client.send("Emulation.setDeviceMetricsOverride",Oe)),await Promise.all(Pe),this._metricsOverride=Oe}async windowBounds(){const{bounds:D}=await this._client.send("Browser.getWindowBounds",{windowId:this._windowId});return D}async setWindowBounds(D){return await this._client.send("Browser.setWindowBounds",{windowId:this._windowId,bounds:D})}async _updateEmulateMedia(){const D=this._page.emulatedMedia(),ie=D.media==="no-override"?"":D.media,he=D.colorScheme==="no-override"?"":D.colorScheme,me=D.reducedMotion==="no-override"?"":D.reducedMotion,ye=D.forcedColors==="no-override"?"":D.forcedColors,Se=D.contrast==="no-override"?"":D.contrast,Oe=[{name:"prefers-color-scheme",value:he},{name:"prefers-reduced-motion",value:me},{name:"forced-colors",value:ye},{name:"prefers-contrast",value:Se}];await this._client.send("Emulation.setEmulatedMedia",{media:ie,features:Oe})}async _updateUserAgent(){const D=this._crPage._browserContext._options;await this._client.send("Emulation.setUserAgentOverride",{userAgent:D.userAgent||"",acceptLanguage:D.locale,userAgentMetadata:y(D)})}async _setDefaultFontFamilies(D){const ie=$.platformToFontFamilies[this._crPage._browserContext._browser._platform()];await D.send("Page.setFontFamilies",ie)}async _updateFileChooserInterception(D){const ie=this._page.fileChooserIntercepted();D&&!ie||await this._client.send("Page.setInterceptFileChooserDialog",{enabled:ie}).catch(()=>{})}async _evaluateOnNewDocument(D,ie,he){const me=ie==="utility"?this._crPage.utilityWorldName:void 0,{identifier:ye}=await this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:D.source,worldName:me,runImmediately:he});this._initScriptIds.set(D,ye)}async _removeEvaluatesOnNewDocument(D){const ie=[];for(const he of D){const me=this._initScriptIds.get(he);me&&ie.push(me),this._initScriptIds.delete(he)}await Promise.all(ie.map(he=>this._client.send("Page.removeScriptToEvaluateOnNewDocument",{identifier:he}).catch(()=>{})))}async exposePlaywrightBinding(){await this._client.send("Runtime.addBinding",{name:o.PageBinding.kBindingName})}async _getContentFrame(D){const ie=await this._client.send("DOM.describeNode",{objectId:D._objectId});return!ie||typeof ie.node.frameId!="string"?null:this._page.frameManager.frame(ie.node.frameId)}async _getOwnerFrame(D){const ie=await D.evaluateHandle(ye=>{const Se=ye;return Se.documentElement&&Se.documentElement.ownerDocument===Se?Se.documentElement:ye.ownerDocument?ye.ownerDocument.documentElement:null});if(!ie||!ie._objectId)return null;const he=await this._client.send("DOM.describeNode",{objectId:ie._objectId}),me=he&&typeof he.node.frameId=="string"?he.node.frameId:null;return ie.dispose(),me}async _getBoundingBox(D){const ie=await this._client._sendMayFail("DOM.getBoxModel",{objectId:D._objectId});if(!ie)return null;const he=ie.model.border,me=Math.min(he[0],he[2],he[4],he[6]),ye=Math.min(he[1],he[3],he[5],he[7]),Se=Math.max(he[0],he[2],he[4],he[6])-me,Oe=Math.max(he[1],he[3],he[5],he[7])-ye,Pe=await this._framePosition();return Pe?{x:me+Pe.x,y:ye+Pe.y,width:Se,height:Oe}:null}async _framePosition(){const D=this._page.frameManager.frame(this._targetId);return D?D===this._page.mainFrame()?{x:0,y:0}:await(await D.frameElement()).boundingBox():null}async _scrollRectIntoViewIfNeeded(D,ie){return await this._client.send("DOM.scrollIntoViewIfNeeded",{objectId:D._objectId,rect:ie}).then(()=>"done").catch(he=>{if(he instanceof Error&&he.message.includes("Node does not have a layout object"))return"error:notvisible";if(he instanceof Error&&he.message.includes("Node is detached from document"))return"error:notconnected";throw he})}async _getContentQuads(D){const ie=await this._client._sendMayFail("DOM.getContentQuads",{objectId:D._objectId});if(!ie)return null;const he=await this._framePosition();return he?ie.quads.map(me=>[{x:me[0]+he.x,y:me[1]+he.y},{x:me[2]+he.x,y:me[3]+he.y},{x:me[4]+he.x,y:me[5]+he.y},{x:me[6]+he.x,y:me[7]+he.y}]):null}async _adoptElementHandle(D,ie){const he=await this._client.send("DOM.describeNode",{objectId:D._objectId});return this._adoptBackendNodeId(he.node.backendNodeId,ie)}async _adoptBackendNodeId(D,ie){const he=await this._client._sendMayFail("DOM.resolveNode",{backendNodeId:D,executionContextId:ie.delegate._contextId});if(!he||he.object.subtype==="null")throw new Error(v.kUnableToAdoptErrorMessage);return(0,T.createHandle)(ie,he.object).asElement()}}async function S(I,D){try{await I.send("Emulation.setLocaleOverride",{locale:D})}catch(ie){if(ie.message.includes("Another locale override is already in effect"))return;throw ie}}async function j(I,D){try{await I.send("Emulation.setTimezoneOverride",{timezoneId:D})}catch(ie){if(ie.message.includes("Timezone override is already in effect"))return;throw ie.message.includes("Invalid timezone")?new Error(`Invalid timezone ID: ${D}`):ie}}function y(I){const D=I.userAgent;if(!D)return;const ie={mobile:!!I.isMobile,model:"",architecture:"x86",platform:"Windows",platformVersion:""},he=D.match(/Android (\d+(\.\d+)?(\.\d+)?)/),me=D.match(/iPhone OS (\d+(_\d+)?)/),ye=D.match(/iPad; CPU OS (\d+(_\d+)?)/),Se=D.match(/Mac OS X (\d+(_\d+)?(_\d+)?)/),Oe=D.match(/Windows\D+(\d+(\.\d+)?(\.\d+)?)/);return he?(ie.platform="Android",ie.platformVersion=he[1],ie.architecture="arm"):me?(ie.platform="iOS",ie.platformVersion=me[1],ie.architecture="arm"):ye?(ie.platform="iOS",ie.platformVersion=ye[1],ie.architecture="arm"):Se?(ie.platform="macOS",ie.platformVersion=Se[1],D.includes("Intel")||(ie.architecture="arm")):Oe?(ie.platform="Windows",ie.platformVersion=Oe[1]):D.toLowerCase().includes("linux")&&(ie.platform="Linux"),D.includes("ARM")&&(ie.architecture="arm"),ie}return Wu}var zu,_0;function VO(){if(_0)return zu;_0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(a,s)=>{for(var n in s)i(a,n,{get:s[n],enumerable:!0})},e=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of R(s))!te.call(a,h)&&h!==n&&i(a,h,{get:()=>s[h],enumerable:!(o=E(s,h))||o.enumerable});return a},U=(a,s,n)=>(n=a!=null?r(V(a)):{},e(!a||!a.__esModule?i(n,"default",{value:a,enumerable:!0}):n,a)),C=a=>e(i({},"__esModule",{value:!0}),a),w={};P(w,{CRServiceWorker:()=>v}),zu=C(w);var g=Kr(),u=ff(),_=cy(),f=Ir(),d=U(fn());class v extends g.Worker{constructor(s,n,o){super(s,o),this._session=n,this.browserContext=s,t.PW_EXPERIMENTAL_SERVICE_WORKER_NETWORK_EVENTS&&(this._networkManager=new _.CRNetworkManager(null,this)),n.once("Runtime.executionContextCreated",h=>{this.createExecutionContext(new u.CRExecutionContext(n,h.context))}),this._networkManager&&this._isNetworkInspectionEnabled()&&(this.updateRequestInterception(),this.updateExtraHTTPHeaders(),this.updateHttpCredentials(),this.updateOffline(),this._networkManager.addSession(n,void 0,!0).catch(()=>{})),n.send("Runtime.enable",{}).catch(h=>{}),n.send("Runtime.runIfWaitingForDebugger").catch(h=>{}),n.on("Inspector.targetReloadedAfterCrash",()=>{n._sendMayFail("Runtime.runIfWaitingForDebugger",{})})}didClose(){var s;(s=this._networkManager)==null||s.removeSession(this._session),this._session.dispose(),super.didClose()}async updateOffline(){var s;this._isNetworkInspectionEnabled()&&await((s=this._networkManager)==null?void 0:s.setOffline(!!this.browserContext._options.offline).catch(()=>{}))}async updateHttpCredentials(){var s;this._isNetworkInspectionEnabled()&&await((s=this._networkManager)==null?void 0:s.authenticate(this.browserContext._options.httpCredentials||null).catch(()=>{}))}async updateExtraHTTPHeaders(){var s;this._isNetworkInspectionEnabled()&&await((s=this._networkManager)==null?void 0:s.setExtraHTTPHeaders(this.browserContext._options.extraHTTPHeaders||[]).catch(()=>{}))}async updateRequestInterception(){var s;this._isNetworkInspectionEnabled()&&await((s=this._networkManager)==null?void 0:s.setRequestInterception(this.needsRequestInterception()).catch(()=>{}))}needsRequestInterception(){return this._isNetworkInspectionEnabled()&&this.browserContext.requestInterceptors.length>0}reportRequestFinished(s,n){this.browserContext.emit(f.BrowserContext.Events.RequestFinished,{request:s,response:n})}requestFailed(s,n){this.browserContext.emit(f.BrowserContext.Events.RequestFailed,s)}requestReceivedResponse(s){this.browserContext.emit(f.BrowserContext.Events.Response,s)}requestStarted(s,n){this.browserContext.emit(f.BrowserContext.Events.Request,s),n&&new d.Route(s,n).handle(this.browserContext.requestInterceptors)}_isNetworkInspectionEnabled(){return this.browserContext._options.serviceWorkers!=="block"}}return zu}var Vu,b0;function Xs(){if(b0)return Vu;b0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(b,p)=>{for(var O in p)i(b,O,{get:p[O],enumerable:!0})},e=(b,p,O,z)=>{if(p&&typeof p=="object"||typeof p=="function")for(let $ of R(p))!te.call(b,$)&&$!==O&&i(b,$,{get:()=>p[$],enumerable:!(z=E(p,$))||z.enumerable});return b},U=(b,p,O)=>(O=b!=null?r(V(b)):{},e(!b||!b.__esModule?i(O,"default",{value:b,enumerable:!0}):O,b)),C=b=>e(i({},"__esModule",{value:!0}),b),w={};P(w,{CRBrowser:()=>l,CRBrowserContext:()=>x}),Vu=C(w);var g=U(Je),u=Gr(),_=tn(),f=Gs(),d=Ti(),v=Ir(),a=hs(),s=U(fn()),n=Kr(),o=Lo(),h=zO(),m=Yi(),c=VO();class l extends d.Browser{constructor(p,O,z){super(p,z),this._clientRootSessionPromise=null,this._contexts=new Map,this._crPages=new Map,this._backgroundPages=new Map,this._serviceWorkers=new Map,this._version="",this._tracingRecording=!1,this._userAgent="",this._connection=O,this._session=this._connection.rootSession,this._connection.on(o.ConnectionEvents.Disconnected,()=>this._didDisconnect()),this._session.on("Target.attachedToTarget",this._onAttachedToTarget.bind(this)),this._session.on("Target.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._session.on("Browser.downloadWillBegin",this._onDownloadWillBegin.bind(this)),this._session.on("Browser.downloadProgress",this._onDownloadProgress.bind(this))}static async connect(p,O,z,$){z={...z};const q=new o.CRConnection(p,O,z.protocolLogger,z.browserLogsCollector),J=new l(p,q,z);J._devtools=$,J.isClank()&&(J._isCollocatedWithServer=!1);const le=q.rootSession;z.__testHookOnConnectToBrowser&&await z.__testHookOnConnectToBrowser();const _e=await le.send("Browser.getVersion");return J._version=_e.product.substring(_e.product.indexOf("/")+1),J._userAgent=_e.userAgent,J.options.headful=!_e.userAgent.includes("Headless"),z.persistent?(J._defaultContext=new x(J,void 0,z.persistent),await Promise.all([le.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}).then(async()=>{await le.send("Target.getTargetInfo")}),J._defaultContext._initialize()]),await J._waitForAllPagesToBeInitialized(),J):(await le.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),J)}async doCreateNewContext(p){const O=p.proxyOverride||p.proxy;let z;O&&(t.PLAYWRIGHT_DISABLE_FORCED_CHROMIUM_PROXIED_LOOPBACK?z=O.bypass:z="<-loopback>"+(O.bypass?`,${O.bypass}`:""));const{browserContextId:$}=await this._session.send("Target.createBrowserContext",{disposeOnDetach:!0,proxyServer:O?O.server:void 0,proxyBypassList:z}),q=new x(this,$,p);return await q._initialize(),this._contexts.set($,q),q}contexts(){return Array.from(this._contexts.values())}version(){return this._version}userAgent(){return this._userAgent}_platform(){return this._userAgent.includes("Windows")?"win":this._userAgent.includes("Macintosh")?"mac":"linux"}isClank(){return this.options.name==="clank"}async _waitForAllPagesToBeInitialized(){await Promise.all([...this._crPages.values()].map(p=>p._page.waitForInitializedOrError()))}_onAttachedToTarget({targetInfo:p,sessionId:O,waitingForDebugger:z}){if(p.type==="browser")return;const $=this._session.createChildSession(O);(0,u.assert)(p.browserContextId,"targetInfo: "+JSON.stringify(p,null,2));let q=this._contexts.get(p.browserContextId)||null;if(q||(q=this._defaultContext),p.type==="other"&&p.url.startsWith("devtools://devtools")&&this._devtools){this._devtools.install($);return}const J=p.type==="other"&&t.PW_CHROMIUM_ATTACH_TO_OTHER;if(!q||p.type==="other"&&!J){$.detach().catch(()=>{});return}if((0,u.assert)(!this._crPages.has(p.targetId),"Duplicate target "+p.targetId),(0,u.assert)(!this._backgroundPages.has(p.targetId),"Duplicate target "+p.targetId),(0,u.assert)(!this._serviceWorkers.has(p.targetId),"Duplicate target "+p.targetId),p.type==="background_page"){const le=new h.CRPage($,p.targetId,q,null,{hasUIWindow:!1,isBackgroundPage:!0});this._backgroundPages.set(p.targetId,le);return}if(p.type==="page"||J){const le=p.openerId&&this._crPages.get(p.openerId)||null,_e=new h.CRPage($,p.targetId,q,le,{hasUIWindow:p.type==="page",isBackgroundPage:!1});this._crPages.set(p.targetId,_e);return}if(p.type==="service_worker"){const le=new c.CRServiceWorker(q,$,p.url);this._serviceWorkers.set(p.targetId,le),q.emit(x.CREvents.ServiceWorker,le);return}$.detach().catch(()=>{})}_onDetachedFromTarget(p){const O=p.targetId,z=this._crPages.get(O);if(z){this._crPages.delete(O),z.didClose();return}const $=this._backgroundPages.get(O);if($){this._backgroundPages.delete(O),$.didClose();return}const q=this._serviceWorkers.get(O);if(q){this._serviceWorkers.delete(O),q.didClose();return}}_didDisconnect(){for(const p of this._crPages.values())p.didClose();this._crPages.clear();for(const p of this._backgroundPages.values())p.didClose();this._backgroundPages.clear();for(const p of this._serviceWorkers.values())p.didClose();this._serviceWorkers.clear(),this._didClose()}_findOwningPage(p){for(const O of this._crPages.values())if(O._page.frameManager.frame(p))return O;return null}_onDownloadWillBegin(p){const O=this._findOwningPage(p.frameId);if(!O)return;O.willBeginDownload();let z=O._page.initializedOrUndefined();!z&&O._opener&&(z=O._opener._page.initializedOrUndefined()),z&&this._downloadCreated(z,p.guid,p.url,p.suggestedFilename)}_onDownloadProgress(p){p.state==="completed"&&this._downloadFinished(p.guid,""),p.state==="canceled"&&this._downloadFinished(p.guid,this._closeReason||"canceled")}async _closePage(p){await this._session.send("Target.closeTarget",{targetId:p._targetId})}async newBrowserCDPSession(){return await this._connection.createBrowserSession()}async startTracing(p,O={}){(0,u.assert)(!this._tracingRecording,"Cannot start recording trace while already recording trace."),this._tracingClient=p?p.delegate._mainFrameSession._client:this._session;const z=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler","disabled-by-default-v8.cpu_profiler.hires"],{screenshots:$=!1,categories:q=z}=O;$&&q.push("disabled-by-default-devtools.screenshot"),this._tracingRecording=!0,await this._tracingClient.send("Tracing.start",{transferMode:"ReturnAsStream",categories:q.join(",")})}async stopTracing(){(0,u.assert)(this._tracingClient,"Tracing was not started.");const[p]=await Promise.all([new Promise($=>this._tracingClient.once("Tracing.tracingComplete",$)),this._tracingClient.send("Tracing.end")]),O=g.default.join(this.options.artifactsDir,(0,_.createGuid)()+".crtrace");await(0,m.saveProtocolStream)(this._tracingClient,p.stream,O),this._tracingRecording=!1;const z=new f.Artifact(this,O);return z.reportFinished(),z}isConnected(){return!this._connection._closed}async _clientRootSession(){return this._clientRootSessionPromise||(this._clientRootSessionPromise=this._connection.createBrowserSession()),this._clientRootSessionPromise}}const T=class T extends v.BrowserContext{constructor(p,O,z){super(p,z,O),this._authenticateProxyViaCredentials()}async _initialize(){(0,u.assert)(!Array.from(this._browser._crPages.values()).some(O=>O._browserContext===this));const p=[super._initialize()];this._browser.options.name!=="clank"&&this._options.acceptDownloads!=="internal-browser-default"&&p.push(this._browser._session.send("Browser.setDownloadBehavior",{behavior:this._options.acceptDownloads==="accept"?"allowAndName":"deny",browserContextId:this._browserContextId,downloadPath:this._browser.options.downloadsPath,eventsEnabled:!0})),await Promise.all(p)}_crPages(){return[...this._browser._crPages.values()].filter(p=>p._browserContext===this)}possiblyUninitializedPages(){return this._crPages().map(p=>p._page)}async doCreateNewPage(p){const{targetId:O}=await this._browser._session.send("Target.createTarget",{url:"about:blank",browserContextId:this._browserContextId}),z=this._browser._crPages.get(O)._page;return p&&z.markAsServerSideOnly(),z}async doGetCookies(p){const{cookies:O}=await this._browser._session.send("Storage.getCookies",{browserContextId:this._browserContextId});return s.filterCookies(O.map(z=>{const{name:$,value:q,domain:J,path:le,expires:_e,httpOnly:ge,secure:ne,sameSite:S}=z,j={name:$,value:q,domain:J,path:le,expires:_e,httpOnly:ge,secure:ne,sameSite:S??"Lax"};return z.partitionKey&&(j._crHasCrossSiteAncestor=z.partitionKey.hasCrossSiteAncestor,j.partitionKey=z.partitionKey.topLevelSite),j}),p)}async addCookies(p){function O(z){const{name:$,value:q,url:J,domain:le,path:_e,expires:ge,httpOnly:ne,secure:S,sameSite:j,partitionKey:y,_crHasCrossSiteAncestor:I}=z,D={name:$,value:q,url:J,domain:le,path:_e,expires:ge,httpOnly:ne,secure:S,sameSite:j};return y&&(D.partitionKey={topLevelSite:y,hasCrossSiteAncestor:I??!0}),D}await this._browser._session.send("Storage.setCookies",{cookies:s.rewriteCookies(p).map(O),browserContextId:this._browserContextId})}async doClearCookies(){await this._browser._session.send("Storage.clearCookies",{browserContextId:this._browserContextId})}async doGrantPermissions(p,O){const z=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["midi-sysex","midiSysex"],["storage-access","storageAccess"],["local-fonts","localFonts"]]),$=O.map(q=>{const J=z.get(q);if(!J)throw new Error("Unknown permission: "+q);return J});await this._browser._session.send("Browser.grantPermissions",{origin:p==="*"?void 0:p,browserContextId:this._browserContextId,permissions:$})}async doClearPermissions(){await this._browser._session.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(p){(0,v.verifyGeolocation)(p),this._options.geolocation=p;for(const O of this.pages())await O.delegate.updateGeolocation()}async doUpdateExtraHTTPHeaders(){for(const p of this.pages())await p.delegate.updateExtraHTTPHeaders();for(const p of this.serviceWorkers())await p.updateExtraHTTPHeaders()}async setUserAgent(p){this._options.userAgent=p;for(const O of this.pages())await O.delegate.updateUserAgent()}async doUpdateOffline(){for(const p of this.pages())await p.delegate.updateOffline();for(const p of this.serviceWorkers())await p.updateOffline()}async doSetHTTPCredentials(p){this._options.httpCredentials=p;for(const O of this.pages())await O.delegate.updateHttpCredentials();for(const O of this.serviceWorkers())await O.updateHttpCredentials()}async doAddInitScript(p){for(const O of this.pages())await O.delegate.addInitScript(p)}async doRemoveInitScripts(p){for(const O of this.pages())await O.delegate.removeInitScripts(p)}async doUpdateRequestInterception(){for(const p of this.pages())await p.delegate.updateRequestInterception();for(const p of this.serviceWorkers())await p.updateRequestInterception()}async doUpdateDefaultViewport(){}async doUpdateDefaultEmulatedMedia(){}async doExposePlaywrightBinding(){for(const p of this._crPages())await p.exposePlaywrightBinding()}async doClose(p){if(await this.dialogManager.closeBeforeUnloadDialogs(),!this._browserContextId){await this.stopVideoRecording(),await this._browser.close({reason:p});return}await this._browser._session.send("Target.disposeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId);for(const[O,z]of this._browser._serviceWorkers)z.browserContext===this&&(z.didClose(),this._browser._serviceWorkers.delete(O))}async stopVideoRecording(){await Promise.all(this._crPages().map(p=>p._mainFrameSession._stopVideoRecording()))}onClosePersistent(){for(const[p,O]of this._browser._backgroundPages.entries())O._browserContext===this&&O._page.initializedOrUndefined()&&(O.didClose(),this._browser._backgroundPages.delete(p))}async clearCache(){for(const p of this._crPages())await p._networkManager.clearCache()}async cancelDownload(p){await this._browser._session.send("Browser.cancelDownload",{guid:p,browserContextId:this._browserContextId})}backgroundPages(){const p=[];for(const O of this._browser._backgroundPages.values())O._browserContext===this&&O._page.initializedOrUndefined()&&p.push(O._page);return p}serviceWorkers(){return Array.from(this._browser._serviceWorkers.values()).filter(p=>p.browserContext===this)}async newCDPSession(p){let O=null;if(p instanceof n.Page)O=p.delegate._targetId;else if(p instanceof a.Frame){const $=p._page.delegate._sessions.get(p._id);if(!$)throw new Error("This frame does not have a separate CDP session, it is a part of the parent frame's session");O=$._targetId}else throw new Error("page: expected Page or Frame");return(await this._browser._clientRootSession()).attachToTarget(O)}};T.CREvents={BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"};let x=T;return Vu}var Ku,v0;function mf(){if(v0)return Ku;v0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(j,y)=>{for(var I in y)i(j,I,{get:y[I],enumerable:!0})},e=(j,y,I,D)=>{if(y&&typeof y=="object"||typeof y=="function")for(let ie of R(y))!te.call(j,ie)&&ie!==I&&i(j,ie,{get:()=>y[ie],enumerable:!(D=E(y,ie))||D.enumerable});return j},U=(j,y,I)=>(I=j!=null?r(V(j)):{},e(!j||!j.__esModule?i(I,"default",{value:j,enumerable:!0}):I,j)),C=j=>e(i({},"__esModule",{value:!0}),j),w={};P(w,{Android:()=>J,AndroidDevice:()=>le}),Ku=C(w);var g=Vr(),u=U(Je),_=U(Je),f=U(Je),d=MO(),v=tn(),a=Xn(),s=of(),n=cf(),o=Mr(),h=Ar(),m=Ar(),c=Ir(),l=hf(),x=Xs(),T=Ln(),b=hn(),p=Tr(),O=Gi(),z=bn(),$=ui();const q=f.default.join(_.default.tmpdir(),"playwright-artifacts-");class J extends p.SdkObject{constructor(y,I){super(y,"android"),this._devices=new Map,this._backend=I}async devices(y,I){const D=(await y.race(this._backend.devices(I))).filter(he=>he.status==="device"),ie=new Set;for(const he of D){if(ie.add(he.serial),this._devices.has(he.serial))continue;const me=await y.raceWithCleanup(le.create(this,he,I),ye=>ye.close());this._devices.set(he.serial,me)}for(const he of this._devices.keys())ie.has(he)||this._devices.delete(he);return[...this._devices.values()]}_deviceClosed(y){this._devices.delete(y.serial)}}const S=class S extends p.SdkObject{constructor(y,I,D,ie){super(y,"android-device"),this._lastId=0,this._callbacks=new Map,this._webViews=new Map,this._browserConnections=new Set,this._isClosed=!1,this._android=y,this._backend=I,this.model=D,this.serial=I.serial,this._options=ie,this.logName="browser"}static async create(y,I,D){await I.init();const ie=await I.runCommand("shell:getprop ro.product.model"),he=new S(y,I,ie.toString().trim(),D);return await he._init(),he}async _init(){await this._refreshWebViews();const y=()=>{this._pollingWebViews=setTimeout(()=>this._refreshWebViews().then(y).catch(()=>{this.close().catch(()=>{})}),500)};y()}async shell(y){const I=await this._backend.runCommand(`shell:${y}`);return await this._refreshWebViews(),I}async open(y,I){return await y.raceWithCleanup(this._backend.open(`${I}`),D=>D.close())}async screenshot(){return await this._backend.runCommand("shell:screencap -p")}async _driver(){if(!this._isClosed){if(!this._driverPromise){const y=new z.ProgressController((0,p.serverSideCallMetadata)(),this);this._driverPromise=y.run(I=>this._installDriver(I))}return this._driverPromise}}async _installDriver(y){if((0,h.debug)("pw:android")("Stopping the old driver"),await y.race(this.shell("am force-stop com.microsoft.playwright.androiddriver")),this._options.omitDriverInstall)(0,h.debug)("pw:android")("Skipping the driver installation");else{(0,h.debug)("pw:android")("Uninstalling the old driver"),await y.race(this.shell("cmd package uninstall com.microsoft.playwright.androiddriver")),await y.race(this.shell("cmd package uninstall com.microsoft.playwright.androiddriver.test")),(0,h.debug)("pw:android")("Installing the new driver");const ie=$.registry.findExecutable("android"),he=(0,s.getPackageManagerExecCommand)();for(const me of["android-driver.apk","android-driver-target.apk"]){const ye=f.default.join(ie.directory,me);if(!u.default.existsSync(ye))throw new Error(`Please install Android driver apk using '${he} playwright install android'`);await this.installApk(y,await y.race(u.default.promises.readFile(ye)))}}(0,h.debug)("pw:android")("Starting the new driver"),this.shell("am instrument -w com.microsoft.playwright.androiddriver.test/androidx.test.runner.AndroidJUnitRunner").catch(ie=>(0,h.debug)("pw:android")(ie));const I=await this._waitForLocalAbstract(y,"playwright_android_driver_socket"),D=new d.PipeTransport(I,I,I,"be");return D.onmessage=ie=>{const he=JSON.parse(ie),{id:me,result:ye,error:Se}=he,Oe=this._callbacks.get(me);Oe&&(Se?Oe.reject(new Error(Se)):Oe.fulfill(ye),this._callbacks.delete(me))},D}async _waitForLocalAbstract(y,I){let D;for((0,h.debug)("pw:android")(`Polling the socket localabstract:${I}`);!D;)try{D=await y.raceWithCleanup(this._backend.open(`localabstract:${I}`),ie=>ie.close())}catch(ie){if((0,z.isAbortError)(ie))throw ie;await y.wait(250)}return(0,h.debug)("pw:android")(`Connected to localabstract:${I}`),D}async send(y,I={}){I={...I,timeout:I.timeout||0},I.androidSelector&&(I.selector=I.androidSelector,delete I.androidSelector);const D=await this._driver();if(!D)throw new Error("Device is closed");const ie=++this._lastId,he=new Promise((me,ye)=>this._callbacks.set(ie,{fulfill:me,reject:ye}));return D.send(JSON.stringify({id:ie,method:y,params:I})),he}async close(){if(!this._isClosed){this._isClosed=!0,this._pollingWebViews&&clearTimeout(this._pollingWebViews);for(const y of this._browserConnections)await y.close();if(this._driverPromise){const y=await this._driver();y==null||y.close()}await this._backend.close(),this._android._deviceClosed(this),this.emit(S.Events.Close)}}async launchBrowser(y,I="com.android.chrome",D){(0,h.debug)("pw:android")("Force-stopping",I),await this._backend.runCommand(`shell:am force-stop ${I}`);const ie=(0,a.isUnderTest)()?"webview_devtools_remote_playwright_test":"playwright_"+(0,v.createGuid)()+"_devtools_remote",he=this._defaultArgs(D,ie).join(" ");(0,h.debug)("pw:android")("Starting",I,he),await y.race(this._backend.runCommand(`shell:echo "${Buffer.from(he).toString("base64")}" | base64 -d > /data/local/tmp/chrome-command-line`)),await y.race(this._backend.runCommand(`shell:am start -a android.intent.action.VIEW -d about:blank ${I}`));const me=await this._connectToBrowser(y,ie,D);return await y.race(this._backend.runCommand("shell:rm /data/local/tmp/chrome-command-line")),me}_defaultArgs(y,I){return["_","--disable-fre","--no-default-browser-check",`--remote-debugging-socket-name=${I}`,...(0,l.chromiumSwitches)(),...this._innerDefaultArgs(y)]}_innerDefaultArgs(y){const{args:I=[],proxy:D}=y,ie=[];if(D){ie.push(`--proxy-server=${D.server}`);const he=[];D.bypass&&he.push(...D.bypass.split(",").map(me=>me.trim()).map(me=>me.startsWith(".")?"*"+me:me)),!t.PLAYWRIGHT_DISABLE_FORCED_CHROMIUM_PROXIED_LOOPBACK&&!he.includes("<-loopback>")&&he.push("<-loopback>"),he.length>0&&ie.push(`--proxy-bypass-list=${he.join(";")}`)}return ie.push(...I),ie}async connectToWebView(y,I){if(!this._webViews.get(I))throw new Error("WebView has been closed");return await this._connectToBrowser(y,I)}async _connectToBrowser(y,I,D={}){const ie=await this._waitForLocalAbstract(y,I),he=new _e(this,ie);y.cleanupWhenAborted(()=>he.close()),await y.race(he._init()),this._browserConnections.add(he);const me=await y.race(u.default.promises.mkdtemp(q)),ye=async()=>{const Ne=(await(0,T.removeFolders)([me])).filter(Boolean);for(let Le=0;Le<(Ne||[]).length;++Le)(0,h.debug)("pw:android")(`exception while removing ${me}: ${Ne[Le]}`)};y.cleanupWhenAborted(ye),O.gracefullyCloseSet.add(ye),ie.on("close",async()=>{O.gracefullyCloseSet.delete(ye),ye().catch(Ne=>(0,h.debug)("pw:android")(`could not cleanup artifacts dir: ${Ne}`))});const Se={name:"clank",isChromium:!0,slowMo:0,persistent:{...D,noDefaultViewport:!0},artifactsDir:me,downloadsPath:me,tracesDir:me,browserProcess:new ne(he),proxy:D.proxy,protocolLogger:b.helper.debugProtocolLogger(),browserLogsCollector:new o.RecentLogsCollector,originalLaunchOptions:{}};(0,c.validateBrowserContextOptions)(D,Se);const Pe=(await y.race(x.CRBrowser.connect(this.attribution.playwright,he,Se)))._defaultContext;return await Pe._loadDefaultContextAsIs(y),Pe}webViews(){return[...this._webViews.values()]}async installApk(y,I,D){const ie=D&&D.args?D.args:["-r","-t","-S"];(0,h.debug)("pw:android")("Opening install socket");const he=await y.raceWithCleanup(this._backend.open(`shell:cmd package install ${ie.join(" ")} ${I.length}`),ye=>ye.close());(0,h.debug)("pw:android")("Writing driver bytes: "+I.length),await y.race(he.write(I));const me=await y.race(new Promise(ye=>he.on("data",ye)));(0,h.debug)("pw:android")("Written driver bytes: "+me),he.close()}async push(y,I,D,ie=420){const he=await y.raceWithCleanup(this._backend.open("sync:"),Ne=>Ne.close()),me=async(Ne,Le)=>{const qe=Buffer.alloc(Ne.length+4);qe.write(Ne,0),qe.writeUInt32LE(Le,Ne.length),await y.race(he.write(qe))},ye=async(Ne,Le)=>{await me(Ne,Le.length),await y.race(he.write(Le))};await ye("SEND",Buffer.from(`${D},${ie}`));const Se=65535;for(let Ne=0;Ne<I.length;Ne+=Se)await ye("DATA",I.slice(Ne,Ne+Se));await me("DONE",Date.now()/1e3|0);const Pe=(await y.race(new Promise(Ne=>he.once("data",Ne)))).slice(0,4).toString();if(Pe!=="OKAY")throw new Error("Could not push: "+Pe);he.close()}async _refreshWebViews(){const y=(await this._backend.runCommand("shell:cat /proc/net/unix | grep webview_devtools_remote")).toString().split(`
`);if(this._isClosed)return;const I=new Set;for(const D of y){const ie=D.match(/[^@]+@(.*?webview_devtools_remote_?.*)/);if(!ie)continue;const he=ie[1];if(I.add(he),this._webViews.has(he))continue;const me=D.match(/[^@]+@.*?webview_devtools_remote_?(\d*)/);let ye=-1;me&&me[1]&&(ye=+me[1]);const Se=await this._extractPkg(ye);if(this._isClosed)return;const Oe={pid:ye,pkg:Se,socketName:he};this._webViews.set(he,Oe),this.emit(S.Events.WebViewAdded,Oe)}for(const D of this._webViews.keys())I.has(D)||(this._webViews.delete(D),this.emit(S.Events.WebViewRemoved,D))}async _extractPkg(y){let I="";if(y===-1)return I;const D=(await this._backend.runCommand(`shell:ps -A | grep ${y}`)).toString().split(`
`);for(const ie of D)ie.match(/[^\s]+\s+(\d+).*$/)&&(I=ie.substring(ie.lastIndexOf(" ")+1));return I}};S.Events={WebViewAdded:"webViewAdded",WebViewRemoved:"webViewRemoved",Close:"close"};let le=S;class _e extends g.EventEmitter{constructor(y,I){super(),this._waitForNextTask=(0,n.makeWaitForNextTask)(),this.setMaxListeners(0),this.device=y,this._socket=I,this._socket.on("close",()=>{this._waitForNextTask(()=>{this.onclose&&this.onclose()})}),this._receiver=new m.wsReceiver,this._receiver.on("message",D=>{this._waitForNextTask(()=>{this.onmessage&&this.onmessage(JSON.parse(D))})})}async _init(){await this._socket.write(Buffer.from(`GET /devtools/browser HTTP/1.1\r
Upgrade: WebSocket\r
Connection: Upgrade\r
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\r
Sec-WebSocket-Version: 13\r
\r
`)),await new Promise(y=>this._socket.once("data",y)),this._socket.on("data",y=>this._receiver._write(y,"binary",()=>{}))}async send(y){await this._socket.write(ge(JSON.stringify(y)))}async close(){this._socket.close()}}function ge(j){return m.wsSender.frame(Buffer.from(j),{opcode:1,mask:!0,fin:!0,readOnly:!0})[0]}class ne{constructor(y){this._browser=y}async kill(){}async close(){await this._browser.close()}}return Ku}var Gu,w0;function KO(){if(w0)return Gu;w0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(o,h)=>{for(var m in h)r(o,m,{get:h[m],enumerable:!0})},P=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of E(h))!V.call(o,l)&&l!==m&&r(o,l,{get:()=>h[l],enumerable:!(c=i(h,l))||c.enumerable});return o},e=(o,h,m)=>(m=o!=null?t(R(o)):{},P(!o||!o.__esModule?r(m,"default",{value:o,enumerable:!0}):m,o)),U=o=>P(r({},"__esModule",{value:!0}),o),C={};te(C,{AdbBackend:()=>f}),Gu=U(C);var w=Vr(),g=e(Je),u=Gr(),_=Ar();class f{async devices(h={}){return(await v("host:devices",h.host,h.port)).toString().trim().split(`
`).map(l=>{const[x,T]=l.trim().split("	");return new d(x,T,h.host,h.port)})}}class d{constructor(h,m,c,l){this._closed=!1,this.serial=h,this.status=m,this.host=c,this.port=l}async init(){}async close(){this._closed=!0}runCommand(h){if(this._closed)throw new Error("Device is closed");return v(h,this.host,this.port,this.serial)}async open(h){if(this._closed)throw new Error("Device is closed");const m=await a(h,this.host,this.port,this.serial);return m.becomeSocket(),m}}async function v(o,h="127.0.0.1",m=5037,c){(0,_.debug)("pw:adb:runCommand")(o,c);const l=new n(o,g.default.createConnection({host:h,port:m}));try{if(c){await l.write(s(`host:transport:${c}`));const b=await l.read(4);(0,u.assert)(b.toString()==="OKAY",b.toString())}await l.write(s(o));const x=await l.read(4);(0,u.assert)(x.toString()==="OKAY",x.toString());let T;if(o.startsWith("shell:"))T=await l.readAll();else{const b=parseInt((await l.read(4)).toString(),16);T=await l.read(b)}return T}finally{l.close()}}async function a(o,h="127.0.0.1",m=5037,c){const l=new n(o,g.default.createConnection({host:h,port:m}));if(c){await l.write(s(`host:transport:${c}`));const T=await l.read(4);(0,u.assert)(T.toString()==="OKAY",T.toString())}await l.write(s(o));const x=await l.read(4);return(0,u.assert)(x.toString()==="OKAY",x.toString()),l}function s(o){let h=o.length.toString(16);return h="0".repeat(4-h.length)+h,Buffer.from(h+o)}class n extends w.EventEmitter{constructor(h,m){super(),this._buffer=Buffer.from([]),this._isSocket=!1,this._isClosed=!1,this._command=h,this._socket=m,this._connectPromise=new Promise(c=>this._socket.on("connect",c)),this._socket.on("data",c=>{if((0,_.debug)("pw:adb:data")(c.toString()),this._isSocket){this.emit("data",c);return}this._buffer=Buffer.concat([this._buffer,c]),this._notifyReader&&this._notifyReader()}),this._socket.on("close",()=>{this._isClosed=!0,this._notifyReader&&this._notifyReader(),this.close(),this.emit("close")}),this._socket.on("error",c=>this.emit("error",c))}async write(h){(0,_.debug)("pw:adb:send")(h.toString().substring(0,100)+"..."),await this._connectPromise,await new Promise(m=>this._socket.write(h,m))}close(){this._isClosed||((0,_.debug)("pw:adb")("Close "+this._command),this._socket.destroy())}async read(h){for(await this._connectPromise,(0,u.assert)(!this._isSocket,"Can not read by length in socket mode");this._buffer.length<h;)await new Promise(c=>this._notifyReader=c);const m=this._buffer.slice(0,h);return this._buffer=this._buffer.slice(h),(0,_.debug)("pw:adb:recv")(m.toString().substring(0,100)+"..."),m}async readAll(){for(;!this._isClosed;)await new Promise(h=>this._notifyReader=h);return this._buffer}becomeSocket(){(0,u.assert)(!this._buffer.length),this._isSocket=!0}}return Gu}var Ju,y0;function GO(){if(y0)return Ju;y0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{PipeTransport:()=>C}),Ju=te(P);var e=nr(),U=Mr();class C{constructor(g,u){this._pendingBuffers=[],this._waitForNextTask=(0,e.makeWaitForNextTask)(),this._closed=!1,this._pipeRead=u,this._pipeWrite=g,u.on("data",_=>this._dispatch(_)),u.on("close",()=>{this._closed=!0,this._onclose&&this._onclose.call(null)}),u.on("error",_=>U.debugLogger.log("error",_)),g.on("error",_=>U.debugLogger.log("error",_)),this.onmessage=void 0}get onclose(){return this._onclose}set onclose(g){this._onclose=g,g&&!this._pipeRead.readable&&g()}send(g){if(this._closed)throw new Error("Pipe has been closed");this._pipeWrite.write(JSON.stringify(g)),this._pipeWrite.write("\0")}close(){throw new Error("unimplemented")}_dispatch(g){let u=g.indexOf("\0");if(u===-1){this._pendingBuffers.push(g);return}this._pendingBuffers.push(g.slice(0,u));const _=Buffer.concat(this._pendingBuffers).toString();this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(_))});let f=u+1;for(u=g.indexOf("\0",f);u!==-1;){const d=g.toString(void 0,f,u);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(d))}),f=u+1,u=g.indexOf("\0",f)}this._pendingBuffers=[g.slice(f)]}}return Ju}var Yu,S0;function Do(){if(S0)return Yu;S0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{WebSocketTransport:()=>g,perMessageDeflate:()=>w}),Yu=te(P);var e=nr(),U=zs(),C=Ar();const w={clientNoContextTakeover:!0,zlibDeflateOptions:{level:3},zlibInflateOptions:{chunkSize:10*1024},threshold:10*1024};class g{constructor(f,d,v,a){this.headers=[],this.wsEndpoint=d,this._logUrl=v,this._ws=new C.ws(d,[],{maxPayload:256*1024*1024,headers:a.headers,followRedirects:a.followRedirects,agent:/^(https|wss):\/\//.test(d)?U.httpsHappyEyeballsAgent:U.httpHappyEyeballsAgent,perMessageDeflate:w}),this._ws.on("upgrade",n=>{for(let o=0;o<n.rawHeaders.length;o+=2)this.headers.push({name:n.rawHeaders[o],value:n.rawHeaders[o+1]}),a.debugLogHeader&&n.rawHeaders[o]===a.debugLogHeader&&(f==null||f.log(n.rawHeaders[o+1]))}),this._progress=f;const s=(0,e.makeWaitForNextTask)();this._ws.addEventListener("message",n=>{s(()=>{var m,c;const o=n.data;let h;try{h=JSON.parse(o)}catch(l){(m=this._progress)==null||m.log(`<closing ws> Closing websocket due to malformed JSON. eventData=${o} e=${l==null?void 0:l.message}`),this._ws.close();return}try{this.onmessage&&this.onmessage.call(null,h)}catch(l){(c=this._progress)==null||c.log(`<closing ws> Closing websocket due to failed onmessage callback. eventData=${o} e=${l==null?void 0:l.message}`),this._ws.close()}})}),this._ws.addEventListener("close",n=>{var o;(o=this._progress)==null||o.log(`<ws disconnected> ${v} code=${n.code} reason=${n.reason}`),this.onclose&&this.onclose.call(null,n.reason)}),this._ws.addEventListener("error",n=>{var o;return(o=this._progress)==null?void 0:o.log(`<ws error> ${v} ${n.type} ${n.message}`)})}static async connect(f,d,v={}){return await g._connect(f,d,v,!1)}static async _connect(f,d,v,a){const s=u(d);f==null||f.log(`<ws connecting> ${s}`);const n=new g(f,d,s,{...v,followRedirects:!!v.followRedirects&&a});f==null||f.cleanupWhenAborted(()=>n.closeAndWait());const o=new Promise((m,c)=>{n._ws.on("open",async()=>{f==null||f.log(`<ws connected> ${s}`),m({transport:n})}),n._ws.on("error",l=>{f==null||f.log(`<ws connect error> ${s} ${l.message}`),c(new Error("WebSocket error: "+l.message)),n._ws.close()}),n._ws.on("unexpected-response",(l,x)=>{if(v.followRedirects&&!a&&(x.statusCode===301||x.statusCode===302||x.statusCode===307||x.statusCode===308)){m({redirect:x}),n._ws.close();return}for(let p=0;p<x.rawHeaders.length;p+=2)v.debugLogHeader&&x.rawHeaders[p]===v.debugLogHeader&&(f==null||f.log(x.rawHeaders[p+1]));const T=[],b=`${s} ${x.statusCode} ${x.statusMessage}`;x.on("data",p=>T.push(p)),x.on("close",()=>{const p=T.length?`${b}
${Buffer.concat(T)}`:b;f==null||f.log(`<ws unexpected response> ${p}`),c(new Error("WebSocket error: "+p)),n._ws.close()})})}),h=f?await f.race(o):await o;if(h.redirect){const m=Object.fromEntries(Object.entries(v.headers||{}).filter(([c])=>!c.includes("access-key")&&c.toLowerCase()!=="authorization"));return g._connect(f,h.redirect.headers.location,{...v,headers:m},!0)}return n}send(f){this._ws.send(JSON.stringify(f))}close(){var f;(f=this._progress)==null||f.log(`<ws disconnecting> ${this._logUrl}`),this._ws.close()}async closeAndWait(){if(this._ws.readyState===C.ws.CLOSED)return;const f=new Promise(d=>this._ws.once("close",d));this.close(),await f}}function u(_){try{const f=new URL(_);return f.search="",f.hash="",f.toString()}catch{return _}}return Yu}var Xu,x0;function Qs(){if(x0)return Xu;x0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(q,J)=>{for(var le in J)i(q,le,{get:J[le],enumerable:!0})},e=(q,J,le,_e)=>{if(J&&typeof J=="object"||typeof J=="function")for(let ge of R(J))!te.call(q,ge)&&ge!==le&&i(q,ge,{get:()=>J[ge],enumerable:!(_e=E(J,ge))||_e.enumerable});return q},U=(q,J,le)=>(le=q!=null?r(V(q)):{},e(!q||!q.__esModule?i(le,"default",{value:q,enumerable:!0}):le,q)),C=q=>e(i({},"__esModule",{value:!0}),q),w={};P(w,{BrowserType:()=>z,kNoXServerRunningError:()=>O}),Xu=C(w);var g=U(Je),u=U(Je),_=U(Je),f=Ir(),d=Xn(),v=Gr(),a=Fr(),s=En(),n=Ln(),o=hn(),h=Tr(),m=GO(),c=Gi(),l=Dn(),x=ui(),T=pf(),b=Do(),p=Mr();const O=`Looks like you launched a headed browser without having a XServer running.
Set either 'headless: true' or use 'xvfb-run <your-playwright-app>' before running Playwright.

<3 Playwright Team`;class z extends h.SdkObject{constructor(J,le){super(J,"browser-type"),this.attribution.browserType=this,this._name=le,this.logName="browser"}executablePath(){return x.registry.findExecutable(this._name).executablePath(this.attribution.playwright.options.sdkLanguage)||""}name(){return this._name}async launch(J,le,_e){le=this._validateLaunchOptions(le);const ge=le.__testHookSeleniumRemoteURL||t.SELENIUM_REMOTE_URL;return ge?this._launchWithSeleniumHub(J,ge,le):this._innerLaunchWithRetries(J,le,void 0,o.helper.debugProtocolLogger(_e)).catch(ne=>{throw this._rewriteStartupLog(ne)})}async launchPersistentContext(J,le,_e){var j;const ge=this._validateLaunchOptions(_e);let ne;(j=_e.clientCertificates)!=null&&j.length&&(ne=await J.raceWithCleanup(T.ClientCertificatesProxy.create(_e),y=>y.close()),ge.proxyOverride=ne.proxySettings(),_e={..._e},_e.internalIgnoreHTTPSErrors=!0);const S=await this._innerLaunchWithRetries(J,ge,_e,o.helper.debugProtocolLogger(),le).catch(y=>{throw this._rewriteStartupLog(y)});return S._defaultContext._clientCertificatesProxy=ne,S._defaultContext}async _innerLaunchWithRetries(J,le,_e,ge,ne){try{return await this._innerLaunch(J,le,_e,ge,ne)}catch(S){if((typeof S=="object"&&typeof S.message=="string"?S.message:"").includes("Inconsistency detected by ld.so"))return J.log("<restarting browser due to hitting race condition in glibc>"),this._innerLaunch(J,le,_e,ge,ne);throw S}}async _innerLaunch(J,le,_e,ge,ne){le.proxy=le.proxy?(0,f.normalizeProxySettings)(le.proxy):void 0;const S=new p.RecentLogsCollector,{browserProcess:j,userDataDir:y,artifactsDir:I,transport:D}=await this._launchProcess(J,le,!!_e,S,ne);le.__testHookBeforeCreateBrowser&&await J.race(le.__testHookBeforeCreateBrowser());const ie={name:this._name,isChromium:this._name==="chromium",channel:le.channel,slowMo:le.slowMo,persistent:_e,headful:!le.headless,artifactsDir:I,downloadsPath:le.downloadsPath||I,tracesDir:le.tracesDir||I,browserProcess:j,customExecutablePath:le.executablePath,proxy:le.proxy,protocolLogger:ge,browserLogsCollector:S,wsEndpoint:D instanceof b.WebSocketTransport?D.wsEndpoint:void 0,originalLaunchOptions:le};_e&&(0,f.validateBrowserContextOptions)(_e,ie),$(le,ie);const he=await J.race(this.connectToTransport(D,ie,S));return he._userDataDirForTest=y,_e&&!le.ignoreAllDefaultArgs&&await he._defaultContext._loadDefaultContext(J),he}async _prepareToLaunch(J,le,_e){const{ignoreDefaultArgs:ge,ignoreAllDefaultArgs:ne,args:S=[],executablePath:j=null}=J;await this._createArtifactDirs(J);const y=[],I=await g.default.promises.mkdtemp(_.default.join(u.default.tmpdir(),"playwright-artifacts-"));y.push(I),_e?((0,v.assert)(_.default.isAbsolute(_e),"userDataDir must be an absolute path"),await(0,n.existsAsync)(_e)||await g.default.promises.mkdir(_e,{recursive:!0,mode:448})):(_e=await g.default.promises.mkdtemp(_.default.join(u.default.tmpdir(),`playwright_${this._name}dev_profile-`)),y.push(_e)),await this.prepareUserDataDir(J,_e);const D=[];ne?D.push(...S):ge?D.push(...this.defaultArgs(J,le,_e).filter(he=>ge.indexOf(he)===-1)):D.push(...this.defaultArgs(J,le,_e));let ie;if(j){if(!await(0,n.existsAsync)(j))throw new Error(`Failed to launch ${this._name} because executable doesn't exist at ${j}`);ie=j}else{const he=x.registry.findExecutable(this.getExecutableName(J));if(!he||he.browserName!==this._name)throw new Error(`Unsupported ${this._name} channel "${J.channel}"`);ie=he.executablePathOrDie(this.attribution.playwright.options.sdkLanguage),await x.registry.validateHostRequirementsForExecutablesIfNeeded([he],this.attribution.playwright.options.sdkLanguage)}return{executable:ie,browserArguments:D,userDataDir:_e,artifactsDir:I,tempDirectories:y}}async _launchProcess(J,le,_e,ge,ne){const{handleSIGINT:S=!0,handleSIGTERM:j=!0,handleSIGHUP:y=!0}=le,I=le.env?(0,c.envArrayToObject)(le.env):t,D=await J.race(this._prepareToLaunch(le,_e,ne));J.cleanupWhenAborted(()=>(0,n.removeFolders)(D.tempDirectories));let ie,he;const me=new a.ManualPromise,{launchedProcess:ye,gracefullyClose:Se,kill:Oe}=await(0,c.launchProcess)({command:D.executable,args:D.browserArguments,env:this.amendEnvironment(I,D.userDataDir,_e),handleSIGINT:S,handleSIGTERM:j,handleSIGHUP:y,log:Le=>{J.log(Le),ge.log(Le)},stdio:"pipe",tempDirectories:D.tempDirectories,attemptToGracefullyClose:async()=>{le.__testHookGracefullyClose&&await le.__testHookGracefullyClose(),this.attemptToGracefullyCloseBrowser(ie)},onExit:(Le,qe)=>{me.resolve(),he&&he.onclose&&he.onclose(Le,qe)}});async function Pe(Le){let qe;try{await Promise.race([Se(),new Promise((Ge,ot)=>qe=setTimeout(ot,Le))])}catch{await Oe().catch(ot=>{})}finally{clearTimeout(qe)}}he={onclose:void 0,process:ye,close:()=>Pe(le.__testHookBrowserCloseTimeout||s.DEFAULT_PLAYWRIGHT_TIMEOUT),kill:Oe},J.cleanupWhenAborted(()=>Pe(s.DEFAULT_PLAYWRIGHT_TIMEOUT));const{wsEndpoint:Ne}=await J.race([this.waitForReadyState(le,ge),me.then(()=>({wsEndpoint:void 0}))]);if(le.cdpPort!==void 0||!this.supportsPipeTransport())ie=await b.WebSocketTransport.connect(J,Ne);else{const Le=ye.stdio;ie=new m.PipeTransport(Le[3],Le[4])}return J.cleanupWhenAborted(()=>ie.close()),{browserProcess:he,artifactsDir:D.artifactsDir,userDataDir:D.userDataDir,transport:ie}}async _createArtifactDirs(J){J.downloadsPath&&await g.default.promises.mkdir(J.downloadsPath,{recursive:!0}),J.tracesDir&&await g.default.promises.mkdir(J.tracesDir,{recursive:!0})}async connectOverCDP(J,le,_e){throw new Error("CDP connections are only supported by Chromium")}async _launchWithSeleniumHub(J,le,_e){throw new Error("Connecting to SELENIUM_REMOTE_URL is only supported by Chromium")}_validateLaunchOptions(J){const{devtools:le=!1}=J;let{headless:_e=!le,downloadsPath:ge,proxy:ne}=J;return(0,d.debugMode)()&&(_e=!1),ge&&!_.default.isAbsolute(ge)&&(ge=_.default.join(process.cwd(),ge)),J.socksProxyPort&&(ne={server:`socks5://127.0.0.1:${J.socksProxyPort}`}),{...J,devtools:le,headless:_e,downloadsPath:ge,proxy:ne}}_createUserDataDirArgMisuseError(J){switch(this.attribution.playwright.options.sdkLanguage){case"java":return new Error(`Pass userDataDir parameter to 'BrowserType.launchPersistentContext(userDataDir, options)' instead of specifying '${J}' argument`);case"python":return new Error(`Pass user_data_dir parameter to 'browser_type.launch_persistent_context(user_data_dir, **kwargs)' instead of specifying '${J}' argument`);case"csharp":return new Error(`Pass userDataDir parameter to 'BrowserType.LaunchPersistentContextAsync(userDataDir, options)' instead of specifying '${J}' argument`);default:return new Error(`Pass userDataDir parameter to 'browserType.launchPersistentContext(userDataDir, options)' instead of specifying '${J}' argument`)}}_rewriteStartupLog(J){return(0,l.isProtocolError)(J)?this.doRewriteStartupLog(J):J}async waitForReadyState(J,le){return{}}async prepareUserDataDir(J,le){}supportsPipeTransport(){return!0}getExecutableName(J){return J.channel||this._name}}function $(q,J){for(const[le,_e]of Object.entries(q))le.startsWith("__testHook")&&(J[le]=_e)}return Xu}var Qu,E0;function gf(){if(E0)return Qu;E0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{BidiConnection:()=>u,BidiSession:()=>_,kBrowserCloseMessageId:()=>g}),Qu=te(P);var e=Vr(),U=Mr(),C=hn(),w=Dn();const g=0;class u{constructor(d,v,a,s){this._lastId=0,this._closed=!1,this._browsingContextToSession=new Map,this._transport=d,this._onDisconnect=v,this._protocolLogger=a,this._browserLogsCollector=s,this.browserSession=new _(this,"",n=>{this.rawSend(n)}),this._transport.onmessage=this._dispatchMessage.bind(this),this._transport.onclose=this._onClose.bind(this)}nextMessageId(){return++this._lastId}rawSend(d){this._protocolLogger("send",d),this._transport.send(d)}_dispatchMessage(d){var a;this._protocolLogger("receive",d);const v=d;if(v.type==="event"){let s;if("context"in v.params?s=v.params.context:(v.method==="log.entryAdded"||v.method==="script.message")&&(s=(a=v.params.source)==null?void 0:a.context),s){const n=this._browsingContextToSession.get(s);if(n){n.dispatchMessage(d);return}}}else if(d.id){for(const s of this._browsingContextToSession.values())if(s.hasCallback(d.id)){s.dispatchMessage(d);return}}this.browserSession.dispatchMessage(d)}_onClose(d){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this._browserDisconnectedLogs=C.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs(),d),this.browserSession.dispose(),this._onDisconnect()}isClosed(){return this._closed}close(){this._closed||this._transport.close()}createMainFrameBrowsingContextSession(d){const v=new _(this,d,a=>this.rawSend(a));return this._browsingContextToSession.set(d,v),v}}class _ extends e.EventEmitter{constructor(d,v,a){super(),this._disposed=!1,this._callbacks=new Map,this._crashed=!1,this._browsingContexts=new Set,this.setMaxListeners(0),this.connection=d,this.sessionId=v,this._rawSend=a,this.on=super.on,this.off=super.removeListener,this.addListener=super.addListener,this.removeListener=super.removeListener,this.once=super.once}addFrameBrowsingContext(d){this._browsingContexts.add(d),this.connection._browsingContextToSession.set(d,this)}removeFrameBrowsingContext(d){this._browsingContexts.delete(d),this.connection._browsingContextToSession.delete(d)}async send(d,v){if(this._crashed||this._disposed||this.connection._browserDisconnectedLogs)throw new w.ProtocolError(this._crashed?"crashed":"closed",void 0,this.connection._browserDisconnectedLogs);const a=this.connection.nextMessageId(),s={id:a,method:d,params:v};return this._rawSend(s),new Promise((n,o)=>{this._callbacks.set(a,{resolve:n,reject:o,error:new w.ProtocolError("error",d)})})}sendMayFail(d,v){return this.send(d,v).catch(a=>U.debugLogger.log("error",a))}markAsCrashed(){this._crashed=!0}isDisposed(){return this._disposed}dispose(){this._disposed=!0,this.connection._browsingContextToSession.delete(this.sessionId);for(const d of this._browsingContexts)this.connection._browsingContextToSession.delete(d);this._browsingContexts.clear();for(const d of this._callbacks.values())d.error.type=this._crashed?"crashed":"closed",d.error.logs=this.connection._browserDisconnectedLogs,d.reject(d.error);this._callbacks.clear()}hasCallback(d){return this._callbacks.has(d)}dispatchMessage(d){const v=d;if(v.id!==g)if(v.id&&this._callbacks.has(v.id)){const a=this._callbacks.get(v.id);this._callbacks.delete(v.id),v.type==="error"?(a.error.setMessage(v.error+`
Message: `+v.message),a.reject(a.error)):v.type==="success"?a.resolve(v.result):(a.error.setMessage("Internal error, unexpected response type: "+JSON.stringify(v)),a.reject(a.error))}else v.id||Promise.resolve().then(()=>this.emit(v.method,v.params))}}return Qu}var Zu,O0;function ly(){if(O0)return Zu;O0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{Cookie:()=>U,CookieStore:()=>C,domainMatches:()=>g,parseRawCookie:()=>w}),Zu=te(P);var e=fn();class U{constructor(f){this._raw=f}name(){return this._raw.name}matches(f){return!(this._raw.secure&&f.protocol!=="https:"&&!(0,e.isLocalHostname)(f.hostname)||!g(f.hostname,this._raw.domain)||!u(f.pathname,this._raw.path))}equals(f){return this._raw.name===f._raw.name&&this._raw.domain===f._raw.domain&&this._raw.path===f._raw.path}networkCookie(){return this._raw}updateExpiresFrom(f){this._raw.expires=f._raw.expires}expired(){return this._raw.expires===-1?!1:this._raw.expires*1e3<Date.now()}}class C{constructor(){this._nameToCookies=new Map}addCookies(f){for(const d of f)this._addCookie(new U(d))}cookies(f){const d=[];for(const v of this._cookiesIterator())v.matches(f)&&d.push(v.networkCookie());return d}allCookies(){const f=[];for(const d of this._cookiesIterator())f.push(d.networkCookie());return f}_addCookie(f){let d=this._nameToCookies.get(f.name());d||(d=new Set,this._nameToCookies.set(f.name(),d));for(const v of d)v.equals(f)&&d.delete(v);d.add(f),C.pruneExpired(d)}*_cookiesIterator(){for(const[f,d]of this._nameToCookies){C.pruneExpired(d);for(const v of d)yield v;d.size===0&&this._nameToCookies.delete(f)}}static pruneExpired(f){for(const d of f)d.expired()&&f.delete(d)}}function w(_){const f=_.split(";").filter(s=>s.trim().length>0).map(s=>{let n="",o="";const h=s.indexOf("=");return h===-1?n=s.trim():(n=s.slice(0,h).trim(),o=s.slice(h+1).trim()),[n,o]});if(!f.length)return null;const[d,v]=f[0],a={name:d,value:v};for(let s=1;s<f.length;s++){const[n,o]=f[s];switch(n.toLowerCase()){case"expires":const h=+new Date(o);isFinite(h)&&(h<=0?a.expires=0:a.expires=Math.min(h/1e3,e.kMaxCookieExpiresDateInSeconds));break;case"max-age":const m=parseInt(o,10);isFinite(m)&&(m<=0?a.expires=0:a.expires=Math.min(Date.now()/1e3+m,e.kMaxCookieExpiresDateInSeconds));break;case"domain":a.domain=o.toLocaleLowerCase()||"",a.domain&&!a.domain.startsWith(".")&&a.domain.includes(".")&&(a.domain="."+a.domain);break;case"path":a.path=o||"";break;case"secure":a.secure=!0;break;case"httponly":a.httpOnly=!0;break;case"samesite":switch(o.toLowerCase()){case"none":a.sameSite="None";break;case"lax":a.sameSite="Lax";break;case"strict":a.sameSite="Strict";break}break}}return a}function g(_,f){return _===f?!0:f.startsWith(".")?(_="."+_,_.endsWith(f)):!1}function u(_,f){return _===f?!0:(_.endsWith("/")||(_=_+"/"),f.endsWith("/")||(f=f+"/"),_.startsWith(f))}return Zu}var ed={exports:{}},td,T0;function JO(){if(T0)return td;T0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{BrowsingContext:()=>C,ErrorCode:()=>e,Input:()=>_,Log:()=>u,Network:()=>w,Script:()=>g,Session:()=>U}),td=te(P);/**
 * @license
 * Copyright 2024 Google Inc.
 * Modifications copyright (c) Microsoft Corporation.
 * SPDX-License-Identifier: Apache-2.0
 */var e=(f=>(f.InvalidArgument="invalid argument",f.InvalidSelector="invalid selector",f.InvalidSessionId="invalid session id",f.InvalidWebExtension="invalid web extension",f.MoveTargetOutOfBounds="move target out of bounds",f.NoSuchAlert="no such alert",f.NoSuchElement="no such element",f.NoSuchFrame="no such frame",f.NoSuchHandle="no such handle",f.NoSuchHistoryEntry="no such history entry",f.NoSuchIntercept="no such intercept",f.NoSuchNode="no such node",f.NoSuchRequest="no such request",f.NoSuchScript="no such script",f.NoSuchStoragePartition="no such storage partition",f.NoSuchUserContext="no such user context",f.NoSuchWebExtension="no such web extension",f.SessionNotCreated="session not created",f.UnableToCaptureScreen="unable to capture screen",f.UnableToCloseBrowser="unable to close browser",f.UnableToSetCookie="unable to set cookie",f.UnableToSetFileInput="unable to set file input",f.UnderspecifiedStoragePartition="underspecified storage partition",f.UnknownCommand="unknown command",f.UnknownError="unknown error",f.UnsupportedOperation="unsupported operation",f))(e||{}),U;(f=>{(d=>{d.Accept="accept",d.Dismiss="dismiss",d.Ignore="ignore"})(f.UserPromptHandlerType||(f.UserPromptHandlerType={}))})(U||(U={}));var C;(f=>{(d=>{d.None="none",d.Interactive="interactive",d.Complete="complete"})(f.ReadinessState||(f.ReadinessState={}))})(C||(C={})),(f=>{(d=>{d.Alert="alert",d.Beforeunload="beforeunload",d.Confirm="confirm",d.Prompt="prompt"})(f.UserPromptType||(f.UserPromptType={}))})(C||(C={})),(f=>{(d=>{d.Tab="tab",d.Window="window"})(f.CreateType||(f.CreateType={}))})(C||(C={}));var w;(f=>{(d=>{d.Strict="strict",d.Lax="lax",d.None="none"})(f.SameSite||(f.SameSite={}))})(w||(w={})),(f=>{(d=>{d.BeforeRequestSent="beforeRequestSent",d.ResponseStarted="responseStarted",d.AuthRequired="authRequired"})(f.InterceptPhase||(f.InterceptPhase={}))})(w||(w={}));var g;(f=>{(d=>{d.Root="root",d.None="none"})(f.ResultOwnership||(f.ResultOwnership={}))})(g||(g={}));var u;(f=>{(d=>{d.Debug="debug",d.Info="info",d.Warn="warn",d.Error="error"})(f.Level||(f.Level={}))})(u||(u={}));var _;return(f=>{(d=>{d.Mouse="mouse",d.Pen="pen",d.Touch="touch"})(f.PointerType||(f.PointerType={}))})(_||(_={})),td}var rd,C0;function YO(){if(C0)return rd;C0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{Permissions:()=>e}),rd=te(P);/**
 * @license
 * Copyright 2024 Google Inc.
 * Modifications copyright (c) Microsoft Corporation.
 * SPDX-License-Identifier: Apache-2.0
 */var e;return(U=>{(C=>{C.Granted="granted",C.Denied="denied",C.Prompt="prompt"})(U.PermissionState||(U.PermissionState={}))})(e||(e={})),rd}var P0;function Zs(){return P0||(P0=1,function(t){var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of E(C))!R.call(U,u)&&u!==w&&r(U,u,{get:()=>C[u],enumerable:!(g=i(C,u))||g.enumerable});return U},te=(U,C,w)=>(V(U,C,"default"),w&&V(w,C,"default")),P=U=>V(r({},"__esModule",{value:!0}),U),e={};t.exports=P(e),te(e,JO(),t.exports),te(e,YO(),t.exports)}(ed)),ed.exports}var nd,k0;function uy(){if(k0)return nd;k0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(c,l)=>{for(var x in l)r(c,x,{get:l[x],enumerable:!0})},P=(c,l,x,T)=>{if(l&&typeof l=="object"||typeof l=="function")for(let b of E(l))!V.call(c,b)&&b!==x&&r(c,b,{get:()=>l[b],enumerable:!(T=i(l,b))||T.enumerable});return c},e=(c,l,x)=>(x=c!=null?t(R(c)):{},P(!c||!c.__esModule?r(x,"default",{value:c,enumerable:!0}):x,c)),U=c=>P(r({},"__esModule",{value:!0}),c),C={};te(C,{BidiNetworkManager:()=>f,bidiBytesValueToString:()=>h}),nd=U(C);var w=qr(),g=ly(),u=e(fn()),_=e(Zs());class f{constructor(l,x,T){this._userRequestInterceptionEnabled=!1,this._protocolRequestInterceptionEnabled=!1,this._session=l,this._requests=new Map,this._page=x,this._onNavigationResponseStarted=T,this._eventListeners=[w.eventsHelper.addEventListener(l,"network.beforeRequestSent",this._onBeforeRequestSent.bind(this)),w.eventsHelper.addEventListener(l,"network.responseStarted",this._onResponseStarted.bind(this)),w.eventsHelper.addEventListener(l,"network.responseCompleted",this._onResponseCompleted.bind(this)),w.eventsHelper.addEventListener(l,"network.fetchError",this._onFetchError.bind(this)),w.eventsHelper.addEventListener(l,"network.authRequired",this._onAuthRequired.bind(this))]}dispose(){w.eventsHelper.removeEventListeners(this._eventListeners)}_onBeforeRequestSent(l){var O;if(l.request.url.startsWith("data:"))return;const x=l.redirectCount&&this._requests.get(l.request.request)||null,T=x?x.request.frame():l.context?this._page.frameManager.frame(l.context):null;if(!T)return;x&&this._requests.delete(x._id);let b;if(l.intercepts)if(x){let z={};(O=x._originalRequestRoute)!=null&&O._alreadyContinuedHeaders&&(z=s(x._originalRequestRoute._alreadyContinuedHeaders??[])),this._session.sendMayFail("network.continueRequest",{request:l.request.request,...z})}else b=new v(this._session,l.request.request);const p=new d(T,x,l,b);this._requests.set(p._id,p),this._page.frameManager.requestStarted(p.request,b)}_onResponseStarted(l){const x=this._requests.get(l.request.request);if(!x)return;const T=async()=>{throw new Error("Response body is not available for requests in Bidi")},b=l.request.timings,p=b.requestTime;function O(q){return q?q-p:-1}const z={startTime:p,requestStart:O(b.requestStart),responseStart:O(b.responseStart),domainLookupStart:O(b.dnsStart),domainLookupEnd:O(b.dnsEnd),connectStart:O(b.connectStart),secureConnectionStart:O(b.tlsStart),connectEnd:O(b.connectEnd)},$=new u.Response(x.request,l.response.status,l.response.statusText,a(l.response.headers),z,T,!1);$._serverAddrFinished(),$._securityDetailsFinished(),$.setRawResponseHeaders(null),$.setResponseHeadersSize(l.response.headersSize),this._page.frameManager.requestReceivedResponse($),l.navigation&&this._onNavigationResponseStarted(l)}_onResponseCompleted(l){const x=this._requests.get(l.request.request);if(!x)return;const T=x.request._existingResponse();T.setTransferSize(l.response.bodySize),T.setEncodedBodySize(l.response.bodySize);const b=T.status()>=300&&T.status()<=399,p=l.request.timings.responseEnd-T.timing().startTime;b||this._requests.delete(x._id),T._requestFinished(p),T._setHttpVersion(l.response.protocol),this._page.frameManager.reportRequestFinished(x.request,T)}_onFetchError(l){const x=this._requests.get(l.request.request);if(!x)return;this._requests.delete(x._id);const T=x.request._existingResponse();T&&(T.setTransferSize(null),T.setEncodedBodySize(null),T._requestFinished(-1)),x.request._setFailureText(l.errorText),this._page.frameManager.requestFailed(x.request,l.errorText==="NS_BINDING_ABORTED")}_onAuthRequired(l){var b;const x=(b=l.response.authChallenges)==null?void 0:b.some(p=>p.scheme.startsWith("Basic")),T=this._page.browserContext._options.httpCredentials;x&&T?this._session.sendMayFail("network.continueWithAuth",{request:l.request.request,action:"provideCredentials",credentials:{type:"password",username:T.username,password:T.password}}):this._session.sendMayFail("network.continueWithAuth",{request:l.request.request,action:"default"})}async setRequestInterception(l){this._userRequestInterceptionEnabled=l,await this._updateProtocolRequestInterception()}async setCredentials(l){this._credentials=l,await this._updateProtocolRequestInterception()}async _updateProtocolRequestInterception(l){const x=this._userRequestInterceptionEnabled||!!this._credentials;if(x===this._protocolRequestInterceptionEnabled||(this._protocolRequestInterceptionEnabled=x,l&&!x))return;const T=this._session.send("network.setCacheBehavior",{cacheBehavior:x?"bypass":"default"});let b=Promise.resolve(void 0);x?b=this._session.send("network.addIntercept",{phases:[_.Network.InterceptPhase.AuthRequired,_.Network.InterceptPhase.BeforeRequestSent],urlPatterns:[{type:"pattern"}]}).then(p=>{this._intercepId=p.intercept}):this._intercepId&&(b=this._session.send("network.removeIntercept",{intercept:this._intercepId}),this._intercepId=void 0),await Promise.all([T,b])}}class d{constructor(l,x,T,b){this._id=T.request.request,x&&(x._redirectedTo=this);const p=null;this.request=new u.Request(l._page.browserContext,l,null,x?x.request:null,T.navigation??void 0,T.request.url,"other",T.request.method,p,a(T.request.headers)),this.request.setRawRequestHeaders(null),this.request._setBodySize(T.request.bodySize||0),this._originalRequestRoute=b??(x==null?void 0:x._originalRequestRoute),b==null||b._setRequest(this.request)}_finalRequest(){let l=this;for(;l._redirectedTo;)l=l._redirectedTo;return l}}class v{constructor(l,x){this._session=l,this._requestId=x}_setRequest(l){this._request=l}async continue(l){let x=l.headers||this._request.headers();l.postData&&x&&(x=x.map(T=>T.name.toLowerCase()==="content-length"?{name:T.name,value:l.postData.byteLength.toString()}:T)),this._alreadyContinuedHeaders=x,await this._session.sendMayFail("network.continueRequest",{request:this._requestId,url:l.url,method:l.method,...s(this._alreadyContinuedHeaders),body:l.postData?{type:"base64",value:Buffer.from(l.postData).toString("base64")}:void 0})}async fulfill(l){const x=l.isBase64?l.body:Buffer.from(l.body).toString("base64");await this._session.sendMayFail("network.provideResponse",{request:this._requestId,statusCode:l.status,reasonPhrase:u.statusText(l.status),...n(l.headers),body:{type:"base64",value:x}})}async abort(l){await this._session.sendMayFail("network.failRequest",{request:this._requestId})}}function a(c){const l=[];for(const{name:x,value:T}of c)l.push({name:x,value:h(T)});return l}function s(c){return{headers:o(c)}}function n(c){const l=c.filter(p=>p.name.toLowerCase()==="set-cookie"),x=c.filter(p=>p.name.toLowerCase()!=="set-cookie");return{cookies:l.map(p=>(0,g.parseRawCookie)(p.value)).filter(Boolean).map(p=>({...p,value:{type:"string",value:p.value},sameSite:m(p.sameSite)})),headers:o(x)}}function o(c){return c.map(({name:l,value:x})=>({name:l,value:{type:"string",value:x}}))}function h(c){return c.type==="string"?c.value:c.type==="base64"?Buffer.from(c.type,"base64").toString("binary"):"unknown value type: "+c.type}function m(c){if(c)return c==="Strict"?_.Network.SameSite.Strict:c==="Lax"?_.Network.SameSite.Lax:_.Network.SameSite.None}return nd}var id,A0;function XO(){if(A0)return id;A0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{BidiDeserializer:()=>e}),id=te(P);/**
 * @license
 * Copyright 2024 Google Inc.
 * Modifications copyright (c) Microsoft Corporation.
 * SPDX-License-Identifier: Apache-2.0
 */class e{static deserialize(C){var w,g,u,_;if(C){switch(C.type){case"array":return(w=C.value)==null?void 0:w.map(f=>e.deserialize(f));case"set":return(g=C.value)==null?void 0:g.reduce((f,d)=>f.add(e.deserialize(d)),new Set);case"object":return(u=C.value)==null?void 0:u.reduce((f,d)=>{const{key:v,value:a}=e._deserializeTuple(d);return f[v]=a,f},{});case"map":return(_=C.value)==null?void 0:_.reduce((f,d)=>{const{key:v,value:a}=e._deserializeTuple(d);return f.set(v,a)},new Map);case"promise":return{};case"regexp":return new RegExp(C.value.pattern,C.value.flags);case"date":return new Date(C.value);case"undefined":return;case"null":return null;case"number":return e._deserializeNumber(C.value);case"bigint":return BigInt(C.value);case"boolean":return!!C.value;case"string":return C.value}throw new Error(`Deserialization of type ${C.type} not supported.`)}}static _deserializeNumber(C){switch(C){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:return C}}static _deserializeTuple([C,w]){const g=typeof C=="string"?C:e.deserialize(C),u=e.deserialize(w);return{key:g,value:u}}}return id}var sd,I0;function QO(){if(I0)return sd;I0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(u,_)=>{for(var f in _)t(u,f,{get:_[f],enumerable:!0})},V=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of i(_))!E.call(u,v)&&v!==f&&t(u,v,{get:()=>_[v],enumerable:!(d=r(_,v))||d.enumerable});return u},te=u=>V(t({},"__esModule",{value:!0}),u),P={};R(P,{BidiSerializer:()=>U,isDate:()=>g,isPlainObject:()=>C,isRegExp:()=>w}),sd=te(P);/**
 * @license
 * Copyright 2024 Google Inc.
 * Modifications copyright (c) Microsoft Corporation.
 * SPDX-License-Identifier: Apache-2.0
 */class e extends Error{}class U{static serialize(_){switch(typeof _){case"symbol":case"function":throw new e(`Unable to serializable ${typeof _}`);case"object":return U._serializeObject(_);case"undefined":return{type:"undefined"};case"number":return U._serializeNumber(_);case"bigint":return{type:"bigint",value:_.toString()};case"string":return{type:"string",value:_};case"boolean":return{type:"boolean",value:_}}}static _serializeNumber(_){let f;return Object.is(_,-0)?f="-0":Object.is(_,1/0)?f="Infinity":Object.is(_,-1/0)?f="-Infinity":Object.is(_,NaN)?f="NaN":f=_,{type:"number",value:f}}static _serializeObject(_){if(_===null)return{type:"null"};if(Array.isArray(_))return{type:"array",value:_.map(d=>U.serialize(d))};if(C(_)){try{JSON.stringify(_)}catch(d){throw d instanceof TypeError&&d.message.startsWith("Converting circular structure to JSON")&&(d.message+=" Recursive objects are not allowed."),d}const f=[];for(const d in _)f.push([U.serialize(d),U.serialize(_[d])]);return{type:"object",value:f}}else{if(w(_))return{type:"regexp",value:{pattern:_.source,flags:_.flags}};if(g(_))return{type:"date",value:_.toISOString()}}throw new e("Custom object serialization not possible. Use plain objects instead.")}}const C=u=>typeof u=="object"&&(u==null?void 0:u.constructor)===Object,w=u=>typeof u=="object"&&(u==null?void 0:u.constructor)===RegExp,g=u=>typeof u=="object"&&(u==null?void 0:u.constructor)===Date;return sd}var ad,N0;function ZO(){if(N0)return ad;N0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(h,m)=>{for(var c in m)r(h,c,{get:m[c],enumerable:!0})},P=(h,m,c,l)=>{if(m&&typeof m=="object"||typeof m=="function")for(let x of E(m))!V.call(h,x)&&x!==c&&r(h,x,{get:()=>m[x],enumerable:!(l=i(m,x))||l.enumerable});return h},e=(h,m,c)=>(c=h!=null?t(R(h)):{},P(!h||!h.__esModule?r(c,"default",{value:h,enumerable:!0}):c,h)),U=h=>P(r({},"__esModule",{value:!0}),h),C={};te(C,{BidiExecutionContext:()=>a,createHandle:()=>o}),ad=U(C);var w=nr(),g=ds(),u=e(Oi()),_=e(hi()),f=XO(),d=e(Zs()),v=QO();class a{constructor(m,c){this._session=m,c.type==="window"?this._target={context:c.context,sandbox:c.sandbox}:this._target={realm:c.realm}}async rawEvaluateJSON(m){const c=await this._session.send("script.evaluate",{expression:m,target:this._target,serializationOptions:{maxObjectDepth:10,maxDomDepth:10},awaitPromise:!0,userActivation:!0});if(c.type==="success")return f.BidiDeserializer.deserialize(c.result);throw c.type==="exception"?new u.JavaScriptErrorInEvaluate(c.exceptionDetails.text+`
Full val: `+JSON.stringify(c.exceptionDetails)):new u.JavaScriptErrorInEvaluate("Unexpected response type: "+JSON.stringify(c))}async rawEvaluateHandle(m,c){const l=await this._session.send("script.evaluate",{expression:c,target:this._target,resultOwnership:d.Script.ResultOwnership.Root,serializationOptions:{maxObjectDepth:0,maxDomDepth:0},awaitPromise:!0,userActivation:!0});if(l.type==="success"){if("handle"in l.result)return o(m,l.result);throw new u.JavaScriptErrorInEvaluate("Cannot get handle: "+JSON.stringify(l.result))}throw l.type==="exception"?new u.JavaScriptErrorInEvaluate(l.exceptionDetails.text+`
Full val: `+JSON.stringify(l.exceptionDetails)):new u.JavaScriptErrorInEvaluate("Unexpected response type: "+JSON.stringify(l))}async evaluateWithArguments(m,c,l,x,T){const b=await this._session.send("script.callFunction",{functionDeclaration:m,target:this._target,arguments:[{handle:l._objectId},...x.map(v.BidiSerializer.serialize),...T.map(p=>({handle:p._objectId}))],resultOwnership:c?void 0:d.Script.ResultOwnership.Root,serializationOptions:c?{}:{maxObjectDepth:0,maxDomDepth:0},awaitPromise:!0,userActivation:!0});if(b.type==="exception")throw new u.JavaScriptErrorInEvaluate(b.exceptionDetails.text+`
Full val: `+JSON.stringify(b.exceptionDetails));if(b.type==="success")return c?(0,g.parseEvaluationResultValue)(f.BidiDeserializer.deserialize(b.result)):o(l._context,b.result);throw new u.JavaScriptErrorInEvaluate("Unexpected response type: "+JSON.stringify(b))}async getProperties(m){const c=await m.evaluate(T=>{var O;const b=[],p=Object.getOwnPropertyDescriptors(T);for(const z in p)(O=p[z])!=null&&O.enumerable&&b.push(z);return b}),l=await Promise.all(c.map(T=>m.evaluateHandle((b,p)=>b[p],T))),x=new Map;for(let T=0;T<c.length;T++)x.set(c[T],l[T]);return x}async releaseHandle(m){m._objectId&&await this._session.send("script.disown",{target:this._target,handles:[m._objectId]})}async nodeIdForElementHandle(m){const c=await this._remoteValueForReference({handle:m._objectId});if(!("sharedId"in c))throw new Error("Element is not a node");return{sharedId:c.sharedId}}async remoteObjectForNodeId(m,c){const l=await this._remoteValueForReference(c,!0);if(!("handle"in l))throw new Error("Can't get remote object for nodeId");return o(m,l)}async contentFrameIdForFrame(m){const c=await this._rawCallFunction("e => e.contentWindow",{handle:m._objectId});return(c==null?void 0:c.type)==="window"?c.value.context:null}async frameIdForWindowHandle(m){if(!m._objectId)throw new Error("JSHandle is not a DOM node handle");const c=await this._remoteValueForReference({handle:m._objectId});return c.type==="window"?c.value.context:null}async _remoteValueForReference(m,c){return await this._rawCallFunction("e => e",m,c)}async _rawCallFunction(m,c,l){const x=await this._session.send("script.callFunction",{functionDeclaration:m,target:this._target,arguments:[c],resultOwnership:l?d.Script.ResultOwnership.Root:d.Script.ResultOwnership.None,serializationOptions:{maxObjectDepth:0,maxDomDepth:0},awaitPromise:!0,userActivation:!0});if(x.type==="exception")throw new u.JavaScriptErrorInEvaluate(x.exceptionDetails.text+`
Full val: `+JSON.stringify(x.exceptionDetails));if(x.type==="success")return x.result;throw new u.JavaScriptErrorInEvaluate("Unexpected response type: "+JSON.stringify(x))}}function s(h){return h.type==="undefined"?"undefined":h.type==="null"?"null":"value"in h?String(h.value):`<${h.type}>`}function n(h){if(h.type!=="undefined"){if(h.type==="null")return null;if(h.type==="number"&&typeof h.value=="string")return u.parseUnserializableValue(h.value);if("value"in h)return h.value}}function o(h,m){if(m.type==="node")return(0,w.assert)(h instanceof _.FrameExecutionContext),new _.ElementHandle(h,m.handle);const c="handle"in m?m.handle:void 0;return new u.JSHandle(h,m.type,s(m),c,n(m))}return ad}var od,R0;function eT(){if(R0)return od;R0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{getBidiKeyValue:()=>e}),od=te(P);/**
 * @license
 * Copyright 2024 Google Inc.
 * Modifications copyright (c) Microsoft Corporation.
 * SPDX-License-Identifier: Apache-2.0
 */const e=U=>{switch(U){case"\r":case`
`:U="Enter";break}if([...U].length===1)return U;switch(U){case"Cancel":return"";case"Help":return"";case"Backspace":return"";case"Tab":return"";case"Clear":return"";case"Enter":return"";case"Shift":case"ShiftLeft":return"";case"Control":case"ControlLeft":return"";case"Alt":case"AltLeft":return"";case"Pause":return"";case"Escape":return"";case"PageUp":return"";case"PageDown":return"";case"End":return"";case"Home":return"";case"ArrowLeft":return"";case"ArrowUp":return"";case"ArrowRight":return"";case"ArrowDown":return"";case"Insert":return"";case"Delete":return"";case"NumpadEqual":return"";case"Numpad0":return"";case"Numpad1":return"";case"Numpad2":return"";case"Numpad3":return"";case"Numpad4":return"";case"Numpad5":return"";case"Numpad6":return"";case"Numpad7":return"";case"Numpad8":return"";case"Numpad9":return"";case"NumpadMultiply":return"";case"NumpadAdd":return"";case"NumpadSubtract":return"";case"NumpadDecimal":return"";case"NumpadDivide":return"";case"F1":return"";case"F2":return"";case"F3":return"";case"F4":return"";case"F5":return"";case"F6":return"";case"F7":return"";case"F8":return"";case"F9":return"";case"F10":return"";case"F11":return"";case"F12":return"";case"Meta":case"MetaLeft":return"";case"ShiftRight":return"";case"ControlRight":return"";case"AltRight":return"";case"MetaRight":return"";case"Space":return" ";case"Digit0":return"0";case"Digit1":return"1";case"Digit2":return"2";case"Digit3":return"3";case"Digit4":return"4";case"Digit5":return"5";case"Digit6":return"6";case"Digit7":return"7";case"Digit8":return"8";case"Digit9":return"9";case"KeyA":return"a";case"KeyB":return"b";case"KeyC":return"c";case"KeyD":return"d";case"KeyE":return"e";case"KeyF":return"f";case"KeyG":return"g";case"KeyH":return"h";case"KeyI":return"i";case"KeyJ":return"j";case"KeyK":return"k";case"KeyL":return"l";case"KeyM":return"m";case"KeyN":return"n";case"KeyO":return"o";case"KeyP":return"p";case"KeyQ":return"q";case"KeyR":return"r";case"KeyS":return"s";case"KeyT":return"t";case"KeyU":return"u";case"KeyV":return"v";case"KeyW":return"w";case"KeyX":return"x";case"KeyY":return"y";case"KeyZ":return"z";case"Semicolon":return";";case"Equal":return"=";case"Comma":return",";case"Minus":return"-";case"Period":return".";case"Slash":return"/";case"Backquote":return"`";case"BracketLeft":return"[";case"Backslash":return"\\";case"BracketRight":return"]";case"Quote":return'"';default:throw new Error(`Unknown key: "${U}"`)}};return od}var cd,L0;function tT(){if(L0)return cd;L0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},P=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of E(s))!V.call(a,h)&&h!==n&&r(a,h,{get:()=>s[h],enumerable:!(o=i(s,h))||o.enumerable});return a},e=(a,s,n)=>(n=a!=null?t(R(a)):{},P(!a||!a.__esModule?r(n,"default",{value:a,enumerable:!0}):n,a)),U=a=>P(r({},"__esModule",{value:!0}),a),C={};te(C,{RawKeyboardImpl:()=>_,RawMouseImpl:()=>f,RawTouchscreenImpl:()=>d}),cd=U(C);var w=Ro(),g=eT(),u=e(Zs());class _{constructor(s){this._session=s}setSession(s){this._session=s}async keydown(s,n,o,h,m){o=(0,w.resolveSmartModifierString)(o);const c=[];c.push({type:"keyDown",value:(0,g.getBidiKeyValue)(o)}),await this._performActions(s,c)}async keyup(s,n,o,h){o=(0,w.resolveSmartModifierString)(o);const m=[];m.push({type:"keyUp",value:(0,g.getBidiKeyValue)(o)}),await this._performActions(s,m)}async sendText(s,n){const o=[];for(const h of n){const m=(0,g.getBidiKeyValue)(h);o.push({type:"keyDown",value:m}),o.push({type:"keyUp",value:m})}await this._performActions(s,o)}async _performActions(s,n){await s.race(this._session.send("input.performActions",{context:this._session.sessionId,actions:[{type:"key",id:"pw_keyboard",actions:n}]}))}}class f{constructor(s){this._session=s}async move(s,n,o,h,m,c,l){await this._performActions(s,[{type:"pointerMove",x:n,y:o}])}async down(s,n,o,h,m,c,l){await this._performActions(s,[{type:"pointerDown",button:v(h)}])}async up(s,n,o,h,m,c,l){await this._performActions(s,[{type:"pointerUp",button:v(h)}])}async wheel(s,n,o,h,m,c,l){n=Math.floor(n),o=Math.floor(o),await s.race(this._session.send("input.performActions",{context:this._session.sessionId,actions:[{type:"wheel",id:"pw_mouse_wheel",actions:[{type:"scroll",x:n,y:o,deltaX:c,deltaY:l}]}]}))}async _performActions(s,n){await s.race(this._session.send("input.performActions",{context:this._session.sessionId,actions:[{type:"pointer",id:"pw_mouse",parameters:{pointerType:u.Input.PointerType.Mouse},actions:n}]}))}}class d{constructor(s){this._session=s}async tap(s,n,o,h){}}function v(a){switch(a){case"left":return 0;case"right":return 2;case"middle":return 1}throw new Error("Unknown button: "+a)}return cd}var ld,D0;function rT(){if(D0)return ld;D0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(u,_)=>{for(var f in _)t(u,f,{get:_[f],enumerable:!0})},V=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of i(_))!E.call(u,v)&&v!==f&&t(u,v,{get:()=>_[v],enumerable:!(d=r(_,v))||d.enumerable});return u},te=u=>V(t({},"__esModule",{value:!0}),u),P={};R(P,{BidiPDF:()=>g}),ld=te(P);var e=nr();const U={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},C={px:1,in:96,cm:37.8,mm:3.78};function w(u){if(u===void 0)return;let _=u.substring(u.length-2).toLowerCase(),f="";C.hasOwnProperty(_)?f=u.substring(0,u.length-2):(_="px",f=u);const d=Number(f);return(0,e.assert)(!isNaN(d),"Failed to parse parameter value: "+u),d*C[_]/96}class g{constructor(_){this._session=_}async generate(_){const{scale:f=1,printBackground:d=!1,landscape:v=!1,pageRanges:a="",margin:s={}}=_;let n=8.5,o=11;if(_.format){const m=U[_.format.toLowerCase()];(0,e.assert)(m,"Unknown paper format: "+_.format),n=m.width,o=m.height}else n=w(_.width)||n,o=w(_.height)||o;const{data:h}=await this._session.send("browsingContext.print",{context:this._session.sessionId,background:d,margin:{bottom:w(s.bottom)||0,left:w(s.left)||0,right:w(s.right)||0,top:w(s.top)||0},orientation:v?"landscape":"portrait",page:{width:n,height:o},pageRanges:a?a.split(",").map(m=>m.trim()):void 0,scale:f});return Buffer.from(h,"base64")}}return ld}var ud,M0;function nT(){if(M0)return ud;M0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(l,x)=>{for(var T in x)r(l,T,{get:x[T],enumerable:!0})},P=(l,x,T,b)=>{if(x&&typeof x=="object"||typeof x=="function")for(let p of E(x))!V.call(l,p)&&p!==T&&r(l,p,{get:()=>x[p],enumerable:!(b=i(x,p))||b.enumerable});return l},e=(l,x,T)=>(T=l!=null?t(R(l)):{},P(!l||!l.__esModule?r(T,"default",{value:l,enumerable:!0}):T,l)),U=l=>P(r({},"__esModule",{value:!0}),l),C={};te(C,{BidiPage:()=>m,kPlaywrightBindingChannel:()=>h}),ud=U(C);var w=nr(),g=qr(),u=e(Ks()),_=e(hi()),f=Kr(),d=ZO(),v=tT(),a=uy(),s=rT(),n=e(Zs());const o="__playwright_utility_world__",h="playwrightChannel";class m{constructor(x,T,b){this._sessionListeners=[],this._initScriptIds=new Map,this._session=T,this._opener=b,this.rawKeyboard=new v.RawKeyboardImpl(T),this.rawMouse=new v.RawMouseImpl(T),this.rawTouchscreen=new v.RawTouchscreenImpl(T),this._realmToContext=new Map,this._page=new f.Page(this,x),this._browserContext=x,this._networkManager=new a.BidiNetworkManager(this._session,this._page,this._onNavigationResponseStarted.bind(this)),this._pdf=new s.BidiPDF(this._session),this._page.on(f.Page.Events.FrameDetached,p=>this._removeContextsForFrame(p,!1)),this._sessionListeners=[g.eventsHelper.addEventListener(T,"script.realmCreated",this._onRealmCreated.bind(this)),g.eventsHelper.addEventListener(T,"script.message",this._onScriptMessage.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.contextDestroyed",this._onBrowsingContextDestroyed.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.navigationStarted",this._onNavigationStarted.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.navigationAborted",this._onNavigationAborted.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.navigationFailed",this._onNavigationFailed.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.fragmentNavigated",this._onFragmentNavigated.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.domContentLoaded",this._onDomContentLoaded.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.load",this._onLoad.bind(this)),g.eventsHelper.addEventListener(T,"browsingContext.userPromptOpened",this._onUserPromptOpened.bind(this)),g.eventsHelper.addEventListener(T,"log.entryAdded",this._onLogEntryAdded.bind(this))],this._initialize().then(()=>{var p;return this._page.reportAsNew((p=this._opener)==null?void 0:p._page)},p=>{var O;return this._page.reportAsNew((O=this._opener)==null?void 0:O._page,p)})}async _initialize(){this._onFrameAttached(this._session.sessionId,null),await Promise.all([this.updateHttpCredentials(),this.updateRequestInterception(),this._browserContext.waitForBlockingPageCreations()])}didClose(){this._session.dispose(),g.eventsHelper.removeEventListeners(this._sessionListeners),this._page._didClose()}_onFrameAttached(x,T){return this._page.frameManager.frameAttached(x,T)}_removeContextsForFrame(x,T){for(const[b,p]of this._realmToContext)p.frame===x&&(this._realmToContext.delete(b),T&&x._contextDestroyed(p))}_onRealmCreated(x){if(this._realmToContext.has(x.realm)||x.type!=="window")return;const T=this._page.frameManager.frame(x.context);if(!T)return;let b;if(!x.sandbox)b="main",this._touchUtilityWorld(x.context);else if(x.sandbox===o)b="utility";else return;const p=new d.BidiExecutionContext(this._session,x),O=new _.FrameExecutionContext(p,T,b);T._contextCreated(b,O),this._realmToContext.set(x.realm,O)}async _touchUtilityWorld(x){await this._session.sendMayFail("script.evaluate",{expression:"1 + 1",target:{context:x,sandbox:o},serializationOptions:{maxObjectDepth:10,maxDomDepth:10},awaitPromise:!0,userActivation:!0})}_onRealmDestroyed(x){const T=this._realmToContext.get(x.realm);return T?(this._realmToContext.delete(x.realm),T.frame._contextDestroyed(T),!0):!1}_onBrowsingContextDestroyed(x){this._browserContext._browser._onBrowsingContextDestroyed(x)}_onNavigationStarted(x){const T=x.context;this._page.frameManager.frameRequestedNavigation(T,x.navigation);const b=x.url.toLowerCase();(b.startsWith("file:")||b.startsWith("data:")||b==="about:blank")&&this._page.frameManager.frame(T)&&this._page.frameManager.frameCommittedNewDocumentNavigation(T,x.url,"",x.navigation,!1)}_onNavigationResponseStarted(x){const T=x.context,b=this._page.frameManager.frame(T);(0,w.assert)(b),this._page.frameManager.frameCommittedNewDocumentNavigation(T,x.response.url,"",x.navigation,!1)}_onDomContentLoaded(x){const T=x.context;this._page.frameManager.frameLifecycleEvent(T,"domcontentloaded")}_onLoad(x){this._page.frameManager.frameLifecycleEvent(x.context,"load")}_onNavigationAborted(x){this._page.frameManager.frameAbortedNavigation(x.context,"Navigation aborted",x.navigation||void 0)}_onNavigationFailed(x){this._page.frameManager.frameAbortedNavigation(x.context,"Navigation failed",x.navigation||void 0)}_onFragmentNavigated(x){this._page.frameManager.frameCommittedSameDocumentNavigation(x.context,x.url)}_onUserPromptOpened(x){this._page.browserContext.dialogManager.dialogDidOpen(new u.Dialog(this._page,x.type,x.message,async(T,b)=>{await this._session.send("browsingContext.handleUserPrompt",{context:x.context,accept:T,userText:b})},x.defaultValue))}_onLogEntryAdded(x){var z;if(x.type!=="console")return;const T=x,b=this._realmToContext.get(x.source.realm);if(!b)return;const O=((z=x.stackTrace)==null?void 0:z.callFrames[0])??{url:"",lineNumber:1,columnNumber:1};this._page.addConsoleMessage(T.method,T.args.map($=>(0,d.createHandle)(b,$)),O,x.text||void 0)}async navigateFrame(x,T,b){const{navigation:p}=await this._session.send("browsingContext.navigate",{context:x._id,url:T});return{newDocumentId:p||void 0}}async updateExtraHTTPHeaders(){}async updateEmulateMedia(){}async updateUserAgent(){}async bringToFront(){await this._session.send("browsingContext.activate",{context:this._session.sessionId})}async updateEmulatedViewportSize(){const x=this._browserContext._options,T=this._page.emulatedSize();if(!T)return;const b=T.viewport;await this._session.send("browsingContext.setViewport",{context:this._session.sessionId,viewport:{width:b.width,height:b.height},devicePixelRatio:x.deviceScaleFactor||1})}async updateRequestInterception(){await this._networkManager.setRequestInterception(this._page.needsRequestInterception())}async updateOffline(){}async updateHttpCredentials(){await this._networkManager.setCredentials(this._browserContext._options.httpCredentials)}async updateFileChooserInterception(){}async reload(){await this._session.send("browsingContext.reload",{context:this._session.sessionId,wait:n.BrowsingContext.ReadinessState.Interactive})}async goBack(){return await this._session.send("browsingContext.traverseHistory",{context:this._session.sessionId,delta:-1}).then(()=>!0).catch(()=>!1)}async goForward(){return await this._session.send("browsingContext.traverseHistory",{context:this._session.sessionId,delta:1}).then(()=>!0).catch(()=>!1)}async requestGC(){throw new Error("Method not implemented.")}async _onScriptMessage(x){if(x.channel!==h||await this._page.waitForInitializedOrError()instanceof Error)return;const b=this._realmToContext.get(x.source.realm);b&&x.data.type==="string"&&await this._page.onBindingCalled(x.data.value,b)}async addInitScript(x){const{script:T}=await this._session.send("script.addPreloadScript",{functionDeclaration:`() => { return ${x.source} }`,contexts:[this._session.sessionId]});this._initScriptIds.set(x,T)}async removeInitScripts(x){const T=[];for(const b of x){const p=this._initScriptIds.get(b);p&&T.push(p),this._initScriptIds.delete(b)}await Promise.all(T.map(b=>this._session.send("script.removePreloadScript",{script:b})))}async closePage(x){await this._session.send("browsingContext.close",{context:this._session.sessionId,promptUnload:x})}async setBackgroundColor(x){}async takeScreenshot(x,T,b,p,O,z,$){const q=b||p,{data:J}=await x.race(this._session.send("browsingContext.captureScreenshot",{context:this._session.sessionId,format:{type:`image/${T==="png"?"png":"jpeg"}`,quality:O?O/100:.8},origin:b?"document":"viewport",clip:{type:"box",...q}}));return Buffer.from(J,"base64")}async getContentFrame(x){const b=await c(x._context).contentFrameIdForFrame(x);return b?this._page.frameManager.frame(b):null}async getOwnerFrame(x){const T=await x.evaluateHandle(p=>(p.ownerDocument??p).defaultView);return T?c(x._context).frameIdForWindowHandle(T):null}async getBoundingBox(x){const T=await x.evaluate(p=>{if(!(p instanceof Element))return null;const O=p.getBoundingClientRect();return{x:O.x,y:O.y,width:O.width,height:O.height}});if(!T)return null;const b=await this._framePosition(x._frame);return b?(T.x+=b.x,T.y+=b.y,T):null}async _framePosition(x){if(x===this._page.mainFrame())return{x:0,y:0};const T=await x.frameElement(),b=await T.boundingBox();if(!b)return null;const p=await T.evaluateInUtility(([O,z])=>O.describeIFrameStyle(z),{}).catch(O=>"error:notconnected");return p==="error:notconnected"||p==="transformed"?null:(b.x+=p.left,b.y+=p.top,b)}async scrollRectIntoViewIfNeeded(x,T){return await x.evaluateInUtility(([b,p])=>{p.scrollIntoView({block:"center",inline:"center",behavior:"instant"})},null).then(()=>"done").catch(b=>{if(b instanceof Error&&b.message.includes("Node is detached from document"))return"error:notconnected";if(b instanceof Error&&b.message.includes("Node does not have a layout object"))return"error:notvisible";throw b})}async setScreencastOptions(x){}rafCountForStablePosition(){return 1}async getContentQuads(x){const T=await x.evaluateInUtility(([p,O])=>{if(!O.isConnected)return"error:notconnected";const z=O.getClientRects();return z?[...z].map($=>[{x:$.left,y:$.top},{x:$.right,y:$.top},{x:$.right,y:$.bottom},{x:$.left,y:$.bottom}]):null},null);if(!T||T==="error:notconnected")return T;const b=await this._framePosition(x._frame);return b?(T.forEach(p=>p.forEach(O=>{O.x+=b.x,O.y+=b.y})),T):null}async setInputFilePaths(x,T){const b=c(x._context);await this._session.send("input.setFiles",{context:this._session.sessionId,element:await b.nodeIdForElementHandle(x),files:T})}async adoptElementHandle(x,T){const p=await c(x._context).nodeIdForElementHandle(x);return await c(T).remoteObjectForNodeId(T,p)}async getAccessibilityTree(x){throw new Error("Method not implemented.")}async inputActionEpilogue(){}async resetForReuse(x){}async pdf(x){return this._pdf.generate(x)}async getFrameElement(x){const T=x.parentFrame();if(!T)throw new Error("Frame has been detached.");const p=await(await T._mainContext()).evaluateHandle(()=>[...document.querySelectorAll("iframe,frame")]),O=await p.evaluate($=>$.length);let z=null;for(let $=0;$<O;$++){const q=await p.evaluateHandle((le,_e)=>le[_e],$),J=await q.contentFrame();if(x===J){z=q;break}else q.dispose()}if(p.dispose(),!z)throw new Error("Frame has been detached.");return z}shouldToggleStyleSheetToSyncAnimations(){return!0}}function c(l){return l.delegate}return ud}var dd,F0;function dy(){if(F0)return dd;F0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(l,x)=>{for(var T in x)r(l,T,{get:x[T],enumerable:!0})},P=(l,x,T,b)=>{if(x&&typeof x=="object"||typeof x=="function")for(let p of E(x))!V.call(l,p)&&p!==T&&r(l,p,{get:()=>x[p],enumerable:!(b=i(x,p))||b.enumerable});return l},e=(l,x,T)=>(T=l!=null?t(R(l)):{},P(!l||!l.__esModule?r(T,"default",{value:l,enumerable:!0}):T,l)),U=l=>P(r({},"__esModule",{value:!0}),l),C={};te(C,{BidiBrowser:()=>n,BidiBrowserContext:()=>o,Network:()=>c}),dd=U(C);var w=qr(),g=Ti(),u=Ir(),_=e(fn()),f=gf(),d=uy(),v=nT(),a=Kr(),s=e(Zs());class n extends g.Browser{constructor(x,T,b){super(x,b),this._contexts=new Map,this._bidiPages=new Map,this._connection=new f.BidiConnection(T,this._onDisconnect.bind(this),b.protocolLogger,b.browserLogsCollector),this._browserSession=this._connection.browserSession,this._eventListeners=[w.eventsHelper.addEventListener(this._browserSession,"browsingContext.contextCreated",this._onBrowsingContextCreated.bind(this)),w.eventsHelper.addEventListener(this._browserSession,"script.realmDestroyed",this._onScriptRealmDestroyed.bind(this))]}static async connect(x,T,b){const p=new n(x,T,b);b.__testHookOnConnectToBrowser&&await b.__testHookOnConnectToBrowser();let O;if(b.proxy){O={proxyType:"manual"};const z=new URL(b.proxy.server);switch(z.protocol){case"http:":O.httpProxy=z.host;break;case"https:":O.httpsProxy=z.host;break;case"socks4:":O.socksProxy=z.host,O.socksVersion=4;break;case"socks5:":O.socksProxy=z.host,O.socksVersion=5;break;default:throw new Error("Invalid proxy server protocol: "+b.proxy.server)}b.proxy.bypass&&(O.noProxy=b.proxy.bypass.split(","))}if(p._bidiSessionInfo=await p._browserSession.send("session.new",{capabilities:{alwaysMatch:{acceptInsecureCerts:!1,proxy:O,unhandledPromptBehavior:{default:s.Session.UserPromptHandlerType.Ignore},webSocketUrl:!0}}}),await p._browserSession.send("session.subscribe",{events:["browsingContext","network","log","script"]}),b.persistent){const z=new o(p,void 0,b.persistent);p._defaultContext=z,await z._initialize(),await(await p._defaultContext.doCreateNewPage()).waitForInitializedOrError()}return p}_onDisconnect(){this._didClose()}async doCreateNewContext(x){const{userContext:T}=await this._browserSession.send("browser.createUserContext",{acceptInsecureCerts:x.ignoreHTTPSErrors}),b=new o(this,T,x);return await b._initialize(),this._contexts.set(T,b),b}contexts(){return Array.from(this._contexts.values())}version(){return this._bidiSessionInfo.capabilities.browserVersion}userAgent(){return this._bidiSessionInfo.capabilities.userAgent}isConnected(){return!this._connection.isClosed()}_onBrowsingContextCreated(x){if(x.parent){const z=x.parent;for(const $ of this._bidiPages.values()){if(!$._page.frameManager.frame(z))continue;$._session.addFrameBrowsingContext(x.context),$._page.frameManager.frameAttached(x.context,z);const J=$._page.frameManager.frame(x.context);J&&(J._url=x.url);return}return}let T=this._contexts.get(x.userContext);if(T||(T=this._defaultContext),!T)return;const b=this._connection.createMainFrameBrowsingContextSession(x.context),p=x.originalOpener&&this._bidiPages.get(x.originalOpener),O=new v.BidiPage(T,b,p||null);O._page.mainFrame()._url=x.url,this._bidiPages.set(x.context,O)}_onBrowsingContextDestroyed(x){if(x.parent){this._browserSession.removeFrameBrowsingContext(x.context);const b=x.parent;for(const p of this._bidiPages.values())if(p._page.frameManager.frame(b)){p._page.frameManager.frameDetached(x.context);return}return}const T=this._bidiPages.get(x.context);T&&(T.didClose(),this._bidiPages.delete(x.context))}_onScriptRealmDestroyed(x){for(const T of this._bidiPages.values())if(T._onRealmDestroyed(x))return}}class o extends u.BrowserContext{constructor(x,T,b){super(x,b,T),this._originToPermissions=new Map,this._blockingPageCreations=new Set,this._initScriptIds=new Map,this._authenticateProxyViaHeader()}_bidiPages(){return[...this._browser._bidiPages.values()].filter(x=>x._browserContext===this)}async _initialize(){const x=[super._initialize()];x.push(this.doUpdateDefaultViewport()),this._options.geolocation&&x.push(this.setGeolocation(this._options.geolocation)),await Promise.all(x)}possiblyUninitializedPages(){return this._bidiPages().map(x=>x._page)}async doCreateNewPage(x){const T=this._createNewPageImpl(x);x&&this._blockingPageCreations.add(T);try{return await T}finally{this._blockingPageCreations.delete(T)}}async _createNewPageImpl(x){const{context:T}=await this._browser._browserSession.send("browsingContext.create",{type:s.BrowsingContext.CreateType.Window,userContext:this._browserContextId}),b=this._browser._bidiPages.get(T)._page;return x&&b.markAsServerSideOnly(),b}async waitForBlockingPageCreations(){await Promise.all([...this._blockingPageCreations].map(x=>x.catch(()=>{})))}async doGetCookies(x){const{cookies:T}=await this._browser._browserSession.send("storage.getCookies",{partition:{type:"storageKey",userContext:this._browserContextId}});return _.filterCookies(T.map(b=>({name:b.name,value:(0,d.bidiBytesValueToString)(b.value),domain:b.domain,path:b.path,httpOnly:b.httpOnly,secure:b.secure,expires:b.expiry??-1,sameSite:b.sameSite?h(b.sameSite):"None"})),x)}async addCookies(x){x=_.rewriteCookies(x);const T=x.map(b=>{const p={name:b.name,value:{type:"string",value:b.value},domain:b.domain,path:b.path,httpOnly:b.httpOnly,secure:b.secure,sameSite:b.sameSite&&m(b.sameSite),expiry:b.expires===-1||b.expires===void 0?void 0:Math.round(b.expires)};return this._browser._browserSession.send("storage.setCookie",{cookie:p,partition:{type:"storageKey",userContext:this._browserContextId}})});await Promise.all(T)}async doClearCookies(){await this._browser._browserSession.send("storage.deleteCookies",{partition:{type:"storageKey",userContext:this._browserContextId}})}async doGrantPermissions(x,T){const b=this._originToPermissions.get(x)||[],p=T.filter(O=>!b.includes(O));this._originToPermissions.set(x,[...b,...p]),await Promise.all(p.map(O=>this._setPermission(x,O,s.Permissions.PermissionState.Granted)))}async doClearPermissions(){const x=[...this._originToPermissions.entries()];this._originToPermissions=new Map,await Promise.all(x.map(([T,b])=>b.map(p=>this._setPermission(T,p,s.Permissions.PermissionState.Prompt))))}async _setPermission(x,T,b){await this._browser._browserSession.send("permissions.setPermission",{descriptor:{name:T},state:b,origin:x,userContext:this._browserContextId||"default"})}async setGeolocation(x){(0,u.verifyGeolocation)(x),this._options.geolocation=x,await this._browser._browserSession.send("emulation.setGeolocationOverride",{coordinates:x?{latitude:x.latitude,longitude:x.longitude,accuracy:x.accuracy}:null,userContexts:[this._browserContextId||"default"]})}async doUpdateExtraHTTPHeaders(){}async setUserAgent(x){}async doUpdateOffline(){}async doSetHTTPCredentials(x){this._options.httpCredentials=x;for(const T of this.pages())await T.delegate.updateHttpCredentials()}async doAddInitScript(x){const{script:T}=await this._browser._browserSession.send("script.addPreloadScript",{functionDeclaration:`() => { return ${x.source} }`,userContexts:[this._browserContextId||"default"]});this._initScriptIds.set(x,T)}async doRemoveInitScripts(x){const T=[];for(const b of x){const p=this._initScriptIds.get(b);p&&T.push(p),this._initScriptIds.delete(b)}await Promise.all(T.map(b=>this._browser._browserSession.send("script.removePreloadScript",{script:b})))}async doUpdateRequestInterception(){}async doUpdateDefaultViewport(){this._options.viewport&&await this._browser._browserSession.send("browsingContext.setViewport",{viewport:{width:this._options.viewport.width,height:this._options.viewport.height},devicePixelRatio:this._options.deviceScaleFactor||1,userContexts:[this._userContextId()]})}async doUpdateDefaultEmulatedMedia(){}async doExposePlaywrightBinding(){const x=[{type:"channel",value:{channel:v.kPlaywrightBindingChannel,ownership:s.Script.ResultOwnership.Root}}],T=`function addMainBinding(callback) { globalThis['${a.PageBinding.kBindingName}'] = callback; }`,b=[];b.push(this._browser._browserSession.send("script.addPreloadScript",{functionDeclaration:T,arguments:x,userContexts:[this._userContextId()]})),b.push(...this._bidiPages().map(p=>{const O=[...p._realmToContext].filter(([z,$])=>$.world==="main").map(([z,$])=>z);return Promise.all(O.map(z=>p._session.send("script.callFunction",{functionDeclaration:T,arguments:x,target:{realm:z},awaitPromise:!1,userActivation:!1})))})),await Promise.all(b)}onClosePersistent(){}async clearCache(){}async doClose(x){if(!this._browserContextId){await this._browser.close({reason:x});return}await this._browser._browserSession.send("browser.removeUserContext",{userContext:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}async cancelDownload(x){}_userContextId(){return this._browserContextId?this._browserContextId:"default"}}function h(l){switch(l){case"strict":return"Strict";case"lax":return"Lax";case"none":return"None"}return"None"}function m(l){switch(l){case"Strict":return s.Network.SameSite.Strict;case"Lax":return s.Network.SameSite.Lax;case"None":return s.Network.SameSite.None}return s.Network.SameSite.None}var c;return(l=>{(x=>{x.Strict="strict",x.Lax="lax",x.None="none"})(l.SameSite||(l.SameSite={}))})(c||(c={})),dd}var hd,B0;function iT(){if(B0)return hd;B0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(_,f)=>{for(var d in f)r(_,d,{get:f[d],enumerable:!0})},P=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of E(f))!V.call(_,a)&&a!==d&&r(_,a,{get:()=>f[a],enumerable:!(v=i(f,a))||v.enumerable});return _},e=(_,f,d)=>(d=_!=null?t(R(_)):{},P(!_||!_.__esModule?r(d,"default",{value:_,enumerable:!0}):d,_)),U=_=>P(r({},"__esModule",{value:!0}),_),C={};te(C,{CRDevTools:()=>u}),hd=U(C);var w=e(Je);const g="__pw_devtools__";class u{constructor(f){this._preferencesPath=f,this._savePromise=Promise.resolve()}install(f){f.on("Runtime.bindingCalled",async d=>{if(d.name!==g)return;const v=JSON.parse(d.payload);let a;if(this.__testHookOnBinding&&this.__testHookOnBinding(v),v.method==="getPreferences"){if(this._prefs===void 0)try{const s=await w.default.promises.readFile(this._preferencesPath,"utf8");this._prefs=JSON.parse(s)}catch{this._prefs={}}a=this._prefs}else v.method==="setPreference"?(this._prefs[v.params[0]]=v.params[1],this._save()):v.method==="removePreference"?(delete this._prefs[v.params[0]],this._save()):v.method==="clearPreferences"&&(this._prefs={},this._save());f.send("Runtime.evaluate",{expression:`window.DevToolsAPI.embedderMessageAck(${v.id}, ${JSON.stringify(a)})`,contextId:d.executionContextId}).catch(s=>null)}),Promise.all([f.send("Runtime.enable"),f.send("Runtime.addBinding",{name:g}),f.send("Page.enable"),f.send("Page.addScriptToEvaluateOnNewDocument",{source:`
        (() => {
          const init = () => {
            // Lazy init happens when InspectorFrontendHost is initialized.
            // At this point DevToolsHost is ready to be used.
            const host = window.DevToolsHost;
            const old = host.sendMessageToEmbedder.bind(host);
            host.sendMessageToEmbedder = message => {
              if (['getPreferences', 'setPreference', 'removePreference', 'clearPreferences'].includes(JSON.parse(message).method))
                window.${g}(message);
              else
                old(message);
            };
          };
          let value;
          Object.defineProperty(window, 'InspectorFrontendHost', {
            configurable: true,
            enumerable: true,
            get() { return value; },
            set(v) { value = v; init(); },
          });
        })()
      `}),f.send("Runtime.runIfWaitingForDebugger")]).catch(d=>null)}_save(){this._savePromise=this._savePromise.then(async()=>{await w.default.promises.writeFile(this._preferencesPath,JSON.stringify(this._prefs)).catch(f=>null)})}}return hd}var pd,j0;function hy(){if(j0)return pd;j0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(y,I)=>{for(var D in I)i(y,D,{get:I[D],enumerable:!0})},e=(y,I,D,ie)=>{if(I&&typeof I=="object"||typeof I=="function")for(let he of R(I))!te.call(y,he)&&he!==D&&i(y,he,{get:()=>I[he],enumerable:!(ie=E(I,he))||ie.enumerable});return y},U=(y,I,D)=>(D=y!=null?r(V(y)):{},e(!y||!y.__esModule?i(D,"default",{value:y,enumerable:!0}):D,y)),C=y=>e(i({},"__esModule",{value:!0}),y),w={};P(w,{Chromium:()=>J,waitForReadyState:()=>le}),pd=C(w);var g=U(Je),u=U(Je),_=U(Je),f=hf(),d=Xs(),v=Lo(),a=nr(),s=Yn(),n=Mr(),o=Fr(),h=Ki(),m=xi(),c=Ir(),l=Qs(),x=hn(),T=ui(),b=Do(),p=iT(),O=Ti(),z=Ln(),$=Gi();const q=_.default.join(u.default.tmpdir(),"playwright-artifacts-");class J extends l.BrowserType{constructor(I){super(I,"chromium"),(0,a.debugMode)()&&(this._devtools=this._createDevTools())}async connectOverCDP(I,D,ie){return await this._connectOverCDPInternal(I,D,ie)}async _connectOverCDPInternal(I,D,ie,he){let me;ie.headers&&(me=(0,a.headersArrayToObject)(ie.headers,!1)),me?me&&!Object.keys(me).some(yt=>yt.toLowerCase()==="user-agent")&&(me["User-Agent"]=(0,m.getUserAgent)()):me={"User-Agent":(0,m.getUserAgent)()};const ye=await I.race(g.default.promises.mkdtemp(q)),Se=await _e(I,D,me),Oe=await b.WebSocketTransport.connect(I,Se,{headers:me});I.cleanupWhenAborted(()=>Oe.close());const Pe=new o.ManualPromise,Ne=async()=>{await(0,z.removeFolders)([ye]),await(he==null?void 0:he()),Pe.resolve()},Le=async()=>{await Oe.closeAndWait(),await Pe},qe={close:Le,kill:Le},Ge={noDefaultViewport:!0},ot={slowMo:ie.slowMo,name:"chromium",isChromium:!0,persistent:Ge,browserProcess:qe,protocolLogger:x.helper.debugProtocolLogger(),browserLogsCollector:new n.RecentLogsCollector,artifactsDir:ye,downloadsPath:ie.downloadsPath||ye,tracesDir:ie.tracesDir||ye,originalLaunchOptions:{}};(0,c.validateBrowserContextOptions)(Ge,ot);const dt=await I.race(d.CRBrowser.connect(this.attribution.playwright,Oe,ot));return dt._isCollocatedWithServer=!1,dt.on(O.Browser.Events.Disconnected,Ne),dt}_createDevTools(){const I=T.registry.findExecutable("chromium").directory;return I?new p.CRDevTools(_.default.join(I,"devtools-preferences.json")):void 0}async connectToTransport(I,D,ie){let he=this._devtools;D.__testHookForDevTools&&(he=this._createDevTools(),await D.__testHookForDevTools(he));try{return await d.CRBrowser.connect(this.attribution.playwright,I,D,he)}catch(me){throw ie.recentLogs().some(ye=>ye.includes("Failed to create a ProcessSingleton for your profile directory."))?new Error("Failed to create a ProcessSingleton for your profile directory. This usually means that the profile is already in use by another instance of Chromium."):me}}doRewriteStartupLog(I){return!I.logs||(I.logs.includes("Missing X server")&&(I.logs=`
`+(0,s.wrapInASCIIBox)(l.kNoXServerRunningError,1)),!I.logs.includes("crbug.com/357670")&&!I.logs.includes("No usable sandbox!")&&!I.logs.includes("crbug.com/638180"))||(I.logs=["Chromium sandboxing failed!","================================","To avoid the sandboxing issue, do either of the following:","  - (preferred): Configure your environment to support sandboxing","  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option","================================",""].join(`
`)),I}amendEnvironment(I){return I}attemptToGracefullyCloseBrowser(I){const D={method:"Browser.close",id:v.kBrowserCloseMessageId,params:{}};I.send(D)}async _launchWithSeleniumHub(I,D,ie){await I.race(this._createArtifactDirs(ie)),D.endsWith("/")||(D=D+"/");const he=this._innerDefaultArgs(ie);he.push("--remote-debugging-port=0");const me=ie.channel&&ie.channel.startsWith("msedge");let ye={browserName:me?"MicrosoftEdge":"chrome",[me?"ms:edgeOptions":"goog:chromeOptions"]:{args:he}};if(t.SELENIUM_REMOTE_CAPABILITIES){const qe=j({name:"capabilities",value:t.SELENIUM_REMOTE_CAPABILITIES},I);qe&&(ye={...ye,...qe})}let Se={};if(t.SELENIUM_REMOTE_HEADERS){const qe=j({name:"headers",value:t.SELENIUM_REMOTE_HEADERS},I);qe&&(Se=qe)}I.log(`<selenium> connecting to ${D}`);const Oe=await(0,h.fetchData)(I,{url:D+"session",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",...Se},data:JSON.stringify({capabilities:{alwaysMatch:ye}})},ge),Pe=JSON.parse(Oe).value,Ne=Pe.sessionId;I.log(`<selenium> connected to sessionId=${Ne}`);const Le=async()=>{I.log(`<selenium> disconnecting from sessionId=${Ne}`),await(0,h.fetchData)(void 0,{url:D+"session/"+Ne,method:"DELETE",headers:Se}).catch(qe=>I.log(`<error disconnecting from selenium>: ${qe}`)),I.log(`<selenium> disconnected from sessionId=${Ne}`),$.gracefullyCloseSet.delete(Le)};$.gracefullyCloseSet.add(Le);try{const qe=Pe.capabilities;let Ge;if(qe["se:cdp"]){I.log("<selenium> using selenium v4");const ot=ne(qe["se:cdp"]);Ge=new URL(ot),(Ge.hostname==="localhost"||Ge.hostname==="127.0.0.1")&&(Ge.hostname=new URL(D).hostname),I.log(`<selenium> retrieved endpoint ${Ge.toString()} for sessionId=${Ne}`)}else{I.log("<selenium> using selenium v3");const ot=qe["goog:chromeOptions"],dt=ot&&typeof ot=="object"?ot:void 0,yt=dt&&typeof dt.debuggerAddress=="string"?dt.debuggerAddress:void 0,gt=ne(yt||(typeof ot=="string"?ot:void 0)).replace("localhost","127.0.0.1");if(I.log(`<selenium> retrieved endpoint ${gt} for sessionId=${Ne}`),Ge=new URL(gt),Ge.hostname==="localhost"||Ge.hostname==="127.0.0.1"){const Ut=new URL(D).origin+"/grid/api/testsession?session="+Ne;try{const Xt=await(0,h.fetchData)(I,{url:Ut,method:"GET",headers:Se},ge),st=JSON.parse(Xt).proxyId;Ge.hostname=new URL(st).hostname,I.log(`<selenium> resolved endpoint ip ${Ge.toString()} for sessionId=${Ne}`)}catch{I.log(`<selenium> unable to resolve endpoint ip for sessionId=${Ne}, running in standalone?`)}}}return await this._connectOverCDPInternal(I,Ge.toString(),{...ie,headers:(0,a.headersObjectToArray)(Se)},Le)}catch(qe){throw await Le(),qe}}defaultArgs(I,D,ie){const he=this._innerDefaultArgs(I);return he.push(`--user-data-dir=${ie}`),I.cdpPort!==void 0?he.push(`--remote-debugging-port=${I.cdpPort}`):he.push("--remote-debugging-pipe"),D?he.push("about:blank"):he.push("--no-startup-window"),he}_innerDefaultArgs(I){const{args:D=[]}=I;if(D.find(ye=>ye.startsWith("--user-data-dir")))throw this._createUserDataDirArgMisuseError("--user-data-dir");if(D.find(ye=>ye.startsWith("--remote-debugging-pipe")))throw new Error("Playwright manages remote debugging connection itself.");if(D.find(ye=>!ye.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const he=[...(0,f.chromiumSwitches)(I.assistantMode,I.channel)];u.default.platform()==="darwin"&&(he.push("--enable-use-zoom-for-dsf=false"),he.push("--enable-unsafe-swiftshader")),I.devtools&&he.push("--auto-open-devtools-for-tabs"),I.headless&&(he.push("--headless"),he.push("--hide-scrollbars","--mute-audio","--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4")),I.chromiumSandbox!==!0&&he.push("--no-sandbox");const me=I.proxyOverride||I.proxy;if(me){const ye=new URL(me.server);ye.protocol==="socks5:"&&!I.socksProxyPort&&he.push(`--host-resolver-rules="MAP * ~NOTFOUND , EXCLUDE ${ye.hostname}"`),he.push(`--proxy-server=${me.server}`);const Oe=[];I.socksProxyPort&&Oe.push("<-loopback>"),me.bypass&&Oe.push(...me.bypass.split(",").map(Pe=>Pe.trim()).map(Pe=>Pe.startsWith(".")?"*"+Pe:Pe)),!t.PLAYWRIGHT_DISABLE_FORCED_CHROMIUM_PROXIED_LOOPBACK&&!Oe.includes("<-loopback>")&&Oe.push("<-loopback>"),Oe.length>0&&he.push(`--proxy-bypass-list=${Oe.join(";")}`)}return he.push(...D),he}async waitForReadyState(I,D){return le(I,D)}getExecutableName(I){return I.channel?I.channel:I.headless?"chromium-headless-shell":"chromium"}}async function le(y,I){var ie;if(y.cdpPort===void 0&&!((ie=y.args)!=null&&ie.some(he=>he.startsWith("--remote-debugging-port"))))return{};const D=new o.ManualPromise;return I.onMessage(he=>{he.includes("Failed to create a ProcessSingleton for your profile directory.")&&D.reject(new Error("Failed to create a ProcessSingleton for your profile directory. This usually means that the profile is already in use by another instance of Chromium."));const me=he.match(/DevTools listening on (.*)/);me&&D.resolve({wsEndpoint:me[1]})}),D}async function _e(y,I,D){if(I.startsWith("ws"))return I;y.log(`<ws preparing> retrieving websocket url from ${I}`);const ie=new URL(I);ie.pathname.endsWith("/")||(ie.pathname+="/"),ie.pathname+="json/version/";const he=ie.toString(),me=await(0,h.fetchData)(y,{url:he,headers:D},async(ye,Se)=>new Error(`Unexpected status ${Se.statusCode} when connecting to ${he}.
This does not look like a DevTools server, try connecting via ws://.`));return JSON.parse(me).webSocketDebuggerUrl}async function ge(y,I){const D=await S(I);let ie=D;try{const he=JSON.parse(D);ie=he.value.localizedMessage||he.value.message}catch{}return new Error(`Error connecting to Selenium at ${y.url}: ${ie}`)}function ne(y){return["ws://","wss://","http://","https://"].some(I=>y.startsWith(I))?y:"http://"+y}function S(y){return new Promise((I,D)=>{const ie=[];y.on("data",he=>ie.push(Buffer.from(he))),y.on("error",D),y.on("end",()=>I(Buffer.concat(ie).toString("utf8")))})}function j(y,I){try{const D=JSON.parse(y.value);return I.log(`<selenium> using additional ${y.name} "${y.value}"`),D}catch(D){I.log(`<selenium> ignoring additional ${y.name} "${y.value}": ${D}`)}}return pd}var fd,H0;function sT(){if(H0)return fd;H0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(s,n)=>{for(var o in n)r(s,o,{get:n[o],enumerable:!0})},P=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of E(n))!V.call(s,m)&&m!==o&&r(s,m,{get:()=>n[m],enumerable:!(h=i(n,m))||h.enumerable});return s},e=(s,n,o)=>(o=s!=null?t(R(s)):{},P(!s||!s.__esModule?r(o,"default",{value:s,enumerable:!0}):o,s)),U=s=>P(r({},"__esModule",{value:!0}),s),C={};te(C,{connectBidiOverCdp:()=>f}),fd=U(C);var w=e(JE),g=e(YE),u=Mr();const _=(s,...n)=>{u.debugLogger.log(s,n)};async function f(s){let n;const o=new d,h=new v(o,()=>n==null?void 0:n.close()),m=new a(s),c=new g.MapperCdpConnection(m,_);return s.onclose=()=>{var l;return(l=h.onclose)==null?void 0:l.call(h)},n=await w.BidiServer.createAndStart(o,c,await c.createBrowserSession(),"",void 0,_),h}class d{setOnMessage(n){this._handler=n}sendMessage(n){var o,h;return(h=(o=this._bidiConnection).onmessage)==null?void 0:h.call(o,n)}close(){var n,o;(o=(n=this._bidiConnection).onclose)==null||o.call(n)}}class v{constructor(n,o){this._bidiTransport=n,this._bidiTransport._bidiConnection=this,this._closeCallback=o}send(n){var o,h;(h=(o=this._bidiTransport)._handler)==null||h.call(o,n)}close(){this._closeCallback()}}class a{constructor(n){this._connection=n,this._connection.onmessage=o=>{var h;(h=this._handler)==null||h.call(this,JSON.stringify(o))}}setOnMessage(n){this._handler=n}sendMessage(n){return this._connection.send(JSON.parse(n))}close(){this._connection.close()}}return fd}var md,U0;function aT(){if(U0)return md;U0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(o,h)=>{for(var m in h)i(o,m,{get:h[m],enumerable:!0})},e=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of R(h))!te.call(o,l)&&l!==m&&i(o,l,{get:()=>h[l],enumerable:!(c=E(h,l))||c.enumerable});return o},U=(o,h,m)=>(m=o!=null?r(V(o)):{},e(!o||!o.__esModule?i(m,"default",{value:o,enumerable:!0}):m,o)),C=o=>e(i({},"__esModule",{value:!0}),o),w={};P(w,{BidiChromium:()=>s}),md=C(w);var g=U(Je),u=Yn(),_=Qs(),f=dy(),d=gf(),v=hf(),a=hy();class s extends _.BrowserType{constructor(h){super(h,"_bidiChromium")}async connectToTransport(h,m,c){const l=await sT().connectBidiOverCdp(h);h[n]=l;try{return f.BidiBrowser.connect(this.attribution.playwright,l,m)}catch(x){throw c.recentLogs().some(T=>T.includes("Failed to create a ProcessSingleton for your profile directory."))?new Error("Failed to create a ProcessSingleton for your profile directory. This usually means that the profile is already in use by another instance of Chromium."):x}}doRewriteStartupLog(h){return!h.logs||(h.logs.includes("Missing X server")&&(h.logs=`
`+(0,u.wrapInASCIIBox)(_.kNoXServerRunningError,1)),!h.logs.includes("crbug.com/357670")&&!h.logs.includes("No usable sandbox!")&&!h.logs.includes("crbug.com/638180"))||(h.logs=["Chromium sandboxing failed!","================================","To avoid the sandboxing issue, do either of the following:","  - (preferred): Configure your environment to support sandboxing","  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option","================================",""].join(`
`)),h}amendEnvironment(h){return h}attemptToGracefullyCloseBrowser(h){const m=h[n];m&&(h=m),h.send({method:"browser.close",params:{},id:d.kBrowserCloseMessageId})}supportsPipeTransport(){return!1}defaultArgs(h,m,c){const l=this._innerDefaultArgs(h);return l.push(`--user-data-dir=${c}`),l.push("--remote-debugging-port=0"),m?l.push("about:blank"):l.push("--no-startup-window"),l}async waitForReadyState(h,m){return(0,a.waitForReadyState)({...h,cdpPort:0},m)}_innerDefaultArgs(h){const{args:m=[]}=h;if(m.find(T=>T.startsWith("--user-data-dir")))throw this._createUserDataDirArgMisuseError("--user-data-dir");if(m.find(T=>T.startsWith("--remote-debugging-pipe")))throw new Error("Playwright manages remote debugging connection itself.");if(m.find(T=>!T.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const l=[...(0,v.chromiumSwitches)(h.assistantMode)];g.default.platform()==="darwin"&&(l.push("--enable-use-zoom-for-dsf=false"),h.headless&&l.push("--use-angle")),h.devtools&&l.push("--auto-open-devtools-for-tabs"),h.headless&&(l.push("--headless"),l.push("--hide-scrollbars","--mute-audio","--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4")),h.chromiumSandbox!==!0&&l.push("--no-sandbox");const x=h.proxyOverride||h.proxy;if(x){const T=new URL(x.server);T.protocol==="socks5:"&&!h.socksProxyPort&&l.push(`--host-resolver-rules="MAP * ~NOTFOUND , EXCLUDE ${T.hostname}"`),l.push(`--proxy-server=${x.server}`);const p=[];h.socksProxyPort&&p.push("<-loopback>"),x.bypass&&p.push(...x.bypass.split(",").map(O=>O.trim()).map(O=>O.startsWith(".")?"*"+O:O)),!t.PLAYWRIGHT_DISABLE_FORCED_CHROMIUM_PROXIED_LOOPBACK&&!p.includes("<-loopback>")&&p.push("<-loopback>"),p.length>0&&l.push(`--proxy-bypass-list=${p.join(";")}`)}return l.push(...m),l}}const n=Symbol("kBidiConnectionWrapper");return md}var gd,q0;function oT(){if(q0)return gd;q0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},P=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!V.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},e=(d,v,a)=>(a=d!=null?t(R(d)):{},P(!d||!d.__esModule?r(a,"default",{value:d,enumerable:!0}):a,d)),U=d=>P(r({},"__esModule",{value:!0}),d),C={};te(C,{createProfile:()=>u}),gd=U(C);var w=e(Je),g=e(Je);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function u(d){w.default.existsSync(d.path)||await w.default.promises.mkdir(d.path,{recursive:!0}),await f({preferences:{..._(d.preferences),...d.preferences},path:d.path})}function _(d){const v="dummy.test",a={"app.normandy.api_url":"","app.update.checkInstallTime":!1,"app.update.disabledForTesting":!0,"apz.content_response_timeout":6e4,"browser.contentblocking.features.standard":"-tp,tpPrivate,cookieBehavior0,-cm,-fp","browser.dom.window.dump.enabled":!0,"browser.newtabpage.activity-stream.discoverystream.region-weather-config":"","browser.newtabpage.activity-stream.newtabWallpapers.enabled":!1,"browser.newtabpage.activity-stream.newtabWallpapers.v2.enabled":!1,"browser.newtabpage.activity-stream.showSponsoredTopSites":!1,"browser.newtabpage.activity-stream.feeds.system.topstories":!1,"browser.newtabpage.enabled":!1,"browser.pagethumbnails.capturing_disabled":!0,"browser.safebrowsing.blockedURIs.enabled":!1,"browser.safebrowsing.downloads.enabled":!1,"browser.safebrowsing.malware.enabled":!1,"browser.safebrowsing.phishing.enabled":!1,"browser.search.update":!1,"browser.sessionstore.resume_from_crash":!1,"browser.shell.checkDefaultBrowser":!1,"browser.startup.homepage":"about:blank","browser.startup.homepage_override.mstone":"ignore","browser.startup.page":0,"browser.tabs.disableBackgroundZombification":!1,"browser.tabs.warnOnCloseOtherTabs":!1,"browser.tabs.warnOnOpen":!1,"browser.translations.automaticallyPopup":!1,"browser.uitour.enabled":!1,"browser.urlbar.suggest.searches":!1,"browser.usedOnWindows10.introURL":"","browser.warnOnQuit":!1,"datareporting.healthreport.documentServerURI":`http://${v}/dummy/healthreport/`,"datareporting.healthreport.logging.consoleEnabled":!1,"datareporting.healthreport.service.enabled":!1,"datareporting.healthreport.service.firstRun":!1,"datareporting.healthreport.uploadEnabled":!1,"datareporting.policy.dataSubmissionEnabled":!1,"datareporting.policy.dataSubmissionPolicyBypassNotification":!0,"devtools.jsonview.enabled":!1,"dom.disable_open_during_load":!1,"dom.file.createInChild":!0,"dom.ipc.reportProcessHangs":!1,"dom.max_chrome_script_run_time":0,"dom.max_script_run_time":0,"dom.min_background_timeout_value":0,"dom.min_background_timeout_value_without_budget_throttling":0,"dom.timeout.enable_budget_timer_throttling":!1,"dom.security.https_first":!1,"extensions.autoDisableScopes":0,"extensions.enabledScopes":5,"extensions.getAddons.cache.enabled":!1,"extensions.installDistroAddons":!1,"extensions.screenshots.disabled":!0,"extensions.update.enabled":!1,"extensions.update.notifyUser":!1,"extensions.webservice.discoverURL":`http://${v}/dummy/discoveryURL`,"focusmanager.testmode":!0,"general.useragent.updates.enabled":!1,"geo.provider.testing":!0,"geo.wifi.scan":!1,"hangmonitor.timeout":0,"javascript.options.showInConsole":!0,"layout.testing.top-level-always-active":!0,"media.gmp-manager.updateEnabled":!1,"media.sanity-test.disabled":!0,"network.connectivity-service.enabled":!1,"network.cookie.sameSite.laxByDefault":!1,"network.http.prompt-temp-redirect":!1,"network.http.speculative-parallel-limit":0,"network.manage-offline-status":!1,"network.sntp.pools":v,"plugin.state.flash":0,"privacy.trackingprotection.enabled":!1,"remote.enabled":!0,"security.certerrors.mitm.priming.enabled":!1,"security.fileuri.strict_origin_policy":!1,"security.notification_enable_delay":0,"signon.autofillForms":!1,"signon.rememberSignons":!1,"startup.homepage_welcome_url":"about:blank","startup.homepage_welcome_url.additional":"","toolkit.cosmeticAnimations.enabled":!1,"toolkit.startup.max_resumed_crashes":-1};return Object.assign(a,d)}async function f(d){const v=g.default.join(d.path,"prefs.js"),a=Object.entries(d.preferences).map(([n,o])=>`user_pref(${JSON.stringify(n)}, ${JSON.stringify(o)});`),s=await Promise.allSettled([w.default.promises.writeFile(g.default.join(d.path,"user.js"),a.join(`
`)),w.default.promises.access(v,w.default.constants.F_OK).then(async()=>{await w.default.promises.copyFile(v,g.default.join(d.path,"prefs.js.playwright"))},()=>{})]);for(const n of s)if(n.status==="rejected")throw n.reason}return gd}var _d,$0;function cT(){if($0)return _d;$0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(o,h)=>{for(var m in h)i(o,m,{get:h[m],enumerable:!0})},e=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of R(h))!te.call(o,l)&&l!==m&&i(o,l,{get:()=>h[l],enumerable:!(c=E(h,l))||c.enumerable});return o},U=(o,h,m)=>(m=o!=null?r(V(o)):{},e(!o||!o.__esModule?i(m,"default",{value:o,enumerable:!0}):m,o)),C=o=>e(i({},"__esModule",{value:!0}),o),w={};P(w,{BidiFirefox:()=>n}),_d=C(w);var g=U(Je),u=U(Je),_=Yn(),f=Qs(),d=dy(),v=gf(),a=oT(),s=Fr();class n extends f.BrowserType{constructor(h){super(h,"_bidiFirefox")}executablePath(){return""}async connectToTransport(h,m){return d.BidiBrowser.connect(this.attribution.playwright,h,m)}doRewriteStartupLog(h){return h.logs&&(h.logs.includes("as root in a regular user's session is not supported.")&&(h.logs=`
`+(0,_.wrapInASCIIBox)(`Firefox is unable to launch if the $HOME folder isn't owned by the current user.
Workaround: Set the HOME=/root environment variable${t.GITHUB_ACTION?" in your GitHub Actions workflow file":""} when running Playwright.`,1)),h.logs.includes("no DISPLAY environment variable specified")&&(h.logs=`
`+(0,_.wrapInASCIIBox)(f.kNoXServerRunningError,1))),h}amendEnvironment(h){if(!u.default.isAbsolute(g.default.homedir()))throw new Error(`Cannot launch Firefox with relative home directory. Did you set ${g.default.platform()==="win32"?"USERPROFILE":"HOME"} to a relative path?`);return h={...h,MOZ_CRASHREPORTER:"1",MOZ_CRASHREPORTER_NO_REPORT:"1",MOZ_CRASHREPORTER_SHUTDOWN:"1"},g.default.platform()==="linux"?{...h,SNAP_NAME:void 0,SNAP_INSTANCE_NAME:void 0}:h}attemptToGracefullyCloseBrowser(h){h.send({method:"browser.close",params:{},id:v.kBrowserCloseMessageId})}supportsPipeTransport(){return!1}async prepareUserDataDir(h,m){await(0,a.createProfile)({path:m,preferences:h.firefoxUserPrefs||{}})}defaultArgs(h,m,c){const{args:l=[],headless:x}=h;if(l.find(p=>p.startsWith("-profile")||p.startsWith("--profile")))throw this._createUserDataDirArgMisuseError("--profile");const b=["--remote-debugging-port=0"];return x?b.push("--headless"):b.push("--foreground"),b.push("--profile",c),b.push(...l),b}async waitForReadyState(h,m){const c=new s.ManualPromise;return m.onMessage(l=>{const x=l.match(/WebDriver BiDi listening on (ws:\/\/.*)$/);x&&c.resolve({wsEndpoint:x[1]+"/session"})}),c}}return _d}var bd,W0;function py(){if(W0)return bd;W0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{KeyParser:()=>u,ParserError:()=>_,parseAriaSnapshot:()=>U,parseAriaSnapshotUnsafe:()=>e,valueOrRegex:()=>g}),bd=te(P);function e(f,d){const v=U(f,d);if(v.errors.length)throw new Error(v.errors[0].message);return v.fragment}function U(f,d,v={}){var T;const a=new f.LineCounter,s={keepSourceTokens:!0,lineCounter:a,...v},n=f.parseDocument(d,s),o=[],h=b=>[a.linePos(b[0]),a.linePos(b[1])],m=b=>{o.push({message:b.message,range:[a.linePos(b.pos[0]),a.linePos(b.pos[1])]})},c=(b,p)=>{for(const O of p.items){if(O instanceof f.Scalar&&typeof O.value=="string"){const q=u.parse(O,s,o);q&&(b.children=b.children||[],b.children.push(q));continue}if(O instanceof f.YAMLMap){l(b,O);continue}o.push({message:"Sequence items should be strings or maps",range:h(O.range||p.range)})}},l=(b,p)=>{for(const O of p.items){if(b.children=b.children||[],!(O.key instanceof f.Scalar&&typeof O.key.value=="string")){o.push({message:"Only string keys are supported",range:h(O.key.range||p.range)});continue}const $=O.key,q=O.value;if($.value==="text"){if(!(q instanceof f.Scalar&&typeof q.value=="string")){o.push({message:"Text value should be a string",range:h(O.value.range||p.range)});continue}b.children.push({kind:"text",text:g(q.value)});continue}if($.value==="/children"){if(!(q instanceof f.Scalar&&typeof q.value=="string")||q.value!=="contain"&&q.value!=="equal"&&q.value!=="deep-equal"){o.push({message:'Strict value should be "contain", "equal" or "deep-equal"',range:h(O.value.range||p.range)});continue}b.containerMode=q.value;continue}if($.value.startsWith("/")){if(!(q instanceof f.Scalar&&typeof q.value=="string")){o.push({message:"Property value should be a string",range:h(O.value.range||p.range)});continue}b.props=b.props??{},b.props[$.value.slice(1)]=g(q.value);continue}const J=u.parse($,s,o);if(!J)continue;if(q instanceof f.Scalar){const ge=typeof q.value;if(ge!=="string"&&ge!=="number"&&ge!=="boolean"){o.push({message:"Node value should be a string or a sequence",range:h(O.value.range||p.range)});continue}b.children.push({...J,children:[{kind:"text",text:g(String(q.value))}]});continue}if(q instanceof f.YAMLSeq){b.children.push(J),c(J,q);continue}o.push({message:"Map values should be strings or sequences",range:h(O.value.range||p.range)})}},x={kind:"role",role:"fragment"};return n.errors.forEach(m),o.length?{errors:o,fragment:x}:(n.contents instanceof f.YAMLSeq||o.push({message:'Aria snapshot must be a YAML sequence, elements starting with " -"',range:n.contents?h(n.contents.range):[{line:0,col:0},{line:0,col:0}]}),o.length?{errors:o,fragment:x}:(c(x,n.contents),o.length?{errors:o,fragment:C}:((T=x.children)==null?void 0:T.length)===1&&(!x.containerMode||x.containerMode==="contain")?{fragment:x.children[0],errors:[]}:{fragment:x,errors:[]}))}const C={kind:"role",role:"fragment"};function w(f){return f.replace(/[\u200b\u00ad]/g,"").replace(/[\r\n\s\t]+/g," ").trim()}function g(f){return f.startsWith("/")&&f.endsWith("/")&&f.length>1?{pattern:f.slice(1,-1)}:w(f)}class u{static parse(d,v,a){try{return new u(d.value)._parse()}catch(s){if(s instanceof _){const n=v.prettyErrors===!1?s.message:s.message+`:

`+d.value+`
`+" ".repeat(s.pos)+`^
`;return a.push({message:n,range:[v.lineCounter.linePos(d.range[0]),v.lineCounter.linePos(d.range[0]+s.pos)]}),null}throw s}}constructor(d){this._input=d,this._pos=0,this._length=d.length}_peek(){return this._input[this._pos]||""}_next(){return this._pos<this._length?this._input[this._pos++]:null}_eof(){return this._pos>=this._length}_isWhitespace(){return!this._eof()&&/\s/.test(this._peek())}_skipWhitespace(){for(;this._isWhitespace();)this._pos++}_readIdentifier(d){this._eof()&&this._throwError(`Unexpected end of input when expecting ${d}`);const v=this._pos;for(;!this._eof()&&/[a-zA-Z]/.test(this._peek());)this._pos++;return this._input.slice(v,this._pos)}_readString(){let d="",v=!1;for(;!this._eof();){const a=this._next();if(v)d+=a,v=!1;else if(a==="\\")v=!0;else{if(a==='"')return d;d+=a}}this._throwError("Unterminated string")}_throwError(d,v=0){throw new _(d,v||this._pos)}_readRegex(){let d="",v=!1,a=!1;for(;!this._eof();){const s=this._next();if(v)d+=s,v=!1;else if(s==="\\")v=!0,d+=s;else{if(s==="/"&&!a)return{pattern:d};s==="["?(a=!0,d+=s):s==="]"&&a?(d+=s,a=!1):d+=s}}this._throwError("Unterminated regex")}_readStringOrRegex(){const d=this._peek();return d==='"'?(this._next(),w(this._readString())):d==="/"?(this._next(),this._readRegex()):null}_readAttributes(d){let v=this._pos;for(;this._skipWhitespace(),this._peek()==="[";){this._next(),this._skipWhitespace(),v=this._pos;const a=this._readIdentifier("attribute");this._skipWhitespace();let s="";if(this._peek()==="=")for(this._next(),this._skipWhitespace(),v=this._pos;this._peek()!=="]"&&!this._isWhitespace()&&!this._eof();)s+=this._next();this._skipWhitespace(),this._peek()!=="]"&&this._throwError("Expected ]"),this._next(),this._applyAttribute(d,a,s||"true",v)}}_parse(){this._skipWhitespace();const d=this._readIdentifier("role");this._skipWhitespace();const v=this._readStringOrRegex()||"",a={kind:"role",role:d,name:v};return this._readAttributes(a),this._skipWhitespace(),this._eof()||this._throwError("Unexpected input"),a}_applyAttribute(d,v,a,s){if(v==="checked"){this._assert(a==="true"||a==="false"||a==="mixed",'Value of "checked" attribute must be a boolean or "mixed"',s),d.checked=a==="true"?!0:a==="false"?!1:"mixed";return}if(v==="disabled"){this._assert(a==="true"||a==="false",'Value of "disabled" attribute must be a boolean',s),d.disabled=a==="true";return}if(v==="expanded"){this._assert(a==="true"||a==="false",'Value of "expanded" attribute must be a boolean',s),d.expanded=a==="true";return}if(v==="active"){this._assert(a==="true"||a==="false",'Value of "active" attribute must be a boolean',s),d.active=a==="true";return}if(v==="level"){this._assert(!isNaN(Number(a)),'Value of "level" attribute must be a number',s),d.level=Number(a);return}if(v==="pressed"){this._assert(a==="true"||a==="false"||a==="mixed",'Value of "pressed" attribute must be a boolean or "mixed"',s),d.pressed=a==="true"?!0:a==="false"?!1:"mixed";return}if(v==="selected"){this._assert(a==="true"||a==="false",'Value of "selected" attribute must be a boolean',s),d.selected=a==="true";return}this._assert(!1,`Unsupported attribute [${v}]`,s)}_assert(d,v,a){d||this._throwError(v||"Assertion error",a)}}class _ extends Error{constructor(d,v){super(d),this.pos=v}}return bd}var vd,z0;function fy(){if(z0)return vd;z0=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},te=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!R.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},P=m=>te(r({},"__esModule",{value:!0}),m),e={};V(e,{DebugController:()=>s}),vd=P(e);var U=Tr(),C=Gi(),w=df(),g=nr(),u=py(),_=Ar(),f=ay(),d=Ji(),v=Ys(),a=uf();const h=class h extends U.SdkObject{constructor(c){super({attribution:{isInternalPlaywright:!0},instrumentation:(0,U.createInstrumentation)()},void 0,"DebugController"),this._sdkLanguage="javascript",this._playwright=c}initialize(c,l){this._sdkLanguage=l}dispose(){this.setReportStateChanged(!1)}setReportStateChanged(c){c&&!this._trackHierarchyListener?(this._trackHierarchyListener={onPageOpen:()=>this._emitSnapshot(!1),onPageClose:()=>this._emitSnapshot(!1)},this._playwright.instrumentation.addListener(this._trackHierarchyListener,null),this._emitSnapshot(!0)):!c&&this._trackHierarchyListener&&(this._playwright.instrumentation.removeListener(this._trackHierarchyListener),this._trackHierarchyListener=void 0)}async resetForReuse(c){const l=new Set;for(const x of this._playwright.allPages())l.add(x.browserContext);for(const x of l)await x.resetForReuse(c,null)}async navigate(c,l){for(const x of this._playwright.allPages())await x.mainFrame().goto(c,l)}async setRecorderMode(c,l){if(await c.race(this._closeBrowsersWithoutPages()),l.mode==="none"){for(const T of await c.race(this._allRecorders()))T.hideHighlightedSelector(),T.setMode("none");return}if(this._playwright.allBrowsers().length||await this._playwright.chromium.launch(c,{headless:!!t.PW_DEBUG_CONTROLLER_HEADLESS}),!this._playwright.allPages().length){const[T]=this._playwright.allBrowsers();await(await T.newContextForReuse(c,{})).newPage(c,!1)}if(l.testIdAttributeName)for(const T of this._playwright.allPages())T.browserContext.selectors().setTestIdAttributeName(l.testIdAttributeName);for(const T of await c.race(this._allRecorders()))T.hideHighlightedSelector(),T.setMode(l.mode)}async highlight(c,l){l.selector&&(0,f.unsafeLocatorOrSelectorAsSelector)(this._sdkLanguage,l.selector,"data-testid");const x=l.ariaTemplate?(0,u.parseAriaSnapshotUnsafe)(_.yaml,l.ariaTemplate):void 0;for(const T of await c.race(this._allRecorders()))x?T.setHighlightedAriaTemplate(x):l.selector&&T.setHighlightedSelector(l.selector)}async hideHighlight(c){for(const l of await c.race(this._allRecorders()))l.hideHighlightedSelector();await this._playwright.hideHighlight()}allBrowsers(){return[...this._playwright.allBrowsers()]}async resume(c){for(const l of await c.race(this._allRecorders()))l.resume()}kill(){(0,C.gracefullyProcessExitDoNotHang)(0)}async closeAllBrowsers(){await Promise.all(this.allBrowsers().map(c=>c.close({reason:"Close all browsers requested"})))}_emitSnapshot(c){const l=this._playwright.allPages().length;c&&!l||this.emit(h.Events.StateChanged,{pageCount:l})}async _allRecorders(){const c=new Set;for(const T of this._playwright.allPages())c.add(T.browserContext);const l=await Promise.all([...c].map(T=>w.Recorder.forContext(T,{omitCallTracking:!0}))),x=l.filter(Boolean);for(const T of l)o(T,this);return x}async _closeBrowsersWithoutPages(){for(const c of this._playwright.allBrowsers()){for(const l of c.contexts())l.pages().length||await l.close({reason:"Browser collected"});c.contexts()||await c.close({reason:"Browser collected"})}}};h.Events={StateChanged:"stateChanged",InspectRequested:"inspectRequested",SourceChanged:"sourceChanged",Paused:"paused",SetModeRequested:"setModeRequested"};let s=h;const n=Symbol("wired");function o(m,c){if(m[n])return;m[n]=!0;const l=[],x=new a.JavaScriptLanguageGenerator(!0),T=()=>{const b=(0,v.collapseActions)(l),{header:p,footer:O,text:z,actionTexts:$}=(0,d.generateCode)(b,x,{browserName:"chromium",launchOptions:{},contextOptions:{}});c.emit(s.Events.SourceChanged,{text:z,header:p,footer:O,actions:$})};m.on(w.RecorderEvent.ElementPicked,b=>{const p=(0,g.asLocator)(c._sdkLanguage,b.selector);c.emit(s.Events.InspectRequested,{selector:b.selector,locator:p,ariaSnapshot:b.ariaSnapshot})}),m.on(w.RecorderEvent.PausedStateChanged,b=>{c.emit(s.Events.Paused,{paused:b})}),m.on(w.RecorderEvent.ModeChanged,b=>{c.emit(s.Events.SetModeRequested,{mode:b})}),m.on(w.RecorderEvent.ActionAdded,b=>{l.push(b),T()}),m.on(w.RecorderEvent.SignalAdded,b=>{const p=l.findLast(O=>O.frame.pageGuid===b.frame.pageGuid);p&&p.action.signals.push(b.signal),T()})}return vd}var wd,V0;function my(){if(V0)return wd;V0=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(_e,ge)=>{for(var ne in ge)i(_e,ne,{get:ge[ne],enumerable:!0})},e=(_e,ge,ne,S)=>{if(ge&&typeof ge=="object"||typeof ge=="function")for(let j of R(ge))!te.call(_e,j)&&j!==ne&&i(_e,j,{get:()=>ge[j],enumerable:!(S=E(ge,j))||S.enumerable});return _e},U=(_e,ge,ne)=>(ne=_e!=null?r(V(_e)):{},e(!_e||!_e.__esModule?i(ne,"default",{value:_e,enumerable:!0}):ne,_e)),C=_e=>e(i({},"__esModule",{value:!0}),_e),w={};P(w,{Electron:()=>q,ElectronApplication:()=>$}),wd=C(w);var g=U(Je),u=U(Je),_=U(Je),f=U(Je),d=nr(),v=Yn(),a=Mr(),s=qr(),n=Ir(),o=Xs(),h=Lo(),m=ff(),c=Yi(),l=iy(),x=hn(),T=Tr(),b=U(Oi()),p=Gi(),O=Do();const z=_.default.join(u.default.tmpdir(),"playwright-artifacts-"),le=class le extends T.SdkObject{constructor(ge,ne,S,j){super(ge,"electron-app"),this._nodeElectronHandlePromise=new d.ManualPromise,this._process=j,this._browserContext=ne._defaultContext,this._nodeConnection=S,this._nodeSession=S.rootSession,this._nodeSession.on("Runtime.executionContextCreated",async I=>{if(!I.context.auxData||!I.context.auxData.isDefault)return;const D=new m.CRExecutionContext(this._nodeSession,I.context);this._nodeExecutionContext=new b.ExecutionContext(this,D,"electron");const{result:ie}=await D._client.send("Runtime.evaluate",{expression:"require('electron')",contextId:I.context.id,includeCommandLineAPI:!0});this._nodeElectronHandlePromise.resolve(new b.JSHandle(this._nodeExecutionContext,"object","ElectronModule",ie.objectId))}),this._nodeSession.on("Runtime.consoleAPICalled",I=>this._onConsoleAPI(I));const y=new Promise(I=>this.once(le.Events.Close,I));this._browserContext.setCustomCloseHandler(async()=>{await this._browserContext.stopVideoRecording(),await(await this._nodeElectronHandlePromise).evaluate(({app:D})=>D.quit()).catch(()=>{}),this._nodeConnection.close(),await y})}async _onConsoleAPI(ge){if(ge.executionContextId===0||!this._nodeExecutionContext)return;const ne=ge.args.map(j=>(0,m.createHandle)(this._nodeExecutionContext,j)),S=new l.ConsoleMessage(null,ge.type,void 0,ne,(0,c.toConsoleMessageLocation)(ge.stackTrace));this.emit(le.Events.Console,S)}async initialize(){await this._nodeSession.send("Runtime.enable",{}),await this._nodeSession.send("Runtime.evaluate",{expression:"__playwright_run()"})}process(){return this._process}context(){return this._browserContext}async close(){await this._browserContext.close({reason:"Application exited"})}async browserWindow(ge){const ne=ge.delegate._targetId;return await(await this._nodeElectronHandlePromise).evaluateHandle(({BrowserWindow:j,webContents:y},I)=>{const D=y.fromDevToolsTargetId(I);return j.fromWebContents(D)},ne)}};le.Events={Close:"close",Console:"console"};let $=le;class q extends T.SdkObject{constructor(ge){super(ge,"electron"),this.logName="browser"}async launch(ge,ne){let S,j=["--inspect=0","--remote-debugging-port=0",...ne.args||[]];u.default.platform()==="linux"&&process.geteuid&&process.geteuid()===0&&j.indexOf("--no-sandbox")===-1&&j.unshift("--no-sandbox");const y=await ge.race(g.default.promises.mkdtemp(z));ge.cleanupWhenAborted(()=>(0,d.removeFolders)([y]));const I=new a.RecentLogsCollector,D=ne.env?(0,p.envArrayToObject)(ne.env):t;let ie;if(ne.executablePath)ie=ne.executablePath;else{try{ie=require("electron/index.js")}catch(st){throw(st==null?void 0:st.code)==="MODULE_NOT_FOUND"?new Error(`
`+(0,v.wrapInASCIIBox)(["Electron executablePath not found!","Please install it using `npm install -D electron` or set the executablePath to your Electron executable."].join(`
`),1)):st}j.unshift("-r",require.resolve("./loader"))}let he=!1;process.platform==="win32"&&(he=!0,ie=`"${ie}"`,j=j.map(st=>`"${st}"`)),delete D.NODE_OPTIONS;const{launchedProcess:me,gracefullyClose:ye,kill:Se}=await(0,p.launchProcess)({command:ie,args:j,env:D,log:st=>{ge.log(st),I.log(st)},shell:he,stdio:"pipe",cwd:ne.cwd,tempDirectories:[y],attemptToGracefullyClose:()=>S.close(),handleSIGINT:!0,handleSIGTERM:!0,handleSIGHUP:!0,onExit:()=>S==null?void 0:S.emit($.Events.Close)}),Oe=J(ge,me,/Unable to open X display/).then(()=>{throw new Error(["Unable to open X display!","================================","Most likely this is because there is no X server available.","Use 'xvfb-run' on Linux to launch your tests with an emulated display server.","For example: 'xvfb-run npm run test:e2e'","================================",ge.metadata.log].join(`
`))}),Pe=J(ge,me,/^Debugger listening on (ws:\/\/.*)$/),Ne=J(ge,me,/^DevTools listening on (ws:\/\/.*)$/),Le=J(ge,me,/Waiting for the debugger to disconnect\.\.\./),qe=await Pe,Ge=await O.WebSocketTransport.connect(ge,qe[1]);ge.cleanupWhenAborted(()=>Ge.close());const ot=new h.CRConnection(this,Ge,x.helper.debugProtocolLogger(),I);Le.then(()=>{Ge.close()}).catch(()=>{});const dt=await Promise.race([Ne,Oe]),yt=await O.WebSocketTransport.connect(ge,dt[1]);ge.cleanupWhenAborted(()=>yt.close());const nt={onclose:void 0,process:me,close:ye,kill:Se},gt={...ne,noDefaultViewport:!0},Ut={name:"electron",isChromium:!0,headful:!0,persistent:gt,browserProcess:nt,protocolLogger:x.helper.debugProtocolLogger(),browserLogsCollector:I,artifactsDir:y,downloadsPath:y,tracesDir:ne.tracesDir||y,originalLaunchOptions:{}};(0,n.validateBrowserContextOptions)(gt,Ut);const Xt=await ge.race(o.CRBrowser.connect(this.attribution.playwright,yt,Ut));return S=new $(this,Xt,ot,me),await ge.race(S.initialize()),S}}function J(_e,ge,ne){return _e.race(new Promise((S,j)=>{const y=f.createInterface({input:ge.stderr}),I=new Error("Process failed to launch!"),D=[s.eventsHelper.addEventListener(y,"line",ie),s.eventsHelper.addEventListener(y,"close",j.bind(null,I)),s.eventsHelper.addEventListener(ge,"exit",j.bind(null,I)),s.eventsHelper.addEventListener(ge,"error",j.bind(null,I))];_e.cleanupWhenAborted(he);function ie(me){const ye=me.match(ne);ye&&(he(),S(ye))}function he(){s.eventsHelper.removeEventListeners(D)}}))}return wd}var yd,K0;function _f(){if(K0)return yd;K0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(d,v)=>{for(var a in v)t(d,a,{get:v[a],enumerable:!0})},V=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of i(v))!E.call(d,n)&&n!==a&&t(d,n,{get:()=>v[n],enumerable:!(s=r(v,n))||s.enumerable});return d},te=d=>V(t({},"__esModule",{value:!0}),d),P={};R(P,{ConnectionEvents:()=>g,FFConnection:()=>_,FFSession:()=>f,kBrowserCloseMessageId:()=>u}),yd=te(P);var e=Vr(),U=Mr(),C=hn(),w=Dn();const g={Disconnected:Symbol("Disconnected")},u=-9999;class _ extends e.EventEmitter{constructor(v,a,s){super(),this.setMaxListeners(0),this._transport=v,this._protocolLogger=a,this._browserLogsCollector=s,this._lastId=0,this._sessions=new Map,this._closed=!1,this.rootSession=new f(this,"",n=>this._rawSend(n)),this._sessions.set("",this.rootSession),this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this)}nextMessageId(){return++this._lastId}_rawSend(v){this._protocolLogger("send",v),this._transport.send(v)}async _onMessage(v){if(this._protocolLogger("receive",v),v.id===u)return;const a=this._sessions.get(v.sessionId||"");a&&a.dispatchMessage(v)}_onClose(v){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this._browserDisconnectedLogs=C.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs(),v),this.rootSession.dispose(),Promise.resolve().then(()=>this.emit(g.Disconnected))}close(){this._closed||this._transport.close()}createSession(v){const a=new f(this,v,s=>this._rawSend({...s,sessionId:v}));return this._sessions.set(v,a),a}}class f extends e.EventEmitter{constructor(v,a,s){super(),this._disposed=!1,this._crashed=!1,this.setMaxListeners(0),this._callbacks=new Map,this._connection=v,this._sessionId=a,this._rawSend=s,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}markAsCrashed(){this._crashed=!0}async send(v,a){if(this._crashed||this._disposed||this._connection._closed||this._connection._browserDisconnectedLogs)throw new w.ProtocolError(this._crashed?"crashed":"closed",void 0,this._connection._browserDisconnectedLogs);const s=this._connection.nextMessageId();return this._rawSend({method:v,params:a,id:s}),new Promise((n,o)=>{this._callbacks.set(s,{resolve:n,reject:o,error:new w.ProtocolError("error",v)})})}sendMayFail(v,a){return this.send(v,a).catch(s=>U.debugLogger.log("error",s))}dispatchMessage(v){if(v.id){const a=this._callbacks.get(v.id);a&&(this._callbacks.delete(v.id),v.error?(a.error.setMessage(v.error.message),a.reject(a.error)):a.resolve(v.result))}else Promise.resolve().then(()=>this.emit(v.method,v.params))}dispose(){this._disposed=!0,this._connection._sessions.delete(this._sessionId);for(const v of this._callbacks.values())v.error.type=this._crashed?"crashed":"closed",v.error.logs=this._connection._browserDisconnectedLogs,v.reject(v.error);this._callbacks.clear()}}return yd}var Sd,G0;function lT(){if(G0)return Sd;G0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{getAccessibilityTree:()=>e}),Sd=te(P);async function e(w,g){const u=g?g._objectId:void 0,{tree:_}=await w.send("Accessibility.getFullAXTree",{objectId:u}),f=new C(_);return{tree:f,needle:g?f._findNeedle():null}}const U=new Map(Object.entries({pushbutton:"button",checkbutton:"checkbox",editcombobox:"combobox","content deletion":"deletion",footnote:"doc-footnote","non-native document":"document",grouping:"group",graphic:"img","content insertion":"insertion",animation:"marquee","flat equation":"math",menupopup:"menu","check menu item":"menuitemcheckbox","radio menu item":"menuitemradio","listbox option":"option",radiobutton:"radio",statusbar:"status",pagetab:"tab",pagetablist:"tablist",propertypage:"tabpanel",entry:"textbox",outline:"tree","tree table":"treegrid",outlineitem:"treeitem"}));class C{constructor(g){this._payload=g,this._children=(g.children||[]).map(u=>new C(u)),this._editable=!!g.editable,this._richlyEditable=this._editable&&g.tag!=="textarea"&&g.tag!=="input",this._focusable=!!g.focusable,this._expanded=!!g.expanded,this._name=this._payload.name,this._role=this._payload.role}_isPlainTextField(){return this._richlyEditable?!1:this._editable?!0:this._role==="entry"}_isTextOnlyObject(){const g=this._role;return g==="text leaf"||g==="text"||g==="statictext"}_hasFocusableChild(){if(this._cachedHasFocusableChild===void 0){this._cachedHasFocusableChild=!1;for(const g of this._children)if(g._focusable||g._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}_findNeedle(){if(this._payload.foundObject)return this;for(const g of this._children){const u=g._findNeedle();if(u)return u}return null}isLeafNode(){if(!this._children.length||this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"graphic":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return this._hasFocusableChild()?!1:!!(this._focusable&&this._role!=="document"&&this._name||this._role==="heading"&&this._name)}isControl(){switch(this._role){case"checkbutton":case"check menu item":case"check rich option":case"combobox":case"combobox option":case"color chooser":case"listbox":case"listbox option":case"listbox rich option":case"popup menu":case"menupopup":case"menuitem":case"menubar":case"button":case"pushbutton":case"radiobutton":case"radio menuitem":case"scrollbar":case"slider":case"spinbutton":case"switch":case"pagetab":case"entry":case"tree table":return!0;default:return!1}}isInteresting(g){return this._focusable||this._richlyEditable||this.isControl()?!0:g?!1:this.isLeafNode()&&!!this._name.trim()}serialize(){const g={role:U.get(this._role)||this._role,name:this._name||""},u=["name","description","roledescription","valuetext","keyshortcuts"];for(const a of u)a in this._payload&&(g[a]=this._payload[a]);const _=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const a of _){if(this._role==="document"&&a==="focused")continue;const s=this._payload[a];s&&(g[a]=s)}const f=["level"];for(const a of f)a in this._payload&&(g[a]=this._payload[a]);const d=["autocomplete","haspopup","orientation"];for(const a of d){const s=this._payload[a];!s||s==="false"||(g[a]=s)}const v=g;return v.valueString=this._payload.value,"checked"in this._payload&&(v.checked=this._payload.checked===!0?"checked":this._payload.checked==="mixed"?"mixed":"unchecked"),"pressed"in this._payload&&(v.pressed=this._payload.pressed===!0?"pressed":"released"),"invalid"in this._payload&&(v.invalid=this._payload.invalid===!0?"true":"false"),v}}return Sd}var xd,J0;function uT(){if(J0)return xd;J0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{FFExecutionContext:()=>v,createHandle:()=>h}),xd=U(C);var w=Gr(),g=pn(),u=ds(),_=e(Oi()),f=e(hi()),d=Dn();class v{constructor(c,l){this._session=c,this._executionContextId=l}async rawEvaluateJSON(c){const l=await this._session.send("Runtime.evaluate",{expression:c,returnByValue:!0,executionContextId:this._executionContextId}).catch(s);return a(l.exceptionDetails),l.result.value}async rawEvaluateHandle(c,l){const x=await this._session.send("Runtime.evaluate",{expression:l,returnByValue:!1,executionContextId:this._executionContextId}).catch(s);return a(x.exceptionDetails),h(c,x.result)}async evaluateWithArguments(c,l,x,T,b){const p=await this._session.send("Runtime.callFunction",{functionDeclaration:c,args:[{objectId:x._objectId,value:void 0},...T.map(O=>({value:O})),...b.map(O=>({objectId:O._objectId,value:void 0}))],returnByValue:l,executionContextId:this._executionContextId}).catch(s);return a(p.exceptionDetails),l?(0,u.parseEvaluationResultValue)(p.result.value):h(x._context,p.result)}async getProperties(c){const l=await this._session.send("Runtime.getObjectProperties",{executionContextId:this._executionContextId,objectId:c._objectId}),x=new Map;for(const T of l.properties)x.set(T.name,h(c._context,T.value));return x}async releaseHandle(c){c._objectId&&await this._session.send("Runtime.disposeObject",{executionContextId:this._executionContextId,objectId:c._objectId})}}function a(m){if(m)throw m.value?new _.JavaScriptErrorInEvaluate(JSON.stringify(m.value)):new _.JavaScriptErrorInEvaluate(m.text+(m.stack?`
`+m.stack:""))}function s(m){if(m.message.includes("cyclic object value")||m.message.includes("Object is not serializable"))return{result:{type:"undefined",value:void 0}};throw m instanceof TypeError&&m.message.startsWith("Converting circular structure to JSON")&&(0,g.rewriteErrorMessage)(m,m.message+" Are you passing a nested JSHandle?"),!_.isJavaScriptErrorInEvaluate(m)&&!(0,d.isSessionClosedError)(m)?new Error("Execution context was destroyed, most likely because of a navigation."):m}function n(m){const c=m.value,l=m.unserializableValue;return l?_.parseUnserializableValue(l):c}function o(m){if(m.type==="undefined")return"undefined";if(m.unserializableValue)return String(m.unserializableValue);if(m.type==="symbol")return"Symbol()";if(m.subtype==="regexp")return"RegExp";if(m.subtype==="weakmap")return"WeakMap";if(m.subtype==="weakset")return"WeakSet";if(m.subtype)return m.subtype[0].toUpperCase()+m.subtype.slice(1);if("value"in m)return String(m.value)}function h(m,c){return c.subtype==="node"?((0,w.assert)(m instanceof f.FrameExecutionContext),new f.ElementHandle(m,c.objectId)):new _.JSHandle(m,c.subtype||c.type||"",o(c),c.objectId,n(c))}return xd}var Ed,Y0;function dT(){if(Y0)return Ed;Y0=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{RawKeyboardImpl:()=>w,RawMouseImpl:()=>g,RawTouchscreenImpl:()=>u}),Ed=te(P);function e(_){let f=0;return _.has("Alt")&&(f|=1),_.has("Control")&&(f|=2),_.has("Shift")&&(f|=4),_.has("Meta")&&(f|=8),f}function U(_){return _==="left"?0:_==="middle"?1:_==="right"?2:0}function C(_){let f=0;return _.has("left")&&(f|=1),_.has("right")&&(f|=2),_.has("middle")&&(f|=4),f}class w{constructor(f){this._client=f}async keydown(f,d,v,a,s){let n=a.text;n==="\r"&&(n="");const{code:o,key:h,location:m}=a;await f.race(this._client.send("Page.dispatchKeyEvent",{type:"keydown",keyCode:a.keyCodeWithoutLocation,code:o,key:h,repeat:s,location:m,text:n}))}async keyup(f,d,v,a){const{code:s,key:n,location:o}=a;await f.race(this._client.send("Page.dispatchKeyEvent",{type:"keyup",key:n,keyCode:a.keyCodeWithoutLocation,code:s,location:o,repeat:!1}))}async sendText(f,d){await f.race(this._client.send("Page.insertText",{text:d}))}}class g{constructor(f){this._client=f}async move(f,d,v,a,s,n,o){await f.race(this._client.send("Page.dispatchMouseEvent",{type:"mousemove",button:0,buttons:C(s),x:Math.floor(d),y:Math.floor(v),modifiers:e(n)}))}async down(f,d,v,a,s,n,o){await f.race(this._client.send("Page.dispatchMouseEvent",{type:"mousedown",button:U(a),buttons:C(s),x:Math.floor(d),y:Math.floor(v),modifiers:e(n),clickCount:o}))}async up(f,d,v,a,s,n,o){await f.race(this._client.send("Page.dispatchMouseEvent",{type:"mouseup",button:U(a),buttons:C(s),x:Math.floor(d),y:Math.floor(v),modifiers:e(n),clickCount:o}))}async wheel(f,d,v,a,s,n,o){await this._page.mainFrame().evaluateExpression("new Promise(requestAnimationFrame)",{world:"utility"}),await f.race(this._client.send("Page.dispatchWheelEvent",{deltaX:n,deltaY:o,x:Math.floor(d),y:Math.floor(v),deltaZ:0,modifiers:e(s)}))}setPage(f){this._page=f}}class u{constructor(f){this._client=f}async tap(f,d,v,a){await f.race(this._client.send("Page.dispatchTapEvent",{x:d,y:v,modifiers:e(a)}))}}return Ed}var Od,X0;function hT(){if(X0)return Od;X0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(s,n)=>{for(var o in n)r(s,o,{get:n[o],enumerable:!0})},P=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of E(n))!V.call(s,m)&&m!==o&&r(s,m,{get:()=>n[m],enumerable:!(h=i(n,m))||h.enumerable});return s},e=(s,n,o)=>(o=s!=null?t(R(s)):{},P(!s||!s.__esModule?r(o,"default",{value:s,enumerable:!0}):o,s)),U=s=>P(r({},"__esModule",{value:!0}),s),C={};te(C,{FFNetworkManager:()=>u}),Od=U(C);var w=qr(),g=e(fn());class u{constructor(n,o){this._session=n,this._requests=new Map,this._page=o,this._eventListeners=[w.eventsHelper.addEventListener(n,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this)),w.eventsHelper.addEventListener(n,"Network.responseReceived",this._onResponseReceived.bind(this)),w.eventsHelper.addEventListener(n,"Network.requestFinished",this._onRequestFinished.bind(this)),w.eventsHelper.addEventListener(n,"Network.requestFailed",this._onRequestFailed.bind(this))]}dispose(){w.eventsHelper.removeEventListeners(this._eventListeners)}async setRequestInterception(n){await Promise.all([this._session.send("Network.setRequestInterception",{enabled:n}),this._session.send("Page.setCacheDisabled",{cacheDisabled:n})])}_onRequestWillBeSent(n){const o=n.redirectedFrom&&this._requests.get(n.redirectedFrom)||null,h=o?o.request.frame():n.frameId?this._page.frameManager.frame(n.frameId):null;if(!h||n.method==="OPTIONS"&&!n.isIntercepted)return;o&&this._requests.delete(o._id);const m=new d(h,o,n);let c;n.isIntercepted&&(c=new v(this._session,m)),this._requests.set(m._id,m),this._page.frameManager.requestStarted(m.request,c)}_onResponseReceived(n){var T,b,p,O,z;const o=this._requests.get(n.requestId);if(!o)return;const h=async()=>{const $=await this._session.send("Network.getResponseBody",{requestId:o._id});if($.evicted)throw new Error(`Response body for ${o.request.method()} ${o.request.url()} was evicted!`);return Buffer.from($.base64body,"base64")},m=n.timing.startTime;function c($){return $?($-m)/1e3:-1}const l={startTime:m/1e3,domainLookupStart:c(n.timing.domainLookupStart),domainLookupEnd:c(n.timing.domainLookupEnd),connectStart:c(n.timing.connectStart),secureConnectionStart:c(n.timing.secureConnectionStart),connectEnd:c(n.timing.connectEnd),requestStart:c(n.timing.requestStart),responseStart:c(n.timing.responseStart)},x=new g.Response(o.request,n.status,n.statusText,a(n.headers),l,h,n.fromServiceWorker);n!=null&&n.remoteIPAddress&&typeof(n==null?void 0:n.remotePort)=="number"?x._serverAddrFinished({ipAddress:n.remoteIPAddress,port:n.remotePort}):x._serverAddrFinished(),x._securityDetailsFinished({protocol:(T=n==null?void 0:n.securityDetails)==null?void 0:T.protocol,subjectName:(b=n==null?void 0:n.securityDetails)==null?void 0:b.subjectName,issuer:(p=n==null?void 0:n.securityDetails)==null?void 0:p.issuer,validFrom:(O=n==null?void 0:n.securityDetails)==null?void 0:O.validFrom,validTo:(z=n==null?void 0:n.securityDetails)==null?void 0:z.validTo}),x.setRawResponseHeaders(null),x.setResponseHeadersSize(null),this._page.frameManager.requestReceivedResponse(x)}_onRequestFinished(n){const o=this._requests.get(n.requestId);if(!o)return;const h=o.request._existingResponse();h.setTransferSize(n.transferSize),h.setEncodedBodySize(n.encodedBodySize);const m=h.status()>=300&&h.status()<=399,c=n.responseEndTime?n.responseEndTime/1e3-h.timing().startTime:-1;m||this._requests.delete(o._id),h._requestFinished(c),n.protocolVersion&&h._setHttpVersion(n.protocolVersion),this._page.frameManager.reportRequestFinished(o.request,h)}_onRequestFailed(n){const o=this._requests.get(n.requestId);if(!o)return;this._requests.delete(o._id);const h=o.request._existingResponse();h&&(h.setTransferSize(null),h.setEncodedBodySize(null),h._requestFinished(-1)),o.request._setFailureText(n.errorCode),this._page.frameManager.requestFailed(o.request,n.errorCode==="NS_BINDING_ABORTED")}}const _={TYPE_INVALID:"other",TYPE_OTHER:"other",TYPE_SCRIPT:"script",TYPE_IMAGE:"image",TYPE_STYLESHEET:"stylesheet",TYPE_OBJECT:"other",TYPE_DOCUMENT:"document",TYPE_SUBDOCUMENT:"document",TYPE_REFRESH:"document",TYPE_XBL:"other",TYPE_PING:"other",TYPE_XMLHTTPREQUEST:"xhr",TYPE_OBJECT_SUBREQUEST:"other",TYPE_DTD:"other",TYPE_FONT:"font",TYPE_MEDIA:"media",TYPE_WEBSOCKET:"websocket",TYPE_CSP_REPORT:"other",TYPE_XSLT:"other",TYPE_BEACON:"other",TYPE_FETCH:"fetch",TYPE_IMAGESET:"image",TYPE_WEB_MANIFEST:"manifest"},f={TYPE_INTERNAL_EVENTSOURCE:"eventsource"};class d{constructor(n,o,h){this._id=h.requestId,o&&(o._redirectedTo=this);let m=null;h.postData&&(m=Buffer.from(h.postData,"base64")),this.request=new g.Request(n._page.browserContext,n,null,o?o.request:null,h.navigationId,h.url,f[h.internalCause]||_[h.cause]||"other",h.method,m,h.headers),this.request.setRawRequestHeaders(null)}_finalRequest(){let n=this;for(;n._redirectedTo;)n=n._redirectedTo;return n}}class v{constructor(n,o){this._session=n,this._request=o}async continue(n){await this._session.sendMayFail("Network.resumeInterceptedRequest",{requestId:this._request._id,url:n.url,method:n.method,headers:n.headers,postData:n.postData?Buffer.from(n.postData).toString("base64"):void 0})}async fulfill(n){const o=n.isBase64?n.body:Buffer.from(n.body).toString("base64");await this._session.sendMayFail("Network.fulfillInterceptedRequest",{requestId:this._request._id,status:n.status,statusText:g.statusText(n.status),headers:n.headers,base64body:o})}async abort(n){await this._session.sendMayFail("Network.abortInterceptedRequest",{requestId:this._request._id,errorCode:n})}}function a(s){const n=[];for(const o of s){const h=o.name.toLowerCase()==="set-cookie"?`
`:",",m=o.value.split(h).map(c=>c.trim());for(const c of m)n.push({name:o.name,value:c})}return n}return Od}var Td,Q0;function pT(){if(Q0)return Td;Q0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(b,p)=>{for(var O in p)r(b,O,{get:p[O],enumerable:!0})},P=(b,p,O,z)=>{if(p&&typeof p=="object"||typeof p=="function")for(let $ of E(p))!V.call(b,$)&&$!==O&&r(b,$,{get:()=>p[$],enumerable:!(z=i(p,$))||z.enumerable});return b},e=(b,p,O)=>(O=b!=null?t(R(b)):{},P(!b||!b.__esModule?r(O,"default",{value:b,enumerable:!0}):O,b)),U=b=>P(r({},"__esModule",{value:!0}),b),C={};te(C,{FFPage:()=>x,UTILITY_WORLD_NAME:()=>l}),Td=U(C);var w=qr(),g=e(Ks()),u=e(hi()),_=Kr(),f=Kr(),d=lT(),v=_f(),a=uT(),s=dT(),n=hT(),o=Mr(),h=pn(),m=Ir(),c=Pn();const l="__playwright_utility_world__";class x{constructor(p,O,z){this.cspErrorsAsynchronousForInlineScripts=!0,this._reportedAsNew=!1,this._workers=new Map,this._initScripts=[],this._session=p,this._opener=z,this.rawKeyboard=new s.RawKeyboardImpl(p),this.rawMouse=new s.RawMouseImpl(p),this.rawTouchscreen=new s.RawTouchscreenImpl(p),this._contextIdToContext=new Map,this._browserContext=O,this._page=new f.Page(this,O),this.rawMouse.setPage(this._page),this._networkManager=new n.FFNetworkManager(p,this._page),this._page.on(f.Page.Events.FrameDetached,$=>this._removeContextsForFrame($)),this._eventListeners=[w.eventsHelper.addEventListener(this._session,"Page.eventFired",this._onEventFired.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.frameAttached",this._onFrameAttached.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.frameDetached",this._onFrameDetached.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.navigationAborted",this._onNavigationAborted.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.navigationCommitted",this._onNavigationCommitted.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.navigationStarted",this._onNavigationStarted.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.sameDocumentNavigation",this._onSameDocumentNavigation.bind(this)),w.eventsHelper.addEventListener(this._session,"Runtime.executionContextCreated",this._onExecutionContextCreated.bind(this)),w.eventsHelper.addEventListener(this._session,"Runtime.executionContextDestroyed",this._onExecutionContextDestroyed.bind(this)),w.eventsHelper.addEventListener(this._session,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.linkClicked",$=>this._onLinkClicked($.phase)),w.eventsHelper.addEventListener(this._session,"Page.uncaughtError",this._onUncaughtError.bind(this)),w.eventsHelper.addEventListener(this._session,"Runtime.console",this._onConsole.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.dialogOpened",this._onDialogOpened.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.bindingCalled",this._onBindingCalled.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.fileChooserOpened",this._onFileChooserOpened.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.workerCreated",this._onWorkerCreated.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.workerDestroyed",this._onWorkerDestroyed.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.dispatchMessageFromWorker",this._onDispatchMessageFromWorker.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.crashed",this._onCrashed.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.videoRecordingStarted",this._onVideoRecordingStarted.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.webSocketCreated",this._onWebSocketCreated.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.webSocketClosed",this._onWebSocketClosed.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.webSocketFrameReceived",this._onWebSocketFrameReceived.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.webSocketFrameSent",this._onWebSocketFrameSent.bind(this)),w.eventsHelper.addEventListener(this._session,"Page.screencastFrame",this._onScreencastFrame.bind(this))],this._session.once("Page.ready",()=>{var $;this._reportedAsNew||(this._reportedAsNew=!0,this._page.reportAsNew(($=this._opener)==null?void 0:$._page))}),this.addInitScript(new _.InitScript(""),l).catch($=>this._markAsError($))}async _markAsError(p){var O;this._reportedAsNew||(this._reportedAsNew=!0,this._page.reportAsNew((O=this._opener)==null?void 0:O._page,p))}_onWebSocketCreated(p){this._page.frameManager.onWebSocketCreated(T(p.frameId,p.wsid),p.requestURL),this._page.frameManager.onWebSocketRequest(T(p.frameId,p.wsid))}_onWebSocketClosed(p){p.error&&this._page.frameManager.webSocketError(T(p.frameId,p.wsid),p.error),this._page.frameManager.webSocketClosed(T(p.frameId,p.wsid))}_onWebSocketFrameReceived(p){this._page.frameManager.webSocketFrameReceived(T(p.frameId,p.wsid),p.opcode,p.data)}_onWebSocketFrameSent(p){this._page.frameManager.onWebSocketFrameSent(T(p.frameId,p.wsid),p.opcode,p.data)}_onExecutionContextCreated(p){const{executionContextId:O,auxData:z}=p,$=this._page.frameManager.frame(z.frameId);if(!$)return;const q=new a.FFExecutionContext(this._session,O);let J=null;z.name===l?J="utility":z.name||(J="main");const le=new u.FrameExecutionContext(q,$,J);J&&$._contextCreated(J,le),this._contextIdToContext.set(O,le)}_onExecutionContextDestroyed(p){const{executionContextId:O}=p,z=this._contextIdToContext.get(O);z&&(this._contextIdToContext.delete(O),z.frame._contextDestroyed(z))}_onExecutionContextsCleared(){for(const p of Array.from(this._contextIdToContext.keys()))this._onExecutionContextDestroyed({executionContextId:p})}_removeContextsForFrame(p){for(const[O,z]of this._contextIdToContext)z.frame===p&&this._contextIdToContext.delete(O)}_onLinkClicked(p){p==="before"?this._page.frameManager.frameWillPotentiallyRequestNavigation():this._page.frameManager.frameDidPotentiallyRequestNavigation()}_onNavigationStarted(p){this._page.frameManager.frameRequestedNavigation(p.frameId,p.navigationId)}_onNavigationAborted(p){this._page.frameManager.frameAbortedNavigation(p.frameId,p.errorText,p.navigationId)}_onNavigationCommitted(p){for(const[O,z]of this._workers)z.frameId===p.frameId&&this._onWorkerDestroyed({workerId:O});this._page.frameManager.frameCommittedNewDocumentNavigation(p.frameId,p.url,p.name||"",p.navigationId||"",!1)}_onSameDocumentNavigation(p){this._page.frameManager.frameCommittedSameDocumentNavigation(p.frameId,p.url)}_onFrameAttached(p){this._page.frameManager.frameAttached(p.frameId,p.parentFrameId)}_onFrameDetached(p){this._page.frameManager.frameDetached(p.frameId)}_onEventFired(p){const{frameId:O,name:z}=p;z==="load"&&this._page.frameManager.frameLifecycleEvent(O,"load"),z==="DOMContentLoaded"&&this._page.frameManager.frameLifecycleEvent(O,"domcontentloaded")}_onUncaughtError(p){const{name:O,message:z}=(0,h.splitErrorMessage)(p.message),$=new Error(z);$.stack=p.message+`
`+p.stack.split(`
`).filter(Boolean).map(q=>q.replace(/([^@]*)@(.*)/,"    at $1 ($2)")).join(`
`),$.name=O,this._page.emitOnContextOnceInitialized(m.BrowserContext.Events.PageError,$,this._page)}_onConsole(p){const{type:O,args:z,executionContextId:$,location:q}=p,J=this._contextIdToContext.get($);J&&this._page.addConsoleMessage(O==="warn"?"warning":O,z.map(le=>(0,a.createHandle)(J,le)),q)}_onDialogOpened(p){this._page.browserContext.dialogManager.dialogDidOpen(new g.Dialog(this._page,p.type,p.message,async(O,z)=>{await this._session.sendMayFail("Page.handleDialog",{dialogId:p.dialogId,accept:O,promptText:z})},p.defaultValue))}async _onBindingCalled(p){if(!(await this._page.waitForInitializedOrError()instanceof Error)){const z=this._contextIdToContext.get(p.executionContextId);z&&await this._page.onBindingCalled(p.payload,z)}}async _onFileChooserOpened(p){const{executionContextId:O,element:z}=p,$=this._contextIdToContext.get(O);if(!$)return;const q=(0,a.createHandle)($,z).asElement();await this._page._onFileChooserOpened(q)}async _onWorkerCreated(p){const O=p.workerId,z=new f.Worker(this._page,p.url),$=new v.FFSession(this._session._connection,O,q=>{this._session.send("Page.sendMessageToWorker",{frameId:p.frameId,workerId:O,message:JSON.stringify(q)}).catch(J=>{$.dispatchMessage({id:q.id,method:"",params:{},error:{message:J.message,data:void 0}})})});this._workers.set(O,{session:$,frameId:p.frameId}),this._page.addWorker(O,z),$.once("Runtime.executionContextCreated",q=>{z.createExecutionContext(new a.FFExecutionContext($,q.executionContextId))}),$.on("Runtime.console",q=>{const{type:J,args:le,location:_e}=q,ge=z.existingExecutionContext;this._page.addConsoleMessage(J,le.map(ne=>(0,a.createHandle)(ge,ne)),_e)})}_onWorkerDestroyed(p){const O=p.workerId,z=this._workers.get(O);z&&(z.session.dispose(),this._workers.delete(O),this._page.removeWorker(O))}async _onDispatchMessageFromWorker(p){const O=this._workers.get(p.workerId);O&&O.session.dispatchMessage(JSON.parse(p.message))}async _onCrashed(p){this._session.markAsCrashed(),this._page._didCrash()}_onVideoRecordingStarted(p){this._browserContext._browser._videoStarted(this._browserContext,p.screencastId,p.file,this._page.waitForInitializedOrError())}didClose(){this._markAsError(new c.TargetClosedError),this._session.dispose(),w.eventsHelper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._page._didClose()}async navigateFrame(p,O,z){return{newDocumentId:(await this._session.send("Page.navigate",{url:O,referer:z,frameId:p._id})).navigationId||void 0}}async updateExtraHTTPHeaders(){await this._session.send("Network.setExtraHTTPHeaders",{headers:this._page.extraHTTPHeaders()||[]})}async updateEmulatedViewportSize(){var O;const p=((O=this._page.emulatedSize())==null?void 0:O.viewport)??null;await this._session.send("Page.setViewportSize",{viewportSize:p})}async bringToFront(){await this._session.send("Page.bringToFront",{})}async updateEmulateMedia(){const p=this._page.emulatedMedia(),O=p.colorScheme==="no-override"?void 0:p.colorScheme,z=p.reducedMotion==="no-override"?void 0:p.reducedMotion,$=p.forcedColors==="no-override"?void 0:p.forcedColors,q=p.contrast==="no-override"?void 0:p.contrast;await this._session.send("Page.setEmulatedMedia",{type:p.media==="no-override"?"":p.media,colorScheme:O,reducedMotion:z,forcedColors:$,contrast:q})}async updateRequestInterception(){await this._networkManager.setRequestInterception(this._page.needsRequestInterception())}async updateFileChooserInterception(){const p=this._page.fileChooserIntercepted();await this._session.send("Page.setInterceptFileChooserDialog",{enabled:p}).catch(()=>{})}async reload(){await this._session.send("Page.reload")}async goBack(){const{success:p}=await this._session.send("Page.goBack",{frameId:this._page.mainFrame()._id});return p}async goForward(){const{success:p}=await this._session.send("Page.goForward",{frameId:this._page.mainFrame()._id});return p}async requestGC(){await this._session.send("Heap.collectGarbage")}async addInitScript(p,O){this._initScripts.push({initScript:p,worldName:O}),await this._updateInitScripts()}async removeInitScripts(p){const O=new Set(p);this._initScripts=this._initScripts.filter(z=>!O.has(z.initScript)),await this._updateInitScripts()}async _updateInitScripts(){await this._session.send("Page.setInitScripts",{scripts:this._initScripts.map(p=>({script:p.initScript.source,worldName:p.worldName}))})}async closePage(p){await this._session.send("Page.close",{runBeforeUnload:p})}async setBackgroundColor(p){if(p)throw new Error("Not implemented")}async takeScreenshot(p,O,z,$,q,J,le){if(!z){const ge=await this._page.mainFrame().waitForFunctionValueInUtility(p,()=>({x:window.scrollX,y:window.scrollY}));z={x:$.x+ge.x,y:$.y+ge.y,width:$.width,height:$.height}}const{data:_e}=await p.race(this._session.send("Page.screenshot",{mimeType:"image/"+O,clip:z,quality:q,omitDeviceScaleFactor:le==="css"}));return Buffer.from(_e,"base64")}async getContentFrame(p){const{contentFrameId:O}=await this._session.send("Page.describeNode",{frameId:p._context.frame._id,objectId:p._objectId});return O?this._page.frameManager.frame(O):null}async getOwnerFrame(p){const{ownerFrameId:O}=await this._session.send("Page.describeNode",{frameId:p._context.frame._id,objectId:p._objectId});return O||null}async getBoundingBox(p){const O=await this.getContentQuads(p);if(!O||!O.length)return null;let z=1/0,$=-1/0,q=1/0,J=-1/0;for(const le of O)for(const _e of le)z=Math.min(z,_e.x),$=Math.max($,_e.x),q=Math.min(q,_e.y),J=Math.max(J,_e.y);return{x:z,y:q,width:$-z,height:J-q}}async scrollRectIntoViewIfNeeded(p,O){return await this._session.send("Page.scrollIntoViewIfNeeded",{frameId:p._context.frame._id,objectId:p._objectId,rect:O}).then(()=>"done").catch(z=>{if(z instanceof Error&&z.message.includes("Node is detached from document"))return"error:notconnected";if(z instanceof Error&&z.message.includes("Node does not have a layout object"))return"error:notvisible";throw z})}async setScreencastOptions(p){if(p){const{screencastId:O}=await this._session.send("Page.startScreencast",p);this._screencastId=O}else await this._session.send("Page.stopScreencast")}_onScreencastFrame(p){if(!this._screencastId)return;const O=this._screencastId;this._page.throttleScreencastFrameAck(()=>{this._session.send("Page.screencastFrameAck",{screencastId:O}).catch($=>o.debugLogger.log("error",$))});const z=Buffer.from(p.data,"base64");this._page.emit(f.Page.Events.ScreencastFrame,{buffer:z,width:p.deviceWidth,height:p.deviceHeight})}rafCountForStablePosition(){return 1}async getContentQuads(p){const O=await this._session.sendMayFail("Page.getContentQuads",{frameId:p._context.frame._id,objectId:p._objectId});return O?O.quads.map(z=>[z.p1,z.p2,z.p3,z.p4]):null}async setInputFilePaths(p,O){await this._session.send("Page.setFileInputFiles",{frameId:p._context.frame._id,objectId:p._objectId,files:O})}async adoptElementHandle(p,O){const z=await this._session.send("Page.adoptNode",{frameId:p._context.frame._id,objectId:p._objectId,executionContextId:O.delegate._executionContextId});if(!z.remoteObject)throw new Error(u.kUnableToAdoptErrorMessage);return(0,a.createHandle)(O,z.remoteObject)}async getAccessibilityTree(p){return(0,d.getAccessibilityTree)(this._session,p)}async inputActionEpilogue(){}async resetForReuse(p){await this.rawMouse.move(p,-1,-1,"none",new Set,new Set,!1)}async getFrameElement(p){const O=p.parentFrame();if(!O)throw new Error("Frame has been detached.");const z=await O._mainContext(),$=await this._session.send("Page.adoptNode",{frameId:p._id,executionContextId:z.delegate._executionContextId});if(!$.remoteObject)throw new Error("Frame has been detached.");return(0,a.createHandle)(z,$.remoteObject)}shouldToggleStyleSheetToSyncAnimations(){return!1}}function T(b,p){return`${b}---${p}`}return Td}var Cd,Z0;function fT(){if(Z0)return Cd;Z0=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{FFBrowser:()=>s,FFBrowserContext:()=>n}),Cd=U(C);var w=nr(),g=Ti(),u=Ir(),_=Pn(),f=e(fn()),d=_f(),v=pT(),a=Kr();class s extends g.Browser{constructor(c,l,x){super(c,x),this._version="",this._userAgent="",this._connection=l,this.session=l.rootSession,this._ffPages=new Map,this._contexts=new Map,this._connection.on(d.ConnectionEvents.Disconnected,()=>this._onDisconnect()),this.session.on("Browser.attachedToTarget",this._onAttachedToTarget.bind(this)),this.session.on("Browser.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this.session.on("Browser.downloadCreated",this._onDownloadCreated.bind(this)),this.session.on("Browser.downloadFinished",this._onDownloadFinished.bind(this)),this.session.on("Browser.videoRecordingFinished",this._onVideoRecordingFinished.bind(this))}static async connect(c,l,x){const T=new d.FFConnection(l,x.protocolLogger,x.browserLogsCollector),b=new s(c,T,x);x.__testHookOnConnectToBrowser&&await x.__testHookOnConnectToBrowser();let p=x.originalLaunchOptions.firefoxUserPrefs??{};Object.keys(h).length&&(p={...h,...p});const O=[b.session.send("Browser.enable",{attachToDefaultContext:!!x.persistent,userPrefs:Object.entries(p).map(([$,q])=>({name:$,value:q}))}),b._initVersion()];x.persistent&&(b._defaultContext=new n(b,void 0,x.persistent),O.push(b._defaultContext._initialize()));const z=x.originalLaunchOptions.proxyOverride||x.proxy;return z&&O.push(b.session.send("Browser.setBrowserProxy",o(z))),await Promise.all(O),b}async _initVersion(){const c=await this.session.send("Browser.getInfo");this._version=c.version.substring(c.version.indexOf("/")+1),this._userAgent=c.userAgent}isConnected(){return!this._connection._closed}async doCreateNewContext(c){if(c.isMobile)throw new Error("options.isMobile is not supported in Firefox");const{browserContextId:l}=await this.session.send("Browser.createBrowserContext",{removeOnDetach:!0}),x=new n(this,l,c);return await x._initialize(),this._contexts.set(l,x),x}contexts(){return Array.from(this._contexts.values())}version(){return this._version}userAgent(){return this._userAgent}_onDetachedFromTarget(c){const l=this._ffPages.get(c.targetId);this._ffPages.delete(c.targetId),l.didClose()}_onAttachedToTarget(c){const{targetId:l,browserContextId:x,openerId:T,type:b}=c.targetInfo;(0,w.assert)(b==="page");const p=x?this._contexts.get(x):this._defaultContext;(0,w.assert)(p,`Unknown context id:${x}, _defaultContext: ${this._defaultContext}`);const O=this._connection.createSession(c.sessionId),z=T?this._ffPages.get(T):null,$=new v.FFPage(O,p,z);this._ffPages.set(l,$)}_onDownloadCreated(c){const l=this._ffPages.get(c.pageTargetId);if(!l)return;l._page.frameManager.frameAbortedNavigation(c.frameId,"Download is starting");let x=l._page.initializedOrUndefined();x||(l._markAsError(new Error("Starting new page download")),l._opener&&(x=l._opener._page.initializedOrUndefined())),x&&this._downloadCreated(x,c.uuid,c.url,c.suggestedFileName)}_onDownloadFinished(c){const l=c.canceled?"canceled":c.error;this._downloadFinished(c.uuid,l)}_onVideoRecordingFinished(c){var l;(l=this._takeVideo(c.screencastId))==null||l.reportFinished()}_onDisconnect(){for(const c of this._idToVideo.values())c.artifact.reportFinished(new _.TargetClosedError);this._idToVideo.clear();for(const c of this._ffPages.values())c.didClose();this._ffPages.clear(),this._didClose()}}class n extends u.BrowserContext{constructor(c,l,x){super(c,x,l)}async _initialize(){(0,w.assert)(!this._ffPages().length);const c=this._browserContextId,l=[super._initialize(),this._updateInitScripts()];this._options.acceptDownloads!=="internal-browser-default"&&l.push(this._browser.session.send("Browser.setDownloadOptions",{browserContextId:c,downloadOptions:{behavior:this._options.acceptDownloads==="accept"?"saveToDisk":"cancel",downloadsDir:this._browser.options.downloadsPath}})),l.push(this.doUpdateDefaultViewport()),this._options.hasTouch&&l.push(this._browser.session.send("Browser.setTouchOverride",{browserContextId:c,hasTouch:!0})),this._options.userAgent&&l.push(this._browser.session.send("Browser.setUserAgentOverride",{browserContextId:c,userAgent:this._options.userAgent})),this._options.bypassCSP&&l.push(this._browser.session.send("Browser.setBypassCSP",{browserContextId:c,bypassCSP:!0})),(this._options.ignoreHTTPSErrors||this._options.internalIgnoreHTTPSErrors)&&l.push(this._browser.session.send("Browser.setIgnoreHTTPSErrors",{browserContextId:c,ignoreHTTPSErrors:!0})),this._options.javaScriptEnabled===!1&&l.push(this._browser.session.send("Browser.setJavaScriptDisabled",{browserContextId:c,javaScriptDisabled:!0})),this._options.locale&&l.push(this._browser.session.send("Browser.setLocaleOverride",{browserContextId:c,locale:this._options.locale})),this._options.timezoneId&&l.push(this._browser.session.send("Browser.setTimezoneOverride",{browserContextId:c,timezoneId:this._options.timezoneId})),(this._options.extraHTTPHeaders||this._options.locale)&&l.push(this.doUpdateExtraHTTPHeaders()),this._options.httpCredentials&&l.push(this.setHTTPCredentials(this._options.httpCredentials)),this._options.geolocation&&l.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&l.push(this.doUpdateOffline()),l.push(this.doUpdateDefaultEmulatedMedia()),this._options.recordVideo&&l.push(this._ensureVideosPath().then(()=>this._browser.session.send("Browser.setVideoRecordingOptions",{options:{...this._options.recordVideo.size,dir:this._options.recordVideo.dir},browserContextId:this._browserContextId})));const x=this._options.proxyOverride||this._options.proxy;x&&l.push(this._browser.session.send("Browser.setContextProxy",{browserContextId:this._browserContextId,...o(x)})),await Promise.all(l)}_ffPages(){return Array.from(this._browser._ffPages.values()).filter(c=>c._browserContext===this)}possiblyUninitializedPages(){return this._ffPages().map(c=>c._page)}async doCreateNewPage(c){const{targetId:l}=await this._browser.session.send("Browser.newPage",{browserContextId:this._browserContextId}).catch(T=>{throw T.message.includes("Failed to override timezone")?new Error(`Invalid timezone ID: ${this._options.timezoneId}`):T}),x=this._browser._ffPages.get(l)._page;return c&&x.markAsServerSideOnly(),x}async doGetCookies(c){const{cookies:l}=await this._browser.session.send("Browser.getCookies",{browserContextId:this._browserContextId});return f.filterCookies(l.map(x=>{const{name:T,value:b,domain:p,path:O,expires:z,httpOnly:$,secure:q,sameSite:J}=x;return{name:T,value:b,domain:p,path:O,expires:z,httpOnly:$,secure:q,sameSite:J}}),c)}async addCookies(c){const l=f.rewriteCookies(c).map(x=>{const{name:T,value:b,url:p,domain:O,path:z,expires:$,httpOnly:q,secure:J,sameSite:le}=x;return{name:T,value:b,url:p,domain:O,path:z,expires:$===-1?void 0:$,httpOnly:q,secure:J,sameSite:le}});await this._browser.session.send("Browser.setCookies",{browserContextId:this._browserContextId,cookies:l})}async doClearCookies(){await this._browser.session.send("Browser.clearCookies",{browserContextId:this._browserContextId})}async doGrantPermissions(c,l){const x=new Map([["geolocation","geo"],["persistent-storage","persistent-storage"],["push","push"],["notifications","desktop-notification"]]),T=l.map(b=>{const p=x.get(b);if(!p)throw new Error("Unknown permission: "+b);return p});await this._browser.session.send("Browser.grantPermissions",{origin:c,browserContextId:this._browserContextId,permissions:T})}async doClearPermissions(){await this._browser.session.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(c){(0,u.verifyGeolocation)(c),this._options.geolocation=c,await this._browser.session.send("Browser.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:c||null})}async doUpdateExtraHTTPHeaders(){let c=this._options.extraHTTPHeaders||[];this._options.locale&&(c=f.mergeHeaders([c,f.singleHeader("Accept-Language",this._options.locale)])),await this._browser.session.send("Browser.setExtraHTTPHeaders",{browserContextId:this._browserContextId,headers:c})}async setUserAgent(c){await this._browser.session.send("Browser.setUserAgentOverride",{browserContextId:this._browserContextId,userAgent:c||null})}async doUpdateOffline(){await this._browser.session.send("Browser.setOnlineOverride",{browserContextId:this._browserContextId,override:this._options.offline?"offline":"online"})}async doSetHTTPCredentials(c){this._options.httpCredentials=c;let l=null;if(c){const{username:x,password:T,origin:b}=c;l={username:x,password:T,origin:b}}await this._browser.session.send("Browser.setHTTPCredentials",{browserContextId:this._browserContextId,credentials:l})}async doAddInitScript(c){await this._updateInitScripts()}async doRemoveInitScripts(c){await this._updateInitScripts()}async _updateInitScripts(){const c=[...this._pageBindings.values()].map(x=>x.initScript.source);this.bindingsInitScript&&c.unshift(this.bindingsInitScript.source);const l=this.initScripts.map(x=>x.source);await this._browser.session.send("Browser.setInitScripts",{browserContextId:this._browserContextId,scripts:[...c,...l].map(x=>({script:x}))})}async doUpdateRequestInterception(){await Promise.all([this._browser.session.send("Browser.setRequestInterception",{browserContextId:this._browserContextId,enabled:this.requestInterceptors.length>0}),this._browser.session.send("Browser.setCacheDisabled",{browserContextId:this._browserContextId,cacheDisabled:this.requestInterceptors.length>0})])}async doUpdateDefaultViewport(){if(!this._options.viewport)return;const c={viewportSize:{width:this._options.viewport.width,height:this._options.viewport.height},deviceScaleFactor:this._options.deviceScaleFactor||1};await this._browser.session.send("Browser.setDefaultViewport",{browserContextId:this._browserContextId,viewport:c})}async doUpdateDefaultEmulatedMedia(){this._options.colorScheme!=="no-override"&&await this._browser.session.send("Browser.setColorScheme",{browserContextId:this._browserContextId,colorScheme:this._options.colorScheme!==void 0?this._options.colorScheme:"light"}),this._options.reducedMotion!=="no-override"&&await this._browser.session.send("Browser.setReducedMotion",{browserContextId:this._browserContextId,reducedMotion:this._options.reducedMotion!==void 0?this._options.reducedMotion:"no-preference"}),this._options.forcedColors!=="no-override"&&await this._browser.session.send("Browser.setForcedColors",{browserContextId:this._browserContextId,forcedColors:this._options.forcedColors!==void 0?this._options.forcedColors:"none"}),this._options.contrast!=="no-override"&&await this._browser.session.send("Browser.setContrast",{browserContextId:this._browserContextId,contrast:this._options.contrast!==void 0?this._options.contrast:"no-preference"})}async doExposePlaywrightBinding(){this._browser.session.send("Browser.addBinding",{browserContextId:this._browserContextId,name:a.PageBinding.kBindingName,script:""})}onClosePersistent(){}async clearCache(){await this._browser.session.send("Browser.clearCache")}async doClose(c){this._browserContextId?(await this._browser.session.send("Browser.removeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)):(this._options.recordVideo&&await this._browser.session.send("Browser.setVideoRecordingOptions",{options:void 0,browserContextId:this._browserContextId}),await this._browser.close({reason:c}))}async cancelDownload(c){await this._browser.session.send("Browser.cancelDownload",{uuid:c})}}function o(m){const c=new URL(m.server);let l=parseInt(c.port,10),x="http";return c.protocol==="socks5:"?x="socks":c.protocol==="socks4:"?x="socks4":c.protocol==="https:"&&(x="https"),c.port===""&&(c.protocol==="http:"?l=80:c.protocol==="https:"&&(l=443)),{type:x,bypass:m.bypass?m.bypass.split(",").map(T=>T.trim()):[],host:c.hostname,port:l,username:m.username,password:m.password}}const h={};return Cd}var Pd,eb;function mT(){if(eb)return Pd;eb=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(n,o)=>{for(var h in o)i(n,h,{get:o[h],enumerable:!0})},e=(n,o,h,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of R(o))!te.call(n,c)&&c!==h&&i(n,c,{get:()=>o[c],enumerable:!(m=E(o,c))||m.enumerable});return n},U=(n,o,h)=>(h=n!=null?r(V(n)):{},e(!n||!n.__esModule?i(h,"default",{value:n,enumerable:!0}):h,n)),C=n=>e(i({},"__esModule",{value:!0}),n),w={};P(w,{Firefox:()=>s}),Pd=C(w);var g=U(Je),u=U(Je),_=fT(),f=_f(),d=Yn(),v=Qs(),a=Fr();class s extends v.BrowserType{constructor(o){super(o,"firefox")}connectToTransport(o,h){return _.FFBrowser.connect(this.attribution.playwright,o,h)}doRewriteStartupLog(o){return o.logs&&(o.logs.includes("as root in a regular user's session is not supported.")&&(o.logs=`
`+(0,d.wrapInASCIIBox)(`Firefox is unable to launch if the $HOME folder isn't owned by the current user.
Workaround: Set the HOME=/root environment variable${t.GITHUB_ACTION?" in your GitHub Actions workflow file":""} when running Playwright.`,1)),o.logs.includes("no DISPLAY environment variable specified")&&(o.logs=`
`+(0,d.wrapInASCIIBox)(v.kNoXServerRunningError,1))),o}amendEnvironment(o){if(!u.default.isAbsolute(g.default.homedir()))throw new Error(`Cannot launch Firefox with relative home directory. Did you set ${g.default.platform()==="win32"?"USERPROFILE":"HOME"} to a relative path?`);return g.default.platform()==="linux"?{...o,SNAP_NAME:void 0,SNAP_INSTANCE_NAME:void 0}:o}attemptToGracefullyCloseBrowser(o){const h={method:"Browser.close",params:{},id:f.kBrowserCloseMessageId};o.send(h)}defaultArgs(o,h,m){const{args:c=[],headless:l}=o;if(c.find(b=>b.startsWith("-profile")||b.startsWith("--profile")))throw this._createUserDataDirArgMisuseError("--profile");if(c.find(b=>b.startsWith("-juggler")))throw new Error("Use the port parameter instead of -juggler argument");const T=["-no-remote"];return l?T.push("-headless"):(T.push("-wait-for-browser"),T.push("-foreground")),T.push("-profile",m),T.push("-juggler-pipe"),T.push(...c),h?T.push("about:blank"):T.push("-silent"),T}waitForReadyState(o,h){const m=new a.ManualPromise;return h.onMessage(c=>{c.includes("Juggler listening to the pipe")&&m.resolve({})}),m}}return Pd}var kd,tb;function Mo(){if(tb)return kd;tb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{WKConnection:()=>f,WKSession:()=>d,kBrowserCloseMessageId:()=>u,kPageProxyMessageReceived:()=>_}),kd=te(P);var e=Vr(),U=nr(),C=Mr(),w=hn(),g=Dn();const u=-9999,_=Symbol("kPageProxyMessageReceived");class f{constructor(a,s,n,o){this._lastId=0,this._closed=!1,this._transport=a,this._onDisconnect=s,this._protocolLogger=n,this._browserLogsCollector=o,this.browserSession=new d(this,"",h=>{this.rawSend(h)}),this._transport.onmessage=this._dispatchMessage.bind(this),this._transport.onclose=this._onClose.bind(this)}nextMessageId(){return++this._lastId}rawSend(a){this._protocolLogger("send",a),this._transport.send(a)}_dispatchMessage(a){if(this._protocolLogger("receive",a),a.id!==u){if(a.pageProxyId){const s={message:a,pageProxyId:a.pageProxyId};this.browserSession.dispatchMessage({method:_,params:s});return}this.browserSession.dispatchMessage(a)}}_onClose(a){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this._browserDisconnectedLogs=w.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs(),a),this.browserSession.dispose(),this._onDisconnect()}isClosed(){return this._closed}close(){this._closed||this._transport.close()}}class d extends e.EventEmitter{constructor(a,s,n){super(),this._disposed=!1,this._callbacks=new Map,this._crashed=!1,this.setMaxListeners(0),this.connection=a,this.sessionId=s,this._rawSend=n,this.on=super.on,this.off=super.removeListener,this.addListener=super.addListener,this.removeListener=super.removeListener,this.once=super.once}async send(a,s){if(this._crashed||this._disposed||this.connection._browserDisconnectedLogs)throw new g.ProtocolError(this._crashed?"crashed":"closed",void 0,this.connection._browserDisconnectedLogs);const n=this.connection.nextMessageId(),o={id:n,method:a,params:s};return this._rawSend(o),new Promise((h,m)=>{this._callbacks.set(n,{resolve:h,reject:m,error:new g.ProtocolError("error",a)})})}sendMayFail(a,s){return this.send(a,s).catch(n=>C.debugLogger.log("error",n))}markAsCrashed(){this._crashed=!0}isDisposed(){return this._disposed}dispose(){for(const a of this._callbacks.values())a.error.type=this._crashed?"crashed":"closed",a.error.logs=this.connection._browserDisconnectedLogs,a.reject(a.error);this._callbacks.clear(),this._disposed=!0}dispatchMessage(a){if(a.id&&this._callbacks.has(a.id)){const s=this._callbacks.get(a.id);this._callbacks.delete(a.id),a.error?(s.error.setMessage(a.error.message),s.reject(s.error)):s.resolve(a.result)}else a.id&&!a.error?(0,U.assert)(this.isDisposed()):Promise.resolve().then(()=>this.emit(a.method,a.params))}}return kd}var Ad,rb;function gT(){if(rb)return Ad;rb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{getAccessibilityTree:()=>e}),Ad=te(P);async function e(g,u){const _=u?u._objectId:void 0,{axNode:f}=await g.send("Page.accessibilitySnapshot",{objectId:_}),d=new w(f);return{tree:d,needle:u?d._findNeedle():null}}const U=new Map(Object.entries({TextField:"textbox"})),C=new Map(Object.entries({WebArea:"HTML content",Summary:"summary",DescriptionList:"description list",ImageMap:"image map",ListMarker:"list marker",Video:"video playback",Mark:"highlighted",contentinfo:"content information",Details:"details",DescriptionListDetail:"description",DescriptionListTerm:"term",alertdialog:"web alert dialog",dialog:"web dialog",status:"application status",tabpanel:"tab panel",application:"web application"}));class w{constructor(u){this._payload=u,this._children=[];for(const _ of this._payload.children||[])this._children.push(new w(_))}children(){return this._children}_findNeedle(){if(this._payload.found)return this;for(const u of this._children){const _=u._findNeedle();if(_)return _}return null}isControl(){switch(this._payload.role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"TextField":case"tree":return!0;default:return!1}}_isTextControl(){switch(this._payload.role){case"combobox":case"searchfield":case"textbox":case"TextField":return!0}return!1}_name(){return this._payload.role==="text"?this._payload.value||"":this._payload.name||""}isInteresting(u){const{role:_,focusable:f}=this._payload,d=this._name();return _==="ScrollArea"?!1:_==="WebArea"||f||_==="MenuListOption"||this.isControl()?!0:u?!1:this.isLeafNode()&&!!d}_hasRedundantTextChild(){if(this._children.length!==1)return!1;const u=this._children[0];return u._payload.role==="text"&&this._payload.name===u._payload.value}isLeafNode(){return!!(!this._children.length||this._isTextControl()||this._hasRedundantTextChild())}serialize(){const u={role:U.get(this._payload.role)||this._payload.role,name:this._name()};if("description"in this._payload&&this._payload.description!==u.name&&(u.description=this._payload.description),"roledescription"in this._payload){const s=this._payload.roledescription;s!==this._payload.role&&C.get(this._payload.role)!==s&&(u.roledescription=s)}"value"in this._payload&&this._payload.role!=="text"&&(typeof this._payload.value=="string"?u.valueString=this._payload.value:typeof this._payload.value=="number"&&(u.valueNumber=this._payload.value)),"checked"in this._payload&&(u.checked=this._payload.checked==="true"?"checked":this._payload.checked==="false"?"unchecked":"mixed"),"pressed"in this._payload&&(u.pressed=this._payload.pressed==="true"?"pressed":this._payload.pressed==="false"?"released":"mixed");const _=["keyshortcuts","valuetext"];for(const s of _)s in this._payload&&(u[s]=this._payload[s]);const f=["disabled","expanded","focused","modal","multiselectable","readonly","required","selected"];for(const s of f){if(s==="focused"&&(this._payload.role==="WebArea"||this._payload.role==="ScrollArea"))continue;const n=this._payload[s];n&&(u[s]=n)}const d=["level","valuemax","valuemin"];for(const s of d)s in this._payload&&(u[s]=this._payload[s]);const v=["autocomplete","haspopup","invalid"];for(const s of v){const n=this._payload[s];!n||n==="false"||(u[s]=n)}const a=new Set(["ScrollArea","scrollbar","listbox","combobox","menu","tree","separator","slider","tablist","toolbar"]);return this._payload.orientation&&a.has(this._payload.role)&&(u.orientation=this._payload.orientation),u}}return Ad}var Id,nb;function gy(){if(nb)return Id;nb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(o,h)=>{for(var m in h)r(o,m,{get:h[m],enumerable:!0})},P=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of E(h))!V.call(o,l)&&l!==m&&r(o,l,{get:()=>h[l],enumerable:!(c=i(h,l))||c.enumerable});return o},e=(o,h,m)=>(m=o!=null?t(R(o)):{},P(!o||!o.__esModule?r(m,"default",{value:o,enumerable:!0}):m,o)),U=o=>P(r({},"__esModule",{value:!0}),o),C={};te(C,{WKExecutionContext:()=>d,createHandle:()=>n}),Id=U(C);var w=e(Oi()),g=e(hi()),u=Dn(),_=Gr(),f=ds();class d{constructor(h,m){this._session=h,this._contextId=m}async rawEvaluateJSON(h){try{const m=await this._session.send("Runtime.evaluate",{expression:h,contextId:this._contextId,returnByValue:!0});if(m.wasThrown)throw new w.JavaScriptErrorInEvaluate(m.result.description);return m.result.value}catch(m){throw a(m)}}async rawEvaluateHandle(h,m){try{const c=await this._session.send("Runtime.evaluate",{expression:m,contextId:this._contextId,returnByValue:!1});if(c.wasThrown)throw new w.JavaScriptErrorInEvaluate(c.result.description);return n(h,c.result)}catch(c){throw a(c)}}async evaluateWithArguments(h,m,c,l,x){try{const T=await this._session.send("Runtime.callFunctionOn",{functionDeclaration:h,objectId:c._objectId,arguments:[{objectId:c._objectId},...l.map(b=>({value:b})),...x.map(b=>({objectId:b._objectId}))],returnByValue:m,emulateUserGesture:!0,awaitPromise:!0});if(T.wasThrown)throw new w.JavaScriptErrorInEvaluate(T.result.description);return m?(0,f.parseEvaluationResultValue)(T.result.value):n(c._context,T.result)}catch(T){throw a(T)}}async getProperties(h){const m=await this._session.send("Runtime.getProperties",{objectId:h._objectId,ownProperties:!0}),c=new Map;for(const l of m.properties)!l.enumerable||!l.value||c.set(l.name,n(h._context,l.value));return c}async releaseHandle(h){h._objectId&&await this._session.send("Runtime.releaseObject",{objectId:h._objectId})}}function v(o){const h=o.value;return o.type==="number"&&["NaN","-Infinity","Infinity","-0"].includes(o.description)?w.parseUnserializableValue(o.description):h}function a(o){if(o.message.includes("Object has too long reference chain"))throw new Error("Cannot serialize result: object reference chain is too long.");return!w.isJavaScriptErrorInEvaluate(o)&&!(0,u.isSessionClosedError)(o)?new Error("Execution context was destroyed, most likely because of a navigation."):o}function s(o){if(o.type==="undefined")return"undefined";if("value"in o)return String(o.value);if(o.description==="Object"&&o.preview){const h=[];for(const{name:m,value:c}of o.preview.properties)h.push(`${m}: ${c}`);return`{${h.join(", ")}}`}return o.subtype==="array"&&o.preview?w.sparseArrayToString(o.preview.properties):o.description}function n(o,h){if(h.subtype==="node")return(0,_.assert)(o instanceof g.FrameExecutionContext),new g.ElementHandle(o,h.objectId);const m=h.className==="Promise";return new w.JSHandle(o,m?"promise":h.subtype||h.type,s(h),h.objectId,v(h))}return Id}var Nd,ib;function _T(){if(ib)return Nd;ib=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(s,n)=>{for(var o in n)r(s,o,{get:n[o],enumerable:!0})},P=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of E(n))!V.call(s,m)&&m!==o&&r(s,m,{get:()=>n[m],enumerable:!(h=i(n,m))||h.enumerable});return s},e=(s,n,o)=>(o=s!=null?t(R(s)):{},P(!s||!s.__esModule?r(o,"default",{value:s,enumerable:!0}):o,s)),U=s=>P(r({},"__esModule",{value:!0}),s),C={};te(C,{RawKeyboardImpl:()=>d,RawMouseImpl:()=>v,RawTouchscreenImpl:()=>a}),Nd=U(C);var w=nr(),g=e(Ro()),u=oy();function _(s){let n=0;return s.has("Shift")&&(n|=1),s.has("Control")&&(n|=2),s.has("Alt")&&(n|=4),s.has("Meta")&&(n|=8),n}function f(s){let n=0;return s.has("left")&&(n|=1),s.has("right")&&(n|=2),s.has("middle")&&(n|=4),n}class d{constructor(n){this._pageProxySession=n}setSession(n){this._session=n}async keydown(n,o,h,m,c){const l=[];for(const $ of["Shift","Control","Alt","Meta"])o.has($)&&l.push($);const{code:x,keyCode:T,key:b,text:p}=m;l.push(x);const O=l.join("+");let z=u.macEditingCommands[O];(0,w.isString)(z)&&(z=[z]),await n.race(this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyDown",modifiers:_(o),windowsVirtualKeyCode:T,code:x,key:b,text:p,unmodifiedText:p,autoRepeat:c,macCommands:z,isKeypad:m.location===g.keypadLocation}))}async keyup(n,o,h,m){const{code:c,key:l}=m;await n.race(this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:_(o),key:l,windowsVirtualKeyCode:m.keyCode,code:c,isKeypad:m.location===g.keypadLocation}))}async sendText(n,o){await n.race(this._session.send("Page.insertText",{text:o}))}}class v{constructor(n){this._pageProxySession=n}setSession(n){this._session=n}async move(n,o,h,m,c,l,x){await n.race(this._pageProxySession.send("Input.dispatchMouseEvent",{type:"move",button:m,buttons:f(c),x:o,y:h,modifiers:_(l)}))}async down(n,o,h,m,c,l,x){await n.race(this._pageProxySession.send("Input.dispatchMouseEvent",{type:"down",button:m,buttons:f(c),x:o,y:h,modifiers:_(l),clickCount:x}))}async up(n,o,h,m,c,l,x){await n.race(this._pageProxySession.send("Input.dispatchMouseEvent",{type:"up",button:m,buttons:f(c),x:o,y:h,modifiers:_(l),clickCount:x}))}async wheel(n,o,h,m,c,l,x){var T;if((T=this._page)!=null&&T.browserContext._options.isMobile)throw new Error("Mouse wheel is not supported in mobile WebKit");await this._session.send("Page.updateScrollingState"),await n.race(this._page.mainFrame().evaluateExpression("new Promise(requestAnimationFrame)",{world:"utility"})),await n.race(this._pageProxySession.send("Input.dispatchWheelEvent",{x:o,y:h,deltaX:l,deltaY:x,modifiers:_(c)}))}setPage(n){this._page=n}}class a{constructor(n){this._pageProxySession=n}async tap(n,o,h,m){await n.race(this._pageProxySession.send("Input.dispatchTapEvent",{x:o,y:h,modifiers:_(m)}))}}return Nd}var Rd,sb;function bT(){if(sb)return Rd;sb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(v,a)=>{for(var s in a)r(v,s,{get:a[s],enumerable:!0})},P=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of E(a))!V.call(v,o)&&o!==s&&r(v,o,{get:()=>a[o],enumerable:!(n=i(a,o))||n.enumerable});return v},e=(v,a,s)=>(s=v!=null?t(R(v)):{},P(!v||!v.__esModule?r(s,"default",{value:v,enumerable:!0}):s,v)),U=v=>P(r({},"__esModule",{value:!0}),v),C={};te(C,{WKInterceptableRequest:()=>_,WKRouteImpl:()=>f}),Rd=U(C);var w=nr(),g=e(fn());const u={aborted:"Cancellation",accessdenied:"AccessControl",addressunreachable:"General",blockedbyclient:"Cancellation",blockedbyresponse:"General",connectionaborted:"General",connectionclosed:"General",connectionfailed:"General",connectionrefused:"General",connectionreset:"General",internetdisconnected:"General",namenotresolved:"General",timedout:"Timeout",failed:"General"};class _{constructor(a,s,n,o,h){this._session=a,this._requestId=n.requestId;const m=n.type?n.type.toLowerCase():o?o.request.resourceType():"other";let c=null;this._timestamp=n.timestamp,this._wallTime=n.walltime*1e3,n.request.postData&&(c=Buffer.from(n.request.postData,"base64")),this.request=new g.Request(s._page.browserContext,s,null,(o==null?void 0:o.request)||null,h,n.request.url,m,n.request.method,c,(0,w.headersObjectToArray)(n.request.headers))}adoptRequestFromNewProcess(a,s){this._session=a,this._requestId=s}createResponse(a){const s=async()=>{const c=await this._session.send("Network.getResponseBody",{requestId:this._requestId});return Buffer.from(c.body,c.base64Encoded?"base64":"utf8")},n=a.timing,o={startTime:this._wallTime,domainLookupStart:n?d(n.domainLookupStart):-1,domainLookupEnd:n?d(n.domainLookupEnd):-1,connectStart:n?d(n.connectStart):-1,secureConnectionStart:n?d(n.secureConnectionStart):-1,connectEnd:n?d(n.connectEnd):-1,requestStart:n?d(n.requestStart):-1,responseStart:n?d(n.responseStart):-1},h=process.platform==="darwin"?",":"playwright-set-cookie-separator",m=new g.Response(this.request,a.status,a.statusText,(0,w.headersObjectToArray)(a.headers,",",h),o,s,a.source==="service-worker");if(m.setRawResponseHeaders(null),m.setTransferSize(null),a.requestHeaders&&Object.keys(a.requestHeaders).length){const c={...a.requestHeaders};c.host||(c.Host=new URL(this.request.url()).host),this.request.setRawRequestHeaders((0,w.headersObjectToArray)(c))}else this.request.setRawRequestHeaders(null);return m}}class f{constructor(a,s){this._session=a,this._requestId=s}async abort(a){const s=u[a];(0,w.assert)(s,"Unknown error code: "+a),await this._session.sendMayFail("Network.interceptRequestWithError",{requestId:this._requestId,errorType:s})}async fulfill(a){if(300<=a.status&&a.status<400)throw new Error("Cannot fulfill with redirect status: "+a.status);let s=a.isBase64?"application/octet-stream":"text/plain";const n=(0,w.headersArrayToObject)(a.headers,!0),o=n["content-type"];o&&(s=o.split(";")[0].trim()),await this._session.sendMayFail("Network.interceptRequestWithResponse",{requestId:this._requestId,status:a.status,statusText:g.statusText(a.status),mimeType:s,headers:n,base64Encoded:a.isBase64,content:a.body})}async continue(a){await this._session.sendMayFail("Network.interceptWithRequest",{requestId:this._requestId,url:a.url,method:a.method,headers:a.headers?(0,w.headersArrayToObject)(a.headers,!1):void 0,postData:a.postData?Buffer.from(a.postData).toString("base64"):void 0})}}function d(v){return v===-1e3||v<=0?-1:(v*1e3|0)/1e3}return Rd}var Ld,ab;function vT(){if(ab)return Ld;ab=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{WKProvisionalPage:()=>C}),Ld=te(P);var e=nr(),U=qr();class C{constructor(g,u){var d;this._sessionListeners=[],this._mainFrameId=null,this._session=g,this._wkPage=u,this._coopNavigationRequest=(d=u._page.mainFrame().pendingDocument())==null?void 0:d.request;const _=v=>a=>{a.frameId&&(a.frameId=this._wkPage._page.frameManager.mainFrame()._id),v(a)},f=this._wkPage;this._sessionListeners=[U.eventsHelper.addEventListener(g,"Network.requestWillBeSent",_(v=>this._onRequestWillBeSent(v))),U.eventsHelper.addEventListener(g,"Network.requestIntercepted",_(v=>f._onRequestIntercepted(g,v))),U.eventsHelper.addEventListener(g,"Network.responseReceived",_(v=>f._onResponseReceived(g,v))),U.eventsHelper.addEventListener(g,"Network.loadingFinished",_(v=>this._onLoadingFinished(v))),U.eventsHelper.addEventListener(g,"Network.loadingFailed",_(v=>this._onLoadingFailed(v)))],this.initializationPromise=this._wkPage._initializeSession(g,!0,({frameTree:v})=>this._handleFrameTree(v))}coopNavigationRequest(){return this._coopNavigationRequest}dispose(){U.eventsHelper.removeEventListeners(this._sessionListeners)}commit(){(0,e.assert)(this._mainFrameId),this._wkPage._onFrameAttached(this._mainFrameId,null)}_onRequestWillBeSent(g){if(this._coopNavigationRequest&&this._coopNavigationRequest.url()===g.request.url){this._wkPage._adoptRequestFromNewProcess(this._coopNavigationRequest,this._session,g.requestId);return}this._wkPage._onRequestWillBeSent(this._session,g)}_onLoadingFinished(g){this._coopNavigationRequest=void 0,this._wkPage._onLoadingFinished(g)}_onLoadingFailed(g){this._coopNavigationRequest=void 0,this._wkPage._onLoadingFailed(this._session,g)}_handleFrameTree(g){(0,e.assert)(!g.frame.parentId),this._mainFrameId=g.frame.id}}return Ld}var Dd,ob;function wT(){if(ob)return Dd;ob=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(u,_)=>{for(var f in _)t(u,f,{get:_[f],enumerable:!0})},V=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of i(_))!E.call(u,v)&&v!==f&&t(u,v,{get:()=>_[v],enumerable:!(d=r(_,v))||d.enumerable});return u},te=u=>V(t({},"__esModule",{value:!0}),u),P={};R(P,{WKWorkers:()=>g}),Dd=te(P);var e=qr(),U=Kr(),C=Mo(),w=gy();class g{constructor(_){this._sessionListeners=[],this._workerSessions=new Map,this._page=_}setSession(_){e.eventsHelper.removeEventListeners(this._sessionListeners),this.clear(),this._sessionListeners=[e.eventsHelper.addEventListener(_,"Worker.workerCreated",f=>{const d=new U.Worker(this._page,f.url),v=new C.WKSession(_.connection,f.workerId,a=>{_.send("Worker.sendMessageToWorker",{workerId:f.workerId,message:JSON.stringify(a)}).catch(s=>{v.dispatchMessage({id:a.id,error:{message:s.message}})})});this._workerSessions.set(f.workerId,v),d.createExecutionContext(new w.WKExecutionContext(v,void 0)),this._page.addWorker(f.workerId,d),v.on("Console.messageAdded",a=>this._onConsoleMessage(d,a)),Promise.all([v.send("Runtime.enable"),v.send("Console.enable"),_.send("Worker.initialized",{workerId:f.workerId})]).catch(a=>{this._page.removeWorker(f.workerId)})}),e.eventsHelper.addEventListener(_,"Worker.dispatchMessageFromWorker",f=>{const d=this._workerSessions.get(f.workerId);d&&d.dispatchMessage(JSON.parse(f.message))}),e.eventsHelper.addEventListener(_,"Worker.workerTerminated",f=>{const d=this._workerSessions.get(f.workerId);d&&(d.dispose(),this._workerSessions.delete(f.workerId),this._page.removeWorker(f.workerId))})]}clear(){this._page.clearWorkers(),this._workerSessions.clear()}async initializeSession(_){await _.send("Worker.enable")}async _onConsoleMessage(_,f){const{type:d,level:v,text:a,parameters:s,url:n,line:o,column:h}=f.message;let m=d||"";d==="log"?m=v:d==="timing"&&(m="timeEnd");const c=(s||[]).map(x=>(0,w.createHandle)(_.existingExecutionContext,x)),l={url:n||"",lineNumber:(o||1)-1,columnNumber:(h||1)-1};this._page.addConsoleMessage(m,c,l,c.length?void 0:a)}}return Dd}var Md,cb;function yT(){if(cb)return Md;cb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(ne,S)=>{for(var j in S)r(ne,j,{get:S[j],enumerable:!0})},P=(ne,S,j,y)=>{if(S&&typeof S=="object"||typeof S=="function")for(let I of E(S))!V.call(ne,I)&&I!==j&&r(ne,I,{get:()=>S[I],enumerable:!(y=i(S,I))||y.enumerable});return ne},e=(ne,S,j)=>(j=ne!=null?t(R(ne)):{},P(!ne||!ne.__esModule?r(j,"default",{value:ne,enumerable:!0}):j,ne)),U=ne=>P(r({},"__esModule",{value:!0}),ne),C={};te(C,{WKPage:()=>le}),Md=U(C);var w=e(Je),g=nr(),u=zi(),_=tn(),f=qr(),d=ko(),v=pn(),a=Ar(),s=Ir(),n=e(Ks()),o=e(hi()),h=Pn(),m=hn(),c=e(fn()),l=Kr(),x=gT(),T=Mo(),b=gy(),p=_T(),O=bT(),z=vT(),$=wT(),q=Mr();const J="__playwright_utility_world__";class le{constructor(S,j,y){if(this._provisionalPage=null,this._requestIdToRequest=new Map,this._requestIdToRequestWillBeSentEvent=new Map,this._sessionListeners=[],this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=I=>{},this._lastConsoleMessage=null,this._requestIdToResponseReceivedPayloadEvent=new Map,this._recordingVideoFile=null,this._screencastGeneration=0,this._pageProxySession=j,this._opener=y,this.rawKeyboard=new p.RawKeyboardImpl(j),this.rawMouse=new p.RawMouseImpl(j),this.rawTouchscreen=new p.RawTouchscreenImpl(j),this._contextIdToContext=new Map,this._page=new l.Page(this,S),this.rawMouse.setPage(this._page),this._workers=new $.WKWorkers(this._page),this._session=void 0,this._browserContext=S,this._page.on(l.Page.Events.FrameDetached,I=>this._removeContextsForFrame(I,!1)),this._eventListeners=[f.eventsHelper.addEventListener(this._pageProxySession,"Target.targetCreated",this._onTargetCreated.bind(this)),f.eventsHelper.addEventListener(this._pageProxySession,"Target.targetDestroyed",this._onTargetDestroyed.bind(this)),f.eventsHelper.addEventListener(this._pageProxySession,"Target.dispatchMessageFromTarget",this._onDispatchMessageFromTarget.bind(this)),f.eventsHelper.addEventListener(this._pageProxySession,"Target.didCommitProvisionalTarget",this._onDidCommitProvisionalTarget.bind(this)),f.eventsHelper.addEventListener(this._pageProxySession,"Screencast.screencastFrame",this._onScreencastFrame.bind(this))],this._firstNonInitialNavigationCommittedPromise=new Promise((I,D)=>{this._firstNonInitialNavigationCommittedFulfill=I,this._firstNonInitialNavigationCommittedReject=D}),y&&!S._options.noDefaultViewport&&y._nextWindowOpenPopupFeatures){const I=m.helper.getViewportSizeFromWindowFeatures(y._nextWindowOpenPopupFeatures);y._nextWindowOpenPopupFeatures=void 0,I&&this._page.setEmulatedSizeFromWindowOpen({viewport:I,screen:I})}}async _initializePageProxySession(){if(this._page.browserContext.isSettingStorageState())return;const S=[this._pageProxySession.send("Dialog.enable"),this._pageProxySession.send("Emulation.setActiveAndFocused",{active:!0})];if(this._browserContext._options.javaScriptEnabled===!1&&S.push(this._pageProxySession.send("Emulation.setJavaScriptEnabled",{enabled:!1})),S.push(this._updateViewport()),S.push(this.updateHttpCredentials()),this._browserContext._permissions.size)for(const[y,I]of this._browserContext._permissions)S.push(this._grantPermissions(y,I));if(this._browserContext._options.recordVideo){const y=w.default.join(this._browserContext._options.recordVideo.dir,(0,_.createGuid)()+".webm");S.push(this._browserContext._ensureVideosPath().then(()=>this._startVideo({...this._browserContext._options.recordVideo.size,outputFile:y})))}await Promise.all(S)}_setSession(S){f.eventsHelper.removeEventListeners(this._sessionListeners),this._session=S,this.rawKeyboard.setSession(S),this.rawMouse.setSession(S),this._addSessionListeners(),this._workers.setSession(S)}async _initializeSession(S,j,y){await this._initializeSessionMayThrow(S,y).catch(I=>{if(!(j&&S.isDisposed())&&this._session===S)throw I})}async _initializeSessionMayThrow(S,j){const[,y]=await Promise.all([S.send("Page.enable"),S.send("Page.getResourceTree")]);j(y);const I=[S.send("Runtime.enable"),S.send("Page.createUserWorld",{name:J}).catch(ye=>{}),S.send("Console.enable"),S.send("Network.enable"),this._workers.initializeSession(S)];if(this._page.browserContext.needsPlaywrightBinding()&&I.push(S.send("Runtime.addBinding",{name:l.PageBinding.kBindingName})),this._page.needsRequestInterception()&&(I.push(S.send("Network.setInterceptionEnabled",{enabled:!0})),I.push(S.send("Network.setResourceCachingDisabled",{disabled:!0})),I.push(S.send("Network.addInterception",{url:".*",stage:"request",isRegex:!0}))),this._page.browserContext.isSettingStorageState()){await Promise.all(I);return}const D=this._browserContext._options;D.userAgent&&I.push(this.updateUserAgent());const ie=this._page.emulatedMedia();(ie.media||ie.colorScheme||ie.reducedMotion||ie.forcedColors||ie.contrast)&&I.push(le._setEmulateMedia(S,ie.media,ie.colorScheme,ie.reducedMotion,ie.forcedColors,ie.contrast));const he=this._calculateBootstrapScript();he.length&&I.push(S.send("Page.setBootstrapScript",{source:he})),this._page.frames().map(ye=>ye.evaluateExpression(he).catch(Se=>{})),D.bypassCSP&&I.push(S.send("Page.setBypassCSP",{enabled:!0}));const me=this._page.emulatedSize();me&&I.push(S.send("Page.setScreenSizeOverride",{width:me.screen.width,height:me.screen.height})),I.push(this.updateEmulateMedia()),I.push(S.send("Network.setExtraHTTPHeaders",{headers:(0,u.headersArrayToObject)(this._calculateExtraHTTPHeaders(),!1)})),D.offline&&I.push(S.send("Network.setEmulateOfflineState",{offline:!0})),I.push(S.send("Page.setTouchEmulationEnabled",{enabled:!!D.hasTouch})),D.timezoneId&&I.push(S.send("Page.setTimeZone",{timeZone:D.timezoneId}).catch(ye=>{throw new Error(`Invalid timezone ID: ${D.timezoneId}`)})),this._page.fileChooserIntercepted()&&I.push(S.send("Page.setInterceptFileChooserDialog",{enabled:!0})),I.push(S.send("Page.overrideSetting",{setting:"DeviceOrientationEventEnabled",value:D.isMobile})),I.push(S.send("Page.overrideSetting",{setting:"FullScreenEnabled",value:!D.isMobile})),I.push(S.send("Page.overrideSetting",{setting:"NotificationsEnabled",value:!D.isMobile})),I.push(S.send("Page.overrideSetting",{setting:"PointerLockEnabled",value:!D.isMobile})),I.push(S.send("Page.overrideSetting",{setting:"InputTypeMonthEnabled",value:D.isMobile})),I.push(S.send("Page.overrideSetting",{setting:"InputTypeWeekEnabled",value:D.isMobile})),I.push(S.send("Page.overrideSetting",{setting:"FixedBackgroundsPaintRelativeToDocument",value:D.isMobile})),await Promise.all(I)}_onDidCommitProvisionalTarget(S){const{oldTargetId:j,newTargetId:y}=S;(0,g.assert)(this._provisionalPage),(0,g.assert)(this._provisionalPage._session.sessionId===y,"Unknown new target: "+y),(0,g.assert)(this._session.sessionId===j,"Unknown old target: "+j);const I=this._provisionalPage._session;this._provisionalPage.commit(),this._provisionalPage.dispose(),this._provisionalPage=null,this._setSession(I)}_onTargetDestroyed(S){const{targetId:j,crashed:y}=S;this._provisionalPage&&this._provisionalPage._session.sessionId===j?(this._maybeCancelCoopNavigationRequest(this._provisionalPage),this._provisionalPage._session.dispose(),this._provisionalPage.dispose(),this._provisionalPage=null):this._session.sessionId===j&&(this._session.dispose(),f.eventsHelper.removeEventListeners(this._sessionListeners),y&&(this._session.markAsCrashed(),this._page._didCrash()))}didClose(){this._pageProxySession.dispose(),f.eventsHelper.removeEventListeners(this._sessionListeners),f.eventsHelper.removeEventListeners(this._eventListeners),this._session&&this._session.dispose(),this._provisionalPage&&(this._provisionalPage._session.dispose(),this._provisionalPage.dispose(),this._provisionalPage=null),this._firstNonInitialNavigationCommittedReject(new h.TargetClosedError),this._page._didClose()}dispatchMessageToSession(S){this._pageProxySession.dispatchMessage(S)}handleProvisionalLoadFailed(S){if(!this._page.initializedOrUndefined()){this._firstNonInitialNavigationCommittedReject(new Error("Initial load failed"));return}if(!this._provisionalPage)return;let j=S.error;j.includes("cancelled")&&(j+="; maybe frame was detached?"),this._page.frameManager.frameAbortedNavigation(this._page.mainFrame()._id,j,S.loaderId)}handleWindowOpen(S){this._nextWindowOpenPopupFeatures=S.windowFeatures}async _onTargetCreated(S){var I;const{targetInfo:j}=S,y=new T.WKSession(this._pageProxySession.connection,j.targetId,D=>{this._pageProxySession.send("Target.sendMessageToTarget",{message:JSON.stringify(D),targetId:j.targetId}).catch(ie=>{y.dispatchMessage({id:D.id,error:{message:ie.message}})})});if((0,g.assert)(j.type==="page","Only page targets are expected in WebKit, received: "+j.type),j.isProvisional)(0,g.assert)(j.isProvisional),(0,g.assert)(!this._provisionalPage),this._provisionalPage=new z.WKProvisionalPage(y,this),j.isPaused&&this._provisionalPage.initializationPromise.then(()=>{this._pageProxySession.sendMayFail("Target.resume",{targetId:j.targetId})});else{(0,g.assert)(!this._page.initializedOrUndefined());let D;try{this._setSession(y),await Promise.all([this._initializePageProxySession(),this._initializeSession(y,!1,({frameTree:ie})=>this._handleFrameTree(ie))]),D=this._page}catch(ie){D=ie}if(j.isPaused&&this._pageProxySession.sendMayFail("Target.resume",{targetId:j.targetId}),D instanceof l.Page&&this._page.mainFrame().url()==="")try{await this._firstNonInitialNavigationCommittedPromise}catch(ie){D=ie}else this._firstNonInitialNavigationCommittedPromise.catch(()=>{});this._page.reportAsNew((I=this._opener)==null?void 0:I._page,D instanceof l.Page?void 0:D)}}_onDispatchMessageFromTarget(S){const{targetId:j,message:y}=S;if(this._provisionalPage&&this._provisionalPage._session.sessionId===j)this._provisionalPage._session.dispatchMessage(JSON.parse(y));else if(this._session.sessionId===j)this._session.dispatchMessage(JSON.parse(y));else throw new Error("Unknown target: "+j)}_addSessionListeners(){this._sessionListeners=[f.eventsHelper.addEventListener(this._session,"Page.frameNavigated",S=>this._onFrameNavigated(S.frame,!1)),f.eventsHelper.addEventListener(this._session,"Page.navigatedWithinDocument",S=>this._onFrameNavigatedWithinDocument(S.frameId,S.url)),f.eventsHelper.addEventListener(this._session,"Page.frameAttached",S=>this._onFrameAttached(S.frameId,S.parentFrameId)),f.eventsHelper.addEventListener(this._session,"Page.frameDetached",S=>this._onFrameDetached(S.frameId)),f.eventsHelper.addEventListener(this._session,"Page.willCheckNavigationPolicy",S=>this._onWillCheckNavigationPolicy(S.frameId)),f.eventsHelper.addEventListener(this._session,"Page.didCheckNavigationPolicy",S=>this._onDidCheckNavigationPolicy(S.frameId,S.cancel)),f.eventsHelper.addEventListener(this._session,"Page.frameScheduledNavigation",S=>this._onFrameScheduledNavigation(S.frameId,S.delay,S.targetIsCurrentFrame)),f.eventsHelper.addEventListener(this._session,"Page.loadEventFired",S=>this._page.frameManager.frameLifecycleEvent(S.frameId,"load")),f.eventsHelper.addEventListener(this._session,"Page.domContentEventFired",S=>this._page.frameManager.frameLifecycleEvent(S.frameId,"domcontentloaded")),f.eventsHelper.addEventListener(this._session,"Runtime.executionContextCreated",S=>this._onExecutionContextCreated(S.context)),f.eventsHelper.addEventListener(this._session,"Runtime.bindingCalled",S=>this._onBindingCalled(S.contextId,S.argument)),f.eventsHelper.addEventListener(this._session,"Console.messageAdded",S=>this._onConsoleMessage(S)),f.eventsHelper.addEventListener(this._session,"Console.messageRepeatCountUpdated",S=>this._onConsoleRepeatCountUpdated(S)),f.eventsHelper.addEventListener(this._pageProxySession,"Dialog.javascriptDialogOpening",S=>this._onDialog(S)),f.eventsHelper.addEventListener(this._session,"Page.fileChooserOpened",S=>this._onFileChooserOpened(S)),f.eventsHelper.addEventListener(this._session,"Network.requestWillBeSent",S=>this._onRequestWillBeSent(this._session,S)),f.eventsHelper.addEventListener(this._session,"Network.requestIntercepted",S=>this._onRequestIntercepted(this._session,S)),f.eventsHelper.addEventListener(this._session,"Network.responseReceived",S=>this._onResponseReceived(this._session,S)),f.eventsHelper.addEventListener(this._session,"Network.loadingFinished",S=>this._onLoadingFinished(S)),f.eventsHelper.addEventListener(this._session,"Network.loadingFailed",S=>this._onLoadingFailed(this._session,S)),f.eventsHelper.addEventListener(this._session,"Network.webSocketCreated",S=>this._page.frameManager.onWebSocketCreated(S.requestId,S.url)),f.eventsHelper.addEventListener(this._session,"Network.webSocketWillSendHandshakeRequest",S=>this._page.frameManager.onWebSocketRequest(S.requestId)),f.eventsHelper.addEventListener(this._session,"Network.webSocketHandshakeResponseReceived",S=>this._page.frameManager.onWebSocketResponse(S.requestId,S.response.status,S.response.statusText)),f.eventsHelper.addEventListener(this._session,"Network.webSocketFrameSent",S=>S.response.payloadData&&this._page.frameManager.onWebSocketFrameSent(S.requestId,S.response.opcode,S.response.payloadData)),f.eventsHelper.addEventListener(this._session,"Network.webSocketFrameReceived",S=>S.response.payloadData&&this._page.frameManager.webSocketFrameReceived(S.requestId,S.response.opcode,S.response.payloadData)),f.eventsHelper.addEventListener(this._session,"Network.webSocketClosed",S=>this._page.frameManager.webSocketClosed(S.requestId)),f.eventsHelper.addEventListener(this._session,"Network.webSocketFrameError",S=>this._page.frameManager.webSocketError(S.requestId,S.errorMessage))]}async _updateState(S,j){await this._forAllSessions(y=>y.send(S,j).then())}async _forAllSessions(S){const j=[this._session];this._provisionalPage&&j.push(this._provisionalPage._session),await Promise.all(j.map(y=>S(y).catch(I=>{})))}_onWillCheckNavigationPolicy(S){this._provisionalPage||this._page.frameManager.frameRequestedNavigation(S)}_onDidCheckNavigationPolicy(S,j){j&&(this._provisionalPage||this._page.frameManager.frameAbortedNavigation(S,"Navigation canceled by policy check"))}_onFrameScheduledNavigation(S,j,y){y&&this._page.frameManager.frameRequestedNavigation(S)}_handleFrameTree(S){if(this._onFrameAttached(S.frame.id,S.frame.parentId||null),this._onFrameNavigated(S.frame,!0),this._page.frameManager.frameLifecycleEvent(S.frame.id,"domcontentloaded"),this._page.frameManager.frameLifecycleEvent(S.frame.id,"load"),!!S.childFrames)for(const j of S.childFrames)this._handleFrameTree(j)}_onFrameAttached(S,j){return this._page.frameManager.frameAttached(S,j)}_onFrameNavigated(S,j){const y=this._page.frameManager.frame(S.id);(0,g.assert)(y),this._removeContextsForFrame(y,!0),S.parentId||this._workers.clear(),this._page.frameManager.frameCommittedNewDocumentNavigation(S.id,S.url,S.name||"",S.loaderId,j),j||this._firstNonInitialNavigationCommittedFulfill()}_onFrameNavigatedWithinDocument(S,j){this._page.frameManager.frameCommittedSameDocumentNavigation(S,j)}_onFrameDetached(S){this._page.frameManager.frameDetached(S)}_removeContextsForFrame(S,j){for(const[y,I]of this._contextIdToContext)I.frame===S&&(this._contextIdToContext.delete(y),j&&S._contextDestroyed(I))}_onExecutionContextCreated(S){if(this._contextIdToContext.has(S.id))return;const j=this._page.frameManager.frame(S.frameId);if(!j)return;const y=new b.WKExecutionContext(this._session,S.id);let I=null;S.type==="normal"?I="main":S.type==="user"&&S.name===J&&(I="utility");const D=new o.FrameExecutionContext(y,j,I);I&&j._contextCreated(I,D),this._contextIdToContext.set(S.id,D)}async _onBindingCalled(S,j){if(!(await this._page.waitForInitializedOrError()instanceof Error)){const I=this._contextIdToContext.get(S);I&&await this._page.onBindingCalled(j,I)}}async navigateFrame(S,j,y){if(this._pageProxySession.isDisposed())throw new h.TargetClosedError;const I=this._pageProxySession.sessionId;return{newDocumentId:(await this._pageProxySession.connection.browserSession.send("Playwright.navigate",{url:j,pageProxyId:I,frameId:S._id,referrer:y})).loaderId}}_onConsoleMessage(S){const{type:j,level:y,text:I,parameters:D,url:ie,line:he,column:me,source:ye}=S.message;if(y==="error"&&ye==="javascript"){const{name:Pe,message:Ne}=(0,v.splitErrorMessage)(I);let Le;S.message.stackTrace?Le=I+`
`+S.message.stackTrace.callFrames.map(Ge=>`    at ${Ge.functionName||"unknown"} (${Ge.url}:${Ge.lineNumber}:${Ge.columnNumber})`).join(`
`):Le="",this._lastConsoleMessage=null;const qe=new Error(Ne);qe.stack=Le,qe.name=Pe,this._page.emitOnContextOnceInitialized(s.BrowserContext.Events.PageError,qe,this._page);return}let Se=j||"";j==="log"?Se=y:j==="timing"&&(Se="timeEnd");const Oe=[];for(const Pe of D||[]){let Ne;if(Pe.objectId){const Le=JSON.parse(Pe.objectId);Ne=this._contextIdToContext.get(Le.injectedScriptId)}else Ne=[...this._contextIdToContext.values()].find(Le=>Le.frame===this._page.mainFrame());if(!Ne)return;Oe.push((0,b.createHandle)(Ne,Pe))}this._lastConsoleMessage={derivedType:Se,text:I,handles:Oe,count:0,location:{url:ie||"",lineNumber:(he||1)-1,columnNumber:(me||1)-1}},this._onConsoleRepeatCountUpdated({count:1})}_onConsoleRepeatCountUpdated(S){if(this._lastConsoleMessage){const{derivedType:j,text:y,handles:I,count:D,location:ie}=this._lastConsoleMessage;for(let he=D;he<S.count;++he)this._page.addConsoleMessage(j,I,ie,I.length?void 0:y);this._lastConsoleMessage.count=S.count}}_onDialog(S){this._page.browserContext.dialogManager.dialogDidOpen(new n.Dialog(this._page,S.type,S.message,async(j,y)=>{S.type==="beforeunload"&&!j&&this._page.frameManager.frameAbortedNavigation(this._page.mainFrame()._id,"navigation cancelled by beforeunload dialog"),await this._pageProxySession.send("Dialog.handleJavaScriptDialog",{accept:j,promptText:y})},S.defaultPrompt))}async _onFileChooserOpened(S){let j;try{const y=await this._page.frameManager.frame(S.frameId)._mainContext();j=(0,b.createHandle)(y,S.element).asElement()}catch{return}await this._page._onFileChooserOpened(j)}static async _setEmulateMedia(S,j,y,I,D,ie){const he=[];he.push(S.send("Page.setEmulatedMedia",{media:j==="no-override"?"":j}));let me;switch(y){case"light":me="Light";break;case"dark":me="Dark";break;case"no-override":me=void 0;break}he.push(S.send("Page.overrideUserPreference",{name:"PrefersColorScheme",value:me}));let ye;switch(I){case"reduce":ye="Reduce";break;case"no-preference":ye="NoPreference";break;case"no-override":ye=void 0;break}he.push(S.send("Page.overrideUserPreference",{name:"PrefersReducedMotion",value:ye}));let Se;switch(D){case"active":Se="Active";break;case"none":Se="None";break;case"no-override":Se=void 0;break}he.push(S.send("Page.setForcedColors",{forcedColors:Se}));let Oe;switch(ie){case"more":Oe="More";break;case"no-preference":Oe="NoPreference";break;case"no-override":Oe=void 0;break}he.push(S.send("Page.overrideUserPreference",{name:"PrefersContrast",value:Oe})),await Promise.all(he)}async updateExtraHTTPHeaders(){await this._updateState("Network.setExtraHTTPHeaders",{headers:(0,u.headersArrayToObject)(this._calculateExtraHTTPHeaders(),!1)})}_calculateExtraHTTPHeaders(){const S=this._browserContext._options.locale;return c.mergeHeaders([this._browserContext._options.extraHTTPHeaders,this._page.extraHTTPHeaders(),S?c.singleHeader("Accept-Language",S):void 0])}async updateEmulateMedia(){const S=this._page.emulatedMedia(),j=S.colorScheme,y=S.reducedMotion,I=S.forcedColors,D=S.contrast;await this._forAllSessions(ie=>le._setEmulateMedia(ie,S.media,j,y,I,D))}async updateEmulatedViewportSize(){var S;this._browserContext._validateEmulatedViewport((S=this._page.emulatedSize())==null?void 0:S.viewport),await this._updateViewport()}async updateUserAgent(){const S=this._browserContext._options;this._updateState("Page.overrideUserAgent",{value:S.userAgent})}async bringToFront(){this._pageProxySession.send("Target.activate",{targetId:this._session.sessionId})}async _updateViewport(){const S=this._browserContext._options,j=this._page.emulatedSize();if(!j)return;const y=j.viewport,I=j.screen,D=[this._pageProxySession.send("Emulation.setDeviceMetricsOverride",{width:y.width,height:y.height,fixedLayout:!!S.isMobile,deviceScaleFactor:S.deviceScaleFactor||1}),this._session.send("Page.setScreenSizeOverride",{width:I.width,height:I.height})];if(S.isMobile){const ie=y.width>y.height?90:0;D.push(this._pageProxySession.send("Emulation.setOrientationOverride",{angle:ie}))}await Promise.all(D)}async updateRequestInterception(){const S=this._page.needsRequestInterception();await Promise.all([this._updateState("Network.setInterceptionEnabled",{enabled:S}),this._updateState("Network.setResourceCachingDisabled",{disabled:S}),this._updateState("Network.addInterception",{url:".*",stage:"request",isRegex:!0})])}async updateOffline(){await this._updateState("Network.setEmulateOfflineState",{offline:!!this._browserContext._options.offline})}async updateHttpCredentials(){const S=this._browserContext._options.httpCredentials||{username:"",password:"",origin:""};await this._pageProxySession.send("Emulation.setAuthCredentials",{username:S.username,password:S.password,origin:S.origin})}async updateFileChooserInterception(){const S=this._page.fileChooserIntercepted();await this._session.send("Page.setInterceptFileChooserDialog",{enabled:S}).catch(()=>{})}async reload(){await this._session.send("Page.reload")}goBack(){return this._session.send("Page.goBack").then(()=>!0).catch(S=>{if(S instanceof Error&&S.message.includes("Protocol error (Page.goBack): Failed to go"))return!1;throw S})}goForward(){return this._session.send("Page.goForward").then(()=>!0).catch(S=>{if(S instanceof Error&&S.message.includes("Protocol error (Page.goForward): Failed to go"))return!1;throw S})}async requestGC(){await this._session.send("Heap.gc")}async addInitScript(S){await this._updateBootstrapScript()}async removeInitScripts(S){await this._updateBootstrapScript()}async exposePlaywrightBinding(){await this._updateState("Runtime.addBinding",{name:l.PageBinding.kBindingName})}_calculateBootstrapScript(){const S=[];return this._page.browserContext._options.isMobile||(S.push("delete window.orientation"),S.push("delete window.ondevicemotion"),S.push("delete window.ondeviceorientation")),S.push('if (!window.safari) window.safari = { pushNotification: { toString() { return "[object SafariRemoteNotification]"; } } };'),S.push("if (!window.GestureEvent) window.GestureEvent = function GestureEvent() {};"),S.push(this._publicKeyCredentialScript()),S.push(...this._page.allInitScripts().map(j=>j.source)),S.join(`;
`)}_publicKeyCredentialScript(){function S(){window.PublicKeyCredential??(window.PublicKeyCredential={async getClientCapabilities(){return{}},async isConditionalMediationAvailable(){return!1},async isUserVerifyingPlatformAuthenticatorAvailable(){return!1}})}return`(${S.toString()})();`}async _updateBootstrapScript(){await this._updateState("Page.setBootstrapScript",{source:this._calculateBootstrapScript()})}async closePage(S){await this._stopVideo(),await this._pageProxySession.sendMayFail("Target.close",{targetId:this._session.sessionId,runBeforeUnload:S})}async setBackgroundColor(S){await this._session.send("Page.setDefaultBackgroundColorOverride",{color:S})}_toolbarHeight(){var S;return(S=this._page.browserContext._browser)!=null&&S.options.headful?d.hostPlatform==="mac10.15"?55:59:0}async _startVideo(S){(0,g.assert)(!this._recordingVideoFile);const{screencastId:j}=await this._pageProxySession.send("Screencast.startVideo",{file:S.outputFile,width:S.width,height:S.height,toolbarHeight:this._toolbarHeight()});this._recordingVideoFile=S.outputFile,this._browserContext._browser._videoStarted(this._browserContext,j,S.outputFile,this._page.waitForInitializedOrError())}async _stopVideo(){this._recordingVideoFile&&(await this._pageProxySession.sendMayFail("Screencast.stopVideo"),this._recordingVideoFile=null)}validateScreenshotDimension(S,j){if(process.platform!=="darwin"&&(!j&&this._page.browserContext._options.deviceScaleFactor&&(S=Math.ceil(S*this._page.browserContext._options.deviceScaleFactor)),S>32767))throw new Error("Cannot take screenshot larger than 32767 pixels on any dimension")}async takeScreenshot(S,j,y,I,D,ie,he){const me=y||I,ye=he==="css";this.validateScreenshotDimension(me.width,ye),this.validateScreenshotDimension(me.height,ye);const Se=await S.race(this._session.send("Page.snapshotRect",{...me,coordinateSystem:y?"Page":"Viewport",omitDeviceScaleFactor:ye}));let Pe=Buffer.from(Se.dataURL.substr("data:image/png;base64,".length),"base64");return j==="jpeg"&&(Pe=a.jpegjs.encode(a.PNG.sync.read(Pe),D).data),Pe}async getContentFrame(S){const j=await this._session.send("DOM.describeNode",{objectId:S._objectId});return j.contentFrameId?this._page.frameManager.frame(j.contentFrameId):null}async getOwnerFrame(S){return S._objectId&&(await this._session.send("DOM.describeNode",{objectId:S._objectId})).ownerFrameId||null}async getBoundingBox(S){const j=await this.getContentQuads(S);if(!j||!j.length)return null;let y=1/0,I=-1/0,D=1/0,ie=-1/0;for(const he of j)for(const me of he)y=Math.min(y,me.x),I=Math.max(I,me.x),D=Math.min(D,me.y),ie=Math.max(ie,me.y);return{x:y,y:D,width:I-y,height:ie-D}}async scrollRectIntoViewIfNeeded(S,j){return await this._session.send("DOM.scrollIntoViewIfNeeded",{objectId:S._objectId,rect:j}).then(()=>"done").catch(y=>{if(y instanceof Error&&y.message.includes("Node does not have a layout object"))return"error:notvisible";if(y instanceof Error&&y.message.includes("Node is detached from document"))return"error:notconnected";throw y})}async setScreencastOptions(S){if(S){const j={...S,toolbarHeight:this._toolbarHeight()},{generation:y}=await this._pageProxySession.send("Screencast.startScreencast",j);this._screencastGeneration=y}else await this._pageProxySession.send("Screencast.stopScreencast")}_onScreencastFrame(S){const j=this._screencastGeneration;this._page.throttleScreencastFrameAck(()=>{this._pageProxySession.send("Screencast.screencastFrameAck",{generation:j}).catch(I=>q.debugLogger.log("error",I))});const y=Buffer.from(S.data,"base64");this._page.emit(l.Page.Events.ScreencastFrame,{buffer:y,width:S.deviceWidth,height:S.deviceHeight})}rafCountForStablePosition(){return process.platform==="win32"?5:1}async getContentQuads(S){const j=await this._session.sendMayFail("DOM.getContentQuads",{objectId:S._objectId});return j?j.quads.map(y=>[{x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},{x:y[6],y:y[7]}]):null}async setInputFilePaths(S,j){const y=this._pageProxySession.sessionId,I=S._objectId;await Promise.all([this._pageProxySession.connection.browserSession.send("Playwright.grantFileReadAccess",{pageProxyId:y,paths:j}),this._session.send("DOM.setInputFiles",{objectId:I,paths:j})])}async adoptElementHandle(S,j){const y=await this._session.sendMayFail("DOM.resolveNode",{objectId:S._objectId,executionContextId:j.delegate._contextId});if(!y||y.object.subtype==="null")throw new Error(o.kUnableToAdoptErrorMessage);return(0,b.createHandle)(j,y.object)}async getAccessibilityTree(S){return(0,x.getAccessibilityTree)(this._session,S)}async inputActionEpilogue(){}async resetForReuse(S){}async getFrameElement(S){const j=S.parentFrame();if(!j)throw new Error("Frame has been detached.");const y=await j._mainContext(),I=await this._session.send("DOM.resolveNode",{frameId:S._id,executionContextId:y.delegate._contextId});if(!I||I.object.subtype==="null")throw new Error("Frame has been detached.");return(0,b.createHandle)(y,I.object)}_maybeCancelCoopNavigationRequest(S){const j=S.coopNavigationRequest();for(const[y,I]of this._requestIdToRequest)if(I.request===j){this._onLoadingFailed(S._session,{requestId:y,errorText:"Provisiolal navigation canceled.",timestamp:I._timestamp,canceled:!0});return}}_adoptRequestFromNewProcess(S,j,y){for(const[I,D]of this._requestIdToRequest)if(D.request===S){this._requestIdToRequest.delete(I),D.adoptRequestFromNewProcess(j,y),this._requestIdToRequest.set(y,D);return}}_onRequestWillBeSent(S,j){j.request.url.startsWith("data:")||j.request.url.startsWith("about:")||(this._page.needsRequestInterception()&&!j.redirectResponse?this._requestIdToRequestWillBeSentEvent.set(j.requestId,j):this._onRequest(S,j,!1))}_onRequest(S,j,y){let I=null;if(j.redirectResponse){const Se=this._requestIdToRequest.get(j.requestId);Se&&(this._handleRequestRedirect(Se,j.requestId,j.redirectResponse,j.timestamp),I=Se)}const D=I?I.request.frame():this._page.frameManager.frame(j.frameId);if(!D)return;const he=j.type==="Document"?j.loaderId:void 0,me=new O.WKInterceptableRequest(S,D,j,I,he);let ye;y&&(ye=new O.WKRouteImpl(S,j.requestId),me.request.setRawRequestHeaders(null)),this._requestIdToRequest.set(j.requestId,me),this._page.frameManager.requestStarted(me.request,ye)}_handleRequestRedirect(S,j,y,I){const D=S.createResponse(y);D._securityDetailsFinished(),D._serverAddrFinished(),D.setResponseHeadersSize(null),D.setEncodedBodySize(null),D._requestFinished(y.timing?m.helper.secondsToRoundishMillis(I-S._timestamp):-1),this._requestIdToRequest.delete(j),this._page.frameManager.requestReceivedResponse(D),this._page.frameManager.reportRequestFinished(S.request,D)}_onRequestIntercepted(S,j){const y=this._requestIdToRequestWillBeSentEvent.get(j.requestId);if(!y){S.sendMayFail("Network.interceptWithRequest",{requestId:j.requestId});return}this._requestIdToRequestWillBeSentEvent.delete(j.requestId),this._onRequest(S,y,!0)}_onResponseReceived(S,j){const y=this._requestIdToRequestWillBeSentEvent.get(j.requestId);y&&(this._requestIdToRequestWillBeSentEvent.delete(j.requestId),this._onRequest(S,y,!1));const I=this._requestIdToRequest.get(j.requestId);if(!I)return;this._requestIdToResponseReceivedPayloadEvent.set(j.requestId,j);const D=I.createResponse(j.response);this._page.frameManager.requestReceivedResponse(D),D.status()===204&&I.request.isNavigationRequest()&&this._onLoadingFailed(S,{requestId:j.requestId,errorText:"Aborted: 204 No Content",timestamp:j.timestamp})}_onLoadingFinished(S){var I,D,ie,he,me,ye,Se,Oe,Pe,Ne,Le,qe;const j=this._requestIdToRequest.get(S.requestId);if(!j)return;const y=j.request._existingResponse();if(y){const Ge=this._requestIdToResponseReceivedPayloadEvent.get(S.requestId);y._serverAddrFinished(_e((I=S==null?void 0:S.metrics)==null?void 0:I.remoteAddress)),y._securityDetailsFinished({protocol:ge(y.url(),y.timing())?(ie=(D=S.metrics)==null?void 0:D.securityConnection)==null?void 0:ie.protocol:void 0,subjectName:(me=(he=Ge==null?void 0:Ge.response.security)==null?void 0:he.certificate)==null?void 0:me.subject,validFrom:(Se=(ye=Ge==null?void 0:Ge.response.security)==null?void 0:ye.certificate)==null?void 0:Se.validFrom,validTo:(Pe=(Oe=Ge==null?void 0:Ge.response.security)==null?void 0:Oe.certificate)==null?void 0:Pe.validUntil}),(Ne=S.metrics)!=null&&Ne.protocol&&y._setHttpVersion(S.metrics.protocol),y.setEncodedBodySize(((Le=S.metrics)==null?void 0:Le.responseBodyBytesReceived)??null),y.setResponseHeadersSize(((qe=S.metrics)==null?void 0:qe.responseHeaderBytesReceived)??null),y._requestFinished(m.helper.secondsToRoundishMillis(S.timestamp-j._timestamp))}else j.request.setRawRequestHeaders(null);this._requestIdToResponseReceivedPayloadEvent.delete(S.requestId),this._requestIdToRequest.delete(S.requestId),this._page.frameManager.reportRequestFinished(j.request,y)}_onLoadingFailed(S,j){const y=this._requestIdToRequestWillBeSentEvent.get(j.requestId);y&&(this._requestIdToRequestWillBeSentEvent.delete(j.requestId),this._onRequest(S,y,!1));const I=this._requestIdToRequest.get(j.requestId);if(!I)return;const D=I.request._existingResponse();D?(D._serverAddrFinished(),D._securityDetailsFinished(),D.setResponseHeadersSize(null),D.setEncodedBodySize(null),D._requestFinished(m.helper.secondsToRoundishMillis(j.timestamp-I._timestamp))):I.request.setRawRequestHeaders(null),this._requestIdToRequest.delete(j.requestId),I.request._setFailureText(j.errorText),this._page.frameManager.requestFailed(I.request,j.errorText.includes("cancelled"))}async _grantPermissions(S,j){const y=new Map([["geolocation","geolocation"],["notifications","notifications"],["clipboard-read","clipboard-read"]]),I=j.map(D=>{const ie=y.get(D);if(!ie)throw new Error("Unknown permission: "+D);return ie});await this._pageProxySession.send("Emulation.grantPermissions",{origin:S,permissions:I})}async _clearPermissions(){await this._pageProxySession.send("Emulation.resetPermissions",{})}shouldToggleStyleSheetToSyncAnimations(){return!0}}function _e(ne){if(ne)try{const S=ne.lastIndexOf(":"),j=ne.lastIndexOf(".");if(j<0)return{ipAddress:`[${ne.slice(0,S)}]`,port:+ne.slice(S+1)};if(S>j){const[y,I]=ne.split(":");return{ipAddress:y,port:+I}}else{const[y,I]=ne.split(".");return{ipAddress:`[${y}]`,port:+I}}}catch{}}function ge(ne,S){try{const j=new URL(ne);return!(j.protocol!=="https:"&&j.protocol!=="wss:"&&j.protocol!=="sftp:"||S.secureConnectionStart===-1&&S.connectStart!==-1)}catch{}}return Md}var Fd,lb;function ST(){if(lb)return Fd;lb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(h,m)=>{for(var c in m)r(h,c,{get:m[c],enumerable:!0})},P=(h,m,c,l)=>{if(m&&typeof m=="object"||typeof m=="function")for(let x of E(m))!V.call(h,x)&&x!==c&&r(h,x,{get:()=>m[x],enumerable:!(l=i(m,x))||l.enumerable});return h},e=(h,m,c)=>(c=h!=null?t(R(h)):{},P(!h||!h.__esModule?r(c,"default",{value:h,enumerable:!0}):c,h)),U=h=>P(r({},"__esModule",{value:!0}),h),C={};te(C,{WKBrowser:()=>n,WKBrowserContext:()=>o}),Fd=U(C);var w=nr(),g=Ti(),u=Ir(),_=e(fn()),f=Mo(),d=yT(),v=Pn();const a="26.0",s=`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/${a} Safari/605.1.15`;class n extends g.Browser{constructor(m,c,l){super(m,l),this._contexts=new Map,this._wkPages=new Map,this._connection=new f.WKConnection(c,this._onDisconnect.bind(this),l.protocolLogger,l.browserLogsCollector),this._browserSession=this._connection.browserSession,this._browserSession.on("Playwright.pageProxyCreated",this._onPageProxyCreated.bind(this)),this._browserSession.on("Playwright.pageProxyDestroyed",this._onPageProxyDestroyed.bind(this)),this._browserSession.on("Playwright.provisionalLoadFailed",x=>this._onProvisionalLoadFailed(x)),this._browserSession.on("Playwright.windowOpen",x=>this._onWindowOpen(x)),this._browserSession.on("Playwright.downloadCreated",this._onDownloadCreated.bind(this)),this._browserSession.on("Playwright.downloadFilenameSuggested",this._onDownloadFilenameSuggested.bind(this)),this._browserSession.on("Playwright.downloadFinished",this._onDownloadFinished.bind(this)),this._browserSession.on("Playwright.screencastFinished",this._onScreencastFinished.bind(this)),this._browserSession.on(f.kPageProxyMessageReceived,this._onPageProxyMessageReceived.bind(this))}static async connect(m,c,l){var b;const x=new n(m,c,l);l.__testHookOnConnectToBrowser&&await l.__testHookOnConnectToBrowser();const T=[x._browserSession.send("Playwright.enable")];return l.persistent&&((b=l.persistent).userAgent||(b.userAgent=s),x._defaultContext=new o(x,void 0,l.persistent),T.push(x._defaultContext._initialize())),await Promise.all(T),x}_onDisconnect(){for(const m of this._wkPages.values())m.didClose();this._wkPages.clear();for(const m of this._idToVideo.values())m.artifact.reportFinished(new v.TargetClosedError);this._idToVideo.clear(),this._didClose()}async doCreateNewContext(m){const c=m.proxyOverride||m.proxy,l=c?{proxyServer:process.platform==="win32"?c.server.replace(/^socks5:\/\//,"socks5h://"):c.server,proxyBypassList:c.bypass}:void 0,{browserContextId:x}=await this._browserSession.send("Playwright.createContext",l);m.userAgent=m.userAgent||s;const T=new o(this,x,m);return await T._initialize(),this._contexts.set(x,T),T}contexts(){return Array.from(this._contexts.values())}version(){return a}userAgent(){return s}_onDownloadCreated(m){const c=this._wkPages.get(m.pageProxyId);if(!c)return;c._page.frameManager.frameAbortedNavigation(m.frameId,"Download is starting");let l=c._page.initializedOrUndefined();l||(c._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),c._opener&&(l=c._opener._page.initializedOrUndefined())),l&&this._downloadCreated(l,m.uuid,m.url)}_onDownloadFilenameSuggested(m){this._downloadFilenameSuggested(m.uuid,m.suggestedFilename)}_onDownloadFinished(m){this._downloadFinished(m.uuid,m.error)}_onScreencastFinished(m){var c;(c=this._takeVideo(m.screencastId))==null||c.reportFinished()}_onPageProxyCreated(m){const c=m.pageProxyId;let l=null;if(m.browserContextId&&(l=this._contexts.get(m.browserContextId)||null),l||(l=this._defaultContext),!l)return;const x=new f.WKSession(this._connection,c,p=>{this._connection.rawSend({...p,pageProxyId:c})}),T=m.openerId?this._wkPages.get(m.openerId):void 0,b=new d.WKPage(l,x,T||null);this._wkPages.set(c,b)}_onPageProxyDestroyed(m){const c=m.pageProxyId,l=this._wkPages.get(c);l&&(this._wkPages.delete(c),l.didClose())}_onPageProxyMessageReceived(m){const c=this._wkPages.get(m.pageProxyId);c&&c.dispatchMessageToSession(m.message)}_onProvisionalLoadFailed(m){const c=this._wkPages.get(m.pageProxyId);c&&c.handleProvisionalLoadFailed(m)}_onWindowOpen(m){const c=this._wkPages.get(m.pageProxyId);c&&c.handleWindowOpen(m)}isConnected(){return!this._connection.isClosed()}}class o extends u.BrowserContext{constructor(m,c,l){super(m,l,c),this._validateEmulatedViewport(l.viewport),this._authenticateProxyViaHeader()}async _initialize(){(0,w.assert)(!this._wkPages().length);const m=this._browserContextId,c=[super._initialize()];c.push(this._browser._browserSession.send("Playwright.setDownloadBehavior",{behavior:this._options.acceptDownloads==="accept"?"allow":"deny",downloadPath:this._browser.options.downloadsPath,browserContextId:m})),(this._options.ignoreHTTPSErrors||this._options.internalIgnoreHTTPSErrors)&&c.push(this._browser._browserSession.send("Playwright.setIgnoreCertificateErrors",{browserContextId:m,ignore:!0})),this._options.locale&&c.push(this._browser._browserSession.send("Playwright.setLanguages",{browserContextId:m,languages:[this._options.locale]})),this._options.geolocation&&c.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&c.push(this.doUpdateOffline()),this._options.httpCredentials&&c.push(this.setHTTPCredentials(this._options.httpCredentials)),await Promise.all(c)}_wkPages(){return Array.from(this._browser._wkPages.values()).filter(m=>m._browserContext===this)}possiblyUninitializedPages(){return this._wkPages().map(m=>m._page)}async doCreateNewPage(m){const{pageProxyId:c}=await this._browser._browserSession.send("Playwright.createPage",{browserContextId:this._browserContextId}),l=this._browser._wkPages.get(c)._page;return m&&l.markAsServerSideOnly(),l}async doGetCookies(m){const{cookies:c}=await this._browser._browserSession.send("Playwright.getAllCookies",{browserContextId:this._browserContextId});return _.filterCookies(c.map(l=>{const{name:x,value:T,domain:b,path:p,expires:O,httpOnly:z,secure:$,sameSite:q}=l;return{name:x,value:T,domain:b,path:p,expires:O===-1?-1:O/1e3,httpOnly:z,secure:$,sameSite:q}}),m)}async addCookies(m){const c=_.rewriteCookies(m).map(l=>{const{name:x,value:T,domain:b,path:p,expires:O,httpOnly:z,secure:$,sameSite:q}=l;return{name:x,value:T,domain:b,path:p,expires:O&&O!==-1?O*1e3:O,httpOnly:z,secure:$,sameSite:q,session:O===-1||O===void 0}});await this._browser._browserSession.send("Playwright.setCookies",{cookies:c,browserContextId:this._browserContextId})}async doClearCookies(){await this._browser._browserSession.send("Playwright.deleteAllCookies",{browserContextId:this._browserContextId})}async doGrantPermissions(m,c){await Promise.all(this.pages().map(l=>l.delegate._grantPermissions(m,c)))}async doClearPermissions(){await Promise.all(this.pages().map(m=>m.delegate._clearPermissions()))}async setGeolocation(m){(0,u.verifyGeolocation)(m),this._options.geolocation=m;const c=m?{...m,timestamp:Date.now()}:void 0;await this._browser._browserSession.send("Playwright.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:c})}async doUpdateExtraHTTPHeaders(){for(const m of this.pages())await m.delegate.updateExtraHTTPHeaders()}async setUserAgent(m){this._options.userAgent=m;for(const c of this.pages())await c.delegate.updateUserAgent()}async doUpdateOffline(){for(const m of this.pages())await m.delegate.updateOffline()}async doSetHTTPCredentials(m){this._options.httpCredentials=m;for(const c of this.pages())await c.delegate.updateHttpCredentials()}async doAddInitScript(m){for(const c of this.pages())await c.delegate._updateBootstrapScript()}async doRemoveInitScripts(m){for(const c of this.pages())await c.delegate._updateBootstrapScript()}async doUpdateRequestInterception(){for(const m of this.pages())await m.delegate.updateRequestInterception()}async doUpdateDefaultViewport(){}async doUpdateDefaultEmulatedMedia(){}async doExposePlaywrightBinding(){for(const m of this.pages())await m.delegate.exposePlaywrightBinding()}onClosePersistent(){}async clearCache(){await this._browser._browserSession.send("Playwright.clearMemoryCache",{browserContextId:this._browserContextId})}async doClose(m){this._browserContextId?(await this._browser._browserSession.send("Playwright.deleteContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)):(await Promise.all(this._wkPages().map(c=>c._stopVideo())),await this._browser.close({reason:m}))}async cancelDownload(m){await this._browser._browserSession.send("Playwright.cancelDownload",{uuid:m})}_validateEmulatedViewport(m){if(m&&process.platform==="win32"&&this._browser.options.headful&&(m.width<250||m.height<240))throw new Error("WebKit on Windows has a minimal viewport of 250x240.")}}return Fd}var Bd,ub;function xT(){if(ub)return Bd;ub=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(v,a)=>{for(var s in a)r(v,s,{get:a[s],enumerable:!0})},P=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of E(a))!V.call(v,o)&&o!==s&&r(v,o,{get:()=>a[o],enumerable:!(n=i(a,o))||n.enumerable});return v},e=(v,a,s)=>(s=v!=null?t(R(v)):{},P(!v||!v.__esModule?r(s,"default",{value:v,enumerable:!0}):s,v)),U=v=>P(r({},"__esModule",{value:!0}),v),C={};te(C,{WebKit:()=>d}),Bd=U(C);var w=e(Je),g=Mo(),u=Yn(),_=Qs(),f=ST();class d extends _.BrowserType{constructor(a){super(a,"webkit")}connectToTransport(a,s){return f.WKBrowser.connect(this.attribution.playwright,a,s)}amendEnvironment(a,s,n){return{...a,CURL_COOKIE_JAR_PATH:process.platform==="win32"&&n?w.default.join(s,"cookiejar.db"):void 0}}doRewriteStartupLog(a){return a.logs&&(a.logs.includes("Failed to open display")||a.logs.includes("cannot open display"))&&(a.logs=`
`+(0,u.wrapInASCIIBox)(_.kNoXServerRunningError,1)),a}attemptToGracefullyCloseBrowser(a){a.send({method:"Playwright.close",params:{},id:g.kBrowserCloseMessageId})}defaultArgs(a,s,n){const{args:o=[],headless:h}=a;if(o.find(x=>x.startsWith("--user-data-dir")))throw this._createUserDataDirArgMisuseError("--user-data-dir");if(o.find(x=>!x.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const c=["--inspector-pipe"];process.platform==="win32"&&c.push("--disable-accelerated-compositing"),h&&c.push("--headless"),s?c.push(`--user-data-dir=${n}`):c.push("--no-startup-window");const l=a.proxyOverride||a.proxy;return l&&(process.platform==="darwin"?(c.push(`--proxy=${l.server}`),l.bypass&&c.push(`--proxy-bypass-list=${l.bypass}`)):process.platform==="linux"?(c.push(`--proxy=${l.server}`),l.bypass&&c.push(...l.bypass.split(",").map(x=>`--ignore-host=${x}`))):process.platform==="win32"&&(c.push(`--curl-proxy=${l.server.replace(/^socks5:\/\//,"socks5h://")}`),l.bypass&&c.push(`--curl-noproxy=${l.bypass}`))),c.push(...o),s&&c.push("about:blank"),c}}return Bd}var jd,db;function ps(){if(db)return jd;db=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(o,h)=>{for(var m in h)t(o,m,{get:h[m],enumerable:!0})},V=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of i(h))!E.call(o,l)&&l!==m&&t(o,l,{get:()=>h[l],enumerable:!(c=r(h,l))||c.enumerable});return o},te=o=>V(t({},"__esModule",{value:!0}),o),P={};R(P,{Playwright:()=>s,createPlaywright:()=>n}),jd=te(P);var e=nr(),U=mf(),C=KO(),w=aT(),g=cT(),u=hy(),_=fy(),f=my(),d=mT(),v=Tr(),a=xT();class s extends v.SdkObject{constructor(h){super((0,v.createRootSdkObject)(),void 0,"Playwright"),this._allPages=new Set,this._allBrowsers=new Set,this.options=h,this.attribution.playwright=this,this.instrumentation.addListener({onBrowserOpen:m=>this._allBrowsers.add(m),onBrowserClose:m=>this._allBrowsers.delete(m),onPageOpen:m=>this._allPages.add(m),onPageClose:m=>this._allPages.delete(m),onCallLog:(m,c,l,x)=>{e.debugLogger.log(l,x)}},null),this.chromium=new u.Chromium(this),this._bidiChromium=new w.BidiChromium(this),this._bidiFirefox=new g.BidiFirefox(this),this.firefox=new d.Firefox(this),this.webkit=new a.WebKit(this),this.electron=new f.Electron(this),this.android=new U.Android(this,new C.AdbBackend),this.debugController=new _.DebugController(this)}async hideHighlight(){await Promise.all([...this._allPages].map(h=>h.hideHighlight().catch(()=>{})))}allBrowsers(){return[...this._allBrowsers]}allPages(){return[...this._allPages]}}function n(o){return new s(o)}return jd}var Hd,hb;function _y(){if(hb)return Hd;hb=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=(z,$)=>{for(var q in $)i(z,q,{get:$[q],enumerable:!0})},e=(z,$,q,J)=>{if($&&typeof $=="object"||typeof $=="function")for(let le of R($))!te.call(z,le)&&le!==q&&i(z,le,{get:()=>$[le],enumerable:!(J=E($,le))||J.enumerable});return z},U=(z,$,q)=>(q=z!=null?r(V(z)):{},e(!z||!z.__esModule?i(q,"default",{value:z,enumerable:!0}):q,z)),C=z=>e(i({},"__esModule",{value:!0}),z),w={};P(w,{ProgrammaticRecorderApp:()=>b,RecorderApp:()=>T}),Hd=C(w);var g=U(Je),u=U(Je),_=Xn(),f=Ar(),d=Tr(),v=po(),a=po(),s=bn(),n=TO(),o=NO(),h=Ys(),m=Ji(),c=df(),l=En(),x=Ir();class T{constructor($,q,J,le){this._throttledOutputFile=null,this._actions=[],this._userSources=[],this._recorderSources=[],this._page=J,this._recorder=$,this.wsEndpointForTest=le,this._languageGeneratorOptions={browserName:q.browserName,launchOptions:{headless:!1,...q.launchOptions,tracesDir:void 0},contextOptions:{...q.contextOptions},deviceName:q.device,saveStorage:q.saveStorage},this._throttledOutputFile=q.outputFile?new n.ThrottledFile(q.outputFile):null,this._primaryLanguage=t.TEST_INSPECTOR_LANGUAGE||q.language||q.sdkLanguage}async _init($){await(0,v.syncLocalStorageWithSettings)(this._page,"recorder"),await new s.ProgressController((0,d.serverSideCallMetadata)(),this._page).run(async le=>{await this._page.addRequestInterceptor(le,_e=>{if(!_e.request().url().startsWith("https://playwright/")){_e.continue({isFallback:!0}).catch(()=>{});return}const ge=_e.request().url().substring(19),ne=require.resolve("../../vite/recorder/"+ge);g.default.promises.readFile(ne).then(S=>{_e.fulfill({status:200,headers:[{name:"Content-Type",value:f.mime.getType(u.default.extname(ne))||"application/octet-stream"}],body:S.toString("base64"),isBase64:!0}).catch(()=>{})})}),await this._page.exposeBinding(le,"dispatch",!1,(_e,ge)=>this._handleUIEvent(ge)),this._page.once("close",()=>{this._recorder.close(),this._page.browserContext.close({reason:"Recorder window closed"}).catch(()=>{}),delete $[O]}),await this._page.mainFrame().goto(le,t.PW_HMR?"http://localhost:44225":"https://playwright/index.html")});const J=this._recorder.url();J&&this._onPageNavigated(J),this._onModeChanged(this._recorder.mode()),this._onPausedStateChanged(this._recorder.paused()),this._onUserSourcesChanged(this._recorder.userSources()),this._onCallLogsUpdated(this._recorder.callLog()),this._wireListeners(this._recorder),this._updateActions(!0)}_handleUIEvent($){if($.event==="clear"){this._actions=[],this._updateActions(),this._recorder.clear();return}if($.event==="fileChanged"){const q=[...this._recorderSources,...this._userSources].find(J=>J.id===$.params.fileId);q&&this._recorder.setLanguage(q.language);return}if($.event==="setMode"){this._recorder.setMode($.params.mode);return}if($.event==="resume"){this._recorder.resume();return}if($.event==="pause"){this._recorder.pause();return}if($.event==="step"){this._recorder.step();return}if($.event==="highlightRequested"){$.params.selector&&this._recorder.setHighlightedSelector($.params.selector),$.params.ariaTemplate&&this._recorder.setHighlightedAriaTemplate($.params.ariaTemplate);return}throw new Error(`Unknown event: ${$.event}`)}static async show($,q){if(t.PW_CODEGEN_NO_INSPECTOR)return;const J=await c.Recorder.forContext($,q);if(q.recorderMode==="api"){await b.run($,J);return}await T._show(J,$,q)}async close(){await this._page.close()}static showInspectorNoReply($){t.PW_CODEGEN_NO_INSPECTOR||c.Recorder.forContext($,{}).then(q=>T._show(q,$,{})).catch(()=>{})}static async _show($,q,J){if(q[O])return;q[O]=!0;const le=q._browser.sdkLanguage(),_e=!!q._browser.options.headful,ge=ps().createPlaywright({sdkLanguage:"javascript",isInternalPlaywright:!0}),{context:ne,page:S}=await(0,a.launchApp)(ge.chromium,{sdkLanguage:le,windowSize:{width:600,height:600},windowPosition:{x:1020,y:10},persistentContextOptions:{noDefaultViewport:!0,headless:!!t.PWTEST_CLI_HEADLESS||(0,_.isUnderTest)()&&!_e,cdpPort:(0,_.isUnderTest)()?0:void 0,handleSIGINT:J.handleSIGINT,executablePath:q._browser.options.isChromium?q._browser.options.customExecutablePath:void 0,channel:q._browser.options.isChromium?q._browser.options.channel:void 0}});await new s.ProgressController((0,d.serverSideCallMetadata)(),ne._browser).run(async D=>{await ne._browser._defaultContext._loadDefaultContextAsIs(D)});const y={browserName:q._browser.options.name,sdkLanguage:q._browser.sdkLanguage(),wsEndpointForTest:q._browser.options.wsEndpoint,headed:!!q._browser.options.headful,executablePath:q._browser.options.isChromium?q._browser.options.customExecutablePath:void 0,channel:q._browser.options.isChromium?q._browser.options.channel:void 0,...J},I=new T($,y,S,ne._browser.options.wsEndpoint);await I._init(q),q.recorderAppForTest=I}_wireListeners($){$.on(c.RecorderEvent.ActionAdded,q=>{this._onActionAdded(q)}),$.on(c.RecorderEvent.SignalAdded,q=>{this._onSignalAdded(q)}),$.on(c.RecorderEvent.PageNavigated,q=>{this._onPageNavigated(q)}),$.on(c.RecorderEvent.ContextClosed,()=>{this._onContextClosed()}),$.on(c.RecorderEvent.ModeChanged,q=>{this._onModeChanged(q)}),$.on(c.RecorderEvent.PausedStateChanged,q=>{this._onPausedStateChanged(q)}),$.on(c.RecorderEvent.UserSourcesChanged,q=>{this._onUserSourcesChanged(q)}),$.on(c.RecorderEvent.ElementPicked,(q,J)=>{this._onElementPicked(q,J)}),$.on(c.RecorderEvent.CallLogsUpdated,q=>{this._onCallLogsUpdated(q)})}_onActionAdded($){this._actions.push($),this._updateActions()}_onSignalAdded($){const q=this._actions.findLast(J=>J.frame.pageGuid===$.frame.pageGuid);q&&q.action.signals.push($.signal),this._updateActions()}_onPageNavigated($){this._page.mainFrame().evaluateExpression((({url:q})=>{window.playwrightSetPageURL(q)}).toString(),{isFunction:!0},{url:$}).catch(()=>{})}_onContextClosed(){var $;($=this._throttledOutputFile)==null||$.flush(),this._page.browserContext.close({reason:"Recorder window closed"}).catch(()=>{})}_onModeChanged($){this._page.mainFrame().evaluateExpression((q=>{window.playwrightSetMode(q)}).toString(),{isFunction:!0},$).catch(()=>{})}_onPausedStateChanged($){this._page.mainFrame().evaluateExpression((q=>{window.playwrightSetPaused(q)}).toString(),{isFunction:!0},$).catch(()=>{})}_onUserSourcesChanged($){!$.length&&!this._userSources.length||(this._userSources=$,this._pushAllSources())}_onElementPicked($,q){q&&this._page.bringToFront(),this._page.mainFrame().evaluateExpression((J=>{window.playwrightElementPicked(J.elementInfo,J.userGesture)}).toString(),{isFunction:!0},{elementInfo:$,userGesture:q}).catch(()=>{})}_onCallLogsUpdated($){this._page.mainFrame().evaluateExpression((q=>{window.playwrightUpdateLogs(q)}).toString(),{isFunction:!0},$).catch(()=>{})}async _pushAllSources(){const $=[...this._userSources,...this._recorderSources];if(this._page.mainFrame().evaluateExpression((({sources:q})=>{window.playwrightSetSources(q)}).toString(),{isFunction:!0},{sources:$}).catch(()=>{}),t.PWTEST_CLI_IS_UNDER_TEST&&$.length){const q=$.find(J=>J.isPrimary);process._didSetSourcesForTest((q==null?void 0:q.text)??"")&&this._page.close().catch(()=>{})}}_updateActions($=!1){var _e;const q=$?0:(0,l.monotonicTime)(),J=[],le=(0,h.collapseActions)(this._actions);for(const ge of(0,o.languageSet)()){const{header:ne,footer:S,actionTexts:j,text:y}=(0,m.generateCode)(le,ge,this._languageGeneratorOptions),I={isPrimary:ge.id===this._primaryLanguage,timestamp:q,isRecorded:!0,label:ge.name,group:ge.groupName,id:ge.id,text:y,header:ne,footer:S,actions:j,language:ge.highlighter,highlight:[]};I.revealLine=y.split(`
`).length-1,J.push(I),ge.id===this._primaryLanguage&&((_e=this._throttledOutputFile)==null||_e.setContent(I.text))}this._recorderSources=J,this._pushAllSources()}}class b{static async run($,q){let J=null;q.on(c.RecorderEvent.ActionAdded,le=>{const _e=p($,le.frame.pageGuid);_e&&(!J||!(0,h.shouldMergeAction)(le,J)?$.emit(x.BrowserContext.Events.RecorderEvent,{event:"actionAdded",data:le,page:_e}):$.emit(x.BrowserContext.Events.RecorderEvent,{event:"actionUpdated",data:le,page:_e}),J=le)}),q.on(c.RecorderEvent.SignalAdded,le=>{const _e=p($,le.frame.pageGuid);$.emit(x.BrowserContext.Events.RecorderEvent,{event:"signalAdded",data:le,page:_e})})}}function p(z,$){return z.pages().find(q=>q.guid===$)}const O=Symbol("recorderApp");return Hd}var Ud,pb;function ET(){if(pb)return Ud;pb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Selectors:()=>C}),Ud=te(P);var e=tn(),U=Vi();class C{constructor(g,u){this.guid=`selectors@${(0,e.createGuid)()}`,this._builtinEngines=new Set(["css","css:light","xpath","xpath:light","_react","_vue","text","text:light","id","id:light","data-testid","data-testid:light","data-test-id","data-test-id:light","data-test","data-test:light","nth","visible","internal:control","internal:has","internal:has-not","internal:has-text","internal:has-not-text","internal:and","internal:or","internal:chain","role","internal:attr","internal:label","internal:text","internal:role","internal:testid","internal:describe","aria-ref"]),this._builtinEnginesInMainWorld=new Set(["_react","_vue"]),this._engines=new Map,this._testIdAttributeName=u??"data-testid";for(const _ of g)this.register(_)}register(g){if(!g.name.match(/^[a-zA-Z_0-9-]+$/))throw new Error("Selector engine name may only contain [a-zA-Z0-9_] characters");if(this._builtinEngines.has(g.name)||g.name==="zs"||g.name==="zs:light")throw new Error(`"${g.name}" is a predefined selector engine`);if(this._engines.has(g.name))throw new Error(`"${g.name}" selector engine has been already registered`);this._engines.set(g.name,g)}testIdAttributeName(){return this._testIdAttributeName}setTestIdAttributeName(g){this._testIdAttributeName=g}parseSelector(g,u){const _=typeof g=="string"?(0,U.parseSelector)(g):g;let f=!1;return(0,U.visitAllSelectorParts)(_,d=>{const v=d.name,a=this._engines.get(v);if(!a&&!this._builtinEngines.has(v))throw new U.InvalidSelectorError(`Unknown engine "${v}" while parsing selector ${(0,U.stringifySelector)(_)}`);a&&!a.contentScript&&(f=!0),this._builtinEnginesInMainWorld.has(v)&&(f=!0)}),{parsed:_,world:f?"main":"utility",strict:u}}}return Ud}var qd,fb;function OT(){if(fb)return qd;fb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{frameSnapshotStreamer:()=>e}),qd=te(P);function e(U,C){if(window[U])return;const w="__playwright_shadow_root_",g="__playwright_value_",u="__playwright_checked_",_="__playwright_selected_",f="__playwright_scroll_top_",d="__playwright_scroll_left_",v="__playwright_style_sheet_",a="__playwright_target__",s="__playwright_custom_elements__",n="__playwright_current_src__",o="__playwright_bounding_rect__",h="__playwright_popover_open_",m="__playwright_dialog_open_",c=Symbol("__playwright_snapshot_frameid_"),l=Symbol("__playwright_snapshot_cache_"),x=Symbol("__playwright_end_of_list_");function T(z){delete z[l]}function b(z){return z[l]||(z[l]={}),z[l]}function p(z){try{const $=new URL(z);return $.hash="",$.toString()}catch{return z}}class O{constructor(){this._lastSnapshotNumber=0,this._staleStyleSheets=new Set,this._readingStyleSheet=!1;const $=J=>{J.parentStyleSheet&&this._invalidateStyleSheet(J.parentStyleSheet)};this._interceptNativeMethod(window.CSSStyleSheet.prototype,"insertRule",J=>this._invalidateStyleSheet(J)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"deleteRule",J=>this._invalidateStyleSheet(J)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"addRule",J=>this._invalidateStyleSheet(J)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"removeRule",J=>this._invalidateStyleSheet(J)),this._interceptNativeGetter(window.CSSStyleSheet.prototype,"rules",J=>this._invalidateStyleSheet(J)),this._interceptNativeGetter(window.CSSStyleSheet.prototype,"cssRules",J=>this._invalidateStyleSheet(J)),this._interceptNativeMethod(window.CSSStyleSheet.prototype,"replaceSync",J=>this._invalidateStyleSheet(J)),this._interceptNativeMethod(window.CSSGroupingRule.prototype,"insertRule",$),this._interceptNativeMethod(window.CSSGroupingRule.prototype,"deleteRule",$),this._interceptNativeGetter(window.CSSGroupingRule.prototype,"cssRules",$),this._interceptNativeAsyncMethod(window.CSSStyleSheet.prototype,"replace",J=>this._invalidateStyleSheet(J)),this._fakeBase=document.createElement("base"),this._observer=new MutationObserver(J=>this._handleMutations(J));const q={attributes:!0,subtree:!0};this._observer.observe(document,q),this._refreshListenersWhenNeeded()}_refreshListenersWhenNeeded(){this._refreshListeners();const $="__playwright_snapshotter_global_listeners_check__";let q=!1;const J=()=>q=!0;window.addEventListener($,J),new MutationObserver(_e=>{_e.some(ne=>Array.from(ne.addedNodes).includes(document.documentElement))&&(q=!1,window.dispatchEvent(new CustomEvent($)),q||(window.addEventListener($,J),this._refreshListeners()))}).observe(document,{childList:!0})}_refreshListeners(){document.addEventListener("__playwright_mark_target__",$=>{if(!$.detail)return;const q=$.detail;$.composedPath()[0].__playwright_target__=q}),document.addEventListener("__playwright_unmark_target__",$=>{if(!$.detail)return;const q=$.detail;$.composedPath()[0].__playwright_target__===q&&delete $.composedPath()[0].__playwright_target__})}_interceptNativeMethod($,q,J){const le=$[q];le&&($[q]=function(..._e){const ge=le.call(this,..._e);return J(this,ge),ge})}_interceptNativeAsyncMethod($,q,J){const le=$[q];le&&($[q]=async function(..._e){const ge=await le.call(this,..._e);return J(this,ge),ge})}_interceptNativeGetter($,q,J){const le=Object.getOwnPropertyDescriptor($,q);Object.defineProperty($,q,{...le,get:function(){const _e=le.get.call(this);return J(this,_e),_e}})}_handleMutations($){for(const q of $)b(q.target).attributesCached=void 0}_invalidateStyleSheet($){this._readingStyleSheet||this._staleStyleSheets.add($)}_updateStyleElementStyleSheetTextIfNeeded($,q){const J=b($);if(this._staleStyleSheets.has($)||q&&J.cssText===void 0){this._staleStyleSheets.delete($);try{J.cssText=this._getSheetText($)}catch{J.cssText=""}}return J.cssText}_updateLinkStyleSheetTextIfNeeded($,q){const J=b($);if(this._staleStyleSheets.has($)){this._staleStyleSheets.delete($);try{return J.cssText=this._getSheetText($),J.cssRef=q,J.cssText}catch{}}return J.cssRef===void 0?void 0:q-J.cssRef}markIframe($,q){$[c]=q}reset(){this._staleStyleSheets.clear();const $=q=>{if(T(q),q.nodeType===Node.ELEMENT_NODE){const J=q;J.shadowRoot&&$(J.shadowRoot)}for(let J=q.firstChild;J;J=J.nextSibling)$(J)};$(document.documentElement),$(this._fakeBase)}__sanitizeMetaAttribute($,q,J){if($==="charset")return"utf-8";if(J.toLowerCase()!=="content-type"||$!=="content")return q;const[le,..._e]=q.split(";");if(le!=="text/html"||_e.length<=0)return q;const ge=_e.findIndex(ne=>ne.trim().startsWith("charset="));return ge>-1&&(_e[ge]="charset=utf-8"),`${le}; ${_e.join("; ")}`}_sanitizeUrl($){return $.startsWith("javascript:")||$.startsWith("vbscript:")?"":$}_sanitizeSrcSet($){return $.split(",").map(q=>{q=q.trim();const J=q.lastIndexOf(" ");return J===-1?this._sanitizeUrl(q):this._sanitizeUrl(q.substring(0,J).trim())+q.substring(J)}).join(", ")}_resolveUrl($,q){if(q==="")return"";try{return new URL(q,$).href}catch{return q}}_getSheetBase($){let q=$;for(;q.parentStyleSheet;)q=q.parentStyleSheet;return q.ownerNode?q.ownerNode.baseURI:document.baseURI}_getSheetText($){this._readingStyleSheet=!0;try{const q=[];for(const J of $.cssRules)q.push(J.cssText);return q.join(`
`)}finally{this._readingStyleSheet=!1}}captureSnapshot(){const $=performance.now(),q=++this._lastSnapshotNumber;let J=0,le=0,_e=0;this._handleMutations(this._observer.takeRecords());const ge=new Set,ne=I=>{var dt,yt;const D=I.nodeType,ie=D===Node.DOCUMENT_FRAGMENT_NODE?"template":I.nodeName;if(D!==Node.ELEMENT_NODE&&D!==Node.DOCUMENT_FRAGMENT_NODE&&D!==Node.TEXT_NODE||ie==="SCRIPT")return;if(ie==="LINK"&&D===Node.ELEMENT_NODE){const nt=(dt=I.getAttribute("rel"))==null?void 0:dt.toLowerCase();if(nt==="preload"||nt==="prefetch")return}if(C&&ie==="NOSCRIPT"||ie==="META"&&I.httpEquiv.toLowerCase()==="content-security-policy"||(ie==="IFRAME"||ie==="FRAME")&&_e)return;const he=b(I),me=[];let ye=!!he.cached,Se=0;const Oe=nt=>{ye=ye&&he.cached[me.length]===nt,me.push(nt)},Pe=nt=>(he.attributesCached=!0,ye?{equals:!0,n:[[q-he.ref[0],he.ref[1]]]}:(J+=Se,he.ref=[q,J++],he.cached=me,{equals:!1,n:nt}));if(D===Node.TEXT_NODE){const nt=I.nodeValue||"";return Oe(nt),Pe(nt)}if(ie==="STYLE"){const nt=I.sheet;let gt;return nt&&(gt=this._updateStyleElementStyleSheetTextIfNeeded(nt)),gt=gt||I.textContent||"",Oe(gt),Se++,Pe([ie,{},gt])}const Ne={},Le=[ie,Ne],qe=nt=>{const gt=ne(nt);gt&&(Le.push(gt.n),Oe(nt),ye=ye&&gt.equals)},Ge=nt=>{const gt=S(nt);gt&&(Le.push(gt.n),Oe(nt),ye=ye&&gt.equals)};if(D===Node.DOCUMENT_FRAGMENT_NODE&&(Ne[w]="open"),D===Node.ELEMENT_NODE){const nt=I;if(nt.localName.includes("-")&&((yt=window.customElements)!=null&&yt.get(nt.localName))&&ge.add(nt.localName),ie==="INPUT"||ie==="TEXTAREA"){const gt=nt.value;Oe(g),Oe(gt),Ne[g]=gt}if(ie==="INPUT"&&["checkbox","radio"].includes(nt.type)){const gt=nt.checked?"true":"false";Oe(u),Oe(gt),Ne[u]=gt}if(ie==="OPTION"){const gt=nt.selected?"true":"false";Oe(_),Oe(gt),Ne[_]=gt}if(ie==="CANVAS"||ie==="IFRAME"||ie==="FRAME"){const gt=nt.getBoundingClientRect(),Ut=JSON.stringify({left:gt.left,top:gt.top,right:gt.right,bottom:gt.bottom});Oe(o),Oe(Ut),Ne[o]=Ut}if(nt.popover&&nt.matches&&nt.matches(":popover-open")){const gt="true";Oe(h),Oe(gt),Ne[h]=gt}if(ie==="DIALOG"&&nt.open){const gt=nt.matches(":modal")?"modal":"true";Oe(m),Oe(gt),Ne[m]=gt}nt.scrollTop&&(Oe(f),Oe(nt.scrollTop),Ne[f]=""+nt.scrollTop),nt.scrollLeft&&(Oe(d),Oe(nt.scrollLeft),Ne[d]=""+nt.scrollLeft),nt.shadowRoot&&(++le,qe(nt.shadowRoot),--le),"__playwright_target__"in nt&&(Oe(a),Oe(nt.__playwright_target__),Ne[a]=nt.__playwright_target__)}ie==="HEAD"&&(++_e,this._fakeBase.setAttribute("href",document.baseURI),qe(this._fakeBase));for(let nt=I.firstChild;nt;nt=nt.nextSibling)qe(nt);ie==="HEAD"&&--_e,Oe(x);let ot=null;if(I.ownerDocument.documentElement===I?ot=I.ownerDocument:I.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(ot=I),ot){for(const nt of ot.adoptedStyleSheets||[])Ge(nt);Oe(x)}if(ie==="IFRAME"||ie==="FRAME"){const gt=I[c],Ut="src",Xt=gt?`/snapshot/${gt}`:"";Oe(Ut),Oe(Xt),Ne[Ut]=Xt}if(ie==="BODY"&&ge.size){const nt=[...ge].join(",");Oe(s),Oe(nt),Ne[s]=nt}if(ie==="IMG"||ie==="PICTURE"){const nt=ie==="PICTURE"?"":this._sanitizeUrl(I.currentSrc);Oe(n),Oe(nt),Ne[n]=nt}if(ye&&he.attributesCached&&!le)return Pe(Le);if(D===Node.ELEMENT_NODE){const nt=I;for(let gt=0;gt<nt.attributes.length;gt++){const Ut=nt.attributes[gt].name;if(ie==="LINK"&&Ut==="integrity"||ie==="IFRAME"&&(Ut==="src"||Ut==="srcdoc"||Ut==="sandbox")||ie==="FRAME"&&Ut==="src"||ie==="DIALOG"&&Ut==="open")continue;let Xt=nt.attributes[gt].value;ie==="META"?Xt=this.__sanitizeMetaAttribute(Ut,Xt,I.httpEquiv):Ut==="src"&&ie==="IMG"?Xt=this._sanitizeUrl(Xt):Ut==="srcset"&&ie==="IMG"?Xt=this._sanitizeSrcSet(Xt):Ut==="srcset"&&ie==="SOURCE"?Xt=this._sanitizeSrcSet(Xt):Ut==="href"&&ie==="LINK"?Xt=this._sanitizeUrl(Xt):Ut.startsWith("on")&&(Xt=""),Oe(Ut),Oe(Xt),Ne[Ut]=Xt}Oe(x)}return Le.length===2&&!Object.keys(Ne).length&&Le.pop(),Pe(Le)},S=I=>{const D=b(I),ie=D.cssText,he=this._updateStyleElementStyleSheetTextIfNeeded(I,!0);return he===ie?{equals:!0,n:[[q-D.ref[0],D.ref[1]]]}:(D.ref=[q,J++],{equals:!1,n:["template",{[v]:he}]})};let j;if(document.documentElement){const{n:I}=ne(document.documentElement);j=I}else j=["html"];const y={html:j,doctype:document.doctype?document.doctype.name:void 0,resourceOverrides:[],viewport:{width:window.innerWidth,height:window.innerHeight},url:location.href,wallTime:Date.now(),collectionTime:0};for(const I of this._staleStyleSheets){if(I.href===null)continue;const D=this._updateLinkStyleSheetTextIfNeeded(I,q);if(D===void 0)continue;const ie=this._getSheetBase(I),he=p(this._resolveUrl(ie,I.href));y.resourceOverrides.push({url:he,content:D,contentType:"text/css"})}return y.collectionTime=performance.now()-$,y}}window[U]=new O}return qd}var $d,mb;function TT(){if(mb)return $d;mb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{Snapshotter:()=>d}),$d=te(P);var e=OT(),U=En(),C=tn(),w=Mr(),g=qr(),u=Ar(),_=Ir(),f=Kr();class d{constructor(a,s){this._eventListeners=[],this._started=!1,this._context=a,this._delegate=s;const n=(0,C.createGuid)();this._snapshotStreamer="__playwright_snapshot_streamer_"+n}started(){return this._started}async start(){this._started=!0,this._initScript||await this._initialize(),await this.reset()}async reset(){this._started&&await this._context.safeNonStallingEvaluateInAllFrames(`window["${this._snapshotStreamer}"].reset()`,"main")}stop(){this._started=!1}async resetForReuse(){this._initScript&&(g.eventsHelper.removeEventListeners(this._eventListeners),await this._context.removeInitScripts([this._initScript]),this._initScript=void 0)}async _initialize(){for(const n of this._context.pages())this._onPage(n);this._eventListeners=[g.eventsHelper.addEventListener(this._context,_.BrowserContext.Events.Page,this._onPage.bind(this))];const{javaScriptEnabled:a}=this._context._options,s=`(${e.frameSnapshotStreamer})("${this._snapshotStreamer}", ${a||a===void 0})`;this._initScript=await this._context.addInitScript(void 0,s),await this._context.safeNonStallingEvaluateInAllFrames(s,"main")}dispose(){g.eventsHelper.removeEventListeners(this._eventListeners)}async captureSnapshot(a,s,n){const o=`window["${this._snapshotStreamer}"].captureSnapshot(${JSON.stringify(n)})`,h=a.frames().map(async m=>{const c=await m.nonStallingRawEvaluateInExistingMainContext(o).catch(x=>w.debugLogger.log("error",x));if(!c||!this._started)return;const l={callId:s,snapshotName:n,pageId:a.guid,frameId:m.guid,frameUrl:c.url,doctype:c.doctype,html:c.html,viewport:c.viewport,timestamp:(0,U.monotonicTime)(),wallTime:c.wallTime,collectionTime:c.collectionTime,resourceOverrides:[],isMainFrame:a.mainFrame()===m};for(const{url:x,content:T,contentType:b}of c.resourceOverrides)if(typeof T=="string"){const p=Buffer.from(T),O=(0,C.calculateSha1)(p)+"."+(u.mime.getExtension(b)||"dat");this._delegate.onSnapshotterBlob({sha1:O,buffer:p}),l.resourceOverrides.push({url:x,sha1:O})}else l.resourceOverrides.push({url:x,ref:T});this._delegate.onFrameSnapshot(l)});await Promise.all(h)}_onPage(a){for(const s of a.frames())this._annotateFrameHierarchy(s);this._eventListeners.push(g.eventsHelper.addEventListener(a,f.Page.Events.FrameAttached,s=>this._annotateFrameHierarchy(s)))}async _annotateFrameHierarchy(a){try{const s=await a.frameElement(),n=a.parentFrame();if(!n)return;const o=await n._mainContext();await(o==null?void 0:o.evaluate(({snapshotStreamer:h,frameElement:m,frameId:c})=>{window[h].markIframe(m,c)},{snapshotStreamer:this._snapshotStreamer,frameElement:s,frameId:a.guid})),s.dispose()}catch{}}}return $d}var Wd,gb;function by(){if(gb)return Wd;gb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(ne,S)=>{for(var j in S)r(ne,j,{get:S[j],enumerable:!0})},P=(ne,S,j,y)=>{if(S&&typeof S=="object"||typeof S=="function")for(let I of E(S))!V.call(ne,I)&&I!==j&&r(ne,I,{get:()=>S[I],enumerable:!(y=i(S,I))||y.enumerable});return ne},e=(ne,S,j)=>(j=ne!=null?t(R(ne)):{},P(!ne||!ne.__esModule?r(j,"default",{value:ne,enumerable:!0}):j,ne)),U=ne=>P(r({},"__esModule",{value:!0}),ne),C={};te(C,{Tracing:()=>z,shouldCaptureSnapshot:()=>q}),Wd=U(C);var w=e(Je),g=e(Je),u=e(Je),_=TT(),f=us(),d=Gr(),v=En(),a=qr(),s=tn(),n=Gs(),o=Ir(),h=$r(),m=Pn(),c=Ln(),l=sy(),x=Tr(),T=Kr(),b=bn();const p=8,O={width:800,height:600,quality:90};class z extends x.SdkObject{constructor(S,j){super(S,"tracing"),this._fs=new c.SerializedFS,this._screencastListeners=[],this._eventListeners=[],this._isStopping=!1,this._allResources=new Set,this._pendingHarEntries=new Set,this._context=S,this._precreatedTracesDir=j,this._harTracer=new l.HarTracer(S,null,this,{content:"attach",includeTraceInfo:!0,recordRequestOverrides:!1,waitForContentOnStop:!1});const y="selectors"in S?S.selectors().testIdAttributeName():void 0;this._contextCreatedEvent={version:p,type:"context-options",origin:"library",browserName:"",options:{},platform:process.platform,wallTime:0,monotonicTime:0,sdkLanguage:this._sdkLanguage(),testIdAttributeName:y,contextId:S.guid},S instanceof o.BrowserContext&&(this._snapshotter=new _.Snapshotter(S,this),(0,d.assert)(j,"tracesDir must be specified for BrowserContext"),this._contextCreatedEvent.browserName=S._browser.options.name,this._contextCreatedEvent.channel=S._browser.options.channel,this._contextCreatedEvent.options=S._options)}_sdkLanguage(){return this._context instanceof o.BrowserContext?this._context._browser.sdkLanguage():this._context.attribution.playwright.options.sdkLanguage}async resetForReuse(S){await this.stopChunk(S,{mode:"discard"}).catch(()=>{}),await this.stop(S),this._snapshotter&&await S.race(this._snapshotter.resetForReuse())}start(S){if(this._isStopping)throw new Error("Cannot start tracing while stopping");if(this._state)throw new Error("Tracing has been already started");this._contextCreatedEvent.sdkLanguage=this._sdkLanguage();const j=S.name||(0,s.createGuid)(),y=this._createTracesDirIfNeeded();this._state={options:S,traceName:j,tracesDir:y,traceFile:u.default.join(y,j+".trace"),networkFile:u.default.join(y,j+".network"),resourcesDir:u.default.join(y,"resources"),chunkOrdinal:0,traceSha1s:new Set,networkSha1s:new Set,recording:!1,callIds:new Set,groupStack:[]},this._fs.mkdir(this._state.resourcesDir),this._fs.writeFile(this._state.networkFile,""),S.snapshots&&this._harTracer.start({omitScripts:!S.live})}async startChunk(S,j={}){var D;if(this._state&&this._state.recording&&await this.stopChunk(S,{mode:"discard"}),!this._state)throw new Error("Must start tracing before starting a new chunk");if(this._isStopping)throw new Error("Cannot start a trace chunk while stopping");this._state.recording=!0,this._state.callIds.clear();const y=this._context instanceof o.BrowserContext;j.name&&j.name!==this._state.traceName?this._changeTraceName(this._state,j.name,y):this._allocateNewTraceFile(this._state),y||this._fs.writeFile(this._state.networkFile,""),this._fs.mkdir(u.default.dirname(this._state.traceFile));const I={...this._contextCreatedEvent,title:j.title,wallTime:Date.now(),monotonicTime:(0,v.monotonicTime)()};return this._appendTraceEvent(I),this._context.instrumentation.addListener(this,this._context),this._eventListeners.push(a.eventsHelper.addEventListener(this._context,o.BrowserContext.Events.Console,this._onConsoleMessage.bind(this)),a.eventsHelper.addEventListener(this._context,o.BrowserContext.Events.PageError,this._onPageError.bind(this))),this._state.options.screenshots&&this._startScreencast(),this._state.options.snapshots&&await((D=this._snapshotter)==null?void 0:D.start()),{traceName:this._state.traceName}}_currentGroupId(){var S;return(S=this._state)!=null&&S.groupStack.length?this._state.groupStack[this._state.groupStack.length-1]:void 0}group(S,j,y){if(!this._state)return;const I=[],{file:D,line:ie,column:he}=j??y.location??{};D&&I.push({file:D,line:ie??0,column:he??0});const me={type:"before",callId:y.id,startTime:y.startTime,title:S,class:"Tracing",method:"tracingGroup",params:{},stepId:y.stepId,stack:I};this._currentGroupId()&&(me.parentId=this._currentGroupId()),this._state.groupStack.push(me.callId),this._appendTraceEvent(me)}groupEnd(){if(!this._state)return;const S=this._state.groupStack.pop();if(!S)return;const j={type:"after",callId:S,endTime:(0,v.monotonicTime)()};this._appendTraceEvent(j)}_startScreencast(){if(this._context instanceof o.BrowserContext){for(const S of this._context.pages())this._startScreencastInPage(S);this._screencastListeners.push(a.eventsHelper.addEventListener(this._context,o.BrowserContext.Events.Page,this._startScreencastInPage.bind(this)))}}_stopScreencast(){if(a.eventsHelper.removeEventListeners(this._screencastListeners),this._context instanceof o.BrowserContext)for(const S of this._context.pages())S.setScreencastOptions(null)}_allocateNewTraceFile(S){const j=S.chunkOrdinal?`-chunk${S.chunkOrdinal}`:"";S.chunkOrdinal++,S.traceFile=u.default.join(S.tracesDir,`${S.traceName}${j}.trace`)}_changeTraceName(S,j,y){S.traceName=j,S.chunkOrdinal=0,this._allocateNewTraceFile(S);const I=u.default.join(S.tracesDir,j+".network");y&&this._fs.copyFile(S.networkFile,I),S.networkFile=I}async stop(S){if(this._state){if(this._isStopping)throw new Error("Tracing is already stopping");if(this._state.recording)throw new Error("Must stop trace file before stopping tracing");this._closeAllGroups(),this._harTracer.stop(),this.flushHarEntries(),await S.race(this._fs.syncAndGetError()).finally(()=>{this._state=void 0})}}async deleteTmpTracesDir(){this._tracesTmpDir&&await(0,c.removeFolders)([this._tracesTmpDir])}_createTracesDirIfNeeded(){return this._precreatedTracesDir?this._precreatedTracesDir:(this._tracesTmpDir=w.default.mkdtempSync(u.default.join(g.default.tmpdir(),"playwright-tracing-")),this._tracesTmpDir)}abort(){var S;(S=this._snapshotter)==null||S.dispose(),this._harTracer.stop()}async flush(){this.abort(),await this._fs.syncAndGetError()}_closeAllGroups(){for(;this._currentGroupId();)this.groupEnd()}async stopChunk(S,j){var me;if(this._isStopping)throw new Error("Tracing is already stopping");if(this._isStopping=!0,!this._state||!this._state.recording){if(this._isStopping=!1,j.mode!=="discard")throw new Error("Must start tracing before stopping");return{}}this._closeAllGroups(),this._context.instrumentation.removeListener(this),a.eventsHelper.removeEventListeners(this._eventListeners),this._state.options.screenshots&&this._stopScreencast(),this._state.options.snapshots&&((me=this._snapshotter)==null||me.stop()),this.flushHarEntries();const y=u.default.join(this._state.tracesDir,this._state.traceName+`-pwnetcopy-${this._state.chunkOrdinal}.network`),I=[];I.push({name:"trace.trace",value:this._state.traceFile}),I.push({name:"trace.network",value:y});for(const ye of new Set([...this._state.traceSha1s,...this._state.networkSha1s]))I.push({name:u.default.join("resources",ye),value:u.default.join(this._state.resourcesDir,ye)});if(this._state.traceSha1s=new Set,j.mode==="discard")return this._isStopping=!1,this._state.recording=!1,{};this._fs.copyFile(this._state.networkFile,y);const D=this._state.traceFile+".zip";j.mode==="archive"&&this._fs.zip(I,D);const ie=await S.race(this._fs.syncAndGetError()).catch(ye=>ye);if(this._isStopping=!1,this._state&&(this._state.recording=!1),ie){if(!(0,b.isAbortError)(ie)&&this._context instanceof o.BrowserContext&&!this._context._browser.isConnected())return{};throw ie}if(j.mode==="entries")return{entries:I};const he=new n.Artifact(this._context,D);return he.reportFinished(),{artifact:he}}async _captureSnapshot(S,j,y){this._snapshotter&&j.attribution.page&&this._snapshotter.started()&&q(y)&&await this._snapshotter.captureSnapshot(j.attribution.page,y.id,S).catch(()=>{})}onBeforeCall(S,j){var I,D;const y=J(j,this._currentGroupId());return y?((I=S.attribution.page)==null||I.temporarilyDisableTracingScreencastThrottling(),y.beforeSnapshot=`before@${j.id}`,(D=this._state)==null||D.callIds.add(j.id),this._appendTraceEvent(y),this._captureSnapshot(y.beforeSnapshot,S,j)):Promise.resolve()}onBeforeInputAction(S,j){var I,D;if(!((I=this._state)!=null&&I.callIds.has(j.id)))return Promise.resolve();const y=le(j);return y?((D=S.attribution.page)==null||D.temporarilyDisableTracingScreencastThrottling(),y.inputSnapshot=`input@${j.id}`,this._appendTraceEvent(y),this._captureSnapshot(y.inputSnapshot,S,j)):Promise.resolve()}onCallLog(S,j,y,I){if(j.isServerSide||j.internal||y!=="api")return;const D=_e(j,I);D&&this._appendTraceEvent(D)}async onAfterCall(S,j){var I,D,ie;if(!((I=this._state)!=null&&I.callIds.has(j.id)))return;(D=this._state)==null||D.callIds.delete(j.id);const y=ge(j);if(y)return(ie=S.attribution.page)==null||ie.temporarilyDisableTracingScreencastThrottling(),y.afterSnapshot=`after@${j.id}`,this._appendTraceEvent(y),this._captureSnapshot(y.afterSnapshot,S,j)}onEntryStarted(S){this._pendingHarEntries.add(S)}onEntryFinished(S){this._pendingHarEntries.delete(S);const y=$({type:"resource-snapshot",snapshot:S},this._state.networkSha1s);this._fs.appendFile(this._state.networkFile,JSON.stringify(y)+`
`,!0)}flushHarEntries(){const S=[];for(const j of this._pendingHarEntries){const I=$({type:"resource-snapshot",snapshot:j},this._state.networkSha1s);S.push(JSON.stringify(I))}this._pendingHarEntries.clear(),S.length&&this._fs.appendFile(this._state.networkFile,S.join(`
`)+`
`,!0)}onContentBlob(S,j){this._appendResource(S,j)}onSnapshotterBlob(S){this._appendResource(S.sha1,S.buffer)}onFrameSnapshot(S){this._appendTraceEvent({type:"frame-snapshot",snapshot:S})}_onConsoleMessage(S){var y;const j={type:"console",messageType:S.type(),text:S.text(),args:S.args().map(I=>({preview:I.toString(),value:I.rawValue()})),location:S.location(),time:(0,v.monotonicTime)(),pageId:(y=S.page())==null?void 0:y.guid};this._appendTraceEvent(j)}onDialog(S){const j={type:"event",time:(0,v.monotonicTime)(),class:"BrowserContext",method:"dialog",params:{pageId:S.page().guid,type:S.type(),message:S.message(),defaultValue:S.defaultValue()}};this._appendTraceEvent(j)}onDownload(S,j){const y={type:"event",time:(0,v.monotonicTime)(),class:"BrowserContext",method:"download",params:{pageId:S.guid,url:j.url,suggestedFilename:j.suggestedFilename()}};this._appendTraceEvent(y)}onPageOpen(S){var y;const j={type:"event",time:(0,v.monotonicTime)(),class:"BrowserContext",method:"page",params:{pageId:S.guid,openerPageId:(y=S.opener())==null?void 0:y.guid}};this._appendTraceEvent(j)}onPageClose(S){const j={type:"event",time:(0,v.monotonicTime)(),class:"BrowserContext",method:"pageClosed",params:{pageId:S.guid}};this._appendTraceEvent(j)}_onPageError(S,j){const y={type:"event",time:(0,v.monotonicTime)(),class:"BrowserContext",method:"pageError",params:{error:(0,m.serializeError)(S)},pageId:j.guid};this._appendTraceEvent(y)}_startScreencastInPage(S){S.setScreencastOptions(O);const j=S.guid;this._screencastListeners.push(a.eventsHelper.addEventListener(S,T.Page.Events.ScreencastFrame,y=>{const I=y.timestamp||Date.now(),D=`${j}-${I}.jpeg`,ie={type:"screencast-frame",pageId:S.guid,sha1:D,width:y.width,height:y.height,timestamp:(0,v.monotonicTime)(),frameSwapWallTime:y.frameSwapWallTime};this._appendResource(D,y.buffer),this._appendTraceEvent(ie)}))}_appendTraceEvent(S){const j=$(S,this._state.traceSha1s),y=this._state.options.live||S.type!=="event"&&S.type!=="console"&&S.type!=="log";this._fs.appendFile(this._state.traceFile,JSON.stringify(j)+`
`,y)}_appendResource(S,j){if(this._allResources.has(S))return;this._allResources.add(S);const y=u.default.join(this._state.resourcesDir,S);this._fs.writeFile(y,j,!0)}}function $(ne,S){if(Array.isArray(ne))return ne.map(j=>$(j,S));if(ne instanceof h.Dispatcher)return`<${ne._type}>`;if(ne instanceof Buffer)return"<Buffer>";if(ne instanceof Date)return ne;if(typeof ne=="object"){const j={};for(const y in ne){if(y==="sha1"||y==="_sha1"||y.endsWith("Sha1")){const I=ne[y];I&&S.add(I)}j[y]=$(ne[y],S)}return j}return ne}function q(ne){const S=f.methodMetainfo.get(ne.type+"."+ne.method);return!!(S!=null&&S.snapshot)}function J(ne,S){if(ne.internal||ne.method.startsWith("tracing"))return null;const j={type:"before",callId:ne.id,startTime:ne.startTime,title:ne.title,class:ne.type,method:ne.method,params:ne.params,stepId:ne.stepId,pageId:ne.pageId};return S&&(j.parentId=S),j}function le(ne){return ne.internal||ne.method.startsWith("tracing")?null:{type:"input",callId:ne.id,point:ne.point}}function _e(ne,S){return ne.internal||ne.method.startsWith("tracing")?null:{type:"log",callId:ne.id,time:(0,v.monotonicTime)(),message:S}}function ge(ne){var S;return ne.internal||ne.method.startsWith("tracing")?null:{type:"after",callId:ne.id,endTime:ne.endTime,error:(S=ne.error)==null?void 0:S.error,result:ne.result,point:ne.point}}return Wd}var zd,_b;function CT(){if(_b)return zd;_b=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),zd=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/storageScript.ts
var storageScript_exports = {};
__export(storageScript_exports, {
  StorageScript: () => StorageScript
});
module.exports = __toCommonJS(storageScript_exports);

// packages/playwright-core/src/utils/isomorphic/utilityScriptSerializers.ts
function isRegExp(obj) {
  try {
    return obj instanceof RegExp || Object.prototype.toString.call(obj) === "[object RegExp]";
  } catch (error) {
    return false;
  }
}
function isDate(obj) {
  try {
    return obj instanceof Date || Object.prototype.toString.call(obj) === "[object Date]";
  } catch (error) {
    return false;
  }
}
function isURL(obj) {
  try {
    return obj instanceof URL || Object.prototype.toString.call(obj) === "[object URL]";
  } catch (error) {
    return false;
  }
}
function isError(obj) {
  var _a;
  try {
    return obj instanceof Error || obj && ((_a = Object.getPrototypeOf(obj)) == null ? void 0 : _a.name) === "Error";
  } catch (error) {
    return false;
  }
}
function isTypedArray(obj, constructor) {
  try {
    return obj instanceof constructor || Object.prototype.toString.call(obj) === \`[object \${constructor.name}]\`;
  } catch (error) {
    return false;
  }
}
var typedArrayConstructors = {
  i8: Int8Array,
  ui8: Uint8Array,
  ui8c: Uint8ClampedArray,
  i16: Int16Array,
  ui16: Uint16Array,
  i32: Int32Array,
  ui32: Uint32Array,
  // TODO: add Float16Array once it's in baseline
  f32: Float32Array,
  f64: Float64Array,
  bi64: BigInt64Array,
  bui64: BigUint64Array
};
function typedArrayToBase64(array) {
  if ("toBase64" in array)
    return array.toBase64();
  const binary = Array.from(new Uint8Array(array.buffer, array.byteOffset, array.byteLength)).map((b) => String.fromCharCode(b)).join("");
  return btoa(binary);
}
function base64ToTypedArray(base64, TypedArrayConstructor) {
  const binary = atob(base64);
  const bytes = new Uint8Array(binary.length);
  for (let i = 0; i < binary.length; i++)
    bytes[i] = binary.charCodeAt(i);
  return new TypedArrayConstructor(bytes.buffer);
}
function parseEvaluationResultValue(value, handles = [], refs = /* @__PURE__ */ new Map()) {
  if (Object.is(value, void 0))
    return void 0;
  if (typeof value === "object" && value) {
    if ("ref" in value)
      return refs.get(value.ref);
    if ("v" in value) {
      if (value.v === "undefined")
        return void 0;
      if (value.v === "null")
        return null;
      if (value.v === "NaN")
        return NaN;
      if (value.v === "Infinity")
        return Infinity;
      if (value.v === "-Infinity")
        return -Infinity;
      if (value.v === "-0")
        return -0;
      return void 0;
    }
    if ("d" in value) {
      return new Date(value.d);
    }
    if ("u" in value)
      return new URL(value.u);
    if ("bi" in value)
      return BigInt(value.bi);
    if ("e" in value) {
      const error = new Error(value.e.m);
      error.name = value.e.n;
      error.stack = value.e.s;
      return error;
    }
    if ("r" in value)
      return new RegExp(value.r.p, value.r.f);
    if ("a" in value) {
      const result = [];
      refs.set(value.id, result);
      for (const a of value.a)
        result.push(parseEvaluationResultValue(a, handles, refs));
      return result;
    }
    if ("o" in value) {
      const result = {};
      refs.set(value.id, result);
      for (const { k, v } of value.o) {
        if (k === "__proto__")
          continue;
        result[k] = parseEvaluationResultValue(v, handles, refs);
      }
      return result;
    }
    if ("h" in value)
      return handles[value.h];
    if ("ta" in value)
      return base64ToTypedArray(value.ta.b, typedArrayConstructors[value.ta.k]);
  }
  return value;
}
function serializeAsCallArgument(value, handleSerializer) {
  return serialize(value, handleSerializer, { visited: /* @__PURE__ */ new Map(), lastId: 0 });
}
function serialize(value, handleSerializer, visitorInfo) {
  if (value && typeof value === "object") {
    if (typeof globalThis.Window === "function" && value instanceof globalThis.Window)
      return "ref: <Window>";
    if (typeof globalThis.Document === "function" && value instanceof globalThis.Document)
      return "ref: <Document>";
    if (typeof globalThis.Node === "function" && value instanceof globalThis.Node)
      return "ref: <Node>";
  }
  return innerSerialize(value, handleSerializer, visitorInfo);
}
function innerSerialize(value, handleSerializer, visitorInfo) {
  var _a;
  const result = handleSerializer(value);
  if ("fallThrough" in result)
    value = result.fallThrough;
  else
    return result;
  if (typeof value === "symbol")
    return { v: "undefined" };
  if (Object.is(value, void 0))
    return { v: "undefined" };
  if (Object.is(value, null))
    return { v: "null" };
  if (Object.is(value, NaN))
    return { v: "NaN" };
  if (Object.is(value, Infinity))
    return { v: "Infinity" };
  if (Object.is(value, -Infinity))
    return { v: "-Infinity" };
  if (Object.is(value, -0))
    return { v: "-0" };
  if (typeof value === "boolean")
    return value;
  if (typeof value === "number")
    return value;
  if (typeof value === "string")
    return value;
  if (typeof value === "bigint")
    return { bi: value.toString() };
  if (isError(value)) {
    let stack;
    if ((_a = value.stack) == null ? void 0 : _a.startsWith(value.name + ": " + value.message)) {
      stack = value.stack;
    } else {
      stack = \`\${value.name}: \${value.message}
\${value.stack}\`;
    }
    return { e: { n: value.name, m: value.message, s: stack } };
  }
  if (isDate(value))
    return { d: value.toJSON() };
  if (isURL(value))
    return { u: value.toJSON() };
  if (isRegExp(value))
    return { r: { p: value.source, f: value.flags } };
  for (const [k, ctor] of Object.entries(typedArrayConstructors)) {
    if (isTypedArray(value, ctor))
      return { ta: { b: typedArrayToBase64(value), k } };
  }
  const id = visitorInfo.visited.get(value);
  if (id)
    return { ref: id };
  if (Array.isArray(value)) {
    const a = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (let i = 0; i < value.length; ++i)
      a.push(serialize(value[i], handleSerializer, visitorInfo));
    return { a, id: id2 };
  }
  if (typeof value === "object") {
    const o = [];
    const id2 = ++visitorInfo.lastId;
    visitorInfo.visited.set(value, id2);
    for (const name of Object.keys(value)) {
      let item;
      try {
        item = value[name];
      } catch (e) {
        continue;
      }
      if (name === "toJSON" && typeof item === "function")
        o.push({ k: name, v: { o: [], id: 0 } });
      else
        o.push({ k: name, v: serialize(item, handleSerializer, visitorInfo) });
    }
    let jsonWrapper;
    try {
      if (o.length === 0 && value.toJSON && typeof value.toJSON === "function")
        jsonWrapper = { value: value.toJSON() };
    } catch (e) {
    }
    if (jsonWrapper)
      return innerSerialize(jsonWrapper.value, handleSerializer, visitorInfo);
    return { o, id: id2 };
  }
}

// packages/injected/src/storageScript.ts
var StorageScript = class {
  constructor(isFirefox) {
    this._isFirefox = isFirefox;
    this._global = globalThis;
  }
  _idbRequestToPromise(request) {
    return new Promise((resolve, reject) => {
      request.addEventListener("success", () => resolve(request.result));
      request.addEventListener("error", () => reject(request.error));
    });
  }
  _isPlainObject(v) {
    const ctor = v == null ? void 0 : v.constructor;
    if (this._isFirefox) {
      const constructorImpl = ctor == null ? void 0 : ctor.toString();
      if ((constructorImpl == null ? void 0 : constructorImpl.startsWith("function Object() {")) && (constructorImpl == null ? void 0 : constructorImpl.includes("[native code]")))
        return true;
    }
    return ctor === Object;
  }
  _trySerialize(value) {
    let trivial = true;
    const encoded = serializeAsCallArgument(value, (v) => {
      const isTrivial = this._isPlainObject(v) || Array.isArray(v) || typeof v === "string" || typeof v === "number" || typeof v === "boolean" || Object.is(v, null);
      if (!isTrivial)
        trivial = false;
      return { fallThrough: v };
    });
    if (trivial)
      return { trivial: value };
    return { encoded };
  }
  async _collectDB(dbInfo) {
    if (!dbInfo.name)
      throw new Error("Database name is empty");
    if (!dbInfo.version)
      throw new Error("Database version is unset");
    const db = await this._idbRequestToPromise(indexedDB.open(dbInfo.name));
    if (db.objectStoreNames.length === 0)
      return { name: dbInfo.name, version: dbInfo.version, stores: [] };
    const transaction = db.transaction(db.objectStoreNames, "readonly");
    const stores = await Promise.all([...db.objectStoreNames].map(async (storeName) => {
      const objectStore = transaction.objectStore(storeName);
      const keys = await this._idbRequestToPromise(objectStore.getAllKeys());
      const records = await Promise.all(keys.map(async (key) => {
        const record = {};
        if (objectStore.keyPath === null) {
          const { encoded: encoded2, trivial: trivial2 } = this._trySerialize(key);
          if (trivial2)
            record.key = trivial2;
          else
            record.keyEncoded = encoded2;
        }
        const value = await this._idbRequestToPromise(objectStore.get(key));
        const { encoded, trivial } = this._trySerialize(value);
        if (trivial)
          record.value = trivial;
        else
          record.valueEncoded = encoded;
        return record;
      }));
      const indexes = [...objectStore.indexNames].map((indexName) => {
        const index = objectStore.index(indexName);
        return {
          name: index.name,
          keyPath: typeof index.keyPath === "string" ? index.keyPath : void 0,
          keyPathArray: Array.isArray(index.keyPath) ? index.keyPath : void 0,
          multiEntry: index.multiEntry,
          unique: index.unique
        };
      });
      return {
        name: storeName,
        records,
        indexes,
        autoIncrement: objectStore.autoIncrement,
        keyPath: typeof objectStore.keyPath === "string" ? objectStore.keyPath : void 0,
        keyPathArray: Array.isArray(objectStore.keyPath) ? objectStore.keyPath : void 0
      };
    }));
    return {
      name: dbInfo.name,
      version: dbInfo.version,
      stores
    };
  }
  async collect(recordIndexedDB) {
    const localStorage = Object.keys(this._global.localStorage).map((name) => ({ name, value: this._global.localStorage.getItem(name) }));
    if (!recordIndexedDB)
      return { localStorage };
    try {
      const databases = await this._global.indexedDB.databases();
      const indexedDB2 = await Promise.all(databases.map((db) => this._collectDB(db)));
      return { localStorage, indexedDB: indexedDB2 };
    } catch (e) {
      throw new Error("Unable to serialize IndexedDB: " + e.message);
    }
  }
  async _restoreDB(dbInfo) {
    const openRequest = this._global.indexedDB.open(dbInfo.name, dbInfo.version);
    openRequest.addEventListener("upgradeneeded", () => {
      var _a, _b;
      const db2 = openRequest.result;
      for (const store of dbInfo.stores) {
        const objectStore = db2.createObjectStore(store.name, { autoIncrement: store.autoIncrement, keyPath: (_a = store.keyPathArray) != null ? _a : store.keyPath });
        for (const index of store.indexes)
          objectStore.createIndex(index.name, (_b = index.keyPathArray) != null ? _b : index.keyPath, { unique: index.unique, multiEntry: index.multiEntry });
      }
    });
    const db = await this._idbRequestToPromise(openRequest);
    if (db.objectStoreNames.length === 0)
      return;
    const transaction = db.transaction(db.objectStoreNames, "readwrite");
    await Promise.all(dbInfo.stores.map(async (store) => {
      const objectStore = transaction.objectStore(store.name);
      await Promise.all(store.records.map(async (record) => {
        var _a, _b;
        await this._idbRequestToPromise(
          objectStore.add(
            (_a = record.value) != null ? _a : parseEvaluationResultValue(record.valueEncoded),
            (_b = record.key) != null ? _b : parseEvaluationResultValue(record.keyEncoded)
          )
        );
      }));
    }));
  }
  async restore(originState) {
    var _a;
    try {
      await Promise.all(((_a = originState.indexedDB) != null ? _a : []).map((dbInfo) => this._restoreDB(dbInfo)));
    } catch (e) {
      throw new Error("Unable to restore IndexedDB: " + e.message);
    }
    for (const { name, value } of originState.localStorage || [])
      this._global.localStorage.setItem(name, value);
  }
};
`;return zd}var Vd,bb;function Ir(){if(bb)return Vd;bb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(ne,S)=>{for(var j in S)r(ne,j,{get:S[j],enumerable:!0})},P=(ne,S,j,y)=>{if(S&&typeof S=="object"||typeof S=="function")for(let I of E(S))!V.call(ne,I)&&I!==j&&r(ne,I,{get:()=>S[I],enumerable:!(y=i(S,I))||y.enumerable});return ne},e=(ne,S,j)=>(j=ne!=null?t(R(ne)):{},P(!ne||!ne.__esModule?r(j,"default",{value:ne,enumerable:!0}):j,ne)),U=ne=>P(r({},"__esModule",{value:!0}),ne),C={};te(C,{BrowserContext:()=>O,normalizeProxySettings:()=>J,validateBrowserContextOptions:()=>z,verifyClientCertificates:()=>q,verifyGeolocation:()=>$}),Vd=U(C);var w=e(Je),g=e(Je),u=tn(),_=Xn(),f=mO(),d=ry(),v=Ks(),a=Fo(),s=Ln(),n=OO(),o=hn(),h=Tr(),m=e(fn()),c=Kr(),l=Kr(),x=_y(),T=ET(),b=by(),p=e(CT());const ge=class ge extends h.SdkObject{constructor(S,j,y){super(S,"browser-context"),this._pageBindings=new Map,this.requestInterceptors=[],this._closedStatus="open",this._permissions=new Map,this._downloads=new Set,this._origins=new Set,this._harRecorders=new Map,this._tempDirs=[],this._settingStorageState=!1,this.initScripts=[],this._routesInFlight=new Set,this._playwrightBindingExposed=!1,this.attribution.context=this,this._browser=S,this._options=j,this._browserContextId=y,this._isPersistentContext=!y,this._closePromise=new Promise(I=>this._closePromiseFulfill=I),this._selectors=new T.Selectors(j.selectorEngines||[],j.testIdAttributeName),this.fetchRequest=new a.BrowserContextAPIRequestContext(this),this.tracing=new b.Tracing(this,S.options.tracesDir),this.clock=new f.Clock(this),this.dialogManager=new v.DialogManager(this.instrumentation)}isPersistentContext(){return this._isPersistentContext}selectors(){return this._selectors}async _initialize(){this.attribution.playwright.options.isInternalPlaywright||(this._debugger=new d.Debugger(this),(0,_.debugMode)()==="inspector"&&await x.RecorderApp.show(this,{pauseOnNextStatement:!0}),this._debugger.isPaused()&&x.RecorderApp.showInspectorNoReply(this),this._debugger.on(d.Debugger.Events.PausedStateChanged,()=>{this._debugger.isPaused()&&x.RecorderApp.showInspectorNoReply(this)}),(0,_.debugMode)()==="console"&&await this.extendInjectedScript("function Console(injectedScript) { injectedScript.consoleApi.install(); }"),this._options.serviceWorkers==="block"&&await this.addInitScript(void 0,`
if (navigator.serviceWorker) navigator.serviceWorker.register = async () => { console.warn('Service Worker registration blocked by Playwright'); };
`),this._options.permissions&&await this.grantPermissions(this._options.permissions))}debugger(){return this._debugger}async _ensureVideosPath(){this._options.recordVideo&&await(0,s.mkdirIfNeeded)(g.default.join(this._options.recordVideo.dir,"dummy"))}canResetForReuse(){return this._closedStatus==="open"}static reusableContextHash(S){var y;const j={...S};((y=j.selectorEngines)==null?void 0:y.length)===0&&delete j.selectorEngines;for(const I of Object.keys(j)){const D=I;j[D]===_e[D]&&delete j[D]}for(const I of le)delete j[I];return JSON.stringify(j)}async resetForReuse(S,j){var D,ie;if(await this.tracing.resetForReuse(S),j){for(const he of le)this._options[he]=j[he];j.testIdAttributeName&&this.selectors().setTestIdAttributeName(j.testIdAttributeName)}let y=this.pages()[0];const I=this.possiblyUninitializedPages().filter(he=>he!==y);for(const he of I)await he.close();y&&y.hasCrashed()&&(await y.close(),y=void 0),await(y==null?void 0:y.mainFrame().gotoImpl(S,"about:blank",{})),await this._resetStorage(S),await S.race(this.clock.resetForReuse()),await S.race(this.setUserAgent(this._options.userAgent)),await S.race(this.clearCache()),await S.race(this.doClearCookies()),await S.race(this.doUpdateDefaultEmulatedMedia()),await S.race(this.doUpdateDefaultViewport()),(D=this._options.storageState)!=null&&D.cookies&&await S.race(this.addCookies((ie=this._options.storageState)==null?void 0:ie.cookies)),await(y==null?void 0:y.resetForReuse(S))}_browserClosed(){for(const S of this.pages())S._didClose();this._didCloseInternal()}_didCloseInternal(){var S;this._closedStatus!=="closed"&&((S=this._clientCertificatesProxy)==null||S.close().catch(()=>{}),this.tracing.abort(),this._isPersistentContext&&this.onClosePersistent(),this._closePromiseFulfill(new Error("Context closed")),this.emit(ge.Events.Close))}pages(){return this.possiblyUninitializedPages().filter(S=>S.initializedOrUndefined())}async cookies(S=[]){return S&&!Array.isArray(S)&&(S=[S]),await this.doGetCookies(S)}async clearCookies(S){const j=await this.cookies();await this.doClearCookies();const y=(D,ie,he)=>he?he instanceof RegExp?(he.lastIndex=0,he.test(D[ie])):D[ie]===he:!0,I=j.filter(D=>!y(D,"name",S.name)||!y(D,"domain",S.domain)||!y(D,"path",S.path));await this.addCookies(I)}setHTTPCredentials(S){return this.doSetHTTPCredentials(S)}getBindingClient(S){var j;return(j=this._pageBindings.get(S))==null?void 0:j.forClient}async exposePlaywrightBindingIfNeeded(){this._playwrightBindingExposed||(this._playwrightBindingExposed=!0,await this.doExposePlaywrightBinding(),this.bindingsInitScript=l.PageBinding.createInitScript(),this.initScripts.push(this.bindingsInitScript),await this.doAddInitScript(this.bindingsInitScript),await this.safeNonStallingEvaluateInAllFrames(this.bindingsInitScript.source,"main"))}needsPlaywrightBinding(){return this._playwrightBindingExposed}async exposeBinding(S,j,y,I,D){if(this._pageBindings.has(j))throw new Error(`Function "${j}" has been already registered`);for(const he of this.pages())if(he.getBinding(j))throw new Error(`Function "${j}" has been already registered in one of the pages`);await S.race(this.exposePlaywrightBindingIfNeeded());const ie=new l.PageBinding(j,I,y);return ie.forClient=D,this._pageBindings.set(j,ie),S.cleanupWhenAborted(()=>this._pageBindings.delete(j)),await S.race(this.doAddInitScript(ie.initScript)),await S.race(this.safeNonStallingEvaluateInAllFrames(ie.initScript.source,"main")),ie}async removeExposedBindings(S){S=S.filter(y=>this._pageBindings.get(y.name)===y);for(const y of S)this._pageBindings.delete(y.name);await this.doRemoveInitScripts(S.map(y=>y.initScript));const j=S.map(y=>`{ ${y.cleanupScript} };
`).join("");await this.safeNonStallingEvaluateInAllFrames(j,"main")}async grantPermissions(S,j){let y="*";j&&(y=new URL(j).origin);const I=new Set(this._permissions.get(y)||[]);S.forEach(ie=>I.add(ie));const D=[...I.values()];this._permissions.set(y,D),await this.doGrantPermissions(y,D)}async clearPermissions(){this._permissions.clear(),await this.doClearPermissions()}async setExtraHTTPHeaders(S,j){const y=this._options.extraHTTPHeaders;this._options.extraHTTPHeaders=j,S.cleanupWhenAborted(async()=>{this._options.extraHTTPHeaders=y,await this.doUpdateExtraHTTPHeaders()}),await S.race(this.doUpdateExtraHTTPHeaders())}async setOffline(S,j){const y=this._options.offline;this._options.offline=j,S.cleanupWhenAborted(async()=>{this._options.offline=y,await this.doUpdateOffline()}),await S.race(this.doUpdateOffline())}async _loadDefaultContextAsIs(S){if(!this.possiblyUninitializedPages().length){const I=o.helper.waitForEvent(S,this,ge.Events.Page);await Promise.race([I.promise,this._closePromise])}const j=this.possiblyUninitializedPages()[0];if(!j)return;const y=await S.race(j.waitForInitializedOrError());if(y instanceof Error)throw y;return await j.mainFrame()._waitForLoadState(S,"load"),j}async _loadDefaultContext(S){const j=await this._loadDefaultContextAsIs(S);if(!j)return;const y=this._browser.options.name;(this._options.isMobile&&y==="chromium"||this._options.locale&&y==="webkit")&&(await this.newPage(S,!1),await j.close())}_authenticateProxyViaHeader(){const S=this._options.proxy||this._browser.options.proxy||{username:void 0,password:void 0},{username:j,password:y}=S;if(j){this._options.httpCredentials={username:j,password:y};const I=Buffer.from(`${j}:${y}`).toString("base64");this._options.extraHTTPHeaders=m.mergeHeaders([this._options.extraHTTPHeaders,m.singleHeader("Proxy-Authorization",`Basic ${I}`)])}}_authenticateProxyViaCredentials(){const S=this._options.proxy||this._browser.options.proxy;if(!S)return;const{username:j,password:y}=S;j&&(this._options.httpCredentials={username:j,password:y||""})}async addInitScript(S,j){const y=new c.InitScript(j);this.initScripts.push(y),S==null||S.cleanupWhenAborted(()=>this.removeInitScripts([y]));const I=this.doAddInitScript(y);return S?await S.race(I):await I,y}async removeInitScripts(S){const j=new Set(S);this.initScripts=this.initScripts.filter(y=>!j.has(y)),await this.doRemoveInitScripts(S)}async addRequestInterceptor(S,j){this.requestInterceptors.push(j),await this.doUpdateRequestInterception()}async removeRequestInterceptor(S){const j=this.requestInterceptors.indexOf(S);j!==-1&&(this.requestInterceptors.splice(j,1),await this.notifyRoutesInFlightAboutRemovedHandler(S),await this.doUpdateRequestInterception())}isClosingOrClosed(){return this._closedStatus!=="open"}async _deleteAllDownloads(){await Promise.all(Array.from(this._downloads).map(S=>S.artifact.deleteOnContextClose()))}async _deleteAllTempDirs(){await Promise.all(this._tempDirs.map(async S=>await w.default.promises.unlink(S).catch(j=>{})))}setCustomCloseHandler(S){this._customCloseHandler=S}async close(S){if(this._closedStatus==="open"){S.reason&&(this._closeReason=S.reason),this.emit(ge.Events.BeforeClose),this._closedStatus="closing";for(const y of this._harRecorders.values())await y.flush();await this.tracing.flush();const j=[];for(const{context:y,artifact:I}of this._browser._idToVideo.values())y===this&&j.push(I.finishedPromise());this._customCloseHandler?await this._customCloseHandler():await this.doClose(S.reason),j.push(this._deleteAllDownloads()),j.push(this._deleteAllTempDirs()),await Promise.all(j),this._customCloseHandler||this._didCloseInternal()}await this._closePromise}async newPage(S,j){const y=await S.raceWithCleanup(this.doCreateNewPage(j),D=>D.close()),I=await S.race(y.waitForInitializedOrError());if(I instanceof l.Page){if(I.isClosed())throw new Error("Page has been closed.");return I}throw I}addVisitedOrigin(S){this._origins.add(S)}async storageState(S,j=!1){var ie,he;const y={cookies:await this.cookies(),origins:[]},I=new Set(this._origins),D=`(() => {
      const module = {};
      ${p.source}
      const script = new (module.exports.StorageScript())(${this._browser.options.name==="firefox"});
      return script.collect(${j});
    })()`;for(const me of this.pages()){const ye=me.mainFrame().origin();if(!(!ye||!I.has(ye)))try{const Se=await me.mainFrame().nonStallingEvaluateInExistingContext(D,"utility");(Se.localStorage.length||(ie=Se.indexedDB)!=null&&ie.length)&&y.origins.push({origin:ye,localStorage:Se.localStorage,indexedDB:Se.indexedDB}),I.delete(ye)}catch{}}if(I.size){const me=await this.newPage(S,!0);await me.addRequestInterceptor(S,ye=>{ye.fulfill({body:"<html></html>"}).catch(()=>{})},"prepend");for(const ye of I){const Se=me.mainFrame();await Se.gotoImpl(S,ye,{});const Oe=await S.race(Se.evaluateExpression(D,{world:"utility"}));(Oe.localStorage.length||(he=Oe.indexedDB)!=null&&he.length)&&y.origins.push({origin:ye,localStorage:Oe.localStorage,indexedDB:Oe.indexedDB})}await me.close()}return y}async _resetStorage(S){var ie,he;const j=this._origins,y=new Map(((he=(ie=this._options.storageState)==null?void 0:ie.origins)==null?void 0:he.map(me=>[me.origin,me]))||[]);if(!j.size&&!y.size)return;let I=this.pages()[0];I=I||await this.newPage(S,!1);const D=me=>{me.fulfill({body:"<html></html>"}).catch(()=>{})};S.cleanupWhenAborted(()=>I.removeRequestInterceptor(D)),await I.addRequestInterceptor(S,D,"prepend");for(const me of new Set([...j,...y.keys()])){const ye=I.mainFrame();await ye.gotoImpl(S,me,{}),await S.race(ye.resetStorageForCurrentOriginBestEffort(y.get(me)))}await I.removeRequestInterceptor(D),this._origins=new Set([...y.keys()])}isSettingStorageState(){return this._settingStorageState}async setStorageState(S,j){this._settingStorageState=!0;try{if(j.cookies&&await S.race(this.addCookies(j.cookies)),j.origins&&j.origins.length){const y=await this.newPage(S,!0);await y.addRequestInterceptor(S,I=>{I.fulfill({body:"<html></html>"}).catch(()=>{})},"prepend");for(const I of j.origins){const D=y.mainFrame();await D.gotoImpl(S,I.origin,{});const ie=`(() => {
            const module = {};
            ${p.source}
            const script = new (module.exports.StorageScript())(${this._browser.options.name==="firefox"});
            return script.restore(${JSON.stringify(I)});
          })()`;await S.race(D.evaluateExpression(ie,{world:"utility"}))}await y.close()}}finally{this._settingStorageState=!1}}async extendInjectedScript(S,j){const y=D=>D.extendInjectedScript(S,j).catch(()=>{}),I=D=>(D.on(l.Page.Events.InternalFrameNavigatedToNewDocument,y),Promise.all(D.frames().map(y)));return this.on(ge.Events.Page,I),Promise.all(this.pages().map(I))}async safeNonStallingEvaluateInAllFrames(S,j,y={}){await Promise.all(this.pages().map(I=>I.safeNonStallingEvaluateInAllFrames(S,j,y)))}harStart(S,j){const y=(0,u.createGuid)();return this._harRecorders.set(y,new n.HarRecorder(this,S,j)),y}async harExport(S){return this._harRecorders.get(S||"").export()}addRouteInFlight(S){this._routesInFlight.add(S)}removeRouteInFlight(S){this._routesInFlight.delete(S)}async notifyRoutesInFlightAboutRemovedHandler(S){await Promise.all([...this._routesInFlight].map(j=>j.removeHandler(S)))}};ge.Events={Console:"console",Close:"close",Page:"page",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",RequestAborted:"requestaborted",RequestFulfilled:"requestfulfilled",RequestContinued:"requestcontinued",BeforeClose:"beforeclose",VideoStarted:"videostarted",RecorderEvent:"recorderevent"};let O=ge;function z(ne,S){if(ne.noDefaultViewport&&ne.deviceScaleFactor!==void 0)throw new Error('"deviceScaleFactor" option is not supported with null "viewport"');if(ne.noDefaultViewport&&ne.isMobile)throw new Error('"isMobile" option is not supported with null "viewport"');if(ne.acceptDownloads===void 0&&S.name!=="electron"?ne.acceptDownloads="accept":ne.acceptDownloads===void 0&&S.name==="electron"&&(ne.acceptDownloads="internal-browser-default"),!ne.viewport&&!ne.noDefaultViewport&&(ne.viewport={width:1280,height:720}),ne.recordVideo){if(!ne.recordVideo.size)if(ne.noDefaultViewport)ne.recordVideo.size={width:800,height:600};else{const j=ne.viewport,y=Math.min(1,800/Math.max(j.width,j.height));ne.recordVideo.size={width:Math.floor(j.width*y),height:Math.floor(j.height*y)}}ne.recordVideo.size.width&=-2,ne.recordVideo.size.height&=-2}ne.proxy&&(ne.proxy=J(ne.proxy)),$(ne.geolocation)}function $(ne){if(!ne)return;ne.accuracy=ne.accuracy||0;const{longitude:S,latitude:j,accuracy:y}=ne;if(S<-180||S>180)throw new Error("geolocation.longitude: precondition -180 <= LONGITUDE <= 180 failed.");if(j<-90||j>90)throw new Error("geolocation.latitude: precondition -90 <= LATITUDE <= 90 failed.");if(y<0)throw new Error("geolocation.accuracy: precondition 0 <= ACCURACY failed.")}function q(ne){if(ne)for(const S of ne){if(!S.origin)throw new Error("clientCertificates.origin is required");if(!S.cert&&!S.key&&!S.passphrase&&!S.pfx)throw new Error("None of cert, key, passphrase or pfx is specified");if(S.cert&&!S.key)throw new Error("cert is specified without key");if(!S.cert&&S.key)throw new Error("key is specified without cert");if(S.pfx&&(S.cert||S.key))throw new Error("pfx is specified together with cert, key or passphrase")}}function J(ne){let{server:S,bypass:j}=ne,y;try{y=new URL(S),(!y.host||!y.protocol)&&(y=new URL("http://"+S))}catch{y=new URL("http://"+S)}if(y.protocol==="socks4:"&&(ne.username||ne.password))throw new Error("Socks4 proxy protocol does not support authentication");if(y.protocol==="socks5:"&&(ne.username||ne.password))throw new Error("Browser does not support socks5 proxy authentication");return S=y.protocol+"//"+y.host,j&&(j=j.split(",").map(I=>I.trim()).join(",")),{...ne,server:S,bypass:j}}const le=["colorScheme","forcedColors","reducedMotion","contrast","screen","userAgent","viewport","testIdAttributeName"],_e={noDefaultViewport:!1,ignoreHTTPSErrors:!1,javaScriptEnabled:!0,bypassCSP:!1,offline:!1,isMobile:!1,hasTouch:!1,acceptDownloads:"accept",strictSelectors:!1,serviceWorkers:"allow",locale:"en-US"};return Vd}var Kd,vb;function PT(){if(vb)return Kd;vb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{MultipartFormData:()=>U}),Kd=te(P);var e=Ar();class U{constructor(){this._chunks=[],this._boundary=w()}contentTypeHeader(){return`multipart/form-data; boundary=${this._boundary}`}addField(u,_){this._beginMultiPartHeader(u),this._finishMultiPartHeader(),this._chunks.push(Buffer.from(_)),this._finishMultiPartField()}addFileField(u,_){this._beginMultiPartHeader(u),this._chunks.push(Buffer.from(`; filename="${_.name}"`)),this._chunks.push(Buffer.from(`\r
content-type: ${_.mimeType||e.mime.getType(_.name)||"application/octet-stream"}`)),this._finishMultiPartHeader(),this._chunks.push(_.buffer),this._finishMultiPartField()}finish(){return this._addBoundary(!0),Buffer.concat(this._chunks)}_beginMultiPartHeader(u){this._addBoundary(),this._chunks.push(Buffer.from(`content-disposition: form-data; name="${u}"`))}_finishMultiPartHeader(){this._chunks.push(Buffer.from(`\r
\r
`))}_finishMultiPartField(){this._chunks.push(Buffer.from(`\r
`))}_addBoundary(u){this._chunks.push(Buffer.from("--"+this._boundary)),u&&this._chunks.push(Buffer.from("--")),this._chunks.push(Buffer.from(`\r
`))}}const C=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,65,66];function w(){const g=[];for(let u=0;u<16;u++)g.push(C[Math.floor(Math.random()*C.length)]);return"----WebKitFormBoundary"+String.fromCharCode(...g)}return Kd}var Gd,wb;function Fo(){if(wb)return Gd;wb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(j,y)=>{for(var I in y)r(j,I,{get:y[I],enumerable:!0})},P=(j,y,I,D)=>{if(y&&typeof y=="object"||typeof y=="function")for(let ie of E(y))!V.call(j,ie)&&ie!==I&&r(j,ie,{get:()=>y[ie],enumerable:!(D=i(y,ie))||D.enumerable});return j},e=(j,y,I)=>(I=j!=null?t(R(j)):{},P(!j||!j.__esModule?r(I,"default",{value:j,enumerable:!0}):I,j)),U=j=>P(r({},"__esModule",{value:!0}),j),C={};te(C,{APIRequestContext:()=>T,BrowserContextAPIRequestContext:()=>p,GlobalAPIRequestContext:()=>O}),Gd=U(C);var w=e(Je),g=e(Je),u=Je,_=Je,f=e(Je),d=nr(),v=tn(),a=xi(),s=Ir(),n=ly(),o=PT(),h=Tr(),m=bn(),c=pf(),l=zs(),x=by();const S=class S extends h.SdkObject{constructor(y){super(y,"request-context"),this.fetchResponses=new Map,this.fetchLog=new Map,S.allInstances.add(this)}static findResponseBody(y){for(const I of S.allInstances){const D=I.fetchResponses.get(y);if(D)return D}}_disposeImpl(){S.allInstances.delete(this),this.fetchResponses.clear(),this.fetchLog.clear(),this.emit(S.Events.Dispose)}disposeResponse(y){this.fetchResponses.delete(y),this.fetchLog.delete(y)}_storeResponseBody(y){const I=(0,v.createGuid)();return this.fetchResponses.set(I,y),I}async fetch(y,I){var dt;const D=this._defaultOptions(),ie={"user-agent":D.userAgent,accept:"*/*","accept-encoding":"gzip,deflate,br"};if(D.extraHTTPHeaders)for(const{name:yt,value:nt}of D.extraHTTPHeaders)le(ie,yt,nt);if(I.headers)for(const{name:yt,value:nt}of I.headers)le(ie,yt,nt);const he=new URL((0,d.constructURLBasedOnBaseURL)(D.baseURL,I.url));if(I.encodedParams)he.search=I.encodedParams;else if(I.params)for(const{name:yt,value:nt}of I.params)he.searchParams.append(yt,nt);const me=this._getHttpCredentials(he);(me==null?void 0:me.send)==="always"&&ne(ie,me);const ye=((dt=I.method)==null?void 0:dt.toUpperCase())||"GET",Se=D.proxy;let Oe;(Se==null?void 0:Se.server)!=="per-context"&&(Oe=(0,d.createProxyAgent)(Se,he));let Pe=I.maxRedirects??D.maxRedirects??20;Pe=Pe===0?-1:Pe;const Ne={method:ye,headers:ie,agent:Oe,maxRedirects:Pe,...(0,c.getMatchingTLSOptionsForOrigin)(this._defaultOptions().clientCertificates,he.origin),__testHookLookup:I.__testHookLookup};(I.ignoreHTTPSErrors||D.ignoreHTTPSErrors)&&(Ne.rejectUnauthorized=!1);const Le=J(I,ie);Le&&le(ie,"content-length",String(Le.byteLength));const qe=await this._sendRequestWithRetries(y,he,Ne,Le,I.maxRetries),Ge=this._storeResponseBody(qe.body);if(this.fetchLog.set(Ge,y.metadata.log),(I.failOnStatusCode!==void 0?I.failOnStatusCode:!!D.failOnStatusCode)&&(qe.status<200||qe.status>=400)){let yt="";if(qe.body.byteLength){let nt=qe.body.toString("utf8");nt.length>1e3&&(nt=nt.substring(0,997)+"..."),yt=`
Response text:
${nt}`}throw new Error(`${qe.status} ${qe.statusText}${yt}`)}return{...qe,fetchUid:Ge}}_parseSetCookieHeader(y,I){if(!I)return[];const D=new URL(y),ie="/"+D.pathname.substr(1).split("/").slice(0,-1).join("/"),he=[];for(const me of I){const ye=q(me);ye&&(ye.domain?(0,d.assert)(ye.domain.startsWith(".")||!ye.domain.includes(".")):ye.domain=D.hostname,(0,n.domainMatches)(D.hostname,ye.domain)&&((!ye.path||!ye.path.startsWith("/"))&&(ye.path=ie),he.push(ye)))}return he}async _updateRequestCookieHeader(y,I,D){if(_e(D,"cookie")!==void 0)return;const he=(await y.race(this._cookies(I))).filter(me=>new n.Cookie(me).matches(I));if(he.length){const me=he.map(ye=>`${ye.name}=${ye.value}`);le(D,"cookie",me.join("; "))}}async _sendRequestWithRetries(y,I,D,ie,he){he??(he=0);let me=250;for(let ye=0;ye<=he;ye++)try{return await this._sendRequest(y,I,D,ie)}catch(Se){if((0,m.isAbortError)(Se)||(Se=(0,c.rewriteOpenSSLErrorIfNeeded)(Se),he===0))throw Se;if(ye===he)throw new Error(`Failed after ${ye+1} attempt(s): ${Se}`);if(Se.code!=="ECONNRESET")throw Se;y.log(`  Received ECONNRESET, will retry after ${me}ms.`),await y.wait(me),me*=2}throw new Error("Unreachable")}async _sendRequest(y,I,D,ie){var Se;await this._updateRequestCookieHeader(y,I,D.headers);const he=((Se=_e(D.headers,"cookie"))==null?void 0:Se.split(";").map(Oe=>{const[Pe,Ne]=Oe.split("=").map(Le=>Le.trim());return{name:Pe,value:Ne}}))||[],me={url:I,method:D.method,headers:D.headers,cookies:he,postData:ie};this.emit(S.Events.Request,me);const ye=new Promise((Oe,Pe)=>{const Ne=(I.protocol==="https:"?g.default:w.default).request,Le=D.agent||(I.protocol==="https:"?l.httpsHappyEyeballsAgent:l.httpHappyEyeballsAgent),qe={...D,agent:Le},Ge=(0,d.monotonicTime)();let ot,dt,yt,nt,gt,Ut,Xt,st;const xe=[],be=Ne(I,qe,async ve=>{const Ce=(0,d.monotonicTime)(),Ke=pt=>{const Rt=(0,d.monotonicTime)(),Kt=nt??yt,Ve={send:gt-Ge,wait:Ce-gt,receive:Rt-Ce,dns:dt?dt-Ge:-1,connect:Kt?Kt-Ge:-1,ssl:nt?nt-yt:-1,blocked:ot?ot-Ge:-1},ct={requestEvent:me,httpVersion:ve.httpVersion,statusCode:ve.statusCode||0,statusMessage:ve.statusMessage||"",headers:ve.headers,rawHeaders:ve.rawHeaders,cookies:ze,body:pt,timings:Ve,serverIPAddress:Ut,serverPort:Xt,securityDetails:st};this.emit(S.Events.RequestFinished,ct)};y.log(`← ${ve.statusCode} ${ve.statusMessage}`);for(const[pt,Rt]of Object.entries(ve.headers))y.log(`  ${pt}: ${Rt}`);const ze=this._parseSetCookieHeader(ve.url||I.toString(),ve.headers["set-cookie"]);if(ze.length)try{await this._addCookies(ze)}catch{await Promise.all(ze.map(Rt=>this._addCookies([Rt]).catch(()=>{})))}if($.includes(ve.statusCode)&&D.maxRedirects>=0){if(D.maxRedirects===0){Pe(new Error("Max redirect count exceeded")),be.destroy();return}const pt={...D.headers};ge(pt,"cookie");const Rt=ve.statusCode;let Kt=D.method;((Rt===301||Rt===302)&&Kt==="POST"||Rt===303&&!["GET","HEAD"].includes(Kt))&&(Kt="GET",ie=void 0,ge(pt,"content-encoding"),ge(pt,"content-language"),ge(pt,"content-length"),ge(pt,"content-location"),ge(pt,"content-type"));const Ve={method:Kt,headers:pt,agent:D.agent,maxRedirects:D.maxRedirects-1,...(0,c.getMatchingTLSOptionsForOrigin)(this._defaultOptions().clientCertificates,I.origin),__testHookLookup:D.__testHookLookup};D.rejectUnauthorized===!1&&(Ve.rejectUnauthorized=!1);const ct=Buffer.from(ve.headers.location??"","latin1").toString("utf8");if(ct){let lt;try{lt=new URL(ct,I)}catch{Pe(new Error(`uri requested responds with an invalid redirect URL: ${ct}`)),be.destroy();return}pt.host&&(pt.host=lt.host),Ke(),Oe(this._sendRequest(y,lt,Ve,ie)),be.destroy();return}}if(ve.statusCode===401&&!_e(D.headers,"authorization")){const pt=ve.headers["www-authenticate"],Rt=this._getHttpCredentials(I);if(pt!=null&&pt.trim().startsWith("Basic")&&Rt){ne(D.headers,Rt),Ke(),Oe(this._sendRequest(y,I,D,ie)),be.destroy();return}}ve.on("aborted",()=>Pe(new Error("aborted")));const Re=[],Be=()=>{const pt=Buffer.concat(Re);Ke(pt),Oe({url:ve.url||I.toString(),status:ve.statusCode||0,statusText:ve.statusMessage||"",headers:z(ve.rawHeaders),body:pt})};let it=ve,Qe;const Et=ve.headers["content-encoding"];if(Et==="gzip"||Et==="x-gzip"?Qe=f.createGunzip({flush:f.constants.Z_SYNC_FLUSH,finishFlush:f.constants.Z_SYNC_FLUSH}):Et==="br"?Qe=f.createBrotliDecompress({flush:f.constants.BROTLI_OPERATION_FLUSH,finishFlush:f.constants.BROTLI_OPERATION_FLUSH}):Et==="deflate"&&(Qe=f.createInflate()),Qe){const pt=new b(Be);it=(0,u.pipeline)(ve,pt,Qe,Rt=>{Rt&&Pe(new Error(`failed to decompress '${Et}' encoding: ${Rt.message}`))}),it.on("error",Rt=>Pe(new Error(`failed to decompress '${Et}' encoding: ${Rt}`)))}else it.on("error",Pe);it.on("data",pt=>Re.push(pt)),it.on("end",Be)});if(be.on("error",Pe),y.cleanupWhenAborted(()=>be.destroy()),xe.push(d.eventsHelper.addEventListener(this,S.Events.Dispose,()=>{Pe(new Error("Request context disposed.")),be.destroy()})),be.on("close",()=>d.eventsHelper.removeEventListeners(xe)),be.on("socket",ve=>{if(be.reusedSocket){ot=(0,d.monotonicTime)();return}const Ce=(0,l.timingForSocket)(ve);dt=Ce.dnsLookupAt,yt=Ce.tcpConnectionAt,xe.push(d.eventsHelper.addEventListener(ve,"lookup",()=>{dt=(0,d.monotonicTime)()}),d.eventsHelper.addEventListener(ve,"connect",()=>{yt=(0,d.monotonicTime)()}),d.eventsHelper.addEventListener(ve,"secureConnect",()=>{if(nt=(0,d.monotonicTime)(),ve instanceof _.TLSSocket){const Ke=ve.getPeerCertificate();st={protocol:ve.getProtocol()??void 0,subjectName:Ke.subject.CN,validFrom:new Date(Ke.valid_from).getTime()/1e3,validTo:new Date(Ke.valid_to).getTime()/1e3,issuer:Ke.issuer.CN}}})),Ut=ve.remoteAddress,Xt=ve.remotePort}),be.on("finish",()=>{gt=(0,d.monotonicTime)()}),y.log(`→ ${D.method} ${I.toString()}`),D.headers)for(const[ve,Ce]of Object.entries(D.headers))y.log(`  ${ve}: ${Ce}`);ie&&be.write(ie),be.end()});return y.race(ye)}_getHttpCredentials(y){var I,D,ie;if(!((I=this._defaultOptions().httpCredentials)!=null&&I.origin)||y.origin.toLowerCase()===((ie=(D=this._defaultOptions().httpCredentials)==null?void 0:D.origin)==null?void 0:ie.toLowerCase()))return this._defaultOptions().httpCredentials}};S.Events={Dispose:"dispose",Request:"request",RequestFinished:"requestfinished"},S.allInstances=new Set;let T=S;class b extends u.Transform{constructor(y){super(),this._receivedSomeData=!1,this._onEmptyStreamCallback=y}_transform(y,I,D){this._receivedSomeData=!0,D(null,y)}_flush(y){this._receivedSomeData?y(null):this._onEmptyStreamCallback()}}class p extends T{constructor(y){super(y),this._context=y,y.once(s.BrowserContext.Events.Close,()=>this._disposeImpl())}tracing(){return this._context.tracing}async dispose(y){this._closeReason=y.reason,this.fetchResponses.clear()}_defaultOptions(){return{userAgent:this._context._options.userAgent||this._context._browser.userAgent(),extraHTTPHeaders:this._context._options.extraHTTPHeaders,failOnStatusCode:void 0,httpCredentials:this._context._options.httpCredentials,proxy:this._context._options.proxy||this._context._browser.options.proxy,ignoreHTTPSErrors:this._context._options.ignoreHTTPSErrors,baseURL:this._context._options.baseURL,clientCertificates:this._context._options.clientCertificates}}async _addCookies(y){await this._context.addCookies(y)}async _cookies(y){return await this._context.cookies(y.toString())}async storageState(y,I){return this._context.storageState(y,I)}}class O extends T{constructor(y,I){var D;super(y),this._cookieStore=new n.CookieStore,this.attribution.context=this,I.storageState&&(this._origins=(D=I.storageState.origins)==null?void 0:D.map(ie=>({indexedDB:[],...ie})),this._cookieStore.addCookies(I.storageState.cookies||[])),(0,s.verifyClientCertificates)(I.clientCertificates),this._options={baseURL:I.baseURL,userAgent:I.userAgent||(0,a.getUserAgent)(),extraHTTPHeaders:I.extraHTTPHeaders,failOnStatusCode:!!I.failOnStatusCode,ignoreHTTPSErrors:!!I.ignoreHTTPSErrors,maxRedirects:I.maxRedirects,httpCredentials:I.httpCredentials,clientCertificates:I.clientCertificates,proxy:I.proxy},this._tracing=new x.Tracing(this,I.tracesDir)}tracing(){return this._tracing}async dispose(y){this._closeReason=y.reason,await this._tracing.flush(),await this._tracing.deleteTmpTracesDir(),this._disposeImpl()}_defaultOptions(){return this._options}async _addCookies(y){this._cookieStore.addCookies(y)}async _cookies(y){return this._cookieStore.cookies(y)}async storageState(y,I=!1){return{cookies:this._cookieStore.allCookies(),origins:(this._origins||[]).map(D=>({...D,indexedDB:I?D.indexedDB:[]}))}}}function z(j){const y=[];for(let I=0;I<j.length;I+=2)y.push({name:j[I],value:j[I+1]});return y}const $=[301,302,303,307,308];function q(j){const y=(0,n.parseRawCookie)(j);return y?{domain:"",path:"",expires:-1,httpOnly:!1,secure:!1,sameSite:"Lax",...y}:null}function J(j,y){if((0,d.assert)((j.postData?1:0)+(j.jsonData?1:0)+(j.formData?1:0)+(j.multipartData?1:0)<=1,"Only one of 'data', 'form' or 'multipart' can be specified"),j.jsonData!==void 0)return le(y,"content-type","application/json",!0),Buffer.from(j.jsonData,"utf8");if(j.formData){const I=new URLSearchParams;for(const{name:D,value:ie}of j.formData)I.append(D,ie);return le(y,"content-type","application/x-www-form-urlencoded",!0),Buffer.from(I.toString(),"utf8")}else if(j.multipartData){const I=new o.MultipartFormData;for(const D of j.multipartData)D.file?I.addFileField(D.name,D.file):D.value&&I.addField(D.name,D.value);return le(y,"content-type",I.contentTypeHeader(),!0),I.finish()}else if(j.postData!==void 0)return le(y,"content-type","application/octet-stream",!0),j.postData}function le(j,y,I,D=!1){const ie=Object.entries(j).find(he=>he[0].toLowerCase()===y.toLowerCase());ie?D||(j[ie[0]]=I):j[y]=I}function _e(j,y){const I=Object.entries(j).find(D=>D[0].toLowerCase()===y.toLowerCase());return I?I[1]:void 0}function ge(j,y){delete j[y]}function ne(j,y){const{username:I,password:D}=y,ie=Buffer.from(`${I||""}:${D||""}`).toString("base64");le(j,"authorization",`Basic ${ie}`)}return Gd}var Jd,yb;function kT(){if(yb)return Jd;yb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(u,_)=>{for(var f in _)t(u,f,{get:_[f],enumerable:!0})},V=(u,_,f,d)=>{if(_&&typeof _=="object"||typeof _=="function")for(let v of i(_))!E.call(u,v)&&v!==f&&t(u,v,{get:()=>_[v],enumerable:!(d=r(_,v))||d.enumerable});return u},te=u=>V(t({},"__esModule",{value:!0}),u),P={};R(P,{StreamDispatcher:()=>g}),Jd=te(P);var e=$r(),U=Fr(),C=Tr();class w extends C.SdkObject{constructor(_,f){super(_,"stream"),this.stream=f}}class g extends e.Dispatcher{constructor(_,f){super(_,new w(_._object,f),"Stream",{}),this._type_Stream=!0,this._ended=!1,f.once("end",()=>this._ended=!0),f.once("error",()=>this._ended=!0)}async read(_,f){const d=this._object.stream;if(this._ended)return{binary:Buffer.from("")};if(!d.readableLength){const a=new U.ManualPromise,s=()=>a.resolve();d.on("readable",s),d.on("end",s),d.on("error",s),await f.race(a).finally(()=>{d.off("readable",s),d.off("end",s),d.off("error",s)})}return{binary:d.read(Math.min(d.readableLength,_.size||d.readableLength))||Buffer.from("")}}async close(_,f){this._object.stream.destroy()}}return Jd}var Yd,Sb;function Bo(){if(Sb)return Yd;Sb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},P=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!V.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},e=(d,v,a)=>(a=d!=null?t(R(d)):{},P(!d||!d.__esModule?r(a,"default",{value:d,enumerable:!0}):a,d)),U=d=>P(r({},"__esModule",{value:!0}),d),C={};te(C,{ArtifactDispatcher:()=>f}),Yd=U(C);var w=e(Je),g=$r(),u=kT(),_=Ln();class f extends g.Dispatcher{constructor(v,a){super(v,a,"Artifact",{absolutePath:a.localPath()}),this._type_Artifact=!0}static from(v,a){return f.fromNullable(v,a)}static fromNullable(v,a){return a?v.connection.existingDispatcher(a)||new f(v,a):void 0}async pathAfterFinished(v,a){return{value:await a.race(this._object.localPathAfterFinished())}}async saveAs(v,a){return await a.race(new Promise((s,n)=>{this._object.saveAs(async(o,h)=>{if(h){n(h);return}try{await(0,_.mkdirIfNeeded)(v.path),await w.default.promises.copyFile(o,v.path),s()}catch(m){n(m)}})}))}async saveAsStream(v,a){return await a.race(new Promise((s,n)=>{this._object.saveAs(async(o,h)=>{if(h){n(h);return}try{const m=w.default.createReadStream(o,{highWaterMark:1048576}),c=new u.StreamDispatcher(this,m);s({stream:c}),await new Promise(l=>{m.on("close",l),m.on("end",l),m.on("error",l)})}catch(m){n(m)}})}))}async stream(v,a){const s=await a.race(this._object.localPathAfterFinished()),n=w.default.createReadStream(s,{highWaterMark:1024*1024});return{stream:new u.StreamDispatcher(this,n)}}async failure(v,a){return{error:await a.race(this._object.failureError())||void 0}}async cancel(v,a){await a.race(this._object.cancel())}async delete(v,a){a.metadata.potentiallyClosesScope=!0,await a.race(this._object.delete()),this._dispose()}}return Yd}var Xd,xb;function vy(){if(xb)return Xd;xb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{CDPSessionDispatcher:()=>C}),Xd=te(P);var e=$r(),U=Lo();class C extends e.Dispatcher{constructor(g,u){super(g,u,"CDPSession",{}),this._type_CDPSession=!0,this.addObjectListener(U.CDPSession.Events.Event,({method:_,params:f})=>this._dispatchEvent("event",{method:_,params:f})),this.addObjectListener(U.CDPSession.Events.Closed,()=>this._dispose())}async send(g,u){return{result:await u.race(this._object.send(g.method,g.params))}}async detach(g,u){u.metadata.potentiallyClosesScope=!0,await this._object.detach()}}return Xd}var Qd,Eb;function ea(){if(Eb)return Qd;Eb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{JSHandleDispatcher:()=>w,parseArgument:()=>g,parseValue:()=>u,serializeResult:()=>_}),Qd=te(P);var e=$r(),U=Ho(),C=No();class w extends e.Dispatcher{constructor(d,v){super(d,v,v.asElement()?"ElementHandle":"JSHandle",{preview:v.toString()}),this._type_JSHandle=!0,v._setPreviewCallback(a=>this._dispatchEvent("previewUpdated",{preview:a}))}static fromJSHandle(d,v){return d.connection.existingDispatcher(v)||new w(d,v)}async evaluateExpression(d,v){const a=await v.race(this._object.evaluateExpression(d.expression,{isFunction:d.isFunction},g(d.arg)));return{value:_(a)}}async evaluateExpressionHandle(d,v){const a=await v.race(this._object.evaluateExpressionHandle(d.expression,{isFunction:d.isFunction},g(d.arg)));return{handle:U.ElementHandleDispatcher.fromJSOrElementHandle(this.parentScope(),a)}}async getProperty(d,v){const a=await v.race(this._object.getProperty(d.name));return{handle:U.ElementHandleDispatcher.fromJSOrElementHandle(this.parentScope(),a)}}async getPropertyList(d,v){const a=await v.race(this._object.getProperties()),s=[];for(const[n,o]of a)s.push({name:n,value:U.ElementHandleDispatcher.fromJSOrElementHandle(this.parentScope(),o)});return{properties:s}}async jsonValue(d,v){return{value:_(await v.race(this._object.jsonValue()))}}async dispose(d,v){v.metadata.potentiallyClosesScope=!0,this._object.dispose(),this._dispose()}}function g(f){return(0,C.parseSerializedValue)(f.value,f.handles.map(d=>d._object))}function u(f){return(0,C.parseSerializedValue)(f,[])}function _(f){return(0,C.serializeValue)(f,d=>({fallThrough:d}))}return Qd}var Zd,Ob;function wy(){if(Ob)return Zd;Ob=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{TracingDispatcher:()=>C}),Zd=te(P);var e=Bo(),U=$r();class C extends U.Dispatcher{constructor(g,u){super(g,u,"Tracing",{}),this._type_Tracing=!0}static from(g,u){return g.connection.existingDispatcher(u)||new C(g,u)}async tracingStart(g,u){this._object.start(g)}async tracingStartChunk(g,u){return await this._object.startChunk(u,g)}async tracingGroup(g,u){const{name:_,location:f}=g;this._object.group(_,f,u.metadata)}async tracingGroupEnd(g,u){this._object.groupEnd()}async tracingStopChunk(g,u){const{artifact:_,entries:f}=await this._object.stopChunk(u,g);return{artifact:_?e.ArtifactDispatcher.from(this,_):void 0,entries:f}}async tracingStop(g,u){await this._object.stop(u)}}return Zd}var eh,Tb;function qi(){if(Tb)return eh;Tb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(a,s)=>{for(var n in s)t(a,n,{get:s[n],enumerable:!0})},V=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of i(s))!E.call(a,h)&&h!==n&&t(a,h,{get:()=>s[h],enumerable:!(o=r(s,h))||o.enumerable});return a},te=a=>V(t({},"__esModule",{value:!0}),a),P={};R(P,{APIRequestContextDispatcher:()=>v,RequestDispatcher:()=>u,ResponseDispatcher:()=>_,RouteDispatcher:()=>f,WebSocketDispatcher:()=>d}),eh=te(P);var e=fn(),U=$r(),C=jo(),w=Uo(),g=wy();class u extends U.Dispatcher{static from(s,n){return s.connection.existingDispatcher(n)||new u(s,n)}static fromNullable(s,n){return n?u.from(s,n):void 0}constructor(s,n){var x;const o=n.postDataBuffer(),h=n.frame(),m=(x=n.frame())==null?void 0:x._page,c=m?s.connection.existingDispatcher(m):null,l=h?C.FrameDispatcher.from(s,h):null;super(c||l||s,n,"Request",{frame:C.FrameDispatcher.fromNullable(s,n.frame()),serviceWorker:w.WorkerDispatcher.fromNullable(s,n.serviceWorker()),url:n.url(),resourceType:n.resourceType(),method:n.method(),postData:o===null?void 0:o,headers:n.headers(),isNavigationRequest:n.isNavigationRequest(),redirectedFrom:u.fromNullable(s,n.redirectedFrom())}),this._type_Request=!0,this._browserContextDispatcher=s}async rawRequestHeaders(s,n){return{headers:await n.race(this._object.rawRequestHeaders())}}async response(s,n){return{response:_.fromNullable(this._browserContextDispatcher,await n.race(this._object.response()))}}}class _ extends U.Dispatcher{constructor(s,n){super(s,n,"Response",{request:s,url:n.url(),status:n.status(),statusText:n.statusText(),headers:n.headers(),timing:n.timing(),fromServiceWorker:n.fromServiceWorker()}),this._type_Response=!0}static from(s,n){const o=s.connection.existingDispatcher(n),h=u.from(s,n.request());return o||new _(h,n)}static fromNullable(s,n){return n?_.from(s,n):void 0}async body(s,n){return{binary:await n.race(this._object.body())}}async securityDetails(s,n){return{value:await n.race(this._object.securityDetails())||void 0}}async serverAddr(s,n){return{value:await n.race(this._object.serverAddr())||void 0}}async rawResponseHeaders(s,n){return{headers:await n.race(this._object.rawResponseHeaders())}}async sizes(s,n){return{sizes:await n.race(this._object.sizes())}}}class f extends U.Dispatcher{constructor(s,n){super(s,n,"Route",{request:s}),this._type_Route=!0,this._handled=!1}_checkNotHandled(){if(this._handled)throw new Error("Route is already handled!");this._handled=!0}async continue(s,n){this._checkNotHandled(),await this._object.continue({url:s.url,method:s.method,headers:s.headers,postData:s.postData,isFallback:s.isFallback})}async fulfill(s,n){this._checkNotHandled(),await this._object.fulfill(s)}async abort(s,n){this._checkNotHandled(),await this._object.abort(s.errorCode||"failed")}async redirectNavigationRequest(s,n){this._checkNotHandled(),this._object.redirectNavigationRequest(s.url)}}class d extends U.Dispatcher{constructor(s,n){super(s,n,"WebSocket",{url:n.url()}),this._type_EventTarget=!0,this._type_WebSocket=!0,this.addObjectListener(e.WebSocket.Events.FrameSent,o=>this._dispatchEvent("frameSent",o)),this.addObjectListener(e.WebSocket.Events.FrameReceived,o=>this._dispatchEvent("frameReceived",o)),this.addObjectListener(e.WebSocket.Events.SocketError,o=>this._dispatchEvent("socketError",{error:o})),this.addObjectListener(e.WebSocket.Events.Close,()=>this._dispatchEvent("close",{}))}}class v extends U.Dispatcher{constructor(s,n){const o=g.TracingDispatcher.from(s,n.tracing());super(s,n,"APIRequestContext",{tracing:o}),this._type_APIRequestContext=!0,this.adopt(o)}static from(s,n){return s.connection.existingDispatcher(n)||new v(s,n)}static fromNullable(s,n){return n?v.from(s,n):void 0}async storageState(s,n){return await this._object.storageState(n,s.indexedDB)}async dispose(s,n){n.metadata.potentiallyClosesScope=!0,await this._object.dispose(s),this._dispose()}async fetch(s,n){const o=await this._object.fetch(n,s);return{response:{url:o.url,status:o.status,statusText:o.statusText,headers:o.headers,fetchUid:o.fetchUid}}}async fetchResponseBody(s,n){return{binary:this._object.fetchResponses.get(s.fetchUid)}}async fetchLog(s,n){return{log:this._object.fetchLog.get(s.fetchUid)||[]}}async disposeAPIResponse(s,n){this._object.disposeResponse(s.fetchUid)}}return eh}var th,Cb;function jo(){if(Cb)return th;Cb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{FrameDispatcher:()=>d}),th=te(P);var e=hs(),U=$r(),C=Ho(),w=ea(),g=qi(),u=qi(),_=py(),f=Ar();class d extends U.Dispatcher{constructor(a,s){const n=s._page.mainFrame()===s?"MainFrame":"Frame",o=a.connection.existingDispatcher(s._page);super(o||a,s,"Frame",{url:s.url(),name:s.name(),parentFrame:d.fromNullable(a,s.parentFrame()),loadStates:Array.from(s._firedLifecycleEvents)},n),this._type_Frame=!0,this._browserContextDispatcher=a,this._frame=s,this.addObjectListener(e.Frame.Events.AddLifecycle,h=>{this._dispatchEvent("loadstate",{add:h})}),this.addObjectListener(e.Frame.Events.RemoveLifecycle,h=>{this._dispatchEvent("loadstate",{remove:h})}),this.addObjectListener(e.Frame.Events.InternalNavigation,h=>{if(!h.isPublic)return;const m={url:h.url,name:h.name,error:h.error?h.error.message:void 0};h.newDocument&&(m.newDocument={request:u.RequestDispatcher.fromNullable(this._browserContextDispatcher,h.newDocument.request||null)}),this._dispatchEvent("navigated",m)})}static from(a,s){return a.connection.existingDispatcher(s)||new d(a,s)}static fromNullable(a,s){if(s)return d.from(a,s)}async goto(a,s){return{response:g.ResponseDispatcher.fromNullable(this._browserContextDispatcher,await this._frame.goto(s,a.url,a))}}async frameElement(a,s){return{element:C.ElementHandleDispatcher.from(this,await s.race(this._frame.frameElement()))}}async evaluateExpression(a,s){return{value:(0,w.serializeResult)(await s.race(this._frame.evaluateExpression(a.expression,{isFunction:a.isFunction},(0,w.parseArgument)(a.arg))))}}async evaluateExpressionHandle(a,s){return{handle:C.ElementHandleDispatcher.fromJSOrElementHandle(this,await s.race(this._frame.evaluateExpressionHandle(a.expression,{isFunction:a.isFunction},(0,w.parseArgument)(a.arg))))}}async waitForSelector(a,s){return{element:C.ElementHandleDispatcher.fromNullable(this,await this._frame.waitForSelector(s,a.selector,!0,a))}}async dispatchEvent(a,s){return this._frame.dispatchEvent(s,a.selector,a.type,(0,w.parseArgument)(a.eventInit),a)}async evalOnSelector(a,s){return{value:(0,w.serializeResult)(await s.race(this._frame.evalOnSelector(a.selector,!!a.strict,a.expression,a.isFunction,(0,w.parseArgument)(a.arg))))}}async evalOnSelectorAll(a,s){return{value:(0,w.serializeResult)(await s.race(this._frame.evalOnSelectorAll(a.selector,a.expression,a.isFunction,(0,w.parseArgument)(a.arg))))}}async querySelector(a,s){return{element:C.ElementHandleDispatcher.fromNullable(this,await s.race(this._frame.querySelector(a.selector,a)))}}async querySelectorAll(a,s){return{elements:(await s.race(this._frame.querySelectorAll(a.selector))).map(o=>C.ElementHandleDispatcher.from(this,o))}}async queryCount(a,s){return{value:await s.race(this._frame.queryCount(a.selector))}}async content(a,s){return{value:await s.race(this._frame.content())}}async setContent(a,s){return await this._frame.setContent(s,a.html,a)}async addScriptTag(a,s){return{element:C.ElementHandleDispatcher.from(this,await s.race(this._frame.addScriptTag(a)))}}async addStyleTag(a,s){return{element:C.ElementHandleDispatcher.from(this,await s.race(this._frame.addStyleTag(a)))}}async click(a,s){return s.metadata.potentiallyClosesScope=!0,await this._frame.click(s,a.selector,a)}async dblclick(a,s){return await this._frame.dblclick(s,a.selector,a)}async dragAndDrop(a,s){return await this._frame.dragAndDrop(s,a.source,a.target,a)}async tap(a,s){return await this._frame.tap(s,a.selector,a)}async fill(a,s){return await this._frame.fill(s,a.selector,a.value,a)}async focus(a,s){await this._frame.focus(s,a.selector,a)}async blur(a,s){await this._frame.blur(s,a.selector,a)}async textContent(a,s){const n=await this._frame.textContent(s,a.selector,a);return{value:n===null?void 0:n}}async innerText(a,s){return{value:await this._frame.innerText(s,a.selector,a)}}async innerHTML(a,s){return{value:await this._frame.innerHTML(s,a.selector,a)}}async generateLocatorString(a,s){return{value:await this._frame.generateLocatorString(s,a.selector)}}async getAttribute(a,s){const n=await this._frame.getAttribute(s,a.selector,a.name,a);return{value:n===null?void 0:n}}async inputValue(a,s){return{value:await this._frame.inputValue(s,a.selector,a)}}async isChecked(a,s){return{value:await this._frame.isChecked(s,a.selector,a)}}async isDisabled(a,s){return{value:await this._frame.isDisabled(s,a.selector,a)}}async isEditable(a,s){return{value:await this._frame.isEditable(s,a.selector,a)}}async isEnabled(a,s){return{value:await this._frame.isEnabled(s,a.selector,a)}}async isHidden(a,s){return{value:await this._frame.isHidden(s,a.selector,a)}}async isVisible(a,s){return{value:await this._frame.isVisible(s,a.selector,a)}}async hover(a,s){return await this._frame.hover(s,a.selector,a)}async selectOption(a,s){const n=(a.elements||[]).map(o=>o._elementHandle);return{values:await this._frame.selectOption(s,a.selector,n,a.options||[],a)}}async setInputFiles(a,s){return await this._frame.setInputFiles(s,a.selector,a)}async type(a,s){return await this._frame.type(s,a.selector,a.text,a)}async press(a,s){return await this._frame.press(s,a.selector,a.key,a)}async check(a,s){return await this._frame.check(s,a.selector,a)}async uncheck(a,s){return await this._frame.uncheck(s,a.selector,a)}async waitForTimeout(a,s){return await this._frame.waitForTimeout(s,a.waitTimeout)}async waitForFunction(a,s){return{handle:C.ElementHandleDispatcher.fromJSOrElementHandle(this,await this._frame.waitForFunctionExpression(s,a.expression,a.isFunction,(0,w.parseArgument)(a.arg),a))}}async title(a,s){return{value:await s.race(this._frame.title())}}async highlight(a,s){return await this._frame.highlight(s,a.selector)}async expect(a,s){s.metadata.potentiallyClosesScope=!0;let n=a.expectedValue?(0,w.parseArgument)(a.expectedValue):void 0;a.expression==="to.match.aria"&&n&&(n=(0,_.parseAriaSnapshotUnsafe)(f.yaml,n));const o=await this._frame.expect(s,a.selector,{...a,expectedValue:n},a.timeout,h=>(h.received!==void 0&&(h.received=(0,w.serializeResult)(h.received)),h));return o.received!==void 0&&(o.received=(0,w.serializeResult)(o.received)),o}async ariaSnapshot(a,s){return{snapshot:await this._frame.ariaSnapshot(s,a.selector,a)}}}return th}var rh,Pb;function Ho(){if(Pb)return rh;Pb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{ElementHandleDispatcher:()=>w}),rh=te(P);var e=ta(),U=jo(),C=ea();class w extends C.JSHandleDispatcher{constructor(u,_){super(u,_),this._type_ElementHandle=!0,this._elementHandle=_}static from(u,_){return u.connection.existingDispatcher(_)||new w(u,_)}static fromNullable(u,_){if(_)return u.connection.existingDispatcher(_)||new w(u,_)}static fromJSOrElementHandle(u,_){const f=u.connection.existingDispatcher(_);if(f)return f;const d=_.asElement();return d?new w(u,d):new C.JSHandleDispatcher(u,_)}async ownerFrame(u,_){const f=await this._elementHandle.ownerFrame();return{frame:f?U.FrameDispatcher.from(this._browserContextDispatcher(),f):void 0}}async contentFrame(u,_){const f=await _.race(this._elementHandle.contentFrame());return{frame:f?U.FrameDispatcher.from(this._browserContextDispatcher(),f):void 0}}async getAttribute(u,_){const f=await this._elementHandle.getAttribute(_,u.name);return{value:f===null?void 0:f}}async inputValue(u,_){return{value:await this._elementHandle.inputValue(_)}}async textContent(u,_){const f=await this._elementHandle.textContent(_);return{value:f===null?void 0:f}}async innerText(u,_){return{value:await this._elementHandle.innerText(_)}}async innerHTML(u,_){return{value:await this._elementHandle.innerHTML(_)}}async isChecked(u,_){return{value:await this._elementHandle.isChecked(_)}}async isDisabled(u,_){return{value:await this._elementHandle.isDisabled(_)}}async isEditable(u,_){return{value:await this._elementHandle.isEditable(_)}}async isEnabled(u,_){return{value:await this._elementHandle.isEnabled(_)}}async isHidden(u,_){return{value:await this._elementHandle.isHidden(_)}}async isVisible(u,_){return{value:await this._elementHandle.isVisible(_)}}async dispatchEvent(u,_){await this._elementHandle.dispatchEvent(_,u.type,(0,C.parseArgument)(u.eventInit))}async scrollIntoViewIfNeeded(u,_){await this._elementHandle.scrollIntoViewIfNeeded(_)}async hover(u,_){return await this._elementHandle.hover(_,u)}async click(u,_){return await this._elementHandle.click(_,u)}async dblclick(u,_){return await this._elementHandle.dblclick(_,u)}async tap(u,_){return await this._elementHandle.tap(_,u)}async selectOption(u,_){const f=(u.elements||[]).map(d=>d._elementHandle);return{values:await this._elementHandle.selectOption(_,f,u.options||[],u)}}async fill(u,_){return await this._elementHandle.fill(_,u.value,u)}async selectText(u,_){await this._elementHandle.selectText(_,u)}async setInputFiles(u,_){return await this._elementHandle.setInputFiles(_,u)}async focus(u,_){await this._elementHandle.focus(_)}async type(u,_){return await this._elementHandle.type(_,u.text,u)}async press(u,_){return await this._elementHandle.press(_,u.key,u)}async check(u,_){return await this._elementHandle.check(_,u)}async uncheck(u,_){return await this._elementHandle.uncheck(_,u)}async boundingBox(u,_){return{value:await _.race(this._elementHandle.boundingBox())||void 0}}async screenshot(u,_){const f=(u.mask||[]).map(({frame:d,selector:v})=>({frame:d._object,selector:v}));return{binary:await this._elementHandle.screenshot(_,{...u,mask:f})}}async querySelector(u,_){const f=await _.race(this._elementHandle.querySelector(u.selector,u));return{element:w.fromNullable(this.parentScope(),f)}}async querySelectorAll(u,_){return{elements:(await _.race(this._elementHandle.querySelectorAll(u.selector))).map(d=>w.from(this.parentScope(),d))}}async evalOnSelector(u,_){return{value:(0,C.serializeResult)(await _.race(this._elementHandle.evalOnSelector(u.selector,!!u.strict,u.expression,u.isFunction,(0,C.parseArgument)(u.arg))))}}async evalOnSelectorAll(u,_){return{value:(0,C.serializeResult)(await _.race(this._elementHandle.evalOnSelectorAll(u.selector,u.expression,u.isFunction,(0,C.parseArgument)(u.arg))))}}async waitForElementState(u,_){await this._elementHandle.waitForElementState(_,u.state)}async waitForSelector(u,_){return{element:w.fromNullable(this.parentScope(),await this._elementHandle.waitForSelector(_,u.selector,u))}}_browserContextDispatcher(){const u=this.parentScope().parentScope();return u instanceof e.BrowserContextDispatcher?u:u.parentScope()}}return rh}var nh,kb;function AT(){if(kb)return nh;kb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{source:()=>e}),nh=te(P);const e=`
var __commonJS = obj => {
  let required = false;
  let result;
  return function __require() {
    if (!required) {
      required = true;
      let fn;
      for (const name in obj) { fn = obj[name]; break; }
      const module = { exports: {} };
      fn(module.exports, module);
      result = module.exports;
    }
    return result;
  }
};
var __export = (target, all) => {for (var name in all) target[name] = all[name];};
var __toESM = mod => ({ ...mod, 'default': mod });
var __toCommonJS = mod => ({ ...mod, __esModule: true });


// packages/injected/src/webSocketMock.ts
var webSocketMock_exports = {};
__export(webSocketMock_exports, {
  inject: () => inject
});
module.exports = __toCommonJS(webSocketMock_exports);
function inject(globalThis) {
  if (globalThis.__pwWebSocketDispatch)
    return;
  function generateId() {
    const bytes = new Uint8Array(32);
    globalThis.crypto.getRandomValues(bytes);
    const hex = "0123456789abcdef";
    return [...bytes].map((value) => {
      const high = Math.floor(value / 16);
      const low = value % 16;
      return hex[high] + hex[low];
    }).join("");
  }
  function bufferToData(b) {
    let s = "";
    for (let i = 0; i < b.length; i++)
      s += String.fromCharCode(b[i]);
    return { data: globalThis.btoa(s), isBase64: true };
  }
  function stringToBuffer(s) {
    s = globalThis.atob(s);
    const b = new Uint8Array(s.length);
    for (let i = 0; i < s.length; i++)
      b[i] = s.charCodeAt(i);
    return b.buffer;
  }
  function messageToData(message, cb) {
    if (message instanceof globalThis.Blob)
      return message.arrayBuffer().then((buffer) => cb(bufferToData(new Uint8Array(buffer))));
    if (typeof message === "string")
      return cb({ data: message, isBase64: false });
    if (ArrayBuffer.isView(message))
      return cb(bufferToData(new Uint8Array(message.buffer, message.byteOffset, message.byteLength)));
    return cb(bufferToData(new Uint8Array(message)));
  }
  function dataToMessage(data, binaryType) {
    if (!data.isBase64)
      return data.data;
    const buffer = stringToBuffer(data.data);
    return binaryType === "arraybuffer" ? buffer : new Blob([buffer]);
  }
  const binding = globalThis.__pwWebSocketBinding;
  const NativeWebSocket = globalThis.WebSocket;
  const idToWebSocket = /* @__PURE__ */ new Map();
  globalThis.__pwWebSocketDispatch = (request) => {
    const ws = idToWebSocket.get(request.id);
    if (!ws)
      return;
    if (request.type === "connect")
      ws._apiConnect();
    if (request.type === "passthrough")
      ws._apiPassThrough();
    if (request.type === "ensureOpened")
      ws._apiEnsureOpened();
    if (request.type === "sendToPage")
      ws._apiSendToPage(dataToMessage(request.data, ws.binaryType));
    if (request.type === "closePage")
      ws._apiClosePage(request.code, request.reason, request.wasClean);
    if (request.type === "sendToServer")
      ws._apiSendToServer(dataToMessage(request.data, ws.binaryType));
    if (request.type === "closeServer")
      ws._apiCloseServer(request.code, request.reason, request.wasClean);
  };
  const _WebSocketMock = class _WebSocketMock extends EventTarget {
    constructor(url, protocols) {
      var _a, _b;
      super();
      // WebSocket.CLOSED
      this.CONNECTING = 0;
      // WebSocket.CONNECTING
      this.OPEN = 1;
      // WebSocket.OPEN
      this.CLOSING = 2;
      // WebSocket.CLOSING
      this.CLOSED = 3;
      // WebSocket.CLOSED
      this._oncloseListener = null;
      this._onerrorListener = null;
      this._onmessageListener = null;
      this._onopenListener = null;
      this.bufferedAmount = 0;
      this.extensions = "";
      this.protocol = "";
      this.readyState = 0;
      this._origin = "";
      this._passthrough = false;
      this._wsBufferedMessages = [];
      this._binaryType = "blob";
      this.url = new URL(url, globalThis.window.document.baseURI).href.replace(/^http/, "ws");
      this._origin = (_b = (_a = URL.parse(this.url)) == null ? void 0 : _a.origin) != null ? _b : "";
      this._protocols = protocols;
      this._id = generateId();
      idToWebSocket.set(this._id, this);
      binding({ type: "onCreate", id: this._id, url: this.url });
    }
    // --- native WebSocket implementation ---
    get binaryType() {
      return this._binaryType;
    }
    set binaryType(type) {
      this._binaryType = type;
      if (this._ws)
        this._ws.binaryType = type;
    }
    get onclose() {
      return this._oncloseListener;
    }
    set onclose(listener) {
      if (this._oncloseListener)
        this.removeEventListener("close", this._oncloseListener);
      this._oncloseListener = listener;
      if (this._oncloseListener)
        this.addEventListener("close", this._oncloseListener);
    }
    get onerror() {
      return this._onerrorListener;
    }
    set onerror(listener) {
      if (this._onerrorListener)
        this.removeEventListener("error", this._onerrorListener);
      this._onerrorListener = listener;
      if (this._onerrorListener)
        this.addEventListener("error", this._onerrorListener);
    }
    get onopen() {
      return this._onopenListener;
    }
    set onopen(listener) {
      if (this._onopenListener)
        this.removeEventListener("open", this._onopenListener);
      this._onopenListener = listener;
      if (this._onopenListener)
        this.addEventListener("open", this._onopenListener);
    }
    get onmessage() {
      return this._onmessageListener;
    }
    set onmessage(listener) {
      if (this._onmessageListener)
        this.removeEventListener("message", this._onmessageListener);
      this._onmessageListener = listener;
      if (this._onmessageListener)
        this.addEventListener("message", this._onmessageListener);
    }
    send(message) {
      if (this.readyState === _WebSocketMock.CONNECTING)
        throw new DOMException(\`Failed to execute 'send' on 'WebSocket': Still in CONNECTING state.\`);
      if (this.readyState !== _WebSocketMock.OPEN)
        throw new DOMException(\`WebSocket is already in CLOSING or CLOSED state.\`);
      if (this._passthrough) {
        if (this._ws)
          this._apiSendToServer(message);
      } else {
        messageToData(message, (data) => binding({ type: "onMessageFromPage", id: this._id, data }));
      }
    }
    close(code, reason) {
      if (code !== void 0 && code !== 1e3 && (code < 3e3 || code > 4999))
        throw new DOMException(\`Failed to execute 'close' on 'WebSocket': The close code must be either 1000, or between 3000 and 4999. \${code} is neither.\`);
      if (this.readyState === _WebSocketMock.OPEN || this.readyState === _WebSocketMock.CONNECTING)
        this.readyState = _WebSocketMock.CLOSING;
      if (this._passthrough)
        this._apiCloseServer(code, reason, true);
      else
        binding({ type: "onClosePage", id: this._id, code, reason, wasClean: true });
    }
    // --- methods called from the routing API ---
    _apiEnsureOpened() {
      if (!this._ws)
        this._ensureOpened();
    }
    _apiSendToPage(message) {
      this._ensureOpened();
      if (this.readyState !== _WebSocketMock.OPEN)
        throw new DOMException(\`WebSocket is already in CLOSING or CLOSED state.\`);
      this.dispatchEvent(new MessageEvent("message", { data: message, origin: this._origin, cancelable: true }));
    }
    _apiSendToServer(message) {
      if (!this._ws)
        throw new Error("Cannot send a message before connecting to the server");
      if (this._ws.readyState === _WebSocketMock.CONNECTING)
        this._wsBufferedMessages.push(message);
      else
        this._ws.send(message);
    }
    _apiConnect() {
      if (this._ws)
        throw new Error("Can only connect to the server once");
      this._ws = new NativeWebSocket(this.url, this._protocols);
      this._ws.binaryType = this._binaryType;
      this._ws.onopen = () => {
        for (const message of this._wsBufferedMessages)
          this._ws.send(message);
        this._wsBufferedMessages = [];
        this._ensureOpened();
      };
      this._ws.onclose = (event) => {
        this._onWSClose(event.code, event.reason, event.wasClean);
      };
      this._ws.onmessage = (event) => {
        if (this._passthrough)
          this._apiSendToPage(event.data);
        else
          messageToData(event.data, (data) => binding({ type: "onMessageFromServer", id: this._id, data }));
      };
      this._ws.onerror = () => {
        const event = new Event("error", { cancelable: true });
        this.dispatchEvent(event);
      };
    }
    // This method connects to the server, and passes all messages through,
    // as if WebSocketMock was not engaged.
    _apiPassThrough() {
      this._passthrough = true;
      this._apiConnect();
    }
    _apiCloseServer(code, reason, wasClean) {
      if (!this._ws) {
        this._onWSClose(code, reason, wasClean);
        return;
      }
      if (this._ws.readyState === _WebSocketMock.CONNECTING || this._ws.readyState === _WebSocketMock.OPEN)
        this._ws.close(code, reason);
    }
    _apiClosePage(code, reason, wasClean) {
      if (this.readyState === _WebSocketMock.CLOSED)
        return;
      this.readyState = _WebSocketMock.CLOSED;
      this.dispatchEvent(new CloseEvent("close", { code, reason, wasClean, cancelable: true }));
      this._maybeCleanup();
      if (this._passthrough)
        this._apiCloseServer(code, reason, wasClean);
      else
        binding({ type: "onClosePage", id: this._id, code, reason, wasClean });
    }
    // --- internals ---
    _ensureOpened() {
      var _a;
      if (this.readyState !== _WebSocketMock.CONNECTING)
        return;
      this.extensions = ((_a = this._ws) == null ? void 0 : _a.extensions) || "";
      if (this._ws)
        this.protocol = this._ws.protocol;
      else if (Array.isArray(this._protocols))
        this.protocol = this._protocols[0] || "";
      else
        this.protocol = this._protocols || "";
      this.readyState = _WebSocketMock.OPEN;
      this.dispatchEvent(new Event("open", { cancelable: true }));
    }
    _onWSClose(code, reason, wasClean) {
      if (this._passthrough)
        this._apiClosePage(code, reason, wasClean);
      else
        binding({ type: "onCloseServer", id: this._id, code, reason, wasClean });
      if (this._ws) {
        this._ws.onopen = null;
        this._ws.onclose = null;
        this._ws.onmessage = null;
        this._ws.onerror = null;
        this._ws = void 0;
        this._wsBufferedMessages = [];
      }
      this._maybeCleanup();
    }
    _maybeCleanup() {
      if (this.readyState === _WebSocketMock.CLOSED && !this._ws)
        idToWebSocket.delete(this._id);
    }
  };
  _WebSocketMock.CONNECTING = 0;
  // WebSocket.CONNECTING
  _WebSocketMock.OPEN = 1;
  // WebSocket.OPEN
  _WebSocketMock.CLOSING = 2;
  // WebSocket.CLOSING
  _WebSocketMock.CLOSED = 3;
  let WebSocketMock = _WebSocketMock;
  globalThis.WebSocket = class WebSocket extends WebSocketMock {
  };
}
`;return nh}var ih,Ab;function yy(){if(Ab)return ih;Ab=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(h,m)=>{for(var c in m)r(h,c,{get:m[c],enumerable:!0})},P=(h,m,c,l)=>{if(m&&typeof m=="object"||typeof m=="function")for(let x of E(m))!V.call(h,x)&&x!==c&&r(h,x,{get:()=>m[x],enumerable:!(l=i(m,x))||l.enumerable});return h},e=(h,m,c)=>(c=h!=null?t(R(h)):{},P(!h||!h.__esModule?r(c,"default",{value:h,enumerable:!0}):c,h)),U=h=>P(r({},"__esModule",{value:!0}),h),C={};te(C,{WebSocketRouteDispatcher:()=>a}),ih=U(C);var w=Kr(),g=$r(),u=Uo(),_=e(AT()),f=Tr(),d=di(),v=qr();const o=class o extends g.Dispatcher{constructor(m,c,l,x){super(m,new f.SdkObject(m._object,"webSocketRoute"),"WebSocketRoute",{url:l}),this._type_WebSocketRoute=!0,this._id=c,this._frame=x,this._eventListeners.push(v.eventsHelper.addEventListener(x._page,w.Page.Events.InternalFrameNavigatedToNewDocument,T=>{T===this._frame&&this._executionContextGone()}),v.eventsHelper.addEventListener(x._page,w.Page.Events.FrameDetached,T=>{T===this._frame&&this._executionContextGone()}),v.eventsHelper.addEventListener(x._page,w.Page.Events.Close,()=>this._executionContextGone()),v.eventsHelper.addEventListener(x._page,w.Page.Events.Crash,()=>this._executionContextGone())),o._idToDispatcher.set(this._id,this),m._dispatchEvent("webSocketRoute",{webSocketRoute:this})}static async install(m,c,l){const x=l instanceof w.Page?l.browserContext:l;let T=x.getBindingClient(n);if(T&&T.connection!==c)throw new Error("Another client is already routing WebSockets");return T||(T={counter:0,connection:c,binding:null},T.binding=await x.exposeBinding(m,n,!1,(b,p)=>{if(p.type==="onCreate"){const z=c.existingDispatcher(x),$=z?u.PageDispatcher.fromNullable(z,b.page):void 0;let q;if($&&s($,x._options.baseURL,p.url)?q=$:z&&s(z,x._options.baseURL,p.url)&&(q=z),q)new o(q,p.id,p.url,b.frame);else{const J={id:p.id,type:"passthrough"};b.frame.evaluateExpression(`globalThis.__pwWebSocketDispatch(${JSON.stringify(J)})`).catch(()=>{})}return}const O=o._idToDispatcher.get(p.id);p.type==="onMessageFromPage"&&(O==null||O._dispatchEvent("messageFromPage",{message:p.data.data,isBase64:p.data.isBase64})),p.type==="onMessageFromServer"&&(O==null||O._dispatchEvent("messageFromServer",{message:p.data.data,isBase64:p.data.isBase64})),p.type==="onClosePage"&&(O==null||O._dispatchEvent("closePage",{code:p.code,reason:p.reason,wasClean:p.wasClean})),p.type==="onCloseServer"&&(O==null||O._dispatchEvent("closeServer",{code:p.code,reason:p.reason,wasClean:p.wasClean}))},T)),++T.counter,await l.addInitScript(m,`
      (() => {
        const module = {};
        ${_.source}
        (module.exports.inject())(globalThis);
      })();
    `)}static async uninstall(m,c,l){const x=c instanceof w.Page?c.browserContext:c,T=x.getBindingClient(n);!T||T.connection!==m||(--T.counter<=0&&await x.removeExposedBindings([T.binding]),await c.removeInitScripts([l]))}async connect(m,c){await this._evaluateAPIRequest(c,{id:this._id,type:"connect"})}async ensureOpened(m,c){await this._evaluateAPIRequest(c,{id:this._id,type:"ensureOpened"})}async sendToPage(m,c){await this._evaluateAPIRequest(c,{id:this._id,type:"sendToPage",data:{data:m.message,isBase64:m.isBase64}})}async sendToServer(m,c){await this._evaluateAPIRequest(c,{id:this._id,type:"sendToServer",data:{data:m.message,isBase64:m.isBase64}})}async closePage(m,c){await this._evaluateAPIRequest(c,{id:this._id,type:"closePage",code:m.code,reason:m.reason,wasClean:m.wasClean})}async closeServer(m,c){await this._evaluateAPIRequest(c,{id:this._id,type:"closeServer",code:m.code,reason:m.reason,wasClean:m.wasClean})}async _evaluateAPIRequest(m,c){await m.race(this._frame.evaluateExpression(`globalThis.__pwWebSocketDispatch(${JSON.stringify(c)})`).catch(()=>{}))}_onDispose(){o._idToDispatcher.delete(this._id)}_executionContextGone(){this._disposed||(this._dispatchEvent("closePage",{wasClean:!0}),this._dispatchEvent("closeServer",{wasClean:!0}))}};o._idToDispatcher=new Map;let a=o;function s(h,m,c){for(const l of h._webSocketInterceptionPatterns||[]){const x=l.regexSource?new RegExp(l.regexSource,l.regexFlags):l.glob;if((0,d.urlMatches)(m,c,x,!0))return!0}return!1}const n="__pwWebSocketBinding";return ih}var sh,Ib;function Uo(){if(Ib)return sh;Ib=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(c,l)=>{for(var x in l)t(c,x,{get:l[x],enumerable:!0})},V=(c,l,x,T)=>{if(l&&typeof l=="object"||typeof l=="function")for(let b of i(l))!E.call(c,b)&&b!==x&&t(c,b,{get:()=>l[b],enumerable:!(T=r(l,b))||T.enumerable});return c},te=c=>V(t({},"__esModule",{value:!0}),c),P={};R(P,{BindingCallDispatcher:()=>m,PageDispatcher:()=>o,WorkerDispatcher:()=>h}),sh=te(P);var e=Kr(),U=$r(),C=Pn(),w=Bo(),g=Ho(),u=jo(),_=ea(),f=qi(),d=qi(),v=qi(),a=yy(),s=Tr(),n=di();class o extends U.Dispatcher{constructor(l,x){var p;const T=u.FrameDispatcher.from(l,x.mainFrame());super(l,x,"Page",{mainFrame:T,viewportSize:(p=x.emulatedSize())==null?void 0:p.viewport,isClosed:x.isClosed(),opener:o.fromNullable(l,x.opener())}),this._type_EventTarget=!0,this._type_Page=!0,this._subscriptions=new Set,this._webSocketInterceptionPatterns=[],this._bindings=[],this._initScripts=[],this._interceptionUrlMatchers=[],this._locatorHandlers=new Set,this._jsCoverageActive=!1,this._cssCoverageActive=!1,this.adopt(T),this._page=x,this._requestInterceptor=(O,z)=>{if(!this._interceptionUrlMatchers.some(q=>(0,n.urlMatches)(this._page.browserContext._options.baseURL,z.url(),q))){O.continue({isFallback:!0}).catch(()=>{});return}this._dispatchEvent("route",{route:new v.RouteDispatcher(f.RequestDispatcher.from(this.parentScope(),z),O)})},this.addObjectListener(e.Page.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),this.addObjectListener(e.Page.Events.Crash,()=>this._dispatchEvent("crash")),this.addObjectListener(e.Page.Events.Download,O=>{this._dispatchEvent("download",{url:O.url,suggestedFilename:O.suggestedFilename(),artifact:w.ArtifactDispatcher.from(l,O.artifact)})}),this.addObjectListener(e.Page.Events.EmulatedSizeChanged,()=>{var O;return this._dispatchEvent("viewportSizeChanged",{viewportSize:(O=x.emulatedSize())==null?void 0:O.viewport})}),this.addObjectListener(e.Page.Events.FileChooser,O=>this._dispatchEvent("fileChooser",{element:g.ElementHandleDispatcher.from(T,O.element()),isMultiple:O.isMultiple()})),this.addObjectListener(e.Page.Events.FrameAttached,O=>this._onFrameAttached(O)),this.addObjectListener(e.Page.Events.FrameDetached,O=>this._onFrameDetached(O)),this.addObjectListener(e.Page.Events.LocatorHandlerTriggered,O=>this._dispatchEvent("locatorHandlerTriggered",{uid:O})),this.addObjectListener(e.Page.Events.WebSocket,O=>this._dispatchEvent("webSocket",{webSocket:new v.WebSocketDispatcher(this,O)})),this.addObjectListener(e.Page.Events.Worker,O=>this._dispatchEvent("worker",{worker:new h(this,O)})),this.addObjectListener(e.Page.Events.Video,O=>this._dispatchEvent("video",{artifact:w.ArtifactDispatcher.from(l,O)})),x.video&&this._dispatchEvent("video",{artifact:w.ArtifactDispatcher.from(this.parentScope(),x.video)});const b=x.frameManager.frames();for(let O=1;O<b.length;O++)this._onFrameAttached(b[O])}static from(l,x){return o.fromNullable(l,x)}static fromNullable(l,x){return x?l.connection.existingDispatcher(x)||new o(l,x):void 0}page(){return this._page}async exposeBinding(l,x){const T=await this._page.exposeBinding(x,l.name,!!l.needsHandle,(b,...p)=>{if(this._disposed)return;const O=new m(this,l.name,!!l.needsHandle,b,p);return this._dispatchEvent("bindingCall",{binding:O}),O.promise()});this._bindings.push(T)}async setExtraHTTPHeaders(l,x){await this._page.setExtraHTTPHeaders(x,l.headers)}async reload(l,x){return{response:d.ResponseDispatcher.fromNullable(this.parentScope(),await this._page.reload(x,l))}}async goBack(l,x){return{response:d.ResponseDispatcher.fromNullable(this.parentScope(),await this._page.goBack(x,l))}}async goForward(l,x){return{response:d.ResponseDispatcher.fromNullable(this.parentScope(),await this._page.goForward(x,l))}}async requestGC(l,x){await x.race(this._page.requestGC())}async registerLocatorHandler(l,x){const T=this._page.registerLocatorHandler(l.selector,l.noWaitAfter);return this._locatorHandlers.add(T),{uid:T}}async resolveLocatorHandlerNoReply(l,x){this._page.resolveLocatorHandler(l.uid,l.remove)}async unregisterLocatorHandler(l,x){this._page.unregisterLocatorHandler(l.uid),this._locatorHandlers.delete(l.uid)}async emulateMedia(l,x){await this._page.emulateMedia(x,{media:l.media,colorScheme:l.colorScheme,reducedMotion:l.reducedMotion,forcedColors:l.forcedColors,contrast:l.contrast})}async setViewportSize(l,x){await this._page.setViewportSize(x,l.viewportSize)}async addInitScript(l,x){this._initScripts.push(await this._page.addInitScript(x,l.source))}async setNetworkInterceptionPatterns(l,x){const T=this._interceptionUrlMatchers.length>0;l.patterns.length?(this._interceptionUrlMatchers=l.patterns.map(b=>b.regexSource?new RegExp(b.regexSource,b.regexFlags):b.glob),T||await this._page.addRequestInterceptor(x,this._requestInterceptor)):(T&&await this._page.removeRequestInterceptor(this._requestInterceptor),this._interceptionUrlMatchers=[])}async setWebSocketInterceptionPatterns(l,x){this._webSocketInterceptionPatterns=l.patterns,l.patterns.length&&!this._routeWebSocketInitScript&&(this._routeWebSocketInitScript=await a.WebSocketRouteDispatcher.install(x,this.connection,this._page))}async expectScreenshot(l,x){const T=(l.mask||[]).map(({frame:p,selector:O})=>({frame:p._object,selector:O})),b=l.locator?{frame:l.locator.frame._object,selector:l.locator.selector}:void 0;return await this._page.expectScreenshot(x,{...l,locator:b,mask:T})}async screenshot(l,x){const T=(l.mask||[]).map(({frame:b,selector:p})=>({frame:b._object,selector:p}));return{binary:await this._page.screenshot(x,{...l,mask:T})}}async close(l,x){l.runBeforeUnload||(x.metadata.potentiallyClosesScope=!0),await this._page.close(l)}async updateSubscription(l,x){l.event==="fileChooser"&&await this._page.setFileChooserInterceptedBy(l.enabled,this),l.enabled?this._subscriptions.add(l.event):this._subscriptions.delete(l.event)}async keyboardDown(l,x){await this._page.keyboard.down(x,l.key)}async keyboardUp(l,x){await this._page.keyboard.up(x,l.key)}async keyboardInsertText(l,x){await this._page.keyboard.insertText(x,l.text)}async keyboardType(l,x){await this._page.keyboard.type(x,l.text,l)}async keyboardPress(l,x){await this._page.keyboard.press(x,l.key,l)}async mouseMove(l,x){x.metadata.point={x:l.x,y:l.y},await this._page.mouse.move(x,l.x,l.y,l)}async mouseDown(l,x){x.metadata.point=this._page.mouse.currentPoint(),await this._page.mouse.down(x,l)}async mouseUp(l,x){x.metadata.point=this._page.mouse.currentPoint(),await this._page.mouse.up(x,l)}async mouseClick(l,x){x.metadata.point={x:l.x,y:l.y},await this._page.mouse.click(x,l.x,l.y,l)}async mouseWheel(l,x){await this._page.mouse.wheel(x,l.deltaX,l.deltaY)}async touchscreenTap(l,x){x.metadata.point={x:l.x,y:l.y},await this._page.touchscreen.tap(x,l.x,l.y)}async accessibilitySnapshot(l,x){return{rootAXNode:await x.race(this._page.accessibility.snapshot({interestingOnly:l.interestingOnly,root:l.root?l.root._elementHandle:void 0}))||void 0}}async pdf(l,x){if(!this._page.pdf)throw new Error("PDF generation is only supported for Headless Chromium");return{pdf:await x.race(this._page.pdf(l))}}async snapshotForAI(l,x){return{snapshot:await this._page.snapshotForAI(x)}}async bringToFront(l,x){await x.race(this._page.bringToFront())}async startJSCoverage(l,x){await this._page.coverage.startJSCoverage(x,l),this._jsCoverageActive=!0}async stopJSCoverage(l,x){return this._jsCoverageActive=!1,await this._page.coverage.stopJSCoverage()}async startCSSCoverage(l,x){await this._page.coverage.startCSSCoverage(x,l),this._cssCoverageActive=!0}async stopCSSCoverage(l,x){return this._cssCoverageActive=!1,await this._page.coverage.stopCSSCoverage()}_onFrameAttached(l){this._dispatchEvent("frameAttached",{frame:u.FrameDispatcher.from(this.parentScope(),l)})}_onFrameDetached(l){this._dispatchEvent("frameDetached",{frame:u.FrameDispatcher.from(this.parentScope(),l)})}_onDispose(){if(!this._page.isClosedOrClosingOrCrashed()){this._interceptionUrlMatchers=[],this._page.removeRequestInterceptor(this._requestInterceptor).catch(()=>{}),this._page.removeExposedBindings(this._bindings).catch(()=>{}),this._bindings=[],this._page.removeInitScripts(this._initScripts).catch(()=>{}),this._initScripts=[],this._routeWebSocketInitScript&&a.WebSocketRouteDispatcher.uninstall(this.connection,this._page,this._routeWebSocketInitScript).catch(()=>{}),this._routeWebSocketInitScript=void 0;for(const l of this._locatorHandlers)this._page.unregisterLocatorHandler(l);this._locatorHandlers.clear(),this._page.setFileChooserInterceptedBy(!1,this).catch(()=>{}),this._jsCoverageActive&&this._page.coverage.stopJSCoverage().catch(()=>{}),this._jsCoverageActive=!1,this._cssCoverageActive&&this._page.coverage.stopCSSCoverage().catch(()=>{}),this._cssCoverageActive=!1}}}class h extends U.Dispatcher{constructor(l,x){super(l,x,"Worker",{url:x.url}),this._type_Worker=!0,this.addObjectListener(e.Worker.Events.Close,()=>this._dispatchEvent("close"))}static fromNullable(l,x){return x?l.connection.existingDispatcher(x)||new h(l,x):void 0}async evaluateExpression(l,x){return{value:(0,_.serializeResult)(await x.race(this._object.evaluateExpression(l.expression,l.isFunction,(0,_.parseArgument)(l.arg))))}}async evaluateExpressionHandle(l,x){return{handle:_.JSHandleDispatcher.fromJSHandle(this,await x.race(this._object.evaluateExpressionHandle(l.expression,l.isFunction,(0,_.parseArgument)(l.arg))))}}}class m extends U.Dispatcher{constructor(l,x,T,b,p){const O=u.FrameDispatcher.from(l.parentScope(),b.frame);super(l,new s.SdkObject(l._object,"bindingCall"),"BindingCall",{frame:O,name:x,args:T?void 0:p.map(_.serializeResult),handle:T?g.ElementHandleDispatcher.fromJSOrElementHandle(O,p[0]):void 0}),this._type_BindingCall=!0,this._promise=new Promise((z,$)=>{this._resolve=z,this._reject=$})}promise(){return this._promise}async resolve(l,x){this._resolve((0,_.parseArgument)(l.result)),this._dispose()}async reject(l,x){this._reject((0,C.parseError)(l.error)),this._dispose()}}return sh}var ah,Nb;function IT(){if(Nb)return ah;Nb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{DialogDispatcher:()=>C}),ah=te(P);var e=$r(),U=Uo();class C extends e.Dispatcher{constructor(g,u){const _=U.PageDispatcher.fromNullable(g,u.page().initializedOrUndefined());super(_||g,u,"Dialog",{page:_,type:u.type(),message:u.message(),defaultValue:u.defaultValue()}),this._type_Dialog=!0}async accept(g,u){await u.race(this._object.accept(g.promptText))}async dismiss(g,u){await u.race(this._object.dismiss())}}return ah}var oh,Rb;function NT(){if(Rb)return oh;Rb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(d,v)=>{for(var a in v)r(d,a,{get:v[a],enumerable:!0})},P=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of E(v))!V.call(d,n)&&n!==a&&r(d,n,{get:()=>v[n],enumerable:!(s=i(v,n))||s.enumerable});return d},e=(d,v,a)=>(a=d!=null?t(R(d)):{},P(!d||!d.__esModule?r(a,"default",{value:d,enumerable:!0}):a,d)),U=d=>P(r({},"__esModule",{value:!0}),d),C={};te(C,{WritableStreamDispatcher:()=>f}),oh=U(C);var w=e(Je),g=$r(),u=Tr();class _ extends u.SdkObject{constructor(v,a,s){super(v,"stream"),this.streamOrDirectory=a,this.lastModifiedMs=s}}class f extends g.Dispatcher{constructor(v,a,s){super(v,new _(v._object,a,s),"WritableStream",{}),this._type_WritableStream=!0}async write(v,a){if(typeof this._object.streamOrDirectory=="string")throw new Error("Cannot write to a directory");const s=this._object.streamOrDirectory;await a.race(new Promise((n,o)=>{s.write(v.binary,h=>{h?o(h):n()})}))}async close(v,a){if(typeof this._object.streamOrDirectory=="string")throw new Error("Cannot close a directory");const s=this._object.streamOrDirectory;await a.race(new Promise(n=>s.end(n))),this._object.lastModifiedMs&&await a.race(w.default.promises.utimes(this.path(),new Date(this._object.lastModifiedMs),new Date(this._object.lastModifiedMs)))}path(){return typeof this._object.streamOrDirectory=="string"?this._object.streamOrDirectory:this._object.streamOrDirectory.path}}return oh}var ch,Lb;function ta(){if(Lb)return ch;Lb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(q,J)=>{for(var le in J)r(q,le,{get:J[le],enumerable:!0})},P=(q,J,le,_e)=>{if(J&&typeof J=="object"||typeof J=="function")for(let ge of E(J))!V.call(q,ge)&&ge!==le&&r(q,ge,{get:()=>J[ge],enumerable:!(_e=i(J,ge))||_e.enumerable});return q},e=(q,J,le)=>(le=q!=null?t(R(q)):{},P(!q||!q.__esModule?r(le,"default",{value:q,enumerable:!0}):le,q)),U=q=>P(r({},"__esModule",{value:!0}),q),C={};te(C,{BrowserContextDispatcher:()=>$}),ch=U(C);var w=e(Je),g=e(Je),u=Ir(),_=Bo(),f=vy(),d=IT(),v=$r(),a=Ho(),s=jo(),n=ea(),o=qi(),h=Uo(),m=Xs(),c=Pn(),l=wy(),x=yy(),T=NT(),b=tn(),p=di(),O=df(),z=_y();class $ extends v.Dispatcher{constructor(J,le){const _e=o.APIRequestContextDispatcher.from(J,le.fetchRequest),ge=l.TracingDispatcher.from(J,le.tracing);super(J,le,"BrowserContext",{isChromium:le._browser.options.isChromium,requestContext:_e,tracing:ge,options:le._options}),this._type_EventTarget=!0,this._type_BrowserContext=!0,this._subscriptions=new Set,this._webSocketInterceptionPatterns=[],this._bindings=[],this._initScripts=[],this._clockPaused=!1,this._interceptionUrlMatchers=[],this.adopt(_e),this.adopt(ge),this._requestInterceptor=(S,j)=>{const y=this._interceptionUrlMatchers.some(D=>(0,p.urlMatches)(this._context._options.baseURL,j.url(),D)),I=this.connection.existingDispatcher(S);if(!y||I){S.continue({isFallback:!0}).catch(()=>{});return}this._dispatchEvent("route",{route:new o.RouteDispatcher(o.RequestDispatcher.from(this,j),S)})},this._context=le;const ne=S=>{const j=_.ArtifactDispatcher.from(J,S);this._dispatchEvent("video",{artifact:j})};this.addObjectListener(u.BrowserContext.Events.VideoStarted,ne);for(const S of le._browser._idToVideo.values())S.context===le&&ne(S.artifact);for(const S of le.pages())this._dispatchEvent("page",{page:h.PageDispatcher.from(this,S)});if(this.addObjectListener(u.BrowserContext.Events.Page,S=>{this._dispatchEvent("page",{page:h.PageDispatcher.from(this,S)})}),this.addObjectListener(u.BrowserContext.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),this.addObjectListener(u.BrowserContext.Events.PageError,(S,j)=>{this._dispatchEvent("pageError",{error:(0,c.serializeError)(S),page:h.PageDispatcher.from(this,j)})}),this.addObjectListener(u.BrowserContext.Events.Console,S=>{const j=S.page();if(this._shouldDispatchEvent(j,"console")){const y=h.PageDispatcher.from(this,j);this._dispatchEvent("console",{page:y,type:S.type(),text:S.text(),args:S.args().map(I=>{const D=I.asElement();return D?a.ElementHandleDispatcher.from(s.FrameDispatcher.from(this,D._frame),D):n.JSHandleDispatcher.fromJSHandle(y,I)}),location:S.location()})}}),this._dialogHandler=S=>this._shouldDispatchEvent(S.page(),"dialog")?(this._dispatchEvent("dialog",{dialog:new d.DialogDispatcher(this,S)}),!0):!1,le.dialogManager.addDialogHandler(this._dialogHandler),le._browser.options.name==="chromium"){for(const S of le.backgroundPages())this._dispatchEvent("backgroundPage",{page:h.PageDispatcher.from(this,S)});this.addObjectListener(m.CRBrowserContext.CREvents.BackgroundPage,S=>this._dispatchEvent("backgroundPage",{page:h.PageDispatcher.from(this,S)}));for(const S of le.serviceWorkers())this._dispatchEvent("serviceWorker",{worker:new h.WorkerDispatcher(this,S)});this.addObjectListener(m.CRBrowserContext.CREvents.ServiceWorker,S=>this._dispatchEvent("serviceWorker",{worker:new h.WorkerDispatcher(this,S)}))}this.addObjectListener(u.BrowserContext.Events.Request,S=>{var I;if(!(S.redirectedFrom()&&this.connection.existingDispatcher(S.redirectedFrom()))&&!this._shouldDispatchNetworkEvent(S,"request")&&!S.isNavigationRequest())return;const y=o.RequestDispatcher.from(this,S);this._dispatchEvent("request",{request:y,page:h.PageDispatcher.fromNullable(this,(I=S.frame())==null?void 0:I._page.initializedOrUndefined())})}),this.addObjectListener(u.BrowserContext.Events.Response,S=>{var y;!this.connection.existingDispatcher(S.request())&&!this._shouldDispatchNetworkEvent(S.request(),"response")||this._dispatchEvent("response",{response:o.ResponseDispatcher.from(this,S),page:h.PageDispatcher.fromNullable(this,(y=S.frame())==null?void 0:y._page.initializedOrUndefined())})}),this.addObjectListener(u.BrowserContext.Events.RequestFailed,S=>{var y;!this.connection.existingDispatcher(S)&&!this._shouldDispatchNetworkEvent(S,"requestFailed")||this._dispatchEvent("requestFailed",{request:o.RequestDispatcher.from(this,S),failureText:S._failureText||void 0,responseEndTiming:S._responseEndTiming,page:h.PageDispatcher.fromNullable(this,(y=S.frame())==null?void 0:y._page.initializedOrUndefined())})}),this.addObjectListener(u.BrowserContext.Events.RequestFinished,({request:S,response:j})=>{var I;!this.connection.existingDispatcher(S)&&!this._shouldDispatchNetworkEvent(S,"requestFinished")||this._dispatchEvent("requestFinished",{request:o.RequestDispatcher.from(this,S),response:o.ResponseDispatcher.fromNullable(this,j),responseEndTiming:S._responseEndTiming,page:h.PageDispatcher.fromNullable(this,(I=S.frame())==null?void 0:I._page.initializedOrUndefined())})}),this.addObjectListener(u.BrowserContext.Events.RecorderEvent,({event:S,data:j,page:y})=>{this._dispatchEvent("recorderEvent",{event:S,data:j,page:h.PageDispatcher.from(this,y)})})}static from(J,le){return J.connection.existingDispatcher(le)||new $(J,le)}_shouldDispatchNetworkEvent(J,le){var _e,ge;return this._shouldDispatchEvent((ge=(_e=J.frame())==null?void 0:_e._page)==null?void 0:ge.initializedOrUndefined(),le)}_shouldDispatchEvent(J,le){if(this._subscriptions.has(le))return!0;const _e=J?this.connection.existingDispatcher(J):void 0;return!!(_e!=null&&_e._subscriptions.has(le))}async createTempFiles(J,le){const _e=this._context._browser.options.artifactsDir,ge=g.default.join(_e,"upload-"+(0,b.createGuid)()),ne=J.rootDirName?g.default.join(ge,g.default.basename(J.rootDirName)):ge;return await le.race(w.default.promises.mkdir(ne,{recursive:!0})),this._context._tempDirs.push(ge),{rootDir:J.rootDirName?new T.WritableStreamDispatcher(this,ne):void 0,writableStreams:await Promise.all(J.items.map(async S=>{await le.race(w.default.promises.mkdir(g.default.dirname(g.default.join(ne,S.name)),{recursive:!0}));const j=w.default.createWriteStream(g.default.join(ne,S.name));return new T.WritableStreamDispatcher(this,j,S.lastModifiedMs)}))}}async exposeBinding(J,le){const _e=await this._context.exposeBinding(le,J.name,!!J.needsHandle,(ge,...ne)=>{if(this._disposed)return;const S=h.PageDispatcher.from(this,ge.page),j=new h.BindingCallDispatcher(S,J.name,!!J.needsHandle,ge,ne);return this._dispatchEvent("bindingCall",{binding:j}),j.promise()});this._bindings.push(_e)}async newPage(J,le){return{page:h.PageDispatcher.from(this,await this._context.newPage(le,!1))}}async cookies(J,le){return{cookies:await le.race(this._context.cookies(J.urls))}}async addCookies(J,le){await this._context.addCookies(J.cookies)}async clearCookies(J,le){const _e=J.nameRegexSource!==void 0&&J.nameRegexFlags!==void 0?new RegExp(J.nameRegexSource,J.nameRegexFlags):void 0,ge=J.domainRegexSource!==void 0&&J.domainRegexFlags!==void 0?new RegExp(J.domainRegexSource,J.domainRegexFlags):void 0,ne=J.pathRegexSource!==void 0&&J.pathRegexFlags!==void 0?new RegExp(J.pathRegexSource,J.pathRegexFlags):void 0;await this._context.clearCookies({name:_e||J.name,domain:ge||J.domain,path:ne||J.path})}async grantPermissions(J,le){await this._context.grantPermissions(J.permissions,J.origin)}async clearPermissions(J,le){await this._context.clearPermissions()}async setGeolocation(J,le){await this._context.setGeolocation(J.geolocation)}async setExtraHTTPHeaders(J,le){await this._context.setExtraHTTPHeaders(le,J.headers)}async setOffline(J,le){await this._context.setOffline(le,J.offline)}async setHTTPCredentials(J,le){await le.race(this._context.setHTTPCredentials(J.httpCredentials))}async addInitScript(J,le){this._initScripts.push(await this._context.addInitScript(le,J.source))}async setNetworkInterceptionPatterns(J,le){const _e=this._interceptionUrlMatchers.length>0;J.patterns.length?(this._interceptionUrlMatchers=J.patterns.map(ge=>ge.regexSource?new RegExp(ge.regexSource,ge.regexFlags):ge.glob),_e||await this._context.addRequestInterceptor(le,this._requestInterceptor)):(_e&&await this._context.removeRequestInterceptor(this._requestInterceptor),this._interceptionUrlMatchers=[])}async setWebSocketInterceptionPatterns(J,le){this._webSocketInterceptionPatterns=J.patterns,J.patterns.length&&!this._routeWebSocketInitScript&&(this._routeWebSocketInitScript=await x.WebSocketRouteDispatcher.install(le,this.connection,this._context))}async storageState(J,le){return await le.race(this._context.storageState(le,J.indexedDB))}async close(J,le){le.metadata.potentiallyClosesScope=!0,await this._context.close(J)}async enableRecorder(J,le){const _e=await O.Recorder.forContext(this._context,J);if(J.recorderMode==="api"){await z.ProgrammaticRecorderApp.run(this._context,_e);return}await z.RecorderApp.show(this._context,J)}async disableRecorder(J,le){const _e=O.Recorder.existingForContext(this._context);_e&&_e.setMode("none")}async pause(J,le){}async newCDPSession(J,le){if(!this._object._browser.options.isChromium)throw new Error("CDP session is only available in Chromium");if(!J.page&&!J.frame||J.page&&J.frame)throw new Error("CDP session must be initiated with either Page or Frame, not none or both");const _e=this._object;return{session:new f.CDPSessionDispatcher(this,await le.race(_e.newCDPSession((J.page?J.page:J.frame)._object)))}}async harStart(J,le){return{harId:this._context.harStart(J.page?J.page._object:null,J.options)}}async harExport(J,le){const _e=await le.race(this._context.harExport(J.harId));if(!_e)throw new Error("No HAR artifact. Ensure record.harPath is set.");return{artifact:_.ArtifactDispatcher.from(this,_e)}}async clockFastForward(J,le){await this._context.clock.fastForward(le,J.ticksString??J.ticksNumber??0)}async clockInstall(J,le){await this._context.clock.install(le,J.timeString??J.timeNumber??void 0)}async clockPauseAt(J,le){await this._context.clock.pauseAt(le,J.timeString??J.timeNumber??0),this._clockPaused=!0}async clockResume(J,le){await this._context.clock.resume(le),this._clockPaused=!1}async clockRunFor(J,le){await this._context.clock.runFor(le,J.ticksString??J.ticksNumber??0)}async clockSetFixedTime(J,le){await this._context.clock.setFixedTime(le,J.timeString??J.timeNumber??0)}async clockSetSystemTime(J,le){await this._context.clock.setSystemTime(le,J.timeString??J.timeNumber??0)}async updateSubscription(J,le){J.enabled?this._subscriptions.add(J.event):this._subscriptions.delete(J.event)}async registerSelectorEngine(J,le){this._object.selectors().register(J.selectorEngine)}async setTestIdAttributeName(J,le){this._object.selectors().setTestIdAttributeName(J.testIdAttributeName)}_onDispose(){this._context.isClosingOrClosed()||(this._context.dialogManager.removeDialogHandler(this._dialogHandler),this._interceptionUrlMatchers=[],this._context.removeRequestInterceptor(this._requestInterceptor).catch(()=>{}),this._context.removeExposedBindings(this._bindings).catch(()=>{}),this._bindings=[],this._context.removeInitScripts(this._initScripts).catch(()=>{}),this._initScripts=[],this._routeWebSocketInitScript&&x.WebSocketRouteDispatcher.uninstall(this.connection,this._context,this._routeWebSocketInitScript).catch(()=>{}),this._routeWebSocketInitScript=void 0,this._clockPaused&&this._context.clock.resumeNoReply(),this._clockPaused=!1)}}return ch}var lh,Db;function Mb(){if(Db)return lh;Db=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{AndroidDeviceDispatcher:()=>_,AndroidDispatcher:()=>u,AndroidSocketDispatcher:()=>d}),lh=te(P);var e=ta(),U=$r(),C=mf(),w=qr(),g=Tr();class u extends U.Dispatcher{constructor(n,o,h){super(n,o,"Android",{}),this._type_Android=!0,this._denyLaunch=h}async devices(n,o){return{devices:(await this._object.devices(o,n)).map(m=>_.from(this,m))}}}class _ extends U.Dispatcher{constructor(n,o){super(n,o,"AndroidDevice",{model:o.model,serial:o.serial}),this._type_EventTarget=!0,this._type_AndroidDevice=!0;for(const h of o.webViews())this._dispatchEvent("webViewAdded",{webView:h});this.addObjectListener(C.AndroidDevice.Events.WebViewAdded,h=>this._dispatchEvent("webViewAdded",{webView:h})),this.addObjectListener(C.AndroidDevice.Events.WebViewRemoved,h=>this._dispatchEvent("webViewRemoved",{socketName:h})),this.addObjectListener(C.AndroidDevice.Events.Close,()=>this._dispatchEvent("close"))}static from(n,o){return n.connection.existingDispatcher(o)||new _(n,o)}async wait(n,o){await o.race(this._object.send("wait",n))}async fill(n,o){await o.race(this._object.send("click",{selector:n.androidSelector})),await o.race(this._object.send("fill",n))}async tap(n,o){await o.race(this._object.send("click",n))}async drag(n,o){await o.race(this._object.send("drag",n))}async fling(n,o){await o.race(this._object.send("fling",n))}async longTap(n,o){await o.race(this._object.send("longClick",n))}async pinchClose(n,o){await o.race(this._object.send("pinchClose",n))}async pinchOpen(n,o){await o.race(this._object.send("pinchOpen",n))}async scroll(n,o){await o.race(this._object.send("scroll",n))}async swipe(n,o){await o.race(this._object.send("swipe",n))}async info(n,o){const h=await o.race(this._object.send("info",n));return a(h),{info:h}}async inputType(n,o){const h=n.text,m=[];for(let c=0;c<h.length;++c){const l=v.get(h[c].toUpperCase());if(l===void 0)throw new Error("No mapping for "+h[c]+" found");m.push(l)}await o.race(Promise.all(m.map(c=>this._object.send("inputPress",{keyCode:c}))))}async inputPress(n,o){if(!v.has(n.key))throw new Error("Unknown key: "+n.key);await o.race(this._object.send("inputPress",{keyCode:v.get(n.key)}))}async inputTap(n,o){await o.race(this._object.send("inputClick",n))}async inputSwipe(n,o){await o.race(this._object.send("inputSwipe",n))}async inputDrag(n,o){await o.race(this._object.send("inputDrag",n))}async screenshot(n,o){return{binary:await o.race(this._object.screenshot())}}async shell(n,o){return{result:await o.race(this._object.shell(n.command))}}async open(n,o){const h=await this._object.open(o,n.command);return{socket:new d(this,new f(this._object,h))}}async installApk(n,o){await this._object.installApk(o,n.file,{args:n.args})}async push(n,o){await o.race(this._object.push(o,n.file,n.path,n.mode))}async launchBrowser(n,o){if(this.parentScope()._denyLaunch)throw new Error("Launching more browsers is not allowed.");const h=await this._object.launchBrowser(o,n.pkg,n);return{context:e.BrowserContextDispatcher.from(this,h)}}async close(n,o){await this._object.close()}async connectToWebView(n,o){if(this.parentScope()._denyLaunch)throw new Error("Launching more browsers is not allowed.");return{context:e.BrowserContextDispatcher.from(this,await this._object.connectToWebView(o,n.socketName))}}}class f extends g.SdkObject{constructor(n,o){super(n,"socket"),this._socket=o,this._eventListeners=[w.eventsHelper.addEventListener(o,"data",h=>this.emit("data",h)),w.eventsHelper.addEventListener(o,"close",()=>{w.eventsHelper.removeEventListeners(this._eventListeners),this.emit("close")})]}async write(n){await this._socket.write(n)}close(){this._socket.close()}}class d extends U.Dispatcher{constructor(n,o){super(n,o,"AndroidSocket",{}),this._type_AndroidSocket=!0,this.addObjectListener("data",h=>this._dispatchEvent("data",{data:h})),this.addObjectListener("close",()=>{this._dispatchEvent("close"),this._dispose()})}async write(n,o){await o.race(this._object.write(n.data))}async close(n,o){this._object.close()}}const v=new Map([["Unknown",0],["SoftLeft",1],["SoftRight",2],["Home",3],["Back",4],["Call",5],["EndCall",6],["0",7],["1",8],["2",9],["3",10],["4",11],["5",12],["6",13],["7",14],["8",15],["9",16],["Star",17],["*",17],["Pound",18],["#",18],["DialUp",19],["DialDown",20],["DialLeft",21],["DialRight",22],["DialCenter",23],["VolumeUp",24],["VolumeDown",25],["Power",26],["Camera",27],["Clear",28],["A",29],["B",30],["C",31],["D",32],["E",33],["F",34],["G",35],["H",36],["I",37],["J",38],["K",39],["L",40],["M",41],["N",42],["O",43],["P",44],["Q",45],["R",46],["S",47],["T",48],["U",49],["V",50],["W",51],["X",52],["Y",53],["Z",54],["Comma",55],[",",55],["Period",56],[".",56],["AltLeft",57],["AltRight",58],["ShiftLeft",59],["ShiftRight",60],["Tab",61],["	",61],["Space",62],[" ",62],["Sym",63],["Explorer",64],["Envelop",65],["Enter",66],["Del",67],["Grave",68],["Minus",69],["-",69],["Equals",70],["=",70],["LeftBracket",71],["(",71],["RightBracket",72],[")",72],["Backslash",73],["\\",73],["Semicolon",74],[";",74],["Apostrophe",75],["`",75],["Slash",76],["/",76],["At",77],["@",77],["Num",78],["HeadsetHook",79],["Focus",80],["Plus",81],["Menu",82],["Notification",83],["Search",84],["ChannelUp",166],["ChannelDown",167],["AppSwitch",187],["Assist",219],["Cut",277],["Copy",278],["Paste",279]]);function a(s){s.clazz=s.clazz||"",s.pkg=s.pkg||"",s.res=s.res||"",s.desc=s.desc||"",s.text=s.text||"";for(const n of s.children||[])a(n)}return lh}var uh,Fb;function Sy(){if(Fb)return uh;Fb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{BrowserDispatcher:()=>_}),uh=te(P);var e=Ti(),U=ta(),C=vy(),w=$r(),g=Ir(),u=Bo();class _ extends w.Dispatcher{constructor(d,v,a={}){if(super(d,v,"Browser",{version:v.version(),name:v.options.name}),this._type_Browser=!0,this._isolatedContexts=new Set,this._options=a,!a.isolateContexts){this.addObjectListener(e.Browser.Events.Context,s=>this._dispatchEvent("context",{context:U.BrowserContextDispatcher.from(this,s)})),this.addObjectListener(e.Browser.Events.Disconnected,()=>this._didClose()),v._defaultContext&&this._dispatchEvent("context",{context:U.BrowserContextDispatcher.from(this,v._defaultContext)});for(const s of v.contexts())this._dispatchEvent("context",{context:U.BrowserContextDispatcher.from(this,s)})}}_didClose(){this._dispatchEvent("close"),this._dispose()}async newContext(d,v){if(!this._options.isolateContexts){const n=await this._object.newContext(v,d);return{context:U.BrowserContextDispatcher.from(this,n)}}d.recordVideo&&(d.recordVideo.dir=this._object.options.artifactsDir);const a=await this._object.newContext(v,d);this._isolatedContexts.add(a),a.on(g.BrowserContext.Events.Close,()=>this._isolatedContexts.delete(a));const s=U.BrowserContextDispatcher.from(this,a);return this._dispatchEvent("context",{context:s}),{context:s}}async newContextForReuse(d,v){const a=await this._object.newContextForReuse(v,d),s=U.BrowserContextDispatcher.from(this,a);return this._dispatchEvent("context",{context:s}),{context:s}}async disconnectFromReusedContext(d,v){const a=this._object.contextForReuse(),s=a?this.connection.existingDispatcher(a):void 0;s&&(await s.stopPendingOperations(new Error(d.reason)),s._dispose())}async close(d,v){this._options.ignoreStopAndKill||(v.metadata.potentiallyClosesScope=!0,await this._object.close(d))}async killForTests(d,v){this._options.ignoreStopAndKill||(v.metadata.potentiallyClosesScope=!0,await this._object.killForTests())}async defaultUserAgentForTest(){return{userAgent:this._object.userAgent()}}async newBrowserCDPSession(d,v){if(!this._object.options.isChromium)throw new Error("CDP session is only available in Chromium");const a=this._object;return{session:new C.CDPSessionDispatcher(this,await a.newBrowserCDPSession())}}async startTracing(d,v){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");await this._object.startTracing(d.page?d.page._object:void 0,d)}async stopTracing(d,v){if(!this._object.options.isChromium)throw new Error("Tracing is only available in Chromium");const a=this._object;return{artifact:u.ArtifactDispatcher.from(this,await a.stopTracing())}}async cleanupContexts(){await Promise.all(Array.from(this._isolatedContexts).map(d=>d.close({reason:"Global context cleanup (connection terminated)"})))}}return uh}var dh,Bb;function RT(){if(Bb)return dh;Bb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{BrowserTypeDispatcher:()=>w}),dh=te(P);var e=ta(),U=Sy(),C=$r();class w extends C.Dispatcher{constructor(u,_,f){super(u,_,"BrowserType",{executablePath:_.executablePath(),name:_.name()}),this._type_BrowserType=!0,this._denyLaunch=f}async launch(u,_){if(this._denyLaunch)throw new Error("Launching more browsers is not allowed.");const f=await this._object.launch(_,u);return{browser:new U.BrowserDispatcher(this,f)}}async launchPersistentContext(u,_){if(this._denyLaunch)throw new Error("Launching more browsers is not allowed.");const f=await this._object.launchPersistentContext(_,u.userDataDir,u),d=new U.BrowserDispatcher(this,f._browser),v=e.BrowserContextDispatcher.from(d,f);return{browser:d,context:v}}async connectOverCDP(u,_){if(this._denyLaunch)throw new Error("Launching more browsers is not allowed.");const f=await this._object.connectOverCDP(_,u.endpointURL,u),d=new U.BrowserDispatcher(this,f);return{browser:d,defaultContext:f._defaultContext?e.BrowserContextDispatcher.from(d,f._defaultContext):void 0}}}return dh}var hh,jb;function LT(){if(jb)return hh;jb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{ElectronApplicationDispatcher:()=>u,ElectronDispatcher:()=>g}),hh=te(P);var e=ta(),U=$r(),C=ea(),w=my();class g extends U.Dispatcher{constructor(f,d,v){super(f,d,"Electron",{}),this._type_Electron=!0,this._denyLaunch=v}async launch(f,d){if(this._denyLaunch)throw new Error("Launching more browsers is not allowed.");const v=await this._object.launch(d,f);return{electronApplication:new u(this,v)}}}class u extends U.Dispatcher{constructor(f,d){super(f,d,"ElectronApplication",{context:e.BrowserContextDispatcher.from(f,d.context())}),this._type_EventTarget=!0,this._type_ElectronApplication=!0,this._subscriptions=new Set,this.addObjectListener(w.ElectronApplication.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),this.addObjectListener(w.ElectronApplication.Events.Console,v=>{this._subscriptions.has("console")&&this._dispatchEvent("console",{type:v.type(),text:v.text(),args:v.args().map(a=>C.JSHandleDispatcher.fromJSHandle(this,a)),location:v.location()})})}async browserWindow(f,d){const v=await d.race(this._object.browserWindow(f.page.page()));return{handle:C.JSHandleDispatcher.fromJSHandle(this,v)}}async evaluateExpression(f,d){const v=await d.race(this._object._nodeElectronHandlePromise);return{value:(0,C.serializeResult)(await d.race(v.evaluateExpression(f.expression,{isFunction:f.isFunction},(0,C.parseArgument)(f.arg))))}}async evaluateExpressionHandle(f,d){const v=await d.race(this._object._nodeElectronHandlePromise),a=await d.race(v.evaluateExpressionHandle(f.expression,{isFunction:f.isFunction},(0,C.parseArgument)(f.arg)));return{handle:C.JSHandleDispatcher.fromJSHandle(this,a)}}async updateSubscription(f,d){f.enabled?this._subscriptions.add(f.event):this._subscriptions.delete(f.event)}}return hh}var ph,Hb;function DT(){if(Hb)return ph;Hb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},P=(a,s,n,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of E(s))!V.call(a,h)&&h!==n&&r(a,h,{get:()=>s[h],enumerable:!(o=i(s,h))||o.enumerable});return a},e=(a,s,n)=>(n=a!=null?t(R(a)):{},P(!a||!a.__esModule?r(n,"default",{value:a,enumerable:!0}):n,a)),U=a=>P(r({},"__esModule",{value:!0}),a),C={};te(C,{HarBackend:()=>f}),ph=U(C);var w=e(Je),g=e(Je),u=tn();const _=[301,302,303,307,308];class f{constructor(s,n,o){this.id=(0,u.createGuid)(),this._harFile=s,this._baseDir=n,this._zipFile=o}async lookup(s,n,o,h,m){let c;try{c=await this._harFindResponse(s,n,o,h)}catch(x){return{action:"error",message:"HAR error: "+x.message}}if(!c)return{action:"noentry"};if(c.request.url!==s&&m)return{action:"redirect",redirectURL:c.request.url};const l=c.response;try{const x=await this._loadContent(l.content);return{action:"fulfill",status:l.status,headers:l.headers,body:x}}catch(x){return{action:"error",message:x.message}}}async _loadContent(s){const n=s._file;let o;return n?this._zipFile?o=await this._zipFile.read(n):o=await w.default.promises.readFile(g.default.resolve(this._baseDir,n)):o=Buffer.from(s.text||"",s.encoding==="base64"?"base64":"utf-8"),o}async _harFindResponse(s,n,o,h){const m=this._harFile.log,c=new Set;for(;;){const l=[];for(const b of m.entries)if(!(b.request.url!==s||b.request.method!==n)){if(n==="POST"&&h&&b.request.postData){const p=await this._loadContent(b.request.postData);if(!p.equals(h)){const O=v(o);if(!O)continue;const z=v(b.request.headers);if(!z||h.toString().replaceAll(O,"")!==p.toString().replaceAll(z,""))continue}}l.push(b)}if(!l.length)return;let x=l[0];if(l.length>1){const b=[];for(const p of l){const O=d(p.request.headers,o);b.push({candidate:p,matchingHeaders:O})}b.sort((p,O)=>O.matchingHeaders-p.matchingHeaders),x=b[0].candidate}if(c.has(x))throw new Error(`Found redirect cycle for ${s}`);c.add(x);const T=x.response.headers.find(b=>b.name.toLowerCase()==="location");if(_.includes(x.response.status)&&T){s=new URL(T.value,s).toString(),((x.response.status===301||x.response.status===302)&&n==="POST"||x.response.status===303&&!["GET","HEAD"].includes(n))&&(n="GET");continue}return x}}dispose(){var s;(s=this._zipFile)==null||s.close()}}function d(a,s){const n=new Set(s.map(h=>h.name.toLowerCase()+":"+h.value));let o=0;for(const h of a)n.has(h.name.toLowerCase()+":"+h.value)&&++o;return o}function v(a){const s=a.find(o=>o.name.toLowerCase()==="content-type");if(!(s!=null&&s.value.includes("multipart/form-data")))return;const n=s.value.match(/boundary=(\S+)/);if(n)return n[1]}return ph}var fh,Ub;function MT(){if(Ub)return fh;Ub=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{parseClientSideCallMetadata:()=>e,serializeClientSideCallMetadata:()=>U}),fh=te(P);function e(C){const w=new Map,{files:g,stacks:u}=C;for(const _ of u){const[f,d]=_;w.set(`call@${f}`,d.map(v=>({file:g[v[0]],line:v[1],column:v[2],function:v[3]})))}return w}function U(C){const w=new Map,g=[];for(const u of C){if(!u.stack||!u.stack.length)continue;const _=[];for(const f of u.stack){let d=w.get(f.file);typeof d!="number"&&(d=w.size,w.set(f.file,d));const v=[d,f.line||0,f.column||0,f.function||""];_.push(v)}g.push([u.id,_])}return{files:[...w.keys()],stacks:g}}return fh}var mh,qb;function FT(){if(qb)return mh;qb=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=($,q)=>{for(var J in q)i($,J,{get:q[J],enumerable:!0})},e=($,q,J,le)=>{if(q&&typeof q=="object"||typeof q=="function")for(let _e of R(q))!te.call($,_e)&&_e!==J&&i($,_e,{get:()=>q[_e],enumerable:!(le=E(q,_e))||le.enumerable});return $},U=($,q,J)=>(J=$!=null?r(V($)):{},e(!$||!$.__esModule?i(J,"default",{value:$,enumerable:!0}):J,$)),C=$=>e(i({},"__esModule",{value:!0}),$),w={};P(w,{addStackToTracingNoReply:()=>z,harClose:()=>T,harLookup:()=>x,harOpen:()=>l,harUnzip:()=>b,traceDiscarded:()=>O,tracingStarted:()=>p,zip:()=>m}),mh=C(w);var g=U(Je),u=U(Je),_=U(Je),f=tn(),d=DT(),v=Fr(),a=ty(),s=Po(),n=MT(),o=Gr(),h=Ln();async function m($,q,J){const le=new v.ManualPromise,_e=new s.yazl.ZipFile;_e.on("error",j=>le.reject(j));const ge=(j,y)=>{try{g.default.statSync(j).isFile()&&_e.addFile(j,y)}catch{}};for(const j of J.entries)ge(j.value,j.name);const ne=J.stacksId?q.get(J.stacksId):void 0;if(ne!=null&&ne.callStacks.length)if(await $.race(ne.writer),t.PW_LIVE_TRACE_STACKS)_e.addFile(ne.file,"trace.stacks");else{const j=Buffer.from(JSON.stringify((0,n.serializeClientSideCallMetadata)(ne.callStacks)));_e.addBuffer(j,"trace.stacks")}if(J.includeSources){const j=new Set;for(const{stack:y}of(ne==null?void 0:ne.callStacks)||[])if(y)for(const{file:I}of y)j.add(I);for(const y of j)ge(y,"resources/src@"+await(0,f.calculateSha1)(y)+".txt")}if(J.mode==="write"){await $.race(g.default.promises.mkdir(_.default.dirname(J.zipFile),{recursive:!0})),_e.end(void 0,()=>{_e.outputStream.pipe(g.default.createWriteStream(J.zipFile)).on("close",()=>le.resolve()).on("error",j=>le.reject(j))}),await $.race(le),await c($,q,J.stacksId);return}const S=J.zipFile+".tmp";await $.race(g.default.promises.rename(J.zipFile,S)),s.yauzl.open(S,(j,y)=>{if(j){le.reject(j);return}(0,o.assert)(y);let I=y.entryCount;y.on("entry",D=>{y.openReadStream(D,(ie,he)=>{if(ie){le.reject(ie);return}_e.addReadStream(he,D.fileName),--I===0&&_e.end(void 0,()=>{_e.outputStream.pipe(g.default.createWriteStream(J.zipFile)).on("close",()=>{g.default.promises.unlink(S).then(()=>{le.resolve()}).catch(me=>le.reject(me))})})})})}),await $.race(le),await c($,q,J.stacksId)}async function c($,q,J){const le=J?q.get(J):void 0;le&&(q.delete(J),le.tmpDir&&await $.race((0,h.removeFolders)([le.tmpDir])))}async function l($,q,J){let le;if(J.file.endsWith(".zip")){const _e=new a.ZipFile(J.file),ne=(await _e.entries()).find(y=>y.endsWith(".har"));if(!ne)return{error:"Specified archive does not have a .har file"};const S=await $.raceWithCleanup(_e.read(ne),()=>_e.close()),j=JSON.parse(S.toString());le=new d.HarBackend(j,null,_e)}else{const _e=JSON.parse(await $.race(g.default.promises.readFile(J.file,"utf-8")));le=new d.HarBackend(_e,_.default.dirname(J.file),null)}return q.set(le.id,le),{harId:le.id}}async function x($,q,J){const le=q.get(J.harId);return le?await $.race(le.lookup(J.url,J.method,J.headers,J.postData,J.isNavigationRequest)):{action:"error",message:"Internal error: har was not opened"}}function T($,q){const J=$.get(q.harId);J&&($.delete(J.id),J.dispose())}async function b($,q){const J=_.default.dirname(q.zipFile),le=new a.ZipFile(q.zipFile);$.cleanupWhenAborted(()=>le.close());for(const _e of await $.race(le.entries())){const ge=await $.race(le.read(_e));_e==="har.har"?await $.race(g.default.promises.writeFile(q.harFile,ge)):await $.race(g.default.promises.writeFile(_.default.join(J,_e),ge))}await $.race(g.default.promises.unlink(q.zipFile)),le.close()}async function p($,q,J){let le;J.tracesDir||(le=await $.race(g.default.promises.mkdtemp(_.default.join(u.default.tmpdir(),"playwright-tracing-"))));const _e=_.default.join(J.tracesDir||le,J.traceName+".stacks");return q.set(_e,{callStacks:[],file:_e,writer:Promise.resolve(),tmpDir:le}),{stacksId:_e}}async function O($,q,J){await c($,q,J.stacksId)}function z($,q){for(const J of $.values())J.callStacks.push(q.callData),t.PW_LIVE_TRACE_STACKS&&(J.writer=J.writer.then(()=>{const le=Buffer.from(JSON.stringify((0,n.serializeClientSideCallMetadata)(J.callStacks)));return g.default.promises.writeFile(J.file,le)}))}return mh}var gh,$b;function BT(){if($b)return gh;$b=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{JsonPipeDispatcher:()=>C}),gh=te(P);var e=$r(),U=Tr();class C extends e.Dispatcher{constructor(g){super(g,new U.SdkObject(g._object,"jsonPipe"),"JsonPipe",{}),this._type_JsonPipe=!0}async send(g,u){this.emit("message",g.message)}async close(g,u){this.emit("close"),this._disposed||(this._dispatchEvent("closed",{}),this._dispose())}dispatch(g){this._disposed||this._dispatchEvent("message",{message:g})}wasClosed(g){this._disposed||(this._dispatchEvent("closed",{reason:g}),this._dispose())}dispose(){this._dispose()}}return gh}var _h,Wb;function jT(){if(Wb)return _h;Wb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(v,a)=>{for(var s in a)r(v,s,{get:a[s],enumerable:!0})},P=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of E(a))!V.call(v,o)&&o!==s&&r(v,o,{get:()=>a[o],enumerable:!(n=i(a,o))||n.enumerable});return v},e=(v,a,s)=>(s=v!=null?t(R(v)):{},P(!v||!v.__esModule?r(s,"default",{value:v,enumerable:!0}):s,v)),U=v=>P(r({},"__esModule",{value:!0}),v),C={};te(C,{SocksInterceptor:()=>f}),_h=U(C);var w=e(Vr()),g=e(Vs()),u=Io(),_=Xn();class f{constructor(a,s,n){this._ids=new Set,this._handler=new g.SocksProxyHandler(s,n);let o=-1;this._channel=new Proxy(new w.default,{get:(h,m)=>m in h||h[m]!==void 0||typeof m!="string"?h[m]:c=>{try{const l=--o;this._ids.add(l),c=(0,u.findValidator)("SocksSupport",m,"Params")(c,"",{tChannelImpl:d,binary:"toBase64",isUnderTest:_.isUnderTest}),a.send({id:l,guid:this._socksSupportObjectGuid,method:m,params:c,metadata:{stack:[],apiName:"",internal:!0}})}catch{}}}),this._handler.on(g.SocksProxyHandler.Events.SocksConnected,h=>this._channel.socksConnected(h)),this._handler.on(g.SocksProxyHandler.Events.SocksData,h=>this._channel.socksData(h)),this._handler.on(g.SocksProxyHandler.Events.SocksError,h=>this._channel.socksError(h)),this._handler.on(g.SocksProxyHandler.Events.SocksFailed,h=>this._channel.socksFailed(h)),this._handler.on(g.SocksProxyHandler.Events.SocksEnd,h=>this._channel.socksEnd(h)),this._channel.on("socksRequested",h=>this._handler.socketRequested(h)),this._channel.on("socksClosed",h=>this._handler.socketClosed(h)),this._channel.on("socksData",h=>this._handler.sendSocketData(h))}cleanup(){this._handler.cleanup()}interceptMessage(a){if(this._ids.has(a.id))return this._ids.delete(a.id),!0;if(a.method==="__create__"&&a.params.type==="SocksSupport")return this._socksSupportObjectGuid=a.params.guid,!1;if(this._socksSupportObjectGuid&&a.guid===this._socksSupportObjectGuid){const n=(0,u.findValidator)("SocksSupport",a.method,"Event")(a.params,"",{tChannelImpl:d,binary:"fromBase64",isUnderTest:_.isUnderTest});return this._channel.emit(a.method,n),!0}return!1}}function d(v,a,s,n){throw new u.ValidationError(`${s}: channels are not expected in SocksSupport`)}return _h}var bh,zb;function HT(){if(zb)return bh;zb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(m,c)=>{for(var l in c)r(m,l,{get:c[l],enumerable:!0})},P=(m,c,l,x)=>{if(c&&typeof c=="object"||typeof c=="function")for(let T of E(c))!V.call(m,T)&&T!==l&&r(m,T,{get:()=>c[T],enumerable:!(x=i(c,T))||x.enumerable});return m},e=(m,c,l)=>(l=m!=null?t(R(m)):{},P(!m||!m.__esModule?r(l,"default",{value:m,enumerable:!0}):l,m)),U=m=>P(r({},"__esModule",{value:!0}),m),C={};te(C,{LocalUtilsDispatcher:()=>o}),bh=U(C);var w=$r(),g=Tr(),u=e(FT()),_=xi(),f=Js(),d=BT(),v=jT(),a=Do(),s=Ki(),n=di();class o extends w.Dispatcher{constructor(c,l){const x=new g.SdkObject(l,"localUtils","localUtils");x.logName="browser";const T=Object.entries(f.deviceDescriptors).map(([b,p])=>({name:b,descriptor:p}));super(c,x,"LocalUtils",{deviceDescriptors:T}),this._harBackends=new Map,this._stackSessions=new Map,this._type_LocalUtils=!0}async zip(c,l){return await u.zip(l,this._stackSessions,c)}async harOpen(c,l){return await u.harOpen(l,this._harBackends,c)}async harLookup(c,l){return await u.harLookup(l,this._harBackends,c)}async harClose(c,l){u.harClose(this._harBackends,c)}async harUnzip(c,l){return await u.harUnzip(l,c)}async tracingStarted(c,l){return await u.tracingStarted(l,this._stackSessions,c)}async traceDiscarded(c,l){return await u.traceDiscarded(l,this._stackSessions,c)}async addStackToTracingNoReply(c,l){u.addStackToTracingNoReply(this._stackSessions,c)}async connect(c,l){const x={"User-Agent":(0,_.getUserAgent)(),"x-playwright-proxy":c.exposeNetwork??"",...c.headers},T=await h(l,c.wsEndpoint),b=await a.WebSocketTransport.connect(l,T,{headers:x,followRedirects:!0,debugLogHeader:"x-playwright-debug-log"}),p=new v.SocksInterceptor(b,c.exposeNetwork,c.socksProxyRedirectPortForTest),O=new d.JsonPipeDispatcher(this);return b.onmessage=z=>{if(p.interceptMessage(z))return;const $=()=>{try{O.dispatch(z)}catch{b.close()}};c.slowMo?setTimeout($,c.slowMo):$()},O.on("message",z=>{b.send(z)}),b.onclose=z=>{p==null||p.cleanup(),O.wasClosed(z)},O.on("close",()=>b.close()),{pipe:O,headers:b.headers}}async globToRegex(c,l){return{regex:(0,n.resolveGlobToRegexPattern)(c.baseURL,c.glob,c.webSocketUrl)}}}async function h(m,c){if(c.startsWith("ws"))return c;m.log(`<ws preparing> retrieving websocket url from ${c}`);const l=new URL(c);l.pathname.endsWith("/")||(l.pathname+="/"),l.pathname+="json";const x=await(0,s.fetchData)(m,{url:l.toString(),method:"GET",headers:{"User-Agent":(0,_.getUserAgent)()}},async(p,O)=>new Error(`Unexpected status ${O.statusCode} when connecting to ${l.toString()}.
This does not look like a Playwright server, try connecting via ws://.`)),T=new URL(c);let b=JSON.parse(x).wsEndpointPath;return b.startsWith("/")&&(b=b.substring(1)),T.pathname.endsWith("/")||(T.pathname+="/"),T.pathname+=b,T.protocol=T.protocol==="https:"?"wss:":"ws:",T.toString()}return bh}var vh,Vb;function UT(){if(Vb)return vh;Vb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(h,m)=>{for(var c in m)t(h,c,{get:m[c],enumerable:!0})},V=(h,m,c,l)=>{if(m&&typeof m=="object"||typeof m=="function")for(let x of i(m))!E.call(h,x)&&x!==c&&t(h,x,{get:()=>m[x],enumerable:!(l=r(m,x))||l.enumerable});return h},te=h=>V(t({},"__esModule",{value:!0}),h),P={};R(P,{PlaywrightDispatcher:()=>n}),vh=te(P);var e=Vs(),U=Fo(),C=Mb(),w=Mb(),g=Sy(),u=RT(),_=$r(),f=LT(),d=HT(),v=qi(),a=Tr(),s=qr();class n extends _.Dispatcher{constructor(m,c,l={}){const x=l.denyLaunch??!1,T=new u.BrowserTypeDispatcher(m,c.chromium,x),b=new u.BrowserTypeDispatcher(m,c.firefox,x),p=new u.BrowserTypeDispatcher(m,c.webkit,x),O=new u.BrowserTypeDispatcher(m,c._bidiChromium,x),z=new u.BrowserTypeDispatcher(m,c._bidiFirefox,x),$=new C.AndroidDispatcher(m,c.android,x),q={chromium:T,firefox:b,webkit:p,_bidiChromium:O,_bidiFirefox:z,android:$,electron:new f.ElectronDispatcher(m,c.electron,x),utils:c.options.isServer?void 0:new d.LocalUtilsDispatcher(m,c),socksSupport:l.socksProxy?new o(m,c,l.socksProxy):void 0};let J;if(l.preLaunchedBrowser){const le=q[l.preLaunchedBrowser.options.name];J=new g.BrowserDispatcher(le,l.preLaunchedBrowser,{ignoreStopAndKill:!0,isolateContexts:!l.sharedBrowser}),q.preLaunchedBrowser=J}l.preLaunchedAndroidDevice&&(q.preConnectedAndroidDevice=new w.AndroidDeviceDispatcher($,l.preLaunchedAndroidDevice)),super(m,c,"Playwright",q),this._type_Playwright=!0,this._browserDispatcher=J}async newRequest(m,c){const l=new U.GlobalAPIRequestContext(this._object,m);return{request:v.APIRequestContextDispatcher.from(this.parentScope(),l)}}async cleanup(){var m;await((m=this._browserDispatcher)==null?void 0:m.cleanupContexts())}}class o extends _.Dispatcher{constructor(m,c,l){super(m,new a.SdkObject(c,"socksSupport"),"SocksSupport",{}),this._type_SocksSupport=!0,this._socksProxy=l,this._socksListeners=[s.eventsHelper.addEventListener(l,e.SocksProxy.Events.SocksRequested,x=>this._dispatchEvent("socksRequested",x)),s.eventsHelper.addEventListener(l,e.SocksProxy.Events.SocksData,x=>this._dispatchEvent("socksData",x)),s.eventsHelper.addEventListener(l,e.SocksProxy.Events.SocksClosed,x=>this._dispatchEvent("socksClosed",x))]}async socksConnected(m,c){var l;(l=this._socksProxy)==null||l.socketConnected(m)}async socksFailed(m,c){var l;(l=this._socksProxy)==null||l.socketFailed(m)}async socksData(m,c){var l;(l=this._socksProxy)==null||l.sendSocketData(m)}async socksError(m,c){var l;(l=this._socksProxy)==null||l.sendSocketError(m)}async socksEnd(m,c){var l;(l=this._socksProxy)==null||l.sendSocketEnd(m)}_onDispose(){s.eventsHelper.removeEventListeners(this._socksListeners)}}return vh}var wh,Kb;function qT(){if(Kb)return wh;Kb=1;var t={},r=Object.create,i=Object.defineProperty,E=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,P=($,q)=>{for(var J in q)i($,J,{get:q[J],enumerable:!0})},e=($,q,J,le)=>{if(q&&typeof q=="object"||typeof q=="function")for(let _e of R(q))!te.call($,_e)&&_e!==J&&i($,_e,{get:()=>q[_e],enumerable:!(le=E(q,_e))||le.enumerable});return $},U=($,q,J)=>(J=$!=null?r(V($)):{},e(!$||!$.__esModule?i(J,"default",{value:$,enumerable:!0}):J,$)),C=$=>e(i({},"__esModule",{value:!0}),$),w={};P(w,{installRootRedirect:()=>l,openTraceInBrowser:()=>p,openTraceViewerApp:()=>b,runTraceInBrowser:()=>T,runTraceViewerApp:()=>x,startTraceViewerServer:()=>c}),wh=C(w);var g=U(Je),u=U(Je),_=nr(),f=nr(),d=Yw(),v=Ar(),a=Tr(),s=po(),n=po(),o=ps(),h=bn();function m($){for(const q of $){let J=q;if(q.endsWith(".json")&&(J=q.substring(0,q.length-5)),!q.startsWith("http://")&&!q.startsWith("https://")&&!g.default.existsSync(J)&&!g.default.existsSync(J+".trace"))throw new Error(`Trace file ${q} does not exist!`)}}async function c($){const q=new d.HttpServer;q.routePrefix("/trace",(ge,ne)=>{const S=new URL("http://localhost"+ge.url),j=S.pathname.slice(6);if(t.PW_HMR&&ne.appendHeader("Access-Control-Allow-Origin","http://localhost:44223"),j.endsWith("/stall.js"))return!0;if(j.startsWith("/file")){try{const I=S.searchParams.get("path");if(g.default.existsSync(I))return q.serveFile(ge,ne,S.searchParams.get("path"));if(I.endsWith(".json")){const D=I.substring(0,I.length-5);return ne.statusCode=200,ne.setHeader("Content-Type","application/json"),ne.end(JSON.stringify(z(D))),!0}}catch{}return ne.statusCode=404,ne.end(),!0}const y=u.default.join(__dirname,"..","..","..","vite","traceViewer",...j.split("/"));return q.serveFile(ge,ne,y)});const J=($==null?void 0:$.transport)||($!=null&&$.isServer?new O:void 0);J&&q.createWebSocket(J);const{host:le,port:_e}=$||{};return await q.start({preferredPort:_e,host:le}),q}async function l($,q,J){const le=new URLSearchParams;u.default.sep!==u.default.posix.sep&&le.set("pathSeparator",u.default.sep);for(const ne of q)le.append("trace",ne);$.wsGuid()&&le.append("ws",$.wsGuid()),J!=null&&J.isServer&&le.append("isServer",""),(0,f.isUnderTest)()&&le.append("isUnderTest","true");for(const ne of J.args||[])le.append("arg",ne);J.grep&&le.append("grep",J.grep),J.grepInvert&&le.append("grepInvert",J.grepInvert);for(const ne of J.project||[])le.append("project",ne);for(const ne of J.reporter||[])le.append("reporter",ne);let _e=".";t.PW_HMR&&(_e="http://localhost:44223",le.set("server",$.urlPrefix("precise")));const ge=`${_e}/trace/${J.webApp||"index.html"}?${le.toString()}`;$.routePath("/",(ne,S)=>(S.statusCode=302,S.setHeader("Location",ge),S.end(),!0))}async function x($,q,J,le){m($);const _e=await c(J);await l(_e,$,J);const ge=await b(_e.urlPrefix("precise"),q,J);return le&&ge.on("close",()=>(0,_.gracefullyProcessExitDoNotHang)(0)),ge}async function T($,q){m($);const J=await c(q);await l(J,$,q),await p(J.urlPrefix("human-readable"))}async function b($,q,J){const le=(0,o.createPlaywright)({sdkLanguage:"javascript",isInternalPlaywright:!0}),_e=(0,f.isUnderTest)()?"chromium":q,{context:ge,page:ne}=await(0,n.launchApp)(le[_e],{sdkLanguage:le.options.sdkLanguage,windowSize:{width:1280,height:800},persistentContextOptions:{...J==null?void 0:J.persistentContextOptions,cdpPort:(0,f.isUnderTest)()?0:void 0,headless:!!(J!=null&&J.headless),colorScheme:(0,f.isUnderTest)()?"light":void 0}});return await new h.ProgressController((0,a.serverSideCallMetadata)(),ge._browser).run(async j=>{await ge._browser._defaultContext._loadDefaultContextAsIs(j),t.PWTEST_PRINT_WS_ENDPOINT&&process.stderr.write("DevTools listening on: "+ge._browser.options.wsEndpoint+`
`),(0,f.isUnderTest)()||await(0,s.syncLocalStorageWithSettings)(ne,"traceviewer"),(0,f.isUnderTest)()&&ne.on("close",()=>ge.close({reason:"Trace viewer closed"}).catch(()=>{})),await ne.mainFrame().goto(j,$)}),ne}async function p($){console.log(`
Listening on `+$),(0,f.isUnderTest)()||await(0,v.open)($.replace("0.0.0.0","localhost")).catch(()=>{})}class O{constructor(){process.stdin.on("data",q=>{const J=q.toString().trim();J!==this._traceUrl&&(J.endsWith(".json")?this._pollLoadTrace(J):this._loadTrace(J))}),process.stdin.on("close",()=>(0,_.gracefullyProcessExitDoNotHang)(0))}onconnect(){}async dispatch(q,J){q==="initialize"&&this._traceUrl&&this._loadTrace(this._traceUrl)}onclose(){}_loadTrace(q){var J;this._traceUrl=q,clearTimeout(this._pollTimer),(J=this.sendEvent)==null||J.call(this,"loadTraceRequested",{traceUrl:q})}_pollLoadTrace(q){this._loadTrace(q),this._pollTimer=setTimeout(()=>{this._pollLoadTrace(q)},500)}}function z($){const q={entries:[]},J=u.default.dirname($),le=u.default.basename($);for(const ge of g.default.readdirSync(J))ge.startsWith(le)&&q.entries.push({name:ge,path:u.default.join(J,ge)});const _e=u.default.join(J,"resources");if(g.default.existsSync(_e))for(const ge of g.default.readdirSync(_e))q.entries.push({name:"resources/"+ge,path:u.default.join(_e,ge)});return q}return wh}var yh,Gb;function qo(){if(Gb)return yh;Gb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{DispatcherConnection:()=>U.DispatcherConnection,PlaywrightDispatcher:()=>C.PlaywrightDispatcher,Registry:()=>e.Registry,RootDispatcher:()=>U.RootDispatcher,createPlaywright:()=>w.createPlaywright,installBrowsersForNpmInstall:()=>e.installBrowsersForNpmInstall,installRootRedirect:()=>g.installRootRedirect,openTraceInBrowser:()=>g.openTraceInBrowser,openTraceViewerApp:()=>g.openTraceViewerApp,registry:()=>e.registry,registryDirectory:()=>e.registryDirectory,runTraceViewerApp:()=>g.runTraceViewerApp,serverSideCallMetadata:()=>u.serverSideCallMetadata,startTraceViewerServer:()=>g.startTraceViewerServer,writeDockerVersion:()=>e.writeDockerVersion}),yh=te(P);var e=ui(),U=$r(),C=UT(),w=ps(),g=qT(),u=Tr();return yh}var Sh,Jb;function $T(){if(Jb)return Sh;Jb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{DebugControllerDispatcher:()=>w}),Sh=te(P);var e=nr(),U=fy(),C=$r();class w extends C.Dispatcher{constructor(u,_){super(u,_,"DebugController",{}),this._type_DebugController=!0,this._listeners=[e.eventsHelper.addEventListener(this._object,U.DebugController.Events.StateChanged,f=>{this._dispatchEvent("stateChanged",f)}),e.eventsHelper.addEventListener(this._object,U.DebugController.Events.InspectRequested,({selector:f,locator:d,ariaSnapshot:v})=>{this._dispatchEvent("inspectRequested",{selector:f,locator:d,ariaSnapshot:v})}),e.eventsHelper.addEventListener(this._object,U.DebugController.Events.SourceChanged,({text:f,header:d,footer:v,actions:a})=>{this._dispatchEvent("sourceChanged",{text:f,header:d,footer:v,actions:a})}),e.eventsHelper.addEventListener(this._object,U.DebugController.Events.Paused,({paused:f})=>{this._dispatchEvent("paused",{paused:f})}),e.eventsHelper.addEventListener(this._object,U.DebugController.Events.SetModeRequested,({mode:f})=>{this._dispatchEvent("setModeRequested",{mode:f})})]}async initialize(u,_){this._object.initialize(u.codegenId,u.sdkLanguage)}async setReportStateChanged(u,_){this._object.setReportStateChanged(u.enabled)}async resetForReuse(u,_){await this._object.resetForReuse(_)}async navigate(u,_){await this._object.navigate(_,u.url)}async setRecorderMode(u,_){await this._object.setRecorderMode(_,u)}async highlight(u,_){await this._object.highlight(_,u)}async hideHighlight(u,_){await this._object.hideHighlight(_)}async resume(u,_){await this._object.resume(_)}async kill(u,_){this._object.kill()}async closeAllBrowsers(u,_){await this._object.closeAllBrowsers()}_onDispose(){e.eventsHelper.removeEventListeners(this._listeners),this._object.dispose()}}return Sh}var xh,Yb;function WT(){if(Yb)return xh;Yb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(d,v)=>{for(var a in v)t(d,a,{get:v[a],enumerable:!0})},V=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of i(v))!E.call(d,n)&&n!==a&&t(d,n,{get:()=>v[n],enumerable:!(s=r(v,n))||s.enumerable});return d},te=d=>V(t({},"__esModule",{value:!0}),d),P={};R(P,{PlaywrightConnection:()=>f}),xh=te(P);var e=qo(),U=mf(),C=Ti(),w=$T(),g=Zw(),u=nr(),_=Mr();class f{constructor(v,a,s,n,o,h){this._cleanups=[],this._disconnected=!1,this._ws=a,this._semaphore=v,this._id=h,this._profileName=new Date().toISOString();const m=this._semaphore.acquire();if(this._dispatcherConnection=new e.DispatcherConnection,this._dispatcherConnection.onmessage=async c=>{if(await m,a.readyState!==a.CLOSING){const l=JSON.stringify(c);_.debugLogger.isEnabled("server:channel")&&_.debugLogger.log("server:channel",`[${this._id}] ${(0,u.monotonicTime)()*1e3} SEND ► ${l}`),_.debugLogger.isEnabled("server:metadata")&&this.logServerMetadata(c,l,"SEND"),a.send(l)}},a.on("message",async c=>{await m;const l=Buffer.from(c).toString(),x=JSON.parse(l);_.debugLogger.isEnabled("server:channel")&&_.debugLogger.log("server:channel",`[${this._id}] ${(0,u.monotonicTime)()*1e3} ◀ RECV ${l}`),_.debugLogger.isEnabled("server:metadata")&&this.logServerMetadata(x,l,"RECV"),this._dispatcherConnection.dispatch(x)}),a.on("close",()=>this._onDisconnect()),a.on("error",c=>this._onDisconnect(c)),s){_.debugLogger.log("server",`[${this._id}] engaged reuse controller mode`),this._root=new w.DebugControllerDispatcher(this._dispatcherConnection,n.debugController);return}this._root=new e.RootDispatcher(this._dispatcherConnection,async(c,l)=>{await(0,g.startProfiling)();const x=await o();if(x.preLaunchedBrowser){const b=x.preLaunchedBrowser;b.options.sdkLanguage=l.sdkLanguage,b.on(C.Browser.Events.Disconnected,()=>{this.close({code:1001,reason:"Browser closed"})})}x.preLaunchedAndroidDevice&&x.preLaunchedAndroidDevice.on(U.AndroidDevice.Events.Close,()=>{this.close({code:1001,reason:"Android device disconnected"})}),x.dispose&&this._cleanups.push(x.dispose);const T=new e.PlaywrightDispatcher(c,n,x);return this._cleanups.push(()=>T.cleanup()),T})}async _onDisconnect(v){this._disconnected=!0,_.debugLogger.log("server",`[${this._id}] disconnected. error: ${v}`),await this._root.stopPendingOperations(new Error("Disconnected")).catch(()=>{}),this._root._dispose(),_.debugLogger.log("server",`[${this._id}] starting cleanup`);for(const a of this._cleanups)await a().catch(()=>{});await(0,g.stopProfiling)(this._profileName),this._semaphore.release(),_.debugLogger.log("server",`[${this._id}] finished cleanup`)}logServerMetadata(v,a,s){const n={wallTime:Date.now(),id:v.id,guid:v.guid,method:v.method,payloadSizeInBytes:Buffer.byteLength(a,"utf-8")};_.debugLogger.log("server:metadata",(s==="SEND"?"SEND ► ":"◀ RECV ")+JSON.stringify(n))}async close(v){if(!this._disconnected){_.debugLogger.log("server",`[${this._id}] force closing connection: ${(v==null?void 0:v.reason)||""} (${(v==null?void 0:v.code)||0})`);try{this._ws.close(v==null?void 0:v.code,v==null?void 0:v.reason)}catch{}}}}return xh}var Eh,Xb;function xy(){if(Xb)return Eh;Xb=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(T,b)=>{for(var p in b)r(T,p,{get:b[p],enumerable:!0})},te=(T,b,p,O)=>{if(b&&typeof b=="object"||typeof b=="function")for(let z of E(b))!R.call(T,z)&&z!==p&&r(T,z,{get:()=>b[z],enumerable:!(O=i(b,z))||O.enumerable});return T},P=T=>te(r({},"__esModule",{value:!0}),T),e={};V(e,{PlaywrightServer:()=>o}),Eh=P(e);var U=WT(),C=ps(),w=Kw(),g=En(),u=ey(),_=Yn(),f=xi(),d=nr(),v=qo(),a=Vs(),s=Ti(),n=bn();class o{constructor(b){this._dontReuseBrowsers=new Set,this._options=b,b.preLaunchedBrowser&&(this._playwright=b.preLaunchedBrowser.attribution.playwright,this._dontReuse(b.preLaunchedBrowser)),b.preLaunchedAndroidDevice&&(this._playwright=b.preLaunchedAndroidDevice._android.attribution.playwright),this._playwright??(this._playwright=(0,C.createPlaywright)({sdkLanguage:"javascript",isServer:!0}));const p=new w.Semaphore(this._options.maxConnections),O=new w.Semaphore(1),z=new w.Semaphore(1);this._wsServer=new u.WSServer({onRequest:($,q)=>{if($.method==="GET"&&$.url==="/json"){q.setHeader("Content-Type","application/json"),q.end(JSON.stringify({wsEndpointPath:this._options.path}));return}q.end("Running")},onUpgrade:($,q)=>{const J=h($.headers["user-agent"]||"");if(J)return{error:`HTTP/${$.httpVersion} 428 Precondition Required\r
\r
${J}`}},onHeaders:$=>{t.PWTEST_SERVER_WS_HEADERS&&$.push(t.PWTEST_SERVER_WS_HEADERS)},onConnection:($,q,J,le)=>{const _e=$.headers["x-playwright-browser"],ge=q.searchParams.get("browser")||(Array.isArray(_e)?_e[0]:_e)||null,ne=$.headers["x-playwright-proxy"],S=q.searchParams.get("proxy")||(Array.isArray(ne)?ne[0]:ne),j=$.headers["x-playwright-launch-options"]||"",y=Array.isArray(j)?j[0]:j,I=q.searchParams.get("launch-options");let D={timeout:g.DEFAULT_PLAYWRIGHT_LAUNCH_TIMEOUT};try{D=JSON.parse(I||y),D.timeout||(D.timeout=g.DEFAULT_PLAYWRIGHT_LAUNCH_TIMEOUT)}catch{}const ie=this._options.mode==="extension";if(D=c(D,ie),t.PW_BROWSER_SERVER&&q.searchParams.has("connect")){const me=q.searchParams.get("connect");if(me!=="first")throw new Error(`Unknown connect filter: ${me}`);return new U.PlaywrightConnection(p,J,!1,this._playwright,()=>this._initConnectMode(le,me,ge,D),le)}return ie?q.searchParams.has("debug-controller")?new U.PlaywrightConnection(O,J,!0,this._playwright,async()=>{throw new Error("shouldnt be used")},le):new U.PlaywrightConnection(z,J,!1,this._playwright,()=>this._initReuseBrowsersMode(ge,D,le),le):this._options.mode==="launchServer"||this._options.mode==="launchServerShared"?this._options.preLaunchedBrowser?new U.PlaywrightConnection(p,J,!1,this._playwright,()=>this._initPreLaunchedBrowserMode(le),le):new U.PlaywrightConnection(p,J,!1,this._playwright,()=>this._initPreLaunchedAndroidMode(le),le):new U.PlaywrightConnection(p,J,!1,this._playwright,()=>this._initLaunchBrowserMode(ge,S,D,le),le)}})}async _initReuseBrowsersMode(b,p,O){d.debugLogger.log("server",`[${O}] engaged reuse browsers mode for ${b}`);const z=m(p);let $=this._playwright.allBrowsers().find(q=>q.options.name!==b||this._dontReuseBrowsers.has(q)?!1:m({...q.options.originalLaunchOptions,timeout:g.DEFAULT_PLAYWRIGHT_LAUNCH_TIMEOUT})===z);for(const q of this._playwright.allBrowsers())q!==$&&(this._dontReuseBrowsers.has(q)||q.options.name===b&&q.options.channel===p.channel&&await q.close({reason:"Connection terminated"}));if(!$){const q=this._playwright[b||"chromium"];$=await new n.ProgressController((0,v.serverSideCallMetadata)(),q).run(le=>q.launch(le,{...p,headless:!!t.PW_DEBUG_CONTROLLER_HEADLESS}),p.timeout)}return{preLaunchedBrowser:$,denyLaunch:!0,dispose:async()=>{for(const q of $.contexts())q.pages().length||await q.close({reason:"Connection terminated"})}}}async _initConnectMode(b,p,O,z){O??(O="chromium"),d.debugLogger.log("server",`[${b}] engaged connect mode`);let $=this._playwright.allBrowsers().find(q=>q.options.name===O);if(!$){const q=this._playwright[O];$=await new n.ProgressController((0,v.serverSideCallMetadata)(),q).run(le=>q.launch(le,z),z.timeout),this._dontReuse($)}return{preLaunchedBrowser:$,denyLaunch:!0,sharedBrowser:!0}}async _initPreLaunchedBrowserMode(b){d.debugLogger.log("server",`[${b}] engaged pre-launched (browser) mode`);const p=this._options.preLaunchedBrowser;for(const O of this._playwright.allBrowsers())O!==p&&await O.close({reason:"Connection terminated"});return{preLaunchedBrowser:p,socksProxy:this._options.preLaunchedSocksProxy,sharedBrowser:this._options.mode==="launchServerShared",denyLaunch:!0}}async _initPreLaunchedAndroidMode(b){return d.debugLogger.log("server",`[${b}] engaged pre-launched (Android) mode`),{preLaunchedAndroidDevice:this._options.preLaunchedAndroidDevice,denyLaunch:!0}}async _initLaunchBrowserMode(b,p,O,z){d.debugLogger.log("server",`[${z}] engaged launch mode for "${b}"`);let $;p?($=new a.SocksProxy,$.setPattern(p),O.socksProxyPort=await $.listen(0),d.debugLogger.log("server",`[${z}] started socks proxy on port ${O.socksProxyPort}`)):O.socksProxyPort=void 0;const q=this._playwright[b],le=await new n.ProgressController((0,v.serverSideCallMetadata)(),q).run(_e=>q.launch(_e,O),O.timeout);return this._dontReuseBrowsers.add(le),{preLaunchedBrowser:le,socksProxy:$,sharedBrowser:!0,denyLaunch:!0,dispose:async()=>{await le.close({reason:"Connection terminated"}),$==null||$.close()}}}_dontReuse(b){this._dontReuseBrowsers.add(b),b.on(s.Browser.Events.Disconnected,()=>{this._dontReuseBrowsers.delete(b)})}async listen(b=0,p){return this._wsServer.listen(b,p,this._options.path)}async close(){await this._wsServer.close()}}function h(T){const b=T.match(/^Playwright\/(\d+\.\d+\.\d+)/);if(!b)return;const p=b[1].split(".").slice(0,2).join("."),O=(0,f.getPlaywrightVersion)(!0);if(p!==O)return(0,_.wrapInASCIIBox)(["Playwright version mismatch:",`  - server version: v${O}`,`  - client version: v${p}`,"","If you are using VSCode extension, restart VSCode.","","If you are connecting to a remote service,","keep your local Playwright version in sync","with the remote service version.","","<3 Playwright Team"].join(`
`),1)}function m(T){const b={...T};for(const p of Object.keys(b)){const O=p;b[O]===l[O]&&delete b[O]}for(const p of x)delete b[p];return JSON.stringify(b)}function c(T,b){return{channel:T.channel,args:T.args,ignoreAllDefaultArgs:T.ignoreAllDefaultArgs,ignoreDefaultArgs:T.ignoreDefaultArgs,timeout:T.timeout,headless:T.headless,proxy:T.proxy,chromiumSandbox:T.chromiumSandbox,firefoxUserPrefs:T.firefoxUserPrefs,slowMo:T.slowMo,executablePath:(0,d.isUnderTest)()||b?T.executablePath:void 0,downloadsPath:b?T.downloadsPath:void 0}}const l={ignoreAllDefaultArgs:!1,handleSIGINT:!1,handleSIGTERM:!1,handleSIGHUP:!1,headless:!0,devtools:!1},x=["headless","timeout","tracesDir"];return Eh}var Oh,Qb;function zT(){if(Qb)return Oh;Qb=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{AndroidServerLauncherImpl:()=>_}),Oh=te(P);var e=xy(),U=ps(),C=tn(),w=Ar(),g=bn(),u=qo();class _{async launchServer(d={}){const v=(0,U.createPlaywright)({sdkLanguage:"javascript",isServer:!0});let s=await new g.ProgressController((0,u.serverSideCallMetadata)(),v).run(l=>v.android.devices(l,{host:d.adbHost,port:d.adbPort,omitDriverInstall:d.omitDriverInstall}));if(s.length===0)throw new Error("No devices found");if(d.deviceSerialNumber&&(s=s.filter(l=>l.serial===d.deviceSerialNumber),s.length===0))throw new Error(`No device with serial number '${d.deviceSerialNumber}' was found`);if(s.length>1)throw new Error("More than one device found. Please specify deviceSerialNumber");const n=s[0],o=d.wsPath?d.wsPath.startsWith("/")?d.wsPath:`/${d.wsPath}`:`/${(0,C.createGuid)()}`,h=new e.PlaywrightServer({mode:"launchServer",path:o,maxConnections:1,preLaunchedAndroidDevice:n}),m=await h.listen(d.port,d.host),c=new w.ws.EventEmitter;return c.wsEndpoint=()=>m,c.close=()=>n.close(),c.kill=()=>n.close(),n.on("close",()=>{h.close(),c.emit("close")}),c}}return Oh}var Th,Zb;function VT(){if(Zb)return Th;Zb=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(l,x)=>{for(var T in x)r(l,T,{get:x[T],enumerable:!0})},P=(l,x,T,b)=>{if(x&&typeof x=="object"||typeof x=="function")for(let p of E(x))!V.call(l,p)&&p!==T&&r(l,p,{get:()=>x[p],enumerable:!(b=i(x,p))||b.enumerable});return l},e=(l,x,T)=>(T=l!=null?t(R(l)):{},P(!l||!l.__esModule?r(T,"default",{value:l,enumerable:!0}):T,l)),U=l=>P(r({},"__esModule",{value:!0}),l),C={};te(C,{BrowserServerLauncherImpl:()=>h}),Th=U(C);var w=xy(),g=hn(),u=Tr(),_=ps(),f=tn(),d=Xn(),v=pn(),a=En(),s=Ar(),n=e(Fp()),o=bn();class h{constructor(x){this._browserName=x}async launchServer(x={}){const T=(0,_.createPlaywright)({sdkLanguage:"javascript",isServer:!0}),b=(0,u.serverSideCallMetadata)(),p={tChannelImpl:(_e,ge,ne)=>{throw new n.ValidationError(`${ne}: channels are not expected in launchServer`)},binary:"buffer",isUnderTest:d.isUnderTest};let O={...x,ignoreDefaultArgs:Array.isArray(x.ignoreDefaultArgs)?x.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!x.ignoreDefaultArgs&&!Array.isArray(x.ignoreDefaultArgs),env:x.env?c(x.env):void 0,timeout:x.timeout??a.DEFAULT_PLAYWRIGHT_LAUNCH_TIMEOUT},z;try{z=await new o.ProgressController(b,T[this._browserName]).run(async ge=>{if(x._userDataDir!==void 0){const ne=n.scheme.BrowserTypeLaunchPersistentContextParams;return O=ne({...O,userDataDir:x._userDataDir},"",p),(await T[this._browserName].launchPersistentContext(ge,x._userDataDir,O))._browser}else{const ne=n.scheme.BrowserTypeLaunchParams;return O=ne(O,"",p),await T[this._browserName].launch(ge,O,m(x.logger))}})}catch(_e){const ge=g.helper.formatBrowserLogs(b.log);throw(0,v.rewriteErrorMessage)(_e,`${_e.message} Failed to launch browser.${ge}`),_e}const $=x.wsPath?x.wsPath.startsWith("/")?x.wsPath:`/${x.wsPath}`:`/${(0,f.createGuid)()}`,q=new w.PlaywrightServer({mode:x._sharedBrowser?"launchServerShared":"launchServer",path:$,maxConnections:1/0,preLaunchedBrowser:z}),J=await q.listen(x.port,x.host),le=new s.ws.EventEmitter;return le.process=()=>z.options.browserProcess.process,le.wsEndpoint=()=>J,le.close=()=>z.options.browserProcess.close(),le[Symbol.asyncDispose]=le.close,le.kill=()=>z.options.browserProcess.kill(),le._disconnectForTest=()=>q.close(),le._userDataDirForTest=z._userDataDirForTest,z.options.browserProcess.onclose=(_e,ge)=>{q.close(),le.emit("close",_e,ge)},le}}function m(l){return l?(x,T)=>{l.isEnabled("protocol","verbose")&&l.log("protocol","verbose",(x==="send"?"SEND ► ":"◀ RECV ")+JSON.stringify(T),[],{})}:void 0}function c(l){const x=[];for(const T in l)Object.is(l[T],void 0)||x.push({name:T,value:String(l[T])});return x}return Th}var Ch,ev;function $o(){if(ev)return Ch;ev=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{EventEmitter:()=>e}),Ch=te(P);class e{constructor(f){this._events=void 0,this._eventsCount=0,this._maxListeners=void 0,this._pendingHandlers=new Map,this._platform=f,(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0,this.on=this.addListener,this.off=this.removeListener}setMaxListeners(f){if(typeof f!="number"||f<0||Number.isNaN(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this}getMaxListeners(){return this._maxListeners===void 0?this._platform.defaultMaxListeners():this._maxListeners}emit(f,...d){const v=this._events;if(v===void 0)return!1;const a=v==null?void 0:v[f];if(a===void 0)return!1;if(typeof a=="function")this._callHandler(f,a,d);else{const s=a.length,n=a.slice();for(let o=0;o<s;++o)this._callHandler(f,n[o],d)}return!0}_callHandler(f,d,v){const a=Reflect.apply(d,this,v);if(!(a instanceof Promise))return;let s=this._pendingHandlers.get(f);s||(s=new Set,this._pendingHandlers.set(f,s)),s.add(a),a.catch(n=>{if(this._rejectionHandler)this._rejectionHandler(n);else throw n}).finally(()=>s.delete(a))}addListener(f,d){return this._addListener(f,d,!1)}on(f,d){return this._addListener(f,d,!1)}_addListener(f,d,v){U(d);let a=this._events,s;if(a===void 0?(a=this._events=Object.create(null),this._eventsCount=0):(a.newListener!==void 0&&(this.emit("newListener",f,w(d)),a=this._events),s=a[f]),s===void 0)s=a[f]=d,++this._eventsCount;else{typeof s=="function"?s=a[f]=v?[d,s]:[s,d]:v?s.unshift(d):s.push(d);const n=this.getMaxListeners();if(n>0&&s.length>n&&!s.warned){s.warned=!0;const o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=this,o.type=f,o.count=s.length,this._platform.isUnderTest()||console.warn(o)}}return this}prependListener(f,d){return this._addListener(f,d,!0)}once(f,d){return U(d),this.on(f,new C(this,f,d).wrapperFunction),this}prependOnceListener(f,d){return U(d),this.prependListener(f,new C(this,f,d).wrapperFunction),this}removeListener(f,d){U(d);const v=this._events;if(v===void 0)return this;const a=v[f];if(a===void 0)return this;if(a===d||a.listener===d)--this._eventsCount===0?this._events=Object.create(null):(delete v[f],v.removeListener&&this.emit("removeListener",f,a.listener??d));else if(typeof a!="function"){let s=-1,n;for(let o=a.length-1;o>=0;o--)if(a[o]===d||u(a[o])===d){n=u(a[o]),s=o;break}if(s<0)return this;s===0?a.shift():a.splice(s,1),a.length===1&&(v[f]=a[0]),v.removeListener!==void 0&&this.emit("removeListener",f,n||d)}return this}off(f,d){return this.removeListener(f,d)}removeAllListeners(f,d){if(this._removeAllListeners(f),!d)return this;if(d.behavior==="wait"){const v=[];return this._rejectionHandler=a=>v.push(a),this._waitFor(f).then(()=>{if(v.length)throw v[0]})}return d.behavior==="ignoreErrors"&&(this._rejectionHandler=()=>{}),Promise.resolve()}_removeAllListeners(f){const d=this._events;if(!d)return;if(!d.removeListener){f===void 0?(this._events=Object.create(null),this._eventsCount=0):d[f]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete d[f]);return}if(f===void 0){const a=Object.keys(d);let s;for(let n=0;n<a.length;++n)s=a[n],s!=="removeListener"&&this._removeAllListeners(s);this._removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0;return}const v=d[f];if(typeof v=="function")this.removeListener(f,v);else if(v!==void 0)for(let a=v.length-1;a>=0;a--)this.removeListener(f,v[a])}listeners(f){return this._listeners(this,f,!0)}rawListeners(f){return this._listeners(this,f,!1)}listenerCount(f){const d=this._events;if(d!==void 0){const v=d[f];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}eventNames(){return this._eventsCount>0&&this._events?Reflect.ownKeys(this._events):[]}async _waitFor(f){let d=[];if(f)d=[...this._pendingHandlers.get(f)||[]];else{d=[];for(const[,v]of this._pendingHandlers)d.push(...v)}await Promise.all(d)}_listeners(f,d,v){const a=f._events;if(a===void 0)return[];const s=a[d];return s===void 0?[]:typeof s=="function"?v?[w(s)]:[s]:v?g(s):s.slice()}}function U(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}class C{constructor(f,d,v){this._fired=!1,this._eventEmitter=f,this._eventType=d,this._listener=v,this.wrapperFunction=this._handle.bind(this),this.wrapperFunction.listener=v}_handle(...f){if(!this._fired)return this._fired=!0,this._eventEmitter.removeListener(this._eventType,this.wrapperFunction),this._listener.apply(this._eventEmitter,f)}}function w(_){return u(_)??_}function g(_){return _.map(f=>u(f)??f)}function u(_){return _.listener}return Ch}var Ph,tv;function KT(){if(tv)return Ph;tv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{captureLibraryStackTrace:()=>U}),Ph=te(P);var e=pn();function U(C){let g=(0,e.captureRawStack)().map(d=>{const v=(0,e.parseStackFrame)(d,C.pathSeparator,C.showInternalStackFrames());if(!v||!v.file)return null;const a=!!C.coreDir&&v.file.startsWith(C.coreDir);return{frame:v,frameText:d,isPlaywrightLibrary:a}}).filter(Boolean),u="";for(let d=0;d<g.length-1;d++){const v=g[d];if(v.isPlaywrightLibrary&&!g[d+1].isPlaywrightLibrary){u=u||_(v.frame.function);break}}function _(d){if(!d)return"";const v=d.match(/(API|JS|CDP|[A-Z])(.*)/);return v?v[1].toLowerCase()+v[2]:d}const f=C.boxedStackPrefixes();return g=g.filter(d=>!f.some(v=>d.frame.file.startsWith(v))),{frames:g.map(d=>d.frame),apiName:u}}return Ph}var kh,rv;function Jr(){if(rv)return kh;rv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(d,v)=>{for(var a in v)t(d,a,{get:v[a],enumerable:!0})},V=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of i(v))!E.call(d,n)&&n!==a&&t(d,n,{get:()=>v[n],enumerable:!(s=r(v,n))||s.enumerable});return d},te=d=>V(t({},"__esModule",{value:!0}),d),P={};R(P,{ChannelOwner:()=>u}),kh=te(P);var e=$o(),U=Io(),C=us(),w=KT(),g=pn();class u extends e.EventEmitter{constructor(v,a,s,n){const o=v instanceof u?v._connection:v;super(o._platform),this._objects=new Map,this._eventToSubscriptionMapping=new Map,this._wasCollected=!1,this.setMaxListeners(0),this._connection=o,this._type=a,this._guid=s,this._parent=v instanceof u?v:void 0,this._instrumentation=this._connection._instrumentation,this._connection._objects.set(s,this),this._parent&&(this._parent._objects.set(s,this),this._logger=this._parent._logger),this._channel=this._createChannel(new e.EventEmitter(o._platform)),this._initializer=n}_setEventToSubscriptionMapping(v){this._eventToSubscriptionMapping=v}_updateSubscription(v,a){const s=this._eventToSubscriptionMapping.get(String(v));s&&this._channel.updateSubscription({event:s,enabled:a}).catch(()=>{})}on(v,a){return this.listenerCount(v)||this._updateSubscription(v,!0),super.on(v,a),this}addListener(v,a){return this.listenerCount(v)||this._updateSubscription(v,!0),super.addListener(v,a),this}prependListener(v,a){return this.listenerCount(v)||this._updateSubscription(v,!0),super.prependListener(v,a),this}off(v,a){return super.off(v,a),this.listenerCount(v)||this._updateSubscription(v,!1),this}removeListener(v,a){return super.removeListener(v,a),this.listenerCount(v)||this._updateSubscription(v,!1),this}_adopt(v){v._parent._objects.delete(v._guid),this._objects.set(v._guid,v),v._parent=this}_dispose(v){this._parent&&this._parent._objects.delete(this._guid),this._connection._objects.delete(this._guid),this._wasCollected=v==="gc";for(const a of[...this._objects.values()])a._dispose(v);this._objects.clear()}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._objects.values()).map(v=>v._debugScopeState())}}_validatorToWireContext(){return{tChannelImpl:f,binary:this._connection.rawBuffers()?"buffer":"toBase64",isUnderTest:()=>this._platform.isUnderTest()}}_createChannel(v){const a=new Proxy(v,{get:(s,n)=>{if(typeof n=="string"){const o=(0,U.maybeFindValidator)(this._type,n,"Params"),{internal:h}=C.methodMetainfo.get(this._type+"."+n)||{};if(o)return async m=>await this._wrapApiCall(async c=>{const l=o(m,"",this._validatorToWireContext());return!c.internal&&!c.reported?(c.reported=!0,this._instrumentation.onApiCallBegin(c,{type:this._type,method:n,params:m}),_(this._platform,this._logger,`=> ${c.apiName} started`),await this._connection.sendMessageToServer(this,n,l,c)):await this._connection.sendMessageToServer(this,n,l,{internal:!0})},{internal:h})}return s[n]}});return a._object=this,a}async _wrapApiCall(v,a){const s=this._logger,n=this._platform.zones.current().data();if(n)return await v(n);const o=(0,w.captureLibraryStackTrace)(this._platform),h={title:a==null?void 0:a.title,apiName:o.apiName,frames:o.frames,internal:(a==null?void 0:a.internal)??!1,reported:!1,userData:void 0,stepId:void 0};try{const m=await this._platform.zones.current().push(h).run(async()=>await v(h));return a!=null&&a.internal||(_(this._platform,s,`<= ${h.apiName} succeeded`),this._instrumentation.onApiCallEnd(h)),m}catch(m){const c=(this._platform.showInternalStackFrames()||this._platform.isUnderTest())&&m.stack?`
<inner error>
`+m.stack:"";h.apiName&&!h.apiName.includes("<anonymous>")&&(m.message=h.apiName+": "+m.message);const l=`
`+(0,g.stringifyStackFrames)(o.frames).join(`
`)+c;throw l.trim()?m.stack=m.message+l:m.stack="",a!=null&&a.internal||(h.error=m,_(this._platform,s,`<= ${h.apiName} failed`),this._instrumentation.onApiCallEnd(h)),m}}_toImpl(){var v,a;return(a=(v=this._connection).toImpl)==null?void 0:a.call(v,this)}toJSON(){return{_type:this._type,_guid:this._guid}}}function _(d,v,a){v&&v.isEnabled("api","info")&&v.log("api","info",a,[],{color:"cyan"}),d.log("api",a)}function f(d,v,a,s){if(v._object instanceof u&&(d==="*"||d.includes(v._object._type)))return{guid:v._object._guid};throw new U.ValidationError(`${a}: expected channel ${d.toString()}`)}return kh}var Ah,nv;function Ey(){if(nv)return Ah;nv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{Stream:()=>U}),Ah=te(P);var e=Jr();class U extends e.ChannelOwner{static from(w){return w._object}constructor(w,g,u,_){super(w,g,u,_)}stream(){return this._platform.streamReadable(this._channel)}}return Ah}var Ih,iv;function fs(){if(iv)return Ih;iv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{fileUploadSizeLimit:()=>e,mkdirIfNeeded:()=>U}),Ih=te(P);const e=50*1024*1024;async function U(C,w){await C.fs().promises.mkdir(C.path().dirname(w),{recursive:!0}).catch(()=>{})}return Ih}var Nh,sv;function ra(){if(sv)return Nh;sv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{Artifact:()=>w}),Nh=te(P);var e=Jr(),U=Ey(),C=fs();class w extends e.ChannelOwner{static from(u){return u._object}async pathAfterFinished(){if(this._connection.isRemote())throw new Error("Path is not available when connecting remotely. Use saveAs() to save a local copy.");return(await this._channel.pathAfterFinished()).value}async saveAs(u){if(!this._connection.isRemote()){await this._channel.saveAs({path:u});return}const _=await this._channel.saveAsStream(),f=U.Stream.from(_.stream);await(0,C.mkdirIfNeeded)(this._platform,u),await new Promise((d,v)=>{f.stream().pipe(this._platform.fs().createWriteStream(u)).on("finish",d).on("error",v)})}async failure(){return(await this._channel.failure()).error||null}async createReadStream(){const u=await this._channel.stream();return U.Stream.from(u.stream).stream()}async readIntoBuffer(){const u=await this.createReadStream();return await new Promise((_,f)=>{const d=[];u.on("data",v=>{d.push(v)}),u.on("end",()=>{_(Buffer.concat(d))}),u.on("error",f)})}async cancel(){return await this._channel.cancel()}async delete(){return await this._channel.delete()}}return Nh}var Rh,av;function bf(){if(av)return Rh;av=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{CDPSession:()=>U}),Rh=te(P);var e=Jr();class U extends e.ChannelOwner{static from(w){return w._object}constructor(w,g,u,_){super(w,g,u,_),this._channel.on("event",({method:f,params:d})=>{this.emit(f,d)}),this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}async send(w,g){return(await this._channel.send({method:w,params:g})).result}async detach(){return await this._channel.detach()}}return Rh}var Lh,ov;function ms(){if(ov)return Lh;ov=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{addSourceUrlToScript:()=>w,envObjectToArray:()=>U,evaluationScript:()=>C}),Lh=te(P);var e=Wn();function U(g){const u=[];for(const _ in g)Object.is(g[_],void 0)||u.push({name:_,value:String(g[_])});return u}async function C(g,u,_,f=!0){if(typeof u=="function"){const d=u.toString(),v=Object.is(_,void 0)?"undefined":JSON.stringify(_);return`(${d})(${v})`}if(_!==void 0)throw new Error("Cannot evaluate a string with arguments");if((0,e.isString)(u))return u;if(u.content!==void 0)return u.content;if(u.path!==void 0){let d=await g.fs().promises.readFile(u.path,"utf8");return f&&(d=w(d,u.path)),d}throw new Error("Either path or content property must be present")}function w(g,u){return`${g}
//# sourceURL=${u.replace(/\n/g,"")}`}return Lh}var Dh,cv;function GT(){if(cv)return Dh;cv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Clock:()=>e}),Dh=te(P);class e{constructor(g){this._browserContext=g}async install(g={}){await this._browserContext._channel.clockInstall(g.time!==void 0?U(g.time):{})}async fastForward(g){await this._browserContext._channel.clockFastForward(C(g))}async pauseAt(g){await this._browserContext._channel.clockPauseAt(U(g))}async resume(){await this._browserContext._channel.clockResume({})}async runFor(g){await this._browserContext._channel.clockRunFor(C(g))}async setFixedTime(g){await this._browserContext._channel.clockSetFixedTime(U(g))}async setSystemTime(g){await this._browserContext._channel.clockSetSystemTime(U(g))}}function U(w){if(typeof w=="number")return{timeNumber:w};if(typeof w=="string")return{timeString:w};if(!isFinite(w.getTime()))throw new Error(`Invalid date: ${w}`);return{timeNumber:w.getTime()}}function C(w){return{ticksNumber:typeof w=="number"?w:void 0,ticksString:typeof w=="string"?w:void 0}}return Dh}var Mh,lv;function Mn(){if(lv)return Mh;lv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{TargetClosedError:()=>w,TimeoutError:()=>C,isTargetClosedError:()=>g,parseError:()=>_,serializeError:()=>u}),Mh=te(P);var e=No(),U=Wn();class C extends Error{constructor(d){super(d),this.name="TimeoutError"}}class w extends Error{constructor(d){super(d||"Target page, context or browser has been closed")}}function g(f){return f instanceof w}function u(f){return(0,U.isError)(f)?{error:{message:f.message,stack:f.stack,name:f.name}}:{value:(0,e.serializeValue)(f,d=>({fallThrough:d}))}}function _(f){if(!f.error){if(f.value===void 0)throw new Error("Serialized error must have either an error or a value");return(0,e.parseSerializedValue)(f.value,void 0)}if(f.error.name==="TimeoutError"){const v=new C(f.error.message);return v.stack=f.error.stack||"",v}if(f.error.name==="TargetClosedError"){const v=new w(f.error.message);return v.stack=f.error.stack||"",v}const d=new Error(f.error.message);return d.stack=f.error.stack||"",d.name=f.error.name,d}return Mh}var Fh,uv;function Xi(){if(uv)return Fh;uv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(f,d)=>{for(var v in d)t(f,v,{get:d[v],enumerable:!0})},V=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of i(d))!E.call(f,s)&&s!==v&&t(f,s,{get:()=>d[s],enumerable:!(a=r(d,s))||a.enumerable});return f},te=f=>V(t({},"__esModule",{value:!0}),f),P={};R(P,{JSHandle:()=>w,assertMaxArguments:()=>_,parseResult:()=>u,serializeArgument:()=>g}),Fh=te(P);var e=Jr(),U=Mn(),C=No();class w extends e.ChannelOwner{static from(d){return d._object}constructor(d,v,a,s){super(d,v,a,s),this._preview=this._initializer.preview,this._channel.on("previewUpdated",({preview:n})=>this._preview=n)}async evaluate(d,v){const a=await this._channel.evaluateExpression({expression:String(d),isFunction:typeof d=="function",arg:g(v)});return u(a.value)}async evaluateHandle(d,v){const a=await this._channel.evaluateExpressionHandle({expression:String(d),isFunction:typeof d=="function",arg:g(v)});return w.from(a.handle)}async getProperty(d){const v=await this._channel.getProperty({name:d});return w.from(v.handle)}async getProperties(){const d=new Map;for(const{name:v,value:a}of(await this._channel.getPropertyList()).properties)d.set(v,w.from(a));return d}async jsonValue(){return u((await this._channel.jsonValue()).value)}asElement(){return null}async[Symbol.asyncDispose](){await this.dispose()}async dispose(){try{await this._channel.dispose()}catch(d){if((0,U.isTargetClosedError)(d))return;throw d}}toString(){return this._preview}}function g(f){const d=[],v=s=>(d.push(s),d.length-1);return{value:(0,C.serializeValue)(f,s=>s instanceof w?{h:v(s._channel)}:{fallThrough:s}),handles:d}}function u(f){return(0,C.parseSerializedValue)(f,void 0)}function _(f,d){if(f>d)throw new Error("Too many arguments. If you need to pass more than 1 argument to the function wrap them in an object.")}return Fh}var Bh,dv;function JT(){if(dv)return Bh;dv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{Accessibility:()=>U}),Bh=te(P);function e(C){const w={...C,value:C.valueNumber!==void 0?C.valueNumber:C.valueString,checked:C.checked==="checked"?!0:C.checked==="unchecked"?!1:C.checked,pressed:C.pressed==="pressed"?!0:C.pressed==="released"?!1:C.pressed,children:C.children?C.children.map(e):void 0};return delete w.valueNumber,delete w.valueString,w}class U{constructor(w){this._channel=w}async snapshot(w={}){const g=w.root?w.root._elementChannel:void 0,u=await this._channel.accessibilitySnapshot({interestingOnly:w.interestingOnly,root:g});return u.rootAXNode?e(u.rootAXNode):null}}return Bh}var jh,hv;function YT(){if(hv)return jh;hv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{Coverage:()=>e}),jh=te(P);class e{constructor(C){this._channel=C}async startJSCoverage(C={}){await this._channel.startJSCoverage(C)}async stopJSCoverage(){return(await this._channel.stopJSCoverage()).entries}async startCSSCoverage(C={}){await this._channel.startCSSCoverage(C)}async stopCSSCoverage(){return(await this._channel.stopCSSCoverage()).entries}}return jh}var Hh,pv;function XT(){if(pv)return Hh;pv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{Download:()=>e}),Hh=te(P);class e{constructor(C,w,g,u){this._page=C,this._url=w,this._suggestedFilename=g,this._artifact=u}page(){return this._page}url(){return this._url}suggestedFilename(){return this._suggestedFilename}async path(){return await this._artifact.pathAfterFinished()}async saveAs(C){return await this._artifact.saveAs(C)}async failure(){return await this._artifact.failure()}async createReadStream(){return await this._artifact.createReadStream()}async cancel(){return await this._artifact.cancel()}async delete(){return await this._artifact.delete()}}return Hh}var Uh,fv;function pi(){if(fv)return Uh;fv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{Events:()=>e}),Uh=te(P);const e={AndroidDevice:{WebView:"webview",Close:"close"},AndroidSocket:{Data:"data",Close:"close"},AndroidWebView:{Close:"close"},Browser:{Disconnected:"disconnected"},BrowserContext:{Console:"console",Close:"close",Dialog:"dialog",Page:"page",WebError:"weberror",BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished"},BrowserServer:{Close:"close"},Page:{Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",FrameNavigated:"framenavigated",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker"},WebSocket:{Close:"close",Error:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},Worker:{Close:"close"},ElectronApplication:{Close:"close",Console:"console",Window:"window"}};return Uh}var qh,mv;function Oy(){if(mv)return qh;mv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{getByAltTextSelector:()=>g,getByLabelSelector:()=>w,getByPlaceholderSelector:()=>_,getByRoleSelector:()=>d,getByTestIdSelector:()=>C,getByTextSelector:()=>f,getByTitleSelector:()=>u}),qh=te(P);var e=Ei();function U(v,a,s){return`internal:attr=[${v}=${(0,e.escapeForAttributeSelector)(a,(s==null?void 0:s.exact)||!1)}]`}function C(v,a){return`internal:testid=[${v}=${(0,e.escapeForAttributeSelector)(a,!0)}]`}function w(v,a){return"internal:label="+(0,e.escapeForTextSelector)(v,!!(a!=null&&a.exact))}function g(v,a){return U("alt",v,a)}function u(v,a){return U("title",v,a)}function _(v,a){return U("placeholder",v,a)}function f(v,a){return"internal:text="+(0,e.escapeForTextSelector)(v,!!(a!=null&&a.exact))}function d(v,a={}){const s=[];return a.checked!==void 0&&s.push(["checked",String(a.checked)]),a.disabled!==void 0&&s.push(["disabled",String(a.disabled)]),a.selected!==void 0&&s.push(["selected",String(a.selected)]),a.expanded!==void 0&&s.push(["expanded",String(a.expanded)]),a.includeHidden!==void 0&&s.push(["include-hidden",String(a.includeHidden)]),a.level!==void 0&&s.push(["level",String(a.level)]),a.name!==void 0&&s.push(["name",(0,e.escapeForAttributeSelector)(a.name,!!a.exact)]),a.pressed!==void 0&&s.push(["pressed",String(a.pressed)]),`internal:role=${v}${s.map(([n,o])=>`[${n}=${o}]`).join("")}`}return qh}var $h,gv;function Ty(){if(gv)return $h;gv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{FrameLocator:()=>f,Locator:()=>_,setTestIdAttribute:()=>a,testIdAttributeName:()=>v}),$h=te(P);var e=Vo(),U=nf(),C=Oy(),w=Ei(),g=Wn(),u=En();class _{constructor(n,o,h){if(this._frame=n,this._selector=o,h!=null&&h.hasText&&(this._selector+=` >> internal:has-text=${(0,w.escapeForTextSelector)(h.hasText,!1)}`),h!=null&&h.hasNotText&&(this._selector+=` >> internal:has-not-text=${(0,w.escapeForTextSelector)(h.hasNotText,!1)}`),h!=null&&h.has){const m=h.has;if(m._frame!==n)throw new Error('Inner "has" locator must belong to the same frame.');this._selector+=" >> internal:has="+JSON.stringify(m._selector)}if(h!=null&&h.hasNot){const m=h.hasNot;if(m._frame!==n)throw new Error('Inner "hasNot" locator must belong to the same frame.');this._selector+=" >> internal:has-not="+JSON.stringify(m._selector)}(h==null?void 0:h.visible)!==void 0&&(this._selector+=` >> visible=${h.visible?"true":"false"}`),this._frame._platform.inspectCustom&&(this[this._frame._platform.inspectCustom]=()=>this._inspect())}async _withElement(n,o){const h=this._frame._timeout({timeout:o.timeout}),m=h?(0,u.monotonicTime)()+h:0;return await this._frame._wrapApiCall(async()=>{const c=await this._frame._channel.waitForSelector({selector:this._selector,strict:!0,state:"attached",timeout:h}),l=e.ElementHandle.fromNullable(c.element);if(!l)throw new Error(`Could not resolve ${this._selector} to DOM Element`);try{return await n(l,m?m-(0,u.monotonicTime)():0)}finally{await l.dispose()}},{title:o.title,internal:o.internal})}_equals(n){return this._frame===n._frame&&this._selector===n._selector}page(){return this._frame.page()}async boundingBox(n){return await this._withElement(o=>o.boundingBox(),{title:"Bounding box",timeout:n==null?void 0:n.timeout})}async check(n={}){return await this._frame.check(this._selector,{strict:!0,...n})}async click(n={}){return await this._frame.click(this._selector,{strict:!0,...n})}async dblclick(n={}){await this._frame.dblclick(this._selector,{strict:!0,...n})}async dispatchEvent(n,o={},h){return await this._frame.dispatchEvent(this._selector,n,o,{strict:!0,...h})}async dragTo(n,o={}){return await this._frame.dragAndDrop(this._selector,n._selector,{strict:!0,...o})}async evaluate(n,o,h){return await this._withElement(m=>m.evaluate(n,o),{title:"Evaluate",timeout:h==null?void 0:h.timeout})}async evaluateAll(n,o){return await this._frame.$$eval(this._selector,n,o)}async evaluateHandle(n,o,h){return await this._withElement(m=>m.evaluateHandle(n,o),{title:"Evaluate",timeout:h==null?void 0:h.timeout})}async fill(n,o={}){return await this._frame.fill(this._selector,n,{strict:!0,...o})}async clear(n={}){await this._frame._wrapApiCall(()=>this.fill("",n),{title:"Clear"})}async _highlight(){return await this._frame._highlight(this._selector)}async highlight(){return await this._frame._highlight(this._selector)}locator(n,o){if((0,g.isString)(n))return new _(this._frame,this._selector+" >> "+n,o);if(n._frame!==this._frame)throw new Error("Locators must belong to the same frame.");return new _(this._frame,this._selector+" >> internal:chain="+JSON.stringify(n._selector),o)}getByTestId(n){return this.locator((0,C.getByTestIdSelector)(v(),n))}getByAltText(n,o){return this.locator((0,C.getByAltTextSelector)(n,o))}getByLabel(n,o){return this.locator((0,C.getByLabelSelector)(n,o))}getByPlaceholder(n,o){return this.locator((0,C.getByPlaceholderSelector)(n,o))}getByText(n,o){return this.locator((0,C.getByTextSelector)(n,o))}getByTitle(n,o){return this.locator((0,C.getByTitleSelector)(n,o))}getByRole(n,o={}){return this.locator((0,C.getByRoleSelector)(n,o))}frameLocator(n){return new f(this._frame,this._selector+" >> "+n)}filter(n){return new _(this._frame,this._selector,n)}async elementHandle(n){return await this._frame.waitForSelector(this._selector,{strict:!0,state:"attached",...n})}async elementHandles(){return await this._frame.$$(this._selector)}contentFrame(){return new f(this._frame,this._selector)}describe(n){return new _(this._frame,this._selector+" >> internal:describe="+JSON.stringify(n))}first(){return new _(this._frame,this._selector+" >> nth=0")}last(){return new _(this._frame,this._selector+" >> nth=-1")}nth(n){return new _(this._frame,this._selector+` >> nth=${n}`)}and(n){if(n._frame!==this._frame)throw new Error("Locators must belong to the same frame.");return new _(this._frame,this._selector+" >> internal:and="+JSON.stringify(n._selector))}or(n){if(n._frame!==this._frame)throw new Error("Locators must belong to the same frame.");return new _(this._frame,this._selector+" >> internal:or="+JSON.stringify(n._selector))}async focus(n){return await this._frame.focus(this._selector,{strict:!0,...n})}async blur(n){await this._frame._channel.blur({selector:this._selector,strict:!0,...n,timeout:this._frame._timeout(n)})}async count(){return await this._frame._queryCount(this._selector)}async _generateLocatorString(){const{value:n}=await this._frame._channel.generateLocatorString({selector:this._selector});return n===void 0?null:n}async getAttribute(n,o){return await this._frame.getAttribute(this._selector,n,{strict:!0,...o})}async hover(n={}){return await this._frame.hover(this._selector,{strict:!0,...n})}async innerHTML(n){return await this._frame.innerHTML(this._selector,{strict:!0,...n})}async innerText(n){return await this._frame.innerText(this._selector,{strict:!0,...n})}async inputValue(n){return await this._frame.inputValue(this._selector,{strict:!0,...n})}async isChecked(n){return await this._frame.isChecked(this._selector,{strict:!0,...n})}async isDisabled(n){return await this._frame.isDisabled(this._selector,{strict:!0,...n})}async isEditable(n){return await this._frame.isEditable(this._selector,{strict:!0,...n})}async isEnabled(n){return await this._frame.isEnabled(this._selector,{strict:!0,...n})}async isHidden(n){return await this._frame.isHidden(this._selector,{strict:!0,...n})}async isVisible(n){return await this._frame.isVisible(this._selector,{strict:!0,...n})}async press(n,o={}){return await this._frame.press(this._selector,n,{strict:!0,...o})}async screenshot(n={}){const o=n.mask;return await this._withElement((h,m)=>h.screenshot({...n,mask:o,timeout:m}),{title:"Screenshot",timeout:n.timeout})}async ariaSnapshot(n){return(await this._frame._channel.ariaSnapshot({...n,selector:this._selector,timeout:this._frame._timeout(n)})).snapshot}async scrollIntoViewIfNeeded(n={}){return await this._withElement((o,h)=>o.scrollIntoViewIfNeeded({...n,timeout:h}),{title:"Scroll into view",timeout:n.timeout})}async selectOption(n,o={}){return await this._frame.selectOption(this._selector,n,{strict:!0,...o})}async selectText(n={}){return await this._withElement((o,h)=>o.selectText({...n,timeout:h}),{title:"Select text",timeout:n.timeout})}async setChecked(n,o){n?await this.check(o):await this.uncheck(o)}async setInputFiles(n,o={}){return await this._frame.setInputFiles(this._selector,n,{strict:!0,...o})}async tap(n={}){return await this._frame.tap(this._selector,{strict:!0,...n})}async textContent(n){return await this._frame.textContent(this._selector,{strict:!0,...n})}async type(n,o={}){return await this._frame.type(this._selector,n,{strict:!0,...o})}async pressSequentially(n,o={}){return await this.type(n,o)}async uncheck(n={}){return await this._frame.uncheck(this._selector,{strict:!0,...n})}async all(){return new Array(await this.count()).fill(0).map((n,o)=>this.nth(o))}async allInnerTexts(){return await this._frame.$$eval(this._selector,n=>n.map(o=>o.innerText))}async allTextContents(){return await this._frame.$$eval(this._selector,n=>n.map(o=>o.textContent||""))}async waitFor(n){await this._frame._channel.waitForSelector({selector:this._selector,strict:!0,omitReturnValue:!0,...n,timeout:this._frame._timeout(n)})}async _expect(n,o){return this._frame._expect(n,{...o,selector:this._selector})}_inspect(){return this.toString()}toString(){return(0,U.asLocator)("javascript",this._selector)}}class f{constructor(n,o){this._frame=n,this._frameSelector=o}locator(n,o){if((0,g.isString)(n))return new _(this._frame,this._frameSelector+" >> internal:control=enter-frame >> "+n,o);if(n._frame!==this._frame)throw new Error("Locators must belong to the same frame.");return new _(this._frame,this._frameSelector+" >> internal:control=enter-frame >> "+n._selector,o)}getByTestId(n){return this.locator((0,C.getByTestIdSelector)(v(),n))}getByAltText(n,o){return this.locator((0,C.getByAltTextSelector)(n,o))}getByLabel(n,o){return this.locator((0,C.getByLabelSelector)(n,o))}getByPlaceholder(n,o){return this.locator((0,C.getByPlaceholderSelector)(n,o))}getByText(n,o){return this.locator((0,C.getByTextSelector)(n,o))}getByTitle(n,o){return this.locator((0,C.getByTitleSelector)(n,o))}getByRole(n,o={}){return this.locator((0,C.getByRoleSelector)(n,o))}owner(){return new _(this._frame,this._frameSelector)}frameLocator(n){return new f(this._frame,this._frameSelector+" >> internal:control=enter-frame >> "+n)}first(){return new f(this._frame,this._frameSelector+" >> nth=0")}last(){return new f(this._frame,this._frameSelector+" >> nth=-1")}nth(n){return new f(this._frame,this._frameSelector+` >> nth=${n}`)}}let d="data-testid";function v(){return d}function a(s){d=s}return $h}var Wh,_v;function vf(){if(_v)return Wh;_v=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Tracing:()=>C}),Wh=te(P);var e=ra(),U=Jr();class C extends U.ChannelOwner{constructor(g,u,_,f){super(g,u,_,f),this._includeSources=!1,this._isTracing=!1}static from(g){return g._object}async start(g={}){this._includeSources=!!g.sources,await this._channel.tracingStart({name:g.name,snapshots:g.snapshots,screenshots:g.screenshots,live:g._live});const{traceName:u}=await this._channel.tracingStartChunk({name:g.name,title:g.title});await this._startCollectingStacks(u)}async startChunk(g={}){const{traceName:u}=await this._channel.tracingStartChunk(g);await this._startCollectingStacks(u)}async group(g,u={}){await this._channel.tracingGroup({name:g,location:u.location})}async groupEnd(){await this._channel.tracingGroupEnd()}async _startCollectingStacks(g){var _;this._isTracing||(this._isTracing=!0,this._connection.setIsTracing(!0));const u=await((_=this._connection.localUtils())==null?void 0:_.tracingStarted({tracesDir:this._tracesDir,traceName:g}));this._stacksId=u==null?void 0:u.stacksId}async stopChunk(g={}){await this._doStopChunk(g.path)}async stop(g={}){await this._doStopChunk(g.path),await this._channel.tracingStop()}async _doStopChunk(g){if(this._resetStackCounter(),!g){await this._channel.tracingStopChunk({mode:"discard"}),this._stacksId&&await this._connection.localUtils().traceDiscarded({stacksId:this._stacksId});return}const u=this._connection.localUtils();if(!u)throw new Error("Cannot save trace in thin clients");if(!this._connection.isRemote()){const v=await this._channel.tracingStopChunk({mode:"entries"});await u.zip({zipFile:g,entries:v.entries,mode:"write",stacksId:this._stacksId,includeSources:this._includeSources});return}const f=await this._channel.tracingStopChunk({mode:"archive"});if(!f.artifact){this._stacksId&&await u.traceDiscarded({stacksId:this._stacksId});return}const d=e.Artifact.from(f.artifact);await d.saveAs(g),await d.delete(),await u.zip({zipFile:g,entries:[],mode:"append",stacksId:this._stacksId,includeSources:this._includeSources})}_resetStackCounter(){this._isTracing&&(this._isTracing=!1,this._connection.setIsTracing(!1))}}return Wh}var zh,bv;function Qi(){if(bv)return zh;bv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{TimeoutSettings:()=>U}),zh=te(P);var e=En();class U{constructor(w,g){this._parent=g,this._platform=w}setDefaultTimeout(w){this._defaultTimeout=w}setDefaultNavigationTimeout(w){this._defaultNavigationTimeout=w}defaultNavigationTimeout(){return this._defaultNavigationTimeout}defaultTimeout(){return this._defaultTimeout}navigationTimeout(w){return typeof w.timeout=="number"?w.timeout:this._defaultNavigationTimeout!==void 0?this._defaultNavigationTimeout:this._platform.isDebugMode()?0:this._defaultTimeout!==void 0?this._defaultTimeout:this._parent?this._parent.navigationTimeout(w):e.DEFAULT_PLAYWRIGHT_TIMEOUT}timeout(w){return typeof w.timeout=="number"?w.timeout:this._platform.isDebugMode()?0:this._defaultTimeout!==void 0?this._defaultTimeout:this._parent?this._parent.timeout(w):e.DEFAULT_PLAYWRIGHT_TIMEOUT}launchTimeout(w){return typeof w.timeout=="number"?w.timeout:this._platform.isDebugMode()?0:this._parent?this._parent.launchTimeout(w):e.DEFAULT_PLAYWRIGHT_LAUNCH_TIMEOUT}}return zh}var Vh,vv;function Wo(){if(vv)return Vh;vv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(b,p)=>{for(var O in p)t(b,O,{get:p[O],enumerable:!0})},V=(b,p,O,z)=>{if(p&&typeof p=="object"||typeof p=="function")for(let $ of i(p))!E.call(b,$)&&$!==O&&t(b,$,{get:()=>p[$],enumerable:!(z=r(p,$))||z.enumerable});return b},te=b=>V(t({},"__esModule",{value:!0}),b),P={};R(P,{APIRequest:()=>a,APIRequestContext:()=>s,APIResponse:()=>h}),Vh=te(P);var e=_s(),U=Jr(),C=Mn(),w=na(),g=vf(),u=Gr(),_=fs(),f=zi(),d=Wn(),v=Qi();class a{constructor(p){this._contexts=new Set,this._playwright=p}async newContext(p={}){var $,q;p={...this._playwright._defaultContextOptions,...p};const O=typeof p.storageState=="string"?JSON.parse(await this._playwright._platform.fs().promises.readFile(p.storageState,"utf8")):p.storageState,z=s.from((await this._playwright._channel.newRequest({...p,extraHTTPHeaders:p.extraHTTPHeaders?(0,f.headersObjectToArray)(p.extraHTTPHeaders):void 0,storageState:O,tracesDir:($=this._playwright._defaultLaunchOptions)==null?void 0:$.tracesDir,clientCertificates:await(0,e.toClientCertificatesProtocol)(this._playwright._platform,p.clientCertificates)})).request);return this._contexts.add(z),z._request=this,z._timeoutSettings.setDefaultTimeout(p.timeout??this._playwright._defaultContextTimeout),z._tracing._tracesDir=(q=this._playwright._defaultLaunchOptions)==null?void 0:q.tracesDir,await z._instrumentation.runAfterCreateRequestContext(z),z}}class s extends U.ChannelOwner{static from(p){return p._object}constructor(p,O,z,$){super(p,O,z,$),this._tracing=g.Tracing.from($.tracing),this._timeoutSettings=new v.TimeoutSettings(this._platform)}async[Symbol.asyncDispose](){await this.dispose()}async dispose(p={}){var O;this._closeReason=p.reason,await this._instrumentation.runBeforeCloseRequestContext(this);try{await this._channel.dispose(p)}catch(z){if((0,C.isTargetClosedError)(z))return;throw z}this._tracing._resetStackCounter(),(O=this._request)==null||O._contexts.delete(this)}async delete(p,O){return await this.fetch(p,{...O,method:"DELETE"})}async head(p,O){return await this.fetch(p,{...O,method:"HEAD"})}async get(p,O){return await this.fetch(p,{...O,method:"GET"})}async patch(p,O){return await this.fetch(p,{...O,method:"PATCH"})}async post(p,O){return await this.fetch(p,{...O,method:"POST"})}async put(p,O){return await this.fetch(p,{...O,method:"PUT"})}async fetch(p,O={}){const z=(0,d.isString)(p)?p:void 0,$=(0,d.isString)(p)?void 0:p;return await this._innerFetch({url:z,request:$,...O})}async _innerFetch(p={}){return await this._wrapApiCall(async()=>{var y,I,D;if(this._closeReason)throw new C.TargetClosedError(this._closeReason);(0,u.assert)(p.request||typeof p.url=="string","First argument must be either URL string or Request"),(0,u.assert)((p.data===void 0?0:1)+(p.form===void 0?0:1)+(p.multipart===void 0?0:1)<=1,"Only one of 'data', 'form' or 'multipart' can be specified"),(0,u.assert)(p.maxRedirects===void 0||p.maxRedirects>=0,"'maxRedirects' must be greater than or equal to '0'"),(0,u.assert)(p.maxRetries===void 0||p.maxRetries>=0,"'maxRetries' must be greater than or equal to '0'");const O=p.url!==void 0?p.url:p.request.url(),z=p.method||((y=p.request)==null?void 0:y.method());let $;typeof p.params=="string"?$=p.params:p.params instanceof URLSearchParams&&($=p.params.toString());const q=p.headers||((I=p.request)==null?void 0:I.headers()),J=q?(0,f.headersObjectToArray)(q):void 0;let le,_e,ge,ne;if(p.data!==void 0)if((0,d.isString)(p.data))l(J)?le=o(p.data)?p.data:JSON.stringify(p.data):ne=Buffer.from(p.data,"utf8");else if(Buffer.isBuffer(p.data))ne=p.data;else if(typeof p.data=="object"||typeof p.data=="number"||typeof p.data=="boolean")le=JSON.stringify(p.data);else throw new Error("Unexpected 'data' type");else if(p.form)if(globalThis.FormData&&p.form instanceof FormData){_e=[];for(const[ie,he]of p.form.entries()){if(typeof he!="string")throw new Error(`Expected string for options.form["${ie}"], found File. Please use options.multipart instead.`);_e.push({name:ie,value:he})}}else _e=x(p.form);else if(p.multipart)if(ge=[],globalThis.FormData&&p.multipart instanceof FormData){const ie=p.multipart;for(const[he,me]of ie.entries())if((0,d.isString)(me))ge.push({name:he,value:me});else{const ye={name:me.name,mimeType:me.type,buffer:Buffer.from(await me.arrayBuffer())};ge.push({name:he,file:ye})}}else for(const[ie,he]of Object.entries(p.multipart))ge.push(await n(this._platform,ie,he));ne===void 0&&le===void 0&&_e===void 0&&ge===void 0&&(ne=((D=p.request)==null?void 0:D.postDataBuffer())||void 0);const S={__testHookLookup:p.__testHookLookup},j=await this._channel.fetch({url:O,params:typeof p.params=="object"?x(p.params):void 0,encodedParams:$,method:z,headers:J,postData:ne,jsonData:le,formData:_e,multipartData:ge,timeout:this._timeoutSettings.timeout(p),failOnStatusCode:p.failOnStatusCode,ignoreHTTPSErrors:p.ignoreHTTPSErrors,maxRedirects:p.maxRedirects,maxRetries:p.maxRetries,...S});return new h(this,j.response)})}async storageState(p={}){const O=await this._channel.storageState({indexedDB:p.indexedDB});return p.path&&(await(0,_.mkdirIfNeeded)(this._platform,p.path),await this._platform.fs().promises.writeFile(p.path,JSON.stringify(O,void 0,2),"utf8")),O}}async function n(b,p,O){const z=typeof O;if(T(O)){const $=O;if(!Buffer.isBuffer($.buffer))throw new Error(`Unexpected buffer type of 'data.${p}'`);return{name:p,file:m($)}}else return z==="string"||z==="number"||z==="boolean"?{name:p,value:String(O)}:{name:p,file:await c(b,O)}}function o(b){if(typeof b!="string")return!1;try{return JSON.parse(b),!0}catch(p){if(p instanceof SyntaxError)return!1;throw p}}class h{constructor(p,O){this._request=p,this._initializer=O,this._headers=new w.RawHeaders(this._initializer.headers),p._platform.inspectCustom&&(this[p._platform.inspectCustom]=()=>this._inspect())}ok(){return this._initializer.status>=200&&this._initializer.status<=299}url(){return this._initializer.url}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return this._headers.headers()}headersArray(){return this._headers.headersArray()}async body(){return await this._request._wrapApiCall(async()=>{try{const p=await this._request._channel.fetchResponseBody({fetchUid:this._fetchUid()});if(p.binary===void 0)throw new Error("Response has been disposed");return p.binary}catch(p){throw(0,C.isTargetClosedError)(p)?new Error("Response has been disposed"):p}},{internal:!0})}async text(){return(await this.body()).toString("utf8")}async json(){const p=await this.text();return JSON.parse(p)}async[Symbol.asyncDispose](){await this.dispose()}async dispose(){await this._request._channel.disposeAPIResponse({fetchUid:this._fetchUid()})}_inspect(){const p=this.headersArray().map(({name:O,value:z})=>`  ${O}: ${z}`);return`APIResponse: ${this.status()} ${this.statusText()}
${p.join(`
`)}`}_fetchUid(){return this._initializer.fetchUid}async _fetchLog(){const{log:p}=await this._request._channel.fetchLog({fetchUid:this._fetchUid()});return p}}function m(b){return{name:b.name,mimeType:b.mimeType,buffer:b.buffer}}async function c(b,p){const O=await new Promise(($,q)=>{const J=[];p.on("data",le=>J.push(le)),p.on("end",()=>$(Buffer.concat(J))),p.on("error",le=>q(le))}),z=Buffer.isBuffer(p.path)?p.path.toString("utf8"):p.path;return{name:b.path().basename(z),buffer:O}}function l(b){if(!b)return!1;for(const{name:p,value:O}of b)if(p.toLocaleLowerCase()==="content-type")return O==="application/json";return!1}function x(b){if(!b)return;const p=[];for(const[O,z]of Object.entries(b))z!==void 0&&p.push({name:O,value:String(z)});return p}function T(b){return typeof b=="object"&&b.name&&b.mimeType&&b.buffer}return Vh}var Kh,wv;function gs(){if(wv)return Kh;wv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{Waiter:()=>C}),Kh=te(P);var e=Mn(),U=pn();class C{constructor(f,d){this._failures=[],this._logs=[],this._waitId=f._platform.createGuid(),this._channelOwner=f,this._savedZone=f._platform.zones.current().pop(),this._channelOwner._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"before",event:d}}).catch(()=>{}),this._dispose=[()=>this._channelOwner._wrapApiCall(async()=>{await this._channelOwner._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"after",error:this._error}})},{internal:!0}).catch(()=>{})]}static createForEvent(f,d){return new C(f,d)}async waitForEvent(f,d,v){const{promise:a,dispose:s}=w(f,d,this._savedZone,v);return await this.waitForPromise(a,s)}rejectOnEvent(f,d,v,a){const{promise:s,dispose:n}=w(f,d,this._savedZone,a);this._rejectOn(s.then(()=>{throw typeof v=="function"?v():v}),n)}rejectOnTimeout(f,d){if(!f)return;const{promise:v,dispose:a}=g(f);this._rejectOn(v.then(()=>{throw new e.TimeoutError(d)}),a)}rejectImmediately(f){this._immediateError=f}dispose(){for(const f of this._dispose)f()}async waitForPromise(f,d){try{if(this._immediateError)throw this._immediateError;const v=await Promise.race([f,...this._failures]);return d&&d(),v}catch(v){throw d&&d(),this._error=v.message,this.dispose(),(0,U.rewriteErrorMessage)(v,v.message+u(this._logs)),v}}log(f){this._logs.push(f),this._channelOwner._wrapApiCall(async()=>{await this._channelOwner._channel.waitForEventInfo({info:{waitId:this._waitId,phase:"log",message:f}})},{internal:!0}).catch(()=>{})}_rejectOn(f,d){this._failures.push(f),d&&this._dispose.push(d)}}function w(_,f,d,v){let a;return{promise:new Promise((o,h)=>{a=async m=>{await d.run(async()=>{try{if(v&&!await v(m))return;_.removeListener(f,a),o(m)}catch(c){_.removeListener(f,a),h(c)}})},_.addListener(f,a)}),dispose:()=>_.removeListener(f,a)}}function g(_){let f;return{promise:new Promise(a=>f=setTimeout(a,_)),dispose:()=>clearTimeout(f)}}function u(_){if(!_.length)return"";const f=" logs ",d=60,v=(d-f.length)/2,a=d-f.length-v;return`
${"=".repeat(v)}${f}${"=".repeat(a)}
${_.join(`
`)}
${"=".repeat(d)}`}return Kh}var Gh,yv;function zo(){if(yv)return Gh;yv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(_,f)=>{for(var d in f)t(_,d,{get:f[d],enumerable:!0})},V=(_,f,d,v)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of i(f))!E.call(_,a)&&a!==d&&t(_,a,{get:()=>f[a],enumerable:!(v=r(f,a))||v.enumerable});return _},te=_=>V(t({},"__esModule",{value:!0}),_),P={};R(P,{Worker:()=>u}),Gh=te(P);var e=Jr(),U=Mn(),C=pi(),w=Xi(),g=Fr();class u extends e.ChannelOwner{constructor(f,d,v,a){super(f,d,v,a),this._closedScope=new g.LongStandingScope,this._channel.on("close",()=>{this._page&&this._page._workers.delete(this),this._context&&this._context._serviceWorkers.delete(this),this.emit(C.Events.Worker.Close,this)}),this.once(C.Events.Worker.Close,()=>{var s;return this._closedScope.close(((s=this._page)==null?void 0:s._closeErrorWithReason())||new U.TargetClosedError)})}static from(f){return f._object}url(){return this._initializer.url}async evaluate(f,d){(0,w.assertMaxArguments)(arguments.length,2);const v=await this._channel.evaluateExpression({expression:String(f),isFunction:typeof f=="function",arg:(0,w.serializeArgument)(d)});return(0,w.parseResult)(v.value)}async evaluateHandle(f,d){(0,w.assertMaxArguments)(arguments.length,2);const v=await this._channel.evaluateExpressionHandle({expression:String(f),isFunction:typeof f=="function",arg:(0,w.serializeArgument)(d)});return w.JSHandle.from(v.handle)}}return Gh}var Jh,Sv;function na(){if(Sv)return Jh;Sv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=($,q)=>{for(var J in q)t($,J,{get:q[J],enumerable:!0})},V=($,q,J,le)=>{if(q&&typeof q=="object"||typeof q=="function")for(let _e of i(q))!E.call($,_e)&&_e!==J&&t($,_e,{get:()=>q[_e],enumerable:!(le=r(q,_e))||le.enumerable});return $},te=$=>V(t({},"__esModule",{value:!0}),$),P={};R(P,{RawHeaders:()=>z,Request:()=>m,Response:()=>T,Route:()=>c,RouteHandler:()=>O,WebSocket:()=>b,WebSocketRoute:()=>l,WebSocketRouteHandler:()=>x,validateHeaders:()=>p}),Jh=te(P);var e=Jr(),U=Mn(),C=pi(),w=Wo(),g=ia(),u=gs(),_=zo(),f=Gr(),d=zi(),v=di(),a=Fr(),s=af(),n=Wn(),o=pn(),h=sf();class m extends e.ChannelOwner{constructor(q,J,le,_e){super(q,J,le,_e),this._redirectedFrom=null,this._redirectedTo=null,this._failureText=null,this._fallbackOverrides={},this._redirectedFrom=m.fromNullable(_e.redirectedFrom),this._redirectedFrom&&(this._redirectedFrom._redirectedTo=this),this._provisionalHeaders=new z(_e.headers),this._timing={startTime:0,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1,responseEnd:-1}}static from(q){return q._object}static fromNullable(q){return q?m.from(q):null}url(){return this._fallbackOverrides.url||this._initializer.url}resourceType(){return this._initializer.resourceType}method(){return this._fallbackOverrides.method||this._initializer.method}postData(){var q;return((q=this._fallbackOverrides.postDataBuffer||this._initializer.postData)==null?void 0:q.toString("utf-8"))||null}postDataBuffer(){return this._fallbackOverrides.postDataBuffer||this._initializer.postData||null}postDataJSON(){const q=this.postData();if(!q)return null;const J=this.headers()["content-type"];if(J!=null&&J.includes("application/x-www-form-urlencoded")){const le={},_e=new URLSearchParams(q);for(const[ge,ne]of _e.entries())le[ge]=ne;return le}try{return JSON.parse(q)}catch{throw new Error("POST data is not a valid JSON object: "+q)}}headers(){return this._fallbackOverrides.headers?z._fromHeadersObjectLossy(this._fallbackOverrides.headers).headers():this._provisionalHeaders.headers()}async _actualHeaders(){return this._fallbackOverrides.headers?z._fromHeadersObjectLossy(this._fallbackOverrides.headers):(this._actualHeadersPromise||(this._actualHeadersPromise=this._wrapApiCall(async()=>new z((await this._channel.rawRequestHeaders()).headers),{internal:!0})),await this._actualHeadersPromise)}async allHeaders(){return(await this._actualHeaders()).headers()}async headersArray(){return(await this._actualHeaders()).headersArray()}async headerValue(q){return(await this._actualHeaders()).get(q)}async response(){return T.fromNullable((await this._channel.response()).response)}async _internalResponse(){return T.fromNullable((await this._channel.response()).response)}frame(){if(!this._initializer.frame)throw(0,f.assert)(this.serviceWorker()),new Error("Service Worker requests do not have an associated frame.");const q=g.Frame.from(this._initializer.frame);if(!q._page)throw new Error(["Frame for this navigation request is not available, because the request","was issued before the frame is created. You can check whether the request","is a navigation request by calling isNavigationRequest() method."].join(`
`));return q}_safePage(){var q;return((q=g.Frame.fromNullable(this._initializer.frame))==null?void 0:q._page)||null}serviceWorker(){return this._initializer.serviceWorker?_.Worker.from(this._initializer.serviceWorker):null}isNavigationRequest(){return this._initializer.isNavigationRequest}redirectedFrom(){return this._redirectedFrom}redirectedTo(){return this._redirectedTo}failure(){return this._failureText===null?null:{errorText:this._failureText}}timing(){return this._timing}async sizes(){const q=await this.response();if(!q)throw new Error("Unable to fetch sizes for failed request");return(await q._channel.sizes()).sizes}_setResponseEndTiming(q){this._timing.responseEnd=q,this._timing.responseStart===-1&&(this._timing.responseStart=q)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}_applyFallbackOverrides(q){q.url&&(this._fallbackOverrides.url=q.url),q.method&&(this._fallbackOverrides.method=q.method),q.headers&&(this._fallbackOverrides.headers=q.headers),(0,n.isString)(q.postData)?this._fallbackOverrides.postDataBuffer=Buffer.from(q.postData,"utf-8"):q.postData instanceof Buffer?this._fallbackOverrides.postDataBuffer=q.postData:q.postData&&(this._fallbackOverrides.postDataBuffer=Buffer.from(JSON.stringify(q.postData),"utf-8"))}_fallbackOverridesForContinue(){return this._fallbackOverrides}_targetClosedScope(){var q,J;return((q=this.serviceWorker())==null?void 0:q._closedScope)||((J=this._safePage())==null?void 0:J._closedOrCrashedScope)||new a.LongStandingScope}}class c extends e.ChannelOwner{constructor(q,J,le,_e){super(q,J,le,_e),this._handlingPromise=null,this._didThrow=!1}static from(q){return q._object}request(){return m.from(this._initializer.request)}async _raceWithTargetClose(q){return await this.request()._targetClosedScope().safeRace(q)}async _startHandling(){return this._handlingPromise=new a.ManualPromise,await this._handlingPromise}async fallback(q={}){this._checkNotHandled(),this.request()._applyFallbackOverrides(q),this._reportHandled(!1)}async abort(q){await this._handleRoute(async()=>{await this._raceWithTargetClose(this._channel.abort({errorCode:q}))})}async _redirectNavigationRequest(q){await this._handleRoute(async()=>{await this._raceWithTargetClose(this._channel.redirectNavigationRequest({url:q}))})}async fetch(q={}){return await this._wrapApiCall(async()=>await this._context.request._innerFetch({request:this.request(),data:q.postData,...q}))}async fulfill(q={}){await this._handleRoute(async()=>{await this._innerFulfill(q)})}async _handleRoute(q){this._checkNotHandled();try{await q(),this._reportHandled(!0)}catch(J){throw this._didThrow=!0,J}}async _innerFulfill(q={}){let J,{status:le,headers:_e,body:ge}=q;q.json!==void 0&&((0,f.assert)(q.body===void 0,"Can specify either body or json parameters"),ge=JSON.stringify(q.json)),q.response instanceof w.APIResponse&&(le??(le=q.response.status()),_e??(_e=q.response.headers()),ge===void 0&&q.path===void 0&&(q.response._request._connection===this._connection?J=q.response._fetchUid():ge=await q.response.body()));let ne=!1,S=0;if(q.path){const y=await this._platform.fs().promises.readFile(q.path);ge=y.toString("base64"),ne=!0,S=y.length}else(0,n.isString)(ge)?(ne=!1,S=Buffer.byteLength(ge)):ge&&(S=ge.length,ge=ge.toString("base64"),ne=!0);const j={};for(const y of Object.keys(_e||{}))j[y.toLowerCase()]=String(_e[y]);q.contentType?j["content-type"]=String(q.contentType):q.json?j["content-type"]="application/json":q.path&&(j["content-type"]=(0,h.getMimeTypeForPath)(q.path)||"application/octet-stream"),S&&!("content-length"in j)&&(j["content-length"]=String(S)),await this._raceWithTargetClose(this._channel.fulfill({status:le||200,headers:(0,d.headersObjectToArray)(j),body:ge,isBase64:ne,fetchResponseUid:J}))}async continue(q={}){await this._handleRoute(async()=>{this.request()._applyFallbackOverrides(q),await this._innerContinue(!1)})}_checkNotHandled(){if(!this._handlingPromise)throw new Error("Route is already handled!")}_reportHandled(q){const J=this._handlingPromise;this._handlingPromise=null,J.resolve(q)}async _innerContinue(q){const J=this.request()._fallbackOverridesForContinue();return await this._raceWithTargetClose(this._channel.continue({url:J.url,method:J.method,headers:J.headers?(0,d.headersObjectToArray)(J.headers):void 0,postData:J.postDataBuffer,isFallback:q}))}}class l extends e.ChannelOwner{constructor(q,J,le,_e){super(q,J,le,_e),this._connected=!1,this._server={onMessage:ge=>{this._onServerMessage=ge},onClose:ge=>{this._onServerClose=ge},connectToServer:()=>{throw new Error("connectToServer must be called on the page-side WebSocketRoute")},url:()=>this._initializer.url,close:async(ge={})=>{await this._channel.closeServer({...ge,wasClean:!0}).catch(()=>{})},send:ge=>{(0,n.isString)(ge)?this._channel.sendToServer({message:ge,isBase64:!1}).catch(()=>{}):this._channel.sendToServer({message:ge.toString("base64"),isBase64:!0}).catch(()=>{})},async[Symbol.asyncDispose](){await this.close()}},this._channel.on("messageFromPage",({message:ge,isBase64:ne})=>{this._onPageMessage?this._onPageMessage(ne?Buffer.from(ge,"base64"):ge):this._connected&&this._channel.sendToServer({message:ge,isBase64:ne}).catch(()=>{})}),this._channel.on("messageFromServer",({message:ge,isBase64:ne})=>{this._onServerMessage?this._onServerMessage(ne?Buffer.from(ge,"base64"):ge):this._channel.sendToPage({message:ge,isBase64:ne}).catch(()=>{})}),this._channel.on("closePage",({code:ge,reason:ne,wasClean:S})=>{this._onPageClose?this._onPageClose(ge,ne):this._channel.closeServer({code:ge,reason:ne,wasClean:S}).catch(()=>{})}),this._channel.on("closeServer",({code:ge,reason:ne,wasClean:S})=>{this._onServerClose?this._onServerClose(ge,ne):this._channel.closePage({code:ge,reason:ne,wasClean:S}).catch(()=>{})})}static from(q){return q._object}url(){return this._initializer.url}async close(q={}){await this._channel.closePage({...q,wasClean:!0}).catch(()=>{})}connectToServer(){if(this._connected)throw new Error("Already connected to the server");return this._connected=!0,this._channel.connect().catch(()=>{}),this._server}send(q){(0,n.isString)(q)?this._channel.sendToPage({message:q,isBase64:!1}).catch(()=>{}):this._channel.sendToPage({message:q.toString("base64"),isBase64:!0}).catch(()=>{})}onMessage(q){this._onPageMessage=q}onClose(q){this._onPageClose=q}async[Symbol.asyncDispose](){await this.close()}async _afterHandle(){this._connected||await this._channel.ensureOpened().catch(()=>{})}}class x{constructor(q,J,le){this._baseURL=q,this.url=J,this.handler=le}static prepareInterceptionPatterns(q){const J=[];let le=!1;for(const _e of q)(0,n.isString)(_e.url)?J.push({glob:_e.url}):(0,n.isRegExp)(_e.url)?J.push({regexSource:_e.url.source,regexFlags:_e.url.flags}):le=!0;return le?[{glob:"**/*"}]:J}matches(q){return(0,v.urlMatches)(this._baseURL,q,this.url,!0)}async handle(q){const J=this.handler;await J(q),await q._afterHandle()}}class T extends e.ChannelOwner{constructor(q,J,le,_e){super(q,J,le,_e),this._finishedPromise=new a.ManualPromise,this._provisionalHeaders=new z(_e.headers),this._request=m.from(this._initializer.request),Object.assign(this._request._timing,this._initializer.timing)}static from(q){return q._object}static fromNullable(q){return q?T.from(q):null}url(){return this._initializer.url}ok(){return this._initializer.status===0||this._initializer.status>=200&&this._initializer.status<=299}status(){return this._initializer.status}statusText(){return this._initializer.statusText}fromServiceWorker(){return this._initializer.fromServiceWorker}headers(){return this._provisionalHeaders.headers()}async _actualHeaders(){return this._actualHeadersPromise||(this._actualHeadersPromise=(async()=>new z((await this._channel.rawResponseHeaders()).headers))()),await this._actualHeadersPromise}async allHeaders(){return(await this._actualHeaders()).headers()}async headersArray(){return(await this._actualHeaders()).headersArray().slice()}async headerValue(q){return(await this._actualHeaders()).get(q)}async headerValues(q){return(await this._actualHeaders()).getAll(q)}async finished(){return await this.request()._targetClosedScope().race(this._finishedPromise)}async body(){return(await this._channel.body()).binary}async text(){return(await this.body()).toString("utf8")}async json(){const q=await this.text();return JSON.parse(q)}request(){return this._request}frame(){return this._request.frame()}async serverAddr(){return(await this._channel.serverAddr()).value||null}async securityDetails(){return(await this._channel.securityDetails()).value||null}}class b extends e.ChannelOwner{static from(q){return q._object}constructor(q,J,le,_e){super(q,J,le,_e),this._isClosed=!1,this._page=q,this._channel.on("frameSent",ge=>{ge.opcode===1?this.emit(C.Events.WebSocket.FrameSent,{payload:ge.data}):ge.opcode===2&&this.emit(C.Events.WebSocket.FrameSent,{payload:Buffer.from(ge.data,"base64")})}),this._channel.on("frameReceived",ge=>{ge.opcode===1?this.emit(C.Events.WebSocket.FrameReceived,{payload:ge.data}):ge.opcode===2&&this.emit(C.Events.WebSocket.FrameReceived,{payload:Buffer.from(ge.data,"base64")})}),this._channel.on("socketError",({error:ge})=>this.emit(C.Events.WebSocket.Error,ge)),this._channel.on("close",()=>{this._isClosed=!0,this.emit(C.Events.WebSocket.Close,this)})}url(){return this._initializer.url}isClosed(){return this._isClosed}async waitForEvent(q,J={}){return await this._wrapApiCall(async()=>{const le=this._page._timeoutSettings.timeout(typeof J=="function"?{}:J),_e=typeof J=="function"?J:J.predicate,ge=u.Waiter.createForEvent(this,q);ge.rejectOnTimeout(le,`Timeout ${le}ms exceeded while waiting for event "${q}"`),q!==C.Events.WebSocket.Error&&ge.rejectOnEvent(this,C.Events.WebSocket.Error,new Error("Socket error")),q!==C.Events.WebSocket.Close&&ge.rejectOnEvent(this,C.Events.WebSocket.Close,new Error("Socket closed")),ge.rejectOnEvent(this._page,C.Events.Page.Close,()=>this._page._closeErrorWithReason());const ne=await ge.waitForEvent(this,q,_e);return ge.dispose(),ne})}}function p($){for(const q of Object.keys($)){const J=$[q];if(!Object.is(J,void 0)&&!(0,n.isString)(J))throw new Error(`Expected value of header "${q}" to be String, but "${typeof J}" is found.`)}}class O{constructor(q,J,le,_e,ge=Number.MAX_SAFE_INTEGER){this.handledCount=0,this._ignoreException=!1,this._activeInvocations=new Set,this._baseURL=J,this._times=ge,this.url=le,this.handler=_e,this._savedZone=q.zones.current().pop()}static prepareInterceptionPatterns(q){const J=[];let le=!1;for(const _e of q)(0,n.isString)(_e.url)?J.push({glob:_e.url}):(0,n.isRegExp)(_e.url)?J.push({regexSource:_e.url.source,regexFlags:_e.url.flags}):le=!0;return le?[{glob:"**/*"}]:J}matches(q){return(0,v.urlMatches)(this._baseURL,q,this.url)}async handle(q){return await this._savedZone.run(async()=>this._handleImpl(q))}async _handleImpl(q){const J={complete:new a.ManualPromise,route:q};this._activeInvocations.add(J);try{return await this._handleInternal(q)}catch(le){if(this._ignoreException)return!1;throw(0,U.isTargetClosedError)(le)&&(0,o.rewriteErrorMessage)(le,`"${le.message}" while running route callback.
Consider awaiting \`await page.unrouteAll({ behavior: 'ignoreErrors' })\`
before the end of the test to ignore remaining routes in flight.`),le}finally{J.complete.resolve(),this._activeInvocations.delete(J)}}async stop(q){if(q==="ignoreErrors")this._ignoreException=!0;else{const J=[];for(const le of this._activeInvocations)le.route._didThrow||J.push(le.complete);await Promise.all(J)}}async _handleInternal(q){++this.handledCount;const J=q._startHandling(),le=this.handler,[_e]=await Promise.all([J,le(q,q.request())]);return _e}willExpire(){return this.handledCount+1>=this._times}}class z{constructor(q){this._headersMap=new s.MultiMap,this._headersArray=q;for(const J of q)this._headersMap.set(J.name.toLowerCase(),J.value)}static _fromHeadersObjectLossy(q){const J=Object.entries(q).map(([le,_e])=>({name:le,value:_e})).filter(le=>le.value!==void 0);return new z(J)}get(q){const J=this.getAll(q);return!J||!J.length?null:J.join(q.toLowerCase()==="set-cookie"?`
`:", ")}getAll(q){return[...this._headersMap.get(q.toLowerCase())]}headers(){const q={};for(const J of this._headersMap.keys())q[J]=this.get(J);return q}headersArray(){return this._headersArray}}return Jh}var Yh,xv;function QT(){if(xv)return Yh;xv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{kLifecycleEvents:()=>e}),Yh=te(P);const e=new Set(["load","domcontentloaded","networkidle","commit"]);return Yh}var Xh,Ev;function ia(){if(Ev)return Xh;Ev=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(T,b)=>{for(var p in b)r(T,p,{get:b[p],enumerable:!0})},P=(T,b,p,O)=>{if(b&&typeof b=="object"||typeof b=="function")for(let z of E(b))!V.call(T,z)&&z!==p&&r(T,z,{get:()=>b[z],enumerable:!(O=i(b,z))||O.enumerable});return T},e=(T,b,p)=>(p=T!=null?t(R(T)):{},P(!T||!T.__esModule?r(p,"default",{value:T,enumerable:!0}):p,T)),U=T=>P(r({},"__esModule",{value:!0}),T),C={};te(C,{Frame:()=>l,verifyLoadState:()=>x}),Xh=U(C);var w=$o(),g=Jr(),u=ms(),_=Vo(),f=pi(),d=Xi(),v=Ty(),a=e(na()),s=QT(),n=gs(),o=Gr(),h=Oy(),m=di(),c=Qi();class l extends g.ChannelOwner{constructor(b,p,O,z){super(b,p,O,z),this._parentFrame=null,this._url="",this._name="",this._detached=!1,this._childFrames=new Set,this._eventEmitter=new w.EventEmitter(b._platform),this._eventEmitter.setMaxListeners(0),this._parentFrame=l.fromNullable(z.parentFrame),this._parentFrame&&this._parentFrame._childFrames.add(this),this._name=z.name,this._url=z.url,this._loadStates=new Set(z.loadStates),this._channel.on("loadstate",$=>{$.add&&(this._loadStates.add($.add),this._eventEmitter.emit("loadstate",$.add)),$.remove&&this._loadStates.delete($.remove),!this._parentFrame&&$.add==="load"&&this._page&&this._page.emit(f.Events.Page.Load,this._page),!this._parentFrame&&$.add==="domcontentloaded"&&this._page&&this._page.emit(f.Events.Page.DOMContentLoaded,this._page)}),this._channel.on("navigated",$=>{this._url=$.url,this._name=$.name,this._eventEmitter.emit("navigated",$),!$.error&&this._page&&this._page.emit(f.Events.Page.FrameNavigated,this)})}static from(b){return b._object}static fromNullable(b){return b?l.from(b):null}page(){return this._page}_timeout(b){var O;return(((O=this._page)==null?void 0:O._timeoutSettings)||new c.TimeoutSettings(this._platform)).timeout(b||{})}_navigationTimeout(b){var O;return(((O=this._page)==null?void 0:O._timeoutSettings)||new c.TimeoutSettings(this._platform)).navigationTimeout(b||{})}async goto(b,p={}){const O=x("waitUntil",p.waitUntil===void 0?"load":p.waitUntil);return a.Response.fromNullable((await this._channel.goto({url:b,...p,waitUntil:O,timeout:this._navigationTimeout(p)})).response)}_setupNavigationWaiter(b){const p=new n.Waiter(this._page,"");this._page.isClosed()&&p.rejectImmediately(this._page._closeErrorWithReason()),p.rejectOnEvent(this._page,f.Events.Page.Close,()=>this._page._closeErrorWithReason()),p.rejectOnEvent(this._page,f.Events.Page.Crash,new Error("Navigation failed because page crashed!")),p.rejectOnEvent(this._page,f.Events.Page.FrameDetached,new Error("Navigating frame was detached!"),z=>z===this);const O=this._page._timeoutSettings.navigationTimeout(b);return p.rejectOnTimeout(O,`Timeout ${O}ms exceeded.`),p}async waitForNavigation(b={}){return await this._page._wrapApiCall(async()=>{const p=x("waitUntil",b.waitUntil===void 0?"load":b.waitUntil),O=this._setupNavigationWaiter(b),z=typeof b.url=="string"?` to "${b.url}"`:"";O.log(`waiting for navigation${z} until "${p}"`);const $=await O.waitForEvent(this._eventEmitter,"navigated",le=>{var _e;return le.error?!0:(O.log(`  navigated to "${le.url}"`),(0,m.urlMatches)((_e=this._page)==null?void 0:_e.context()._options.baseURL,le.url,b.url))});if($.error){const le=new Error($.error);le.stack="",await O.waitForPromise(Promise.reject(le))}this._loadStates.has(p)||await O.waitForEvent(this._eventEmitter,"loadstate",le=>(O.log(`  "${le}" event fired`),le===p));const q=$.newDocument?a.Request.fromNullable($.newDocument.request):null,J=q?await O.waitForPromise(q._finalRequest()._internalResponse()):null;return O.dispose(),J},{title:"Wait for navigation"})}async waitForLoadState(b="load",p={}){return b=x("state",b),await this._page._wrapApiCall(async()=>{const O=this._setupNavigationWaiter(p);this._loadStates.has(b)?O.log(`  not waiting, "${b}" event already fired`):await O.waitForEvent(this._eventEmitter,"loadstate",z=>(O.log(`  "${z}" event fired`),z===b)),O.dispose()},{title:`Wait for load state "${b}"`})}async waitForURL(b,p={}){var O;if((0,m.urlMatches)((O=this._page)==null?void 0:O.context()._options.baseURL,this.url(),b))return await this.waitForLoadState(p.waitUntil,p);await this.waitForNavigation({url:b,...p})}async frameElement(){return _.ElementHandle.from((await this._channel.frameElement()).element)}async evaluateHandle(b,p){(0,d.assertMaxArguments)(arguments.length,2);const O=await this._channel.evaluateExpressionHandle({expression:String(b),isFunction:typeof b=="function",arg:(0,d.serializeArgument)(p)});return d.JSHandle.from(O.handle)}async evaluate(b,p){(0,d.assertMaxArguments)(arguments.length,2);const O=await this._channel.evaluateExpression({expression:String(b),isFunction:typeof b=="function",arg:(0,d.serializeArgument)(p)});return(0,d.parseResult)(O.value)}async _evaluateExposeUtilityScript(b,p){(0,d.assertMaxArguments)(arguments.length,2);const O=await this._channel.evaluateExpression({expression:String(b),isFunction:typeof b=="function",arg:(0,d.serializeArgument)(p)});return(0,d.parseResult)(O.value)}async $(b,p){const O=await this._channel.querySelector({selector:b,...p});return _.ElementHandle.fromNullable(O.element)}async waitForSelector(b,p={}){if(p.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(p.waitFor&&p.waitFor!=="visible")throw new Error("options.waitFor is not supported, did you mean options.state?");const O=await this._channel.waitForSelector({selector:b,...p,timeout:this._timeout(p)});return _.ElementHandle.fromNullable(O.element)}async dispatchEvent(b,p,O,z={}){await this._channel.dispatchEvent({selector:b,type:p,eventInit:(0,d.serializeArgument)(O),...z,timeout:this._timeout(z)})}async $eval(b,p,O){(0,d.assertMaxArguments)(arguments.length,3);const z=await this._channel.evalOnSelector({selector:b,expression:String(p),isFunction:typeof p=="function",arg:(0,d.serializeArgument)(O)});return(0,d.parseResult)(z.value)}async $$eval(b,p,O){(0,d.assertMaxArguments)(arguments.length,3);const z=await this._channel.evalOnSelectorAll({selector:b,expression:String(p),isFunction:typeof p=="function",arg:(0,d.serializeArgument)(O)});return(0,d.parseResult)(z.value)}async $$(b){return(await this._channel.querySelectorAll({selector:b})).elements.map(O=>_.ElementHandle.from(O))}async _queryCount(b){return(await this._channel.queryCount({selector:b})).value}async content(){return(await this._channel.content()).value}async setContent(b,p={}){const O=x("waitUntil",p.waitUntil===void 0?"load":p.waitUntil);await this._channel.setContent({html:b,...p,waitUntil:O,timeout:this._navigationTimeout(p)})}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}isDetached(){return this._detached}async addScriptTag(b={}){const p={...b};return p.path&&(p.content=(await this._platform.fs().promises.readFile(p.path)).toString(),p.content=(0,u.addSourceUrlToScript)(p.content,p.path)),_.ElementHandle.from((await this._channel.addScriptTag({...p})).element)}async addStyleTag(b={}){const p={...b};return p.path&&(p.content=(await this._platform.fs().promises.readFile(p.path)).toString(),p.content+="/*# sourceURL="+p.path.replace(/\n/g,"")+"*/"),_.ElementHandle.from((await this._channel.addStyleTag({...p})).element)}async click(b,p={}){return await this._channel.click({selector:b,...p,timeout:this._timeout(p)})}async dblclick(b,p={}){return await this._channel.dblclick({selector:b,...p,timeout:this._timeout(p)})}async dragAndDrop(b,p,O={}){return await this._channel.dragAndDrop({source:b,target:p,...O,timeout:this._timeout(O)})}async tap(b,p={}){return await this._channel.tap({selector:b,...p,timeout:this._timeout(p)})}async fill(b,p,O={}){return await this._channel.fill({selector:b,value:p,...O,timeout:this._timeout(O)})}async _highlight(b){return await this._channel.highlight({selector:b})}locator(b,p){return new v.Locator(this,b,p)}getByTestId(b){return this.locator((0,h.getByTestIdSelector)((0,v.testIdAttributeName)(),b))}getByAltText(b,p){return this.locator((0,h.getByAltTextSelector)(b,p))}getByLabel(b,p){return this.locator((0,h.getByLabelSelector)(b,p))}getByPlaceholder(b,p){return this.locator((0,h.getByPlaceholderSelector)(b,p))}getByText(b,p){return this.locator((0,h.getByTextSelector)(b,p))}getByTitle(b,p){return this.locator((0,h.getByTitleSelector)(b,p))}getByRole(b,p={}){return this.locator((0,h.getByRoleSelector)(b,p))}frameLocator(b){return new v.FrameLocator(this,b)}async focus(b,p={}){await this._channel.focus({selector:b,...p,timeout:this._timeout(p)})}async textContent(b,p={}){const O=(await this._channel.textContent({selector:b,...p,timeout:this._timeout(p)})).value;return O===void 0?null:O}async innerText(b,p={}){return(await this._channel.innerText({selector:b,...p,timeout:this._timeout(p)})).value}async innerHTML(b,p={}){return(await this._channel.innerHTML({selector:b,...p,timeout:this._timeout(p)})).value}async getAttribute(b,p,O={}){const z=(await this._channel.getAttribute({selector:b,name:p,...O,timeout:this._timeout(O)})).value;return z===void 0?null:z}async inputValue(b,p={}){return(await this._channel.inputValue({selector:b,...p,timeout:this._timeout(p)})).value}async isChecked(b,p={}){return(await this._channel.isChecked({selector:b,...p,timeout:this._timeout(p)})).value}async isDisabled(b,p={}){return(await this._channel.isDisabled({selector:b,...p,timeout:this._timeout(p)})).value}async isEditable(b,p={}){return(await this._channel.isEditable({selector:b,...p,timeout:this._timeout(p)})).value}async isEnabled(b,p={}){return(await this._channel.isEnabled({selector:b,...p,timeout:this._timeout(p)})).value}async isHidden(b,p={}){return(await this._channel.isHidden({selector:b,...p})).value}async isVisible(b,p={}){return(await this._channel.isVisible({selector:b,...p})).value}async hover(b,p={}){await this._channel.hover({selector:b,...p,timeout:this._timeout(p)})}async selectOption(b,p,O={}){return(await this._channel.selectOption({selector:b,...(0,_.convertSelectOptionValues)(p),...O,timeout:this._timeout(O)})).values}async setInputFiles(b,p,O={}){const z=await(0,_.convertInputFiles)(this._platform,p,this.page().context());await this._channel.setInputFiles({selector:b,...z,...O,timeout:this._timeout(O)})}async type(b,p,O={}){await this._channel.type({selector:b,text:p,...O,timeout:this._timeout(O)})}async press(b,p,O={}){await this._channel.press({selector:b,key:p,...O,timeout:this._timeout(O)})}async check(b,p={}){await this._channel.check({selector:b,...p,timeout:this._timeout(p)})}async uncheck(b,p={}){await this._channel.uncheck({selector:b,...p,timeout:this._timeout(p)})}async setChecked(b,p,O){p?await this.check(b,O):await this.uncheck(b,O)}async waitForTimeout(b){await this._channel.waitForTimeout({waitTimeout:b})}async waitForFunction(b,p,O={}){typeof O.polling=="string"&&(0,o.assert)(O.polling==="raf","Unknown polling option: "+O.polling);const z=await this._channel.waitForFunction({...O,pollingInterval:O.polling==="raf"?void 0:O.polling,expression:String(b),isFunction:typeof b=="function",arg:(0,d.serializeArgument)(p),timeout:this._timeout(O)});return d.JSHandle.from(z.handle)}async title(){return(await this._channel.title()).value}async _expect(b,p){const O={expression:b,...p,isNot:!!p.isNot};O.expectedValue=(0,d.serializeArgument)(p.expectedValue);const z=await this._channel.expect(O);return z.received!==void 0&&(z.received=(0,d.parseResult)(z.received)),z}}function x(T,b){if(b==="networkidle0"&&(b="networkidle"),!s.kLifecycleEvents.has(b))throw new Error(`${T}: expected one of (load|domcontentloaded|networkidle|commit)`);return b}return Xh}var Qh,Ov;function Cy(){if(Ov)return Qh;Ov=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{WritableStream:()=>U}),Qh=te(P);var e=Jr();class U extends e.ChannelOwner{static from(w){return w._object}constructor(w,g,u,_){super(w,g,u,_)}stream(){return this._platform.streamWritable(this._channel)}}return Qh}var Zh,Tv;function Vo(){if(Tv)return Zh;Tv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(o,h)=>{for(var m in h)t(o,m,{get:h[m],enumerable:!0})},V=(o,h,m,c)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of i(h))!E.call(o,l)&&l!==m&&t(o,l,{get:()=>h[l],enumerable:!(c=r(h,l))||c.enumerable});return o},te=o=>V(t({},"__esModule",{value:!0}),o),P={};R(P,{ElementHandle:()=>f,convertInputFiles:()=>s,convertSelectOptionValues:()=>d,determineScreenshotType:()=>n}),Zh=te(P);var e=ia(),U=Xi(),C=Gr(),w=fs(),g=Wn(),u=Cy(),_=sf();class f extends U.JSHandle{static from(h){return h._object}static fromNullable(h){return h?f.from(h):null}constructor(h,m,c,l){super(h,m,c,l),this._frame=h,this._elementChannel=this._channel}asElement(){return this}async ownerFrame(){return e.Frame.fromNullable((await this._elementChannel.ownerFrame()).frame)}async contentFrame(){return e.Frame.fromNullable((await this._elementChannel.contentFrame()).frame)}async getAttribute(h){const m=(await this._elementChannel.getAttribute({name:h})).value;return m===void 0?null:m}async inputValue(){return(await this._elementChannel.inputValue()).value}async textContent(){const h=(await this._elementChannel.textContent()).value;return h===void 0?null:h}async innerText(){return(await this._elementChannel.innerText()).value}async innerHTML(){return(await this._elementChannel.innerHTML()).value}async isChecked(){return(await this._elementChannel.isChecked()).value}async isDisabled(){return(await this._elementChannel.isDisabled()).value}async isEditable(){return(await this._elementChannel.isEditable()).value}async isEnabled(){return(await this._elementChannel.isEnabled()).value}async isHidden(){return(await this._elementChannel.isHidden()).value}async isVisible(){return(await this._elementChannel.isVisible()).value}async dispatchEvent(h,m={}){await this._elementChannel.dispatchEvent({type:h,eventInit:(0,U.serializeArgument)(m)})}async scrollIntoViewIfNeeded(h={}){await this._elementChannel.scrollIntoViewIfNeeded({...h,timeout:this._frame._timeout(h)})}async hover(h={}){await this._elementChannel.hover({...h,timeout:this._frame._timeout(h)})}async click(h={}){return await this._elementChannel.click({...h,timeout:this._frame._timeout(h)})}async dblclick(h={}){return await this._elementChannel.dblclick({...h,timeout:this._frame._timeout(h)})}async tap(h={}){return await this._elementChannel.tap({...h,timeout:this._frame._timeout(h)})}async selectOption(h,m={}){return(await this._elementChannel.selectOption({...d(h),...m,timeout:this._frame._timeout(m)})).values}async fill(h,m={}){return await this._elementChannel.fill({value:h,...m,timeout:this._frame._timeout(m)})}async selectText(h={}){await this._elementChannel.selectText({...h,timeout:this._frame._timeout(h)})}async setInputFiles(h,m={}){const c=await this.ownerFrame();if(!c)throw new Error("Cannot set input files to detached element");const l=await s(this._platform,h,c.page().context());await this._elementChannel.setInputFiles({...l,...m,timeout:this._frame._timeout(m)})}async focus(){await this._elementChannel.focus()}async type(h,m={}){await this._elementChannel.type({text:h,...m,timeout:this._frame._timeout(m)})}async press(h,m={}){await this._elementChannel.press({key:h,...m,timeout:this._frame._timeout(m)})}async check(h={}){return await this._elementChannel.check({...h,timeout:this._frame._timeout(h)})}async uncheck(h={}){return await this._elementChannel.uncheck({...h,timeout:this._frame._timeout(h)})}async setChecked(h,m){h?await this.check(m):await this.uncheck(m)}async boundingBox(){const h=(await this._elementChannel.boundingBox()).value;return h===void 0?null:h}async screenshot(h={}){const m=h.mask,c={...h,mask:void 0,timeout:this._frame._timeout(h)};c.type||(c.type=n(h)),m&&(c.mask=m.map(x=>({frame:x._frame._channel,selector:x._selector})));const l=await this._elementChannel.screenshot(c);return h.path&&(await(0,w.mkdirIfNeeded)(this._platform,h.path),await this._platform.fs().promises.writeFile(h.path,l.binary)),l.binary}async $(h){return f.fromNullable((await this._elementChannel.querySelector({selector:h})).element)}async $$(h){return(await this._elementChannel.querySelectorAll({selector:h})).elements.map(c=>f.from(c))}async $eval(h,m,c){const l=await this._elementChannel.evalOnSelector({selector:h,expression:String(m),isFunction:typeof m=="function",arg:(0,U.serializeArgument)(c)});return(0,U.parseResult)(l.value)}async $$eval(h,m,c){const l=await this._elementChannel.evalOnSelectorAll({selector:h,expression:String(m),isFunction:typeof m=="function",arg:(0,U.serializeArgument)(c)});return(0,U.parseResult)(l.value)}async waitForElementState(h,m={}){return await this._elementChannel.waitForElementState({state:h,...m,timeout:this._frame._timeout(m)})}async waitForSelector(h,m={}){const c=await this._elementChannel.waitForSelector({selector:h,...m,timeout:this._frame._timeout(m)});return f.fromNullable(c.element)}}function d(o){if(o===null)return{};if(Array.isArray(o)||(o=[o]),!o.length)return{};for(let h=0;h<o.length;h++)(0,C.assert)(o[h]!==null,`options[${h}]: expected object, got null`);return o[0]instanceof f?{elements:o.map(h=>h._elementChannel)}:(0,g.isString)(o[0])?{options:o.map(h=>({valueOrLabel:h}))}:{options:o}}function v(o){return o.reduce((h,m)=>h+(m.buffer?m.buffer.byteLength:0),0)>=w.fileUploadSizeLimit}async function a(o,h){let m,c;for(const l of h)if((await o.fs().promises.stat(l)).isDirectory()){if(c)throw new Error("Multiple directories are not supported");c=o.path().resolve(l)}else m??(m=[]),m.push(o.path().resolve(l));if(m!=null&&m.length&&c)throw new Error("File paths must be all files or a single directory");return[m,c]}async function s(o,h,m){const c=Array.isArray(h)?h.slice():[h];if(c.some(x=>typeof x=="string")){if(!c.every(b=>typeof b=="string"))throw new Error("File paths cannot be mixed with buffers");const[x,T]=await a(o,c);if(m._connection.isRemote()){const b=T?(await o.fs().promises.readdir(T,{withFileTypes:!0,recursive:!0})).filter(z=>z.isFile()).map(z=>o.path().join(z.path,z.name)):x,{writableStreams:p,rootDir:O}=await m._wrapApiCall(async()=>m._channel.createTempFiles({rootDirName:T?o.path().basename(T):void 0,items:await Promise.all(b.map(async z=>{const $=(await o.fs().promises.stat(z)).mtimeMs;return{name:T?o.path().relative(T,z):o.path().basename(z),lastModifiedMs:$}}))}),{internal:!0});for(let z=0;z<b.length;z++){const $=u.WritableStream.from(p[z]);await o.streamFile(b[z],$.stream())}return{directoryStream:O,streams:T?void 0:p}}return{localPaths:x,localDirectory:T}}const l=c;if(v(l))throw new Error("Cannot set buffer larger than 50Mb, please write it to a file and pass its path instead.");return{payloads:l}}function n(o){if(o.path){const h=(0,_.getMimeTypeForPath)(o.path);if(h==="image/png")return"png";if(h==="image/jpeg")return"jpeg";throw new Error(`path: unsupported mime type "${h}"`)}return o.type}return Zh}var ep,Cv;function ZT(){if(Cv)return ep;Cv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{FileChooser:()=>e}),ep=te(P);class e{constructor(C,w,g){this._page=C,this._elementHandle=w,this._isMultiple=g}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}async setFiles(C,w){return await this._elementHandle.setInputFiles(C,w)}}return ep}var tp,Pv;function Py(){if(Pv)return tp;Pv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{HarRouter:()=>e}),tp=te(P);class e{static async create(C,w,g,u){const{harId:_,error:f}=await C.harOpen({file:w});if(f)throw new Error(f);return new e(C,_,g,u)}constructor(C,w,g,u){this._localUtils=C,this._harId=w,this._options=u,this._notFoundAction=g}async _handle(C){const w=C.request(),g=await this._localUtils.harLookup({harId:this._harId,url:w.url(),method:w.method(),headers:await w.headersArray(),postData:w.postDataBuffer()||void 0,isNavigationRequest:w.isNavigationRequest()});if(g.action==="redirect"){C._platform.log("api",`HAR: ${C.request().url()} redirected to ${g.redirectURL}`),await C._redirectNavigationRequest(g.redirectURL);return}if(g.action==="fulfill"){if(g.status===-1)return;await C.fulfill({status:g.status,headers:Object.fromEntries(g.headers.map(u=>[u.name,u.value])),body:g.body});return}if(g.action==="error"&&C._platform.log("api","HAR: "+g.message),this._notFoundAction==="abort"){await C.abort();return}await C.fallback()}async addContextRoute(C){await C.route(this._options.urlMatch||"**/*",w=>this._handle(w))}async addPageRoute(C){await C.route(this._options.urlMatch||"**/*",w=>this._handle(w))}async[Symbol.asyncDispose](){await this.dispose()}dispose(){this._localUtils.harClose({harId:this._harId}).catch(()=>{})}}return tp}var rp,kv;function eC(){if(kv)return rp;kv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Keyboard:()=>e,Mouse:()=>U,Touchscreen:()=>C}),rp=te(P);class e{constructor(g){this._page=g}async down(g){await this._page._channel.keyboardDown({key:g})}async up(g){await this._page._channel.keyboardUp({key:g})}async insertText(g){await this._page._channel.keyboardInsertText({text:g})}async type(g,u={}){await this._page._channel.keyboardType({text:g,...u})}async press(g,u={}){await this._page._channel.keyboardPress({key:g,...u})}}class U{constructor(g){this._page=g}async move(g,u,_={}){await this._page._channel.mouseMove({x:g,y:u,..._})}async down(g={}){await this._page._channel.mouseDown({...g})}async up(g={}){await this._page._channel.mouseUp(g)}async click(g,u,_={}){await this._page._channel.mouseClick({x:g,y:u,..._})}async dblclick(g,u,_={}){await this._page._wrapApiCall(async()=>{await this.click(g,u,{..._,clickCount:2})},{title:"Double click"})}async wheel(g,u){await this._page._channel.mouseWheel({deltaX:g,deltaY:u})}}class C{constructor(g){this._page=g}async tap(g,u){await this._page._channel.touchscreenTap({x:g,y:u})}}return rp}var np,Av;function tC(){if(Av)return np;Av=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{Video:()=>U}),np=te(P);var e=Fr();class U{constructor(w,g){this._artifact=null,this._artifactReadyPromise=new e.ManualPromise,this._isRemote=!1,this._isRemote=g.isRemote(),this._artifact=w._closedOrCrashedScope.safeRace(this._artifactReadyPromise)}_artifactReady(w){this._artifactReadyPromise.resolve(w)}async path(){if(this._isRemote)throw new Error("Path is not available when connecting remotely. Use saveAs() to save a local copy.");const w=await this._artifact;if(!w)throw new Error("Page did not produce any video frames");return w._initializer.absolutePath}async saveAs(w){const g=await this._artifact;if(!g)throw new Error("Page did not produce any video frames");return await g.saveAs(w)}async delete(){const w=await this._artifact;w&&await w.delete()}}return np}var ip,Iv;function Ko(){if(Iv)return ip;Iv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(ge,ne)=>{for(var S in ne)t(ge,S,{get:ne[S],enumerable:!0})},V=(ge,ne,S,j)=>{if(ne&&typeof ne=="object"||typeof ne=="function")for(let y of i(ne))!E.call(ge,y)&&y!==S&&t(ge,y,{get:()=>ne[y],enumerable:!(j=r(ne,y))||j.enumerable});return ge},te=ge=>V(t({},"__esModule",{value:!0}),ge),P={};R(P,{BindingCall:()=>le,Page:()=>J}),ip=te(P);var e=JT(),U=ra(),C=Jr(),w=ms(),g=YT(),u=XT(),_=Vo(),f=Mn(),d=pi(),v=ZT(),a=ia(),s=Py(),n=eC(),o=Xi(),h=na(),m=tC(),c=gs(),l=zo(),x=Qi(),T=Gr(),b=fs(),p=zi(),O=Ei(),z=di(),$=Fr(),q=Wn();class J extends C.ChannelOwner{constructor(ne,S,j,y){super(ne,S,j,y),this._frames=new Set,this._workers=new Set,this._closed=!1,this._closedOrCrashedScope=new $.LongStandingScope,this._routes=[],this._webSocketRoutes=[],this._bindings=new Map,this._video=null,this._closeWasCalled=!1,this._harRouters=[],this._locatorHandlers=new Map,this._browserContext=ne,this._timeoutSettings=new x.TimeoutSettings(this._platform,this._browserContext._timeoutSettings),this.accessibility=new e.Accessibility(this._channel),this.keyboard=new n.Keyboard(this),this.mouse=new n.Mouse(this),this.request=this._browserContext.request,this.touchscreen=new n.Touchscreen(this),this.clock=this._browserContext.clock,this._mainFrame=a.Frame.from(y.mainFrame),this._mainFrame._page=this,this._frames.add(this._mainFrame),this._viewportSize=y.viewportSize,this._closed=y.isClosed,this._opener=J.fromNullable(y.opener),this._channel.on("bindingCall",({binding:I})=>this._onBinding(le.from(I))),this._channel.on("close",()=>this._onClose()),this._channel.on("crash",()=>this._onCrash()),this._channel.on("download",({url:I,suggestedFilename:D,artifact:ie})=>{const he=U.Artifact.from(ie);this.emit(d.Events.Page.Download,new u.Download(this,I,D,he))}),this._channel.on("fileChooser",({element:I,isMultiple:D})=>this.emit(d.Events.Page.FileChooser,new v.FileChooser(this,_.ElementHandle.from(I),D))),this._channel.on("frameAttached",({frame:I})=>this._onFrameAttached(a.Frame.from(I))),this._channel.on("frameDetached",({frame:I})=>this._onFrameDetached(a.Frame.from(I))),this._channel.on("locatorHandlerTriggered",({uid:I})=>this._onLocatorHandlerTriggered(I)),this._channel.on("route",({route:I})=>this._onRoute(h.Route.from(I))),this._channel.on("webSocketRoute",({webSocketRoute:I})=>this._onWebSocketRoute(h.WebSocketRoute.from(I))),this._channel.on("video",({artifact:I})=>{const D=U.Artifact.from(I);this._forceVideo()._artifactReady(D)}),this._channel.on("viewportSizeChanged",({viewportSize:I})=>this._viewportSize=I),this._channel.on("webSocket",({webSocket:I})=>this.emit(d.Events.Page.WebSocket,h.WebSocket.from(I))),this._channel.on("worker",({worker:I})=>this._onWorker(l.Worker.from(I))),this.coverage=new g.Coverage(this._channel),this.once(d.Events.Page.Close,()=>this._closedOrCrashedScope.close(this._closeErrorWithReason())),this.once(d.Events.Page.Crash,()=>this._closedOrCrashedScope.close(new f.TargetClosedError)),this._setEventToSubscriptionMapping(new Map([[d.Events.Page.Console,"console"],[d.Events.Page.Dialog,"dialog"],[d.Events.Page.Request,"request"],[d.Events.Page.Response,"response"],[d.Events.Page.RequestFinished,"requestFinished"],[d.Events.Page.RequestFailed,"requestFailed"],[d.Events.Page.FileChooser,"fileChooser"]]))}static from(ne){return ne._object}static fromNullable(ne){return ne?J.from(ne):null}_onFrameAttached(ne){ne._page=this,this._frames.add(ne),ne._parentFrame&&ne._parentFrame._childFrames.add(ne),this.emit(d.Events.Page.FrameAttached,ne)}_onFrameDetached(ne){this._frames.delete(ne),ne._detached=!0,ne._parentFrame&&ne._parentFrame._childFrames.delete(ne),this.emit(d.Events.Page.FrameDetached,ne)}async _onRoute(ne){ne._context=this.context();const S=this._routes.slice();for(const j of S){if(this._closeWasCalled||this._browserContext._closingStatus!=="none")return;if(!j.matches(ne.request().url()))continue;const y=this._routes.indexOf(j);if(y===-1)continue;j.willExpire()&&this._routes.splice(y,1);const I=await j.handle(ne);if(this._routes.length||this._updateInterceptionPatterns().catch(()=>{}),I)return}await this._browserContext._onRoute(ne)}async _onWebSocketRoute(ne){const S=this._webSocketRoutes.find(j=>j.matches(ne.url()));S?await S.handle(ne):await this._browserContext._onWebSocketRoute(ne)}async _onBinding(ne){const S=this._bindings.get(ne._initializer.name);if(S){await ne.call(S);return}await this._browserContext._onBinding(ne)}_onWorker(ne){this._workers.add(ne),ne._page=this,this.emit(d.Events.Page.Worker,ne)}_onClose(){this._closed=!0,this._browserContext._pages.delete(this),this._browserContext._backgroundPages.delete(this),this._disposeHarRouters(),this.emit(d.Events.Page.Close,this)}_onCrash(){this.emit(d.Events.Page.Crash,this)}context(){return this._browserContext}async opener(){return!this._opener||this._opener.isClosed()?null:this._opener}mainFrame(){return this._mainFrame}frame(ne){const S=(0,q.isString)(ne)?ne:ne.name,j=(0,q.isObject)(ne)?ne.url:void 0;return(0,T.assert)(S||j,"Either name or url matcher should be specified"),this.frames().find(y=>S?y.name()===S:(0,z.urlMatches)(this._browserContext._options.baseURL,y.url(),j))||null}frames(){return[...this._frames]}setDefaultNavigationTimeout(ne){this._timeoutSettings.setDefaultNavigationTimeout(ne)}setDefaultTimeout(ne){this._timeoutSettings.setDefaultTimeout(ne)}_forceVideo(){return this._video||(this._video=new m.Video(this,this._connection)),this._video}video(){return this._browserContext._options.recordVideo?this._forceVideo():null}async $(ne,S){return await this._mainFrame.$(ne,S)}async waitForSelector(ne,S){return await this._mainFrame.waitForSelector(ne,S)}async dispatchEvent(ne,S,j,y){return await this._mainFrame.dispatchEvent(ne,S,j,y)}async evaluateHandle(ne,S){return(0,o.assertMaxArguments)(arguments.length,2),await this._mainFrame.evaluateHandle(ne,S)}async $eval(ne,S,j){return(0,o.assertMaxArguments)(arguments.length,3),await this._mainFrame.$eval(ne,S,j)}async $$eval(ne,S,j){return(0,o.assertMaxArguments)(arguments.length,3),await this._mainFrame.$$eval(ne,S,j)}async $$(ne){return await this._mainFrame.$$(ne)}async addScriptTag(ne={}){return await this._mainFrame.addScriptTag(ne)}async addStyleTag(ne={}){return await this._mainFrame.addStyleTag(ne)}async exposeFunction(ne,S){await this._channel.exposeBinding({name:ne});const j=(y,...I)=>S(...I);this._bindings.set(ne,j)}async exposeBinding(ne,S,j={}){await this._channel.exposeBinding({name:ne,needsHandle:j.handle}),this._bindings.set(ne,S)}async setExtraHTTPHeaders(ne){(0,h.validateHeaders)(ne),await this._channel.setExtraHTTPHeaders({headers:(0,p.headersObjectToArray)(ne)})}url(){return this._mainFrame.url()}async content(){return await this._mainFrame.content()}async setContent(ne,S){return await this._mainFrame.setContent(ne,S)}async goto(ne,S){return await this._mainFrame.goto(ne,S)}async reload(ne={}){const S=(0,a.verifyLoadState)("waitUntil",ne.waitUntil===void 0?"load":ne.waitUntil);return h.Response.fromNullable((await this._channel.reload({...ne,waitUntil:S,timeout:this._timeoutSettings.navigationTimeout(ne)})).response)}async addLocatorHandler(ne,S,j={}){if(ne._frame!==this._mainFrame)throw new Error("Locator must belong to the main frame of this page");if(j.times===0)return;const{uid:y}=await this._channel.registerLocatorHandler({selector:ne._selector,noWaitAfter:j.noWaitAfter});this._locatorHandlers.set(y,{locator:ne,handler:S,times:j.times})}async _onLocatorHandlerTriggered(ne){let S=!1;try{const j=this._locatorHandlers.get(ne);j&&j.times!==0&&(j.times!==void 0&&j.times--,await j.handler(j.locator)),S=(j==null?void 0:j.times)===0}finally{S&&this._locatorHandlers.delete(ne),this._channel.resolveLocatorHandlerNoReply({uid:ne,remove:S}).catch(()=>{})}}async removeLocatorHandler(ne){for(const[S,j]of this._locatorHandlers)j.locator._equals(ne)&&(this._locatorHandlers.delete(S),await this._channel.unregisterLocatorHandler({uid:S}).catch(()=>{}))}async waitForLoadState(ne,S){return await this._mainFrame.waitForLoadState(ne,S)}async waitForNavigation(ne){return await this._mainFrame.waitForNavigation(ne)}async waitForURL(ne,S){return await this._mainFrame.waitForURL(ne,S)}async waitForRequest(ne,S={}){const j=async D=>(0,q.isString)(ne)||(0,q.isRegExp)(ne)?(0,z.urlMatches)(this._browserContext._options.baseURL,D.url(),ne):await ne(D),y=_e(ne),I=y?`waiting for request ${y}`:void 0;return await this._waitForEvent(d.Events.Page.Request,{predicate:j,timeout:S.timeout},I)}async waitForResponse(ne,S={}){const j=async D=>(0,q.isString)(ne)||(0,q.isRegExp)(ne)?(0,z.urlMatches)(this._browserContext._options.baseURL,D.url(),ne):await ne(D),y=_e(ne),I=y?`waiting for response ${y}`:void 0;return await this._waitForEvent(d.Events.Page.Response,{predicate:j,timeout:S.timeout},I)}async waitForEvent(ne,S={}){return await this._waitForEvent(ne,S,`waiting for event "${ne}"`)}_closeErrorWithReason(){return new f.TargetClosedError(this._closeReason||this._browserContext._effectiveCloseReason())}async _waitForEvent(ne,S,j){return await this._wrapApiCall(async()=>{const y=this._timeoutSettings.timeout(typeof S=="function"?{}:S),I=typeof S=="function"?S:S.predicate,D=c.Waiter.createForEvent(this,ne);j&&D.log(j),D.rejectOnTimeout(y,`Timeout ${y}ms exceeded while waiting for event "${ne}"`),ne!==d.Events.Page.Crash&&D.rejectOnEvent(this,d.Events.Page.Crash,new Error("Page crashed")),ne!==d.Events.Page.Close&&D.rejectOnEvent(this,d.Events.Page.Close,()=>this._closeErrorWithReason());const ie=await D.waitForEvent(this,ne,I);return D.dispose(),ie})}async goBack(ne={}){const S=(0,a.verifyLoadState)("waitUntil",ne.waitUntil===void 0?"load":ne.waitUntil);return h.Response.fromNullable((await this._channel.goBack({...ne,waitUntil:S,timeout:this._timeoutSettings.navigationTimeout(ne)})).response)}async goForward(ne={}){const S=(0,a.verifyLoadState)("waitUntil",ne.waitUntil===void 0?"load":ne.waitUntil);return h.Response.fromNullable((await this._channel.goForward({...ne,waitUntil:S,timeout:this._timeoutSettings.navigationTimeout(ne)})).response)}async requestGC(){await this._channel.requestGC()}async emulateMedia(ne={}){await this._channel.emulateMedia({media:ne.media===null?"no-override":ne.media,colorScheme:ne.colorScheme===null?"no-override":ne.colorScheme,reducedMotion:ne.reducedMotion===null?"no-override":ne.reducedMotion,forcedColors:ne.forcedColors===null?"no-override":ne.forcedColors,contrast:ne.contrast===null?"no-override":ne.contrast})}async setViewportSize(ne){this._viewportSize=ne,await this._channel.setViewportSize({viewportSize:ne})}viewportSize(){return this._viewportSize||null}async evaluate(ne,S){return(0,o.assertMaxArguments)(arguments.length,2),await this._mainFrame.evaluate(ne,S)}async addInitScript(ne,S){const j=await(0,w.evaluationScript)(this._platform,ne,S);await this._channel.addInitScript({source:j})}async route(ne,S,j={}){this._routes.unshift(new h.RouteHandler(this._platform,this._browserContext._options.baseURL,ne,S,j.times)),await this._updateInterceptionPatterns()}async routeFromHAR(ne,S={}){const j=this._connection.localUtils();if(!j)throw new Error("Route from har is not supported in thin clients");if(S.update){await this._browserContext._recordIntoHAR(ne,this,S);return}const y=await s.HarRouter.create(j,ne,S.notFound||"abort",{urlMatch:S.url});this._harRouters.push(y),await y.addPageRoute(this)}async routeWebSocket(ne,S){this._webSocketRoutes.unshift(new h.WebSocketRouteHandler(this._browserContext._options.baseURL,ne,S)),await this._updateWebSocketInterceptionPatterns()}_disposeHarRouters(){this._harRouters.forEach(ne=>ne.dispose()),this._harRouters=[]}async unrouteAll(ne){await this._unrouteInternal(this._routes,[],ne==null?void 0:ne.behavior),this._disposeHarRouters()}async unroute(ne,S){const j=[],y=[];for(const I of this._routes)(0,z.urlMatchesEqual)(I.url,ne)&&(!S||I.handler===S)?j.push(I):y.push(I);await this._unrouteInternal(j,y,"default")}async _unrouteInternal(ne,S,j){if(this._routes=S,j&&j!=="default"){const y=ne.map(I=>I.stop(j));await Promise.all(y)}await this._updateInterceptionPatterns()}async _updateInterceptionPatterns(){const ne=h.RouteHandler.prepareInterceptionPatterns(this._routes);await this._channel.setNetworkInterceptionPatterns({patterns:ne})}async _updateWebSocketInterceptionPatterns(){const ne=h.WebSocketRouteHandler.prepareInterceptionPatterns(this._webSocketRoutes);await this._channel.setWebSocketInterceptionPatterns({patterns:ne})}async screenshot(ne={}){const S=ne.mask,j={...ne,mask:void 0,timeout:this._timeoutSettings.timeout(ne)};j.type||(j.type=(0,_.determineScreenshotType)(ne)),S&&(j.mask=S.map(I=>({frame:I._frame._channel,selector:I._selector})));const y=await this._channel.screenshot(j);return ne.path&&(await(0,b.mkdirIfNeeded)(this._platform,ne.path),await this._platform.fs().promises.writeFile(ne.path,y.binary)),y.binary}async _expectScreenshot(ne){const S=ne!=null&&ne.mask?ne==null?void 0:ne.mask.map(y=>({frame:y._frame._channel,selector:y._selector})):void 0,j=ne.locator?{frame:ne.locator._frame._channel,selector:ne.locator._selector}:void 0;return await this._channel.expectScreenshot({...ne,isNot:!!ne.isNot,locator:j,mask:S})}async title(){return await this._mainFrame.title()}async bringToFront(){await this._channel.bringToFront()}async[Symbol.asyncDispose](){await this.close()}async close(ne={}){this._closeReason=ne.reason,this._closeWasCalled=!0;try{this._ownedContext?await this._ownedContext.close():await this._channel.close(ne)}catch(S){if((0,f.isTargetClosedError)(S)&&!ne.runBeforeUnload)return;throw S}}isClosed(){return this._closed}async click(ne,S){return await this._mainFrame.click(ne,S)}async dragAndDrop(ne,S,j){return await this._mainFrame.dragAndDrop(ne,S,j)}async dblclick(ne,S){await this._mainFrame.dblclick(ne,S)}async tap(ne,S){return await this._mainFrame.tap(ne,S)}async fill(ne,S,j){return await this._mainFrame.fill(ne,S,j)}locator(ne,S){return this.mainFrame().locator(ne,S)}getByTestId(ne){return this.mainFrame().getByTestId(ne)}getByAltText(ne,S){return this.mainFrame().getByAltText(ne,S)}getByLabel(ne,S){return this.mainFrame().getByLabel(ne,S)}getByPlaceholder(ne,S){return this.mainFrame().getByPlaceholder(ne,S)}getByText(ne,S){return this.mainFrame().getByText(ne,S)}getByTitle(ne,S){return this.mainFrame().getByTitle(ne,S)}getByRole(ne,S={}){return this.mainFrame().getByRole(ne,S)}frameLocator(ne){return this.mainFrame().frameLocator(ne)}async focus(ne,S){return await this._mainFrame.focus(ne,S)}async textContent(ne,S){return await this._mainFrame.textContent(ne,S)}async innerText(ne,S){return await this._mainFrame.innerText(ne,S)}async innerHTML(ne,S){return await this._mainFrame.innerHTML(ne,S)}async getAttribute(ne,S,j){return await this._mainFrame.getAttribute(ne,S,j)}async inputValue(ne,S){return await this._mainFrame.inputValue(ne,S)}async isChecked(ne,S){return await this._mainFrame.isChecked(ne,S)}async isDisabled(ne,S){return await this._mainFrame.isDisabled(ne,S)}async isEditable(ne,S){return await this._mainFrame.isEditable(ne,S)}async isEnabled(ne,S){return await this._mainFrame.isEnabled(ne,S)}async isHidden(ne,S){return await this._mainFrame.isHidden(ne,S)}async isVisible(ne,S){return await this._mainFrame.isVisible(ne,S)}async hover(ne,S){return await this._mainFrame.hover(ne,S)}async selectOption(ne,S,j){return await this._mainFrame.selectOption(ne,S,j)}async setInputFiles(ne,S,j){return await this._mainFrame.setInputFiles(ne,S,j)}async type(ne,S,j){return await this._mainFrame.type(ne,S,j)}async press(ne,S,j){return await this._mainFrame.press(ne,S,j)}async check(ne,S){return await this._mainFrame.check(ne,S)}async uncheck(ne,S){return await this._mainFrame.uncheck(ne,S)}async setChecked(ne,S,j){return await this._mainFrame.setChecked(ne,S,j)}async waitForTimeout(ne){return await this._mainFrame.waitForTimeout(ne)}async waitForFunction(ne,S,j){return await this._mainFrame.waitForFunction(ne,S,j)}workers(){return[...this._workers]}async pause(ne){var y;if(this._platform.isJSDebuggerAttached())return;const S=this._browserContext._timeoutSettings.defaultNavigationTimeout(),j=this._browserContext._timeoutSettings.defaultTimeout();this._browserContext.setDefaultNavigationTimeout(0),this._browserContext.setDefaultTimeout(0),(y=this._instrumentation)==null||y.onWillPause({keepTestTimeout:!!(ne!=null&&ne.__testHookKeepTestTimeout)}),await this._closedOrCrashedScope.safeRace(this.context()._channel.pause()),this._browserContext.setDefaultNavigationTimeout(S),this._browserContext.setDefaultTimeout(j)}async pdf(ne={}){const S={...ne};S.margin&&(S.margin={...S.margin}),typeof ne.width=="number"&&(S.width=ne.width+"px"),typeof ne.height=="number"&&(S.height=ne.height+"px");for(const y of["top","right","bottom","left"]){const I=y;ne.margin&&typeof ne.margin[I]=="number"&&(S.margin[I]=S.margin[I]+"px")}const j=await this._channel.pdf(S);if(ne.path){const y=this._platform;await y.fs().promises.mkdir(y.path().dirname(ne.path),{recursive:!0}),await y.fs().promises.writeFile(ne.path,j.pdf)}return j.pdf}async _snapshotForAI(){return(await this._channel.snapshotForAI()).snapshot}}class le extends C.ChannelOwner{static from(ne){return ne._object}constructor(ne,S,j,y){super(ne,S,j,y)}async call(ne){try{const S=a.Frame.from(this._initializer.frame),j={context:S._page.context(),page:S._page,frame:S};let y;this._initializer.handle?y=await ne(j,o.JSHandle.from(this._initializer.handle)):y=await ne(j,...this._initializer.args.map(o.parseResult)),this._channel.resolve({result:(0,o.serializeArgument)(y)}).catch(()=>{})}catch(S){this._channel.reject({error:(0,f.serializeError)(S)}).catch(()=>{})}}}function _e(ge){if((0,q.isRegExp)(ge))return`/${(0,O.trimStringWithEllipsis)(ge.source,50)}/${ge.flags}`;if((0,q.isString)(ge))return`"${(0,O.trimStringWithEllipsis)(ge,50)}"`}return ip}var sp,Nv;function ky(){if(Nv)return sp;Nv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{ConsoleMessage:()=>C}),sp=te(P);var e=Xi(),U=Ko();class C{constructor(g,u){this._page="page"in u&&u.page?U.Page.from(u.page):null,this._event=u,g.inspectCustom&&(this[g.inspectCustom]=()=>this._inspect())}page(){return this._page}type(){return this._event.type}text(){return this._event.text}args(){return this._event.args.map(e.JSHandle.from)}location(){return this._event.location}_inspect(){return this.text()}}return sp}var ap,Rv;function Ay(){if(Rv)return ap;Rv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Dialog:()=>C}),ap=te(P);var e=Jr(),U=Ko();class C extends e.ChannelOwner{static from(g){return g._object}constructor(g,u,_,f){super(g,u,_,f),this._page=U.Page.fromNullable(f.page)}page(){return this._page}type(){return this._initializer.type}message(){return this._initializer.message}defaultValue(){return this._initializer.defaultValue}async accept(g){await this._channel.accept({promptText:g})}async dismiss(){await this._channel.dismiss()}}return ap}var op,Lv;function rC(){if(Lv)return op;Lv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{WebError:()=>e}),op=te(P);class e{constructor(C,w){this._page=C,this._error=w}page(){return this._page}error(){return this._error}}return op}var cp,Dv;function _s(){if(Dv)return cp;Dv=1;var t=Object.create,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,te=(j,y)=>{for(var I in y)r(j,I,{get:y[I],enumerable:!0})},P=(j,y,I,D)=>{if(y&&typeof y=="object"||typeof y=="function")for(let ie of E(y))!V.call(j,ie)&&ie!==I&&r(j,ie,{get:()=>y[ie],enumerable:!(D=i(y,ie))||D.enumerable});return j},e=(j,y,I)=>(I=j!=null?t(R(j)):{},P(!j||!j.__esModule?r(I,"default",{value:j,enumerable:!0}):I,j)),U=j=>P(r({},"__esModule",{value:!0}),j),C={};te(C,{BrowserContext:()=>le,prepareBrowserContextParams:()=>ge,toClientCertificatesProtocol:()=>S}),cp=U(C);var w=ra(),g=bf(),u=Jr(),_=ms(),f=GT(),d=ky(),v=Ay(),a=Mn(),s=pi(),n=Wo(),o=ia(),h=Py(),m=e(na()),c=Ko(),l=vf(),x=gs(),T=rC(),b=zo(),p=Qi(),O=fs(),z=zi(),$=di(),q=Wn(),J=pn();class le extends u.ChannelOwner{constructor(y,I,D,ie){super(y,I,D,ie),this._pages=new Set,this._routes=[],this._webSocketRoutes=[],this._browser=null,this._bindings=new Map,this._forReuse=!1,this._backgroundPages=new Set,this._serviceWorkers=new Set,this._harRecorders=new Map,this._closingStatus="none",this._harRouters=[],this._options=ie.options,this._timeoutSettings=new p.TimeoutSettings(this._platform),this.tracing=l.Tracing.from(ie.tracing),this.request=n.APIRequestContext.from(ie.requestContext),this.request._timeoutSettings=this._timeoutSettings,this.clock=new f.Clock(this),this._channel.on("bindingCall",({binding:he})=>this._onBinding(c.BindingCall.from(he))),this._channel.on("close",()=>this._onClose()),this._channel.on("page",({page:he})=>this._onPage(c.Page.from(he))),this._channel.on("route",({route:he})=>this._onRoute(m.Route.from(he))),this._channel.on("webSocketRoute",({webSocketRoute:he})=>this._onWebSocketRoute(m.WebSocketRoute.from(he))),this._channel.on("backgroundPage",({page:he})=>{const me=c.Page.from(he);this._backgroundPages.add(me),this.emit(s.Events.BrowserContext.BackgroundPage,me)}),this._channel.on("serviceWorker",({worker:he})=>{const me=b.Worker.from(he);me._context=this,this._serviceWorkers.add(me),this.emit(s.Events.BrowserContext.ServiceWorker,me)}),this._channel.on("console",he=>{const me=new d.ConsoleMessage(this._platform,he);this.emit(s.Events.BrowserContext.Console,me);const ye=me.page();ye&&ye.emit(s.Events.Page.Console,me)}),this._channel.on("pageError",({error:he,page:me})=>{const ye=c.Page.from(me),Se=(0,a.parseError)(he);this.emit(s.Events.BrowserContext.WebError,new T.WebError(ye,Se)),ye&&ye.emit(s.Events.Page.PageError,Se)}),this._channel.on("dialog",({dialog:he})=>{const me=v.Dialog.from(he);let ye=this.emit(s.Events.BrowserContext.Dialog,me);const Se=me.page();Se&&(ye=Se.emit(s.Events.Page.Dialog,me)||ye),ye||(me.type()==="beforeunload"?he.accept({}).catch(()=>{}):he.dismiss().catch(()=>{}))}),this._channel.on("request",({request:he,page:me})=>this._onRequest(m.Request.from(he),c.Page.fromNullable(me))),this._channel.on("requestFailed",({request:he,failureText:me,responseEndTiming:ye,page:Se})=>this._onRequestFailed(m.Request.from(he),ye,me,c.Page.fromNullable(Se))),this._channel.on("requestFinished",he=>this._onRequestFinished(he)),this._channel.on("response",({response:he,page:me})=>this._onResponse(m.Response.from(he),c.Page.fromNullable(me))),this._channel.on("recorderEvent",({event:he,data:me,page:ye})=>{var Se,Oe,Pe;he==="actionAdded"?(Se=this._onRecorderEventSink)==null||Se.actionAdded(c.Page.from(ye),me):he==="actionUpdated"?(Oe=this._onRecorderEventSink)==null||Oe.actionUpdated(c.Page.from(ye),me):he==="signalAdded"&&((Pe=this._onRecorderEventSink)==null||Pe.signalAdded(c.Page.from(ye),me))}),this._closedPromise=new Promise(he=>this.once(s.Events.BrowserContext.Close,he)),this._setEventToSubscriptionMapping(new Map([[s.Events.BrowserContext.Console,"console"],[s.Events.BrowserContext.Dialog,"dialog"],[s.Events.BrowserContext.Request,"request"],[s.Events.BrowserContext.Response,"response"],[s.Events.BrowserContext.RequestFinished,"requestFinished"],[s.Events.BrowserContext.RequestFailed,"requestFailed"]]))}static from(y){return y._object}static fromNullable(y){return y?le.from(y):null}async _initializeHarFromOptions(y){if(!y)return;const I=y.path.endsWith(".zip")?"attach":"embed";await this._recordIntoHAR(y.path,null,{url:y.urlFilter,updateContent:y.content??(y.omitContent?"omit":I),updateMode:y.mode??"full"})}_onPage(y){this._pages.add(y),this.emit(s.Events.BrowserContext.Page,y),y._opener&&!y._opener.isClosed()&&y._opener.emit(s.Events.Page.Popup,y)}_onRequest(y,I){this.emit(s.Events.BrowserContext.Request,y),I&&I.emit(s.Events.Page.Request,y)}_onResponse(y,I){this.emit(s.Events.BrowserContext.Response,y),I&&I.emit(s.Events.Page.Response,y)}_onRequestFailed(y,I,D,ie){y._failureText=D||null,y._setResponseEndTiming(I),this.emit(s.Events.BrowserContext.RequestFailed,y),ie&&ie.emit(s.Events.Page.RequestFailed,y)}_onRequestFinished(y){const{responseEndTiming:I}=y,D=m.Request.from(y.request),ie=m.Response.fromNullable(y.response),he=c.Page.fromNullable(y.page);D._setResponseEndTiming(I),this.emit(s.Events.BrowserContext.RequestFinished,D),he&&he.emit(s.Events.Page.RequestFinished,D),ie&&ie._finishedPromise.resolve(null)}async _onRoute(y){y._context=this;const I=y.request()._safePage(),D=this._routes.slice();for(const ie of D){if(I!=null&&I._closeWasCalled||this._closingStatus!=="none")return;if(!ie.matches(y.request().url()))continue;const he=this._routes.indexOf(ie);if(he===-1)continue;ie.willExpire()&&this._routes.splice(he,1);const me=await ie.handle(y);if(this._routes.length||this._updateInterceptionPatterns().catch(()=>{}),me)return}await y._innerContinue(!0).catch(()=>{})}async _onWebSocketRoute(y){const I=this._webSocketRoutes.find(D=>D.matches(y.url()));I?await I.handle(y):y.connectToServer()}async _onBinding(y){const I=this._bindings.get(y._initializer.name);I&&await y.call(I)}setDefaultNavigationTimeout(y){this._timeoutSettings.setDefaultNavigationTimeout(y)}setDefaultTimeout(y){this._timeoutSettings.setDefaultTimeout(y)}browser(){return this._browser}pages(){return[...this._pages]}async newPage(){if(this._ownerPage)throw new Error("Please use browser.newContext()");return c.Page.from((await this._channel.newPage()).page)}async cookies(y){return y||(y=[]),y&&typeof y=="string"&&(y=[y]),(await this._channel.cookies({urls:y})).cookies}async addCookies(y){await this._channel.addCookies({cookies:y})}async clearCookies(y={}){await this._channel.clearCookies({name:(0,q.isString)(y.name)?y.name:void 0,nameRegexSource:(0,q.isRegExp)(y.name)?y.name.source:void 0,nameRegexFlags:(0,q.isRegExp)(y.name)?y.name.flags:void 0,domain:(0,q.isString)(y.domain)?y.domain:void 0,domainRegexSource:(0,q.isRegExp)(y.domain)?y.domain.source:void 0,domainRegexFlags:(0,q.isRegExp)(y.domain)?y.domain.flags:void 0,path:(0,q.isString)(y.path)?y.path:void 0,pathRegexSource:(0,q.isRegExp)(y.path)?y.path.source:void 0,pathRegexFlags:(0,q.isRegExp)(y.path)?y.path.flags:void 0})}async grantPermissions(y,I){await this._channel.grantPermissions({permissions:y,...I})}async clearPermissions(){await this._channel.clearPermissions()}async setGeolocation(y){await this._channel.setGeolocation({geolocation:y||void 0})}async setExtraHTTPHeaders(y){m.validateHeaders(y),await this._channel.setExtraHTTPHeaders({headers:(0,z.headersObjectToArray)(y)})}async setOffline(y){await this._channel.setOffline({offline:y})}async setHTTPCredentials(y){await this._channel.setHTTPCredentials({httpCredentials:y||void 0})}async addInitScript(y,I){const D=await(0,_.evaluationScript)(this._platform,y,I);await this._channel.addInitScript({source:D})}async exposeBinding(y,I,D={}){await this._channel.exposeBinding({name:y,needsHandle:D.handle}),this._bindings.set(y,I)}async exposeFunction(y,I){await this._channel.exposeBinding({name:y});const D=(ie,...he)=>I(...he);this._bindings.set(y,D)}async route(y,I,D={}){this._routes.unshift(new m.RouteHandler(this._platform,this._options.baseURL,y,I,D.times)),await this._updateInterceptionPatterns()}async routeWebSocket(y,I){this._webSocketRoutes.unshift(new m.WebSocketRouteHandler(this._options.baseURL,y,I)),await this._updateWebSocketInterceptionPatterns()}async _recordIntoHAR(y,I,D={}){const{harId:ie}=await this._channel.harStart({page:I==null?void 0:I._channel,options:{zip:y.endsWith(".zip"),content:D.updateContent??"attach",urlGlob:(0,q.isString)(D.url)?D.url:void 0,urlRegexSource:(0,q.isRegExp)(D.url)?D.url.source:void 0,urlRegexFlags:(0,q.isRegExp)(D.url)?D.url.flags:void 0,mode:D.updateMode??"minimal"}});this._harRecorders.set(ie,{path:y,content:D.updateContent??"attach"})}async routeFromHAR(y,I={}){const D=this._connection.localUtils();if(!D)throw new Error("Route from har is not supported in thin clients");if(I.update){await this._recordIntoHAR(y,null,I);return}const ie=await h.HarRouter.create(D,y,I.notFound||"abort",{urlMatch:I.url});this._harRouters.push(ie),await ie.addContextRoute(this)}_disposeHarRouters(){this._harRouters.forEach(y=>y.dispose()),this._harRouters=[]}async unrouteAll(y){await this._unrouteInternal(this._routes,[],y==null?void 0:y.behavior),this._disposeHarRouters()}async unroute(y,I){const D=[],ie=[];for(const he of this._routes)(0,$.urlMatchesEqual)(he.url,y)&&(!I||he.handler===I)?D.push(he):ie.push(he);await this._unrouteInternal(D,ie,"default")}async _unrouteInternal(y,I,D){if(this._routes=I,D&&D!=="default"){const ie=y.map(he=>he.stop(D));await Promise.all(ie)}await this._updateInterceptionPatterns()}async _updateInterceptionPatterns(){const y=m.RouteHandler.prepareInterceptionPatterns(this._routes);await this._channel.setNetworkInterceptionPatterns({patterns:y})}async _updateWebSocketInterceptionPatterns(){const y=m.WebSocketRouteHandler.prepareInterceptionPatterns(this._webSocketRoutes);await this._channel.setWebSocketInterceptionPatterns({patterns:y})}_effectiveCloseReason(){var y;return this._closeReason||((y=this._browser)==null?void 0:y._closeReason)}async waitForEvent(y,I={}){return await this._wrapApiCall(async()=>{const D=this._timeoutSettings.timeout(typeof I=="function"?{}:I),ie=typeof I=="function"?I:I.predicate,he=x.Waiter.createForEvent(this,y);he.rejectOnTimeout(D,`Timeout ${D}ms exceeded while waiting for event "${y}"`),y!==s.Events.BrowserContext.Close&&he.rejectOnEvent(this,s.Events.BrowserContext.Close,()=>new a.TargetClosedError(this._effectiveCloseReason()));const me=await he.waitForEvent(this,y,ie);return he.dispose(),me})}async storageState(y={}){const I=await this._channel.storageState({indexedDB:y.indexedDB});return y.path&&(await(0,O.mkdirIfNeeded)(this._platform,y.path),await this._platform.fs().promises.writeFile(y.path,JSON.stringify(I,void 0,2),"utf8")),I}backgroundPages(){return[...this._backgroundPages]}serviceWorkers(){return[...this._serviceWorkers]}async newCDPSession(y){if(!(y instanceof c.Page)&&!(y instanceof o.Frame))throw new Error("page: expected Page or Frame");const I=await this._channel.newCDPSession(y instanceof c.Page?{page:y._channel}:{frame:y._channel});return g.CDPSession.from(I.session)}_onClose(){var y,I,D;this._closingStatus="closed",(y=this._browser)==null||y._contexts.delete(this),(I=this._browser)==null||I._browserType._contexts.delete(this),(D=this._browser)==null||D._browserType._playwright.selectors._contextsForSelectors.delete(this),this._disposeHarRouters(),this.tracing._resetStackCounter(),this.emit(s.Events.BrowserContext.Close,this)}async[Symbol.asyncDispose](){await this.close()}async close(y={}){this._closingStatus==="none"&&(this._closeReason=y.reason,this._closingStatus="closing",await this.request.dispose(y),await this._wrapApiCall(async()=>{await this._instrumentation.runBeforeCloseBrowserContext(this);for(const[I,D]of this._harRecorders){const ie=await this._channel.harExport({harId:I}),he=w.Artifact.from(ie.artifact),me=D.content==="attach"||D.path.endsWith(".zip"),ye=D.path.endsWith(".zip");if(me&&!ye){const Se=this._connection.localUtils();if(!Se)throw new Error("Uncompressed har is not supported in thin clients");await he.saveAs(D.path+".tmp"),await Se.harUnzip({zipFile:D.path+".tmp",harFile:D.path})}else await he.saveAs(D.path);await he.delete()}},{internal:!0}),await this._channel.close(y),await this._closedPromise)}async _enableRecorder(y,I){I&&(this._onRecorderEventSink=I),await this._channel.enableRecorder(y)}async _disableRecorder(){this._onRecorderEventSink=void 0,await this._channel.disableRecorder()}}async function _e(j,y){if(typeof y.storageState!="string")return y.storageState;try{return JSON.parse(await j.fs().promises.readFile(y.storageState,"utf8"))}catch(I){throw(0,J.rewriteErrorMessage)(I,`Error reading storage state from ${y.storageState}:
`+I.message),I}}async function ge(j,y){if(y.videoSize&&!y.videosPath)throw new Error('"videoSize" option requires "videosPath" to be specified');y.extraHTTPHeaders&&m.validateHeaders(y.extraHTTPHeaders);const I={...y,viewport:y.viewport===null?void 0:y.viewport,noDefaultViewport:y.viewport===null,extraHTTPHeaders:y.extraHTTPHeaders?(0,z.headersObjectToArray)(y.extraHTTPHeaders):void 0,storageState:await _e(j,y),serviceWorkers:y.serviceWorkers,colorScheme:y.colorScheme===null?"no-override":y.colorScheme,reducedMotion:y.reducedMotion===null?"no-override":y.reducedMotion,forcedColors:y.forcedColors===null?"no-override":y.forcedColors,contrast:y.contrast===null?"no-override":y.contrast,acceptDownloads:ne(y.acceptDownloads),clientCertificates:await S(j,y.clientCertificates)};return!I.recordVideo&&y.videosPath&&(I.recordVideo={dir:y.videosPath,size:y.videoSize}),I.recordVideo&&I.recordVideo.dir&&(I.recordVideo.dir=j.path().resolve(I.recordVideo.dir)),I}function ne(j){if(j!==void 0)return j?"accept":"deny"}async function S(j,y){if(!y)return;const I=async(D,ie)=>{if(D)return D;if(ie)return await j.fs().promises.readFile(ie)};return await Promise.all(y.map(async D=>({origin:D.origin,cert:await I(D.cert,D.certPath),key:await I(D.key,D.keyPath),pfx:await I(D.pfx,D.pfxPath),passphrase:D.passphrase})))}return cp}var lp,Mv;function Iy(){if(Mv)return lp;Mv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(g,u)=>{for(var _ in u)t(g,_,{get:u[_],enumerable:!0})},V=(g,u,_,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of i(u))!E.call(g,d)&&d!==_&&t(g,d,{get:()=>u[d],enumerable:!(f=r(u,d))||f.enumerable});return g},te=g=>V(t({},"__esModule",{value:!0}),g),P={};R(P,{connectOverWebSocket:()=>U}),lp=te(P);var e=Dy();async function U(g,u){const _=g.localUtils(),f=_?new C(_):new w,d=await f.connect(u),v=new e.Connection(g._platform,_,g._instrumentation,d);v.markAsRemote(),v.on("close",()=>f.close());let a;const s=n=>{v.close(n||a)};return f.onClose(n=>s(n)),v.onmessage=n=>f.send(n).catch(()=>s()),f.onMessage(n=>{try{v.dispatch(n)}catch(o){a=String(o),f.close().catch(()=>{})}}),v}class C{constructor(u){this._owner=u}async connect(u){const{pipe:_,headers:f}=await this._owner._channel.connect(u);return this._pipe=_,f}async send(u){await this._pipe.send({message:u})}onMessage(u){this._pipe.on("message",({message:_})=>u(_))}onClose(u){this._pipe.on("closed",({reason:_})=>u(_))}async close(){await this._pipe.close().catch(()=>{})}}class w{async connect(u){return this._ws=new window.WebSocket(u.wsEndpoint),[]}async send(u){this._ws.send(JSON.stringify(u))}onMessage(u){this._ws.addEventListener("message",_=>u(JSON.parse(_.data)))}onClose(u){this._ws.addEventListener("close",()=>u())}async close(){this._ws.close()}}return lp}var up,Fv;function Ny(){if(Fv)return up;Fv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(x,T)=>{for(var b in T)t(x,b,{get:T[b],enumerable:!0})},V=(x,T,b,p)=>{if(T&&typeof T=="object"||typeof T=="function")for(let O of i(T))!E.call(x,O)&&O!==b&&t(x,O,{get:()=>T[O],enumerable:!(p=r(T,O))||p.enumerable});return x},te=x=>V(t({},"__esModule",{value:!0}),x),P={};R(P,{Android:()=>s,AndroidDevice:()=>n,AndroidInput:()=>m,AndroidSocket:()=>o,AndroidWebView:()=>l}),up=te(P);var e=$o(),U=_s(),C=Jr(),w=Mn(),g=pi(),u=gs(),_=Qi(),f=Wn(),d=En(),v=Ao(),a=Iy();class s extends C.ChannelOwner{static from(T){return T._object}constructor(T,b,p,O){super(T,b,p,O),this._timeoutSettings=new _.TimeoutSettings(this._platform)}setDefaultTimeout(T){this._timeoutSettings.setDefaultTimeout(T)}async devices(T={}){const{devices:b}=await this._channel.devices(T);return b.map(p=>n.from(p))}async launchServer(T={}){if(!this._serverLauncher)throw new Error("Launching server is not supported");return await this._serverLauncher.launchServer(T)}async connect(T,b={}){return await this._wrapApiCall(async()=>{const p=b.timeout?(0,d.monotonicTime)()+b.timeout:0,O={"x-playwright-browser":"android",...b.headers},z={wsEndpoint:T,headers:O,slowMo:b.slowMo,timeout:b.timeout||0},$=await(0,a.connectOverWebSocket)(this._connection,z);let q;$.on("close",()=>{q==null||q._didClose()});const J=await(0,v.raceAgainstDeadline)(async()=>{const le=await $.initializePlaywright();if(!le._initializer.preConnectedAndroidDevice)throw $.close(),new Error("Malformed endpoint. Did you use Android.launchServer method?");return q=n.from(le._initializer.preConnectedAndroidDevice),q._shouldCloseConnectionOnClose=!0,q.on(g.Events.AndroidDevice.Close,()=>$.close()),q},p);if(J.timedOut)throw $.close(),new Error(`Timeout ${b.timeout}ms exceeded`);return J.result})}}class n extends C.ChannelOwner{constructor(T,b,p,O){super(T,b,p,O),this._webViews=new Map,this._shouldCloseConnectionOnClose=!1,this._android=T,this.input=new m(this),this._timeoutSettings=new _.TimeoutSettings(this._platform,T._timeoutSettings),this._channel.on("webViewAdded",({webView:z})=>this._onWebViewAdded(z)),this._channel.on("webViewRemoved",({socketName:z})=>this._onWebViewRemoved(z)),this._channel.on("close",()=>this._didClose())}static from(T){return T._object}_onWebViewAdded(T){const b=new l(this,T);this._webViews.set(T.socketName,b),this.emit(g.Events.AndroidDevice.WebView,b)}_onWebViewRemoved(T){const b=this._webViews.get(T);this._webViews.delete(T),b&&b.emit(g.Events.AndroidWebView.Close)}setDefaultTimeout(T){this._timeoutSettings.setDefaultTimeout(T)}serial(){return this._initializer.serial}model(){return this._initializer.model}webViews(){return[...this._webViews.values()]}async webView(T,b){const p=z=>T.pkg?z.pkg()===T.pkg:T.socketName?z._socketName()===T.socketName:!1,O=[...this._webViews.values()].find(p);return O||await this.waitForEvent("webview",{...b,predicate:p})}async wait(T,b={}){await this._channel.wait({androidSelector:c(T),...b,timeout:this._timeoutSettings.timeout(b)})}async fill(T,b,p={}){await this._channel.fill({androidSelector:c(T),text:b,...p,timeout:this._timeoutSettings.timeout(p)})}async press(T,b,p={}){await this.tap(T,p),await this.input.press(b)}async tap(T,b={}){await this._channel.tap({androidSelector:c(T),...b,timeout:this._timeoutSettings.timeout(b)})}async drag(T,b,p={}){await this._channel.drag({androidSelector:c(T),dest:b,...p,timeout:this._timeoutSettings.timeout(p)})}async fling(T,b,p={}){await this._channel.fling({androidSelector:c(T),direction:b,...p,timeout:this._timeoutSettings.timeout(p)})}async longTap(T,b={}){await this._channel.longTap({androidSelector:c(T),...b,timeout:this._timeoutSettings.timeout(b)})}async pinchClose(T,b,p={}){await this._channel.pinchClose({androidSelector:c(T),percent:b,...p,timeout:this._timeoutSettings.timeout(p)})}async pinchOpen(T,b,p={}){await this._channel.pinchOpen({androidSelector:c(T),percent:b,...p,timeout:this._timeoutSettings.timeout(p)})}async scroll(T,b,p,O={}){await this._channel.scroll({androidSelector:c(T),direction:b,percent:p,...O,timeout:this._timeoutSettings.timeout(O)})}async swipe(T,b,p,O={}){await this._channel.swipe({androidSelector:c(T),direction:b,percent:p,...O,timeout:this._timeoutSettings.timeout(O)})}async info(T){return(await this._channel.info({androidSelector:c(T)})).info}async screenshot(T={}){const{binary:b}=await this._channel.screenshot();return T.path&&await this._platform.fs().promises.writeFile(T.path,b),b}async[Symbol.asyncDispose](){await this.close()}async close(){try{this._shouldCloseConnectionOnClose?this._connection.close():await this._channel.close()}catch(T){if((0,w.isTargetClosedError)(T))return;throw T}}_didClose(){this.emit(g.Events.AndroidDevice.Close,this)}async shell(T){const{result:b}=await this._channel.shell({command:T});return b}async open(T){return o.from((await this._channel.open({command:T})).socket)}async installApk(T,b){await this._channel.installApk({file:await h(this._platform,T),args:b&&b.args})}async push(T,b,p){await this._channel.push({file:await h(this._platform,T),path:b,mode:p?p.mode:void 0})}async launchBrowser(T={}){const b=await(0,U.prepareBrowserContextParams)(this._platform,T),p=await this._channel.launchBrowser(b),O=U.BrowserContext.from(p.context),z=this._android._playwright.selectors;return z._contextsForSelectors.add(O),O.once(g.Events.BrowserContext.Close,()=>z._contextsForSelectors.delete(O)),await O._initializeHarFromOptions(T.recordHar),O}async waitForEvent(T,b={}){return await this._wrapApiCall(async()=>{const p=this._timeoutSettings.timeout(typeof b=="function"?{}:b),O=typeof b=="function"?b:b.predicate,z=u.Waiter.createForEvent(this,T);z.rejectOnTimeout(p,`Timeout ${p}ms exceeded while waiting for event "${T}"`),T!==g.Events.AndroidDevice.Close&&z.rejectOnEvent(this,g.Events.AndroidDevice.Close,()=>new w.TargetClosedError);const $=await z.waitForEvent(this,T,O);return z.dispose(),$})}}class o extends C.ChannelOwner{static from(T){return T._object}constructor(T,b,p,O){super(T,b,p,O),this._channel.on("data",({data:z})=>this.emit(g.Events.AndroidSocket.Data,z)),this._channel.on("close",()=>this.emit(g.Events.AndroidSocket.Close))}async write(T){await this._channel.write({data:T})}async close(){await this._channel.close()}async[Symbol.asyncDispose](){await this.close()}}async function h(x,T){return(0,f.isString)(T)?await x.fs().promises.readFile(T):T}class m{constructor(T){this._device=T}async type(T){await this._device._channel.inputType({text:T})}async press(T){await this._device._channel.inputPress({key:T})}async tap(T){await this._device._channel.inputTap({point:T})}async swipe(T,b,p){await this._device._channel.inputSwipe({segments:b,steps:p})}async drag(T,b,p){await this._device._channel.inputDrag({from:T,to:b,steps:p})}}function c(x){const{checkable:T,checked:b,clazz:p,clickable:O,depth:z,desc:$,enabled:q,focusable:J,focused:le,hasChild:_e,hasDescendant:ge,longClickable:ne,pkg:S,res:j,scrollable:y,selected:I,text:D}=x,ie=he=>{if(he!==void 0)return(0,f.isRegExp)(he)?he.source:"^"+he.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")+"$"};return{checkable:T,checked:b,clazz:ie(p),pkg:ie(S),desc:ie($),res:ie(j),text:ie(D),clickable:O,depth:z,enabled:q,focusable:J,focused:le,hasChild:_e?{androidSelector:c(_e.selector)}:void 0,hasDescendant:ge?{androidSelector:c(ge.selector),maxDepth:ge.maxDepth}:void 0,longClickable:ne,scrollable:y,selected:I}}class l extends e.EventEmitter{constructor(T,b){super(T._platform),this._device=T,this._data=b}pid(){return this._data.pid}pkg(){return this._data.pkg}_socketName(){return this._data.socketName}async page(){return this._pagePromise||(this._pagePromise=this._fetchPage()),await this._pagePromise}async _fetchPage(){const{context:T}=await this._device._channel.connectToWebView({socketName:this._data.socketName});return U.BrowserContext.from(T).pages()[0]}}return up}var dp,Bv;function wf(){if(Bv)return dp;Bv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(d,v)=>{for(var a in v)t(d,a,{get:v[a],enumerable:!0})},V=(d,v,a,s)=>{if(v&&typeof v=="object"||typeof v=="function")for(let n of i(v))!E.call(d,n)&&n!==a&&t(d,n,{get:()=>v[n],enumerable:!(s=r(v,n))||s.enumerable});return d},te=d=>V(t({},"__esModule",{value:!0}),d),P={};R(P,{Browser:()=>f}),dp=te(P);var e=ra(),U=_s(),C=bf(),w=Jr(),g=Mn(),u=pi(),_=fs();class f extends w.ChannelOwner{constructor(v,a,s,n){super(v,a,s,n),this._contexts=new Set,this._isConnected=!0,this._shouldCloseConnectionOnClose=!1,this._options={},this._name=n.name,this._channel.on("context",({context:o})=>this._didCreateContext(U.BrowserContext.from(o))),this._channel.on("close",()=>this._didClose()),this._closedPromise=new Promise(o=>this.once(u.Events.Browser.Disconnected,o))}static from(v){return v._object}browserType(){return this._browserType}async newContext(v={}){return await this._innerNewContext(v,!1)}async _newContextForReuse(v={}){return await this._wrapApiCall(()=>this._innerNewContext(v,!0),{internal:!0})}async _disconnectFromReusedContext(v){return await this._wrapApiCall(async()=>{const a=[...this._contexts].find(s=>s._forReuse);if(a){await this._instrumentation.runBeforeCloseBrowserContext(a);for(const s of a.pages())s._onClose();a._onClose(),await this._channel.disconnectFromReusedContext({reason:v})}},{internal:!0})}async _innerNewContext(v={},a){v=this._browserType._playwright.selectors._withSelectorOptions({...this._browserType._playwright._defaultContextOptions,...v});const s=await(0,U.prepareBrowserContextParams)(this._platform,v),n=a?await this._channel.newContextForReuse(s):await this._channel.newContext(s),o=U.BrowserContext.from(n.context);return a&&(o._forReuse=!0),v.logger&&(o._logger=v.logger),await o._initializeHarFromOptions(v.recordHar),await this._instrumentation.runAfterCreateBrowserContext(o),o}_connectToBrowserType(v,a,s){this._browserType=v,this._options=a,this._logger=s;for(const n of this._contexts)this._setupBrowserContext(n)}_didCreateContext(v){v._browser=this,this._contexts.add(v),this._browserType&&this._setupBrowserContext(v)}_setupBrowserContext(v){v._logger=this._logger,v.tracing._tracesDir=this._options.tracesDir,this._browserType._contexts.add(v),this._browserType._playwright.selectors._contextsForSelectors.add(v),v.setDefaultTimeout(this._browserType._playwright._defaultContextTimeout),v.setDefaultNavigationTimeout(this._browserType._playwright._defaultContextNavigationTimeout)}contexts(){return[...this._contexts]}version(){return this._initializer.version}async newPage(v={}){return await this._wrapApiCall(async()=>{const a=await this.newContext(v),s=await a.newPage();return s._ownedContext=a,a._ownerPage=s,s},{title:"Create page"})}isConnected(){return this._isConnected}async newBrowserCDPSession(){return C.CDPSession.from((await this._channel.newBrowserCDPSession()).session)}async startTracing(v,a={}){this._path=a.path,await this._channel.startTracing({...a,page:v?v._channel:void 0})}async stopTracing(){const v=e.Artifact.from((await this._channel.stopTracing()).artifact),a=await v.readIntoBuffer();return await v.delete(),this._path&&(await(0,_.mkdirIfNeeded)(this._platform,this._path),await this._platform.fs().promises.writeFile(this._path,a),this._path=void 0),a}async[Symbol.asyncDispose](){await this.close()}async close(v={}){this._closeReason=v.reason;try{this._shouldCloseConnectionOnClose?this._connection.close():await this._channel.close(v),await this._closedPromise}catch(a){if((0,g.isTargetClosedError)(a))return;throw a}}_didClose(){this._isConnected=!1,this.emit(u.Events.Browser.Disconnected,this)}}return dp}var hp,jv;function Ry(){if(jv)return hp;jv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(n,o)=>{for(var h in o)t(n,h,{get:o[h],enumerable:!0})},V=(n,o,h,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of i(o))!E.call(n,c)&&c!==h&&t(n,c,{get:()=>o[c],enumerable:!(m=r(o,c))||m.enumerable});return n},te=n=>V(t({},"__esModule",{value:!0}),n),P={};R(P,{BrowserType:()=>s}),hp=te(P);var e=wf(),U=_s(),C=Jr(),w=ms(),g=pi(),u=Gr(),_=zi(),f=En(),d=Ao(),v=Iy(),a=Qi();class s extends C.ChannelOwner{constructor(){super(...arguments),this._contexts=new Set}static from(o){return o._object}executablePath(){if(!this._initializer.executablePath)throw new Error("Browser is not supported on current platform");return this._initializer.executablePath}name(){return this._initializer.name}async launch(o={}){var c;(0,u.assert)(!o.userDataDir,"userDataDir option is not supported in `browserType.launch`. Use `browserType.launchPersistentContext` instead"),(0,u.assert)(!o.port,"Cannot specify a port without launching as a server.");const h=o.logger||((c=this._playwright._defaultLaunchOptions)==null?void 0:c.logger);o={...this._playwright._defaultLaunchOptions,...o};const m={...o,ignoreDefaultArgs:Array.isArray(o.ignoreDefaultArgs)?o.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!o.ignoreDefaultArgs&&!Array.isArray(o.ignoreDefaultArgs),env:o.env?(0,w.envObjectToArray)(o.env):void 0,timeout:new a.TimeoutSettings(this._platform).launchTimeout(o)};return await this._wrapApiCall(async()=>{const l=e.Browser.from((await this._channel.launch(m)).browser);return l._connectToBrowserType(this,o,h),l})}async launchServer(o={}){if(!this._serverLauncher)throw new Error("Launching server is not supported");return o={...this._playwright._defaultLaunchOptions,...o},await this._serverLauncher.launchServer(o)}async launchPersistentContext(o,h={}){var x;const m=h.logger||((x=this._playwright._defaultLaunchOptions)==null?void 0:x.logger);(0,u.assert)(!h.port,"Cannot specify a port without launching as a server."),h=this._playwright.selectors._withSelectorOptions({...this._playwright._defaultLaunchOptions,...this._playwright._defaultContextOptions,...h});const l={...await(0,U.prepareBrowserContextParams)(this._platform,h),ignoreDefaultArgs:Array.isArray(h.ignoreDefaultArgs)?h.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!h.ignoreDefaultArgs&&!Array.isArray(h.ignoreDefaultArgs),env:h.env?(0,w.envObjectToArray)(h.env):void 0,channel:h.channel,userDataDir:this._platform.path().isAbsolute(o)||!o?o:this._platform.path().resolve(o),timeout:new a.TimeoutSettings(this._platform).launchTimeout(h)};return await this._wrapApiCall(async()=>{const T=await this._channel.launchPersistentContext(l);e.Browser.from(T.browser)._connectToBrowserType(this,h,m);const p=U.BrowserContext.from(T.context);return await p._initializeHarFromOptions(h.recordHar),await this._instrumentation.runAfterCreateBrowserContext(p),p})}async connect(o,h){return typeof o=="string"?await this._connect({...h,wsEndpoint:o}):((0,u.assert)(o.wsEndpoint,"options.wsEndpoint is required"),await this._connect(o))}async _connect(o){const h=o.logger;return await this._wrapApiCall(async()=>{const m=o.timeout?(0,f.monotonicTime)()+o.timeout:0,c={"x-playwright-browser":this.name(),...o.headers},l={wsEndpoint:o.wsEndpoint,headers:c,exposeNetwork:o.exposeNetwork??o._exposeNetwork,slowMo:o.slowMo,timeout:o.timeout||0};o.__testHookRedirectPortForwarding&&(l.socksProxyRedirectPortForTest=o.__testHookRedirectPortForwarding);const x=await(0,v.connectOverWebSocket)(this._connection,l);let T;x.on("close",()=>{for(const p of(T==null?void 0:T.contexts())||[]){for(const O of p.pages())O._onClose();p._onClose()}setTimeout(()=>T==null?void 0:T._didClose(),0)});const b=await(0,d.raceAgainstDeadline)(async()=>{o.__testHookBeforeCreateBrowser&&await o.__testHookBeforeCreateBrowser();const p=await x.initializePlaywright();if(!p._initializer.preLaunchedBrowser)throw x.close(),new Error("Malformed endpoint. Did you use BrowserType.launchServer method?");return p.selectors=this._playwright.selectors,T=e.Browser.from(p._initializer.preLaunchedBrowser),T._connectToBrowserType(this,{},h),T._shouldCloseConnectionOnClose=!0,T.on(g.Events.Browser.Disconnected,()=>x.close()),T},m);if(b.timedOut)throw x.close(),new Error(`Timeout ${o.timeout}ms exceeded`);return b.result})}async connectOverCDP(o,h){if(typeof o=="string")return await this._connectOverCDP(o,h);const m="endpointURL"in o?o.endpointURL:o.wsEndpoint;return(0,u.assert)(m,"Cannot connect over CDP without wsEndpoint."),await this.connectOverCDP(m,o)}async _connectOverCDP(o,h={}){if(this.name()!=="chromium")throw new Error("Connecting over CDP is only supported in Chromium.");const m=h.headers?(0,_.headersObjectToArray)(h.headers):void 0,c=await this._channel.connectOverCDP({endpointURL:o,headers:m,slowMo:h.slowMo,timeout:new a.TimeoutSettings(this._platform).timeout(h)}),l=e.Browser.from(c.browser);return l._connectToBrowserType(this,{},h.logger),c.defaultContext&&await this._instrumentation.runAfterCreateBrowserContext(U.BrowserContext.from(c.defaultContext)),l}}return hp}var pp,Hv;function nC(){if(Hv)return pp;Hv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(U,C)=>{for(var w in C)t(U,w,{get:C[w],enumerable:!0})},V=(U,C,w,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of i(C))!E.call(U,u)&&u!==w&&t(U,u,{get:()=>C[u],enumerable:!(g=r(C,u))||g.enumerable});return U},te=U=>V(t({},"__esModule",{value:!0}),U),P={};R(P,{createInstrumentation:()=>e}),pp=te(P);function e(){const U=[];return new Proxy({},{get:(C,w)=>typeof w!="string"?C[w]:w==="addListener"?g=>U.push(g):w==="removeListener"?g=>U.splice(U.indexOf(g),1):w==="removeAllListeners"?()=>U.splice(0,U.length):w.startsWith("run")?async(...g)=>{var u;for(const _ of U)await((u=_[w])==null?void 0:u.call(_,...g))}:w.startsWith("on")?(...g)=>{var u;for(const _ of U)(u=_[w])==null||u.call(_,...g)}:C[w]})}return pp}var fp,Uv;function Ly(){if(Uv)return fp;Uv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(s,n)=>{for(var o in n)t(s,o,{get:n[o],enumerable:!0})},V=(s,n,o,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of i(n))!E.call(s,m)&&m!==o&&t(s,m,{get:()=>n[m],enumerable:!(h=r(n,m))||h.enumerable});return s},te=s=>V(t({},"__esModule",{value:!0}),s),P={};R(P,{Electron:()=>v,ElectronApplication:()=>a}),fp=te(P);var e=_s(),U=Jr(),C=ms(),w=ky(),g=Mn(),u=pi(),_=Xi(),f=gs(),d=Qi();class v extends U.ChannelOwner{static from(n){return n._object}constructor(n,o,h,m){super(n,o,h,m)}async launch(n={}){n=this._playwright.selectors._withSelectorOptions(n);const o={...await(0,e.prepareBrowserContextParams)(this._platform,n),env:(0,C.envObjectToArray)(n.env?n.env:this._platform.env),tracesDir:n.tracesDir,timeout:new d.TimeoutSettings(this._platform).launchTimeout(n)},h=a.from((await this._channel.launch(o)).electronApplication);return this._playwright.selectors._contextsForSelectors.add(h._context),h.once(u.Events.ElectronApplication.Close,()=>this._playwright.selectors._contextsForSelectors.delete(h._context)),await h._context._initializeHarFromOptions(n.recordHar),h._context.tracing._tracesDir=n.tracesDir,h}}class a extends U.ChannelOwner{constructor(n,o,h,m){super(n,o,h,m),this._windows=new Set,this._timeoutSettings=new d.TimeoutSettings(this._platform),this._context=e.BrowserContext.from(m.context);for(const c of this._context._pages)this._onPage(c);this._context.on(u.Events.BrowserContext.Page,c=>this._onPage(c)),this._channel.on("close",()=>{this.emit(u.Events.ElectronApplication.Close)}),this._channel.on("console",c=>this.emit(u.Events.ElectronApplication.Console,new w.ConsoleMessage(this._platform,c))),this._setEventToSubscriptionMapping(new Map([[u.Events.ElectronApplication.Console,"console"]]))}static from(n){return n._object}process(){return this._toImpl().process()}_onPage(n){this._windows.add(n),this.emit(u.Events.ElectronApplication.Window,n),n.once(u.Events.Page.Close,()=>this._windows.delete(n))}windows(){return[...this._windows]}async firstWindow(n){return this._windows.size?this._windows.values().next().value:await this.waitForEvent("window",n)}context(){return this._context}async[Symbol.asyncDispose](){await this.close()}async close(){try{await this._context.close()}catch(n){if((0,g.isTargetClosedError)(n))return;throw n}}async waitForEvent(n,o={}){return await this._wrapApiCall(async()=>{const h=this._timeoutSettings.timeout(typeof o=="function"?{}:o),m=typeof o=="function"?o:o.predicate,c=f.Waiter.createForEvent(this,n);c.rejectOnTimeout(h,`Timeout ${h}ms exceeded while waiting for event "${n}"`),n!==u.Events.ElectronApplication.Close&&c.rejectOnEvent(this,u.Events.ElectronApplication.Close,()=>new g.TargetClosedError);const l=await c.waitForEvent(this,n,m);return c.dispose(),l})}async browserWindow(n){const o=await this._channel.browserWindow({page:n._channel});return _.JSHandle.from(o.handle)}async evaluate(n,o){const h=await this._channel.evaluateExpression({expression:String(n),isFunction:typeof n=="function",arg:(0,_.serializeArgument)(o)});return(0,_.parseResult)(h.value)}async evaluateHandle(n,o){const h=await this._channel.evaluateExpressionHandle({expression:String(n),isFunction:typeof n=="function",arg:(0,_.serializeArgument)(o)});return _.JSHandle.from(h.handle)}}return fp}var mp,qv;function iC(){if(qv)return mp;qv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{JsonPipe:()=>U}),mp=te(P);var e=Jr();class U extends e.ChannelOwner{static from(w){return w._object}constructor(w,g,u,_){super(w,g,u,_)}channel(){return this._channel}}return mp}var gp,$v;function sC(){if($v)return gp;$v=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(C,w)=>{for(var g in w)t(C,g,{get:w[g],enumerable:!0})},V=(C,w,g,u)=>{if(w&&typeof w=="object"||typeof w=="function")for(let _ of i(w))!E.call(C,_)&&_!==g&&t(C,_,{get:()=>w[_],enumerable:!(u=r(w,_))||u.enumerable});return C},te=C=>V(t({},"__esModule",{value:!0}),C),P={};R(P,{LocalUtils:()=>U}),gp=te(P);var e=Jr();class U extends e.ChannelOwner{constructor(w,g,u,_){super(w,g,u,_),this.devices={};for(const{name:f,descriptor:d}of _.deviceDescriptors)this.devices[f]=d}async zip(w){return await this._channel.zip(w)}async harOpen(w){return await this._channel.harOpen(w)}async harLookup(w){return await this._channel.harLookup(w)}async harClose(w){return await this._channel.harClose(w)}async harUnzip(w){return await this._channel.harUnzip(w)}async tracingStarted(w){return await this._channel.tracingStarted(w)}async traceDiscarded(w){return await this._channel.traceDiscarded(w)}async addStackToTracingNoReply(w){return await this._channel.addStackToTracingNoReply(w)}}return gp}var _p,Wv;function aC(){if(Wv)return _p;Wv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(w,g)=>{for(var u in g)t(w,u,{get:g[u],enumerable:!0})},V=(w,g,u,_)=>{if(g&&typeof g=="object"||typeof g=="function")for(let f of i(g))!E.call(w,f)&&f!==u&&t(w,f,{get:()=>g[f],enumerable:!(_=r(g,f))||_.enumerable});return w},te=w=>V(t({},"__esModule",{value:!0}),w),P={};R(P,{Selectors:()=>C}),_p=te(P);var e=ms(),U=Ty();class C{constructor(g){this._selectorEngines=[],this._contextsForSelectors=new Set,this._platform=g}async register(g,u,_={}){if(this._selectorEngines.some(v=>v.name===g))throw new Error(`selectors.register: "${g}" selector engine has been already registered`);const f=await(0,e.evaluationScript)(this._platform,u,void 0,!1),d={..._,name:g,source:f};for(const v of this._contextsForSelectors)await v._channel.registerSelectorEngine({selectorEngine:d});this._selectorEngines.push(d)}setTestIdAttribute(g){this._testIdAttributeName=g,(0,U.setTestIdAttribute)(g);for(const u of this._contextsForSelectors)u._channel.setTestIdAttributeName({testIdAttributeName:g}).catch(()=>{})}_withSelectorOptions(g){return{...g,selectorEngines:this._selectorEngines,testIdAttributeName:this._testIdAttributeName}}}return _p}var bp,zv;function oC(){if(zv)return bp;zv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(v,a)=>{for(var s in a)t(v,s,{get:a[s],enumerable:!0})},V=(v,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of i(a))!E.call(v,o)&&o!==s&&t(v,o,{get:()=>a[o],enumerable:!(n=r(a,o))||n.enumerable});return v},te=v=>V(t({},"__esModule",{value:!0}),v),P={};R(P,{Playwright:()=>d}),bp=te(P);var e=Ny(),U=wf(),C=Ry(),w=Jr(),g=Ly(),u=Mn(),_=Wo(),f=aC();class d extends w.ChannelOwner{constructor(a,s,n,o){var h;super(a,s,n,o),this.request=new _.APIRequest(this),this.chromium=C.BrowserType.from(o.chromium),this.chromium._playwright=this,this.firefox=C.BrowserType.from(o.firefox),this.firefox._playwright=this,this.webkit=C.BrowserType.from(o.webkit),this.webkit._playwright=this,this._android=e.Android.from(o.android),this._android._playwright=this,this._electron=g.Electron.from(o.electron),this._electron._playwright=this,this._bidiChromium=C.BrowserType.from(o._bidiChromium),this._bidiChromium._playwright=this,this._bidiFirefox=C.BrowserType.from(o._bidiFirefox),this._bidiFirefox._playwright=this,this.devices=((h=this._connection.localUtils())==null?void 0:h.devices)??{},this.selectors=new f.Selectors(this._connection._platform),this.errors={TimeoutError:u.TimeoutError}}static from(a){return a._object}_browserTypes(){return[this.chromium,this.firefox,this.webkit,this._bidiChromium,this._bidiFirefox]}_preLaunchedBrowser(){const a=U.Browser.from(this._initializer.preLaunchedBrowser);return a._connectToBrowserType(this[a._name],{},void 0),a}_allContexts(){return this._browserTypes().flatMap(a=>[...a._contexts])}_allPages(){return this._allContexts().flatMap(a=>a.pages())}}return bp}var vp,Vv;function Dy(){if(Vv)return vp;Vv=1;var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,R=(S,j)=>{for(var y in j)t(S,y,{get:j[y],enumerable:!0})},V=(S,j,y,I)=>{if(j&&typeof j=="object"||typeof j=="function")for(let D of i(j))!E.call(S,D)&&D!==y&&t(S,D,{get:()=>j[D],enumerable:!(I=r(j,D))||I.enumerable});return S},te=S=>V(t({},"__esModule",{value:!0}),S),P={};R(P,{Connection:()=>ge}),vp=te(P);var e=$o(),U=Ny(),C=ra(),w=wf(),g=_s(),u=Ry(),_=bf(),f=Jr(),d=nC(),v=Ay(),a=Ly(),s=Vo(),n=Mn(),o=Wo(),h=ia(),m=Xi(),c=iC(),l=sC(),x=na(),T=Ko(),b=oC(),p=Ey(),O=vf(),z=zo(),$=Cy(),q=Io(),J=pn();class le extends f.ChannelOwner{constructor(j){super(j,"Root","",{})}async initialize(){return b.Playwright.from((await this._channel.initialize({sdkLanguage:"javascript"})).playwright)}}class _e extends f.ChannelOwner{}class ge extends e.EventEmitter{constructor(j,y,I,D=[]){super(j),this._objects=new Map,this.onmessage=ie=>{},this._lastId=0,this._callbacks=new Map,this._isRemote=!1,this._rawBuffers=!1,this._tracingCount=0,this._instrumentation=I||(0,d.createInstrumentation)(),this._localUtils=y,this._rootObject=new le(this),this.headers=D}markAsRemote(){this._isRemote=!0}isRemote(){return this._isRemote}useRawBuffers(){this._rawBuffers=!0}rawBuffers(){return this._rawBuffers}localUtils(){return this._localUtils}async initializePlaywright(){return await this._rootObject.initialize()}getObjectWithKnownName(j){return this._objects.get(j)}setIsTracing(j){j?this._tracingCount++:this._tracingCount--}async sendMessageToServer(j,y,I,D){var Pe,Ne;if(this._closedError)throw this._closedError;if(j._wasCollected)throw new Error("The object has been collected to prevent unbounded heap growth.");const ie=j._guid,he=j._type,me=++this._lastId,ye={id:me,guid:ie,method:y,params:I};this._platform.isLogEnabled("channel")&&this._platform.log("channel","SEND> "+JSON.stringify(ye));const Se=(Pe=D.frames)!=null&&Pe[0]?{file:D.frames[0].file,line:D.frames[0].line,column:D.frames[0].column}:void 0,Oe={title:D.title,location:Se,internal:D.internal,stepId:D.stepId};return this._tracingCount&&D.frames&&he!=="LocalUtils"&&((Ne=this._localUtils)==null||Ne.addStackToTracingNoReply({callData:{stack:D.frames??[],id:me}}).catch(()=>{})),this._platform.zones.empty.run(()=>this.onmessage({...ye,metadata:Oe})),await new Promise((Le,qe)=>this._callbacks.set(me,{resolve:Le,reject:qe,title:D.title,type:he,method:y}))}_validatorFromWireContext(){return{tChannelImpl:this._tChannelImplFromWire.bind(this),binary:this._rawBuffers?"buffer":"fromBase64",isUnderTest:()=>this._platform.isUnderTest()}}dispatch(j){if(this._closedError)return;const{id:y,guid:I,method:D,params:ie,result:he,error:me,log:ye}=j;if(y){this._platform.isLogEnabled("channel")&&this._platform.log("channel","<RECV "+JSON.stringify(j));const Pe=this._callbacks.get(y);if(!Pe)throw new Error(`Cannot find command to respond: ${y}`);if(this._callbacks.delete(y),me&&!he){const Ne=(0,n.parseError)(me);(0,J.rewriteErrorMessage)(Ne,Ne.message+ne(this._platform,ye)),Pe.reject(Ne)}else{const Ne=(0,q.findValidator)(Pe.type,Pe.method,"Result");Pe.resolve(Ne(he,"",this._validatorFromWireContext()))}return}if(this._platform.isLogEnabled("channel")&&this._platform.log("channel","<EVENT "+JSON.stringify(j)),D==="__create__"){this._createRemoteObject(I,ie.type,ie.guid,ie.initializer);return}const Se=this._objects.get(I);if(!Se)throw new Error(`Cannot find object to "${D}": ${I}`);if(D==="__adopt__"){const Pe=this._objects.get(ie.guid);if(!Pe)throw new Error(`Unknown new child: ${ie.guid}`);Se._adopt(Pe);return}if(D==="__dispose__"){Se._dispose(ie.reason);return}const Oe=(0,q.findValidator)(Se._type,D,"Event");Se._channel.emit(D,Oe(ie,"",this._validatorFromWireContext()))}close(j){if(!this._closedError){this._closedError=new n.TargetClosedError(j);for(const y of this._callbacks.values())y.reject(this._closedError);this._callbacks.clear(),this.emit("close")}}_tChannelImplFromWire(j,y,I,D){if(y&&typeof y=="object"&&typeof y.guid=="string"){const ie=this._objects.get(y.guid);if(!ie)throw new Error(`Object with guid ${y.guid} was not bound in the connection`);if(j!=="*"&&!j.includes(ie._type))throw new q.ValidationError(`${I}: expected channel ${j.toString()}`);return ie._channel}throw new q.ValidationError(`${I}: expected channel ${j.toString()}`)}_createRemoteObject(j,y,I,D){const ie=this._objects.get(j);if(!ie)throw new Error(`Cannot find parent object ${j} to create ${I}`);let he;switch(D=(0,q.findValidator)(y,"","Initializer")(D,"",this._validatorFromWireContext()),y){case"Android":he=new U.Android(ie,y,I,D);break;case"AndroidSocket":he=new U.AndroidSocket(ie,y,I,D);break;case"AndroidDevice":he=new U.AndroidDevice(ie,y,I,D);break;case"APIRequestContext":he=new o.APIRequestContext(ie,y,I,D);break;case"Artifact":he=new C.Artifact(ie,y,I,D);break;case"BindingCall":he=new T.BindingCall(ie,y,I,D);break;case"Browser":he=new w.Browser(ie,y,I,D);break;case"BrowserContext":he=new g.BrowserContext(ie,y,I,D);break;case"BrowserType":he=new u.BrowserType(ie,y,I,D);break;case"CDPSession":he=new _.CDPSession(ie,y,I,D);break;case"Dialog":he=new v.Dialog(ie,y,I,D);break;case"Electron":he=new a.Electron(ie,y,I,D);break;case"ElectronApplication":he=new a.ElectronApplication(ie,y,I,D);break;case"ElementHandle":he=new s.ElementHandle(ie,y,I,D);break;case"Frame":he=new h.Frame(ie,y,I,D);break;case"JSHandle":he=new m.JSHandle(ie,y,I,D);break;case"JsonPipe":he=new c.JsonPipe(ie,y,I,D);break;case"LocalUtils":he=new l.LocalUtils(ie,y,I,D),this._localUtils||(this._localUtils=he);break;case"Page":he=new T.Page(ie,y,I,D);break;case"Playwright":he=new b.Playwright(ie,y,I,D);break;case"Request":he=new x.Request(ie,y,I,D);break;case"Response":he=new x.Response(ie,y,I,D);break;case"Route":he=new x.Route(ie,y,I,D);break;case"Stream":he=new p.Stream(ie,y,I,D);break;case"SocksSupport":he=new _e(ie,y,I,D);break;case"Tracing":he=new O.Tracing(ie,y,I,D);break;case"WebSocket":he=new x.WebSocket(ie,y,I,D);break;case"WebSocketRoute":he=new x.WebSocketRoute(ie,y,I,D);break;case"Worker":he=new z.Worker(ie,y,I,D);break;case"WritableStream":he=new $.WritableStream(ie,y,I,D);break;default:throw new Error("Missing type "+y)}return he}}function ne(S,j){return!j||!j.some(y=>!!y)?"":`
Call log:
${S.colors.dim(j.join(`
`))}
`}return vp}var wp,Kv;function cC(){if(Kv)return wp;Kv=1;var t={},r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V=(f,d)=>{for(var v in d)r(f,v,{get:d[v],enumerable:!0})},te=(f,d,v,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of E(d))!R.call(f,s)&&s!==v&&r(f,s,{get:()=>d[s],enumerable:!(a=i(d,s))||a.enumerable});return f},P=f=>te(r({},"__esModule",{value:!0}),f),e={};V(e,{createInProcessPlaywright:()=>_}),wp=P(e);var U=zT(),C=VT(),w=qo(),g=Qw(),u=Dy();function _(){const f=(0,w.createPlaywright)({sdkLanguage:t.PW_LANG_NAME||"javascript"}),d=new u.Connection(g.nodePlatform);d.useRawBuffers();const v=new w.DispatcherConnection(!0);v.onmessage=n=>d.dispatch(n),d.onmessage=n=>v.dispatch(n);const a=new w.RootDispatcher(v);new w.PlaywrightDispatcher(a,f);const s=d.getObjectWithKnownName("Playwright");return s.chromium._serverLauncher=new C.BrowserServerLauncherImpl("chromium"),s.firefox._serverLauncher=new C.BrowserServerLauncherImpl("firefox"),s.webkit._serverLauncher=new C.BrowserServerLauncherImpl("webkit"),s._android._serverLauncher=new U.AndroidServerLauncherImpl,s._bidiChromium._serverLauncher=new C.BrowserServerLauncherImpl("_bidiChromium"),s._bidiFirefox._serverLauncher=new C.BrowserServerLauncherImpl("_bidiFirefox"),v.onmessage=n=>setImmediate(()=>d.dispatch(n)),d.onmessage=n=>setImmediate(()=>v.dispatch(n)),d.toImpl=n=>n?v._dispatcherByGuid.get(n._guid)._object:v._dispatcherByGuid.get(""),s._toImpl=d.toImpl,s}return wp}var yp,Gv;function lC(){if(Gv)return yp;Gv=1;var t=cC();return yp=(0,t.createInProcessPlaywright)(),yp}var Sp,Jv;function uC(){if(Jv)return Sp;Jv=1;const t=18,r=process.versions.node,i=r.split("."),[E]=[+i[0]];return E<t&&(console.error("You are running Node.js "+r+`.
Playwright requires Node.js ${t} or higher. 
Please update your version of Node.js.`),process.exit(1)),Sp=lC(),Sp}var dC=uC();const fi=Mw(dC),hC=fi.chromium;fi.firefox;fi.webkit;fi.selectors;fi.devices;fi.errors;fi.request;fi._electron;fi._android;var dr;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(dr||(dr={}));function yf(t){return t.type===dr.Tag||t.type===dr.Script||t.type===dr.Style}const Go=dr.Root,Sf=dr.Text,My=dr.Directive,xf=dr.Comment,Fy=dr.Script,By=dr.Style,fo=dr.Tag,jy=dr.CDATA,Hy=dr.Doctype;let Uy=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(r){this.parent=r}get previousSibling(){return this.prev}set previousSibling(r){this.prev=r}get nextSibling(){return this.next}set nextSibling(r){this.next=r}cloneNode(r=!1){return Hs(this,r)}},Ef=class extends Uy{constructor(r){super(),this.data=r}get nodeValue(){return this.data}set nodeValue(r){this.data=r}},mo=class extends Ef{constructor(){super(...arguments),this.type=dr.Text}get nodeType(){return 3}},qy=class extends Ef{constructor(){super(...arguments),this.type=dr.Comment}get nodeType(){return 8}},$y=class extends Ef{constructor(r,i){super(i),this.name=r,this.type=dr.Directive}get nodeType(){return 1}},Of=class extends Uy{constructor(r){super(),this.children=r}get firstChild(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(r){this.children=r}},Wy=class extends Of{constructor(){super(...arguments),this.type=dr.CDATA}get nodeType(){return 4}},js=class extends Of{constructor(){super(...arguments),this.type=dr.Root}get nodeType(){return 9}},zy=class extends Of{constructor(r,i,E=[],R=r==="script"?dr.Script:r==="style"?dr.Style:dr.Tag){super(E),this.name=r,this.attribs=i,this.type=R}get nodeType(){return 1}get tagName(){return this.name}set tagName(r){this.name=r}get attributes(){return Object.keys(this.attribs).map(r=>{var i,E;return{name:r,value:this.attribs[r],namespace:(i=this["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(E=this["x-attribsPrefix"])===null||E===void 0?void 0:E[r]}})}};function Or(t){return yf(t)}function Vy(t){return t.type===dr.CDATA}function Tf(t){return t.type===dr.Text}function Ky(t){return t.type===dr.Comment}function pC(t){return t.type===dr.Directive}function Zi(t){return t.type===dr.Root}function _n(t){return Object.prototype.hasOwnProperty.call(t,"children")}function Hs(t,r=!1){let i;if(Tf(t))i=new mo(t.data);else if(Ky(t))i=new qy(t.data);else if(Or(t)){const E=r?xp(t.children):[],R=new zy(t.name,{...t.attribs},E);E.forEach(V=>V.parent=R),t.namespace!=null&&(R.namespace=t.namespace),t["x-attribsNamespace"]&&(R["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(R["x-attribsPrefix"]={...t["x-attribsPrefix"]}),i=R}else if(Vy(t)){const E=r?xp(t.children):[],R=new Wy(E);E.forEach(V=>V.parent=R),i=R}else if(Zi(t)){const E=r?xp(t.children):[],R=new js(E);E.forEach(V=>V.parent=R),t["x-mode"]&&(R["x-mode"]=t["x-mode"]),i=R}else if(pC(t)){const E=new $y(t.name,t.data);t["x-name"]!=null&&(E["x-name"]=t["x-name"],E["x-publicId"]=t["x-publicId"],E["x-systemId"]=t["x-systemId"]),i=E}else throw new Error(`Not implemented yet: ${t.type}`);return i.startIndex=t.startIndex,i.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(i.sourceCodeLocation=t.sourceCodeLocation),i}function xp(t){const r=t.map(i=>Hs(i,!0));for(let i=1;i<r.length;i++)r[i].prev=r[i-1],r[i-1].next=r[i];return r}const Yv={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class fC{constructor(r,i,E){this.dom=[],this.root=new js(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof i=="function"&&(E=i,i=Yv),typeof r=="object"&&(i=r,r=void 0),this.callback=r??null,this.options=i??Yv,this.elementCB=E??null}onparserinit(r){this.parser=r}onreset(){this.dom=[],this.root=new js(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(r){this.handleCallback(r)}onclosetag(){this.lastNode=null;const r=this.tagStack.pop();this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(r)}onopentag(r,i){const E=this.options.xmlMode?dr.Tag:void 0,R=new zy(r,i,void 0,E);this.addNode(R),this.tagStack.push(R)}ontext(r){const{lastNode:i}=this;if(i&&i.type===dr.Text)i.data+=r,this.options.withEndIndices&&(i.endIndex=this.parser.endIndex);else{const E=new mo(r);this.addNode(E),this.lastNode=E}}oncomment(r){if(this.lastNode&&this.lastNode.type===dr.Comment){this.lastNode.data+=r;return}const i=new qy(r);this.addNode(i),this.lastNode=i}oncommentend(){this.lastNode=null}oncdatastart(){const r=new mo(""),i=new Wy([r]);this.addNode(i),r.parent=i,this.lastNode=r}oncdataend(){this.lastNode=null}onprocessinginstruction(r,i){const E=new $y(r,i);this.addNode(E)}handleCallback(r){if(typeof this.callback=="function")this.callback(r,this.dom);else if(r)throw r}addNode(r){const i=this.tagStack[this.tagStack.length-1],E=i.children[i.children.length-1];this.options.withStartIndices&&(r.startIndex=this.parser.startIndex),this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),i.children.push(r),E&&(r.prev=E,E.next=r),r.parent=i,this.lastNode=null}}const Xv=/["&'<>$\x80-\uFFFF]/g,mC=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),gC=String.prototype.codePointAt!=null?(t,r)=>t.codePointAt(r):(t,r)=>(t.charCodeAt(r)&64512)===55296?(t.charCodeAt(r)-55296)*1024+t.charCodeAt(r+1)-56320+65536:t.charCodeAt(r);function Gy(t){let r="",i=0,E;for(;(E=Xv.exec(t))!==null;){const R=E.index,V=t.charCodeAt(R),te=mC.get(V);te!==void 0?(r+=t.substring(i,R)+te,i=R+1):(r+=`${t.substring(i,R)}&#x${gC(t,R).toString(16)};`,i=Xv.lastIndex+=+((V&64512)===55296))}return r+t.substr(i)}function Jy(t,r){return function(E){let R,V=0,te="";for(;R=t.exec(E);)V!==R.index&&(te+=E.substring(V,R.index)),te+=r.get(R[0].charCodeAt(0)),V=R.index+1;return te+E.substring(V)}}const _C=Jy(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),bC=Jy(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),vC=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),wC=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),yC=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function SC(t){return t.replace(/"/g,"&quot;")}function xC(t,r){var i;if(!t)return;const E=((i=r.encodeEntities)!==null&&i!==void 0?i:r.decodeEntities)===!1?SC:r.xmlMode||r.encodeEntities!=="utf8"?Gy:_C;return Object.keys(t).map(R=>{var V,te;const P=(V=t[R])!==null&&V!==void 0?V:"";return r.xmlMode==="foreign"&&(R=(te=wC.get(R))!==null&&te!==void 0?te:R),!r.emptyAttrs&&!r.xmlMode&&P===""?R:`${R}="${E(P)}"`}).join(" ")}const Qv=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Cf(t,r={}){const i="length"in t?t:[t];let E="";for(let R=0;R<i.length;R++)E+=EC(i[R],r);return E}function EC(t,r){switch(t.type){case Go:return Cf(t.children,r);case Hy:case My:return PC(t);case xf:return IC(t);case jy:return AC(t);case Fy:case By:case fo:return CC(t,r);case Sf:return kC(t,r)}}const OC=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),TC=new Set(["svg","math"]);function CC(t,r){var i;r.xmlMode==="foreign"&&(t.name=(i=vC.get(t.name))!==null&&i!==void 0?i:t.name,t.parent&&OC.has(t.parent.name)&&(r={...r,xmlMode:!1})),!r.xmlMode&&TC.has(t.name)&&(r={...r,xmlMode:"foreign"});let E=`<${t.name}`;const R=xC(t.attribs,r);return R&&(E+=` ${R}`),t.children.length===0&&(r.xmlMode?r.selfClosingTags!==!1:r.selfClosingTags&&Qv.has(t.name))?(r.xmlMode||(E+=" "),E+="/>"):(E+=">",t.children.length>0&&(E+=Cf(t.children,r)),(r.xmlMode||!Qv.has(t.name))&&(E+=`</${t.name}>`)),E}function PC(t){return`<${t.data}>`}function kC(t,r){var i;let E=t.data||"";return((i=r.encodeEntities)!==null&&i!==void 0?i:r.decodeEntities)!==!1&&!(!r.xmlMode&&t.parent&&yC.has(t.parent.name))&&(E=r.xmlMode||r.encodeEntities!=="utf8"?Gy(E):bC(E)),E}function AC(t){return`<![CDATA[${t.children[0].data}]]>`}function IC(t){return`<!--${t.data}-->`}function go(t){return Array.isArray(t)?t.map(go).join(""):_n(t)&&!Ky(t)?go(t.children):Tf(t)?t.data:""}function Bp(t){return Array.isArray(t)?t.map(Bp).join(""):_n(t)&&(t.type===dr.Tag||Vy(t))?Bp(t.children):Tf(t)?t.data:""}function Yy(t){return _n(t)?t.children:[]}function NC(t){return t.parent||null}function RC(t){const r=NC(t);if(r!=null)return Yy(r);const i=[t];let{prev:E,next:R}=t;for(;E!=null;)i.unshift(E),{prev:E}=E;for(;R!=null;)i.push(R),{next:R}=R;return i}function Xy(t){let{next:r}=t;for(;r!==null&&!Or(r);)({next:r}=r);return r}function Qy(t){let{prev:r}=t;for(;r!==null&&!Or(r);)({prev:r}=r);return r}function Zy(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){const r=t.parent.children,i=r.lastIndexOf(t);i>=0&&r.splice(i,1)}t.next=null,t.prev=null,t.parent=null}var qn;(function(t){t[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY"})(qn||(qn={}));function LC(t,r){const i=[],E=[];if(t===r)return 0;let R=_n(t)?t:t.parent;for(;R;)i.unshift(R),R=R.parent;for(R=_n(r)?r:r.parent;R;)E.unshift(R),R=R.parent;const V=Math.min(i.length,E.length);let te=0;for(;te<V&&i[te]===E[te];)te++;if(te===0)return qn.DISCONNECTED;const P=i[te-1],e=P.children,U=i[te],C=E[te];return e.indexOf(U)>e.indexOf(C)?P===r?qn.FOLLOWING|qn.CONTAINED_BY:qn.FOLLOWING:P===t?qn.PRECEDING|qn.CONTAINS:qn.PRECEDING}function Jo(t){return t=t.filter((r,i,E)=>!E.includes(r,i+1)),t.sort((r,i)=>{const E=LC(r,i);return E&qn.PRECEDING?-1:E&qn.FOLLOWING?1:0}),t}const DC={_useHtmlParser2:!1};function jp(t,r){if(!t)return r??DC;const i={_useHtmlParser2:!!t.xmlMode,...r,...t};return t.xml?(i._useHtmlParser2=!0,i.xmlMode=!0,t.xml!==!0&&Object.assign(i,t.xml)):t.xmlMode&&(i._useHtmlParser2=!0),i}function e1(t,r,i){return t?t(r??t._root.children,null,void 0,i).toString():""}function MC(t,r){return typeof t=="object"&&t!=null&&!("length"in t)&&!("type"in t)}function FC(t,r){const i=MC(t)?(r=t,void 0):t,E={...this===null||this===void 0?void 0:this._options,...jp(r)};return e1(this,i,E)}function BC(t){const r={...this._options,xmlMode:!0};return e1(this,t,r)}function Us(t){const r=t??(this?this.root():[]);let i="";for(let E=0;E<r.length;E++)i+=go(r[E]);return i}function jC(t,r,i=typeof r=="boolean"?r:!1){if(!t||typeof t!="string")return null;typeof r=="boolean"&&(i=r);const E=this.load(t,this._options,!1);return i||E("script").remove(),[...E.root()[0].children]}function HC(){return this(this._root)}function t1(t,r){if(r===t)return!1;let i=r;for(;i&&i!==i.parent;)if(i=i.parent,i===t)return!0;return!1}function UC(t){return this.root().extract(t)}function qC(t,r){if(!Zv(t)||!Zv(r))return;let i=t.length;const E=+r.length;for(let R=0;R<E;R++)t[i++]=r[R];return t.length=i,t}function Zv(t){if(Array.isArray(t))return!0;if(typeof t!="object"||t===null||!("length"in t)||typeof t.length!="number"||t.length<0)return!1;for(let r=0;r<t.length;r++)if(!(r in t))return!1;return!0}const $C=Object.freeze(Object.defineProperty({__proto__:null,contains:t1,extract:UC,html:FC,merge:qC,parseHTML:jC,root:HC,text:Us,xml:BC},Symbol.toStringTag,{value:"Module"}));function li(t){return t.cheerio!=null}function WC(t){return t.replace(/[._-](\w|$)/g,(r,i)=>i.toUpperCase())}function zC(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function Br(t,r){const i=t.length;for(let E=0;E<i;E++)r(t[E],E);return t}var Ui;(function(t){t[t.LowerA=97]="LowerA",t[t.LowerZ=122]="LowerZ",t[t.UpperA=65]="UpperA",t[t.UpperZ=90]="UpperZ",t[t.Exclamation=33]="Exclamation"})(Ui||(Ui={}));function Hp(t){const r=t.indexOf("<");if(r===-1||r>t.length-3)return!1;const i=t.charCodeAt(r+1);return(i>=Ui.LowerA&&i<=Ui.LowerZ||i>=Ui.UpperA&&i<=Ui.UpperZ||i===Ui.Exclamation)&&t.includes(">",r+2)}const VC=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),KC=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(t=>t.charCodeAt(0)));var Ep;const GC=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ew=(Ep=String.fromCodePoint)!==null&&Ep!==void 0?Ep:function(t){let r="";return t>65535&&(t-=65536,r+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),r+=String.fromCharCode(t),r};function JC(t){var r;return t>=55296&&t<=57343||t>1114111?65533:(r=GC.get(t))!==null&&r!==void 0?r:t}var cn;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(cn||(cn={}));const YC=32;var wi;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(wi||(wi={}));function Up(t){return t>=cn.ZERO&&t<=cn.NINE}function XC(t){return t>=cn.UPPER_A&&t<=cn.UPPER_F||t>=cn.LOWER_A&&t<=cn.LOWER_F}function QC(t){return t>=cn.UPPER_A&&t<=cn.UPPER_Z||t>=cn.LOWER_A&&t<=cn.LOWER_Z||Up(t)}function ZC(t){return t===cn.EQUALS||QC(t)}var an;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(an||(an={}));var Gn;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Gn||(Gn={}));let eP=class{constructor(r,i,E){this.decodeTree=r,this.emitCodePoint=i,this.errors=E,this.state=an.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Gn.Strict}startEntity(r){this.decodeMode=r,this.state=an.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(r,i){switch(this.state){case an.EntityStart:return r.charCodeAt(i)===cn.NUM?(this.state=an.NumericStart,this.consumed+=1,this.stateNumericStart(r,i+1)):(this.state=an.NamedEntity,this.stateNamedEntity(r,i));case an.NumericStart:return this.stateNumericStart(r,i);case an.NumericDecimal:return this.stateNumericDecimal(r,i);case an.NumericHex:return this.stateNumericHex(r,i);case an.NamedEntity:return this.stateNamedEntity(r,i)}}stateNumericStart(r,i){return i>=r.length?-1:(r.charCodeAt(i)|YC)===cn.LOWER_X?(this.state=an.NumericHex,this.consumed+=1,this.stateNumericHex(r,i+1)):(this.state=an.NumericDecimal,this.stateNumericDecimal(r,i))}addToNumericResult(r,i,E,R){if(i!==E){const V=E-i;this.result=this.result*Math.pow(R,V)+Number.parseInt(r.substr(i,V),R),this.consumed+=V}}stateNumericHex(r,i){const E=i;for(;i<r.length;){const R=r.charCodeAt(i);if(Up(R)||XC(R))i+=1;else return this.addToNumericResult(r,E,i,16),this.emitNumericEntity(R,3)}return this.addToNumericResult(r,E,i,16),-1}stateNumericDecimal(r,i){const E=i;for(;i<r.length;){const R=r.charCodeAt(i);if(Up(R))i+=1;else return this.addToNumericResult(r,E,i,10),this.emitNumericEntity(R,2)}return this.addToNumericResult(r,E,i,10),-1}emitNumericEntity(r,i){var E;if(this.consumed<=i)return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(r===cn.SEMI)this.consumed+=1;else if(this.decodeMode===Gn.Strict)return 0;return this.emitCodePoint(JC(this.result),this.consumed),this.errors&&(r!==cn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(r,i){const{decodeTree:E}=this;let R=E[this.treeIndex],V=(R&wi.VALUE_LENGTH)>>14;for(;i<r.length;i++,this.excess++){const te=r.charCodeAt(i);if(this.treeIndex=tP(E,R,this.treeIndex+Math.max(1,V),te),this.treeIndex<0)return this.result===0||this.decodeMode===Gn.Attribute&&(V===0||ZC(te))?0:this.emitNotTerminatedNamedEntity();if(R=E[this.treeIndex],V=(R&wi.VALUE_LENGTH)>>14,V!==0){if(te===cn.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==Gn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var r;const{result:i,decodeTree:E}=this,R=(E[i]&wi.VALUE_LENGTH)>>14;return this.emitNamedEntityData(i,R,this.consumed),(r=this.errors)===null||r===void 0||r.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(r,i,E){const{decodeTree:R}=this;return this.emitCodePoint(i===1?R[r]&~wi.VALUE_LENGTH:R[r+1],E),i===3&&this.emitCodePoint(R[r+2],E),E}end(){var r;switch(this.state){case an.NamedEntity:return this.result!==0&&(this.decodeMode!==Gn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case an.NumericDecimal:return this.emitNumericEntity(0,2);case an.NumericHex:return this.emitNumericEntity(0,3);case an.NumericStart:return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case an.EntityStart:return 0}}};function tP(t,r,i,E){const R=(r&wi.BRANCH_LENGTH)>>7,V=r&wi.JUMP_TABLE;if(R===0)return V!==0&&E===V?i:-1;if(V){const e=E-V;return e<0||e>=R?-1:t[i+e]-1}let te=i,P=te+R-1;for(;te<=P;){const e=te+P>>>1,U=t[e];if(U<E)te=e+1;else if(U>E)P=e-1;else return t[e+R]}return-1}var lr;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(lr||(lr={}));var At;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.BeforeSpecialT=23]="BeforeSpecialT",t[t.SpecialStartSequence=24]="SpecialStartSequence",t[t.InSpecialTag=25]="InSpecialTag",t[t.InEntity=26]="InEntity"})(At||(At={}));function ai(t){return t===lr.Space||t===lr.NewLine||t===lr.Tab||t===lr.FormFeed||t===lr.CarriageReturn}function io(t){return t===lr.Slash||t===lr.Gt||ai(t)}function rP(t){return t>=lr.LowerA&&t<=lr.LowerZ||t>=lr.UpperA&&t<=lr.UpperZ}var Jn;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(Jn||(Jn={}));const Xr={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};let nP=class{constructor({xmlMode:r=!1,decodeEntities:i=!0},E){this.cbs=E,this.state=At.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=At.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=r,this.decodeEntities=i,this.entityDecoder=new eP(r?KC:VC,(R,V)=>this.emitCodePoint(R,V))}reset(){this.state=At.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=At.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(r){this.offset+=this.buffer.length,this.buffer=r,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(r){r===lr.Lt||!this.decodeEntities&&this.fastForwardTo(lr.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=At.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&r===lr.Amp&&this.startEntity()}stateSpecialStartSequence(r){const i=this.sequenceIndex===this.currentSequence.length;if(!(i?io(r):(r|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!i){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=At.InTagName,this.stateInTagName(r)}stateInSpecialTag(r){if(this.sequenceIndex===this.currentSequence.length){if(r===lr.Gt||ai(r)){const i=this.index-this.currentSequence.length;if(this.sectionStart<i){const E=this.index;this.index=i,this.cbs.ontext(this.sectionStart,i),this.index=E}this.isSpecial=!1,this.sectionStart=i+2,this.stateInClosingTagName(r);return}this.sequenceIndex=0}(r|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Xr.TitleEnd?this.decodeEntities&&r===lr.Amp&&this.startEntity():this.fastForwardTo(lr.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(r===lr.Lt)}stateCDATASequence(r){r===Xr.Cdata[this.sequenceIndex]?++this.sequenceIndex===Xr.Cdata.length&&(this.state=At.InCommentLike,this.currentSequence=Xr.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=At.InDeclaration,this.stateInDeclaration(r))}fastForwardTo(r){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===r)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(r){r===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Xr.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=At.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):r!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(r){return this.xmlMode?!io(r):rP(r)}startSpecial(r,i){this.isSpecial=!0,this.currentSequence=r,this.sequenceIndex=i,this.state=At.SpecialStartSequence}stateBeforeTagName(r){if(r===lr.ExclamationMark)this.state=At.BeforeDeclaration,this.sectionStart=this.index+1;else if(r===lr.Questionmark)this.state=At.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(r)){const i=r|32;this.sectionStart=this.index,this.xmlMode?this.state=At.InTagName:i===Xr.ScriptEnd[2]?this.state=At.BeforeSpecialS:i===Xr.TitleEnd[2]||i===Xr.XmpEnd[2]?this.state=At.BeforeSpecialT:this.state=At.InTagName}else r===lr.Slash?this.state=At.BeforeClosingTagName:(this.state=At.Text,this.stateText(r))}stateInTagName(r){io(r)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=At.BeforeAttributeName,this.stateBeforeAttributeName(r))}stateBeforeClosingTagName(r){ai(r)||(r===lr.Gt?this.state=At.Text:(this.state=this.isTagStartChar(r)?At.InClosingTagName:At.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(r){(r===lr.Gt||ai(r))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=At.AfterClosingTagName,this.stateAfterClosingTagName(r))}stateAfterClosingTagName(r){(r===lr.Gt||this.fastForwardTo(lr.Gt))&&(this.state=At.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(r){r===lr.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=At.InSpecialTag,this.sequenceIndex=0):this.state=At.Text,this.sectionStart=this.index+1):r===lr.Slash?this.state=At.InSelfClosingTag:ai(r)||(this.state=At.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(r){r===lr.Gt?(this.cbs.onselfclosingtag(this.index),this.state=At.Text,this.sectionStart=this.index+1,this.isSpecial=!1):ai(r)||(this.state=At.BeforeAttributeName,this.stateBeforeAttributeName(r))}stateInAttributeName(r){(r===lr.Eq||io(r))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=At.AfterAttributeName,this.stateAfterAttributeName(r))}stateAfterAttributeName(r){r===lr.Eq?this.state=At.BeforeAttributeValue:r===lr.Slash||r===lr.Gt?(this.cbs.onattribend(Jn.NoValue,this.sectionStart),this.sectionStart=-1,this.state=At.BeforeAttributeName,this.stateBeforeAttributeName(r)):ai(r)||(this.cbs.onattribend(Jn.NoValue,this.sectionStart),this.state=At.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(r){r===lr.DoubleQuote?(this.state=At.InAttributeValueDq,this.sectionStart=this.index+1):r===lr.SingleQuote?(this.state=At.InAttributeValueSq,this.sectionStart=this.index+1):ai(r)||(this.sectionStart=this.index,this.state=At.InAttributeValueNq,this.stateInAttributeValueNoQuotes(r))}handleInAttributeValue(r,i){r===i||!this.decodeEntities&&this.fastForwardTo(i)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i===lr.DoubleQuote?Jn.Double:Jn.Single,this.index+1),this.state=At.BeforeAttributeName):this.decodeEntities&&r===lr.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(r){this.handleInAttributeValue(r,lr.DoubleQuote)}stateInAttributeValueSingleQuotes(r){this.handleInAttributeValue(r,lr.SingleQuote)}stateInAttributeValueNoQuotes(r){ai(r)||r===lr.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Jn.Unquoted,this.index),this.state=At.BeforeAttributeName,this.stateBeforeAttributeName(r)):this.decodeEntities&&r===lr.Amp&&this.startEntity()}stateBeforeDeclaration(r){r===lr.OpeningSquareBracket?(this.state=At.CDATASequence,this.sequenceIndex=0):this.state=r===lr.Dash?At.BeforeComment:At.InDeclaration}stateInDeclaration(r){(r===lr.Gt||this.fastForwardTo(lr.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=At.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(r){(r===lr.Gt||this.fastForwardTo(lr.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=At.Text,this.sectionStart=this.index+1)}stateBeforeComment(r){r===lr.Dash?(this.state=At.InCommentLike,this.currentSequence=Xr.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=At.InDeclaration}stateInSpecialComment(r){(r===lr.Gt||this.fastForwardTo(lr.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=At.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(r){const i=r|32;i===Xr.ScriptEnd[3]?this.startSpecial(Xr.ScriptEnd,4):i===Xr.StyleEnd[3]?this.startSpecial(Xr.StyleEnd,4):(this.state=At.InTagName,this.stateInTagName(r))}stateBeforeSpecialT(r){switch(r|32){case Xr.TitleEnd[3]:{this.startSpecial(Xr.TitleEnd,4);break}case Xr.TextareaEnd[3]:{this.startSpecial(Xr.TextareaEnd,4);break}case Xr.XmpEnd[3]:{this.startSpecial(Xr.XmpEnd,4);break}default:this.state=At.InTagName,this.stateInTagName(r)}}startEntity(){this.baseState=this.state,this.state=At.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?Gn.Strict:this.baseState===At.Text||this.baseState===At.InSpecialTag?Gn.Legacy:Gn.Attribute)}stateInEntity(){const r=this.entityDecoder.write(this.buffer,this.index-this.offset);r>=0?(this.state=this.baseState,r===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===At.Text||this.state===At.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===At.InAttributeValueDq||this.state===At.InAttributeValueSq||this.state===At.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const r=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case At.Text:{this.stateText(r);break}case At.SpecialStartSequence:{this.stateSpecialStartSequence(r);break}case At.InSpecialTag:{this.stateInSpecialTag(r);break}case At.CDATASequence:{this.stateCDATASequence(r);break}case At.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(r);break}case At.InAttributeName:{this.stateInAttributeName(r);break}case At.InCommentLike:{this.stateInCommentLike(r);break}case At.InSpecialComment:{this.stateInSpecialComment(r);break}case At.BeforeAttributeName:{this.stateBeforeAttributeName(r);break}case At.InTagName:{this.stateInTagName(r);break}case At.InClosingTagName:{this.stateInClosingTagName(r);break}case At.BeforeTagName:{this.stateBeforeTagName(r);break}case At.AfterAttributeName:{this.stateAfterAttributeName(r);break}case At.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(r);break}case At.BeforeAttributeValue:{this.stateBeforeAttributeValue(r);break}case At.BeforeClosingTagName:{this.stateBeforeClosingTagName(r);break}case At.AfterClosingTagName:{this.stateAfterClosingTagName(r);break}case At.BeforeSpecialS:{this.stateBeforeSpecialS(r);break}case At.BeforeSpecialT:{this.stateBeforeSpecialT(r);break}case At.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(r);break}case At.InSelfClosingTag:{this.stateInSelfClosingTag(r);break}case At.InDeclaration:{this.stateInDeclaration(r);break}case At.BeforeDeclaration:{this.stateBeforeDeclaration(r);break}case At.BeforeComment:{this.stateBeforeComment(r);break}case At.InProcessingInstruction:{this.stateInProcessingInstruction(r);break}case At.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===At.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const r=this.buffer.length+this.offset;this.sectionStart>=r||(this.state===At.InCommentLike?this.currentSequence===Xr.CdataEnd?this.cbs.oncdata(this.sectionStart,r,0):this.cbs.oncomment(this.sectionStart,r,0):this.state===At.InTagName||this.state===At.BeforeAttributeName||this.state===At.BeforeAttributeValue||this.state===At.AfterAttributeName||this.state===At.InAttributeName||this.state===At.InAttributeValueSq||this.state===At.InAttributeValueDq||this.state===At.InAttributeValueNq||this.state===At.InClosingTagName||this.cbs.ontext(this.sectionStart,r))}emitCodePoint(r,i){this.baseState!==At.Text&&this.baseState!==At.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+i,this.index=this.sectionStart-1,this.cbs.onattribentity(r)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+i,this.index=this.sectionStart-1,this.cbs.ontextentity(r,this.sectionStart))}};const as=new Set(["input","option","optgroup","select","button","datalist","textarea"]),kr=new Set(["p"]),tw=new Set(["thead","tbody"]),rw=new Set(["dd","dt"]),nw=new Set(["rt","rp"]),iP=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",kr],["h1",kr],["h2",kr],["h3",kr],["h4",kr],["h5",kr],["h6",kr],["select",as],["input",as],["output",as],["button",as],["datalist",as],["textarea",as],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",rw],["dt",rw],["address",kr],["article",kr],["aside",kr],["blockquote",kr],["details",kr],["div",kr],["dl",kr],["fieldset",kr],["figcaption",kr],["figure",kr],["footer",kr],["form",kr],["header",kr],["hr",kr],["main",kr],["nav",kr],["ol",kr],["pre",kr],["section",kr],["table",kr],["ul",kr],["rt",nw],["rp",nw],["tbody",tw],["tfoot",tw]]),sP=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),iw=new Set(["math","svg"]),sw=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),aP=/\s|\//;let oP=class{constructor(r,i={}){var E,R,V,te,P,e;this.options=i,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=r??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(E=i.lowerCaseTags)!==null&&E!==void 0?E:this.htmlMode,this.lowerCaseAttributeNames=(R=i.lowerCaseAttributeNames)!==null&&R!==void 0?R:this.htmlMode,this.recognizeSelfClosing=(V=i.recognizeSelfClosing)!==null&&V!==void 0?V:!this.htmlMode,this.tokenizer=new((te=i.Tokenizer)!==null&&te!==void 0?te:nP)(this.options,this),this.foreignContext=[!this.htmlMode],(e=(P=this.cbs).onparserinit)===null||e===void 0||e.call(P,this)}ontext(r,i){var E,R;const V=this.getSlice(r,i);this.endIndex=i-1,(R=(E=this.cbs).ontext)===null||R===void 0||R.call(E,V),this.startIndex=i}ontextentity(r,i){var E,R;this.endIndex=i-1,(R=(E=this.cbs).ontext)===null||R===void 0||R.call(E,ew(r)),this.startIndex=i}isVoidElement(r){return this.htmlMode&&sP.has(r)}onopentagname(r,i){this.endIndex=i;let E=this.getSlice(r,i);this.lowerCaseTagNames&&(E=E.toLowerCase()),this.emitOpenTag(E)}emitOpenTag(r){var i,E,R,V;this.openTagStart=this.startIndex,this.tagname=r;const te=this.htmlMode&&iP.get(r);if(te)for(;this.stack.length>0&&te.has(this.stack[0]);){const P=this.stack.shift();(E=(i=this.cbs).onclosetag)===null||E===void 0||E.call(i,P,!0)}this.isVoidElement(r)||(this.stack.unshift(r),this.htmlMode&&(iw.has(r)?this.foreignContext.unshift(!0):sw.has(r)&&this.foreignContext.unshift(!1))),(V=(R=this.cbs).onopentagname)===null||V===void 0||V.call(R,r),this.cbs.onopentag&&(this.attribs={})}endOpenTag(r){var i,E;this.startIndex=this.openTagStart,this.attribs&&((E=(i=this.cbs).onopentag)===null||E===void 0||E.call(i,this.tagname,this.attribs,r),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(r){this.endIndex=r,this.endOpenTag(!1),this.startIndex=r+1}onclosetag(r,i){var E,R,V,te,P,e,U,C;this.endIndex=i;let w=this.getSlice(r,i);if(this.lowerCaseTagNames&&(w=w.toLowerCase()),this.htmlMode&&(iw.has(w)||sw.has(w))&&this.foreignContext.shift(),this.isVoidElement(w))this.htmlMode&&w==="br"&&((te=(V=this.cbs).onopentagname)===null||te===void 0||te.call(V,"br"),(e=(P=this.cbs).onopentag)===null||e===void 0||e.call(P,"br",{},!0),(C=(U=this.cbs).onclosetag)===null||C===void 0||C.call(U,"br",!1));else{const g=this.stack.indexOf(w);if(g!==-1)for(let u=0;u<=g;u++){const _=this.stack.shift();(R=(E=this.cbs).onclosetag)===null||R===void 0||R.call(E,_,u!==g)}else this.htmlMode&&w==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=i+1}onselfclosingtag(r){this.endIndex=r,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=r+1):this.onopentagend(r)}closeCurrentTag(r){var i,E;const R=this.tagname;this.endOpenTag(r),this.stack[0]===R&&((E=(i=this.cbs).onclosetag)===null||E===void 0||E.call(i,R,!r),this.stack.shift())}onattribname(r,i){this.startIndex=r;const E=this.getSlice(r,i);this.attribname=this.lowerCaseAttributeNames?E.toLowerCase():E}onattribdata(r,i){this.attribvalue+=this.getSlice(r,i)}onattribentity(r){this.attribvalue+=ew(r)}onattribend(r,i){var E,R;this.endIndex=i,(R=(E=this.cbs).onattribute)===null||R===void 0||R.call(E,this.attribname,this.attribvalue,r===Jn.Double?'"':r===Jn.Single?"'":r===Jn.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(r){const i=r.search(aP);let E=i<0?r:r.substr(0,i);return this.lowerCaseTagNames&&(E=E.toLowerCase()),E}ondeclaration(r,i){this.endIndex=i;const E=this.getSlice(r,i);if(this.cbs.onprocessinginstruction){const R=this.getInstructionName(E);this.cbs.onprocessinginstruction(`!${R}`,`!${E}`)}this.startIndex=i+1}onprocessinginstruction(r,i){this.endIndex=i;const E=this.getSlice(r,i);if(this.cbs.onprocessinginstruction){const R=this.getInstructionName(E);this.cbs.onprocessinginstruction(`?${R}`,`?${E}`)}this.startIndex=i+1}oncomment(r,i,E){var R,V,te,P;this.endIndex=i,(V=(R=this.cbs).oncomment)===null||V===void 0||V.call(R,this.getSlice(r,i-E)),(P=(te=this.cbs).oncommentend)===null||P===void 0||P.call(te),this.startIndex=i+1}oncdata(r,i,E){var R,V,te,P,e,U,C,w,g,u;this.endIndex=i;const _=this.getSlice(r,i-E);!this.htmlMode||this.options.recognizeCDATA?((V=(R=this.cbs).oncdatastart)===null||V===void 0||V.call(R),(P=(te=this.cbs).ontext)===null||P===void 0||P.call(te,_),(U=(e=this.cbs).oncdataend)===null||U===void 0||U.call(e)):((w=(C=this.cbs).oncomment)===null||w===void 0||w.call(C,`[CDATA[${_}]]`),(u=(g=this.cbs).oncommentend)===null||u===void 0||u.call(g)),this.startIndex=i+1}onend(){var r,i;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let E=0;E<this.stack.length;E++)this.cbs.onclosetag(this.stack[E],!0)}(i=(r=this.cbs).onend)===null||i===void 0||i.call(r)}reset(){var r,i,E,R;(i=(r=this.cbs).onreset)===null||i===void 0||i.call(r),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(R=(E=this.cbs).onparserinit)===null||R===void 0||R.call(E,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(r){this.reset(),this.end(r)}getSlice(r,i){for(;r-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let E=this.buffers[0].slice(r-this.bufferOffset,i-this.bufferOffset);for(;i-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),E+=this.buffers[0].slice(0,i-this.bufferOffset);return E}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(r){var i,E;if(this.ended){(E=(i=this.cbs).onerror)===null||E===void 0||E.call(i,new Error(".write() after done!"));return}this.buffers.push(r),this.tokenizer.running&&(this.tokenizer.write(r),this.writeIndex++)}end(r){var i,E;if(this.ended){(E=(i=this.cbs).onerror)===null||E===void 0||E.call(i,new Error(".end() after done!"));return}r&&this.write(r),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(r){this.write(r)}done(r){this.end(r)}};function cP(t,r){const i=new fC(void 0,r);return new oP(i,r).end(t),i.root}var Op;const qs=(Op=Object.hasOwn)!==null&&Op!==void 0?Op:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),$s=/\s+/,qp="data-",Pf=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,lP=/^{[^]*}$|^\[[^]*]$/;function _o(t,r,i){var E;if(!(!t||!Or(t))){if((E=t.attribs)!==null&&E!==void 0||(t.attribs={}),!r)return t.attribs;if(qs(t.attribs,r))return!i&&Pf.test(r)?r:t.attribs[r];if(t.name==="option"&&r==="value")return Us(t.children);if(t.name==="input"&&(t.attribs.type==="radio"||t.attribs.type==="checkbox")&&r==="value")return"on"}}function os(t,r,i){i===null?n1(t,r):t.attribs[r]=`${i}`}function uP(t,r){if(typeof t=="object"||r!==void 0){if(typeof r=="function"){if(typeof t!="string")throw new Error("Bad combination of arguments.");return Br(this,(i,E)=>{Or(i)&&os(i,t,r.call(i,E,i.attribs[t]))})}return Br(this,i=>{if(Or(i))if(typeof t=="object")for(const E of Object.keys(t)){const R=t[E];os(i,E,R)}else os(i,t,r)})}return arguments.length>1?this:_o(this[0],t,this.options.xmlMode)}function aw(t,r,i){return r in t?t[r]:!i&&Pf.test(r)?_o(t,r,!1)!==void 0:_o(t,r,i)}function Tp(t,r,i,E){r in t?t[r]=i:os(t,r,!E&&Pf.test(r)?i?"":null:`${i}`)}function dP(t,r){var i;if(typeof t=="string"&&r===void 0){const E=this[0];if(!E)return;switch(t){case"style":{const R=this.css(),V=Object.keys(R);for(let te=0;te<V.length;te++)R[te]=V[te];return R.length=V.length,R}case"tagName":case"nodeName":return Or(E)?E.name.toUpperCase():void 0;case"href":case"src":{if(!Or(E))return;const R=(i=E.attribs)===null||i===void 0?void 0:i[t];return typeof URL<"u"&&(t==="href"&&(E.tagName==="a"||E.tagName==="link")||t==="src"&&(E.tagName==="img"||E.tagName==="iframe"||E.tagName==="audio"||E.tagName==="video"||E.tagName==="source"))&&R!==void 0&&this.options.baseURI?new URL(R,this.options.baseURI).href:R}case"innerText":return Bp(E);case"textContent":return go(E);case"outerHTML":return E.type===Go?this.html():this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return Or(E)?aw(E,t,this.options.xmlMode):void 0}}if(typeof t=="object"||r!==void 0){if(typeof r=="function"){if(typeof t=="object")throw new TypeError("Bad combination of arguments.");return Br(this,(E,R)=>{Or(E)&&Tp(E,t,r.call(E,R,aw(E,t,this.options.xmlMode)),this.options.xmlMode)})}return Br(this,E=>{if(Or(E))if(typeof t=="object")for(const R of Object.keys(t)){const V=t[R];Tp(E,R,V,this.options.xmlMode)}else Tp(E,t,r,this.options.xmlMode)})}}function ow(t,r,i){var E;(E=t.data)!==null&&E!==void 0||(t.data={}),typeof r=="object"?Object.assign(t.data,r):typeof r=="string"&&i!==void 0&&(t.data[r]=i)}function hP(t){for(const r of Object.keys(t.attribs)){if(!r.startsWith(qp))continue;const i=WC(r.slice(qp.length));qs(t.data,i)||(t.data[i]=r1(t.attribs[r]))}return t.data}function pP(t,r){const i=qp+zC(r),E=t.data;if(qs(E,r))return E[r];if(qs(t.attribs,i))return E[r]=r1(t.attribs[i])}function r1(t){if(t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;const r=Number(t);if(t===String(r))return r;if(lP.test(t))try{return JSON.parse(t)}catch{}return t}function fP(t,r){var i;const E=this[0];if(!E||!Or(E))return;const R=E;return(i=R.data)!==null&&i!==void 0||(R.data={}),t==null?hP(R):typeof t=="object"||r!==void 0?(Br(this,V=>{Or(V)&&(typeof t=="object"?ow(V,t):ow(V,t,r))}),this):pP(R,t)}function mP(t){const r=arguments.length===0,i=this[0];if(!i||!Or(i))return r?void 0:this;switch(i.name){case"textarea":return this.text(t);case"select":{const E=this.find("option:selected");if(!r){if(this.attr("multiple")==null&&typeof t=="object")return this;this.find("option").removeAttr("selected");const R=typeof t=="object"?t:[t];for(const V of R)this.find(`option[value="${V}"]`).attr("selected","");return this}return this.attr("multiple")?E.toArray().map(R=>Us(R.children)):E.attr("value")}case"input":case"option":return r?this.attr("value"):this.attr("value",t)}}function n1(t,r){!t.attribs||!qs(t.attribs,r)||delete t.attribs[r]}function bo(t){return t?t.trim().split($s):[]}function gP(t){const r=bo(t);for(const i of r)Br(this,E=>{Or(E)&&n1(E,i)});return this}function _P(t){return this.toArray().some(r=>{const i=Or(r)&&r.attribs.class;let E=-1;if(i&&t.length>0)for(;(E=i.indexOf(t,E+1))>-1;){const R=E+t.length;if((E===0||$s.test(i[E-1]))&&(R===i.length||$s.test(i[R])))return!0}return!1})}function i1(t){if(typeof t=="function")return Br(this,(E,R)=>{if(Or(E)){const V=E.attribs.class||"";i1.call([E],t.call(E,R,V))}});if(!t||typeof t!="string")return this;const r=t.split($s),i=this.length;for(let E=0;E<i;E++){const R=this[E];if(!Or(R))continue;const V=_o(R,"class",!1);if(V){let te=` ${V} `;for(const P of r){const e=`${P} `;te.includes(` ${e}`)||(te+=e)}os(R,"class",te.trim())}else os(R,"class",r.join(" ").trim())}return this}function s1(t){if(typeof t=="function")return Br(this,(R,V)=>{Or(R)&&s1.call([R],t.call(R,V,R.attribs.class||""))});const r=bo(t),i=r.length,E=arguments.length===0;return Br(this,R=>{if(Or(R))if(E)R.attribs.class="";else{const V=bo(R.attribs.class);let te=!1;for(let P=0;P<i;P++){const e=V.indexOf(r[P]);e!==-1&&(V.splice(e,1),te=!0,P--)}te&&(R.attribs.class=V.join(" "))}})}function a1(t,r){if(typeof t=="function")return Br(this,(te,P)=>{Or(te)&&a1.call([te],t.call(te,P,te.attribs.class||"",r),r)});if(!t||typeof t!="string")return this;const i=t.split($s),E=i.length,R=typeof r=="boolean"?r?1:-1:0,V=this.length;for(let te=0;te<V;te++){const P=this[te];if(!Or(P))continue;const e=bo(P.attribs.class);for(let U=0;U<E;U++){const C=e.indexOf(i[U]);R>=0&&C===-1?e.push(i[U]):R<=0&&C!==-1&&e.splice(C,1)}P.attribs.class=e.join(" ")}return this}const bP=Object.freeze(Object.defineProperty({__proto__:null,addClass:i1,attr:uP,data:fP,hasClass:_P,prop:dP,removeAttr:gP,removeClass:s1,toggleClass:a1,val:mP},Symbol.toStringTag,{value:"Module"}));var cr;(function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"})(cr||(cr={}));var en;(function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"})(en||(en={}));const cw=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,vP=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,wP=new Map([[126,en.Element],[94,en.Start],[36,en.End],[42,en.Any],[33,en.Not],[124,en.Hyphen]]),yP=new Set(["has","not","matches","is","where","host","host-context"]);function Rs(t){switch(t.type){case cr.Adjacent:case cr.Child:case cr.Descendant:case cr.Parent:case cr.Sibling:case cr.ColumnCombinator:return!0;default:return!1}}const SP=new Set(["contains","icontains"]);function xP(t,r,i){const E=parseInt(r,16)-65536;return E!==E||i?r:E<0?String.fromCharCode(E+65536):String.fromCharCode(E>>10|55296,E&1023|56320)}function Ps(t){return t.replace(vP,xP)}function Cp(t){return t===39||t===34}function lw(t){return t===32||t===9||t===10||t===12||t===13}function Yo(t){const r=[],i=o1(r,`${t}`,0);if(i<t.length)throw new Error(`Unmatched selector: ${t.slice(i)}`);return r}function o1(t,r,i){let E=[];function R(g){const u=r.slice(i+g).match(cw);if(!u)throw new Error(`Expected name, found ${r.slice(i)}`);const[_]=u;return i+=g+_.length,Ps(_)}function V(g){for(i+=g;i<r.length&&lw(r.charCodeAt(i));)i++}function te(){i+=1;const g=i;let u=1;for(;u>0&&i<r.length;i++)r.charCodeAt(i)===40&&!P(i)?u++:r.charCodeAt(i)===41&&!P(i)&&u--;if(u)throw new Error("Parenthesis not matched");return Ps(r.slice(g,i-1))}function P(g){let u=0;for(;r.charCodeAt(--g)===92;)u++;return(u&1)===1}function e(){if(E.length>0&&Rs(E[E.length-1]))throw new Error("Did not expect successive traversals.")}function U(g){if(E.length>0&&E[E.length-1].type===cr.Descendant){E[E.length-1].type=g;return}e(),E.push({type:g})}function C(g,u){E.push({type:cr.Attribute,name:g,action:u,value:R(1),namespace:null,ignoreCase:"quirks"})}function w(){if(E.length&&E[E.length-1].type===cr.Descendant&&E.pop(),E.length===0)throw new Error("Empty sub-selector");t.push(E)}if(V(0),r.length===i)return i;e:for(;i<r.length;){const g=r.charCodeAt(i);switch(g){case 32:case 9:case 10:case 12:case 13:{(E.length===0||E[0].type!==cr.Descendant)&&(e(),E.push({type:cr.Descendant})),V(1);break}case 62:{U(cr.Child),V(1);break}case 60:{U(cr.Parent),V(1);break}case 126:{U(cr.Sibling),V(1);break}case 43:{U(cr.Adjacent),V(1);break}case 46:{C("class",en.Element);break}case 35:{C("id",en.Equals);break}case 91:{V(1);let u,_=null;r.charCodeAt(i)===124?u=R(1):r.startsWith("*|",i)?(_="*",u=R(2)):(u=R(0),r.charCodeAt(i)===124&&r.charCodeAt(i+1)!==61&&(_=u,u=R(1))),V(0);let f=en.Exists;const d=wP.get(r.charCodeAt(i));if(d){if(f=d,r.charCodeAt(i+1)!==61)throw new Error("Expected `=`");V(2)}else r.charCodeAt(i)===61&&(f=en.Equals,V(1));let v="",a=null;if(f!=="exists"){if(Cp(r.charCodeAt(i))){const o=r.charCodeAt(i);let h=i+1;for(;h<r.length&&(r.charCodeAt(h)!==o||P(h));)h+=1;if(r.charCodeAt(h)!==o)throw new Error("Attribute value didn't end");v=Ps(r.slice(i+1,h)),i=h+1}else{const o=i;for(;i<r.length&&(!lw(r.charCodeAt(i))&&r.charCodeAt(i)!==93||P(i));)i+=1;v=Ps(r.slice(o,i))}V(0);const n=r.charCodeAt(i)|32;n===115?(a=!1,V(1)):n===105&&(a=!0,V(1))}if(r.charCodeAt(i)!==93)throw new Error("Attribute selector didn't terminate");i+=1;const s={type:cr.Attribute,name:u,action:f,value:v,namespace:_,ignoreCase:a};E.push(s);break}case 58:{if(r.charCodeAt(i+1)===58){E.push({type:cr.PseudoElement,name:R(2).toLowerCase(),data:r.charCodeAt(i)===40?te():null});continue}const u=R(1).toLowerCase();let _=null;if(r.charCodeAt(i)===40)if(yP.has(u)){if(Cp(r.charCodeAt(i+1)))throw new Error(`Pseudo-selector ${u} cannot be quoted`);if(_=[],i=o1(_,r,i+1),r.charCodeAt(i)!==41)throw new Error(`Missing closing parenthesis in :${u} (${r})`);i+=1}else{if(_=te(),SP.has(u)){const f=_.charCodeAt(0);f===_.charCodeAt(_.length-1)&&Cp(f)&&(_=_.slice(1,-1))}_=Ps(_)}E.push({type:cr.Pseudo,name:u,data:_});break}case 44:{w(),E=[],V(1);break}default:{if(r.startsWith("/*",i)){const f=r.indexOf("*/",i+2);if(f<0)throw new Error("Comment was not terminated");i=f+2,E.length===0&&V(0);break}let u=null,_;if(g===42)i+=1,_="*";else if(g===124){if(_="",r.charCodeAt(i+1)===124){U(cr.ColumnCombinator),V(2);break}}else if(cw.test(r.slice(i)))_=R(0);else break e;r.charCodeAt(i)===124&&r.charCodeAt(i+1)!==124&&(u=_,r.charCodeAt(i+1)===42?(_="*",i+=2):_=R(1)),E.push(_==="*"?{type:cr.Universal,namespace:u}:{type:cr.Tag,name:_,namespace:u})}}}return w(),i}function dn(t){return yf(t)}function kf(t){return t.type===dr.CDATA}function cs(t){return t.type===dr.Text}function c1(t){return t.type===dr.Comment}function EP(t){return t.type===dr.Root}function $n(t){return Object.prototype.hasOwnProperty.call(t,"children")}const uw=/["&'<>$\x80-\uFFFF]/g,OP=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),TP=String.prototype.codePointAt!=null?(t,r)=>t.codePointAt(r):(t,r)=>(t.charCodeAt(r)&64512)===55296?(t.charCodeAt(r)-55296)*1024+t.charCodeAt(r+1)-56320+65536:t.charCodeAt(r);function l1(t){let r="",i=0,E;for(;(E=uw.exec(t))!==null;){const R=E.index,V=t.charCodeAt(R),te=OP.get(V);te!==void 0?(r+=t.substring(i,R)+te,i=R+1):(r+=`${t.substring(i,R)}&#x${TP(t,R).toString(16)};`,i=uw.lastIndex+=+((V&64512)===55296))}return r+t.substr(i)}function u1(t,r){return function(E){let R,V=0,te="";for(;R=t.exec(E);)V!==R.index&&(te+=E.substring(V,R.index)),te+=r.get(R[0].charCodeAt(0)),V=R.index+1;return te+E.substring(V)}}const CP=u1(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),PP=u1(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),kP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),AP=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),IP=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function NP(t){return t.replace(/"/g,"&quot;")}function RP(t,r){var i;if(!t)return;const E=((i=r.encodeEntities)!==null&&i!==void 0?i:r.decodeEntities)===!1?NP:r.xmlMode||r.encodeEntities!=="utf8"?l1:CP;return Object.keys(t).map(R=>{var V,te;const P=(V=t[R])!==null&&V!==void 0?V:"";return r.xmlMode==="foreign"&&(R=(te=AP.get(R))!==null&&te!==void 0?te:R),!r.emptyAttrs&&!r.xmlMode&&P===""?R:`${R}="${E(P)}"`}).join(" ")}const dw=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Af(t,r={}){const i="length"in t?t:[t];let E="";for(let R=0;R<i.length;R++)E+=LP(i[R],r);return E}function LP(t,r){switch(t.type){case Go:return Af(t.children,r);case Hy:case My:return BP(t);case xf:return UP(t);case jy:return HP(t);case Fy:case By:case fo:return FP(t,r);case Sf:return jP(t,r)}}const DP=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),MP=new Set(["svg","math"]);function FP(t,r){var i;r.xmlMode==="foreign"&&(t.name=(i=kP.get(t.name))!==null&&i!==void 0?i:t.name,t.parent&&DP.has(t.parent.name)&&(r={...r,xmlMode:!1})),!r.xmlMode&&MP.has(t.name)&&(r={...r,xmlMode:"foreign"});let E=`<${t.name}`;const R=RP(t.attribs,r);return R&&(E+=` ${R}`),t.children.length===0&&(r.xmlMode?r.selfClosingTags!==!1:r.selfClosingTags&&dw.has(t.name))?(r.xmlMode||(E+=" "),E+="/>"):(E+=">",t.children.length>0&&(E+=Af(t.children,r)),(r.xmlMode||!dw.has(t.name))&&(E+=`</${t.name}>`)),E}function BP(t){return`<${t.data}>`}function jP(t,r){var i;let E=t.data||"";return((i=r.encodeEntities)!==null&&i!==void 0?i:r.decodeEntities)!==!1&&!(!r.xmlMode&&t.parent&&IP.has(t.parent.name))&&(E=r.xmlMode||r.encodeEntities!=="utf8"?l1(E):PP(E)),E}function HP(t){return`<![CDATA[${t.children[0].data}]]>`}function UP(t){return`<!--${t.data}-->`}function d1(t,r){return Af(t,r)}function qP(t,r){return $n(t)?t.children.map(i=>d1(i,r)).join(""):""}function lo(t){return Array.isArray(t)?t.map(lo).join(""):dn(t)?t.name==="br"?`
`:lo(t.children):kf(t)?lo(t.children):cs(t)?t.data:""}function vo(t){return Array.isArray(t)?t.map(vo).join(""):$n(t)&&!c1(t)?vo(t.children):cs(t)?t.data:""}function $p(t){return Array.isArray(t)?t.map($p).join(""):$n(t)&&(t.type===dr.Tag||kf(t))?$p(t.children):cs(t)?t.data:""}function If(t){return $n(t)?t.children:[]}function h1(t){return t.parent||null}function $P(t){const r=h1(t);if(r!=null)return If(r);const i=[t];let{prev:E,next:R}=t;for(;E!=null;)i.unshift(E),{prev:E}=E;for(;R!=null;)i.push(R),{next:R}=R;return i}function WP(t,r){var i;return(i=t.attribs)===null||i===void 0?void 0:i[r]}function zP(t,r){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,r)&&t.attribs[r]!=null}function VP(t){return t.name}function KP(t){let{next:r}=t;for(;r!==null&&!dn(r);)({next:r}=r);return r}function GP(t){let{prev:r}=t;for(;r!==null&&!dn(r);)({prev:r}=r);return r}function sa(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){const r=t.parent.children,i=r.lastIndexOf(t);i>=0&&r.splice(i,1)}t.next=null,t.prev=null,t.parent=null}function JP(t,r){const i=r.prev=t.prev;i&&(i.next=r);const E=r.next=t.next;E&&(E.prev=r);const R=r.parent=t.parent;if(R){const V=R.children;V[V.lastIndexOf(t)]=r,t.parent=null}}function YP(t,r){if(sa(r),r.next=null,r.parent=t,t.children.push(r)>1){const i=t.children[t.children.length-2];i.next=r,r.prev=i}else r.prev=null}function XP(t,r){sa(r);const{parent:i}=t,E=t.next;if(r.next=E,r.prev=t,t.next=r,r.parent=i,E){if(E.prev=r,i){const R=i.children;R.splice(R.lastIndexOf(E),0,r)}}else i&&i.children.push(r)}function QP(t,r){if(sa(r),r.parent=t,r.prev=null,t.children.unshift(r)!==1){const i=t.children[1];i.prev=r,r.next=i}else r.next=null}function ZP(t,r){sa(r);const{parent:i}=t;if(i){const E=i.children;E.splice(E.indexOf(t),0,r)}t.prev&&(t.prev.next=r),r.parent=i,r.prev=t.prev,r.next=t,t.prev=r}function aa(t,r,i=!0,E=1/0){return Nf(t,Array.isArray(r)?r:[r],i,E)}function Nf(t,r,i,E){const R=[],V=[Array.isArray(r)?r:[r]],te=[0];for(;;){if(te[0]>=V[0].length){if(te.length===1)return R;V.shift(),te.shift();continue}const P=V[0][te[0]++];if(t(P)&&(R.push(P),--E<=0))return R;i&&$n(P)&&P.children.length>0&&(te.unshift(0),V.unshift(P.children))}}function ek(t,r){return r.find(t)}function Rf(t,r,i=!0){const E=Array.isArray(r)?r:[r];for(let R=0;R<E.length;R++){const V=E[R];if(dn(V)&&t(V))return V;if(i&&$n(V)&&V.children.length>0){const te=Rf(t,V.children,!0);if(te)return te}}return null}function p1(t,r){return(Array.isArray(r)?r:[r]).some(i=>dn(i)&&t(i)||$n(i)&&p1(t,i.children))}function tk(t,r){const i=[],E=[Array.isArray(r)?r:[r]],R=[0];for(;;){if(R[0]>=E[0].length){if(E.length===1)return i;E.shift(),R.shift();continue}const V=E[0][R[0]++];dn(V)&&t(V)&&i.push(V),$n(V)&&V.children.length>0&&(R.unshift(0),E.unshift(V.children))}}const wo={tag_name(t){return typeof t=="function"?r=>dn(r)&&t(r.name):t==="*"?dn:r=>dn(r)&&r.name===t},tag_type(t){return typeof t=="function"?r=>t(r.type):r=>r.type===t},tag_contains(t){return typeof t=="function"?r=>cs(r)&&t(r.data):r=>cs(r)&&r.data===t}};function Lf(t,r){return typeof r=="function"?i=>dn(i)&&r(i.attribs[t]):i=>dn(i)&&i.attribs[t]===r}function rk(t,r){return i=>t(i)||r(i)}function f1(t){const r=Object.keys(t).map(i=>{const E=t[i];return Object.prototype.hasOwnProperty.call(wo,i)?wo[i](E):Lf(i,E)});return r.length===0?null:r.reduce(rk)}function nk(t,r){const i=f1(t);return i?i(r):!0}function ik(t,r,i,E=1/0){const R=f1(t);return R?aa(R,r,i,E):[]}function sk(t,r,i=!0){return Array.isArray(r)||(r=[r]),Rf(Lf("id",t),r,i)}function bs(t,r,i=!0,E=1/0){return aa(wo.tag_name(t),r,i,E)}function ak(t,r,i=!0,E=1/0){return aa(Lf("class",t),r,i,E)}function ok(t,r,i=!0,E=1/0){return aa(wo.tag_type(t),r,i,E)}function ck(t){let r=t.length;for(;--r>=0;){const i=t[r];if(r>0&&t.lastIndexOf(i,r-1)>=0){t.splice(r,1);continue}for(let E=i.parent;E;E=E.parent)if(t.includes(E)){t.splice(r,1);break}}return t}var Nn;(function(t){t[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY"})(Nn||(Nn={}));function m1(t,r){const i=[],E=[];if(t===r)return 0;let R=$n(t)?t:t.parent;for(;R;)i.unshift(R),R=R.parent;for(R=$n(r)?r:r.parent;R;)E.unshift(R),R=R.parent;const V=Math.min(i.length,E.length);let te=0;for(;te<V&&i[te]===E[te];)te++;if(te===0)return Nn.DISCONNECTED;const P=i[te-1],e=P.children,U=i[te],C=E[te];return e.indexOf(U)>e.indexOf(C)?P===r?Nn.FOLLOWING|Nn.CONTAINED_BY:Nn.FOLLOWING:P===t?Nn.PRECEDING|Nn.CONTAINS:Nn.PRECEDING}function g1(t){return t=t.filter((r,i,E)=>!E.includes(r,i+1)),t.sort((r,i)=>{const E=m1(r,i);return E&Nn.PRECEDING?-1:E&Nn.FOLLOWING?1:0}),t}function lk(t){const r=yo(fk,t);return r?r.name==="feed"?uk(r):dk(r):null}function uk(t){var r;const i=t.children,E={type:"atom",items:bs("entry",i).map(te=>{var P;const{children:e}=te,U={media:_1(e)};Sn(U,"id","id",e),Sn(U,"title","title",e);const C=(P=yo("link",e))===null||P===void 0?void 0:P.attribs.href;C&&(U.link=C);const w=yi("summary",e)||yi("content",e);w&&(U.description=w);const g=yi("updated",e);return g&&(U.pubDate=new Date(g)),U})};Sn(E,"id","id",i),Sn(E,"title","title",i);const R=(r=yo("link",i))===null||r===void 0?void 0:r.attribs.href;R&&(E.link=R),Sn(E,"description","subtitle",i);const V=yi("updated",i);return V&&(E.updated=new Date(V)),Sn(E,"author","email",i,!0),E}function dk(t){var r,i;const E=(i=(r=yo("channel",t.children))===null||r===void 0?void 0:r.children)!==null&&i!==void 0?i:[],R={type:t.name.substr(0,3),id:"",items:bs("item",t.children).map(te=>{const{children:P}=te,e={media:_1(P)};Sn(e,"id","guid",P),Sn(e,"title","title",P),Sn(e,"link","link",P),Sn(e,"description","description",P);const U=yi("pubDate",P)||yi("dc:date",P);return U&&(e.pubDate=new Date(U)),e})};Sn(R,"title","title",E),Sn(R,"link","link",E),Sn(R,"description","description",E);const V=yi("lastBuildDate",E);return V&&(R.updated=new Date(V)),Sn(R,"author","managingEditor",E,!0),R}const hk=["url","type","lang"],pk=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function _1(t){return bs("media:content",t).map(r=>{const{attribs:i}=r,E={medium:i.medium,isDefault:!!i.isDefault};for(const R of hk)i[R]&&(E[R]=i[R]);for(const R of pk)i[R]&&(E[R]=parseInt(i[R],10));return i.expression&&(E.expression=i.expression),E})}function yo(t,r){return bs(t,r,!0,1)[0]}function yi(t,r,i=!1){return vo(bs(t,r,i,1)).trim()}function Sn(t,r,i,E,R=!1){const V=yi(i,E,R);V&&(t[r]=V)}function fk(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}const Xo=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return Nn},append:XP,appendChild:YP,compareDocumentPosition:m1,existsOne:p1,filter:aa,find:Nf,findAll:tk,findOne:Rf,findOneChild:ek,getAttributeValue:WP,getChildren:If,getElementById:sk,getElements:ik,getElementsByClassName:ak,getElementsByTagName:bs,getElementsByTagType:ok,getFeed:lk,getInnerHTML:qP,getName:VP,getOuterHTML:d1,getParent:h1,getSiblings:$P,getText:lo,hasAttrib:zP,hasChildren:$n,innerText:$p,isCDATA:kf,isComment:c1,isDocument:EP,isTag:dn,isText:cs,nextElementSibling:KP,prepend:ZP,prependChild:QP,prevElementSibling:GP,removeElement:sa,removeSubsets:ck,replaceElement:JP,testElement:nk,textContent:vo,uniqueSort:g1},Symbol.toStringTag,{value:"Module"}));var Pp,hw;function mk(){return hw||(hw=1,Pp={trueFunc:function(){return!0},falseFunc:function(){return!1}}),Pp}var So=mk();const wr=Mw(So),b1=new Map([[cr.Universal,50],[cr.Tag,30],[cr.Attribute,1],[cr.Pseudo,0]]);function Df(t){return!b1.has(t.type)}const gk=new Map([[en.Exists,10],[en.Equals,8],[en.Not,7],[en.Start,6],[en.End,6],[en.Any,5]]);function _k(t){const r=t.map(v1);for(let i=1;i<t.length;i++){const E=r[i];if(!(E<0))for(let R=i-1;R>=0&&E<r[R];R--){const V=t[R+1];t[R+1]=t[R],t[R]=V,r[R+1]=r[R],r[R]=E}}}function v1(t){var r,i;let E=(r=b1.get(t.type))!==null&&r!==void 0?r:-1;return t.type===cr.Attribute?(E=(i=gk.get(t.action))!==null&&i!==void 0?i:4,t.action===en.Equals&&t.name==="id"&&(E=9),t.ignoreCase&&(E>>=1)):t.type===cr.Pseudo&&(t.data?t.name==="has"||t.name==="contains"?E=0:Array.isArray(t.data)?(E=Math.min(...t.data.map(R=>Math.min(...R.map(v1)))),E<0&&(E=0)):E=2:E=3),E}const bk=/[-[\]{}()*+?.,\\^$|#\s]/g;function pw(t){return t.replace(bk,"\\$&")}const vk=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function ji(t,r){return typeof t.ignoreCase=="boolean"?t.ignoreCase:t.ignoreCase==="quirks"?!!r.quirksMode:!r.xmlMode&&vk.has(t.name)}const wk={equals(t,r,i){const{adapter:E}=i,{name:R}=r;let{value:V}=r;return ji(r,i)?(V=V.toLowerCase(),te=>{const P=E.getAttributeValue(te,R);return P!=null&&P.length===V.length&&P.toLowerCase()===V&&t(te)}):te=>E.getAttributeValue(te,R)===V&&t(te)},hyphen(t,r,i){const{adapter:E}=i,{name:R}=r;let{value:V}=r;const te=V.length;return ji(r,i)?(V=V.toLowerCase(),function(e){const U=E.getAttributeValue(e,R);return U!=null&&(U.length===te||U.charAt(te)==="-")&&U.substr(0,te).toLowerCase()===V&&t(e)}):function(e){const U=E.getAttributeValue(e,R);return U!=null&&(U.length===te||U.charAt(te)==="-")&&U.substr(0,te)===V&&t(e)}},element(t,r,i){const{adapter:E}=i,{name:R,value:V}=r;if(/\s/.test(V))return wr.falseFunc;const te=new RegExp(`(?:^|\\s)${pw(V)}(?:$|\\s)`,ji(r,i)?"i":"");return function(e){const U=E.getAttributeValue(e,R);return U!=null&&U.length>=V.length&&te.test(U)&&t(e)}},exists(t,{name:r},{adapter:i}){return E=>i.hasAttrib(E,r)&&t(E)},start(t,r,i){const{adapter:E}=i,{name:R}=r;let{value:V}=r;const te=V.length;return te===0?wr.falseFunc:ji(r,i)?(V=V.toLowerCase(),P=>{const e=E.getAttributeValue(P,R);return e!=null&&e.length>=te&&e.substr(0,te).toLowerCase()===V&&t(P)}):P=>{var e;return!!(!((e=E.getAttributeValue(P,R))===null||e===void 0)&&e.startsWith(V))&&t(P)}},end(t,r,i){const{adapter:E}=i,{name:R}=r;let{value:V}=r;const te=-V.length;return te===0?wr.falseFunc:ji(r,i)?(V=V.toLowerCase(),P=>{var e;return((e=E.getAttributeValue(P,R))===null||e===void 0?void 0:e.substr(te).toLowerCase())===V&&t(P)}):P=>{var e;return!!(!((e=E.getAttributeValue(P,R))===null||e===void 0)&&e.endsWith(V))&&t(P)}},any(t,r,i){const{adapter:E}=i,{name:R,value:V}=r;if(V==="")return wr.falseFunc;if(ji(r,i)){const te=new RegExp(pw(V),"i");return function(e){const U=E.getAttributeValue(e,R);return U!=null&&U.length>=V.length&&te.test(U)&&t(e)}}return te=>{var P;return!!(!((P=E.getAttributeValue(te,R))===null||P===void 0)&&P.includes(V))&&t(te)}},not(t,r,i){const{adapter:E}=i,{name:R}=r;let{value:V}=r;return V===""?te=>!!E.getAttributeValue(te,R)&&t(te):ji(r,i)?(V=V.toLowerCase(),te=>{const P=E.getAttributeValue(te,R);return(P==null||P.length!==V.length||P.toLowerCase()!==V)&&t(te)}):te=>E.getAttributeValue(te,R)!==V&&t(te)}},yk=new Set([9,10,12,13,32]),fw=48,Sk=57;function xk(t){if(t=t.trim().toLowerCase(),t==="even")return[2,0];if(t==="odd")return[2,1];let r=0,i=0,E=V(),R=te();if(r<t.length&&t.charAt(r)==="n"&&(r++,i=E*(R??1),P(),r<t.length?(E=V(),P(),R=te()):E=R=0),R===null||r<t.length)throw new Error(`n-th rule couldn't be parsed ('${t}')`);return[i,E*R];function V(){return t.charAt(r)==="-"?(r++,-1):(t.charAt(r)==="+"&&r++,1)}function te(){const e=r;let U=0;for(;r<t.length&&t.charCodeAt(r)>=fw&&t.charCodeAt(r)<=Sk;)U=U*10+(t.charCodeAt(r)-fw),r++;return r===e?null:U}function P(){for(;r<t.length&&yk.has(t.charCodeAt(r));)r++}}function Ek(t){const r=t[0],i=t[1]-1;if(i<0&&r<=0)return wr.falseFunc;if(r===-1)return V=>V<=i;if(r===0)return V=>V===i;if(r===1)return i<0?wr.trueFunc:V=>V>=i;const E=Math.abs(r),R=(i%E+E)%E;return r>1?V=>V>=i&&V%E===R:V=>V<=i&&V%E===R}function so(t){return Ek(xk(t))}function ao(t,r){return i=>{const E=r.getParent(i);return E!=null&&r.isTag(E)&&t(i)}}const Wp={contains(t,r,{adapter:i}){return function(R){return t(R)&&i.getText(R).includes(r)}},icontains(t,r,{adapter:i}){const E=r.toLowerCase();return function(V){return t(V)&&i.getText(V).toLowerCase().includes(E)}},"nth-child"(t,r,{adapter:i,equals:E}){const R=so(r);return R===wr.falseFunc?wr.falseFunc:R===wr.trueFunc?ao(t,i):function(te){const P=i.getSiblings(te);let e=0;for(let U=0;U<P.length&&!E(te,P[U]);U++)i.isTag(P[U])&&e++;return R(e)&&t(te)}},"nth-last-child"(t,r,{adapter:i,equals:E}){const R=so(r);return R===wr.falseFunc?wr.falseFunc:R===wr.trueFunc?ao(t,i):function(te){const P=i.getSiblings(te);let e=0;for(let U=P.length-1;U>=0&&!E(te,P[U]);U--)i.isTag(P[U])&&e++;return R(e)&&t(te)}},"nth-of-type"(t,r,{adapter:i,equals:E}){const R=so(r);return R===wr.falseFunc?wr.falseFunc:R===wr.trueFunc?ao(t,i):function(te){const P=i.getSiblings(te);let e=0;for(let U=0;U<P.length;U++){const C=P[U];if(E(te,C))break;i.isTag(C)&&i.getName(C)===i.getName(te)&&e++}return R(e)&&t(te)}},"nth-last-of-type"(t,r,{adapter:i,equals:E}){const R=so(r);return R===wr.falseFunc?wr.falseFunc:R===wr.trueFunc?ao(t,i):function(te){const P=i.getSiblings(te);let e=0;for(let U=P.length-1;U>=0;U--){const C=P[U];if(E(te,C))break;i.isTag(C)&&i.getName(C)===i.getName(te)&&e++}return R(e)&&t(te)}},root(t,r,{adapter:i}){return E=>{const R=i.getParent(E);return(R==null||!i.isTag(R))&&t(E)}},scope(t,r,i,E){const{equals:R}=i;return!E||E.length===0?Wp.root(t,r,i):E.length===1?V=>R(E[0],V)&&t(V):V=>E.includes(V)&&t(V)},hover:kp("isHovered"),visited:kp("isVisited"),active:kp("isActive")};function kp(t){return function(i,E,{adapter:R}){const V=R[t];return typeof V!="function"?wr.falseFunc:function(P){return V(P)&&i(P)}}}const mw={empty(t,{adapter:r}){return!r.getChildren(t).some(i=>r.isTag(i)||r.getText(i)!=="")},"first-child"(t,{adapter:r,equals:i}){if(r.prevElementSibling)return r.prevElementSibling(t)==null;const E=r.getSiblings(t).find(R=>r.isTag(R));return E!=null&&i(t,E)},"last-child"(t,{adapter:r,equals:i}){const E=r.getSiblings(t);for(let R=E.length-1;R>=0;R--){if(i(t,E[R]))return!0;if(r.isTag(E[R]))break}return!1},"first-of-type"(t,{adapter:r,equals:i}){const E=r.getSiblings(t),R=r.getName(t);for(let V=0;V<E.length;V++){const te=E[V];if(i(t,te))return!0;if(r.isTag(te)&&r.getName(te)===R)break}return!1},"last-of-type"(t,{adapter:r,equals:i}){const E=r.getSiblings(t),R=r.getName(t);for(let V=E.length-1;V>=0;V--){const te=E[V];if(i(t,te))return!0;if(r.isTag(te)&&r.getName(te)===R)break}return!1},"only-of-type"(t,{adapter:r,equals:i}){const E=r.getName(t);return r.getSiblings(t).every(R=>i(t,R)||!r.isTag(R)||r.getName(R)!==E)},"only-child"(t,{adapter:r,equals:i}){return r.getSiblings(t).every(E=>i(t,E)||!r.isTag(E))}};function gw(t,r,i,E){if(i===null){if(t.length>E)throw new Error(`Pseudo-class :${r} requires an argument`)}else if(t.length===E)throw new Error(`Pseudo-class :${r} doesn't have any arguments`)}const Ok={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},w1={};function Tk(t,r){return t===wr.falseFunc?wr.falseFunc:i=>r.isTag(i)&&t(i)}function y1(t,r){const i=r.getSiblings(t);if(i.length<=1)return[];const E=i.indexOf(t);return E<0||E===i.length-1?[]:i.slice(E+1).filter(r.isTag)}function zp(t){return{xmlMode:!!t.xmlMode,lowerCaseAttributeNames:!!t.lowerCaseAttributeNames,lowerCaseTags:!!t.lowerCaseTags,quirksMode:!!t.quirksMode,cacheResults:!!t.cacheResults,pseudos:t.pseudos,adapter:t.adapter,equals:t.equals}}const Ap=(t,r,i,E,R)=>{const V=R(r,zp(i),E);return V===wr.trueFunc?t:V===wr.falseFunc?wr.falseFunc:te=>V(te)&&t(te)},Ip={is:Ap,matches:Ap,where:Ap,not(t,r,i,E,R){const V=R(r,zp(i),E);return V===wr.falseFunc?t:V===wr.trueFunc?wr.falseFunc:te=>!V(te)&&t(te)},has(t,r,i,E,R){const{adapter:V}=i,te=zp(i);te.relativeSelector=!0;const P=r.some(C=>C.some(Df))?[w1]:void 0,e=R(r,te,P);if(e===wr.falseFunc)return wr.falseFunc;const U=Tk(e,V);if(P&&e!==wr.trueFunc){const{shouldTestNextSiblings:C=!1}=e;return w=>{if(!t(w))return!1;P[0]=w;const g=V.getChildren(w),u=C?[...g,...y1(w,V)]:g;return V.existsOne(U,u)}}return C=>t(C)&&V.existsOne(U,V.getChildren(C))}};function Ck(t,r,i,E,R){var V;const{name:te,data:P}=r;if(Array.isArray(P)){if(!(te in Ip))throw new Error(`Unknown pseudo-class :${te}(${P})`);return Ip[te](t,P,i,E,R)}const e=(V=i.pseudos)===null||V===void 0?void 0:V[te],U=typeof e=="string"?e:Ok[te];if(typeof U=="string"){if(P!=null)throw new Error(`Pseudo ${te} doesn't have any arguments`);const C=Yo(U);return Ip.is(t,C,i,E,R)}if(typeof e=="function")return gw(e,te,P,1),C=>e(C,P)&&t(C);if(te in Wp)return Wp[te](t,P,i,E);if(te in mw){const C=mw[te];return gw(C,te,P,2),w=>C(w,i,P)&&t(w)}throw new Error(`Unknown pseudo-class :${te}`)}function Np(t,r){const i=r.getParent(t);return i&&r.isTag(i)?i:null}function Pk(t,r,i,E,R){const{adapter:V,equals:te}=i;switch(r.type){case cr.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case cr.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case cr.Attribute:{if(r.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!i.xmlMode||i.lowerCaseAttributeNames)&&(r.name=r.name.toLowerCase()),wk[r.action](t,r,i)}case cr.Pseudo:return Ck(t,r,i,E,R);case cr.Tag:{if(r.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:P}=r;return(!i.xmlMode||i.lowerCaseTags)&&(P=P.toLowerCase()),function(U){return V.getName(U)===P&&t(U)}}case cr.Descendant:{if(i.cacheResults===!1||typeof WeakSet>"u")return function(U){let C=U;for(;C=Np(C,V);)if(t(C))return!0;return!1};const P=new WeakSet;return function(U){let C=U;for(;C=Np(C,V);)if(!P.has(C)){if(V.isTag(C)&&t(C))return!0;P.add(C)}return!1}}case"_flexibleDescendant":return function(e){let U=e;do if(t(U))return!0;while(U=Np(U,V));return!1};case cr.Parent:return function(e){return V.getChildren(e).some(U=>V.isTag(U)&&t(U))};case cr.Child:return function(e){const U=V.getParent(e);return U!=null&&V.isTag(U)&&t(U)};case cr.Sibling:return function(e){const U=V.getSiblings(e);for(let C=0;C<U.length;C++){const w=U[C];if(te(e,w))break;if(V.isTag(w)&&t(w))return!0}return!1};case cr.Adjacent:return V.prevElementSibling?function(e){const U=V.prevElementSibling(e);return U!=null&&t(U)}:function(e){const U=V.getSiblings(e);let C;for(let w=0;w<U.length;w++){const g=U[w];if(te(e,g))break;V.isTag(g)&&(C=g)}return!!C&&t(C)};case cr.Universal:{if(r.namespace!=null&&r.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return t}}}function S1(t){return t.type===cr.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some(r=>r.some(S1)))}const kk={type:cr.Descendant},Ak={type:"_flexibleDescendant"},Ik={type:cr.Pseudo,name:"scope",data:null};function Nk(t,{adapter:r},i){const E=!!(i!=null&&i.every(R=>{const V=r.isTag(R)&&r.getParent(R);return R===w1||V&&r.isTag(V)}));for(const R of t){if(!(R.length>0&&Df(R[0])&&R[0].type!==cr.Descendant))if(E&&!R.some(S1))R.unshift(kk);else continue;R.unshift(Ik)}}function x1(t,r,i){var E;t.forEach(_k),i=(E=r.context)!==null&&E!==void 0?E:i;const R=Array.isArray(i),V=i&&(Array.isArray(i)?i:[i]);if(r.relativeSelector!==!1)Nk(t,r,V);else if(t.some(e=>e.length>0&&Df(e[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let te=!1;const P=t.map(e=>{if(e.length>=2){const[U,C]=e;U.type!==cr.Pseudo||U.name!=="scope"||(R&&C.type===cr.Descendant?e[1]=Ak:(C.type===cr.Adjacent||C.type===cr.Sibling)&&(te=!0))}return Rk(e,r,V)}).reduce(Lk,wr.falseFunc);return P.shouldTestNextSiblings=te,P}function Rk(t,r,i){var E;return t.reduce((R,V)=>R===wr.falseFunc?wr.falseFunc:Pk(R,V,r,i,x1),(E=r.rootFunc)!==null&&E!==void 0?E:wr.trueFunc)}function Lk(t,r){return r===wr.falseFunc||t===wr.trueFunc?t:t===wr.falseFunc||r===wr.trueFunc?r:function(E){return t(E)||r(E)}}const E1=(t,r)=>t===r,Dk={adapter:Xo,equals:E1};function Mk(t){var r,i,E,R;const V=t??Dk;return(r=V.adapter)!==null&&r!==void 0||(V.adapter=Xo),(i=V.equals)!==null&&i!==void 0||(V.equals=(R=(E=V.adapter)===null||E===void 0?void 0:E.equals)!==null&&R!==void 0?R:E1),V}function Fk(t){return function(i,E,R){const V=Mk(E);return t(i,V,R)}}const Mf=Fk(x1);function O1(t,r,i=!1){return i&&(t=Bk(t,r)),Array.isArray(t)?r.removeSubsets(t):r.getChildren(t)}function Bk(t,r){const i=Array.isArray(t)?t.slice(0):[t],E=i.length;for(let R=0;R<E;R++){const V=y1(i[R],r);i.push(...V)}return i}const jk=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function xo(t){return t.type!=="pseudo"?!1:jk.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(r=>r.some(xo)):!1}function Hk(t,r,i){const E=r!=null?parseInt(r,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(E)?E>=0?E+1:1/0:0;case"lt":return isFinite(E)?E>=0?Math.min(E,i):1/0:0;case"gt":return isFinite(E)?1/0:0;case"odd":return 2*i;case"even":return 2*i-1;case"last":case"not":return 1/0}}function Uk(t){for(;t.parent;)t=t.parent;return t}function Ff(t){const r=[],i=[];for(const E of t)E.some(xo)?r.push(E):i.push(E);return[i,r]}const qk={type:cr.Universal,namespace:null},$k={type:cr.Pseudo,name:"scope",data:null};function T1(t,r,i={}){return C1([t],r,i)}function C1(t,r,i={}){if(typeof r=="function")return t.some(r);const[E,R]=Ff(Yo(r));return E.length>0&&t.some(Mf(E,i))||R.some(V=>A1(V,t,i).length>0)}function Wk(t,r,i,E){const R=typeof i=="string"?parseInt(i,10):NaN;switch(t){case"first":case"lt":return r;case"last":return r.length>0?[r[r.length-1]]:r;case"nth":case"eq":return isFinite(R)&&Math.abs(R)<r.length?[R<0?r[r.length+R]:r[R]]:[];case"gt":return isFinite(R)?r.slice(R+1):[];case"even":return r.filter((V,te)=>te%2===0);case"odd":return r.filter((V,te)=>te%2===1);case"not":{const V=new Set(k1(i,r,E));return r.filter(te=>!V.has(te))}}}function P1(t,r,i={}){return k1(Yo(t),r,i)}function k1(t,r,i){if(r.length===0)return[];const[E,R]=Ff(t);let V;if(E.length){const te=Kp(r,E,i);if(R.length===0)return te;te.length&&(V=new Set(te))}for(let te=0;te<R.length&&(V==null?void 0:V.size)!==r.length;te++){const P=R[te];if((V?r.filter(C=>dn(C)&&!V.has(C)):r).length===0)break;const U=A1(P,r,i);if(U.length)if(V)U.forEach(C=>V.add(C));else{if(te===R.length-1)return U;V=new Set(U)}}return typeof V<"u"?V.size===r.length?r:r.filter(te=>V.has(te)):[]}function A1(t,r,i){var E;if(t.some(Rs)){const R=(E=i.root)!==null&&E!==void 0?E:Uk(r[0]),V={...i,context:r,relativeSelector:!1};return t.push($k),Eo(R,t,V,!0,r.length)}return Eo(r,t,i,!1,r.length)}function zk(t,r,i={},E=1/0){if(typeof t=="function")return I1(r,t);const[R,V]=Ff(Yo(t)),te=V.map(P=>Eo(r,P,i,!0,E));return R.length&&te.push(Vp(r,R,i,E)),te.length===0?[]:te.length===1?te[0]:g1(te.reduce((P,e)=>[...P,...e]))}function Eo(t,r,i,E,R){const V=r.findIndex(xo),te=r.slice(0,V),P=r[V],e=r.length-1===V?R:1/0,U=Hk(P.name,P.data,e);if(U===0)return[];const w=(te.length===0&&!Array.isArray(t)?If(t).filter(dn):te.length===0?(Array.isArray(t)?t:[t]).filter(dn):E||te.some(Rs)?Vp(t,[te],i,U):Kp(t,[te],i)).slice(0,U);let g=Wk(P.name,w,P.data,i);if(g.length===0||r.length===V+1)return g;const u=r.slice(V+1),_=u.some(Rs);if(_){if(Rs(u[0])){const{type:f}=u[0];(f===cr.Sibling||f===cr.Adjacent)&&(g=O1(g,Xo,!0)),u.unshift(qk)}i={...i,relativeSelector:!1,rootFunc:f=>g.includes(f)}}else i.rootFunc&&i.rootFunc!==So.trueFunc&&(i={...i,rootFunc:So.trueFunc});return u.some(xo)?Eo(g,u,i,!1,R):_?Vp(g,[u],i,R):Kp(g,[u],i)}function Vp(t,r,i,E){const R=Mf(r,i,t);return I1(t,R,E)}function I1(t,r,i=1/0){const E=O1(t,Xo,r.shouldTestNextSiblings);return Nf(R=>dn(R)&&r(R),E,!0,i)}function Kp(t,r,i){const E=(Array.isArray(t)?t:[t]).filter(dn);if(E.length===0)return E;const R=Mf(r,i);return R===So.trueFunc?E:E.filter(R)}const Vk=/^\s*[+~]/;function Kk(t){if(!t)return this._make([]);if(typeof t!="string"){const r=li(t)?t.toArray():[t],i=this.toArray();return this._make(r.filter(E=>i.some(R=>t1(R,E))))}return this._findBySelector(t,Number.POSITIVE_INFINITY)}function Gk(t,r){var i;const E=this.toArray(),R=Vk.test(t)?E:this.children().toArray(),V={context:E,root:(i=this._root)===null||i===void 0?void 0:i[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(zk(t,R,V,r))}function Bf(t){return function(r,...i){return function(E){var R;let V=t(r,this);return E&&(V=Uf(V,E,this.options.xmlMode,(R=this._root)===null||R===void 0?void 0:R[0])),this._make(this.length>1&&V.length>1?i.reduce((te,P)=>P(te),V):V)}}}const oa=Bf((t,r)=>{let i=[];for(let E=0;E<r.length;E++){const R=t(r[E]);R.length>0&&(i=i.concat(R))}return i}),jf=Bf((t,r)=>{const i=[];for(let E=0;E<r.length;E++){const R=t(r[E]);R!==null&&i.push(R)}return i});function Hf(t,...r){let i=null;const E=Bf((R,V)=>{const te=[];return Br(V,P=>{for(let e;(e=R(P))&&!(i!=null&&i(e,te.length));P=e)te.push(e)}),te})(t,...r);return function(R,V){i=typeof R=="string"?P=>T1(P,R,this.options):R?ca(R):null;const te=E.call(this,V);return i=null,te}}function vs(t){return t.length>1?Array.from(new Set(t)):t}const Jk=jf(({parent:t})=>t&&!Zi(t)?t:null,vs),Yk=oa(t=>{const r=[];for(;t.parent&&!Zi(t.parent);)r.push(t.parent),t=t.parent;return r},Jo,t=>t.reverse()),Xk=Hf(({parent:t})=>t&&!Zi(t)?t:null,Jo,t=>t.reverse());function Qk(t){var r;const i=[];if(!t)return this._make(i);const E={xmlMode:this.options.xmlMode,root:(r=this._root)===null||r===void 0?void 0:r[0]},R=typeof t=="string"?V=>T1(V,t,E):ca(t);return Br(this,V=>{for(V&&!Zi(V)&&!Or(V)&&(V=V.parent);V&&Or(V);){if(R(V,0)){i.includes(V)||i.push(V);break}V=V.parent}}),this._make(i)}const Zk=jf(t=>Xy(t)),e2=oa(t=>{const r=[];for(;t.next;)t=t.next,Or(t)&&r.push(t);return r},vs),t2=Hf(t=>Xy(t),vs),r2=jf(t=>Qy(t)),n2=oa(t=>{const r=[];for(;t.prev;)t=t.prev,Or(t)&&r.push(t);return r},vs),i2=Hf(t=>Qy(t),vs),s2=oa(t=>RC(t).filter(r=>Or(r)&&r!==t),Jo),a2=oa(t=>Yy(t).filter(Or),vs);function o2(){const t=this.toArray().reduce((r,i)=>_n(i)?r.concat(i.children):r,[]);return this._make(t)}function c2(t){let r=0;const i=this.length;for(;r<i&&t.call(this[r],r,this[r])!==!1;)++r;return this}function l2(t){let r=[];for(let i=0;i<this.length;i++){const E=this[i],R=t.call(E,i,E);R!=null&&(r=r.concat(R))}return this._make(r)}function ca(t){return typeof t=="function"?(r,i)=>t.call(r,i,r):li(t)?r=>Array.prototype.includes.call(t,r):function(r){return t===r}}function u2(t){var r;return this._make(Uf(this.toArray(),t,this.options.xmlMode,(r=this._root)===null||r===void 0?void 0:r[0]))}function Uf(t,r,i,E){return typeof r=="string"?P1(r,t,{xmlMode:i,root:E}):t.filter(ca(r))}function d2(t){const r=this.toArray();return typeof t=="string"?C1(r.filter(Or),t,this.options):t?r.some(ca(t)):!1}function h2(t){let r=this.toArray();if(typeof t=="string"){const i=new Set(P1(t,r,this.options));r=r.filter(E=>!i.has(E))}else{const i=ca(t);r=r.filter((E,R)=>!i(E,R))}return this._make(r)}function p2(t){return this.filter(typeof t=="string"?`:has(${t})`:(r,i)=>this._make(i).find(t).length>0)}function f2(){return this.length>1?this._make(this[0]):this}function m2(){return this.length>0?this._make(this[this.length-1]):this}function g2(t){var r;return t=+t,t===0&&this.length<=1?this:(t<0&&(t=this.length+t),this._make((r=this[t])!==null&&r!==void 0?r:[]))}function _2(t){return t==null?this.toArray():this[t<0?this.length+t:t]}function b2(){return Array.prototype.slice.call(this)}function v2(t){let r,i;return t==null?(r=this.parent().children(),i=this[0]):typeof t=="string"?(r=this._make(t),i=this[0]):(r=this,i=li(t)?t[0]:t),Array.prototype.indexOf.call(r,i)}function w2(t,r){return this._make(Array.prototype.slice.call(this,t,r))}function y2(){var t;return(t=this.prevObject)!==null&&t!==void 0?t:this._make([])}function S2(t,r){const i=this._make(t,r),E=Jo([...this.get(),...i.get()]);return this._make(E)}function x2(t){return this.prevObject?this.add(t?this.prevObject.filter(t):this.prevObject):this}const E2=Object.freeze(Object.defineProperty({__proto__:null,_findBySelector:Gk,add:S2,addBack:x2,children:a2,closest:Qk,contents:o2,each:c2,end:y2,eq:g2,filter:u2,filterArray:Uf,find:Kk,first:f2,get:_2,has:p2,index:v2,is:d2,last:m2,map:l2,next:Zk,nextAll:e2,nextUntil:t2,not:h2,parent:Jk,parents:Yk,parentsUntil:Xk,prev:r2,prevAll:n2,prevUntil:i2,siblings:s2,slice:w2,toArray:b2},Symbol.toStringTag,{value:"Module"}));function O2(t){return function(i,E,R,V){if(typeof Buffer<"u"&&Buffer.isBuffer(i)&&(i=i.toString()),typeof i=="string")return t(i,E,R,V);const te=i;if(!Array.isArray(te)&&Zi(te))return te;const P=new js([]);return Wi(te,P),P}}function Wi(t,r){const i=Array.isArray(t)?t:[t];r?r.children=i:r=null;for(let E=0;E<i.length;E++){const R=i[E];R.parent&&R.parent.children!==i&&Zy(R),r?(R.prev=i[E-1]||null,R.next=i[E+1]||null):R.prev=R.next=null,R.parent=r}return r}function T2(t,r){if(t==null)return[];if(typeof t=="string")return this._parse(t,this.options,!1,null).children.slice(0);if("length"in t){if(t.length===1)return this._makeDomArray(t[0],r);const i=[];for(let E=0;E<t.length;E++){const R=t[E];if(typeof R=="object"){if(R==null)continue;if(!("length"in R)){i.push(r?Hs(R,!0):R);continue}}i.push(...this._makeDomArray(R,r))}return i}return[r?Hs(t,!0):t]}function N1(t){return function(...r){const i=this.length-1;return Br(this,(E,R)=>{if(!_n(E))return;const V=typeof r[0]=="function"?r[0].call(E,R,this._render(E.children)):r,te=this._makeDomArray(V,R<i);t(te,E.children,E)})}}function Ci(t,r,i,E,R){var V,te;const P=[r,i,...E],e=r===0?null:t[r-1],U=r+i>=t.length?null:t[r+i];for(let C=0;C<E.length;++C){const w=E[C],g=w.parent;if(g){const _=g.children.indexOf(w);_!==-1&&(g.children.splice(_,1),R===g&&r>_&&P[0]--)}w.parent=R,w.prev&&(w.prev.next=(V=w.next)!==null&&V!==void 0?V:null),w.next&&(w.next.prev=(te=w.prev)!==null&&te!==void 0?te:null),w.prev=C===0?e:E[C-1],w.next=C===E.length-1?U:E[C+1]}return e&&(e.next=E[0]),U&&(U.prev=E[E.length-1]),t.splice(...P)}function C2(t){return(li(t)?t:this._make(t)).append(this),this}function P2(t){return(li(t)?t:this._make(t)).prepend(this),this}const k2=N1((t,r,i)=>{Ci(r,r.length,0,t,i)}),A2=N1((t,r,i)=>{Ci(r,0,0,t,i)});function R1(t){return function(r){const i=this.length-1,E=this.parents().last();for(let R=0;R<this.length;R++){const V=this[R],te=typeof r=="function"?r.call(V,R,V):typeof r=="string"&&!Hp(r)?E.find(r).clone():r,[P]=this._makeDomArray(te,R<i);if(!P||!_n(P))continue;let e=P,U=0;for(;U<e.children.length;){const C=e.children[U];Or(C)?(e=C,U=0):U++}t(V,e,[P])}return this}}const I2=R1((t,r,i)=>{const{parent:E}=t;if(!E)return;const R=E.children,V=R.indexOf(t);Wi([t],r),Ci(R,V,0,i,E)}),N2=R1((t,r,i)=>{_n(t)&&(Wi(t.children,r),Wi(i,t))});function R2(t){return this.parent(t).not("body").each((r,i)=>{this._make(i).replaceWith(i.children)}),this}function L2(t){const r=this[0];if(r){const i=this._make(typeof t=="function"?t.call(r,0,r):t).insertBefore(r);let E;for(let V=0;V<i.length;V++)i[V].type===fo&&(E=i[V]);let R=0;for(;E&&R<E.children.length;){const V=E.children[R];V.type===fo?(E=V,R=0):R++}E&&this._make(E).append(this)}return this}function D2(...t){const r=this.length-1;return Br(this,(i,E)=>{if(!_n(i)||!i.parent)return;const R=i.parent.children,V=R.indexOf(i);if(V===-1)return;const te=typeof t[0]=="function"?t[0].call(i,E,this._render(i.children)):t,P=this._makeDomArray(te,E<r);Ci(R,V+1,0,P,i.parent)})}function M2(t){typeof t=="string"&&(t=this._make(t)),this.remove();const r=[];for(const i of this._makeDomArray(t)){const E=this.clone().toArray(),{parent:R}=i;if(!R)continue;const V=R.children,te=V.indexOf(i);te!==-1&&(Ci(V,te+1,0,E,R),r.push(...E))}return this._make(r)}function F2(...t){const r=this.length-1;return Br(this,(i,E)=>{if(!_n(i)||!i.parent)return;const R=i.parent.children,V=R.indexOf(i);if(V===-1)return;const te=typeof t[0]=="function"?t[0].call(i,E,this._render(i.children)):t,P=this._makeDomArray(te,E<r);Ci(R,V,0,P,i.parent)})}function B2(t){const r=this._make(t);this.remove();const i=[];return Br(r,E=>{const R=this.clone().toArray(),{parent:V}=E;if(!V)return;const te=V.children,P=te.indexOf(E);P!==-1&&(Ci(te,P,0,R,V),i.push(...R))}),this._make(i)}function j2(t){const r=t?this.filter(t):this;return Br(r,i=>{Zy(i),i.prev=i.next=i.parent=null}),this}function H2(t){return Br(this,(r,i)=>{const{parent:E}=r;if(!E)return;const R=E.children,V=typeof t=="function"?t.call(r,i,r):t,te=this._makeDomArray(V);Wi(te,null);const P=R.indexOf(r);Ci(R,P,1,te,E),te.includes(r)||(r.parent=r.prev=r.next=null)})}function U2(){return Br(this,t=>{if(_n(t)){for(const r of t.children)r.next=r.prev=r.parent=null;t.children.length=0}})}function q2(t){if(t===void 0){const r=this[0];return!r||!_n(r)?null:this._render(r.children)}return Br(this,r=>{if(!_n(r))return;for(const E of r.children)E.next=E.prev=E.parent=null;const i=li(t)?t.toArray():this._parse(`${t}`,this.options,!1,r).children;Wi(i,r)})}function $2(){return this._render(this)}function W2(t){return t===void 0?Us(this):typeof t=="function"?Br(this,(r,i)=>this._make(r).text(t.call(r,i,Us([r])))):Br(this,r=>{if(!_n(r))return;for(const E of r.children)E.next=E.prev=E.parent=null;const i=new mo(`${t}`);Wi(i,r)})}function z2(){const t=Array.prototype.map.call(this.get(),i=>Hs(i,!0)),r=new js(t);for(const i of t)i.parent=r;return this._make(t)}const V2=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray:T2,after:D2,append:k2,appendTo:C2,before:F2,clone:z2,empty:U2,html:q2,insertAfter:M2,insertBefore:B2,prepend:A2,prependTo:P2,remove:j2,replaceWith:H2,text:W2,toString:$2,unwrap:R2,wrap:I2,wrapAll:L2,wrapInner:N2},Symbol.toStringTag,{value:"Module"}));function K2(t,r){if(t!=null&&r!=null||typeof t=="object"&&!Array.isArray(t))return Br(this,(i,E)=>{Or(i)&&L1(i,t,r,E)});if(this.length!==0)return D1(this[0],t)}function L1(t,r,i,E){if(typeof r=="string"){const R=D1(t),V=typeof i=="function"?i.call(t,E,R[r]):i;V===""?delete R[r]:V!=null&&(R[r]=V),t.attribs.style=G2(R)}else if(typeof r=="object"){const R=Object.keys(r);for(let V=0;V<R.length;V++){const te=R[V];L1(t,te,r[te],V)}}}function D1(t,r){if(!t||!Or(t))return;const i=J2(t.attribs.style);if(typeof r=="string")return i[r];if(Array.isArray(r)){const E={};for(const R of r)i[R]!=null&&(E[R]=i[R]);return E}return i}function G2(t){return Object.keys(t).reduce((r,i)=>`${r}${r?" ":""}${i}: ${t[i]};`,"")}function J2(t){if(t=(t||"").trim(),!t)return{};const r={};let i;for(const E of t.split(";")){const R=E.indexOf(":");if(R<1||R===E.length-1){const V=E.trimEnd();V.length>0&&i!==void 0&&(r[i]+=`;${V}`)}else i=E.slice(0,R).trim(),r[i]=E.slice(R+1).trim()}return r}const Y2=Object.freeze(Object.defineProperty({__proto__:null,css:K2},Symbol.toStringTag,{value:"Module"})),_w="input,select,textarea,keygen",X2=/%20/g,bw=/\r?\n/g;function Q2(){return this.serializeArray().map(i=>`${encodeURIComponent(i.name)}=${encodeURIComponent(i.value)}`).join("&").replace(X2,"+")}function Z2(){return this.map((t,r)=>{const i=this._make(r);return Or(r)&&r.name==="form"?i.find(_w).toArray():i.filter(_w).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((t,r)=>{var i;const E=this._make(r),R=E.attr("name"),V=(i=E.val())!==null&&i!==void 0?i:"";return Array.isArray(V)?V.map(te=>({name:R,value:te.replace(bw,`\r
`)})):{name:R,value:V.replace(bw,`\r
`)}}).toArray()}const eA=Object.freeze(Object.defineProperty({__proto__:null,serialize:Q2,serializeArray:Z2},Symbol.toStringTag,{value:"Module"}));function tA(t){var r;return typeof t=="string"?{selector:t,value:"textContent"}:{selector:t.selector,value:(r=t.value)!==null&&r!==void 0?r:"textContent"}}function rA(t){const r={};for(const i in t){const E=t[i],R=Array.isArray(E),{selector:V,value:te}=tA(R?E[0]:E),P=typeof te=="function"?te:typeof te=="string"?e=>this._make(e).prop(te):e=>this._make(e).extract(te);if(R)r[i]=this._findBySelector(V,Number.POSITIVE_INFINITY).map((e,U)=>P(U,i,r)).get();else{const e=this._findBySelector(V,1);r[i]=e.length>0?P(e[0],i,r):void 0}}return r}const nA=Object.freeze(Object.defineProperty({__proto__:null,extract:rA},Symbol.toStringTag,{value:"Module"}));class la{constructor(r,i,E){if(this.length=0,this.options=E,this._root=i,r){for(let R=0;R<r.length;R++)this[R]=r[R];this.length=r.length}}}la.prototype.cheerio="[cheerio object]";la.prototype.splice=Array.prototype.splice;la.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Object.assign(la.prototype,bP,E2,V2,Y2,eA,nA);function iA(t,r){return function i(E,R,V=!0){if(E==null)throw new Error("cheerio.load() expects a string");const te=jp(R),P=t(E,te,V,null);class e extends la{_make(w,g){const u=U(w,g);return u.prevObject=this,u}_parse(w,g,u,_){return t(w,g,u,_)}_render(w){return r(w,this.options)}}function U(C,w,g=P,u){if(C&&li(C))return C;const _=jp(u,te),f=typeof g=="string"?[t(g,_,!1,null)]:"length"in g?g:[g],d=li(f)?f:new e(f,null,_);if(d._root=d,!C)return new e(void 0,d,_);const v=typeof C=="string"&&Hp(C)?t(C,_,!1,null).children:sA(C)?[C]:Array.isArray(C)?C:void 0,a=new e(v,d,_);if(v)return a;if(typeof C!="string")throw new TypeError("Unexpected type of selector");let s=C;const n=w?typeof w=="string"?Hp(w)?new e([t(w,_,!1,null)],d,_):(s=`${w} ${s}`,d):li(w)?w:new e(Array.isArray(w)?w:[w],d,_):d;return n?n.find(s):a}return Object.assign(U,$C,{load:i,_root:P,_options:te,fn:e.prototype,prototype:e.prototype}),U}}function sA(t){return!!t.name||t.type===Go||t.type===Sf||t.type===xf}const aA=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Dr="�";var Me;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(Me||(Me={}));const yn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function M1(t){return t>=55296&&t<=57343}function oA(t){return t>=56320&&t<=57343}function cA(t,r){return(t-55296)*1024+9216+r}function F1(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function B1(t){return t>=64976&&t<=65007||aA.has(t)}var ut;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ut||(ut={}));const lA=65536;class uA{constructor(r){this.handler=r,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=lA,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(r,i){const{line:E,col:R,offset:V}=this,te=R+i,P=V+i;return{code:r,startLine:E,endLine:E,startCol:te,endCol:te,startOffset:P,endOffset:P}}_err(r){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(r,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(r){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if(oA(i))return this.pos++,this._addGap(),cA(r,i)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Me.EOF;return this._err(ut.surrogateInInputStream),r}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(r,i){this.html.length>0?this.html+=r:this.html=r,this.endOfChunkHit=!1,this.lastChunkWritten=i}insertHtmlAtCurrentPos(r){this.html=this.html.substring(0,this.pos+1)+r+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(r,i){if(this.pos+r.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(i)return this.html.startsWith(r,this.pos);for(let E=0;E<r.length;E++)if((this.html.charCodeAt(this.pos+E)|32)!==r.charCodeAt(E))return!1;return!0}peek(r){const i=this.pos+r;if(i>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Me.EOF;const E=this.html.charCodeAt(i);return E===Me.CARRIAGE_RETURN?Me.LINE_FEED:E}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Me.EOF;let r=this.html.charCodeAt(this.pos);return r===Me.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Me.LINE_FEED):r===Me.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,M1(r)&&(r=this._processSurrogate(r)),this.handler.onParseError===null||r>31&&r<127||r===Me.LINE_FEED||r===Me.CARRIAGE_RETURN||r>159&&r<64976||this._checkForProblematicCharacters(r),r)}_checkForProblematicCharacters(r){F1(r)?this._err(ut.controlCharacterInInputStream):B1(r)&&this._err(ut.noncharacterInInputStream)}retreat(r){for(this.pos-=r;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Er;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Er||(Er={}));function j1(t,r){for(let i=t.attrs.length-1;i>=0;i--)if(t.attrs[i].name===r)return t.attrs[i].value;return null}const dA=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),hA=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function pA(t){var r;return t>=55296&&t<=57343||t>1114111?65533:(r=hA.get(t))!==null&&r!==void 0?r:t}var ln;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(ln||(ln={}));const fA=32;var Si;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Si||(Si={}));function Gp(t){return t>=ln.ZERO&&t<=ln.NINE}function mA(t){return t>=ln.UPPER_A&&t<=ln.UPPER_F||t>=ln.LOWER_A&&t<=ln.LOWER_F}function gA(t){return t>=ln.UPPER_A&&t<=ln.UPPER_Z||t>=ln.LOWER_A&&t<=ln.LOWER_Z||Gp(t)}function _A(t){return t===ln.EQUALS||gA(t)}var on;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(on||(on={}));var ci;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(ci||(ci={}));class bA{constructor(r,i,E){this.decodeTree=r,this.emitCodePoint=i,this.errors=E,this.state=on.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ci.Strict}startEntity(r){this.decodeMode=r,this.state=on.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(r,i){switch(this.state){case on.EntityStart:return r.charCodeAt(i)===ln.NUM?(this.state=on.NumericStart,this.consumed+=1,this.stateNumericStart(r,i+1)):(this.state=on.NamedEntity,this.stateNamedEntity(r,i));case on.NumericStart:return this.stateNumericStart(r,i);case on.NumericDecimal:return this.stateNumericDecimal(r,i);case on.NumericHex:return this.stateNumericHex(r,i);case on.NamedEntity:return this.stateNamedEntity(r,i)}}stateNumericStart(r,i){return i>=r.length?-1:(r.charCodeAt(i)|fA)===ln.LOWER_X?(this.state=on.NumericHex,this.consumed+=1,this.stateNumericHex(r,i+1)):(this.state=on.NumericDecimal,this.stateNumericDecimal(r,i))}addToNumericResult(r,i,E,R){if(i!==E){const V=E-i;this.result=this.result*Math.pow(R,V)+Number.parseInt(r.substr(i,V),R),this.consumed+=V}}stateNumericHex(r,i){const E=i;for(;i<r.length;){const R=r.charCodeAt(i);if(Gp(R)||mA(R))i+=1;else return this.addToNumericResult(r,E,i,16),this.emitNumericEntity(R,3)}return this.addToNumericResult(r,E,i,16),-1}stateNumericDecimal(r,i){const E=i;for(;i<r.length;){const R=r.charCodeAt(i);if(Gp(R))i+=1;else return this.addToNumericResult(r,E,i,10),this.emitNumericEntity(R,2)}return this.addToNumericResult(r,E,i,10),-1}emitNumericEntity(r,i){var E;if(this.consumed<=i)return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(r===ln.SEMI)this.consumed+=1;else if(this.decodeMode===ci.Strict)return 0;return this.emitCodePoint(pA(this.result),this.consumed),this.errors&&(r!==ln.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(r,i){const{decodeTree:E}=this;let R=E[this.treeIndex],V=(R&Si.VALUE_LENGTH)>>14;for(;i<r.length;i++,this.excess++){const te=r.charCodeAt(i);if(this.treeIndex=vA(E,R,this.treeIndex+Math.max(1,V),te),this.treeIndex<0)return this.result===0||this.decodeMode===ci.Attribute&&(V===0||_A(te))?0:this.emitNotTerminatedNamedEntity();if(R=E[this.treeIndex],V=(R&Si.VALUE_LENGTH)>>14,V!==0){if(te===ln.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==ci.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var r;const{result:i,decodeTree:E}=this,R=(E[i]&Si.VALUE_LENGTH)>>14;return this.emitNamedEntityData(i,R,this.consumed),(r=this.errors)===null||r===void 0||r.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(r,i,E){const{decodeTree:R}=this;return this.emitCodePoint(i===1?R[r]&~Si.VALUE_LENGTH:R[r+1],E),i===3&&this.emitCodePoint(R[r+2],E),E}end(){var r;switch(this.state){case on.NamedEntity:return this.result!==0&&(this.decodeMode!==ci.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case on.NumericDecimal:return this.emitNumericEntity(0,2);case on.NumericHex:return this.emitNumericEntity(0,3);case on.NumericStart:return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case on.EntityStart:return 0}}}function vA(t,r,i,E){const R=(r&Si.BRANCH_LENGTH)>>7,V=r&Si.JUMP_TABLE;if(R===0)return V!==0&&E===V?i:-1;if(V){const e=E-V;return e<0||e>=R?-1:t[i+e]-1}let te=i,P=te+R-1;for(;te<=P;){const e=te+P>>>1,U=t[e];if(U<E)te=e+1;else if(U>E)P=e-1;else return t[e+R]}return-1}var xt;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(xt||(xt={}));var $i;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})($i||($i={}));var Rn;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Rn||(Rn={}));var rt;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(rt||(rt={}));var de;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(de||(de={}));const wA=new Map([[rt.A,de.A],[rt.ADDRESS,de.ADDRESS],[rt.ANNOTATION_XML,de.ANNOTATION_XML],[rt.APPLET,de.APPLET],[rt.AREA,de.AREA],[rt.ARTICLE,de.ARTICLE],[rt.ASIDE,de.ASIDE],[rt.B,de.B],[rt.BASE,de.BASE],[rt.BASEFONT,de.BASEFONT],[rt.BGSOUND,de.BGSOUND],[rt.BIG,de.BIG],[rt.BLOCKQUOTE,de.BLOCKQUOTE],[rt.BODY,de.BODY],[rt.BR,de.BR],[rt.BUTTON,de.BUTTON],[rt.CAPTION,de.CAPTION],[rt.CENTER,de.CENTER],[rt.CODE,de.CODE],[rt.COL,de.COL],[rt.COLGROUP,de.COLGROUP],[rt.DD,de.DD],[rt.DESC,de.DESC],[rt.DETAILS,de.DETAILS],[rt.DIALOG,de.DIALOG],[rt.DIR,de.DIR],[rt.DIV,de.DIV],[rt.DL,de.DL],[rt.DT,de.DT],[rt.EM,de.EM],[rt.EMBED,de.EMBED],[rt.FIELDSET,de.FIELDSET],[rt.FIGCAPTION,de.FIGCAPTION],[rt.FIGURE,de.FIGURE],[rt.FONT,de.FONT],[rt.FOOTER,de.FOOTER],[rt.FOREIGN_OBJECT,de.FOREIGN_OBJECT],[rt.FORM,de.FORM],[rt.FRAME,de.FRAME],[rt.FRAMESET,de.FRAMESET],[rt.H1,de.H1],[rt.H2,de.H2],[rt.H3,de.H3],[rt.H4,de.H4],[rt.H5,de.H5],[rt.H6,de.H6],[rt.HEAD,de.HEAD],[rt.HEADER,de.HEADER],[rt.HGROUP,de.HGROUP],[rt.HR,de.HR],[rt.HTML,de.HTML],[rt.I,de.I],[rt.IMG,de.IMG],[rt.IMAGE,de.IMAGE],[rt.INPUT,de.INPUT],[rt.IFRAME,de.IFRAME],[rt.KEYGEN,de.KEYGEN],[rt.LABEL,de.LABEL],[rt.LI,de.LI],[rt.LINK,de.LINK],[rt.LISTING,de.LISTING],[rt.MAIN,de.MAIN],[rt.MALIGNMARK,de.MALIGNMARK],[rt.MARQUEE,de.MARQUEE],[rt.MATH,de.MATH],[rt.MENU,de.MENU],[rt.META,de.META],[rt.MGLYPH,de.MGLYPH],[rt.MI,de.MI],[rt.MO,de.MO],[rt.MN,de.MN],[rt.MS,de.MS],[rt.MTEXT,de.MTEXT],[rt.NAV,de.NAV],[rt.NOBR,de.NOBR],[rt.NOFRAMES,de.NOFRAMES],[rt.NOEMBED,de.NOEMBED],[rt.NOSCRIPT,de.NOSCRIPT],[rt.OBJECT,de.OBJECT],[rt.OL,de.OL],[rt.OPTGROUP,de.OPTGROUP],[rt.OPTION,de.OPTION],[rt.P,de.P],[rt.PARAM,de.PARAM],[rt.PLAINTEXT,de.PLAINTEXT],[rt.PRE,de.PRE],[rt.RB,de.RB],[rt.RP,de.RP],[rt.RT,de.RT],[rt.RTC,de.RTC],[rt.RUBY,de.RUBY],[rt.S,de.S],[rt.SCRIPT,de.SCRIPT],[rt.SEARCH,de.SEARCH],[rt.SECTION,de.SECTION],[rt.SELECT,de.SELECT],[rt.SOURCE,de.SOURCE],[rt.SMALL,de.SMALL],[rt.SPAN,de.SPAN],[rt.STRIKE,de.STRIKE],[rt.STRONG,de.STRONG],[rt.STYLE,de.STYLE],[rt.SUB,de.SUB],[rt.SUMMARY,de.SUMMARY],[rt.SUP,de.SUP],[rt.TABLE,de.TABLE],[rt.TBODY,de.TBODY],[rt.TEMPLATE,de.TEMPLATE],[rt.TEXTAREA,de.TEXTAREA],[rt.TFOOT,de.TFOOT],[rt.TD,de.TD],[rt.TH,de.TH],[rt.THEAD,de.THEAD],[rt.TITLE,de.TITLE],[rt.TR,de.TR],[rt.TRACK,de.TRACK],[rt.TT,de.TT],[rt.U,de.U],[rt.UL,de.UL],[rt.SVG,de.SVG],[rt.VAR,de.VAR],[rt.WBR,de.WBR],[rt.XMP,de.XMP]]);function Qo(t){var r;return(r=wA.get(t))!==null&&r!==void 0?r:de.UNKNOWN}const Lt=de,yA={[xt.HTML]:new Set([Lt.ADDRESS,Lt.APPLET,Lt.AREA,Lt.ARTICLE,Lt.ASIDE,Lt.BASE,Lt.BASEFONT,Lt.BGSOUND,Lt.BLOCKQUOTE,Lt.BODY,Lt.BR,Lt.BUTTON,Lt.CAPTION,Lt.CENTER,Lt.COL,Lt.COLGROUP,Lt.DD,Lt.DETAILS,Lt.DIR,Lt.DIV,Lt.DL,Lt.DT,Lt.EMBED,Lt.FIELDSET,Lt.FIGCAPTION,Lt.FIGURE,Lt.FOOTER,Lt.FORM,Lt.FRAME,Lt.FRAMESET,Lt.H1,Lt.H2,Lt.H3,Lt.H4,Lt.H5,Lt.H6,Lt.HEAD,Lt.HEADER,Lt.HGROUP,Lt.HR,Lt.HTML,Lt.IFRAME,Lt.IMG,Lt.INPUT,Lt.LI,Lt.LINK,Lt.LISTING,Lt.MAIN,Lt.MARQUEE,Lt.MENU,Lt.META,Lt.NAV,Lt.NOEMBED,Lt.NOFRAMES,Lt.NOSCRIPT,Lt.OBJECT,Lt.OL,Lt.P,Lt.PARAM,Lt.PLAINTEXT,Lt.PRE,Lt.SCRIPT,Lt.SECTION,Lt.SELECT,Lt.SOURCE,Lt.STYLE,Lt.SUMMARY,Lt.TABLE,Lt.TBODY,Lt.TD,Lt.TEMPLATE,Lt.TEXTAREA,Lt.TFOOT,Lt.TH,Lt.THEAD,Lt.TITLE,Lt.TR,Lt.TRACK,Lt.UL,Lt.WBR,Lt.XMP]),[xt.MATHML]:new Set([Lt.MI,Lt.MO,Lt.MN,Lt.MS,Lt.MTEXT,Lt.ANNOTATION_XML]),[xt.SVG]:new Set([Lt.TITLE,Lt.FOREIGN_OBJECT,Lt.DESC]),[xt.XLINK]:new Set,[xt.XML]:new Set,[xt.XMLNS]:new Set},Jp=new Set([Lt.H1,Lt.H2,Lt.H3,Lt.H4,Lt.H5,Lt.H6]),SA=new Set([rt.STYLE,rt.SCRIPT,rt.XMP,rt.IFRAME,rt.NOEMBED,rt.NOFRAMES,rt.PLAINTEXT]);function xA(t,r){return SA.has(t)||r&&t===rt.NOSCRIPT}var je;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(je||(je={}));const xn={DATA:je.DATA,RCDATA:je.RCDATA,RAWTEXT:je.RAWTEXT,SCRIPT_DATA:je.SCRIPT_DATA,PLAINTEXT:je.PLAINTEXT,CDATA_SECTION:je.CDATA_SECTION};function EA(t){return t>=Me.DIGIT_0&&t<=Me.DIGIT_9}function Is(t){return t>=Me.LATIN_CAPITAL_A&&t<=Me.LATIN_CAPITAL_Z}function OA(t){return t>=Me.LATIN_SMALL_A&&t<=Me.LATIN_SMALL_Z}function _i(t){return OA(t)||Is(t)}function vw(t){return _i(t)||EA(t)}function oo(t){return t+32}function H1(t){return t===Me.SPACE||t===Me.LINE_FEED||t===Me.TABULATION||t===Me.FORM_FEED}function ww(t){return H1(t)||t===Me.SOLIDUS||t===Me.GREATER_THAN_SIGN}function TA(t){return t===Me.NULL?ut.nullCharacterReference:t>1114111?ut.characterReferenceOutsideUnicodeRange:M1(t)?ut.surrogateCharacterReference:B1(t)?ut.noncharacterCharacterReference:F1(t)||t===Me.CARRIAGE_RETURN?ut.controlCharacterReference:null}class CA{constructor(r,i){this.options=r,this.handler=i,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=je.DATA,this.returnState=je.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new uA(i),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new bA(dA,(E,R)=>{this.preprocessor.pos=this.entityStartPos+R-1,this._flushCodePointConsumedAsCharacterReference(E)},i.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ut.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:E=>{this._err(ut.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+E)},validateNumericCharacterReference:E=>{const R=TA(E);R&&this._err(R,1)}}:void 0)}_err(r,i=0){var E,R;(R=(E=this.handler).onParseError)===null||R===void 0||R.call(E,this.preprocessor.getError(r,i))}getCurrentLocation(r){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-r,startOffset:this.preprocessor.offset-r,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const r=this._consume();this._ensureHibernation()||this._callState(r)}this.inLoop=!1}}pause(){this.paused=!0}resume(r){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||r==null||r())}write(r,i,E){this.active=!0,this.preprocessor.write(r,i),this._runParsingLoop(),this.paused||E==null||E()}insertHtmlAtCurrentPos(r){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(r),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(r){this.consumedAfterSnapshot+=r;for(let i=0;i<r;i++)this.preprocessor.advance()}_consumeSequenceIfMatch(r,i){return this.preprocessor.startsWith(r,i)?(this._advanceBy(r.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Er.START_TAG,tagName:"",tagID:de.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Er.END_TAG,tagName:"",tagID:de.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(r){this.currentToken={type:Er.COMMENT,data:"",location:this.getCurrentLocation(r)}}_createDoctypeToken(r){this.currentToken={type:Er.DOCTYPE,name:r,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(r,i){this.currentCharacterToken={type:r,chars:i,location:this.currentLocation}}_createAttr(r){this.currentAttr={name:r,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var r,i;const E=this.currentToken;if(j1(E,this.currentAttr.name)===null){if(E.attrs.push(this.currentAttr),E.location&&this.currentLocation){const R=(r=(i=E.location).attrs)!==null&&r!==void 0?r:i.attrs=Object.create(null);R[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ut.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(r){this._emitCurrentCharacterToken(r.location),this.currentToken=null,r.location&&(r.location.endLine=this.preprocessor.line,r.location.endCol=this.preprocessor.col+1,r.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const r=this.currentToken;this.prepareToken(r),r.tagID=Qo(r.tagName),r.type===Er.START_TAG?(this.lastStartTagName=r.tagName,this.handler.onStartTag(r)):(r.attrs.length>0&&this._err(ut.endTagWithAttributes),r.selfClosing&&this._err(ut.endTagWithTrailingSolidus),this.handler.onEndTag(r)),this.preprocessor.dropParsedChunk()}emitCurrentComment(r){this.prepareToken(r),this.handler.onComment(r),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(r){this.prepareToken(r),this.handler.onDoctype(r),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(r){if(this.currentCharacterToken){switch(r&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=r.startLine,this.currentCharacterToken.location.endCol=r.startCol,this.currentCharacterToken.location.endOffset=r.startOffset),this.currentCharacterToken.type){case Er.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Er.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Er.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const r=this.getCurrentLocation(0);r&&(r.endLine=r.startLine,r.endCol=r.startCol,r.endOffset=r.startOffset),this._emitCurrentCharacterToken(r),this.handler.onEof({type:Er.EOF,location:r}),this.active=!1}_appendCharToCurrentCharacterToken(r,i){if(this.currentCharacterToken)if(this.currentCharacterToken.type===r){this.currentCharacterToken.chars+=i;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(r,i)}_emitCodePoint(r){const i=H1(r)?Er.WHITESPACE_CHARACTER:r===Me.NULL?Er.NULL_CHARACTER:Er.CHARACTER;this._appendCharToCurrentCharacterToken(i,String.fromCodePoint(r))}_emitChars(r){this._appendCharToCurrentCharacterToken(Er.CHARACTER,r)}_startCharacterReference(){this.returnState=this.state,this.state=je.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?ci.Attribute:ci.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===je.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===je.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===je.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(r){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(r):this._emitCodePoint(r)}_callState(r){switch(this.state){case je.DATA:{this._stateData(r);break}case je.RCDATA:{this._stateRcdata(r);break}case je.RAWTEXT:{this._stateRawtext(r);break}case je.SCRIPT_DATA:{this._stateScriptData(r);break}case je.PLAINTEXT:{this._statePlaintext(r);break}case je.TAG_OPEN:{this._stateTagOpen(r);break}case je.END_TAG_OPEN:{this._stateEndTagOpen(r);break}case je.TAG_NAME:{this._stateTagName(r);break}case je.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(r);break}case je.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(r);break}case je.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(r);break}case je.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(r);break}case je.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(r);break}case je.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(r);break}case je.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(r);break}case je.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(r);break}case je.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(r);break}case je.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(r);break}case je.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(r);break}case je.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(r);break}case je.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(r);break}case je.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(r);break}case je.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(r);break}case je.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(r);break}case je.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(r);break}case je.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(r);break}case je.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(r);break}case je.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(r);break}case je.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(r);break}case je.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(r);break}case je.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(r);break}case je.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(r);break}case je.ATTRIBUTE_NAME:{this._stateAttributeName(r);break}case je.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(r);break}case je.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(r);break}case je.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(r);break}case je.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(r);break}case je.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(r);break}case je.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(r);break}case je.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(r);break}case je.BOGUS_COMMENT:{this._stateBogusComment(r);break}case je.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(r);break}case je.COMMENT_START:{this._stateCommentStart(r);break}case je.COMMENT_START_DASH:{this._stateCommentStartDash(r);break}case je.COMMENT:{this._stateComment(r);break}case je.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(r);break}case je.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(r);break}case je.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(r);break}case je.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(r);break}case je.COMMENT_END_DASH:{this._stateCommentEndDash(r);break}case je.COMMENT_END:{this._stateCommentEnd(r);break}case je.COMMENT_END_BANG:{this._stateCommentEndBang(r);break}case je.DOCTYPE:{this._stateDoctype(r);break}case je.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(r);break}case je.DOCTYPE_NAME:{this._stateDoctypeName(r);break}case je.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(r);break}case je.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(r);break}case je.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(r);break}case je.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(r);break}case je.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(r);break}case je.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(r);break}case je.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(r);break}case je.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(r);break}case je.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(r);break}case je.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(r);break}case je.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(r);break}case je.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(r);break}case je.BOGUS_DOCTYPE:{this._stateBogusDoctype(r);break}case je.CDATA_SECTION:{this._stateCdataSection(r);break}case je.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(r);break}case je.CDATA_SECTION_END:{this._stateCdataSectionEnd(r);break}case je.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case je.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(r);break}default:throw new Error("Unknown state")}}_stateData(r){switch(r){case Me.LESS_THAN_SIGN:{this.state=je.TAG_OPEN;break}case Me.AMPERSAND:{this._startCharacterReference();break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitCodePoint(r);break}case Me.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateRcdata(r){switch(r){case Me.AMPERSAND:{this._startCharacterReference();break}case Me.LESS_THAN_SIGN:{this.state=je.RCDATA_LESS_THAN_SIGN;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitChars(Dr);break}case Me.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateRawtext(r){switch(r){case Me.LESS_THAN_SIGN:{this.state=je.RAWTEXT_LESS_THAN_SIGN;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitChars(Dr);break}case Me.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateScriptData(r){switch(r){case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_LESS_THAN_SIGN;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitChars(Dr);break}case Me.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}_statePlaintext(r){switch(r){case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitChars(Dr);break}case Me.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateTagOpen(r){if(_i(r))this._createStartTagToken(),this.state=je.TAG_NAME,this._stateTagName(r);else switch(r){case Me.EXCLAMATION_MARK:{this.state=je.MARKUP_DECLARATION_OPEN;break}case Me.SOLIDUS:{this.state=je.END_TAG_OPEN;break}case Me.QUESTION_MARK:{this._err(ut.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=je.BOGUS_COMMENT,this._stateBogusComment(r);break}case Me.EOF:{this._err(ut.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ut.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=je.DATA,this._stateData(r)}}_stateEndTagOpen(r){if(_i(r))this._createEndTagToken(),this.state=je.TAG_NAME,this._stateTagName(r);else switch(r){case Me.GREATER_THAN_SIGN:{this._err(ut.missingEndTagName),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ut.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=je.BOGUS_COMMENT,this._stateBogusComment(r)}}_stateTagName(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this.state=je.BEFORE_ATTRIBUTE_NAME;break}case Me.SOLIDUS:{this.state=je.SELF_CLOSING_START_TAG;break}case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentTagToken();break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.tagName+=Dr;break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:i.tagName+=String.fromCodePoint(Is(r)?oo(r):r)}}_stateRcdataLessThanSign(r){r===Me.SOLIDUS?this.state=je.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=je.RCDATA,this._stateRcdata(r))}_stateRcdataEndTagOpen(r){_i(r)?(this.state=je.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(r)):(this._emitChars("</"),this.state=je.RCDATA,this._stateRcdata(r))}handleSpecialEndTag(r){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const i=this.currentToken;switch(i.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=je.BEFORE_ATTRIBUTE_NAME,!1;case Me.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=je.SELF_CLOSING_START_TAG,!1;case Me.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=je.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=je.RCDATA,this._stateRcdata(r))}_stateRawtextLessThanSign(r){r===Me.SOLIDUS?this.state=je.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=je.RAWTEXT,this._stateRawtext(r))}_stateRawtextEndTagOpen(r){_i(r)?(this.state=je.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(r)):(this._emitChars("</"),this.state=je.RAWTEXT,this._stateRawtext(r))}_stateRawtextEndTagName(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=je.RAWTEXT,this._stateRawtext(r))}_stateScriptDataLessThanSign(r){switch(r){case Me.SOLIDUS:{this.state=je.SCRIPT_DATA_END_TAG_OPEN;break}case Me.EXCLAMATION_MARK:{this.state=je.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=je.SCRIPT_DATA,this._stateScriptData(r)}}_stateScriptDataEndTagOpen(r){_i(r)?(this.state=je.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(r)):(this._emitChars("</"),this.state=je.SCRIPT_DATA,this._stateScriptData(r))}_stateScriptDataEndTagName(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=je.SCRIPT_DATA,this._stateScriptData(r))}_stateScriptDataEscapeStart(r){r===Me.HYPHEN_MINUS?(this.state=je.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=je.SCRIPT_DATA,this._stateScriptData(r))}_stateScriptDataEscapeStartDash(r){r===Me.HYPHEN_MINUS?(this.state=je.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=je.SCRIPT_DATA,this._stateScriptData(r))}_stateScriptDataEscaped(r){switch(r){case Me.HYPHEN_MINUS:{this.state=je.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitChars(Dr);break}case Me.EOF:{this._err(ut.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateScriptDataEscapedDash(r){switch(r){case Me.HYPHEN_MINUS:{this.state=je.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.state=je.SCRIPT_DATA_ESCAPED,this._emitChars(Dr);break}case Me.EOF:{this._err(ut.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=je.SCRIPT_DATA_ESCAPED,this._emitCodePoint(r)}}_stateScriptDataEscapedDashDash(r){switch(r){case Me.HYPHEN_MINUS:{this._emitChars("-");break}case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Me.GREATER_THAN_SIGN:{this.state=je.SCRIPT_DATA,this._emitChars(">");break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.state=je.SCRIPT_DATA_ESCAPED,this._emitChars(Dr);break}case Me.EOF:{this._err(ut.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=je.SCRIPT_DATA_ESCAPED,this._emitCodePoint(r)}}_stateScriptDataEscapedLessThanSign(r){r===Me.SOLIDUS?this.state=je.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:_i(r)?(this._emitChars("<"),this.state=je.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(r)):(this._emitChars("<"),this.state=je.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}_stateScriptDataEscapedEndTagOpen(r){_i(r)?(this.state=je.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(r)):(this._emitChars("</"),this.state=je.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}_stateScriptDataEscapedEndTagName(r){this.handleSpecialEndTag(r)&&(this._emitChars("</"),this.state=je.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}_stateScriptDataDoubleEscapeStart(r){if(this.preprocessor.startsWith(yn.SCRIPT,!1)&&ww(this.preprocessor.peek(yn.SCRIPT.length))){this._emitCodePoint(r);for(let i=0;i<yn.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=je.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(r))}_stateScriptDataDoubleEscaped(r){switch(r){case Me.HYPHEN_MINUS:{this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._emitChars(Dr);break}case Me.EOF:{this._err(ut.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateScriptDataDoubleEscapedDash(r){switch(r){case Me.HYPHEN_MINUS:{this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Dr);break}case Me.EOF:{this._err(ut.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(r)}}_stateScriptDataDoubleEscapedDashDash(r){switch(r){case Me.HYPHEN_MINUS:{this._emitChars("-");break}case Me.LESS_THAN_SIGN:{this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Me.GREATER_THAN_SIGN:{this.state=je.SCRIPT_DATA,this._emitChars(">");break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Dr);break}case Me.EOF:{this._err(ut.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(r)}}_stateScriptDataDoubleEscapedLessThanSign(r){r===Me.SOLIDUS?(this.state=je.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(r))}_stateScriptDataDoubleEscapeEnd(r){if(this.preprocessor.startsWith(yn.SCRIPT,!1)&&ww(this.preprocessor.peek(yn.SCRIPT.length))){this._emitCodePoint(r);for(let i=0;i<yn.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=je.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=je.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(r))}_stateBeforeAttributeName(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.SOLIDUS:case Me.GREATER_THAN_SIGN:case Me.EOF:{this.state=je.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(r);break}case Me.EQUALS_SIGN:{this._err(ut.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=je.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=je.ATTRIBUTE_NAME,this._stateAttributeName(r)}}_stateAttributeName(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:case Me.SOLIDUS:case Me.GREATER_THAN_SIGN:case Me.EOF:{this._leaveAttrName(),this.state=je.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(r);break}case Me.EQUALS_SIGN:{this._leaveAttrName(),this.state=je.BEFORE_ATTRIBUTE_VALUE;break}case Me.QUOTATION_MARK:case Me.APOSTROPHE:case Me.LESS_THAN_SIGN:{this._err(ut.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(r);break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.currentAttr.name+=Dr;break}default:this.currentAttr.name+=String.fromCodePoint(Is(r)?oo(r):r)}}_stateAfterAttributeName(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.SOLIDUS:{this.state=je.SELF_CLOSING_START_TAG;break}case Me.EQUALS_SIGN:{this.state=je.BEFORE_ATTRIBUTE_VALUE;break}case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentTagToken();break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=je.ATTRIBUTE_NAME,this._stateAttributeName(r)}}_stateBeforeAttributeValue(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.QUOTATION_MARK:{this.state=je.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{this.state=je.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Me.GREATER_THAN_SIGN:{this._err(ut.missingAttributeValue),this.state=je.DATA,this.emitCurrentTagToken();break}default:this.state=je.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(r)}}_stateAttributeValueDoubleQuoted(r){switch(r){case Me.QUOTATION_MARK:{this.state=je.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Me.AMPERSAND:{this._startCharacterReference();break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.currentAttr.value+=Dr;break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}_stateAttributeValueSingleQuoted(r){switch(r){case Me.APOSTROPHE:{this.state=je.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Me.AMPERSAND:{this._startCharacterReference();break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.currentAttr.value+=Dr;break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}_stateAttributeValueUnquoted(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this._leaveAttrValue(),this.state=je.BEFORE_ATTRIBUTE_NAME;break}case Me.AMPERSAND:{this._startCharacterReference();break}case Me.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=je.DATA,this.emitCurrentTagToken();break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),this.currentAttr.value+=Dr;break}case Me.QUOTATION_MARK:case Me.APOSTROPHE:case Me.LESS_THAN_SIGN:case Me.EQUALS_SIGN:case Me.GRAVE_ACCENT:{this._err(ut.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(r);break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(r)}}_stateAfterAttributeValueQuoted(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this._leaveAttrValue(),this.state=je.BEFORE_ATTRIBUTE_NAME;break}case Me.SOLIDUS:{this._leaveAttrValue(),this.state=je.SELF_CLOSING_START_TAG;break}case Me.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=je.DATA,this.emitCurrentTagToken();break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:this._err(ut.missingWhitespaceBetweenAttributes),this.state=je.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(r)}}_stateSelfClosingStartTag(r){switch(r){case Me.GREATER_THAN_SIGN:{const i=this.currentToken;i.selfClosing=!0,this.state=je.DATA,this.emitCurrentTagToken();break}case Me.EOF:{this._err(ut.eofInTag),this._emitEOFToken();break}default:this._err(ut.unexpectedSolidusInTag),this.state=je.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(r)}}_stateBogusComment(r){const i=this.currentToken;switch(r){case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentComment(i);break}case Me.EOF:{this.emitCurrentComment(i),this._emitEOFToken();break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.data+=Dr;break}default:i.data+=String.fromCodePoint(r)}}_stateMarkupDeclarationOpen(r){this._consumeSequenceIfMatch(yn.DASH_DASH,!0)?(this._createCommentToken(yn.DASH_DASH.length+1),this.state=je.COMMENT_START):this._consumeSequenceIfMatch(yn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(yn.DOCTYPE.length+1),this.state=je.DOCTYPE):this._consumeSequenceIfMatch(yn.CDATA_START,!0)?this.inForeignNode?this.state=je.CDATA_SECTION:(this._err(ut.cdataInHtmlContent),this._createCommentToken(yn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=je.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ut.incorrectlyOpenedComment),this._createCommentToken(2),this.state=je.BOGUS_COMMENT,this._stateBogusComment(r))}_stateCommentStart(r){switch(r){case Me.HYPHEN_MINUS:{this.state=je.COMMENT_START_DASH;break}case Me.GREATER_THAN_SIGN:{this._err(ut.abruptClosingOfEmptyComment),this.state=je.DATA;const i=this.currentToken;this.emitCurrentComment(i);break}default:this.state=je.COMMENT,this._stateComment(r)}}_stateCommentStartDash(r){const i=this.currentToken;switch(r){case Me.HYPHEN_MINUS:{this.state=je.COMMENT_END;break}case Me.GREATER_THAN_SIGN:{this._err(ut.abruptClosingOfEmptyComment),this.state=je.DATA,this.emitCurrentComment(i);break}case Me.EOF:{this._err(ut.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=je.COMMENT,this._stateComment(r)}}_stateComment(r){const i=this.currentToken;switch(r){case Me.HYPHEN_MINUS:{this.state=je.COMMENT_END_DASH;break}case Me.LESS_THAN_SIGN:{i.data+="<",this.state=je.COMMENT_LESS_THAN_SIGN;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.data+=Dr;break}case Me.EOF:{this._err(ut.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+=String.fromCodePoint(r)}}_stateCommentLessThanSign(r){const i=this.currentToken;switch(r){case Me.EXCLAMATION_MARK:{i.data+="!",this.state=je.COMMENT_LESS_THAN_SIGN_BANG;break}case Me.LESS_THAN_SIGN:{i.data+="<";break}default:this.state=je.COMMENT,this._stateComment(r)}}_stateCommentLessThanSignBang(r){r===Me.HYPHEN_MINUS?this.state=je.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=je.COMMENT,this._stateComment(r))}_stateCommentLessThanSignBangDash(r){r===Me.HYPHEN_MINUS?this.state=je.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=je.COMMENT_END_DASH,this._stateCommentEndDash(r))}_stateCommentLessThanSignBangDashDash(r){r!==Me.GREATER_THAN_SIGN&&r!==Me.EOF&&this._err(ut.nestedComment),this.state=je.COMMENT_END,this._stateCommentEnd(r)}_stateCommentEndDash(r){const i=this.currentToken;switch(r){case Me.HYPHEN_MINUS:{this.state=je.COMMENT_END;break}case Me.EOF:{this._err(ut.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=je.COMMENT,this._stateComment(r)}}_stateCommentEnd(r){const i=this.currentToken;switch(r){case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentComment(i);break}case Me.EXCLAMATION_MARK:{this.state=je.COMMENT_END_BANG;break}case Me.HYPHEN_MINUS:{i.data+="-";break}case Me.EOF:{this._err(ut.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--",this.state=je.COMMENT,this._stateComment(r)}}_stateCommentEndBang(r){const i=this.currentToken;switch(r){case Me.HYPHEN_MINUS:{i.data+="--!",this.state=je.COMMENT_END_DASH;break}case Me.GREATER_THAN_SIGN:{this._err(ut.incorrectlyClosedComment),this.state=je.DATA,this.emitCurrentComment(i);break}case Me.EOF:{this._err(ut.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--!",this.state=je.COMMENT,this._stateComment(r)}}_stateDoctype(r){switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this.state=je.BEFORE_DOCTYPE_NAME;break}case Me.GREATER_THAN_SIGN:{this.state=je.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(r);break}case Me.EOF:{this._err(ut.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingWhitespaceBeforeDoctypeName),this.state=je.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(r)}}_stateBeforeDoctypeName(r){if(Is(r))this._createDoctypeToken(String.fromCharCode(oo(r))),this.state=je.DOCTYPE_NAME;else switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.NULL:{this._err(ut.unexpectedNullCharacter),this._createDoctypeToken(Dr),this.state=je.DOCTYPE_NAME;break}case Me.GREATER_THAN_SIGN:{this._err(ut.missingDoctypeName),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(r)),this.state=je.DOCTYPE_NAME}}_stateDoctypeName(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this.state=je.AFTER_DOCTYPE_NAME;break}case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.name+=Dr;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.name+=String.fromCodePoint(Is(r)?oo(r):r)}}_stateAfterDoctypeName(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(yn.PUBLIC,!1)?this.state=je.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(yn.SYSTEM,!1)?this.state=je.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ut.invalidCharacterSequenceAfterDoctypeName),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r))}}_stateAfterDoctypePublicKeyword(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this.state=je.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Me.QUOTATION_MARK:{this._err(ut.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=je.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{this._err(ut.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=je.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Me.GREATER_THAN_SIGN:{this._err(ut.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateBeforeDoctypePublicIdentifier(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.QUOTATION_MARK:{i.publicId="",this.state=je.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{i.publicId="",this.state=je.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Me.GREATER_THAN_SIGN:{this._err(ut.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateDoctypePublicIdentifierDoubleQuoted(r){const i=this.currentToken;switch(r){case Me.QUOTATION_MARK:{this.state=je.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.publicId+=Dr;break}case Me.GREATER_THAN_SIGN:{this._err(ut.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(r)}}_stateDoctypePublicIdentifierSingleQuoted(r){const i=this.currentToken;switch(r){case Me.APOSTROPHE:{this.state=je.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.publicId+=Dr;break}case Me.GREATER_THAN_SIGN:{this._err(ut.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(r)}}_stateAfterDoctypePublicIdentifier(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this.state=je.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Me.GREATER_THAN_SIGN:{this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.QUOTATION_MARK:{this._err(ut.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{this._err(ut.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateBetweenDoctypePublicAndSystemIdentifiers(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.QUOTATION_MARK:{i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateAfterDoctypeSystemKeyword(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:{this.state=je.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Me.QUOTATION_MARK:{this._err(ut.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{this._err(ut.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Me.GREATER_THAN_SIGN:{this._err(ut.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateBeforeDoctypeSystemIdentifier(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.QUOTATION_MARK:{i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Me.APOSTROPHE:{i.systemId="",this.state=je.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Me.GREATER_THAN_SIGN:{this._err(ut.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=je.DATA,this.emitCurrentDoctype(i);break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateDoctypeSystemIdentifierDoubleQuoted(r){const i=this.currentToken;switch(r){case Me.QUOTATION_MARK:{this.state=je.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.systemId+=Dr;break}case Me.GREATER_THAN_SIGN:{this._err(ut.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(r)}}_stateDoctypeSystemIdentifierSingleQuoted(r){const i=this.currentToken;switch(r){case Me.APOSTROPHE:{this.state=je.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter),i.systemId+=Dr;break}case Me.GREATER_THAN_SIGN:{this._err(ut.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(r)}}_stateAfterDoctypeSystemIdentifier(r){const i=this.currentToken;switch(r){case Me.SPACE:case Me.LINE_FEED:case Me.TABULATION:case Me.FORM_FEED:break;case Me.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.EOF:{this._err(ut.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(ut.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=je.BOGUS_DOCTYPE,this._stateBogusDoctype(r)}}_stateBogusDoctype(r){const i=this.currentToken;switch(r){case Me.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=je.DATA;break}case Me.NULL:{this._err(ut.unexpectedNullCharacter);break}case Me.EOF:{this.emitCurrentDoctype(i),this._emitEOFToken();break}}}_stateCdataSection(r){switch(r){case Me.RIGHT_SQUARE_BRACKET:{this.state=je.CDATA_SECTION_BRACKET;break}case Me.EOF:{this._err(ut.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(r)}}_stateCdataSectionBracket(r){r===Me.RIGHT_SQUARE_BRACKET?this.state=je.CDATA_SECTION_END:(this._emitChars("]"),this.state=je.CDATA_SECTION,this._stateCdataSection(r))}_stateCdataSectionEnd(r){switch(r){case Me.GREATER_THAN_SIGN:{this.state=je.DATA;break}case Me.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=je.CDATA_SECTION,this._stateCdataSection(r)}}_stateCharacterReference(){let r=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(r<0)if(this.preprocessor.lastChunkWritten)r=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}r===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(Me.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&vw(this.preprocessor.peek(1))?je.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(r){vw(r)?this._flushCodePointConsumedAsCharacterReference(r):(r===Me.SEMICOLON&&this._err(ut.unknownNamedCharacterReference),this.state=this.returnState,this._callState(r))}}const U1=new Set([de.DD,de.DT,de.LI,de.OPTGROUP,de.OPTION,de.P,de.RB,de.RP,de.RT,de.RTC]),yw=new Set([...U1,de.CAPTION,de.COLGROUP,de.TBODY,de.TD,de.TFOOT,de.TH,de.THEAD,de.TR]),Oo=new Set([de.APPLET,de.CAPTION,de.HTML,de.MARQUEE,de.OBJECT,de.TABLE,de.TD,de.TEMPLATE,de.TH]),PA=new Set([...Oo,de.OL,de.UL]),kA=new Set([...Oo,de.BUTTON]),Sw=new Set([de.ANNOTATION_XML,de.MI,de.MN,de.MO,de.MS,de.MTEXT]),xw=new Set([de.DESC,de.FOREIGN_OBJECT,de.TITLE]),AA=new Set([de.TR,de.TEMPLATE,de.HTML]),IA=new Set([de.TBODY,de.TFOOT,de.THEAD,de.TEMPLATE,de.HTML]),NA=new Set([de.TABLE,de.TEMPLATE,de.HTML]),RA=new Set([de.TD,de.TH]);class LA{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(r,i,E){this.treeAdapter=i,this.handler=E,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=de.UNKNOWN,this.current=r}_indexOf(r){return this.items.lastIndexOf(r,this.stackTop)}_isInTemplate(){return this.currentTagId===de.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===xt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(r,i){this.stackTop++,this.items[this.stackTop]=r,this.current=r,this.tagIDs[this.stackTop]=i,this.currentTagId=i,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(r,i,!0)}pop(){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,!0)}replace(r,i){const E=this._indexOf(r);this.items[E]=i,E===this.stackTop&&(this.current=i)}insertAfter(r,i,E){const R=this._indexOf(r)+1;this.items.splice(R,0,i),this.tagIDs.splice(R,0,E),this.stackTop++,R===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,R===this.stackTop)}popUntilTagNamePopped(r){let i=this.stackTop+1;do i=this.tagIDs.lastIndexOf(r,i-1);while(i>0&&this.treeAdapter.getNamespaceURI(this.items[i])!==xt.HTML);this.shortenToLength(Math.max(i,0))}shortenToLength(r){for(;this.stackTop>=r;){const i=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(i,this.stackTop<r)}}popUntilElementPopped(r){const i=this._indexOf(r);this.shortenToLength(Math.max(i,0))}popUntilPopped(r,i){const E=this._indexOfTagNames(r,i);this.shortenToLength(Math.max(E,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Jp,xt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(RA,xt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(r,i){for(let E=this.stackTop;E>=0;E--)if(r.has(this.tagIDs[E])&&this.treeAdapter.getNamespaceURI(this.items[E])===i)return E;return-1}clearBackTo(r,i){const E=this._indexOfTagNames(r,i);this.shortenToLength(E+1)}clearBackToTableContext(){this.clearBackTo(NA,xt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(IA,xt.HTML)}clearBackToTableRowContext(){this.clearBackTo(AA,xt.HTML)}remove(r){const i=this._indexOf(r);i>=0&&(i===this.stackTop?this.pop():(this.items.splice(i,1),this.tagIDs.splice(i,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===de.BODY?this.items[1]:null}contains(r){return this._indexOf(r)>-1}getCommonAncestor(r){const i=this._indexOf(r)-1;return i>=0?this.items[i]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===de.HTML}hasInDynamicScope(r,i){for(let E=this.stackTop;E>=0;E--){const R=this.tagIDs[E];switch(this.treeAdapter.getNamespaceURI(this.items[E])){case xt.HTML:{if(R===r)return!0;if(i.has(R))return!1;break}case xt.SVG:{if(xw.has(R))return!1;break}case xt.MATHML:{if(Sw.has(R))return!1;break}}}return!0}hasInScope(r){return this.hasInDynamicScope(r,Oo)}hasInListItemScope(r){return this.hasInDynamicScope(r,PA)}hasInButtonScope(r){return this.hasInDynamicScope(r,kA)}hasNumberedHeaderInScope(){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case xt.HTML:{if(Jp.has(i))return!0;if(Oo.has(i))return!1;break}case xt.SVG:{if(xw.has(i))return!1;break}case xt.MATHML:{if(Sw.has(i))return!1;break}}}return!0}hasInTableScope(r){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===xt.HTML)switch(this.tagIDs[i]){case r:return!0;case de.TABLE:case de.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===xt.HTML)switch(this.tagIDs[r]){case de.TBODY:case de.THEAD:case de.TFOOT:return!0;case de.TABLE:case de.HTML:return!1}return!0}hasInSelectScope(r){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===xt.HTML)switch(this.tagIDs[i]){case r:return!0;case de.OPTION:case de.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&U1.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&yw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(r){for(;this.currentTagId!==void 0&&this.currentTagId!==r&&yw.has(this.currentTagId);)this.pop()}}const Rp=3;var Kn;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Kn||(Kn={}));const Ew={type:Kn.Marker};class DA{constructor(r){this.treeAdapter=r,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(r,i){const E=[],R=i.length,V=this.treeAdapter.getTagName(r),te=this.treeAdapter.getNamespaceURI(r);for(let P=0;P<this.entries.length;P++){const e=this.entries[P];if(e.type===Kn.Marker)break;const{element:U}=e;if(this.treeAdapter.getTagName(U)===V&&this.treeAdapter.getNamespaceURI(U)===te){const C=this.treeAdapter.getAttrList(U);C.length===R&&E.push({idx:P,attrs:C})}}return E}_ensureNoahArkCondition(r){if(this.entries.length<Rp)return;const i=this.treeAdapter.getAttrList(r),E=this._getNoahArkConditionCandidates(r,i);if(E.length<Rp)return;const R=new Map(i.map(te=>[te.name,te.value]));let V=0;for(let te=0;te<E.length;te++){const P=E[te];P.attrs.every(e=>R.get(e.name)===e.value)&&(V+=1,V>=Rp&&this.entries.splice(P.idx,1))}}insertMarker(){this.entries.unshift(Ew)}pushElement(r,i){this._ensureNoahArkCondition(r),this.entries.unshift({type:Kn.Element,element:r,token:i})}insertElementAfterBookmark(r,i){const E=this.entries.indexOf(this.bookmark);this.entries.splice(E,0,{type:Kn.Element,element:r,token:i})}removeEntry(r){const i=this.entries.indexOf(r);i!==-1&&this.entries.splice(i,1)}clearToLastMarker(){const r=this.entries.indexOf(Ew);r===-1?this.entries.length=0:this.entries.splice(0,r+1)}getElementEntryInScopeWithTagName(r){const i=this.entries.find(E=>E.type===Kn.Marker||this.treeAdapter.getTagName(E.element)===r);return i&&i.type===Kn.Element?i:null}getElementEntry(r){return this.entries.find(i=>i.type===Kn.Element&&i.element===r)}}const oi={createDocument(){return{nodeName:"#document",mode:Rn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,r,i){return{nodeName:t,tagName:t,attrs:i,namespaceURI:r,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,r){t.childNodes.push(r),r.parentNode=t},insertBefore(t,r,i){const E=t.childNodes.indexOf(i);t.childNodes.splice(E,0,r),r.parentNode=t},setTemplateContent(t,r){t.content=r},getTemplateContent(t){return t.content},setDocumentType(t,r,i,E){const R=t.childNodes.find(V=>V.nodeName==="#documentType");if(R)R.name=r,R.publicId=i,R.systemId=E;else{const V={nodeName:"#documentType",name:r,publicId:i,systemId:E,parentNode:null};oi.appendChild(t,V)}},setDocumentMode(t,r){t.mode=r},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const r=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(r,1),t.parentNode=null}},insertText(t,r){if(t.childNodes.length>0){const i=t.childNodes[t.childNodes.length-1];if(oi.isTextNode(i)){i.value+=r;return}}oi.appendChild(t,oi.createTextNode(r))},insertTextBefore(t,r,i){const E=t.childNodes[t.childNodes.indexOf(i)-1];E&&oi.isTextNode(E)?E.value+=r:oi.insertBefore(t,oi.createTextNode(r),i)},adoptAttributes(t,r){const i=new Set(t.attrs.map(E=>E.name));for(let E=0;E<r.length;E++)i.has(r[E].name)||t.attrs.push(r[E])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,r){t.sourceCodeLocation=r},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,r){t.sourceCodeLocation={...t.sourceCodeLocation,...r}}},q1="html",MA="about:legacy-compat",FA="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",$1=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],BA=[...$1,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],jA=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),W1=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],HA=[...W1,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Ow(t,r){return r.some(i=>t.startsWith(i))}function UA(t){return t.name===q1&&t.publicId===null&&(t.systemId===null||t.systemId===MA)}function qA(t){if(t.name!==q1)return Rn.QUIRKS;const{systemId:r}=t;if(r&&r.toLowerCase()===FA)return Rn.QUIRKS;let{publicId:i}=t;if(i!==null){if(i=i.toLowerCase(),jA.has(i))return Rn.QUIRKS;let E=r===null?BA:$1;if(Ow(i,E))return Rn.QUIRKS;if(E=r===null?W1:HA,Ow(i,E))return Rn.LIMITED_QUIRKS}return Rn.NO_QUIRKS}const Tw={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},$A="definitionurl",WA="definitionURL",zA=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),VA=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:xt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:xt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:xt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:xt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:xt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:xt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:xt.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:xt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:xt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:xt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:xt.XMLNS}]]),KA=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),GA=new Set([de.B,de.BIG,de.BLOCKQUOTE,de.BODY,de.BR,de.CENTER,de.CODE,de.DD,de.DIV,de.DL,de.DT,de.EM,de.EMBED,de.H1,de.H2,de.H3,de.H4,de.H5,de.H6,de.HEAD,de.HR,de.I,de.IMG,de.LI,de.LISTING,de.MENU,de.META,de.NOBR,de.OL,de.P,de.PRE,de.RUBY,de.S,de.SMALL,de.SPAN,de.STRONG,de.STRIKE,de.SUB,de.SUP,de.TABLE,de.TT,de.U,de.UL,de.VAR]);function JA(t){const r=t.tagID;return r===de.FONT&&t.attrs.some(({name:E})=>E===$i.COLOR||E===$i.SIZE||E===$i.FACE)||GA.has(r)}function z1(t){for(let r=0;r<t.attrs.length;r++)if(t.attrs[r].name===$A){t.attrs[r].name=WA;break}}function V1(t){for(let r=0;r<t.attrs.length;r++){const i=zA.get(t.attrs[r].name);i!=null&&(t.attrs[r].name=i)}}function qf(t){for(let r=0;r<t.attrs.length;r++){const i=VA.get(t.attrs[r].name);i&&(t.attrs[r].prefix=i.prefix,t.attrs[r].name=i.name,t.attrs[r].namespace=i.namespace)}}function YA(t){const r=KA.get(t.tagName);r!=null&&(t.tagName=r,t.tagID=Qo(t.tagName))}function XA(t,r){return r===xt.MATHML&&(t===de.MI||t===de.MO||t===de.MN||t===de.MS||t===de.MTEXT)}function QA(t,r,i){if(r===xt.MATHML&&t===de.ANNOTATION_XML){for(let E=0;E<i.length;E++)if(i[E].name===$i.ENCODING){const R=i[E].value.toLowerCase();return R===Tw.TEXT_HTML||R===Tw.APPLICATION_XML}}return r===xt.SVG&&(t===de.FOREIGN_OBJECT||t===de.DESC||t===de.TITLE)}function ZA(t,r,i,E){return(!E||E===xt.HTML)&&QA(t,r,i)||(!E||E===xt.MATHML)&&XA(t,r)}const eI="hidden",tI=8,rI=3;var We;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(We||(We={}));const nI={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},K1=new Set([de.TABLE,de.TBODY,de.TFOOT,de.THEAD,de.TR]),Cw={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:oi,onParseError:null};class G1{constructor(r,i,E=null,R=null){this.fragmentContext=E,this.scriptHandler=R,this.currentToken=null,this.stopped=!1,this.insertionMode=We.INITIAL,this.originalInsertionMode=We.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Cw,...r},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=i??this.treeAdapter.createDocument(),this.tokenizer=new CA(this.options,this),this.activeFormattingElements=new DA(this.treeAdapter),this.fragmentContextID=E?Qo(this.treeAdapter.getTagName(E)):de.UNKNOWN,this._setContextModes(E??this.document,this.fragmentContextID),this.openElements=new LA(this.document,this.treeAdapter,this)}static parse(r,i){const E=new this(i);return E.tokenizer.write(r,!0),E.document}static getFragmentParser(r,i){const E={...Cw,...i};r??(r=E.treeAdapter.createElement(rt.TEMPLATE,xt.HTML,[]));const R=E.treeAdapter.createElement("documentmock",xt.HTML,[]),V=new this(E,R,r);return V.fragmentContextID===de.TEMPLATE&&V.tmplInsertionModeStack.unshift(We.IN_TEMPLATE),V._initTokenizerForFragmentParsing(),V._insertFakeRootElement(),V._resetInsertionMode(),V._findFormInFragmentContext(),V}getFragment(){const r=this.treeAdapter.getFirstChild(this.document),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}_err(r,i,E){var R;if(!this.onParseError)return;const V=(R=r.location)!==null&&R!==void 0?R:nI,te={code:i,startLine:V.startLine,startCol:V.startCol,startOffset:V.startOffset,endLine:E?V.startLine:V.endLine,endCol:E?V.startCol:V.endCol,endOffset:E?V.startOffset:V.endOffset};this.onParseError(te)}onItemPush(r,i,E){var R,V;(V=(R=this.treeAdapter).onItemPush)===null||V===void 0||V.call(R,r),E&&this.openElements.stackTop>0&&this._setContextModes(r,i)}onItemPop(r,i){var E,R;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(r,this.currentToken),(R=(E=this.treeAdapter).onItemPop)===null||R===void 0||R.call(E,r,this.openElements.current),i){let V,te;this.openElements.stackTop===0&&this.fragmentContext?(V=this.fragmentContext,te=this.fragmentContextID):{current:V,currentTagId:te}=this.openElements,this._setContextModes(V,te)}}_setContextModes(r,i){const E=r===this.document||r&&this.treeAdapter.getNamespaceURI(r)===xt.HTML;this.currentNotInHTML=!E,this.tokenizer.inForeignNode=!E&&r!==void 0&&i!==void 0&&!this._isIntegrationPoint(i,r)}_switchToTextParsing(r,i){this._insertElement(r,xt.HTML),this.tokenizer.state=i,this.originalInsertionMode=this.insertionMode,this.insertionMode=We.TEXT}switchToPlaintextParsing(){this.insertionMode=We.TEXT,this.originalInsertionMode=We.IN_BODY,this.tokenizer.state=xn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let r=this.fragmentContext;for(;r;){if(this.treeAdapter.getTagName(r)===rt.FORM){this.formElement=r;break}r=this.treeAdapter.getParentNode(r)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==xt.HTML))switch(this.fragmentContextID){case de.TITLE:case de.TEXTAREA:{this.tokenizer.state=xn.RCDATA;break}case de.STYLE:case de.XMP:case de.IFRAME:case de.NOEMBED:case de.NOFRAMES:case de.NOSCRIPT:{this.tokenizer.state=xn.RAWTEXT;break}case de.SCRIPT:{this.tokenizer.state=xn.SCRIPT_DATA;break}case de.PLAINTEXT:{this.tokenizer.state=xn.PLAINTEXT;break}}}_setDocumentType(r){const i=r.name||"",E=r.publicId||"",R=r.systemId||"";if(this.treeAdapter.setDocumentType(this.document,i,E,R),r.location){const te=this.treeAdapter.getChildNodes(this.document).find(P=>this.treeAdapter.isDocumentTypeNode(P));te&&this.treeAdapter.setNodeSourceCodeLocation(te,r.location)}}_attachElementToTree(r,i){if(this.options.sourceCodeLocationInfo){const E=i&&{...i,startTag:i};this.treeAdapter.setNodeSourceCodeLocation(r,E)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(r);else{const E=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(E??this.document,r)}}_appendElement(r,i){const E=this.treeAdapter.createElement(r.tagName,i,r.attrs);this._attachElementToTree(E,r.location)}_insertElement(r,i){const E=this.treeAdapter.createElement(r.tagName,i,r.attrs);this._attachElementToTree(E,r.location),this.openElements.push(E,r.tagID)}_insertFakeElement(r,i){const E=this.treeAdapter.createElement(r,xt.HTML,[]);this._attachElementToTree(E,null),this.openElements.push(E,i)}_insertTemplate(r){const i=this.treeAdapter.createElement(r.tagName,xt.HTML,r.attrs),E=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(i,E),this._attachElementToTree(i,r.location),this.openElements.push(i,r.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(E,null)}_insertFakeRootElement(){const r=this.treeAdapter.createElement(rt.HTML,xt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null),this.treeAdapter.appendChild(this.openElements.current,r),this.openElements.push(r,de.HTML)}_appendCommentNode(r,i){const E=this.treeAdapter.createCommentNode(r.data);this.treeAdapter.appendChild(i,E),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(E,r.location)}_insertCharacters(r){let i,E;if(this._shouldFosterParentOnInsertion()?({parent:i,beforeElement:E}=this._findFosterParentingLocation(),E?this.treeAdapter.insertTextBefore(i,r.chars,E):this.treeAdapter.insertText(i,r.chars)):(i=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(i,r.chars)),!r.location)return;const R=this.treeAdapter.getChildNodes(i),V=E?R.lastIndexOf(E):R.length,te=R[V-1];if(this.treeAdapter.getNodeSourceCodeLocation(te)){const{endLine:e,endCol:U,endOffset:C}=r.location;this.treeAdapter.updateNodeSourceCodeLocation(te,{endLine:e,endCol:U,endOffset:C})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(te,r.location)}_adoptNodes(r,i){for(let E=this.treeAdapter.getFirstChild(r);E;E=this.treeAdapter.getFirstChild(r))this.treeAdapter.detachNode(E),this.treeAdapter.appendChild(i,E)}_setEndLocation(r,i){if(this.treeAdapter.getNodeSourceCodeLocation(r)&&i.location){const E=i.location,R=this.treeAdapter.getTagName(r),V=i.type===Er.END_TAG&&R===i.tagName?{endTag:{...E},endLine:E.endLine,endCol:E.endCol,endOffset:E.endOffset}:{endLine:E.startLine,endCol:E.startCol,endOffset:E.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(r,V)}}shouldProcessStartTagTokenInForeignContent(r){if(!this.currentNotInHTML)return!1;let i,E;return this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,E=this.fragmentContextID):{current:i,currentTagId:E}=this.openElements,r.tagID===de.SVG&&this.treeAdapter.getTagName(i)===rt.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(i)===xt.MATHML?!1:this.tokenizer.inForeignNode||(r.tagID===de.MGLYPH||r.tagID===de.MALIGNMARK)&&E!==void 0&&!this._isIntegrationPoint(E,i,xt.HTML)}_processToken(r){switch(r.type){case Er.CHARACTER:{this.onCharacter(r);break}case Er.NULL_CHARACTER:{this.onNullCharacter(r);break}case Er.COMMENT:{this.onComment(r);break}case Er.DOCTYPE:{this.onDoctype(r);break}case Er.START_TAG:{this._processStartTag(r);break}case Er.END_TAG:{this.onEndTag(r);break}case Er.EOF:{this.onEof(r);break}case Er.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(r);break}}}_isIntegrationPoint(r,i,E){const R=this.treeAdapter.getNamespaceURI(i),V=this.treeAdapter.getAttrList(i);return ZA(r,R,V,E)}_reconstructActiveFormattingElements(){const r=this.activeFormattingElements.entries.length;if(r){const i=this.activeFormattingElements.entries.findIndex(R=>R.type===Kn.Marker||this.openElements.contains(R.element)),E=i===-1?r-1:i-1;for(let R=E;R>=0;R--){const V=this.activeFormattingElements.entries[R];this._insertElement(V.token,this.treeAdapter.getNamespaceURI(V.element)),V.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=We.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(de.P),this.openElements.popUntilTagNamePopped(de.P)}_resetInsertionMode(){for(let r=this.openElements.stackTop;r>=0;r--)switch(r===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[r]){case de.TR:{this.insertionMode=We.IN_ROW;return}case de.TBODY:case de.THEAD:case de.TFOOT:{this.insertionMode=We.IN_TABLE_BODY;return}case de.CAPTION:{this.insertionMode=We.IN_CAPTION;return}case de.COLGROUP:{this.insertionMode=We.IN_COLUMN_GROUP;return}case de.TABLE:{this.insertionMode=We.IN_TABLE;return}case de.BODY:{this.insertionMode=We.IN_BODY;return}case de.FRAMESET:{this.insertionMode=We.IN_FRAMESET;return}case de.SELECT:{this._resetInsertionModeForSelect(r);return}case de.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case de.HTML:{this.insertionMode=this.headElement?We.AFTER_HEAD:We.BEFORE_HEAD;return}case de.TD:case de.TH:{if(r>0){this.insertionMode=We.IN_CELL;return}break}case de.HEAD:{if(r>0){this.insertionMode=We.IN_HEAD;return}break}}this.insertionMode=We.IN_BODY}_resetInsertionModeForSelect(r){if(r>0)for(let i=r-1;i>0;i--){const E=this.openElements.tagIDs[i];if(E===de.TEMPLATE)break;if(E===de.TABLE){this.insertionMode=We.IN_SELECT_IN_TABLE;return}}this.insertionMode=We.IN_SELECT}_isElementCausesFosterParenting(r){return K1.has(r)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let r=this.openElements.stackTop;r>=0;r--){const i=this.openElements.items[r];switch(this.openElements.tagIDs[r]){case de.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(i)===xt.HTML)return{parent:this.treeAdapter.getTemplateContent(i),beforeElement:null};break}case de.TABLE:{const E=this.treeAdapter.getParentNode(i);return E?{parent:E,beforeElement:i}:{parent:this.openElements.items[r-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(r){const i=this._findFosterParentingLocation();i.beforeElement?this.treeAdapter.insertBefore(i.parent,r,i.beforeElement):this.treeAdapter.appendChild(i.parent,r)}_isSpecialElement(r,i){const E=this.treeAdapter.getNamespaceURI(r);return yA[E].has(i)}onCharacter(r){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){RN(this,r);return}switch(this.insertionMode){case We.INITIAL:{ks(this,r);break}case We.BEFORE_HTML:{Ls(this,r);break}case We.BEFORE_HEAD:{Ds(this,r);break}case We.IN_HEAD:{Ms(this,r);break}case We.IN_HEAD_NO_SCRIPT:{Fs(this,r);break}case We.AFTER_HEAD:{Bs(this,r);break}case We.IN_BODY:case We.IN_CAPTION:case We.IN_CELL:case We.IN_TEMPLATE:{Y1(this,r);break}case We.TEXT:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:{this._insertCharacters(r);break}case We.IN_TABLE:case We.IN_TABLE_BODY:case We.IN_ROW:{Lp(this,r);break}case We.IN_TABLE_TEXT:{rS(this,r);break}case We.IN_COLUMN_GROUP:{To(this,r);break}case We.AFTER_BODY:{Co(this,r);break}case We.AFTER_AFTER_BODY:{uo(this,r);break}}}onNullCharacter(r){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){NN(this,r);return}switch(this.insertionMode){case We.INITIAL:{ks(this,r);break}case We.BEFORE_HTML:{Ls(this,r);break}case We.BEFORE_HEAD:{Ds(this,r);break}case We.IN_HEAD:{Ms(this,r);break}case We.IN_HEAD_NO_SCRIPT:{Fs(this,r);break}case We.AFTER_HEAD:{Bs(this,r);break}case We.TEXT:{this._insertCharacters(r);break}case We.IN_TABLE:case We.IN_TABLE_BODY:case We.IN_ROW:{Lp(this,r);break}case We.IN_COLUMN_GROUP:{To(this,r);break}case We.AFTER_BODY:{Co(this,r);break}case We.AFTER_AFTER_BODY:{uo(this,r);break}}}onComment(r){if(this.skipNextNewLine=!1,this.currentNotInHTML){Yp(this,r);return}switch(this.insertionMode){case We.INITIAL:case We.BEFORE_HTML:case We.BEFORE_HEAD:case We.IN_HEAD:case We.IN_HEAD_NO_SCRIPT:case We.AFTER_HEAD:case We.IN_BODY:case We.IN_TABLE:case We.IN_CAPTION:case We.IN_COLUMN_GROUP:case We.IN_TABLE_BODY:case We.IN_ROW:case We.IN_CELL:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:case We.IN_TEMPLATE:case We.IN_FRAMESET:case We.AFTER_FRAMESET:{Yp(this,r);break}case We.IN_TABLE_TEXT:{As(this,r);break}case We.AFTER_BODY:{uI(this,r);break}case We.AFTER_AFTER_BODY:case We.AFTER_AFTER_FRAMESET:{dI(this,r);break}}}onDoctype(r){switch(this.skipNextNewLine=!1,this.insertionMode){case We.INITIAL:{hI(this,r);break}case We.BEFORE_HEAD:case We.IN_HEAD:case We.IN_HEAD_NO_SCRIPT:case We.AFTER_HEAD:{this._err(r,ut.misplacedDoctype);break}case We.IN_TABLE_TEXT:{As(this,r);break}}}onStartTag(r){this.skipNextNewLine=!1,this.currentToken=r,this._processStartTag(r),r.selfClosing&&!r.ackSelfClosing&&this._err(r,ut.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(r){this.shouldProcessStartTagTokenInForeignContent(r)?LN(this,r):this._startTagOutsideForeignContent(r)}_startTagOutsideForeignContent(r){switch(this.insertionMode){case We.INITIAL:{ks(this,r);break}case We.BEFORE_HTML:{pI(this,r);break}case We.BEFORE_HEAD:{mI(this,r);break}case We.IN_HEAD:{zn(this,r);break}case We.IN_HEAD_NO_SCRIPT:{bI(this,r);break}case We.AFTER_HEAD:{wI(this,r);break}case We.IN_BODY:{mn(this,r);break}case We.IN_TABLE:{ls(this,r);break}case We.IN_TABLE_TEXT:{As(this,r);break}case We.IN_CAPTION:{gN(this,r);break}case We.IN_COLUMN_GROUP:{zf(this,r);break}case We.IN_TABLE_BODY:{tc(this,r);break}case We.IN_ROW:{rc(this,r);break}case We.IN_CELL:{vN(this,r);break}case We.IN_SELECT:{sS(this,r);break}case We.IN_SELECT_IN_TABLE:{yN(this,r);break}case We.IN_TEMPLATE:{xN(this,r);break}case We.AFTER_BODY:{ON(this,r);break}case We.IN_FRAMESET:{TN(this,r);break}case We.AFTER_FRAMESET:{PN(this,r);break}case We.AFTER_AFTER_BODY:{AN(this,r);break}case We.AFTER_AFTER_FRAMESET:{IN(this,r);break}}}onEndTag(r){this.skipNextNewLine=!1,this.currentToken=r,this.currentNotInHTML?DN(this,r):this._endTagOutsideForeignContent(r)}_endTagOutsideForeignContent(r){switch(this.insertionMode){case We.INITIAL:{ks(this,r);break}case We.BEFORE_HTML:{fI(this,r);break}case We.BEFORE_HEAD:{gI(this,r);break}case We.IN_HEAD:{_I(this,r);break}case We.IN_HEAD_NO_SCRIPT:{vI(this,r);break}case We.AFTER_HEAD:{yI(this,r);break}case We.IN_BODY:{ec(this,r);break}case We.TEXT:{aN(this,r);break}case We.IN_TABLE:{Ws(this,r);break}case We.IN_TABLE_TEXT:{As(this,r);break}case We.IN_CAPTION:{_N(this,r);break}case We.IN_COLUMN_GROUP:{bN(this,r);break}case We.IN_TABLE_BODY:{Xp(this,r);break}case We.IN_ROW:{iS(this,r);break}case We.IN_CELL:{wN(this,r);break}case We.IN_SELECT:{aS(this,r);break}case We.IN_SELECT_IN_TABLE:{SN(this,r);break}case We.IN_TEMPLATE:{EN(this,r);break}case We.AFTER_BODY:{cS(this,r);break}case We.IN_FRAMESET:{CN(this,r);break}case We.AFTER_FRAMESET:{kN(this,r);break}case We.AFTER_AFTER_BODY:{uo(this,r);break}}}onEof(r){switch(this.insertionMode){case We.INITIAL:{ks(this,r);break}case We.BEFORE_HTML:{Ls(this,r);break}case We.BEFORE_HEAD:{Ds(this,r);break}case We.IN_HEAD:{Ms(this,r);break}case We.IN_HEAD_NO_SCRIPT:{Fs(this,r);break}case We.AFTER_HEAD:{Bs(this,r);break}case We.IN_BODY:case We.IN_TABLE:case We.IN_CAPTION:case We.IN_COLUMN_GROUP:case We.IN_TABLE_BODY:case We.IN_ROW:case We.IN_CELL:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:{eS(this,r);break}case We.TEXT:{oN(this,r);break}case We.IN_TABLE_TEXT:{As(this,r);break}case We.IN_TEMPLATE:{oS(this,r);break}case We.AFTER_BODY:case We.IN_FRAMESET:case We.AFTER_FRAMESET:case We.AFTER_AFTER_BODY:case We.AFTER_AFTER_FRAMESET:{Wf(this,r);break}}}onWhitespaceCharacter(r){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,r.chars.charCodeAt(0)===Me.LINE_FEED)){if(r.chars.length===1)return;r.chars=r.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(r);return}switch(this.insertionMode){case We.IN_HEAD:case We.IN_HEAD_NO_SCRIPT:case We.AFTER_HEAD:case We.TEXT:case We.IN_COLUMN_GROUP:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:case We.IN_FRAMESET:case We.AFTER_FRAMESET:{this._insertCharacters(r);break}case We.IN_BODY:case We.IN_CAPTION:case We.IN_CELL:case We.IN_TEMPLATE:case We.AFTER_BODY:case We.AFTER_AFTER_BODY:case We.AFTER_AFTER_FRAMESET:{J1(this,r);break}case We.IN_TABLE:case We.IN_TABLE_BODY:case We.IN_ROW:{Lp(this,r);break}case We.IN_TABLE_TEXT:{tS(this,r);break}}}}function iI(t,r){let i=t.activeFormattingElements.getElementEntryInScopeWithTagName(r.tagName);return i?t.openElements.contains(i.element)?t.openElements.hasInScope(r.tagID)||(i=null):(t.activeFormattingElements.removeEntry(i),i=null):Z1(t,r),i}function sI(t,r){let i=null,E=t.openElements.stackTop;for(;E>=0;E--){const R=t.openElements.items[E];if(R===r.element)break;t._isSpecialElement(R,t.openElements.tagIDs[E])&&(i=R)}return i||(t.openElements.shortenToLength(Math.max(E,0)),t.activeFormattingElements.removeEntry(r)),i}function aI(t,r,i){let E=r,R=t.openElements.getCommonAncestor(r);for(let V=0,te=R;te!==i;V++,te=R){R=t.openElements.getCommonAncestor(te);const P=t.activeFormattingElements.getElementEntry(te),e=P&&V>=rI;!P||e?(e&&t.activeFormattingElements.removeEntry(P),t.openElements.remove(te)):(te=oI(t,P),E===r&&(t.activeFormattingElements.bookmark=P),t.treeAdapter.detachNode(E),t.treeAdapter.appendChild(te,E),E=te)}return E}function oI(t,r){const i=t.treeAdapter.getNamespaceURI(r.element),E=t.treeAdapter.createElement(r.token.tagName,i,r.token.attrs);return t.openElements.replace(r.element,E),r.element=E,E}function cI(t,r,i){const E=t.treeAdapter.getTagName(r),R=Qo(E);if(t._isElementCausesFosterParenting(R))t._fosterParentElement(i);else{const V=t.treeAdapter.getNamespaceURI(r);R===de.TEMPLATE&&V===xt.HTML&&(r=t.treeAdapter.getTemplateContent(r)),t.treeAdapter.appendChild(r,i)}}function lI(t,r,i){const E=t.treeAdapter.getNamespaceURI(i.element),{token:R}=i,V=t.treeAdapter.createElement(R.tagName,E,R.attrs);t._adoptNodes(r,V),t.treeAdapter.appendChild(r,V),t.activeFormattingElements.insertElementAfterBookmark(V,R),t.activeFormattingElements.removeEntry(i),t.openElements.remove(i.element),t.openElements.insertAfter(r,V,R.tagID)}function $f(t,r){for(let i=0;i<tI;i++){const E=iI(t,r);if(!E)break;const R=sI(t,E);if(!R)break;t.activeFormattingElements.bookmark=E;const V=aI(t,R,E.element),te=t.openElements.getCommonAncestor(E.element);t.treeAdapter.detachNode(V),te&&cI(t,te,V),lI(t,R,E)}}function Yp(t,r){t._appendCommentNode(r,t.openElements.currentTmplContentOrNode)}function uI(t,r){t._appendCommentNode(r,t.openElements.items[0])}function dI(t,r){t._appendCommentNode(r,t.document)}function Wf(t,r){if(t.stopped=!0,r.location){const i=t.fragmentContext?0:2;for(let E=t.openElements.stackTop;E>=i;E--)t._setEndLocation(t.openElements.items[E],r);if(!t.fragmentContext&&t.openElements.stackTop>=0){const E=t.openElements.items[0],R=t.treeAdapter.getNodeSourceCodeLocation(E);if(R&&!R.endTag&&(t._setEndLocation(E,r),t.openElements.stackTop>=1)){const V=t.openElements.items[1],te=t.treeAdapter.getNodeSourceCodeLocation(V);te&&!te.endTag&&t._setEndLocation(V,r)}}}}function hI(t,r){t._setDocumentType(r);const i=r.forceQuirks?Rn.QUIRKS:qA(r);UA(r)||t._err(r,ut.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,i),t.insertionMode=We.BEFORE_HTML}function ks(t,r){t._err(r,ut.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Rn.QUIRKS),t.insertionMode=We.BEFORE_HTML,t._processToken(r)}function pI(t,r){r.tagID===de.HTML?(t._insertElement(r,xt.HTML),t.insertionMode=We.BEFORE_HEAD):Ls(t,r)}function fI(t,r){const i=r.tagID;(i===de.HTML||i===de.HEAD||i===de.BODY||i===de.BR)&&Ls(t,r)}function Ls(t,r){t._insertFakeRootElement(),t.insertionMode=We.BEFORE_HEAD,t._processToken(r)}function mI(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.HEAD:{t._insertElement(r,xt.HTML),t.headElement=t.openElements.current,t.insertionMode=We.IN_HEAD;break}default:Ds(t,r)}}function gI(t,r){const i=r.tagID;i===de.HEAD||i===de.BODY||i===de.HTML||i===de.BR?Ds(t,r):t._err(r,ut.endTagWithoutMatchingOpenElement)}function Ds(t,r){t._insertFakeElement(rt.HEAD,de.HEAD),t.headElement=t.openElements.current,t.insertionMode=We.IN_HEAD,t._processToken(r)}function zn(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.BASE:case de.BASEFONT:case de.BGSOUND:case de.LINK:case de.META:{t._appendElement(r,xt.HTML),r.ackSelfClosing=!0;break}case de.TITLE:{t._switchToTextParsing(r,xn.RCDATA);break}case de.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(r,xn.RAWTEXT):(t._insertElement(r,xt.HTML),t.insertionMode=We.IN_HEAD_NO_SCRIPT);break}case de.NOFRAMES:case de.STYLE:{t._switchToTextParsing(r,xn.RAWTEXT);break}case de.SCRIPT:{t._switchToTextParsing(r,xn.SCRIPT_DATA);break}case de.TEMPLATE:{t._insertTemplate(r),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=We.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(We.IN_TEMPLATE);break}case de.HEAD:{t._err(r,ut.misplacedStartTagForHeadElement);break}default:Ms(t,r)}}function _I(t,r){switch(r.tagID){case de.HEAD:{t.openElements.pop(),t.insertionMode=We.AFTER_HEAD;break}case de.BODY:case de.BR:case de.HTML:{Ms(t,r);break}case de.TEMPLATE:{es(t,r);break}default:t._err(r,ut.endTagWithoutMatchingOpenElement)}}function es(t,r){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==de.TEMPLATE&&t._err(r,ut.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(de.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(r,ut.endTagWithoutMatchingOpenElement)}function Ms(t,r){t.openElements.pop(),t.insertionMode=We.AFTER_HEAD,t._processToken(r)}function bI(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.BASEFONT:case de.BGSOUND:case de.HEAD:case de.LINK:case de.META:case de.NOFRAMES:case de.STYLE:{zn(t,r);break}case de.NOSCRIPT:{t._err(r,ut.nestedNoscriptInHead);break}default:Fs(t,r)}}function vI(t,r){switch(r.tagID){case de.NOSCRIPT:{t.openElements.pop(),t.insertionMode=We.IN_HEAD;break}case de.BR:{Fs(t,r);break}default:t._err(r,ut.endTagWithoutMatchingOpenElement)}}function Fs(t,r){const i=r.type===Er.EOF?ut.openElementsLeftAfterEof:ut.disallowedContentInNoscriptInHead;t._err(r,i),t.openElements.pop(),t.insertionMode=We.IN_HEAD,t._processToken(r)}function wI(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.BODY:{t._insertElement(r,xt.HTML),t.framesetOk=!1,t.insertionMode=We.IN_BODY;break}case de.FRAMESET:{t._insertElement(r,xt.HTML),t.insertionMode=We.IN_FRAMESET;break}case de.BASE:case de.BASEFONT:case de.BGSOUND:case de.LINK:case de.META:case de.NOFRAMES:case de.SCRIPT:case de.STYLE:case de.TEMPLATE:case de.TITLE:{t._err(r,ut.abandonedHeadElementChild),t.openElements.push(t.headElement,de.HEAD),zn(t,r),t.openElements.remove(t.headElement);break}case de.HEAD:{t._err(r,ut.misplacedStartTagForHeadElement);break}default:Bs(t,r)}}function yI(t,r){switch(r.tagID){case de.BODY:case de.HTML:case de.BR:{Bs(t,r);break}case de.TEMPLATE:{es(t,r);break}default:t._err(r,ut.endTagWithoutMatchingOpenElement)}}function Bs(t,r){t._insertFakeElement(rt.BODY,de.BODY),t.insertionMode=We.IN_BODY,Zo(t,r)}function Zo(t,r){switch(r.type){case Er.CHARACTER:{Y1(t,r);break}case Er.WHITESPACE_CHARACTER:{J1(t,r);break}case Er.COMMENT:{Yp(t,r);break}case Er.START_TAG:{mn(t,r);break}case Er.END_TAG:{ec(t,r);break}case Er.EOF:{eS(t,r);break}}}function J1(t,r){t._reconstructActiveFormattingElements(),t._insertCharacters(r)}function Y1(t,r){t._reconstructActiveFormattingElements(),t._insertCharacters(r),t.framesetOk=!1}function SI(t,r){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],r.attrs)}function xI(t,r){const i=t.openElements.tryPeekProperlyNestedBodyElement();i&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(i,r.attrs))}function EI(t,r){const i=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&i&&(t.treeAdapter.detachNode(i),t.openElements.popAllUpToHtmlElement(),t._insertElement(r,xt.HTML),t.insertionMode=We.IN_FRAMESET)}function OI(t,r){t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._insertElement(r,xt.HTML)}function TI(t,r){t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&Jp.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(r,xt.HTML)}function CI(t,r){t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._insertElement(r,xt.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function PI(t,r){const i=t.openElements.tmplCount>0;(!t.formElement||i)&&(t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._insertElement(r,xt.HTML),i||(t.formElement=t.openElements.current))}function kI(t,r){t.framesetOk=!1;const i=r.tagID;for(let E=t.openElements.stackTop;E>=0;E--){const R=t.openElements.tagIDs[E];if(i===de.LI&&R===de.LI||(i===de.DD||i===de.DT)&&(R===de.DD||R===de.DT)){t.openElements.generateImpliedEndTagsWithExclusion(R),t.openElements.popUntilTagNamePopped(R);break}if(R!==de.ADDRESS&&R!==de.DIV&&R!==de.P&&t._isSpecialElement(t.openElements.items[E],R))break}t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._insertElement(r,xt.HTML)}function AI(t,r){t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._insertElement(r,xt.HTML),t.tokenizer.state=xn.PLAINTEXT}function II(t,r){t.openElements.hasInScope(de.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(de.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML),t.framesetOk=!1}function NI(t,r){const i=t.activeFormattingElements.getElementEntryInScopeWithTagName(rt.A);i&&($f(t,r),t.openElements.remove(i.element),t.activeFormattingElements.removeEntry(i)),t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,r)}function RI(t,r){t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,r)}function LI(t,r){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(de.NOBR)&&($f(t,r),t._reconstructActiveFormattingElements()),t._insertElement(r,xt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,r)}function DI(t,r){t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function MI(t,r){t.treeAdapter.getDocumentMode(t.document)!==Rn.QUIRKS&&t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._insertElement(r,xt.HTML),t.framesetOk=!1,t.insertionMode=We.IN_TABLE}function X1(t,r){t._reconstructActiveFormattingElements(),t._appendElement(r,xt.HTML),t.framesetOk=!1,r.ackSelfClosing=!0}function Q1(t){const r=j1(t,$i.TYPE);return r!=null&&r.toLowerCase()===eI}function FI(t,r){t._reconstructActiveFormattingElements(),t._appendElement(r,xt.HTML),Q1(r)||(t.framesetOk=!1),r.ackSelfClosing=!0}function BI(t,r){t._appendElement(r,xt.HTML),r.ackSelfClosing=!0}function jI(t,r){t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._appendElement(r,xt.HTML),t.framesetOk=!1,r.ackSelfClosing=!0}function HI(t,r){r.tagName=rt.IMG,r.tagID=de.IMG,X1(t,r)}function UI(t,r){t._insertElement(r,xt.HTML),t.skipNextNewLine=!0,t.tokenizer.state=xn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=We.TEXT}function qI(t,r){t.openElements.hasInButtonScope(de.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(r,xn.RAWTEXT)}function $I(t,r){t.framesetOk=!1,t._switchToTextParsing(r,xn.RAWTEXT)}function Pw(t,r){t._switchToTextParsing(r,xn.RAWTEXT)}function WI(t,r){t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===We.IN_TABLE||t.insertionMode===We.IN_CAPTION||t.insertionMode===We.IN_TABLE_BODY||t.insertionMode===We.IN_ROW||t.insertionMode===We.IN_CELL?We.IN_SELECT_IN_TABLE:We.IN_SELECT}function zI(t,r){t.openElements.currentTagId===de.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML)}function VI(t,r){t.openElements.hasInScope(de.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(r,xt.HTML)}function KI(t,r){t.openElements.hasInScope(de.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(de.RTC),t._insertElement(r,xt.HTML)}function GI(t,r){t._reconstructActiveFormattingElements(),z1(r),qf(r),r.selfClosing?t._appendElement(r,xt.MATHML):t._insertElement(r,xt.MATHML),r.ackSelfClosing=!0}function JI(t,r){t._reconstructActiveFormattingElements(),V1(r),qf(r),r.selfClosing?t._appendElement(r,xt.SVG):t._insertElement(r,xt.SVG),r.ackSelfClosing=!0}function kw(t,r){t._reconstructActiveFormattingElements(),t._insertElement(r,xt.HTML)}function mn(t,r){switch(r.tagID){case de.I:case de.S:case de.B:case de.U:case de.EM:case de.TT:case de.BIG:case de.CODE:case de.FONT:case de.SMALL:case de.STRIKE:case de.STRONG:{RI(t,r);break}case de.A:{NI(t,r);break}case de.H1:case de.H2:case de.H3:case de.H4:case de.H5:case de.H6:{TI(t,r);break}case de.P:case de.DL:case de.OL:case de.UL:case de.DIV:case de.DIR:case de.NAV:case de.MAIN:case de.MENU:case de.ASIDE:case de.CENTER:case de.FIGURE:case de.FOOTER:case de.HEADER:case de.HGROUP:case de.DIALOG:case de.DETAILS:case de.ADDRESS:case de.ARTICLE:case de.SEARCH:case de.SECTION:case de.SUMMARY:case de.FIELDSET:case de.BLOCKQUOTE:case de.FIGCAPTION:{OI(t,r);break}case de.LI:case de.DD:case de.DT:{kI(t,r);break}case de.BR:case de.IMG:case de.WBR:case de.AREA:case de.EMBED:case de.KEYGEN:{X1(t,r);break}case de.HR:{jI(t,r);break}case de.RB:case de.RTC:{VI(t,r);break}case de.RT:case de.RP:{KI(t,r);break}case de.PRE:case de.LISTING:{CI(t,r);break}case de.XMP:{qI(t,r);break}case de.SVG:{JI(t,r);break}case de.HTML:{SI(t,r);break}case de.BASE:case de.LINK:case de.META:case de.STYLE:case de.TITLE:case de.SCRIPT:case de.BGSOUND:case de.BASEFONT:case de.TEMPLATE:{zn(t,r);break}case de.BODY:{xI(t,r);break}case de.FORM:{PI(t,r);break}case de.NOBR:{LI(t,r);break}case de.MATH:{GI(t,r);break}case de.TABLE:{MI(t,r);break}case de.INPUT:{FI(t,r);break}case de.PARAM:case de.TRACK:case de.SOURCE:{BI(t,r);break}case de.IMAGE:{HI(t,r);break}case de.BUTTON:{II(t,r);break}case de.APPLET:case de.OBJECT:case de.MARQUEE:{DI(t,r);break}case de.IFRAME:{$I(t,r);break}case de.SELECT:{WI(t,r);break}case de.OPTION:case de.OPTGROUP:{zI(t,r);break}case de.NOEMBED:case de.NOFRAMES:{Pw(t,r);break}case de.FRAMESET:{EI(t,r);break}case de.TEXTAREA:{UI(t,r);break}case de.NOSCRIPT:{t.options.scriptingEnabled?Pw(t,r):kw(t,r);break}case de.PLAINTEXT:{AI(t,r);break}case de.COL:case de.TH:case de.TD:case de.TR:case de.HEAD:case de.FRAME:case de.TBODY:case de.TFOOT:case de.THEAD:case de.CAPTION:case de.COLGROUP:break;default:kw(t,r)}}function YI(t,r){if(t.openElements.hasInScope(de.BODY)&&(t.insertionMode=We.AFTER_BODY,t.options.sourceCodeLocationInfo)){const i=t.openElements.tryPeekProperlyNestedBodyElement();i&&t._setEndLocation(i,r)}}function XI(t,r){t.openElements.hasInScope(de.BODY)&&(t.insertionMode=We.AFTER_BODY,cS(t,r))}function QI(t,r){const i=r.tagID;t.openElements.hasInScope(i)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(i))}function ZI(t){const r=t.openElements.tmplCount>0,{formElement:i}=t;r||(t.formElement=null),(i||r)&&t.openElements.hasInScope(de.FORM)&&(t.openElements.generateImpliedEndTags(),r?t.openElements.popUntilTagNamePopped(de.FORM):i&&t.openElements.remove(i))}function eN(t){t.openElements.hasInButtonScope(de.P)||t._insertFakeElement(rt.P,de.P),t._closePElement()}function tN(t){t.openElements.hasInListItemScope(de.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(de.LI),t.openElements.popUntilTagNamePopped(de.LI))}function rN(t,r){const i=r.tagID;t.openElements.hasInScope(i)&&(t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i))}function nN(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function iN(t,r){const i=r.tagID;t.openElements.hasInScope(i)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(i),t.activeFormattingElements.clearToLastMarker())}function sN(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(rt.BR,de.BR),t.openElements.pop(),t.framesetOk=!1}function Z1(t,r){const i=r.tagName,E=r.tagID;for(let R=t.openElements.stackTop;R>0;R--){const V=t.openElements.items[R],te=t.openElements.tagIDs[R];if(E===te&&(E!==de.UNKNOWN||t.treeAdapter.getTagName(V)===i)){t.openElements.generateImpliedEndTagsWithExclusion(E),t.openElements.stackTop>=R&&t.openElements.shortenToLength(R);break}if(t._isSpecialElement(V,te))break}}function ec(t,r){switch(r.tagID){case de.A:case de.B:case de.I:case de.S:case de.U:case de.EM:case de.TT:case de.BIG:case de.CODE:case de.FONT:case de.NOBR:case de.SMALL:case de.STRIKE:case de.STRONG:{$f(t,r);break}case de.P:{eN(t);break}case de.DL:case de.UL:case de.OL:case de.DIR:case de.DIV:case de.NAV:case de.PRE:case de.MAIN:case de.MENU:case de.ASIDE:case de.BUTTON:case de.CENTER:case de.FIGURE:case de.FOOTER:case de.HEADER:case de.HGROUP:case de.DIALOG:case de.ADDRESS:case de.ARTICLE:case de.DETAILS:case de.SEARCH:case de.SECTION:case de.SUMMARY:case de.LISTING:case de.FIELDSET:case de.BLOCKQUOTE:case de.FIGCAPTION:{QI(t,r);break}case de.LI:{tN(t);break}case de.DD:case de.DT:{rN(t,r);break}case de.H1:case de.H2:case de.H3:case de.H4:case de.H5:case de.H6:{nN(t);break}case de.BR:{sN(t);break}case de.BODY:{YI(t,r);break}case de.HTML:{XI(t,r);break}case de.FORM:{ZI(t);break}case de.APPLET:case de.OBJECT:case de.MARQUEE:{iN(t,r);break}case de.TEMPLATE:{es(t,r);break}default:Z1(t,r)}}function eS(t,r){t.tmplInsertionModeStack.length>0?oS(t,r):Wf(t,r)}function aN(t,r){var i;r.tagID===de.SCRIPT&&((i=t.scriptHandler)===null||i===void 0||i.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function oN(t,r){t._err(r,ut.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(r)}function Lp(t,r){if(t.openElements.currentTagId!==void 0&&K1.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=We.IN_TABLE_TEXT,r.type){case Er.CHARACTER:{rS(t,r);break}case Er.WHITESPACE_CHARACTER:{tS(t,r);break}}else ua(t,r)}function cN(t,r){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(r,xt.HTML),t.insertionMode=We.IN_CAPTION}function lN(t,r){t.openElements.clearBackToTableContext(),t._insertElement(r,xt.HTML),t.insertionMode=We.IN_COLUMN_GROUP}function uN(t,r){t.openElements.clearBackToTableContext(),t._insertFakeElement(rt.COLGROUP,de.COLGROUP),t.insertionMode=We.IN_COLUMN_GROUP,zf(t,r)}function dN(t,r){t.openElements.clearBackToTableContext(),t._insertElement(r,xt.HTML),t.insertionMode=We.IN_TABLE_BODY}function hN(t,r){t.openElements.clearBackToTableContext(),t._insertFakeElement(rt.TBODY,de.TBODY),t.insertionMode=We.IN_TABLE_BODY,tc(t,r)}function pN(t,r){t.openElements.hasInTableScope(de.TABLE)&&(t.openElements.popUntilTagNamePopped(de.TABLE),t._resetInsertionMode(),t._processStartTag(r))}function fN(t,r){Q1(r)?t._appendElement(r,xt.HTML):ua(t,r),r.ackSelfClosing=!0}function mN(t,r){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(r,xt.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function ls(t,r){switch(r.tagID){case de.TD:case de.TH:case de.TR:{hN(t,r);break}case de.STYLE:case de.SCRIPT:case de.TEMPLATE:{zn(t,r);break}case de.COL:{uN(t,r);break}case de.FORM:{mN(t,r);break}case de.TABLE:{pN(t,r);break}case de.TBODY:case de.TFOOT:case de.THEAD:{dN(t,r);break}case de.INPUT:{fN(t,r);break}case de.CAPTION:{cN(t,r);break}case de.COLGROUP:{lN(t,r);break}default:ua(t,r)}}function Ws(t,r){switch(r.tagID){case de.TABLE:{t.openElements.hasInTableScope(de.TABLE)&&(t.openElements.popUntilTagNamePopped(de.TABLE),t._resetInsertionMode());break}case de.TEMPLATE:{es(t,r);break}case de.BODY:case de.CAPTION:case de.COL:case de.COLGROUP:case de.HTML:case de.TBODY:case de.TD:case de.TFOOT:case de.TH:case de.THEAD:case de.TR:break;default:ua(t,r)}}function ua(t,r){const i=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,Zo(t,r),t.fosterParentingEnabled=i}function tS(t,r){t.pendingCharacterTokens.push(r)}function rS(t,r){t.pendingCharacterTokens.push(r),t.hasNonWhitespacePendingCharacterToken=!0}function As(t,r){let i=0;if(t.hasNonWhitespacePendingCharacterToken)for(;i<t.pendingCharacterTokens.length;i++)ua(t,t.pendingCharacterTokens[i]);else for(;i<t.pendingCharacterTokens.length;i++)t._insertCharacters(t.pendingCharacterTokens[i]);t.insertionMode=t.originalInsertionMode,t._processToken(r)}const nS=new Set([de.CAPTION,de.COL,de.COLGROUP,de.TBODY,de.TD,de.TFOOT,de.TH,de.THEAD,de.TR]);function gN(t,r){const i=r.tagID;nS.has(i)?t.openElements.hasInTableScope(de.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(de.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=We.IN_TABLE,ls(t,r)):mn(t,r)}function _N(t,r){const i=r.tagID;switch(i){case de.CAPTION:case de.TABLE:{t.openElements.hasInTableScope(de.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(de.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=We.IN_TABLE,i===de.TABLE&&Ws(t,r));break}case de.BODY:case de.COL:case de.COLGROUP:case de.HTML:case de.TBODY:case de.TD:case de.TFOOT:case de.TH:case de.THEAD:case de.TR:break;default:ec(t,r)}}function zf(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.COL:{t._appendElement(r,xt.HTML),r.ackSelfClosing=!0;break}case de.TEMPLATE:{zn(t,r);break}default:To(t,r)}}function bN(t,r){switch(r.tagID){case de.COLGROUP:{t.openElements.currentTagId===de.COLGROUP&&(t.openElements.pop(),t.insertionMode=We.IN_TABLE);break}case de.TEMPLATE:{es(t,r);break}case de.COL:break;default:To(t,r)}}function To(t,r){t.openElements.currentTagId===de.COLGROUP&&(t.openElements.pop(),t.insertionMode=We.IN_TABLE,t._processToken(r))}function tc(t,r){switch(r.tagID){case de.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(r,xt.HTML),t.insertionMode=We.IN_ROW;break}case de.TH:case de.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(rt.TR,de.TR),t.insertionMode=We.IN_ROW,rc(t,r);break}case de.CAPTION:case de.COL:case de.COLGROUP:case de.TBODY:case de.TFOOT:case de.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE,ls(t,r));break}default:ls(t,r)}}function Xp(t,r){const i=r.tagID;switch(r.tagID){case de.TBODY:case de.TFOOT:case de.THEAD:{t.openElements.hasInTableScope(i)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE);break}case de.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE,Ws(t,r));break}case de.BODY:case de.CAPTION:case de.COL:case de.COLGROUP:case de.HTML:case de.TD:case de.TH:case de.TR:break;default:Ws(t,r)}}function rc(t,r){switch(r.tagID){case de.TH:case de.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(r,xt.HTML),t.insertionMode=We.IN_CELL,t.activeFormattingElements.insertMarker();break}case de.CAPTION:case de.COL:case de.COLGROUP:case de.TBODY:case de.TFOOT:case de.THEAD:case de.TR:{t.openElements.hasInTableScope(de.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY,tc(t,r));break}default:ls(t,r)}}function iS(t,r){switch(r.tagID){case de.TR:{t.openElements.hasInTableScope(de.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY);break}case de.TABLE:{t.openElements.hasInTableScope(de.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY,Xp(t,r));break}case de.TBODY:case de.TFOOT:case de.THEAD:{(t.openElements.hasInTableScope(r.tagID)||t.openElements.hasInTableScope(de.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY,Xp(t,r));break}case de.BODY:case de.CAPTION:case de.COL:case de.COLGROUP:case de.HTML:case de.TD:case de.TH:break;default:Ws(t,r)}}function vN(t,r){const i=r.tagID;nS.has(i)?(t.openElements.hasInTableScope(de.TD)||t.openElements.hasInTableScope(de.TH))&&(t._closeTableCell(),rc(t,r)):mn(t,r)}function wN(t,r){const i=r.tagID;switch(i){case de.TD:case de.TH:{t.openElements.hasInTableScope(i)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(i),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=We.IN_ROW);break}case de.TABLE:case de.TBODY:case de.TFOOT:case de.THEAD:case de.TR:{t.openElements.hasInTableScope(i)&&(t._closeTableCell(),iS(t,r));break}case de.BODY:case de.CAPTION:case de.COL:case de.COLGROUP:case de.HTML:break;default:ec(t,r)}}function sS(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.OPTION:{t.openElements.currentTagId===de.OPTION&&t.openElements.pop(),t._insertElement(r,xt.HTML);break}case de.OPTGROUP:{t.openElements.currentTagId===de.OPTION&&t.openElements.pop(),t.openElements.currentTagId===de.OPTGROUP&&t.openElements.pop(),t._insertElement(r,xt.HTML);break}case de.HR:{t.openElements.currentTagId===de.OPTION&&t.openElements.pop(),t.openElements.currentTagId===de.OPTGROUP&&t.openElements.pop(),t._appendElement(r,xt.HTML),r.ackSelfClosing=!0;break}case de.INPUT:case de.KEYGEN:case de.TEXTAREA:case de.SELECT:{t.openElements.hasInSelectScope(de.SELECT)&&(t.openElements.popUntilTagNamePopped(de.SELECT),t._resetInsertionMode(),r.tagID!==de.SELECT&&t._processStartTag(r));break}case de.SCRIPT:case de.TEMPLATE:{zn(t,r);break}}}function aS(t,r){switch(r.tagID){case de.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===de.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===de.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===de.OPTGROUP&&t.openElements.pop();break}case de.OPTION:{t.openElements.currentTagId===de.OPTION&&t.openElements.pop();break}case de.SELECT:{t.openElements.hasInSelectScope(de.SELECT)&&(t.openElements.popUntilTagNamePopped(de.SELECT),t._resetInsertionMode());break}case de.TEMPLATE:{es(t,r);break}}}function yN(t,r){const i=r.tagID;i===de.CAPTION||i===de.TABLE||i===de.TBODY||i===de.TFOOT||i===de.THEAD||i===de.TR||i===de.TD||i===de.TH?(t.openElements.popUntilTagNamePopped(de.SELECT),t._resetInsertionMode(),t._processStartTag(r)):sS(t,r)}function SN(t,r){const i=r.tagID;i===de.CAPTION||i===de.TABLE||i===de.TBODY||i===de.TFOOT||i===de.THEAD||i===de.TR||i===de.TD||i===de.TH?t.openElements.hasInTableScope(i)&&(t.openElements.popUntilTagNamePopped(de.SELECT),t._resetInsertionMode(),t.onEndTag(r)):aS(t,r)}function xN(t,r){switch(r.tagID){case de.BASE:case de.BASEFONT:case de.BGSOUND:case de.LINK:case de.META:case de.NOFRAMES:case de.SCRIPT:case de.STYLE:case de.TEMPLATE:case de.TITLE:{zn(t,r);break}case de.CAPTION:case de.COLGROUP:case de.TBODY:case de.TFOOT:case de.THEAD:{t.tmplInsertionModeStack[0]=We.IN_TABLE,t.insertionMode=We.IN_TABLE,ls(t,r);break}case de.COL:{t.tmplInsertionModeStack[0]=We.IN_COLUMN_GROUP,t.insertionMode=We.IN_COLUMN_GROUP,zf(t,r);break}case de.TR:{t.tmplInsertionModeStack[0]=We.IN_TABLE_BODY,t.insertionMode=We.IN_TABLE_BODY,tc(t,r);break}case de.TD:case de.TH:{t.tmplInsertionModeStack[0]=We.IN_ROW,t.insertionMode=We.IN_ROW,rc(t,r);break}default:t.tmplInsertionModeStack[0]=We.IN_BODY,t.insertionMode=We.IN_BODY,mn(t,r)}}function EN(t,r){r.tagID===de.TEMPLATE&&es(t,r)}function oS(t,r){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(de.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(r)):Wf(t,r)}function ON(t,r){r.tagID===de.HTML?mn(t,r):Co(t,r)}function cS(t,r){var i;if(r.tagID===de.HTML){if(t.fragmentContext||(t.insertionMode=We.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===de.HTML){t._setEndLocation(t.openElements.items[0],r);const E=t.openElements.items[1];E&&!(!((i=t.treeAdapter.getNodeSourceCodeLocation(E))===null||i===void 0)&&i.endTag)&&t._setEndLocation(E,r)}}else Co(t,r)}function Co(t,r){t.insertionMode=We.IN_BODY,Zo(t,r)}function TN(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.FRAMESET:{t._insertElement(r,xt.HTML);break}case de.FRAME:{t._appendElement(r,xt.HTML),r.ackSelfClosing=!0;break}case de.NOFRAMES:{zn(t,r);break}}}function CN(t,r){r.tagID===de.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==de.FRAMESET&&(t.insertionMode=We.AFTER_FRAMESET))}function PN(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.NOFRAMES:{zn(t,r);break}}}function kN(t,r){r.tagID===de.HTML&&(t.insertionMode=We.AFTER_AFTER_FRAMESET)}function AN(t,r){r.tagID===de.HTML?mn(t,r):uo(t,r)}function uo(t,r){t.insertionMode=We.IN_BODY,Zo(t,r)}function IN(t,r){switch(r.tagID){case de.HTML:{mn(t,r);break}case de.NOFRAMES:{zn(t,r);break}}}function NN(t,r){r.chars=Dr,t._insertCharacters(r)}function RN(t,r){t._insertCharacters(r),t.framesetOk=!1}function lS(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==xt.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function LN(t,r){if(JA(r))lS(t),t._startTagOutsideForeignContent(r);else{const i=t._getAdjustedCurrentElement(),E=t.treeAdapter.getNamespaceURI(i);E===xt.MATHML?z1(r):E===xt.SVG&&(YA(r),V1(r)),qf(r),r.selfClosing?t._appendElement(r,E):t._insertElement(r,E),r.ackSelfClosing=!0}}function DN(t,r){if(r.tagID===de.P||r.tagID===de.BR){lS(t),t._endTagOutsideForeignContent(r);return}for(let i=t.openElements.stackTop;i>0;i--){const E=t.openElements.items[i];if(t.treeAdapter.getNamespaceURI(E)===xt.HTML){t._endTagOutsideForeignContent(r);break}const R=t.treeAdapter.getTagName(E);if(R.toLowerCase()===r.tagName){r.tagName=R,t.openElements.shortenToLength(i);break}}}function uS(t,r){return function(E){let R,V=0,te="";for(;R=t.exec(E);)V!==R.index&&(te+=E.substring(V,R.index)),te+=r.get(R[0].charCodeAt(0)),V=R.index+1;return te+E.substring(V)}}const MN=uS(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),FN=uS(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),BN=new Set([rt.AREA,rt.BASE,rt.BASEFONT,rt.BGSOUND,rt.BR,rt.COL,rt.EMBED,rt.FRAME,rt.HR,rt.IMG,rt.INPUT,rt.KEYGEN,rt.LINK,rt.META,rt.PARAM,rt.SOURCE,rt.TRACK,rt.WBR]);function jN(t,r){return r.treeAdapter.isElementNode(t)&&r.treeAdapter.getNamespaceURI(t)===xt.HTML&&BN.has(r.treeAdapter.getTagName(t))}const HN={treeAdapter:oi,scriptingEnabled:!0};function UN(t,r){const i={...HN,...r};return dS(t,i)}function qN(t,r){let i="";const E=r.treeAdapter.isElementNode(t)&&r.treeAdapter.getTagName(t)===rt.TEMPLATE&&r.treeAdapter.getNamespaceURI(t)===xt.HTML?r.treeAdapter.getTemplateContent(t):t,R=r.treeAdapter.getChildNodes(E);if(R)for(const V of R)i+=dS(V,r);return i}function dS(t,r){return r.treeAdapter.isElementNode(t)?$N(t,r):r.treeAdapter.isTextNode(t)?zN(t,r):r.treeAdapter.isCommentNode(t)?VN(t,r):r.treeAdapter.isDocumentTypeNode(t)?KN(t,r):""}function $N(t,r){const i=r.treeAdapter.getTagName(t);return`<${i}${WN(t,r)}>${jN(t,r)?"":`${qN(t,r)}</${i}>`}`}function WN(t,{treeAdapter:r}){let i="";for(const E of r.getAttrList(t)){if(i+=" ",E.namespace)switch(E.namespace){case xt.XML:{i+=`xml:${E.name}`;break}case xt.XMLNS:{E.name!=="xmlns"&&(i+="xmlns:"),i+=E.name;break}case xt.XLINK:{i+=`xlink:${E.name}`;break}default:i+=`${E.prefix}:${E.name}`}else i+=E.name;i+=`="${MN(E.value)}"`}return i}function zN(t,r){const{treeAdapter:i}=r,E=i.getTextNodeContent(t),R=i.getParentNode(t),V=R&&i.isElementNode(R)&&i.getTagName(R);return V&&i.getNamespaceURI(R)===xt.HTML&&xA(V,r.scriptingEnabled)?E:FN(E)}function VN(t,{treeAdapter:r}){return`<!--${r.getCommentNodeContent(t)}-->`}function KN(t,{treeAdapter:r}){return`<!DOCTYPE ${r.getDocumentTypeNodeName(t)}>`}function GN(t,r){return G1.parse(t,r)}function JN(t,r,i){typeof t=="string"&&(i=r,r=t,t=null);const E=G1.getFragmentParser(t,i);return E.tokenizer.write(r,!0),E.getFragment()}var Aw;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(Aw||(Aw={}));var Iw;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Iw||(Iw={}));var Nw;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Nw||(Nw={}));var Zr;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Zr||(Zr={}));var Rw;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Rw||(Rw={}));var Qp;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Qp||(Qp={}));var at;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(at||(at={}));var $e;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})($e||($e={}));at.A,$e.A,at.ADDRESS,$e.ADDRESS,at.ANNOTATION_XML,$e.ANNOTATION_XML,at.APPLET,$e.APPLET,at.AREA,$e.AREA,at.ARTICLE,$e.ARTICLE,at.ASIDE,$e.ASIDE,at.B,$e.B,at.BASE,$e.BASE,at.BASEFONT,$e.BASEFONT,at.BGSOUND,$e.BGSOUND,at.BIG,$e.BIG,at.BLOCKQUOTE,$e.BLOCKQUOTE,at.BODY,$e.BODY,at.BR,$e.BR,at.BUTTON,$e.BUTTON,at.CAPTION,$e.CAPTION,at.CENTER,$e.CENTER,at.CODE,$e.CODE,at.COL,$e.COL,at.COLGROUP,$e.COLGROUP,at.DD,$e.DD,at.DESC,$e.DESC,at.DETAILS,$e.DETAILS,at.DIALOG,$e.DIALOG,at.DIR,$e.DIR,at.DIV,$e.DIV,at.DL,$e.DL,at.DT,$e.DT,at.EM,$e.EM,at.EMBED,$e.EMBED,at.FIELDSET,$e.FIELDSET,at.FIGCAPTION,$e.FIGCAPTION,at.FIGURE,$e.FIGURE,at.FONT,$e.FONT,at.FOOTER,$e.FOOTER,at.FOREIGN_OBJECT,$e.FOREIGN_OBJECT,at.FORM,$e.FORM,at.FRAME,$e.FRAME,at.FRAMESET,$e.FRAMESET,at.H1,$e.H1,at.H2,$e.H2,at.H3,$e.H3,at.H4,$e.H4,at.H5,$e.H5,at.H6,$e.H6,at.HEAD,$e.HEAD,at.HEADER,$e.HEADER,at.HGROUP,$e.HGROUP,at.HR,$e.HR,at.HTML,$e.HTML,at.I,$e.I,at.IMG,$e.IMG,at.IMAGE,$e.IMAGE,at.INPUT,$e.INPUT,at.IFRAME,$e.IFRAME,at.KEYGEN,$e.KEYGEN,at.LABEL,$e.LABEL,at.LI,$e.LI,at.LINK,$e.LINK,at.LISTING,$e.LISTING,at.MAIN,$e.MAIN,at.MALIGNMARK,$e.MALIGNMARK,at.MARQUEE,$e.MARQUEE,at.MATH,$e.MATH,at.MENU,$e.MENU,at.META,$e.META,at.MGLYPH,$e.MGLYPH,at.MI,$e.MI,at.MO,$e.MO,at.MN,$e.MN,at.MS,$e.MS,at.MTEXT,$e.MTEXT,at.NAV,$e.NAV,at.NOBR,$e.NOBR,at.NOFRAMES,$e.NOFRAMES,at.NOEMBED,$e.NOEMBED,at.NOSCRIPT,$e.NOSCRIPT,at.OBJECT,$e.OBJECT,at.OL,$e.OL,at.OPTGROUP,$e.OPTGROUP,at.OPTION,$e.OPTION,at.P,$e.P,at.PARAM,$e.PARAM,at.PLAINTEXT,$e.PLAINTEXT,at.PRE,$e.PRE,at.RB,$e.RB,at.RP,$e.RP,at.RT,$e.RT,at.RTC,$e.RTC,at.RUBY,$e.RUBY,at.S,$e.S,at.SCRIPT,$e.SCRIPT,at.SEARCH,$e.SEARCH,at.SECTION,$e.SECTION,at.SELECT,$e.SELECT,at.SOURCE,$e.SOURCE,at.SMALL,$e.SMALL,at.SPAN,$e.SPAN,at.STRIKE,$e.STRIKE,at.STRONG,$e.STRONG,at.STYLE,$e.STYLE,at.SUB,$e.SUB,at.SUMMARY,$e.SUMMARY,at.SUP,$e.SUP,at.TABLE,$e.TABLE,at.TBODY,$e.TBODY,at.TEMPLATE,$e.TEMPLATE,at.TEXTAREA,$e.TEXTAREA,at.TFOOT,$e.TFOOT,at.TD,$e.TD,at.TH,$e.TH,at.THEAD,$e.THEAD,at.TITLE,$e.TITLE,at.TR,$e.TR,at.TRACK,$e.TRACK,at.TT,$e.TT,at.U,$e.U,at.UL,$e.UL,at.SVG,$e.SVG,at.VAR,$e.VAR,at.WBR,$e.WBR,at.XMP,$e.XMP;const Dt=$e;Zr.HTML+"",Dt.ADDRESS,Dt.APPLET,Dt.AREA,Dt.ARTICLE,Dt.ASIDE,Dt.BASE,Dt.BASEFONT,Dt.BGSOUND,Dt.BLOCKQUOTE,Dt.BODY,Dt.BR,Dt.BUTTON,Dt.CAPTION,Dt.CENTER,Dt.COL,Dt.COLGROUP,Dt.DD,Dt.DETAILS,Dt.DIR,Dt.DIV,Dt.DL,Dt.DT,Dt.EMBED,Dt.FIELDSET,Dt.FIGCAPTION,Dt.FIGURE,Dt.FOOTER,Dt.FORM,Dt.FRAME,Dt.FRAMESET,Dt.H1,Dt.H2,Dt.H3,Dt.H4,Dt.H5,Dt.H6,Dt.HEAD,Dt.HEADER,Dt.HGROUP,Dt.HR,Dt.HTML,Dt.IFRAME,Dt.IMG,Dt.INPUT,Dt.LI,Dt.LINK,Dt.LISTING,Dt.MAIN,Dt.MARQUEE,Dt.MENU,Dt.META,Dt.NAV,Dt.NOEMBED,Dt.NOFRAMES,Dt.NOSCRIPT,Dt.OBJECT,Dt.OL,Dt.P,Dt.PARAM,Dt.PLAINTEXT,Dt.PRE,Dt.SCRIPT,Dt.SECTION,Dt.SELECT,Dt.SOURCE,Dt.STYLE,Dt.SUMMARY,Dt.TABLE,Dt.TBODY,Dt.TD,Dt.TEMPLATE,Dt.TEXTAREA,Dt.TFOOT,Dt.TH,Dt.THEAD,Dt.TITLE,Dt.TR,Dt.TRACK,Dt.UL,Dt.WBR,Dt.XMP,Zr.MATHML+"",Dt.MI,Dt.MO,Dt.MN,Dt.MS,Dt.MTEXT,Dt.ANNOTATION_XML,Zr.SVG+"",Dt.TITLE,Dt.FOREIGN_OBJECT,Dt.DESC,Zr.XLINK+"",Zr.XML+"",Zr.XMLNS+"";Dt.H1,Dt.H2,Dt.H3,Dt.H4,Dt.H5,Dt.H6;at.STYLE,at.SCRIPT,at.XMP,at.IFRAME,at.NOEMBED,at.NOFRAMES,at.PLAINTEXT;var bi;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(bi||(bi={}));bi.DATA,bi.RCDATA,bi.RAWTEXT,bi.SCRIPT_DATA,bi.PLAINTEXT,bi.CDATA_SECTION;const YN=new Set([$e.DD,$e.DT,$e.LI,$e.OPTGROUP,$e.OPTION,$e.P,$e.RB,$e.RP,$e.RT,$e.RTC]);[...YN,$e.CAPTION,$e.COLGROUP,$e.TBODY,$e.TD,$e.TFOOT,$e.TH,$e.THEAD,$e.TR];const hS=new Set([$e.APPLET,$e.CAPTION,$e.HTML,$e.MARQUEE,$e.OBJECT,$e.TABLE,$e.TD,$e.TEMPLATE,$e.TH]);[...hS,$e.OL,$e.UL];[...hS,$e.BUTTON];$e.ANNOTATION_XML,$e.MI,$e.MN,$e.MO,$e.MS,$e.MTEXT;$e.DESC,$e.FOREIGN_OBJECT,$e.TITLE;$e.TR,$e.TEMPLATE,$e.HTML;$e.TBODY,$e.TFOOT,$e.THEAD,$e.TEMPLATE,$e.HTML;$e.TABLE,$e.TEMPLATE,$e.HTML;$e.TD,$e.TH;var Zp;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Zp||(Zp={}));Zp.Marker;new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t]));Zr.XLINK,Zr.XLINK,Zr.XLINK,Zr.XLINK,Zr.XLINK,Zr.XLINK,Zr.XLINK,Zr.XML,Zr.XML,Zr.XMLNS,Zr.XMLNS;new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t]));$e.B,$e.BIG,$e.BLOCKQUOTE,$e.BODY,$e.BR,$e.CENTER,$e.CODE,$e.DD,$e.DIV,$e.DL,$e.DT,$e.EM,$e.EMBED,$e.H1,$e.H2,$e.H3,$e.H4,$e.H5,$e.H6,$e.HEAD,$e.HR,$e.I,$e.IMG,$e.LI,$e.LISTING,$e.MENU,$e.META,$e.NOBR,$e.OL,$e.P,$e.PRE,$e.RUBY,$e.S,$e.SMALL,$e.SPAN,$e.STRONG,$e.STRIKE,$e.SUB,$e.SUP,$e.TABLE,$e.TT,$e.U,$e.UL,$e.VAR;var Lw;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Lw||(Lw={}));$e.TABLE,$e.TBODY,$e.TFOOT,$e.THEAD,$e.TR;$e.CAPTION,$e.COL,$e.COLGROUP,$e.TBODY,$e.TD,$e.TFOOT,$e.TH,$e.THEAD,$e.TR;at.AREA,at.BASE,at.BASEFONT,at.BGSOUND,at.BR,at.COL,at.EMBED,at.FRAME,at.HR,at.IMG,at.INPUT,at.KEYGEN,at.LINK,at.META,at.PARAM,at.SOURCE,at.TRACK,at.WBR;let pS=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(r){this.parent=r}get previousSibling(){return this.prev}set previousSibling(r){this.prev=r}get nextSibling(){return this.next}set nextSibling(r){this.next=r}cloneNode(r=!1){return wS(this,r)}};class Vf extends pS{constructor(r){super(),this.data=r}get nodeValue(){return this.data}set nodeValue(r){this.data=r}}class fS extends Vf{constructor(){super(...arguments),this.type=dr.Text}get nodeType(){return 3}}class mS extends Vf{constructor(){super(...arguments),this.type=dr.Comment}get nodeType(){return 8}}class gS extends Vf{constructor(r,i){super(i),this.name=r,this.type=dr.Directive}get nodeType(){return 1}}class Kf extends pS{constructor(r){super(),this.children=r}get firstChild(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(r){this.children=r}}class XN extends Kf{constructor(){super(...arguments),this.type=dr.CDATA}get nodeType(){return 4}}class ef extends Kf{constructor(){super(...arguments),this.type=dr.Root}get nodeType(){return 9}}let _S=class extends Kf{constructor(r,i,E=[],R=r==="script"?dr.Script:r==="style"?dr.Style:dr.Tag){super(E),this.name=r,this.attribs=i,this.type=R}get nodeType(){return 1}get tagName(){return this.name}set tagName(r){this.name=r}get attributes(){return Object.keys(this.attribs).map(r=>{var i,E;return{name:r,value:this.attribs[r],namespace:(i=this["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(E=this["x-attribsPrefix"])===null||E===void 0?void 0:E[r]}})}};function bS(t){return yf(t)}function QN(t){return t.type===dr.CDATA}function ho(t){return t.type===dr.Text}function vS(t){return t.type===dr.Comment}function tf(t){return t.type===dr.Directive}function ZN(t){return t.type===dr.Root}function wS(t,r=!1){let i;if(ho(t))i=new fS(t.data);else if(vS(t))i=new mS(t.data);else if(bS(t)){const E=r?Dp(t.children):[],R=new _S(t.name,{...t.attribs},E);E.forEach(V=>V.parent=R),t.namespace!=null&&(R.namespace=t.namespace),t["x-attribsNamespace"]&&(R["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(R["x-attribsPrefix"]={...t["x-attribsPrefix"]}),i=R}else if(QN(t)){const E=r?Dp(t.children):[],R=new XN(E);E.forEach(V=>V.parent=R),i=R}else if(ZN(t)){const E=r?Dp(t.children):[],R=new ef(E);E.forEach(V=>V.parent=R),t["x-mode"]&&(R["x-mode"]=t["x-mode"]),i=R}else if(tf(t)){const E=new gS(t.name,t.data);t["x-name"]!=null&&(E["x-name"]=t["x-name"],E["x-publicId"]=t["x-publicId"],E["x-systemId"]=t["x-systemId"]),i=E}else throw new Error(`Not implemented yet: ${t.type}`);return i.startIndex=t.startIndex,i.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(i.sourceCodeLocation=t.sourceCodeLocation),i}function Dp(t){const r=t.map(i=>wS(i,!0));for(let i=1;i<r.length;i++)r[i].prev=r[i-1],r[i-1].next=r[i];return r}function Dw(t){const r=t.includes('"')?"'":'"';return r+t+r}function e3(t,r,i){let E="!DOCTYPE ";return t&&(E+=t),r?E+=` PUBLIC ${Dw(r)}`:i&&(E+=" SYSTEM"),i&&(E+=` ${Dw(i)}`),E}const vi={isCommentNode:vS,isElementNode:bS,isTextNode:ho,createDocument(){const t=new ef([]);return t["x-mode"]=Qp.NO_QUIRKS,t},createDocumentFragment(){return new ef([])},createElement(t,r,i){const E=Object.create(null),R=Object.create(null),V=Object.create(null);for(let P=0;P<i.length;P++){const e=i[P].name;E[e]=i[P].value,R[e]=i[P].namespace,V[e]=i[P].prefix}const te=new _S(t,E,[]);return te.namespace=r,te["x-attribsNamespace"]=R,te["x-attribsPrefix"]=V,te},createCommentNode(t){return new mS(t)},createTextNode(t){return new fS(t)},appendChild(t,r){const i=t.children[t.children.length-1];i&&(i.next=r,r.prev=i),t.children.push(r),r.parent=t},insertBefore(t,r,i){const E=t.children.indexOf(i),{prev:R}=i;R&&(R.next=r,r.prev=R),i.prev=r,r.next=i,t.children.splice(E,0,r),r.parent=t},setTemplateContent(t,r){vi.appendChild(t,r)},getTemplateContent(t){return t.children[0]},setDocumentType(t,r,i,E){const R=e3(r,i,E);let V=t.children.find(te=>tf(te)&&te.name==="!doctype");V?V.data=R??null:(V=new gS("!doctype",R),vi.appendChild(t,V)),V["x-name"]=r,V["x-publicId"]=i,V["x-systemId"]=E},setDocumentMode(t,r){t["x-mode"]=r},getDocumentMode(t){return t["x-mode"]},detachNode(t){if(t.parent){const r=t.parent.children.indexOf(t),{prev:i,next:E}=t;t.prev=null,t.next=null,i&&(i.next=E),E&&(E.prev=i),t.parent.children.splice(r,1),t.parent=null}},insertText(t,r){const i=t.children[t.children.length-1];i&&ho(i)?i.data+=r:vi.appendChild(t,vi.createTextNode(r))},insertTextBefore(t,r,i){const E=t.children[t.children.indexOf(i)-1];E&&ho(E)?E.data+=r:vi.insertBefore(t,vi.createTextNode(r),i)},adoptAttributes(t,r){for(let i=0;i<r.length;i++){const E=r[i].name;t.attribs[E]===void 0&&(t.attribs[E]=r[i].value,t["x-attribsNamespace"][E]=r[i].namespace,t["x-attribsPrefix"][E]=r[i].prefix)}},getFirstChild(t){return t.children[0]},getChildNodes(t){return t.children},getParentNode(t){return t.parent},getAttrList(t){return t.attributes},getTagName(t){return t.name},getNamespaceURI(t){return t.namespace},getTextNodeContent(t){return t.data},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){var r;return(r=t["x-name"])!==null&&r!==void 0?r:""},getDocumentTypeNodePublicId(t){var r;return(r=t["x-publicId"])!==null&&r!==void 0?r:""},getDocumentTypeNodeSystemId(t){var r;return(r=t["x-systemId"])!==null&&r!==void 0?r:""},isDocumentTypeNode(t){return tf(t)&&t.name==="!doctype"},setNodeSourceCodeLocation(t,r){r&&(t.startIndex=r.startOffset,t.endIndex=r.endOffset),t.sourceCodeLocation=r},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,r){r.endOffset!=null&&(t.endIndex=r.endOffset),t.sourceCodeLocation={...t.sourceCodeLocation,...r}}};function t3(t,r,i,E){var R;return(R=r.treeAdapter)!==null&&R!==void 0||(r.treeAdapter=vi),r.scriptingEnabled!==!1&&(r.scriptingEnabled=!0),i?GN(t,r):JN(E,t,r)}const r3={treeAdapter:vi};function n3(t){const r="length"in t?t:[t];for(let E=0;E<r.length;E+=1){const R=r[E];Zi(R)&&Array.prototype.splice.call(r,E,1,...R.children)}let i="";for(let E=0;E<r.length;E+=1){const R=r[E];i+=UN(R,r3)}return i}const i3=O2((t,r,i,E)=>r._useHtmlParser2?cP(t,r):t3(t,r,i,E)),s3=iA(i3,(t,r)=>r._useHtmlParser2?Cf(t,r):n3(t)),a3=Pr({url:mr().url(),title:mr(),description:mr(),content:Pr({headings:sn(Pr({level:In(),text:mr(),hierarchy:mr()})),paragraphs:sn(Pr({text:mr(),wordCount:In(),sentiment:Hn(["positive","neutral","negative"]).optional()})),links:sn(Pr({href:mr(),text:mr(),type:Hn(["internal","external","email","phone"])})),images:sn(Pr({src:mr(),alt:mr().optional(),title:mr().optional(),dimensions:Pr({width:In(),height:In()}).optional()})),forms:sn(Pr({action:mr().optional(),method:mr().optional(),fields:sn(mr())}))}),metadata:Pr({metaDescription:mr().optional(),metaKeywords:sn(mr()),openGraph:Pr({title:mr().optional(),description:mr().optional(),image:mr().optional(),type:mr().optional()}),twitter:Pr({card:mr().optional(),title:mr().optional(),description:mr().optional(),image:mr().optional()}),canonicalUrl:mr().optional(),language:mr().optional()}),brandElements:Pr({colors:Pr({dominant:sn(mr()),palette:sn(Pr({color:mr(),usage:mr(),frequency:In()}))}),typography:Pr({fonts:sn(Pr({family:mr(),usage:Hn(["heading","body","accent"]),weight:mr().optional()})),headingStyles:sn(Pr({level:mr(),fontSize:mr(),fontWeight:mr(),color:mr()}))}),layout:Pr({structure:Hn(["single-column","multi-column","grid","asymmetric"]),navigation:Pr({type:Hn(["horizontal","vertical","hamburger","mega"]),items:sn(mr())}),sections:sn(Pr({type:mr(),content:mr()}))})}),technicalDetails:Pr({performance:Pr({loadTime:In(),domContentLoaded:In(),firstContentfulPaint:In().optional(),largestContentfulPaint:In().optional()}),seo:Pr({hasStructuredData:to(),hasRobotsMeta:to(),hasCanonicalUrl:to(),headingStructure:Hn(["good","fair","poor"]),imageAltTags:In()}),accessibility:Pr({hasSkipLinks:to(),colorContrast:Hn(["good","fair","poor"]),semanticMarkup:Hn(["good","fair","poor"])})}),businessInsights:Pr({companySize:Hn(["startup","small","medium","enterprise"]).optional(),industry:mr().optional(),businessModel:sn(mr()),targetAudience:sn(mr()),valuePropositions:sn(mr()),callsToAction:sn(Pr({text:mr(),type:Hn(["primary","secondary","tertiary"]),location:mr()}))}),screenshots:sn(Pr({type:Hn(["full-page","above-fold","mobile","tablet"]),path:mr(),dimensions:Pr({width:In(),height:In()})})),analyzedAt:mr(),analysisVersion:mr()});class o3{constructor(){Ec(this,"browser",null);Ec(this,"context",null)}async initialize(){try{this.browser=await hC.launch({headless:!0,args:["--no-sandbox","--disable-setuid-sandbox","--disable-dev-shm-usage","--disable-accelerated-2d-canvas","--no-first-run","--no-zygote","--disable-gpu"]}),this.context=await this.browser.newContext({viewport:{width:1920,height:1080},userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",deviceScaleFactor:1,hasTouch:!1,javaScriptEnabled:!0}),console.log("🚀 Enhanced website analyzer initialized")}catch(r){throw console.error("❌ Failed to initialize browser:",r),r}}async analyzeWebsite(r){this.context||await this.initialize();const i=await this.context.newPage(),E=Date.now();try{console.log(`🔍 Starting comprehensive analysis of: ${r}`);const R=await i.goto(r,{waitUntil:"networkidle",timeout:3e4});if(!R||!R.ok())throw new Error(`Failed to load page: ${(R==null?void 0:R.status())||"Unknown error"}`);await i.waitForTimeout(2e3);const V=await this.extractPerformanceMetrics(i,E),te=await i.content(),P=s3(te),[e,U,C,w,g,u,_]=await Promise.all([this.extractBasicInfo(i,P),this.extractContent(i,P),this.extractMetadata(i,P),this.extractBrandElements(i,P),this.extractTechnicalDetails(i,P,V),this.extractBusinessInsights(i,P),this.takeScreenshots(i)]),f={url:r,title:e.title,description:e.description,content:U,metadata:C,brandElements:w,technicalDetails:g,businessInsights:u,screenshots:_,analyzedAt:new Date().toISOString(),analysisVersion:"2.0.0"};return await i.close(),a3.parse(f)}catch(R){throw await i.close(),console.error("❌ Website analysis failed:",R),new Error(`Failed to analyze website ${r}: ${R instanceof Error?R.message:"Unknown error"}`)}}async extractPerformanceMetrics(r,i){try{const E=await r.evaluate(()=>{var te,P;const R=performance.getEntriesByType("navigation")[0],V=performance.getEntriesByType("paint");return{domContentLoaded:R.domContentLoadedEventEnd-R.fetchStart,loadComplete:R.loadEventEnd-R.fetchStart,firstContentfulPaint:(te=V.find(e=>e.name==="first-contentful-paint"))==null?void 0:te.startTime,largestContentfulPaint:(P=V.find(e=>e.name==="largest-contentful-paint"))==null?void 0:P.startTime}});return{loadTime:Date.now()-i,...E}}catch{return{loadTime:Date.now()-i,domContentLoaded:0,firstContentfulPaint:0,largestContentfulPaint:0}}}async extractBasicInfo(r,i){const E=await r.title(),R=i('meta[name="description"]').attr("content")||"";return{title:E,description:R}}async extractContent(r,i){const E=[];i("h1, h2, h3, h4, h5, h6").each((e,U)=>{const C=i(U).text().trim(),w=parseInt(U.tagName.substring(1));C&&E.push({level:w,text:C,hierarchy:`h${w}`})});const R=[];i("p").each((e,U)=>{const C=i(U).text().trim();C&&C.length>20&&R.push({text:C,wordCount:C.split(" ").length})});const V=[];i("a[href]").each((e,U)=>{const C=i(U).attr("href"),w=i(U).text().trim();if(C){let g="external";C.startsWith("/")||C.includes(r.url())?g="internal":C.startsWith("mailto:")?g="email":C.startsWith("tel:")&&(g="phone"),V.push({href:C,text:w,type:g})}});const te=[];i("img[src]").each((e,U)=>{const C=i(U).attr("src"),w=i(U).attr("alt"),g=i(U).attr("title");C&&te.push({src:C,alt:w,title:g})});const P=[];return i("form").each((e,U)=>{const C=i(U).attr("action"),w=i(U).attr("method"),g=[];i(U).find("input, textarea, select").each((u,_)=>{const f=i(_).attr("name")||i(_).attr("id");f&&g.push(f)}),P.push({action:C,method:w,fields:g})}),{headings:E.slice(0,50),paragraphs:R.slice(0,20),links:V.slice(0,100),images:te.slice(0,30),forms:P}}async extractMetadata(r,i){var U;const E=i('meta[name="description"]').attr("content"),R=((U=i('meta[name="keywords"]').attr("content"))==null?void 0:U.split(",").map(C=>C.trim()))||[],V={title:i('meta[property="og:title"]').attr("content"),description:i('meta[property="og:description"]').attr("content"),image:i('meta[property="og:image"]').attr("content"),type:i('meta[property="og:type"]').attr("content")},te={card:i('meta[name="twitter:card"]').attr("content"),title:i('meta[name="twitter:title"]').attr("content"),description:i('meta[name="twitter:description"]').attr("content"),image:i('meta[name="twitter:image"]').attr("content")},P=i('link[rel="canonical"]').attr("href"),e=i("html").attr("lang");return{metaDescription:E,metaKeywords:R,openGraph:V,twitter:te,canonicalUrl:P,language:e}}async extractBrandElements(r,i){try{const E=await r.evaluate(()=>{const P=[],e=[],U=[];return document.querySelectorAll("*").forEach(C=>{const w=window.getComputedStyle(C),g=w.backgroundColor,u=w.color;g&&g!=="rgba(0, 0, 0, 0)"&&g!=="transparent"&&P.push(g),u&&u!=="rgba(0, 0, 0, 0)"&&P.push(u)}),document.querySelectorAll("h1, h2, h3, h4, h5, h6, p, span").forEach(C=>{const w=window.getComputedStyle(C),g=w.fontFamily;g&&e.push({family:g,usage:C.tagName.toLowerCase().startsWith("h")?"heading":"body",weight:w.fontWeight})}),document.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(C=>{const w=window.getComputedStyle(C);U.push({level:C.tagName.toLowerCase(),fontSize:w.fontSize,fontWeight:w.fontWeight,color:w.color})}),{colors:P,fonts:e,headingStyles:U}}),R=[...new Set(E.colors)].slice(0,20),V=E.fonts.reduce((P,e)=>(P.find(U=>U.family===e.family)||P.push(e),P),[]).slice(0,10),te={type:"horizontal",items:[]};return i("nav a, header a, .menu a").each((P,e)=>{const U=i(e).text().trim();U&&U.length<50&&te.items.push(U)}),{colors:{dominant:R.slice(0,5),palette:R.map(P=>({color:P,usage:"unknown",frequency:1}))},typography:{fonts:V,headingStyles:E.headingStyles.slice(0,6)},layout:{structure:"multi-column",navigation:te,sections:[]}}}catch(E){return console.error("Brand elements extraction failed:",E),{colors:{dominant:[],palette:[]},typography:{fonts:[],headingStyles:[]},layout:{structure:"single-column",navigation:{type:"horizontal",items:[]},sections:[]}}}}async extractTechnicalDetails(r,i,E){const R=i('script[type="application/ld+json"]').length>0,V=i('meta[name="robots"]').length>0,te=i('link[rel="canonical"]').length>0,P=[];i("h1, h2, h3, h4, h5, h6").each((C,w)=>{P.push(parseInt(w.tagName.substring(1)))});const e=P.length>0&&P[0]===1?"good":"fair",U=i("img[alt]").length;return{performance:E,seo:{hasStructuredData:R,hasRobotsMeta:V,hasCanonicalUrl:te,headingStructure:e,imageAltTags:U},accessibility:{hasSkipLinks:i('a[href^="#"]').length>0,colorContrast:"fair",semanticMarkup:"fair"}}}async extractBusinessInsights(r,i){const E=[];return i("button, .btn, .cta, a").each((R,V)=>{const te=i(V).text().trim();te&&(te.toLowerCase().includes("get started")||te.toLowerCase().includes("sign up")||te.toLowerCase().includes("learn more")||te.toLowerCase().includes("contact")||te.toLowerCase().includes("buy")||te.toLowerCase().includes("try"))&&E.push({text:te,type:"primary",location:"page"})}),{companySize:void 0,industry:void 0,businessModel:[],targetAudience:[],valuePropositions:[],callsToAction:E.slice(0,10)}}async takeScreenshots(r){const i=[],E=Date.now();try{const R=`/tmp/screenshot-full-${E}.png`;await r.screenshot({path:R,fullPage:!0}),i.push({type:"full-page",path:R,dimensions:{width:1920,height:1080}});const V=`/tmp/screenshot-fold-${E}.png`;await r.screenshot({path:V,clip:{x:0,y:0,width:1920,height:1080}}),i.push({type:"above-fold",path:V,dimensions:{width:1920,height:1080}})}catch(R){console.error("Screenshot capture failed:",R)}return i}extractContentForAI(r){let i=`Website Analysis for ${r.url}

`;return i+=`Title: ${r.title}
`,i+=`Description: ${r.description}

`,r.content.headings.length>0&&(i+=`Headings:
`,r.content.headings.slice(0,10).forEach(E=>{i+=`${E.hierarchy.toUpperCase()}: ${E.text}
`}),i+=`
`),r.content.paragraphs.length>0&&(i+=`Content Excerpts:
`,r.content.paragraphs.slice(0,5).forEach(E=>{i+=`${E.text}

`})),r.businessInsights.callsToAction.length>0&&(i+=`Calls to Action:
`,r.businessInsights.callsToAction.forEach(E=>{i+=`- ${E.text}
`}),i+=`
`),i}async cleanup(){try{this.context&&(await this.context.close(),this.context=null),this.browser&&(await this.browser.close(),this.browser=null),console.log("🧹 Enhanced website analyzer cleaned up")}catch(r){console.error("Cleanup error:",r)}}}const F3=new o3;export{a3 as EnhancedWebsiteAnalysisSchema,o3 as EnhancedWebsiteAnalyzer,F3 as enhancedWebsiteAnalyzer};
//# sourceMappingURL=enhanced-website-analyzer-SxfL-iDv.js.map
